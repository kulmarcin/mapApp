/*! For license information please see main.e52251af.js.LICENSE.txt */
(function(){var __webpack_modules__={7757:function(t,e,r){t.exports=r(9727)},5892:function(module,__webpack_exports__,__webpack_require__){"use strict";module=__webpack_require__.hmd(module),function(){var p,aa=[];function ba(t){return function(){return aa[t].apply(this,arguments)}}function ca(t,e){return aa[t]=e}function da(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function ea(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:da(t)}}function fa(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}var ha="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,r){t!=Array.prototype&&t!=Object.prototype&&(t[e]=r.value)},ia="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ja(t,e){if(e){var r=ia;t=t.split(".");for(var n=0;n<t.length-1;n++){var i=t[n];i in r||(r[i]={}),r=r[i]}(e=e(n=r[t=t[t.length-1]]))!=n&&null!=e&&ha(r,t,{configurable:!0,writable:!0,value:e})}}function la(){la=function(){},ia.Symbol||(ia.Symbol=ma)}function na(t,e){this.a=t,ha(this,"description",{configurable:!0,writable:!0,value:e})}ja("Array.prototype.find",(function(t){return t||function(t,e){t:{var r=this;r instanceof String&&(r=String(r));for(var n=r.length,i=0;i<n;i++){var o=r[i];if(t.call(e,o,i,r)){t=o;break t}}t=void 0}return t}})),na.prototype.toString=function(){return this.a};var ma=function(){var t=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new na("jscomp_symbol_"+(r||"")+"_"+t++,r)}}(),ra;function oa(){la();var t=ia.Symbol.iterator;t||(t=ia.Symbol.iterator=ia.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[t]&&ha(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return pa(da(this))}}),oa=function(){}}function pa(t){return oa(),(t={next:t})[ia.Symbol.iterator]=function(){return this},t}function qa(t,e){oa(),t instanceof String&&(t+="");var r=0,n={next:function(){if(r<t.length){var i=r++;return{value:e(i,t[i]),done:!1}}return n.next=function(){return{done:!0,value:void 0}},n.next()}};return n[Symbol.iterator]=function(){return n},n}if(ja("Array.prototype.keys",(function(t){return t||function(){return qa(this,(function(t){return t}))}})),"function"==typeof Object.setPrototypeOf)ra=Object.setPrototypeOf;else{var sa;t:{var ta={rg:!0},ua={};try{ua.__proto__=ta,sa=ua.rg;break t}catch(a){}sa=!1}ra=sa?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var va=ra;ja("Object.setPrototypeOf",(function(t){return t||va})),ja("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(r){e.reject(r)}}function r(){this.a=null}function n(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var i=ia.setTimeout;r.prototype.c=function(t){i(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var r=t[e];t[e]=null;try{r()}catch(n){this.f(n)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(n){r||(r=!0,t.call(e,n))}}var e=this,r=!1;return{resolve:t(this.S),reject:t(this.g)}},e.prototype.S=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.u(t);else{t:switch(typeof t){case"object":var r=null!=t;break t;case"function":r=!0;break t;default:r=!1}r?this.s(t):this.i(t)}},e.prototype.s=function(t){var e=void 0;try{e=t.then}catch(r){return void this.g(r)}"function"==typeof e?this.Wa(e,t):this.i(t)},e.prototype.g=function(t){this.j(2,t)},e.prototype.i=function(t){this.j(1,t)},e.prototype.j=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.m()},e.prototype.m=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)o.b(this.a[t]);this.a=null}};var o=new r;return e.prototype.u=function(t){var e=this.f();t.gf(e.resolve,e.reject)},e.prototype.Wa=function(t,e){var r=this.f();try{t.call(e,r.resolve,r.reject)}catch(n){r.reject(n)}},e.prototype.then=function(t,r){function n(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(r){o(r)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.gf(n(t,i),n(r,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.gf=function(t,e){function r(){switch(n.b){case 1:t(n.c);break;case 2:e(n.c);break;default:throw Error("Unexpected state: "+n.b)}}var n=this;null==this.a?o.b(r):this.a.push(r)},e.resolve=n,e.reject=function(t){return new e((function(e,r){r(t)}))},e.race=function(t){return new e((function(e,r){for(var i=ea(t),o=i.next();!o.done;o=i.next())n(o.value).gf(e,r)}))},e.all=function(t){var r=ea(t),i=r.next();return i.done?n([]):new e((function(t,e){function o(e){return function(r){a[e]=r,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,n(i.value).gf(o(a.length-1),e),i=r.next()}while(!i.done)}))},e})),ja("Object.entries",(function(t){return t||function(t){var e,r=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.push([e,t[e]]);return r}}));var wa="function"==typeof Object.assign?Object.assign:function(t,e){for(var r=1;r<arguments.length;r++){var n=arguments[r];if(n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};ja("Object.assign",(function(t){return t||wa})),ja("Math.log2",(function(t){return t||function(t){return Math.log(t)/Math.LN2}}));var ya=this||self;function za(t,e,r){t=t.split("."),r=r||ya,t[0]in r||"undefined"==typeof r.execScript||r.execScript("var "+t[0]);for(var n;t.length&&(n=t.shift());)t.length||void 0===e?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=e}function Aa(){}function Ba(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var r=Object.prototype.toString.call(t);if("[object Window]"==r)return"object";if("[object Array]"==r||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==r||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function Ca(t){var e=Ba(t);return"array"==e||"object"==e&&"number"==typeof t.length}function Da(t){return"function"==Ba(t)}function Ea(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Fa="closure_uid_"+(1e9*Math.random()>>>0),Ga=0;function Ha(t,e,r){return t.call.apply(t.bind,arguments)}function Ia(t,e,r){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function Ja(t,e,r){return(Ja=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ha:Ia).apply(null,arguments)}function Ka(t,e){var r=Array.prototype.slice.call(arguments,1);return function(){var e=r.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function t(t,e){za(t,e,void 0)}function u(t,e){function r(){}r.prototype=e.prototype,t.l=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.Ao=function(t,r,n){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[r].apply(t,i)}}function La(t){if(Error.captureStackTrace)Error.captureStackTrace(this,La);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function Ma(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Na(){this.b=this.a=null}u(La,Error),La.prototype.name="CustomError",Ma.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t},Ma.prototype.put=function(t){this.f(t),100>this.b&&(this.b++,t.next=this.a,this.a=t)};var Pa=new Ma((function(){return new Oa}),(function(t){t.reset()}));function Oa(){this.next=this.b=this.a=null}Na.prototype.add=function(t,e){var r=Pa.get();r.set(t,e),this.b?this.b.next=r:this.a=r,this.b=r},Na.prototype.remove=function(){var t=null;return this.a&&(t=this.a,this.a=this.a.next,this.a||(this.b=null),t.next=null),t},Oa.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Oa.prototype.reset=function(){this.next=this.b=this.a=null};var Qa=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ra(t,e){return-1!=t.indexOf(e)}function Sa(t,e){return t<e?-1:t>e?1:0}function Ta(t,e){for(var r in t)if(e.call(void 0,t[r],r,t))return!0;return!1}function Ua(t){for(var e in t)return!1;return!0}function Va(t){var e,r={};for(e in t)r[e]=t[e];return r}var Wa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Ya;function Xa(t,e){for(var r,n,i=1;i<arguments.length;i++){for(r in n=arguments[i])t[r]=n[r];for(var o=0;o<Wa.length;o++)r=Wa[o],Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}}t:{var Za=ya.navigator;if(Za){var $a=Za.userAgent;if($a){Ya=$a;break t}}Ya=""}function ab(t){return Ra(Ya,t)}var bb=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var r=0;r<t.length;r++)if(r in t&&t[r]===e)return r;return-1};function cb(t,e){this.b=t===db&&e||"",this.a=eb}var eb={},db={},fb=new cb(db,"");function gb(t,e){this.b=t===hb&&e||"",this.a=ib}gb.prototype.kc=function(){return 1};var ib={},hb={};function jb(){this.b="",this.c=kb,this.a=null}function lb(){var t=mb;return t instanceof jb&&t.constructor===jb&&t.c===kb?t.b:(Ba(t),"type_error:SafeHtml")}jb.prototype.kc=function(){return this.a};var kb={};function nb(t){var e=new jb;return e.b=t,e.a=0,e}nb("<!DOCTYPE html>");var mb=nb("");function ob(t){var e=new gb(hb,fb instanceof cb&&fb.constructor===cb&&fb.a===eb?fb.b:"type_error:Const");e instanceof gb&&e.constructor===gb&&e.a===ib?e=e.b:(Ba(e),e="type_error:TrustedResourceUrl"),t.src=e.toString()}function pb(t){return pb[" "](t),t}function qb(t,e){var r=rb;return Object.prototype.hasOwnProperty.call(r,t)?r[t]:r[t]=e(t)}nb("<br>"),pb[" "]=Aa;var sb=ab("Opera"),tb=ab("Trident")||ab("MSIE"),ub=ab("Edge"),vb=ab("Gecko")&&!(Ra(Ya.toLowerCase(),"webkit")&&!ab("Edge"))&&!(ab("Trident")||ab("MSIE"))&&!ab("Edge"),wb=Ra(Ya.toLowerCase(),"webkit")&&!ab("Edge"),zb;function xb(){var t=ya.document;return t?t.documentMode:void 0}t:{var Ab="",Bb=function(){var t=Ya;return vb?/rv:([^\);]+)(\)|;)/.exec(t):ub?/Edge\/([\d\.]+)/.exec(t):tb?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):wb?/WebKit\/(\S+)/.exec(t):sb?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Bb&&(Ab=Bb?Bb[1]:""),tb){var Cb=xb();if(null!=Cb&&Cb>parseFloat(Ab)){zb=String(Cb);break t}}zb=Ab}var rb={},Eb,Hb,Kb;function Db(t){return qb(t,(function(){for(var e=0,r=Qa(String(zb)).split("."),n=Qa(String(t)).split("."),i=Math.max(r.length,n.length),o=0;0==e&&o<i;o++){var a=r[o]||"",s=n[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=Sa(e=0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||Sa(0==a[2].length,0==s[2].length)||Sa(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}function Fb(t){var e=document;return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function Gb(t){ya.setTimeout((function(){throw t}),0)}function Ib(){var t=ya.MessageChannel;if("undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!ab("Presto")&&(t=function(){var t=Fb("IFRAME");t.style.display="none",ob(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(lb()),t.close();var r="callImmediate"+Math.random(),n="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=Ja((function(t){"*"!=n&&t.origin!=n||t.data!=r||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(r,n)}}}),"undefined"!==typeof t&&!ab("Trident")&&!ab("MSIE")){var e=new t,r={},n=r;return e.port1.onmessage=function(){if(void 0!==r.next){var t=(r=r.next).Ni;r.Ni=null,t()}},function(t){n.next={Ni:t},n=n.next,e.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in Fb("SCRIPT")?function(t){var e=Fb("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){ya.setTimeout(t,0)}}function Jb(t,e){Kb||Lb(),Mb||(Kb(),Mb=!0),Nb.add(t,e)}function Lb(){if(ya.Promise&&ya.Promise.resolve){var t=ya.Promise.resolve(void 0);Kb=function(){t.then(Ob)}}else Kb=function(){var t=Ob;!Da(ya.setImmediate)||ya.Window&&ya.Window.prototype&&!ab("Edge")&&ya.Window.prototype.setImmediate==ya.setImmediate?(Hb||(Hb=Ib()),Hb(t)):ya.setImmediate(t)}}Eb=ya.document&&tb?xb():void 0,!vb&&!tb||tb&&9<=Number(Eb)||vb&&Db("1.9.1"),tb&&Db("9");var Mb=!1,Nb=new Na;function Ob(){for(var t;t=Nb.remove();){try{t.a.call(t.b)}catch(e){Gb(e)}Pa.put(t)}Mb=!1}function Pb(t){if(this.a=Qb,this.j=void 0,this.f=this.b=this.c=null,this.g=this.i=!1,t!=Aa)try{var e=this;t.call(void 0,(function(t){Rb(e,Sb,t)}),(function(t){Rb(e,Tb,t)}))}catch(r){Rb(this,Tb,r)}}var Qb=0,Sb=2,Tb=3;function Ub(){this.next=this.c=this.b=this.f=this.a=null,this.g=!1}Ub.prototype.reset=function(){this.c=this.b=this.f=this.a=null,this.g=!1};var Vb=new Ma((function(){return new Ub}),(function(t){t.reset()}));function Wb(t,e,r){var n=Vb.get();return n.f=t,n.b=e,n.c=r,n}function Yb(t){if(t instanceof Pb)return t;var e=new Pb(Aa);return Rb(e,Sb,t),e}function Zb(t){return new Pb((function(e,r){r(t)}))}function $b(){var t,e;return new ac(new Pb((function(r,n){t=r,e=n})),t,e)}function dc(t,e){if(t.a==Qb)if(t.c){var r=t.c;if(r.b){for(var n=0,i=null,o=null,a=r.b;a&&(a.g||(n++,a.a==t&&(i=a),!(i&&1<n)));a=a.next)i||(o=a);i&&(r.a==Qb&&1==n?dc(r,e):(o?((n=o).next==r.f&&(r.f=n),n.next=n.next.next):ec(r),fc(r,i,Tb,e)))}t.c=null}else Rb(t,Tb,e)}function gc(t,e){t.b||t.a!=Sb&&t.a!=Tb||hc(t),t.f?t.f.next=e:t.b=e,t.f=e}function bc(t,e,r,n){var i=Wb(null,null,null);return i.a=new Pb((function(t,o){i.f=e?function(r){try{var i=e.call(n,r);t(i)}catch(a){o(a)}}:t,i.b=r?function(e){try{var i=r.call(n,e);void 0===i&&e instanceof cc?o(e):t(i)}catch(a){o(a)}}:o})),i.a.c=t,gc(t,i),i.a}function Rb(t,e,r){if(t.a==Qb){t===r&&(e=Tb,r=new TypeError("Promise cannot resolve to itself")),t.a=1;t:{var n=r,i=t.s,o=t.S;if(n instanceof Pb){gc(n,Wb(i||Aa,o||null,t));var a=!0}else{if(n)try{var s=!!n.$goog_Thenable}catch(u){s=!1}else s=!1;if(s)n.then(i,o,t),a=!0;else{if(Ea(n))try{var l=n.then;if(Da(l)){ic(n,l,i,o,t),a=!0;break t}}catch(u){o.call(t,u),a=!0;break t}a=!1}}}a||(t.j=r,t.a=e,t.c=null,hc(t),e!=Tb||r instanceof cc||jc(t,r))}}function ic(t,e,r,n,i){function o(t){a||(a=!0,n.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,r.call(i,t))}),o)}catch(s){o(s)}}function hc(t){t.i||(t.i=!0,Jb(t.m,t))}function ec(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function fc(t,e,r,n){if(r==Tb&&e.b&&!e.g)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,lc(e,r,n);else try{e.g?e.f.call(e.c):lc(e,r,n)}catch(i){mc.call(null,i)}Vb.put(e)}function lc(t,e,r){e==Sb?t.f.call(t.c,r):t.b&&t.b.call(t.c,r)}function jc(t,e){t.g=!0,Jb((function(){t.g&&mc.call(null,e)}))}Pb.prototype.then=function(t,e,r){return bc(this,Da(t)?t:null,Da(e)?e:null,r)},Pb.prototype.$goog_Thenable=!0,Pb.prototype.cancel=function(t){if(this.a==Qb){var e=new cc(t);Jb((function(){dc(this,e)}),this)}},Pb.prototype.s=function(t){this.a=Qb,Rb(this,Sb,t)},Pb.prototype.S=function(t){this.a=Qb,Rb(this,Tb,t)},Pb.prototype.m=function(){for(var t;t=ec(this);)fc(this,t,this.a,this.j);this.i=!1};var mc=Gb;function cc(t){La.call(this,t)}function ac(t,e,r){this.wk=t,this.resolve=e,this.reject=r}u(cc,La),cc.prototype.name="cancel";var x=this;function nc(){return Object.create(y,void 0)}var A=Ja,oc=String,pc=x.Object.freeze||function(t){return t};function qc(t){for(var e,r=Object.keys(t),n=r.length;n--;)Ea(e=t[r[n]])&&qc(e);return pc(t)}function rc(t){var e=Ba(t);if("object"==e||"array"==e){if(Da(t.clone))return t.clone();for(var r in e="array"==e?[]:{},t)t.hasOwnProperty(r)&&(e[r]=rc(t[r]));return e}return t}var B=[].pop(),y=/x/.exec("");function sc(t,e){return oc(t).split(e!==B?e:" ")}var tc="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(t,e,r,n,i){if(!(e=t instanceof e)&&r)throw new D(r,n,uc(i)?i:t);return e}function vc(t,e){if(!0===(C(t,e)&&t.constructor===e))throw new TypeError("Illegal constructor "+wc(e))}function xc(t,e,r,n,i){if(!(e=yc(t)===e)&&r)throw new D(r,n,uc(i)?i:t);return e}function zc(t,e,r,n){return xc(t,"Array",e,r,n)}function uc(t){return t!==B}function Ac(t){return"string"===typeof t}t("H.lang.isArray",zc),t("H.lang.isString",Ac);var Bc=parseInt,Cc=parseFloat,E=isNaN;function Dc(t){return t===+t}function Ec(t){return!E(+t)}function yc(t){var e=Object[tc[0]][tc[6]].call(t).match(/^\[object (\w+)\]$/);return e?e[1]:typeof t}t("H.lang.isNumber",Dc),t("H.lang.isInteger",Number.isInteger?Number.isInteger:function(t){return"number"===typeof t&&0===t%1});var Fc=[];function Gc(t){0>Fc.indexOf(t)&&Fc.push(t)}function wc(t,e,r,n){var i,o="",a=2>arguments.length;return a&&(e={H:x.H},r="",n=Fc.slice()),Hc(e,!0,(function(e,a){try{if(a=Ic(e,i=e[a]),!(Ea(i)&&i.window===i&&i.self===i||Ea(i)&&0<i.nodeType&&Da(i.cloneNode))&&Ea(i)){if(i===t)return o=r+"."+a,!0;if(0>n.indexOf(i)&&(n.push(i),o=wc(t,i,r+"."+a,n)))return!0}}catch(s){}})),a&&(o=o?o.substr(1).replace("."+tc[0]+".","#"):"~"+(Da(t)?Jc(t)+"()":yc(t))),o}function Ic(t,e){var r=[];return Hc(t,!1,(function(t,n){t[n]===e&&r.push(n)})),r.sort(Kc)[0]}function Kc(t,e){return e.length-t.length}Gc(Fc);var Lc=Object[tc[0]][tc[2]];function Hc(t,e,r){var n;if(t){for(i in t)if((!e||Lc.call(t,i))&&r(t,i,!0))return;for(n=tc.length;n--;){var i=tc[n];if((!e||Lc.call(t,i))&&r(t,i,!1))break}}}function Jc(t){return(t=/^\s*function ([^\( ]+)/.exec(t))?t[1]:"anonymous"}function Mc(t,e,r){r[e]="#"+e}var Nc=!!x.__karma__;function Oc(){throw Error("unimplemented method")}function Pc(t,e){"status"in(e=e||{})&&(this.status=+e.status),"statusText"in e&&(this.statusText=e.statusText),this.ok=200<=this.status&&300>this.status,this.f=!1,t?"string"===typeof t?this.c=t:(e=x.ArrayBuffer)&&e.prototype.isPrototypeOf(t)?this.a=t:e&&t.buffer?this.a=t.buffer:x.Blob.prototype.isPrototypeOf(t)&&(this.b=t):this.c=""}function Qc(t){if(t.f)return Zb(new TypeError("Already read"));t.f=!0}function Rc(t){var e=new FileReader;return e.readAsText(t),new Pb((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function D(t,e,r){var n=arguments.length;if((e=e!==B?+e:e)!==B){var i=(i=/^.*?\(([^\)]+)/.exec((""+t).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"")))?sc(i[1].replace(/\s+/g,""),","):[];i.forEach(Mc),i=i[e]||"#"+e}var o=t?wc(t):"";return n=2<n?oc(r):"",(i||n)&&(o+=" (Argument "+(i||"")+(n?" "+n:"")+")"),n=Error(o),Object.setPrototypeOf(n,D.prototype),n}function Sc(t,e,r){var n,i,o,a=r&&r.headers||{},s={},l=this;if(!Da(e))throw new D(Sc,1,"function required");Xa(a,Vc.headers,a),Xa(s,Vc,r||{}),s.headers=a,this.c=e,this.a=n=new XMLHttpRequest,e=s.method;try{for(i in n.open(e,t,!0),a)a.hasOwnProperty(i)&&(o=a[i])&&n.setRequestHeader(i,o);n.withCredentials=!!s.withCredentials,function(){var t=A(l.b,l),e=+s.timeout||0;Tc?(Uc(l,"timeout",t),n.timeout=e):e&&(l.f=setTimeout((function(){n.abort(),l.b({type:"timeout"})}),e)),Uc(l,"error",t),Uc(l,"load",t),n.send(s.data)}()}catch(u){this.b({type:"cors"})}}t("H.net.Response",Pc),Pc.prototype.type="default",Pc.prototype.type=Pc.prototype.type,Pc.prototype.status=200,Pc.prototype.status=Pc.prototype.status,Pc.prototype.statusText="OK",Pc.prototype.statusText=Pc.prototype.statusText,Pc.error=function(){return Pc.a||(Pc.a=new Pc(null,{status:0,statusText:""}),Pc.a.type="error"),Pc.a},Pc.error=Pc.error,Pc.prototype.text=function(){var t=Qc(this);if(!t)if(this.c)t=Yb(this.c);else if(this.a){var e,r=(t=new Uint8Array(this.a)).length,n=Array(r);for(e=0;e<r;e++)n[e]=String.fromCharCode(t[e]);t=Yb(n.join(""))}else t=this.b?Rc(this.b):Zb("Unsupported response body");return t},Pc.prototype.json=function(){return this.text().then(x.JSON.parse)},Pc.prototype.blob=function(){var t,e=Qc(this);return e||(this.b?t=this.b:this.a&&(t=new Blob([this.a],{type:"application/octet-stream"}))),e||Yb(t)},Pc.prototype.arrayBuffer=function(){return this.a?Qc(this)||Yb(this.a.slice(0)):this.blob().then(Pc.b)},Pc.b=function(t){var e=new FileReader;return e.readAsArrayBuffer(t),new Pb((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))},!Nc&&x.Response&&x.Response.error&&(Pc=x.Response,Gc(Pc.prototype)),u(D,Error),t("H.lang.InvalidArgumentError",D),D.prototype.name="InvalidArgumentError",t("H.net.Xhr",Sc);var Vc={method:"GET",headers:{},data:null},Wc="withCredentials"in new XMLHttpRequest,Tc="timeout"in new XMLHttpRequest,Zc,$c,ad,dd,ed;function Uc(t,e,r){Wc?t.a.addEventListener(e,r):t.a["on"+e]=r}function Xc(t,e,r){Wc?t.a.removeEventListener(e,r):t.a["on"+e]=null}function Yc(t,e){var r=[];return t&&r.push(wc(t)),1<arguments.length&&r.push(""+e),r=Error(r.join(" ")),Object.setPrototypeOf(r,Yc.prototype),r}function bd(){if(this.constructor=this.constructor,!Ac("STATIC_DB"))throw new D(this.constructor,0);if(this.g=cd(),!this.g)throw new Yc(this.constructor,"This browser does not support IndexedDB");this.a=[],this.c=[],this.Kh=A(this.Kh,this)}function kd(t,e,r){if(t.b)t.a?(t.a.push(e),r&&t.c.push(r)):t.f?r&&r(t.f):e(t.b.result);else{t.b=t.g.open("H_STATIC_DB",1),t.b.onupgradeneeded=t.Kh;var n=t.b.onerror=function(){clearTimeout(t.i),t.f=this.error,t.c.forEach((function(e){e(t.f)})),delete t.a,delete t.c};t.i=setTimeout((function(){n.call({error:Error("DbOpenTimeoutError")})}),500),t.b.onsuccess=function(){clearTimeout(t.i),t.a?(t.a.forEach((function(t){t(this.result)}),this),delete t.a,delete t.c):(delete t.b,delete t.f,t.a=[],t.c=[])},t.a.push(e),r&&t.c.push(r)}}function hd(t,e,r){kd(t,(function(t){t=t.transaction(["data"],"readwrite"),e(t.objectStore("data"))}),r)}function id(t,e,r){e&&(t.onsuccess=function(){e(this.result)}),r&&(t.onerror=function(){r(this.error)})}function gd(t){var e=Object.prototype.toString.call(t);return"[object Blob]"===e||"[object ArrayBuffer]"===e||Ac(t)||Ea(t)}function ld(){return dd||(dd=new bd),dd}function cd(){return x.indexedDB||x.webkitIndexedDB||x.mozIndexedDB||x.msIndexedDB}function md(){var t="";if(!uc(ed))if("file:"===window.location.protocol&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&128<=window.location.href.length)ed=!1;else{try{var e=cd();t="H_TEST_DB";var r=e&&e.open(t,1)}catch(n){}ed=!!r&&null===r.onupgradeneeded,r&&e.deleteDatabase&&e.deleteDatabase(t)}return ed}function nd(){0!=pd&&(qd[this[Fa]||(this[Fa]=++Ga)]=this),this.ud=this.ud,this.Wa=this.Wa}Sc.prototype.abort=function(){this.a&&(this.a.abort(),this.a&&this.b({type:"abort"}))},Sc.prototype.abort=Sc.prototype.abort,Sc.prototype.b=function(t){var e,r=t.type;t=this.a,this.f&&clearTimeout(this.f),"load"===r?t instanceof XMLHttpRequest&&200!==t.status&&(e="network"):e=4===t.readyState&&0===t.status&&"error"==r?"cors":"error"!=r?r:"network",Xc(this,"timeout",r=this.b),Xc(this,"error",r),Xc(this,"load",r),t=0===t.status||e&&"network"!==e?Pc.error():new Pc(t.responseText||null,t),e=this.c,delete this.b,delete this.c,delete this.a,e(t)},u(Yc,Error),t("H.lang.IllegalOperationError",Yc),Yc.prototype.name="IllegalOperationError",p=bd.prototype,p.put=function(t,e,r,n){if(!Ac(t)&&!Dc(t))throw new D(this.put,0);if(!gd(e))throw new D(this.put,1);hd(this,(function(i){id(i.put(e,t),r,n)}),n)},p.get=function(t,e,r){var n;if(!Ac(t)&&!Dc(t))throw new D(this.get,0);if(!Da(e))throw new D(this.get,1);return hd(this,(function(i){id(n=i.get(t),e,r)}),r),{cancel:function(){n&&(n.onsuccess=jd)}}},p.remove=function(t,e,r){if(!Ac(t)&&!Dc(t))throw new D(this.remove,0);hd(this,(function(n){id(n.delete(t),e,r)}),r)},p.clear=function(t,e){hd(this,(function(r){id(r.clear(),t,e)}),e)},p.Kh=function(){var t=this.b.result;t.objectStoreNames.contains("data")||t.createObjectStore("data")},t("H.util.IndexedDBStorage.getInstance",ld),t("H.util.IndexedDBStorage.isSupported",md);var pd=0,qd={};function rd(t){t&&"function"==typeof t.C&&t.C()}function sd(t,e){this.type=t,this.currentTarget=this.target=e,this.c=this.a=!1,this.Ek=!0}function td(t,e,r){td.l.constructor.call(this,t,r),this.data=e}function ud(t,e,r){ud.l.constructor.call(this,t,r),this.message=e}nd.prototype.ud=!1,nd.prototype.C=function(){if(!this.ud&&(this.ud=!0,this.o(),0!=pd)){var t=this[Fa]||(this[Fa]=++Ga);if(0!=pd&&this.Wa&&0<this.Wa.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete qd[t]}},nd.prototype.mb=function(t,e){this.ud?void 0!==e?t.call(e):t():(this.Wa||(this.Wa=[]),this.Wa.push(void 0!==e?Ja(t,e):t))},nd.prototype.o=function(){if(this.Wa)for(;this.Wa.length;)this.Wa.shift()()},sd.prototype.stopPropagation=function(){this.a=!0},sd.prototype.preventDefault=function(){this.c=!0,this.Ek=!1},t("H.util.Event",sd),sd.prototype.stopPropagation=sd.prototype.stopPropagation,sd.prototype.stopPropagation=sd.prototype.stopPropagation,sd.prototype.CAPTURING_PHASE=1,sd.prototype.CAPTURING_PHASE=sd.prototype.CAPTURING_PHASE,sd.prototype.AT_TARGET=2,sd.prototype.AT_TARGET=sd.prototype.AT_TARGET,sd.prototype.BUBBLING_PHASE=3,sd.prototype.BUBBLING_PHASE=sd.prototype.BUBBLING_PHASE,sd.prototype.eventPhase=0,sd.prototype.eventPhase=sd.prototype.eventPhase,u(td,sd),t("H.util.DataEvent",td),u(ud,sd),t("H.util.ErrorEvent",ud);var vd=Math,wd=vd.min,xd=vd.max,yd=vd.round,zd=vd.floor,Ad=vd.ceil,Bd=vd.abs,Cd=vd.log,Dd=vd.sqrt,Ed=vd.pow,Fd=vd.exp,Gd=vd.sin,Hd=vd.asin,Id=vd.cos,Jd=vd.tan,Kd=vd.atan,Ld=vd.atan2,Md=vd.LN2,Nd=vd.PI,Od=Nd/2,Pd=Nd/4,Qd=2*Nd,Rd=3*Nd,Sd=Nd/180,Td=180/Nd,Ud=1/0,Vd=Ed(-2,53),Wd=Wd||function(t){return Cd(t)/Md};function Xd(t,e){var r;return 0>(r=t%e)===0>e?r:r+e}function Yd(t,e,r){return e-=r=r||0,(t-=r)-zd(t/e)*e+r}function Zd(t,e,r){return t>r?r:t<e?e:t}function $d(t,e,r,n){return n||(n=0),e<r?t>=e-n&&t<=r+n:t>=r-n&&t<=e+n}function ae(t,e,r,n,i,o){return Dd(Ed((t-i)*(n-o)-(e-o)*(r-i),2)/(Ed(r-i,2)+Ed(n-o,2)))}t("H.math.normalize",Yd),t("H.math.clamp",Zd);var be={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};function ce(t,e,r,n,i,o){var a=r.length,s=a,l=r[0],u=0,c=0,h=0;n=n/2||0;var f=o||2;o=f*(i?0:1)+1;for(var p=f-2;1!=u&&s>o;){s-=p;var A=r[--s];f=r[--s];var d=r[s?s-p-1:(a+(s-p-1))%a],g=r[s?s-p-2:(a+(s-p-2))%a];f>=t-n&&f<=t+n&&A>=e-n&&A<=e+n||g>=t-n&&g<=t+n&&d>=e-n&&d<=e+n?u=1:u||f!==t?!u&&$d(t,f,g,n)&&((f<t&&g>t||f>t&&g<t)&&(c+=(l=A+(t-f)/(g-f)*(d-A))>e,h+=l<e),u=$d(e,A,d,n)&&ae(t,e,f,A,g,d)<=n?2:0):(g===t&&(A<e&&d>e||A>e&&d<e)||(l<=t&&g>t||l>=t&&g<t)&&(A>=e?++c:++h),u=$d(e,A,d,n)&&ae(t,e,f,A,g,d)<=n?2:0),l=f}return!u&&i&&0!==h&&0!==c%2&&(u=3),u}function de(t,e){return ce(t.x,t.y,e,0,!0)!==be.NONE}function ee(t){for(var e=t.length,r=new Float64Array(2*e),n=e&&uc(t[0].x);e--;){var i=t[e],o=e<<1;r[o]=n?i.x:i[0],r[o+1]=n?i.y:i[1]}return r}function fe(){}function ge(t,e,r){this.type=t,this.data=e,this.c=$b(),this.resolve=A(this.resolve,this),this.reject=A(this.reject,this),this.priority=he,r!==B&&(this.priority=r),this.Sg().add(this)}t("H.math.CoverType",be),t("H.math.isPointInsidePolygon",de),t("H.math.flatten",ee),t("H.util.ICancelable",fe),fe.prototype.cancel=function(){},fe.prototype.cancel=fe.prototype.cancel;var he=1,ie={uo:0,xo:he,so:2};function je(t){var e;for(e in this.a={},ie)this.a[ie[e]]=[];this.Re=t,this.Re.addEventListener("allocatable",A(this.b,this))}p=ge.prototype,p.then=function(t,e,r){return this.c.wk.then(t,e,r)},p.resolve=function(t){this.Ud=3,this.c.resolve(t)},p.reject=function(t){this.Ud=5,this.c.reject(t)},p.Ud=0,p.cancel=function(){3>this.Ud&&(this.ie(),this.Sg().remove(this),this.Ud=4)},ge.prototype.cancel=ge.prototype.cancel,t("H.util.JobManager",je);var ke=Object.keys(ie).map((function(t){return ie[t]})).sort().reverse();function le(t,e,r){var n=[],i=arguments.length;return t&&n.push(wc(t)),1<i&&(i=2<i&&zc(r)?" out of ["+r[0]+"..."+r[1]+"]":"",n.push("("+e+i+")")),n=Error(n.join(" ")),Object.setPrototypeOf(n,le.prototype),n}je.prototype.add=function(t){C(t,ge,this.add,0),this.a[t.priority].push(t),this.b()},je.prototype.contains=function(t){return-1<this.a[t.priority].indexOf(t)},je.prototype.remove=function(t){var e=t.priority,r=this.a[e].indexOf(t);return-1<r?(this.a[e].splice(r,1),!0):(t.wi&&this.Re.mf(t.wi),!1)},je.prototype.b=function(){ke.forEach((function(t){this.a[t]=this.a[t].filter((function(t){var e;if((e=this.Re.wg(t))===y)return!0;var r=A(this.Re.mf,this.Re,e,t);t.wi=e,t.then(r,r),t.Ud=t.bj(e)?1:5}),this)}),this)},u(le,Error),t("H.lang.OutOfRangeError",le),le.prototype.name="OutOfRangeError";var me="closure_listenable_"+(1e6*Math.random()|0);function ne(t){return!(!t||!t[me])}var oe=0;function pe(t,e,r,n,i){this.listener=t,this.proxy=null,this.src=e,this.type=r,this.capture=!!n,this.Bf=i,this.key=++oe,this.Xd=this.ff=!1}function qe(t){t.Xd=!0,t.listener=null,t.proxy=null,t.src=null,t.Bf=null}function re(t){this.src=t,this.a={},this.b=0}function te(t,e){var r=e.type;if(!(r in t.a))return!1;var n,i=t.a[r],o=bb(i,e);return(n=0<=o)&&Array.prototype.splice.call(i,o,1),n&&(qe(e),0==t.a[r].length&&(delete t.a[r],t.b--)),n}function ue(t,e){var r=void 0!==e,n=r?e.toString():"";return Ta(t.a,(function(t){for(var e=0;e<t.length;++e)if(!r||t[e].type==n)return!0;return!1}))}function se(t,e,r,n){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Xd&&o.listener==e&&o.capture==!!r&&o.Bf==n)return i}return-1}re.prototype.add=function(t,e,r,n,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=se(t,e,n,i);return-1<a?(e=t[a],r||(e.ff=!1)):((e=new pe(e,this.src,o,!!n,i)).ff=r,t.push(e)),e},re.prototype.remove=function(t,e,r,n){if(!((t=t.toString())in this.a))return!1;var i=this.a[t];return-1<(e=se(i,e,r,n))&&(qe(i[e]),Array.prototype.splice.call(i,e,1),0==i.length&&(delete this.a[t],this.b--),!0)},re.prototype.ka=function(t){t=t&&t.toString();var e,r=0;for(e in this.a)if(!t||e==t){for(var n=this.a[e],i=0;i<n.length;i++)++r,qe(n[i]);delete this.a[e],this.b--}return r};var ve=!tb||9<=Number(Eb),we=tb&&!Db("9");!wb||Db("528"),vb&&Db("1.9b")||tb&&Db("8")||sb&&Db("9.5")||wb&&Db("528"),vb&&!Db("8")||tb&&Db("9");var xe=function(){if(!ya.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ya.addEventListener("test",Aa,e),ya.removeEventListener("test",Aa,e)}catch(r){}return t}();function ye(t,e){if(sd.call(this,t?t.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.b=null,t){var r=this.type=t.type,n=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.currentTarget=e,e=t.relatedTarget){if(vb){t:{try{pb(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==r?e=t.fromElement:"mouseout"==r&&(e=t.toElement);this.relatedTarget=e,n?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:ze[t.pointerType]||"",this.b=t,t.defaultPrevented&&this.preventDefault()}}u(ye,sd);var ze={2:"touch",3:"pen",4:"mouse"};ye.prototype.stopPropagation=function(){ye.l.stopPropagation.call(this),this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0},ye.prototype.preventDefault=function(){ye.l.preventDefault.call(this);var t=this.b;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,we)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Ae="closure_lm_"+(1e6*Math.random()|0),Be={},Ce=0;function De(t,e,r,n,i){if(n&&n.once)return Ee(t,e,r,n,i);if("array"==Ba(e)){for(var o=0;o<e.length;o++)De(t,e[o],r,n,i);return null}return r=Fe(r),ne(t)?t.S.add(String(e),r,!1,Ea(n)?!!n.capture:!!n,i):Ge(t,e,r,!1,n,i)}function Ge(t,e,r,n,i,o){if(!e)throw Error("Invalid event type");var a=Ea(i)?!!i.capture:!!i,s=He(t);if(s||(t[Ae]=s=new re(t)),(r=s.add(e,r,n,a,o)).proxy)return r;if(n=Ie(),r.proxy=n,n.src=t,n.listener=r,t.addEventListener)xe||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),n,i);else if(t.attachEvent)t.attachEvent(Je(e.toString()),n);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(n)}return Ce++,r}function Ie(){var t=Ke,e=ve?function(r){return t.call(e.src,e.listener,r)}:function(r){if(!(r=t.call(e.src,e.listener,r)))return r};return e}function Ee(t,e,r,n,i){if("array"==Ba(e)){for(var o=0;o<e.length;o++)Ee(t,e[o],r,n,i);return null}return r=Fe(r),ne(t)?t.S.add(String(e),r,!0,Ea(n)?!!n.capture:!!n,i):Ge(t,e,r,!0,n,i)}function Le(t,e,r,n,i){if("array"==Ba(e)){for(var o=0;o<e.length;o++)Le(t,e[o],r,n,i);return null}return n=Ea(n)?!!n.capture:!!n,r=Fe(r),ne(t)?t.S.remove(String(e),r,n,i):!!t&&(!!((t=He(t))&&(e=t.a[e.toString()],t=-1,e&&(t=se(e,r,n,i)),r=-1<t?e[t]:null))&&Me(r))}function Me(t){if("number"===typeof t||!t||t.Xd)return!1;var e=t.src;if(ne(e))return te(e.S,t);var r=t.type,n=t.proxy;return e.removeEventListener?e.removeEventListener(r,n,t.capture):e.detachEvent?e.detachEvent(Je(r),n):e.addListener&&e.removeListener&&e.removeListener(n),Ce--,(r=He(e))?(te(r,t),0==r.b&&(r.src=null,e[Ae]=null)):qe(t),!0}function Je(t){return t in Be?Be[t]:Be[t]="on"+t}function Ne(t,e,r,n){var i=!0;if((t=He(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==r&&!o.Xd&&(o=Oe(o,n),i=i&&!1!==o)}return i}function Oe(t,e){var r=t.listener,n=t.Bf||t.src;return t.ff&&Me(t),r.call(n,e)}function Ke(t,e){if(t.Xd)return!0;if(!ve){if(!e)t:{e=["window","event"];for(var r=ya,n=0;n<e.length;n++)if(null==(r=r[e[n]])){e=null;break t}e=r}if(e=new ye(n=e,this),r=!0,!(0>n.keyCode||void 0!=n.returnValue)){t:{var i=!1;if(0==n.keyCode)try{n.keyCode=-1;break t}catch(a){i=!0}(i||void 0==n.returnValue)&&(n.returnValue=!0)}for(n=[],i=e.currentTarget;i;i=i.parentNode)n.push(i);for(t=t.type,i=n.length-1;!e.a&&0<=i;i--){e.currentTarget=n[i];var o=Ne(n[i],t,!0,e);r=r&&o}for(i=0;!e.a&&i<n.length;i++)e.currentTarget=n[i],o=Ne(n[i],t,!1,e),r=r&&o}return r}return Oe(t,new ye(e,this))}function He(t){return(t=t[Ae])instanceof re?t:null}var Pe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fe(t){return Da(t)?t:(t[Pe]||(t[Pe]=function(e){return t.handleEvent(e)}),t[Pe])}function F(){nd.call(this),this.S=new re(this),this.fn=this,this.Eg=null}function Qe(t){var e=(t=t||{}).callback;this.b=t.label,Da(e)&&(this.callback=e),this.a=!!t.disabled,Qe.l.constructor.call(this)}u(F,nd),F.prototype[me]=!0,p=F.prototype,p.Eb=function(){return this.Eg},p.ha=function(t){this.Eg=t},p.addEventListener=function(t,e,r,n){De(this,t,e,r,n)},p.removeEventListener=function(t,e,r,n){Le(this,t,e,r,n)},p.dispatchEvent=function(t){var e,r=this.Eb();if(r)for(e=[];r;r=r.Eb())e.push(r);r=this.fn;var n=t.type||t;if("string"===typeof t)t=new sd(t,r);else if(t instanceof sd)t.target=t.target||r;else{var i=t;Xa(t=new sd(n,r),i)}if(i=!0,e)for(var o=e.length-1;!t.a&&0<=o;o--){var a=t.currentTarget=e[o];i=a.dd(n,!0,t)&&i}if(t.a||(i=(a=t.currentTarget=r).dd(n,!0,t)&&i,t.a||(i=a.dd(n,!1,t)&&i)),e)for(o=0;!t.a&&o<e.length;o++)i=(a=t.currentTarget=e[o]).dd(n,!1,t)&&i;return i},p.o=function(){F.l.o.call(this),this.S&&this.S.ka(void 0),this.Eg=null},p.dd=function(t,e,r){if(!(t=this.S.a[String(t)]))return!0;t=t.concat();for(var n=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.Xd&&o.capture==e){var a=o.listener,s=o.Bf||o.src;o.ff&&te(this.S,o),n=!1!==a.call(s,r)&&n}}return n&&0!=r.Ek},t("H.util.EventTarget",F),F.prototype.ha=F.prototype.ha,F.prototype.setParentEventTarget=F.prototype.ha,F.prototype.Eb=F.prototype.Eb,F.prototype.getParentEventTarget=F.prototype.Eb,F.prototype.addEventListener=F.prototype.addEventListener,F.prototype.addEventListener=F.prototype.addEventListener,F.prototype.removeEventListener=F.prototype.removeEventListener,F.prototype.removeEventListener=F.prototype.removeEventListener,F.prototype.dispatchEvent=F.prototype.dispatchEvent,F.prototype.dispatchEvent=F.prototype.dispatchEvent,F.prototype.C=F.prototype.C,F.prototype.dispose=F.prototype.C,F.prototype.mb=F.prototype.mb,F.prototype.addOnDisposeCallback=F.prototype.mb,F.prototype.gn=F.prototype.dd,F.prototype.dd=function(t,e,r){var n,i,o=!0,a=r[r.currentTarget===r.target?"AT_TARGET":e?"CAPTURING_PHASE":(n=!0,"BUBBLING_PHASE")];return(!n||"pointerenter"!==(i=r.type)&&"pointerleave"!==i)&&(r.eventPhase=a,o=F.prototype.gn.apply(this,arguments),n&&this.Eb&&null===this.Eb()&&delete r.eventPhase),o},u(Qe,F),t("H.util.ContextItem",Qe),Qe.prototype.ze=function(){return this.b},Qe.prototype.getLabel=Qe.prototype.ze,Qe.prototype.Bc=function(t){return this.b!==t&&(this.b=t,this.dispatchEvent("update")),this},Qe.prototype.setLabel=Qe.prototype.Bc,Qe.prototype.Wb=function(){return this.a},Qe.prototype.isDisabled=Qe.prototype.Wb,Qe.prototype.ta=function(t){return t!==this.a&&(this.a=t,this.dispatchEvent("update")),this},Qe.prototype.setDisabled=Qe.prototype.ta;var Re=new Qe;function Se(){if(x.document){var t=document.createElement("canvas");return t.width=t.height=1,t.getContext("2d")}return null}function Te(){return window.devicePixelRatio||1}Qe.SEPARATOR=Re,t("H.util.getPixelRatio",Te);var Ve=/^rgba\(([^,]+),([^,]+),([^,]+),([^)]+)\)$/;function We(t){var e=Xe[t],r=x.RegExp;return e||(x.Uint8ClampedArray||(x.Uint8ClampedArray=function(t){return t instanceof Number?Array(t):t.map((function(t){return Zd(yd(t),0,255)}))}),"none"===t?e=new Uint8ClampedArray([0,0,0,0]):(Ye.fillStyle="black",Ye.fillStyle=t,Ve.test(Ye.fillStyle)?e=new Uint8ClampedArray([r.$1,r.$2,r.$3,255*r.$4]):(Ye.clearRect(0,0,1,1),Ye.fillRect(0,0,1,1),e=Ye.getImageData(0,0,1,1).data)),Xe[t]=e),e}function Ze(t){return"none"!==t&&0<We(t)[3]}var Xe=nc(),$e=!!x.VBArray;function af(t,e){return t!==B?t:e}function bf(t){return/^<svg/.test(t)?"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(t):t}function cf(t){this.Yb=0<+t?vd.round(t):0}t("H.util.eval",(function(a){return eval(a)})),t("H.util.provide",(function(t){var e=ya.$jscomp;if(e&&"function"==typeof e.Pl&&e.Pl())throw Error("goog.provide cannot be used within a module.");za(t,void 0)})),cf.prototype.next=function(t){if(9007199254740992===this.Yb)throw new le(t,this.Yb,[0,9007199254740991]);return this.Yb++};var df=new cf,ef=A(df.next,df);function ff(){return!0}function gf(){return!1}function jd(){}var hf=pc([]),jf=pc({});function kf(t){return"CANVAS"===t.tagName?[t]:t.getElementsByTagName("CANVAS")}function lf(t,e,r){var n;if(e=t.ownerDocument===e?t.cloneNode(!0):e.importNode(t,!0),r)for(t=kf(t),n=(r=kf(e)).length;n--;)r[n].getContext("2d").drawImage(t[n],0,0);return e}var Ye=Se(),mf=Se();function nf(t){var e=t.complete,r=0<t.naturalWidth;if(e&&!r&&$e)try{mf.drawImage(t,0,0),r=!0}catch(n){}return e&&r}var of=x.BlobBuilder||x.WebKitBlobBuilder||x.MozBlobBuilder;function pf(t,e){if(e=e||"",of){var r=new of;r.append(t),t=r.getBlob(e)}else t=new Blob([t],{type:e});return t}var qf=x.navigator;function rf(){var t=rf.a;return t||(t=this,rf.a=t,Gc(rf.a),F.call(t),sf(this)),t}function sf(t){t.g=10,t.i=6,t.a=nc(),t.b=nc(),t.c=0}function tf(t,e,r,n){if(!uf[t])throw new D(tf,0,"Mime type is not supported");this.f=t,"crossOrigin"in(t=n?Va(n):{})||(t.crossOrigin="anonymous"),this.a=t,vf.href=e.toString(),ge.call(this,vf.protocol+"//"+vf.hostname,e,r)}$c=/Edge\/\d+/.test(qf.appVersion),ad=/(A|a)ndroid/.test(qf.appVersion),u(rf,F),rf.prototype.o=function(){rf.l.o.call(this),sf(this)},rf.prototype.wg=function(t){t=t.type;var e=this.a[t]||0;if(this.c<this.g&&e<this.i){var r=++this.f;return this.c++,this.a[t]=e+1,this.b[r+""]=t,r}return y},rf.prototype.mf=function(t){var e=this.b[t];if(!uc(e)||!this.a[e])throw new Yc(this.mf,"Unknown requestId");this.c--,this.a[e]--,this.a[e]||delete this.a[e],delete this.b[t],this.dispatchEvent("allocatable")},rf.prototype.f=-1,u(tf,ge),tf.prototype.bj=function(){return this.b=uf[this.f].call(this),!0},tf.prototype.ie=function(){this.b&&(this.b.abort(),delete this.b)};var uf={"application/json":function(){var t=this,e=wf(this.a),r=e.headers;return e.headers=r=r?Va(r):{},r.Accept="application/json",new Sc(this.data,(function(e){200<=e.status&&300>e.status?t.resolve(e.json()):t.reject(e)}),e)},"text/plain":function(){var t=this;return new Sc(this.data,(function(e){200<=e.status&&300>e.status?t.resolve(e.text()):t.reject(e)}),wf(this.a))},image:function(){var t=x.document.createElement("img"),e=this,r=this.data;return t.onload=A(this.resolve,this,t),t.onerror=function(){e.reject(Pc.error())},t.crossOrigin=this.a.crossOrigin,t.src=r,{abort:function(){t.onerror=t.onload=null,$e&&nf(t)||t.removeAttribute("src")}}}};!function(){try{var t=new XMLHttpRequest;t.open("get","/",!0)}catch(e){t={}}"response"in t&&(uf.arraybuffer=function(){var t,e=new XMLHttpRequest,r=this,n=this.a,i=n.headers;if(e.open("GET",this.data),xf(e,n),e.responseType="arraybuffer",i)for(t in i)e.setRequestHeader(t,i[t]);return e.onerror=e.ontimeout=function(){r.reject(Pc.error())},e.onload=function(){r.resolve(new Pc(e.response))},e.send(),e})}();var yf=new je(new rf);tf.prototype.Sg=function(){return yf};var vf=x.document.createElement("a");function wf(t){var e=Va(t);return delete e.crossOrigin,xf(e,t),e}function xf(t,e){t.withCredentials="use-credentials"===e.crossOrigin}function G(t,e){this.x=+t,this.y=+e}function zf(t){if(!t)throw Error("invalid argument");return t instanceof G?t:new G(t.x,t.y)}function Af(t){var e=Bf[t];if(!e)if(t in Cf)e=Bf[t]=t;else{e=Df.length;var r="",n=t.charAt(0).toUpperCase()+t.substr(1),i="",o=!1;Ef&&(o=(i=Ef+n)in Cf);for(;e--&&!o;)o=(i=(r=Df[e])+n)in Cf;if(o&&(Ef=r),!(e=o?i:null))throw Error("Could not find any variant of CSS property ["+t+"]");Bf[t]=e}return e}t("H.math.Point",G),G.prototype.set=G,G.prototype.set=G.prototype.set,G.prototype.clone=function(t){return t?(t.x=this.x,t.y=this.y):t=new G(this.x,this.y),t},G.prototype.clone=G.prototype.clone,G.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},G.prototype.add=G.prototype.add,G.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},G.prototype.sub=G.prototype.sub,G.prototype.scale=function(t,e){return this.x*=t,this.y*=void 0===e?t:e,this},G.prototype.scale=G.prototype.scale,G.prototype.round=function(){return this.x=yd(this.x),this.y=yd(this.y),this},G.prototype.round=G.prototype.round,G.prototype.floor=function(){return this.x=zd(this.x),this.y=zd(this.y),this},G.prototype.floor=G.prototype.floor,G.prototype.ceil=function(){return this.x=Ad(this.x),this.y=Ad(this.y),this},G.prototype.ceil=G.prototype.ceil,G.prototype.fa=function(t){return!(!t||this.x!==t.x||this.y!==t.y)},G.prototype.equals=G.prototype.fa,G.prototype.qj=function(t,e){var r=e.x-t.x,n=e.y-t.y,i=t;if(r||n){var o=((this.x-t.x)*r+(this.y-t.y)*n)/(r*r+n*n);i=0>=o?t:1<=o?e:new G(t.x+o*r,t.y+o*n)}return i},G.prototype.getNearest=G.prototype.qj,G.prototype.Sa=function(t){return Dd(Ed(this.x-t.x,2)+Ed(this.y-t.y,2))},G.prototype.distance=G.prototype.Sa,G.fromIPoint=zf,t("H.dom.cssPrefixer.prefix",Af);var Df=["O","Ms","ms","Moz","Webkit"],Bf={},Ef="",Cf=document.createElement("span").style;function Ff(t,e,r,n){if(!t||!e||!r)throw new D(Ff,B,"Must specify name, version and revision parameter");this.name=t,this.version=e,this.revision=r,n&&Xa(this,n)}t("H.util.BuildInfo",Ff),Ff.prototype.toString=function(){var t,e=[];for(t in this)Ac(this[t])&&e.push(this[t]);return e.join(";")};var Gf={};function Hf(t,e,r,n){if(!t)throw new D(Hf,1,"Must specify a name parameter");return Gf[t]||(Gf[t]=new Ff(t,e,r,n))}function If(){If.l.constructor.call(this),this.a=Jf(this),this.f=nc(),this.c=A(this.c,this),this.a.addEventListener("message",this.c),this.b={}}Ff.get=Hf,u(If,F),If.prototype.o=function(){this.a.terminate()},If.prototype.g=function(t){var e=t.type,r=!!this.f[e],n=t.data,i=Kf++,o=n&&n.lo?n.lo:B,a=!0;return r?(this.b[i]=t,Lf(this,e,i,n&&n.message,o)):(t.reject(new D(this.g,0,"processor_not_found")),a=!1),a},If.prototype.c=function(t){t=t.data;var e=this.b[t.taskId],r=t.taskId,n=t.data,i=this;if(2===t.type)new tf("arraybuffer",n).then((function(t){return t.arrayBuffer()})).then((function(t){i.a.postMessage(["3",r,[t]],[t])}),(function(){i.a.postMessage(["3",r,[null,"ERROR"]])}));else{if(e){switch(t.type){case 1:e.resolve(n);break;case 0:e.reject(n)}delete this.b[r]}this.dispatchEvent(new sd(this.A.IDLE))}};var Kf=0,Qf,Tf;function Mf(t,e,r){var n,i=Kf++;return t.b[i]=n=$b(),Lf(t,e,i,r),n.wk}function Lf(t,e,r,n,i){n===B||Ca(n)||(n=[n]);try{t.a.postMessage([e,r,n],i)}catch(o){(t=t.b[r]).reject(o.message)}}function Jf(a){var b=x.H.__bootstrap__;if(b=Da(b)?(""+b).replace(/^[^{]+{((.|[\r\n])+?)}\s*$/,"$1"):""+b,x.Worker&&x.URL)try{var c=new x.Worker(x.URL.createObjectURL(pf(b,"application/javascript")))}catch(d){}return c||(a=new Nf(a),function(){eval("var self = arguments[0];"+b)}(a),c=new Of(a)),c}function Of(t){F.call(this),this.a=t}function Nf(a){F.call(this),this.a=a,this.addEventListener=A(this.addEventListener,this),this.removeEventListener=A(this.removeEventListener,this),this.postMessage=A(this.postMessage,this),this.eval=A(eval,this)}function Pf(){var t=Qf;return t||(t=Qf=this,F.call(t),Rf(this)),t}function Rf(t){var e,r=t.b;if(r)for(e=r.length;e--;)r[e].C();t.b=[],Gc(t.b),t.c={},t.f=nc()}function Sf(t,e,r){ge.call(this,t,e,r)}function Uf(t,e,r,n,i,o){var a,s,l,u,c=t.length;if(c)for(a=[];c--;){var h=t[c],f=h.length,p=0;for(l=1;l<f;l++)if(u=Vf(h[l-1],h[l],r,e,n,i)){var A=u[0],d=u[1];p&&p.fa(A)?s.push(d):a.push(s=u),p=d,o&&(l=f,c=0)}}else a=t;return a}function Vf(t,e,r,n,i,o){var a=t.x;t=-t.y;var s=e.x;if(e=-e.y,r=-r,o=-o,a>s){if(s>i||a<n)return;var l=a,u=t;a=s,t=e,s=l,e=u,l=1}else if(a>i||s<n)return;if(t>e){if(e>r||t<o)return;var c=1;t=-t,e=-e,u=o,o=-r,r=-u}else if(t>r||e<o)return;if(a<n){if((t+=(n-a)*(e-t)/(s-a))>r)return;a=n}if(t<o){if((a+=(o-t)*(s-a)/(e-t))>i)return;t=o}return s>i&&(e=t+(i-a)*(e-t)/(s-a),s=i),e>r&&(s=a+(r-t)*(s-a)/(e-t),e=r),c&&(t=-t,e=-e),l?[new G(s,-e),new G(a,-t)]:[new G(a,-t),new G(s,-e)]}function Wf(t,e,r){var n,i;t=Xf(t,!0),e=Xf(e,!1);var o={},a=n=1;switch(~~(r||0)){case 1:a=n=0;break;case 2:n=0,a=1;break;case 3:n=1,a=0}r=n;var s=a;if(e&&t){for(e.me=new Yf(e.x,e.y,null,Zf(e)),t.me=new Yf(t.x,t.y,null,Zf(t)),a=e;a.next;a=a.next)if(!a.Ua)for(n=t;n.next;n=n.next)if(!n.Ua){var l=$f(a.next),u=$f(n.next);if(i=ag(a,l,n,u,o)){i=o.jl;var c=o.kl,h=o.oo,f=o.po;bg(i=new Yf(h,f,null,null,null,null,!0,0,0,i),a,l),bg(l=new Yf(h,f,null,null,null,null,!0,0,0,c),n,u),i.Eh=l,l.Eh=i}}for(o=de(e,cg(t)),r&&(o=!o),a=e;a;a=a.next)a.Ua&&(a.gh=o,o=!o);for(o=de(t,cg(e)),s&&(o=!o),n=t;n.next;n=n.next)n.Ua&&(n.gh=o,o=!o);for(dg(e),dg(t);(t=eg(e))!=e;){for(r=null;!t.ig;t=t.Eh){for(o=t.gh;(r=new Yf(t.x,t.y,r)).artificial=t.Ua||t.Lj,t.ig=1,t=o?t.next:t.Zb;)if(t.Ua){t.ig=1;break}if(!t)break}r.Fh=p||null;var p=r}return p}}function Yf(t,e,r,n,i,o,a,s,l,u){this.x=t,this.y=e,this.next=r||null,this.Zb=n||null,this.Fh=i||null,this.Eh=o||null,this.Ua=!!a,this.gh=!!s,this.ig=l||0,this.alpha=u||0,n&&(n.next=this),r&&(r.Zb=this),this.Lj=!1,this.me=null}function $f(t){for(;t&&t.Ua;)t=t.next;return t}function Zf(t){if(t)for(;t.next;)t=t.next;return t}function eg(t){var e=t;if(e)do{e=e.next}while(e!=t&&(!e.Ua||e.Ua&&e.ig));return e}function dg(t){var e=Zf(t);e.Zb.next=t,t.Zb=e.Zb}function ag(t,e,r,n,i,o){var a,s=e.x-t.x,l=e.y-t.y,u=n.x-r.x,c=n.y-r.y,h=s*c-l*u;return h?(u=((r.x-t.x)*c-(r.y-t.y)*u)/h,h=(l*(r.x-t.x)-s*(r.y-t.y))/h,0>u||1<u||0>h||1<h?0:(0===u?a=t:1===u?a=e:0===h?a=r:1===h&&(a=n),a&&!o?(a.x+=2480549651603763e-20,a.y+=7321997314118067e-20,a.me&&(a.me.x=a.x,a.me.y=a.y),ag(t,e,r,n,i)):(i.oo=t.x+u*s,i.po=t.y+u*l,i.jl=u,i.kl=h,1))):0}function cg(t){for(var e=[];t;)e.push(t.x,t.y),t=t.next;return e}function bg(t,e,r){for(e=e.next;e!==r&&e.alpha<=t.alpha;)e=e.next;t.next=e,t.Zb=e.Zb,t.next.Zb=t,t.Zb.next=t}function Xf(t,e){for(var r,n=null,i=0,o=t.length;i<o;i++)(r=new Yf(t[i].x,t[i].y,n)).Lj=e,(r.next=n)&&(n.Zb=r),n=r;return n}function gg(t,e,r){var n=Zd(+t,-90,90);if(e&&E(n))throw new D(e,r,t);return n}function hg(t,e,r){var n=+t;if((-180>n||180<n)&&(n=Xd(n+180,360)-180),e&&E(n))throw new D(e,r,t);return n}function ig(t,e,r){var n;if(t!==B&&E(n=+t)&&e)throw new D(e,r,t);return n}function jg(t,e){return 0>t!==0>e&&180<Bd(e-t)}function kg(){vc(this,kg)}function lg(t,e,r){this.lat=gg(t,lg,0),this.lng=hg(e,lg,1),r!==B&&(this.alt=ig(r,lg,2))}function mg(t,e,r){var n=Ea(t)&&!(E(t.lat=gg(t.lat))||E(t.lng=hg(t.lng))||t.alt!==B&&E(t.alt=ig(t.alt)));if(!n&&e)throw new D(e,r,t);return n}function ng(t){if(!t)throw new D(ng,0,t);return new lg(t.lat,t.lng,t.alt)}function K(t,e,r,n){og(this,gg(t,K,0),hg(e,K,1),gg(r,K,2),hg(n,K,3))}function og(t,e,r,n,i){return t.a=r,t.b=i,e<n&&(r=e,e=n,n=r),t.c=e,t.f=n,t.j=t.g=t.i=null,t}function qg(t,e){return(t=e-t)+(0>t?360:0)}function pg(t,e){return(t+=e/2)-(180<t?360:0)}function rg(t,e,r,n,i,o,a,s,l){r=wd(r,a),t=xd(t,i);var u=pg(e,i=qg(e,n)),c=pg(o,a=qg(o,s))-u;if(180>(c+=0>c-1e-6?360:0)-1e-6){u=e;var h=s}else c=360-c,u=o,h=n;return 360<=(c=c+i/2+a/2)+5e-7?(u=-180,h=180):c-5e-7<i?(u=e,h=n):c-5e-7<a&&(u=o,h=s),l?og(l,t,u,r,h):new K(t,u,r,h)}function sg(t,e,r){return r||(mg(t,sg,0),mg(e,sg,1)),new K(t.lat,t.lng,e.lat,e.lng)}function tg(t,e){var r=1,n=t.length,i=null;if(!Ca(t))throw new D(tg,0,t);if(0<n){var o=t[0];for(i=sg(o,o,e);r<n;r++)o=t[r],i.Rc(o.lat,o.lng,e,i)}return i}function ug(t,e){var r,n=3,i=t.length;if(!(e||t&&null!=t.length))throw new D(ug,0,t);if(0<i)for(r=new K(t[0],t[1],t[0],t[1]);n<i;n+=3)r.Rc(t[n],t[n+1],e,r);return r}function vg(t,e){var r,n=1,i=t.length;if(e&&(!t||null==t.length))throw new D(vg,0,t);if(0<i)for(r=new K(t[0].c,t[0].a,t[0].f,t[0].b);n<i;n++)r.Xb(t[n],e,r);return r}function wg(t,e,r,n,i,o){vc(this,wg),this.c=t||10,this.b=null,this.f=n||0,this.g=i||0,this.i=e||1,this.j=r||1,this.s=!!o,this.flush()}function xg(t){var e=t.b;if(t.s&&!e){var r=t.head;(r.entries||r[0]||r[1]||r[2]||r[3])&&(e=yg([e=[r],e,e,e],[r[6],r[7],r[4],r[5]]),t.b=e)}return e}function yg(t,e){var r,n,i,o,a=0;for(r=3;0<=r;r--){var s=r+4,l=0<r%3,u=[],c=e[r],h=t[r];for(n=h.length;n--;){var f=h[n];if(i=f.entries)for(o=i.length;o--;){var p=i[o].a(r);(l?p>c:p<c)&&(c=p)}for(o=4;o--;)(i=f[o])&&(l?i[s]>c:i[s]<c)&&u.push(i)}a+=u.length,e[r]=c,t[r]=u}return a&&(e=yg(t,e)),e}function zg(t,e,r){var n,i;if(t.s&&(n=t.b))for(i=3;0<=i;i--){var o=e.a(i);if(i%3?o>=n[i]:o<=n[i]){if(!r){t.b=null;break}n[i]=o}}}function Bg(t,e){var r,n=t.head;if(e){var i=e;if(i!==n)for(n=i;i=i.parent;)(i.entries||1<i.a)&&(n=i)}else for(;!n.entries&&2>(r=n.a)&&r;)n=i;t.head=n}function Cg(t,e,r,n,i,o,a,s,l){var u,c=e.entries,h=e[7],f=e[4],p=e[5],A=e[6],d=e[8],g=e[9];if(c){var y=c.length;if(i>f||n>h||a<A||o<p)for(;y--;){f=(h=c[y]).a(3),p=h.a(0),A=h.a(1),h.a(2)>=i&&A>=n&&(p<a||s&&p==a)&&(f<o||l&&f==o)&&r.push(h)}else for(;y--;)r.push(c[y])}(o>d||l&&o==d)&&(i<g&&(u=e[1])&&Cg(t,u,r,n,i,o,a,s,l),(a>g||s&&a==g)&&(u=e[3])&&Cg(t,u,r,n,i,o,a,s,l)),n<d&&(i<g&&(u=e[0])&&Cg(t,u,r,n,i,o,a,s,l),(a>g||s&&a==g)&&(u=e[2])&&Cg(t,u,r,n,i,o,a,s,l))}If.prototype.A={IDLE:"idle",yi:"error"},If.prototype.i=function(t,e){var r=this.j||(this.j=new sd(this.A.yi));r.data=e,delete this.f[t],this.dispatchEvent(r)},u(Of,F),Of.prototype.postMessage=function(t){x.setTimeout(A(this.b,this,t),0)},Of.prototype.b=function(t){var e=new sd("message");e.data=t,this.a.dispatchEvent(e)},Of.prototype.terminate=function(){this.a.C(),this.C()},u(Nf,F),Nf.prototype.postMessage=function(t){var e=new sd("message");e.data=t,x.setTimeout(A(this.a.c,this.a,e),0)},u(Pf,F),Pf.prototype.o=function(){Pf.l.o.call(this),Rf(this)},Pf.prototype.wg=function(t){var e;if(t=t.type,!(e=this.f[t]))throw new Yc(this.wg,'Unknown type "'+t+'"');var r=this.b,n=r[0];return n||(n=r[0]=new If,this.mb(Ka(rd,n)),Ua(this.c)||Mf(n,"0",r=x.Object.keys(this.c))),(r=n).f[t]||(r.f[t]=e,Mf(r,"1",[t,Da(e)?e+"":e]).then(jd,A(r.i,r,t))),n},Pf.prototype.mf=function(){},Pf.prototype.a=function(t,e){var r=this.f,n=r[t];if(n){if(e!==n)throw new Yc(this.a,'Type "'+t+'" is already registered')}else r[t]=e},u(Sf,ge),Sf.prototype.Sg=function(){return Tf||(Tf=new je(new Pf)),Tf},Sf.prototype.ie=function(){},Sf.prototype.bj=function(t){return t.g(this)},t("H.math.clipping.clipStrips",Uf),t("H.math.clipping.clipPolygon",Wf),t("H.geo.isDBC",jg),t("H.geo.AbstractGeometry",kg),kg.prototype.getBoundingBox=kg.prototype.G,kg.prototype.equals=kg.prototype.fa,kg.prototype.lb="",kg.prototype.zb="",kg.prototype.toString=function(){return this.Xc([this.lb.toUpperCase()," "]).join("")},kg.prototype.toString=kg.prototype.toString,kg.prototype.Cc=function(){return{type:this.zb,coordinates:this.Wc()}},kg.prototype.toGeoJSON=kg.prototype.Cc,kg.prototype.W=function(){return{type:this.lb,coordinates:this.jc(),boundingBox:this.G().W()}},kg.prototype.forWorkerMessage=kg.prototype.W,u(lg,kg),t("H.geo.Point",lg),lg.prototype.fa=function(t){return this===t||!!t&&this.lat===t.lat&&this.lng===t.lng&&(this.alt||0)===(t.alt||0)},lg.prototype.equals=lg.prototype.fa,lg.prototype.Sa=function(t){if(this===t||this.lat===t.lat&&this.lng===t.lng)t=0;else{var e=this.lat*Sd,r=t.lat*Sd;t=12742001.58*Hd(wd(1,Dd(Ed(Gd((e-r)/2),2)+Id(e)*Id(r)*Ed(Gd((this.lng*Sd-t.lng*Sd)/2),2))))}return t},lg.prototype.distance=lg.prototype.Sa,lg.prototype.jg=function(t,e,r){var n;if(r){if(n=e/6371000.79){e=t*Sd,t=Sd*this.lat;var i=Gd(t);r=Gd(n);var o=Id(n);n=Sd*this.lng;var a=Id(t);t=Hd(a*Id(e)*r+i*o),e=(n+(e=Ld(Gd(e)*a*r,o-i*Gd(t)))+Nd)%(2*Nd)-Nd,i=new lg(t*Td,((e*=Td)+540)%360-180)}return i||this}return 0===((t=(t%360+360)%360)+90)%180?(t=this.lng+e/(6371000.79*Qd*Id(this.lat*Sd))*(270===t?-360:360),new lg(this.lat,(t+540)%360-180)):((e/=6371000.79)&&(t*=Sd,i=this.lat*Sd,r=this.lng*Sd,o=(n=i+e*Id(t))-i,a=Cd(Jd(n/2+Pd)/Jd(i/2+Pd)),a=E(o/a)?Id(i):o/a,t=e*Gd(t)/a,Bd(n)>Od&&(n=0<n?Nd-n:-(Nd+n)),n=new lg(n*Td,((r+t+Rd+(Bd(i+o)>Od?Nd:0))%Qd-Nd)*Td)),n||this)},lg.prototype.walk=lg.prototype.jg,lg.prototype.G=function(){return new K(this.lat,this.lng,this.lat,this.lng)},lg.prototype.getBoundingBox=lg.prototype.G,lg.validate=mg,lg.fromIPoint=ng,p=lg.prototype,p.lb="Point",p.Xc=function(t){return t.push("(",this.lng," ",this.lat,")"),t},p.zb="Point",p.Wc=function(){return[this.lng,this.lat,this.alt||0]},p.jc=function(){return[this.lat,this.lng,this.alt||0]},u(K,kg),t("H.geo.Rect",K),K.prototype.lb="Polygon",K.prototype.Xc=function(t){var e=this.c,r=this.a,n=this.f,i=this.b;return t.push("(","(",r," ",e,",",i," ",e,",",i," ",n,",",r," ",n,",",r," ",e,")",")"),t},K.prototype.fa=function(t){var e=this===t;return!e&&C(t,K)&&(e=this.c===t.c&&this.a===t.a&&this.f===t.f&&this.b===t.b),e},K.prototype.equals=K.prototype.fa,K.prototype.clone=function(){return new K(this.c,this.a,this.f,this.b)},K.prototype.clone=K.prototype.clone,K.prototype.Fb=function(){return this.j||(this.j=new lg(this.c,this.a)),this.j},K.prototype.getTopLeft=K.prototype.Fb,K.prototype.Bb=function(){return this.g||(this.g=new lg(this.f,this.b)),this.g},K.prototype.getBottomRight=K.prototype.Bb,K.prototype.Nm=function(){return this.c},K.prototype.getTop=K.prototype.Nm,K.prototype.Jl=function(){return this.f},K.prototype.getBottom=K.prototype.Jl,K.prototype.lm=function(){return this.a},K.prototype.getLeft=K.prototype.lm,K.prototype.Dm=function(){return this.b},K.prototype.getRight=K.prototype.Dm,K.prototype.Za=function(){return this.i||(this.i=new lg(this.f+(this.c-this.f)/2,pg(this.a,this.sb()))),this.i},K.prototype.getCenter=K.prototype.Za,K.prototype.sb=function(){return qg(this.a,this.b)},K.prototype.getWidth=K.prototype.sb,K.prototype.Hd=function(){return this.c-this.f},K.prototype.getHeight=K.prototype.Hd,K.prototype.tb=function(){return this.a>this.b},K.prototype.isCDB=K.prototype.tb,K.prototype.Ef=function(){return!this.sb()&&!this.Hd()},K.prototype.isEmpty=K.prototype.Ef,K.prototype.G=function(){return new K(this.c,this.a,this.f,this.b)},K.prototype.getBoundingBox=K.prototype.G,K.prototype.jf=function(t,e,r){var n=this.Za();return r||(t=gg(t,this.jf,0),e=hg(e,this.jf,1)),(t=(e=this.Rc(t,e,r)).Za()).lat===n.lat&&t.lng===n.lng&&this.Hd()===e.Hd()&&this.sb()===e.sb()},K.prototype.containsLatLng=K.prototype.jf,K.prototype.ad=function(t,e){return e||mg(t,this.ad,0),this.jf(t.lat,t.lng,e)},K.prototype.containsPoint=K.prototype.ad,K.prototype.Cg=function(t,e){var r=this.Za();if(!e&&!C(t,K))throw new D(this.Cg,0,t);return(t=(e=this.Xb(t,e)).Za()).lat===r.lat&&t.lng===r.lng&&this.Hd()===e.Hd()&&this.sb()===e.sb()},K.prototype.containsRect=K.prototype.Cg,K.prototype.Rc=function(t,e,r,n){if(!r){if(E(t=gg(t)))throw new D(this.Rc,0,t);if(E(e=hg(e)))throw new D(this.Rc,1,e)}return rg(this.c,this.a,this.f,this.b,t,e,t,e,n)},K.prototype.mergeLatLng=K.prototype.Rc,K.prototype.ek=function(t,e,r){return e||mg(t,this.ek,0),this.Rc(t.lat,t.lng,e,r)},K.prototype.mergePoint=K.prototype.ek,K.prototype.Xb=function(t,e,r){if(!e&&!C(t,K))throw new D(this.Xb,0,t);return rg(this.c,this.a,this.f,this.b,t.c,t.a,t.f,t.b,r)},K.prototype.mergeRect=K.prototype.Xb,K.prototype.tc=function(t,e,r,n,i,o){return i||(t=gg(t,this.tc,0),e=hg(e,this.tc,1),r=gg(r,this.tc,2),n=hg(n,this.tc,3)),rg(this.c,this.a,this.f,this.b,t,e,r,n,o)},K.prototype.mergeTopLeftBottomRight=K.prototype.tc,K.prototype.hd=function(t,e){var r=this.a<=this.b,n=t.a<=t.b,i=this.a<t.b,o=t.a<this.b;if(!e&&!C(t,K))throw new D(this.hd,0,t);return this.f<=t.c&&t.f<=this.c&&(!r&&(!n||i||o)||!n&&(i||o)||i&&o)},K.prototype.intersects=K.prototype.hd,K.merge=rg,K.fromPoints=sg,K.coverPoints=tg,K.coverLatLngAlts=ug,K.coverRects=vg,K.prototype.Dk=function(t,e){var r=this.a,n=this.c,i=this.b,o=this.f,a=this.Za().lng;mg(t,this.Dk,0);var s=t.lat-o-(n-o)/2,l=t.lng-a;return t=-180>(t=r+(0>(l=180<l||-180>l?-(a+t.lng):l)?2*l:0))?360+t:t,i=180<(i+=0<l?2*l:0)?i-360:i,90<=(n=0<s?n+2*s:n)&&(n=90),-90>=(o=0>s?o+2*s:o)&&(o=-90),e?og(e,n,t,o,i):new K(n,t,o,i)},K.prototype.resizeToCenter=K.prototype.Dk,K.prototype.zb="Polygon",K.prototype.Wc=function(){return[[this.a,this.c,0],[this.b,this.c,0],[this.b,this.f,0],[this.a,this.f,0],[this.a,this.c,0]]},K.prototype.W=function(){return this.jc()},K.prototype.jc=function(){return[this.c,this.a,this.f,this.b]},wg.prototype.remove=function(t){var e,r,n,i=!1;return t&&(e=t.node)&&e.b===this&&(r=e.entries)&&0<=(n=r.indexOf(t))&&(r.splice(n,1),this.m(e),zg(this,t,!1),i=!0),i},wg.prototype.flush=function(){var t=new Ag(B,NaN,this.f-this.i,this.g-this.j,this.f+this.i,this.g+this.j);t.b=this,this.head=this.a=t,this.b=null},wg.prototype.Ua=function(t,e,r,n,i,o){var a=[],s=this.head,l=this.a;return t<=s[5]&&e<=s[6]&&(i?r>=s[7]:r>s[7])&&(o?n>=s[4]:n>s[4])&&Cg(this,s,a,t,e,r,n,o||n>=l[6],i||r>=l[5]),a},wg.prototype.Dc=ba(1);var Dg=0;function Ag(t,e,r,n,i,o){this.c=e,t&&(this.parent=t,this.b=t.b,1&e?(r=t[8],i=t[5]):(r=t[7],i=t[8]),2&e?(n=t[9],o=t[6]):(n=t[4],o=t[9])),this[7]=r,this[5]=i,this[8]=(r+i)/2,this[4]=n,this[6]=o,this[9]=(n+o)/2}function Eg(t,e){return t[e]||(++t.a,t[e]=new Ag(t,e))}function Fg(t,e){(t.entries||(t.entries=[])).push(e),e.node=t}function Gg(t,e,r,n,i){var o=t[5],a=t[6];return t[7]<=e&&t[4]<=r&&(o>n||o===n&&o===t.b.a[5])&&(a>i||a===i&&a===t.b.a[6])}function Hg(t,e,r,n,i,o){Hg.l.constructor.apply(this,arguments)}function Ig(t,e,r,n,i){if(Gg(t.a,e,r,n,i))return Jg(t,t.a,e,r,n,i,t.c);throw Error("Coordinates out of bounds")}function Jg(t,e,r,n,i,o,a){var s=e[8],l=e[9],u=0,c=0;return a&&(i<s||(u=+(r>=s)))&&(o<l||(c=+(n>=l)))?r=Jg(t,Eg(e,u|c<<1),r,n,i,o,a-1):(Fg(e,r=new Kg(r,n,i,o)),zg(t,r,!0),Bg(t,e)),r}function Kg(t,e,r,n){this.id=Dg++,this[0]=e,this[1]=r,this[2]=n,this[3]=t}function Lg(t){this.g=new Hg(+t||10,180,90,0,0,!0),this.f=[],this.i=!1,this.a=this.b=this.c=null}function Mg(t,e,r,n,i,o){return o?(o=new Kg(i,-e,r+360,-n),t.f.push(o),t.i=!0,t.a&&t.a.tc(e,r,n,i,!0,t.a)):(o=Ig(t.g,r,-e,i,-n),t.b&&t.b.tc(e,r,n,i,!0,t.b)),++t.ph,t.c=null,o}function Ng(t,e,r,n,i,o,a){var s,l=(t=t.f).length,u=[];if(l){var c=r+360;for(s=i+360;l--;){var h=t[l];(Og(h,e,r,n,i,o,a)||Og(h,e,c,n,s,o,a))&&u.push(h)}}return u}function Og(t,e,r,n,i,o,a){var s=t[3],l=t[0],u=t[1];return t=t[2],(o?l<=n:l<n)&&(a?s<=i:s<i)&&t>=e&&u>=r}function Pg(t,e){var r,n,i;if(r=e.length){var o=t.length;for(n={};o--;)n[t[o].id]=1;for(;r--;)(i=e[r]).id in n||t.push(i)}}Ag.prototype.a=0,Ag.prototype.removeChild=function(t){var e=t.c;this[e]===t&&(delete this[e],delete t.parent,--this.a)},Ag.prototype.Dc=ba(0),u(Hg,wg),Hg.prototype.m=function(t){for(var e,r,n=this.head;t&&!((e=t.entries)&&e.length||(e&&delete t.entries,t.a||!(r=t.parent)));)r.removeChild(t),n===t&&(n=r),t=r;this.head!==n&&(this.head=n,Bg(this))},Hg.prototype.qc=function(t,e){return Ig(this,t,e,t,e)},Kg.prototype.a=function(t){return this[t]},t("H.geo.QuadTree",Lg),p=Lg.prototype,p.ph=0,p.Lc=function(){return this.ph},p.tb=function(){return this.i},p.G=function(){var t,e;if(!this.c){var r,n,i,o=[];if(!this.b&&(t=xg(this.g))&&(this.b=new K(-t[0],t[3],-t[2],t[1])),(e=this.b)&&o.push(e),!this.a&&(i=(n=this.f).length)){t=90;var a=360,s=-90;for(r=0;i--;){var l=n[i];t=wd(t,l[0]),a=wd(a,l[3]),s=xd(s,l[2]),r=xd(r,l[1])}this.a=new K(-t,a,-s,r-360)}(e=this.a)&&o.push(e),(e=o[0])&&(o[1]&&(e=e.Xb(o[1],!0)),this.c=e)}return this.c},p.qc=function(t){var e=t.lng;return Mg(this,t=t.lat,e,t,e,!1)},p.Ij=function(t){var e=t.Fb(),r=t.Bb();return(t=t.tb())?Mg(this,e.lat,r.lng,r.lat,e.lng,t):Mg(this,e.lat,e.lng,r.lat,r.lng,t)},Lg.prototype.insertBoundingBox=Lg.prototype.Ij,Lg.prototype.remove=function(t){var e;if(t.node){var r=this.g.remove(t);this.b=null}else(r=0<=(t=(e=this.f).indexOf(t)))&&(e.splice(t,1),this.i=0<e.length,this.a=null);return r&&(--this.ph,this.c=null),r},Lg.prototype.remove=Lg.prototype.remove,Lg.prototype.Df=function(t,e,r){var n=this.g,i=t.Fb(),o=t.Bb(),a=-i.lat;i=i.lng;var s=-o.lat;return o=o.lng,!e&&a===s||!r&&i===o?t=[]:t.tb()?(Pg(t=n.Ua(-180,a,o,s,r,e),n.Ua(i,a,180,s,!1,e)),Pg(t,Ng(this,a,o,s,i+360,e,r))):Pg(t=n.Ua(i,a,o,s,r,e),Ng(this,a,i,s,o,e,r)),t},Lg.prototype.intersectBoundingBox=Lg.prototype.Df;var Qg=[62,-1,-1,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Rg="undefined"!==typeof BigInt?BigInt:Number;function Sg(t){var e=Rg(0),r=Rg(0),n=[];if(t.split("").forEach((function(t){t=Rg(Qg[t.charCodeAt(0)-45]),e|=(t&Rg(31))<<r,(t&Rg(32))===Rg(0)?(n.push(e),e=Rg(0),r=Rg(0)):r+=Rg(5)})),0<r)throw Error("Invalid encoding");return n}function Tg(t){return t&Rg(1)&&(t=~t),+(t>>=Rg(1)).toString()}function Ug(t){var e=void 0===t.precision?5:t.precision,r=void 0===t.Ze?0:t.Ze,n=void 0===t.$e?0:t.$e;t=t.Oh;var i=Math.pow(10,e),o=Math.pow(10,n);e=Vg(e,r,n);var a=[],s=Rg(0),l=Rg(0),u=Rg(0);return t.forEach((function(t){var e=Rg(Math.round(t[0]*i));a.push(Wg(e-s)),s=e,e=Rg(Math.round(t[1]*i)),a.push(Wg(e-l)),l=e,r&&(t=Rg(Math.round(t[2]*o)),a.push(Wg(t-u)),u=t)})),(e instanceof Array?e:fa(ea(e))).concat(a instanceof Array?a:fa(ea(a))).join("")}function Vg(t,e,r){if(0>t||15<t)throw Error("precision out of range. Should be between 0 and 15");if(0>r||15<r)throw Error("thirdDimPrecision out of range. Should be between 0 and 15");if(0>e||7<e||4===e||5===e)throw Error("thirdDim should be between 0, 1, 2, 3, 6 or 7");return t|=r<<7|e<<4,Xg(1)+Xg(t)}function Xg(t){var e="";for(t=Rg(t);31<t;){e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[t&Rg(31)|Rg(32)],t>>=Rg(5)}return e+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[t]}function Wg(t){var e=0>(t=Rg(t));return t<<=Rg(1),e&&(t=~t),Xg(t)}function Yg(t){return Ug({Oh:t.polyline,precision:t.precision,Ze:t.thirdDim,$e:t.thirdDimPrecision})}function Zg(t){if(1!==+(t=Sg(t))[0].toString())throw Error("Invalid format version");var e=+t[1].toString();e={precision:15&e,Ze:e>>4&7,$e:e>>7&15};for(var r=Math.pow(10,e.precision),n=Math.pow(10,e.$e),i=e.Ze,o=0,a=0,s=0,l=[],u=2;u<t.length;){var c=Tg(t[u])/r;o+=c,a+=Tg(t[u+1])/r,i?(s+=c=Tg(t[u+2])/n,l.push([o,a,s]),u+=3):(l.push([o,a]),u+=2)}if(u!==t.length)throw Error("Invalid encoding. Premature ending reached");return{polyline:(t=Object.assign({},e,{Oh:l})).Oh,precision:t.precision,thirdDim:t.Ze,thirdDimPrecision:t.$e}}function L(t){L.l.constructor.call(this),t&&$g(t,L,0),this.X=t||[],this.a=ah(this,0,this.X.length)}function ah(t,e,r){t=t.X;var n=0;for(e=xd(e,0),r=wd(r,t.length),r-=2,e+=1;e<r;)n+=jg(t[e],t[e+=3]);return n}function bh(t,e,r,n,i){var o=t.X.length;e=gg(e,i),r=hg(r,i),t.X.push(gg(e,i),hg(r,i),n===B?0:ig(n,i)),o&&(t.a+=jg(t.X[o-2],r)),delete t.b,delete t.c}function $g(t,e,r){for(var n,i=t.length,o=!(i%3);o&&i;)o=!(E(t[--i]=ig((n=t[i])===B?0:n))||E(t[--i]=hg(t[i]))||E(t[--i]=gg(t[i])));if(!o&&e)throw new D(e,r,t)}function ch(t){var e=new L,r=0,n=t.length;if(n%2)throw new D(ch,0,t);for(;r<n;)bh(e,t[r++],t[r++],0,ch);return e}function dh(t,e){return t.b-e.b}function eh(t,e){var r,n=t.X,i=-2,o=[],a=t.c;if(!a){a=t.c=new Lg;var s=0,l=t.X,u=l.length;for(r=0;r<u;r+=3){var c=l[r],h=l[r+1];if(r){if(p<h)var f=p,p=h;else f=h;if(d<c)var A=c;else{A=d;var d=c}(f=Mg(a,A,f,d,p,180<p-f)).b=s++}d=c,p=h}}for(l=(a=a.Df(e).sort(dh)).length,e=0;e<l;e++){if(u=3*(s=(s=a[e]).b),s>i+1){var g=[n[u],n[u+1]];o.push(g)}i=s,g.push(n[u+3],n[u+4])}if(t.a){for(n=[],i=o.length,e=0;e<i;e++)if(a=(g=o[e]).length){for(l=[],t=0;t<a;t+=2)s=g[t],u=g[t+1],l.push(s,u),r=g[t-1],t&&jg(u,r)&&(n.push(l),r+=0>r?360:-360,(l=[]).push(g[t-2],r,s,u));n.push(l)}o=n}return o}function fh(t){var e=Zg(t);t=e.polyline;var r=e.thirdDim;if(e=2===r||3===r,r=0===r,!t)throw new D(fh,0,"data");if(e||r){r=t.length;for(var n=Array(3*r),i=0,o=0;i<r;i++){var a=t[i];n[o++]=a[0],n[o++]=a[1],n[o++]=e?a[2]:0}}if(!n)throw new D(fh,0,"only ABSENT, ALTITUDE or ELEVATION are supported as type of the 3rd dimension");return new L(n)}function gh(t){vc(this,gh),gh.l.constructor.call(this),this.ia=hh(this,t,this.constructor,0)}function hh(t,e,r,n){var i,o=[];if(!zc(e))throw new D(r,n);for(i=0;i<e.length;i++){if(!t.b(e[i]))throw new D(r,n);o.push(t.c(e[i]))}return o}function ih(t){ih.l.constructor.call(this,t)}function jh(){}t("H.util.flexiblePolyline.encode",Yg),t("H.util.flexiblePolyline.decode",Zg),u(L,kg),t("H.geo.LineString",L),L.prototype.Sh=function(t,e,r){bh(this,t,e,r,this.Sh)},L.prototype.pushLatLngAlt=L.prototype.Sh,L.prototype.Xe=function(t,e,r){r&&$g(r,this.Xe,2),void 0===e&&(e=this.X.length),e&&(this.a-=ah(this,t-3,t+e+3));var n=r?this.X.splice.apply(this.X,[t,e].concat(r)):this.X.splice(t,e);return r&&(this.a+=ah(this,t-3,t+r.length+3)),e&&!r&&(this.a+=ah(this,t-3,t-3)),delete this.b,delete this.c,n},L.prototype.spliceLatLngAlts=L.prototype.Xe,L.prototype.Jj=function(t,e,r,n){this.Xe(t,0,[e,r,n])},L.prototype.insertLatLngAlt=L.prototype.Jj,L.prototype.zk=function(t){this.Xe(t,3)},L.prototype.removeLatLngAlt=L.prototype.zk,L.prototype.md=function(t){bh(this,t.lat,t.lng,t.alt,this.md)},L.prototype.pushPoint=L.prototype.md,L.prototype.qc=function(t,e){this.Jj(3*t,e.lat,e.lng,e.alt)},L.prototype.insertPoint=L.prototype.qc,L.prototype.Pe=function(t){this.zk(3*t)},L.prototype.removePoint=L.prototype.Pe,L.prototype.re=function(t,e){var r=this.X,n=3*t;t=r[n];var i=r[n+1];return r=r[n+2],e&&(e.lat=t,e.lng=i,e.alt=r),e||new lg(t,i,r)},L.prototype.extractPoint=L.prototype.re,L.prototype.yl=function(t,e,r){var n=this.X;e=e||0,r=af(r,n.length/3);for(var i=3*e;e<r;)t(n[i++],n[i++],n[i++],e++)},L.prototype.eachLatLngAlt=L.prototype.yl,L.isDBC=jg,L.prototype.Qg=function(t){var e=this.a;return t&&(e+=jg((t=this.X)[t.length-2],t[1])),e},L.prototype.getDBCs=L.prototype.Qg,L.prototype.Ae=function(){return this.X.length/3},L.prototype.getPointCount=L.prototype.Ae,L.prototype.jm=function(){return this.X},L.prototype.getLatLngAltArray=L.prototype.jm,L.prototype.b=y,L.prototype.G=function(){var t;if(!(t=this.b)){var e,r,n=(t=this.X).length,i=3,o=y;if(3<=n){var a=e=t[0],s=r=t[1];for(o=new K(a,s,e,r);i<n;i+=3){if(a=t[i-3],s=t[i-2],e=t[i],s>(r=t[i+1])&&180<r-s||s<r&&-180>s-r||r<s&&180>Bd(r-s)){var l=s;s=r,r=l}a<e&&(l=a,a=e,e=l),rg(o.c,o.a,o.f,o.b,a,s,e,r,o)}}t=this.b=o}return t},L.prototype.getBoundingBox=L.prototype.G,L.prototype.Xm=function(){return this.b!==y},L.prototype.hasBoundingBox=L.prototype.Xm,L.fromLatLngArray=ch,L.prototype.fa=function(t){var e,r=this===t;if(!r&&(r=C(t,L))){var n=this.X;for(t=t.X,r=(e=n.length)===t.length;r&&e--;)r=n[e]==t[e]}return r},L.prototype.equals=L.prototype.fa,p=L.prototype,p.lb="LineString",p.Xc=function(t,e){var r,n=this.X,i=n.length;if(i){for(t.push("("),r=0;r<i;r+=3)r&&t.push(","),t.push(n[r+1]," ",n[r]);e&&(n[0]!==n[i-3]||n[1]!==n[i-2])&&t.push(",",n[1]," ",n[0]),t.push(")")}else t.push("EMPTY");return t},p.zb="LineString",p.Wc=function(){var t,e=[],r=this.X,n=r.length;for(t=0;t<n;t+=3)e.push([r[t+1],r[t],r[t+2]]);return e},p.jc=function(){var t,e=this.X;if(this.G().tb()){var r=1;for(t=(e=e.slice()).length;r<t;r+=3)0>e[r]&&(e[r]+=360)}return e},p.jo=function(t){t=void 0===t?5:t;for(var e=this.X,r=e.length,n=[],i=0;i<r;i+=3)n.push([e[i],e[i+1],e[i+2]]);return Yg({polyline:n,precision:t,thirdDim:2,thirdDimPrecision:t})},L.prototype.toFlexiblePolyline=L.prototype.jo,L.fromFlexiblePolyline=fh,u(gh,kg),t("H.geo.MultiGeometry",gh),gh.prototype.splice=function(t,e,r){return t=[t],e!==B&&t.push(e),r&&(e=hh(this,r,this.splice,2),t=t.concat(e)),this.a=y,this.ia.splice.apply(this.ia,t)},gh.prototype.splice=gh.prototype.splice,gh.prototype.$b=function(t){var e=this.ia.length;if(!(0<=t&&t<e))throw new le(this.$b,t,[0,e-1]);return this.a=y,this.ia.splice(t,1)[0]},gh.prototype.removeAt=gh.prototype.$b,gh.prototype.remove=function(t){if(0<=(t=this.ia.indexOf(t))){var e=this.ia.splice(t,1)[0];this.a=y}return e||y},gh.prototype.remove=gh.prototype.remove,gh.prototype.am=function(){return this.ia},gh.prototype.getGeometries=gh.prototype.am,gh.prototype.push=function(t){var e=hh(this,[t],this.push,0)[0];this.a&&(this.a=this.a.Xb(t.G())),this.ia.push(e)},gh.prototype.push=gh.prototype.push,gh.prototype.G=function(){var t,e,r;if(!(t=this.a)&&(t=y,this.ia.length))for(t=this.ia[0].G(),r=1;r<this.ia.length;r++)(e=this.ia[r].G())&&(t=t?t.Xb(e):e);return this.a=t},gh.prototype.getBoundingBox=gh.prototype.G,gh.prototype.a=y,gh.prototype.c=function(t){return t},gh.prototype.fa=function(t){var e,r=this===t;if(!r&&(r=C(t,this.constructor))){var n=this.ia;for(t=t.ia,r=(e=n.length)===t.length;r&&e--;)r=n[e].fa(t[e])}return r},gh.prototype.equals=gh.prototype.fa,gh.prototype.Xc=function(t){var e,r,n=this.ia,i=n.length,o=!1;if(i){for(t.push("("),e=0;e<i;e++)(r=0<e&&o)&&t.push(","),n[e].Xc(t),"EMPTY"===t[t.length-1]?t.splice(-1-+r,+r+1):o=!0;o?t.push(")"):t.splice(-1,1,"EMPTY")}else t.push("EMPTY");return t},gh.prototype.jc=function(){for(var t=[],e=this.ia,r=e.length;r--;)t[r]=e[r].jc();return t},gh.prototype.W=function(){var t=gh.l.W.call(this);return t.type=this.lb,t},gh.prototype.Wc=function(){for(var t=[],e=this.ia,r=e.length;r--;)t[r]=e[r].Wc();return t},u(ih,gh),t("H.geo.MultiLineString",ih),ih.prototype.b=function(t){return C(t,L)},ih.prototype.lb="Multi"+L.prototype.lb,ih.prototype.zb="Multi"+L.prototype.zb,t("H.map.provider.Invalidations",jh),jh.MARK_INITIAL=Vd,jh.prototype.update=function(t,e){e!==kh.NONE&&(this.a=t,e&kh.SPATIAL&&(this.f=t),e&kh.VISUAL&&(this.g=t),e&kh.ADD&&(this.b=t),e&kh.REMOVE&&(this.c=t),e&kh.Z_ORDER&&(this.j=t),e&kh.VOLATILITY&&(this.i=t))},jh.prototype.update=jh.prototype.update,jh.prototype.pm=function(){return this.a},jh.prototype.getMark=jh.prototype.pm,jh.prototype.a=Vd,jh.prototype.an=function(t){return this.a>t},jh.prototype.isAny=jh.prototype.an,jh.prototype.g=Vd,jh.prototype.Rd=function(t){return this.g>t},jh.prototype.isVisual=jh.prototype.Rd,jh.prototype.f=Vd,jh.prototype.jh=function(t){return this.f>t},jh.prototype.isSpatial=jh.prototype.jh,jh.prototype.b=Vd,jh.prototype.Kj=function(t){return this.b>t},jh.prototype.isAdd=jh.prototype.Kj,jh.prototype.c=Vd,jh.prototype.Ff=function(t){return this.c>t},jh.prototype.isRemove=jh.prototype.Ff,jh.prototype.j=Vd,jh.prototype.kh=function(t){return this.j>t},jh.prototype.isZOrder=jh.prototype.kh,jh.prototype.i=Vd,jh.prototype.en=function(t){return this.i>t},jh.prototype.isVolatility=jh.prototype.en;var kh={NONE:0,VISUAL:1,SPATIAL:2,ADD:4,REMOVE:8,Z_ORDER:16,VOLATILITY:32};function lh(t){lh.l.constructor.call(this),void 0!==t&&(this.data=t)}function M(t){if(vc(this,M),M.l.constructor.call(this,t?t.data:B),this.na=mh.next(),t){var e="min";Dc(t[e])&&(this.s=t[e]),Dc(t[e="max"])&&(this.m=t[e]),(e="visibility")in t&&(this.u=!!t[e]),(e="volatility")in t&&(this.T=!!t[e]),(e="zIndex")in t&&(this.j=+t[e]||0),(e="provider")in t&&!C(t[e],N)&&(this.ja=t[e],this.pa(kh.ADD))}}jh.Flag=kh,u(lh,F),t("H.map.Feature",lh),lh.prototype.getData=function(){return this.data},lh.prototype.getData=lh.prototype.getData,lh.prototype.o=function(){lh.l.o.call(this),delete this.data},u(M,lh),t("H.map.Object",M);var mh=new cf(1),nh={ANY:31,OVERLAY:1,SPATIAL:2,MARKER:4,DOM_MARKER:8,GROUP:16};function oh(t,e,r){var n,i;if(!r||t[0]|e[0]){var o=t.length,a=e.length,s=wd(o,a),l=1;for(i=+r+1;l<s;l+=i)if(n=t[l]-e[l])return n}return r?0:o-a}function ph(t,e){return t.Oi(e)}function qh(t,e,r){if(null===e||e===B)return null;if(0<=Object.keys(e).length&&"[object Object]"!==Object.prototype.toString.call(e))throw Error(vh(t,r));try{return JSON.stringify(e),e}catch(n){throw Error(vh(t,r))}}function vh(t,e){return"Object Remote-Id: "+t.i+" - "+(e?"The value returned by the callback is not a valid JSON object and cannot be set as Feature properties.":"The given object data is not a valid JSON object and cannot be set as Feature properties.")}function wh(t){var e;if(t){var r=xh;for(e=C(t,wh);r--;){var n=yh[r];if(t.hasOwnProperty(n)){var i=t[n];if(e)this[n]=i;else{if((i=zh[r](i))===Ah)throw new D(wh,0,n+": "+t[n]);i!==this[n]&&i!==B&&(this[n]=i)}}}(r=e?t.b:this.lineWidth&&Ze(this.strokeColor))||(this.b=r),(r=e?t.Gb:Ze(this.fillColor))||(this.Gb=r),(r=e?t.a:"none"!==this.strokeColor&&this.lineWidth)||(this.a=r)}pc(this)}M.Type=nh,M.prototype.$a=function(){return this.na},M.prototype.getId=M.prototype.$a,M.prototype.ki=function(t){if(!Dc(t)&&!Ac(t))throw new D(this.ki,0,"id must be a number or a string");return this.i=t,this},M.prototype.setRemoteId=M.prototype.ki,M.prototype.Cm=function(){return this.i},M.prototype.getRemoteId=M.prototype.Cm,M.prototype.s=-1/0,M.prototype.m=1/0,M.prototype.nj=function(t){var e=this.m;if(t)for(t=this;t=t.Ca;)e=wd(e,t.m);return e},M.prototype.getMax=M.prototype.nj,M.prototype.pj=function(t){var e=this.s;if(t)for(t=this;t=t.Ca;)e=xd(e,t.s);return e},M.prototype.getMin=M.prototype.pj,M.prototype.u=!0,M.prototype.jb=function(t){return(t=!!t)!==this.u&&(this.u=t,this.invalidate(kh.VISUAL)),this},M.prototype.setVisibility=M.prototype.jb,M.prototype.oc=function(t){for(var e,r=this;(e=r.u)&&t&&(r=r.Ca););return e},M.prototype.getVisibility=M.prototype.oc,M.prototype.T=!1,M.prototype.Af=function(t){for(var e,r=this;!(e=r.T)&&t&&(r=r.Ca););return e},M.prototype.getVolatility=M.prototype.Af,M.prototype.Qk=function(t){var e=this.T;return e!==!!t&&(this.T=!e,this.invalidate(kh.VOLATILITY)),this},M.prototype.setVolatility=M.prototype.Qk,M.prototype.j=B,M.prototype.Bj=function(){return this.j},M.prototype.getZIndex=M.prototype.Bj,M.prototype.ae=function(t){return t!==this.j&&(this.Qe(),this.j=t,this.invalidate(kh.Z_ORDER)),this},M.prototype.setZIndex=M.prototype.ae,M.prototype.L=B,M.prototype.Oc=function(){var t,e,r=this.L;if(!r){var n=+((t=this.j)!==B);(r=this.Ca)?(r=r.Oc().slice())[0]|=n:r=[n],r.push(t||0,0>(e=this.ni)?this.na:e),this.L=r}return r},M.prototype.getZInfo=M.prototype.Oc,M.prototype.Qe=function(){this.L=B},M.compareZInfo=oh,M.compareZOrder=ph,M.prototype.Oi=function(t){return this.R-t.R||oh(this.Oc(),t.Oc(),!1)},M.prototype.compareZOrder=M.prototype.Oi,p=M.prototype,p.previousSibling=y,p.nextSibling=y,p.ni=-1,p.Ca=y,p.tm=function(){return this.Ca},M.prototype.getParentGroup=M.prototype.tm,M.prototype.Ub=function(){for(var t,e=this;t=e.Ca;)e=t;return e},M.prototype.getRootGroup=M.prototype.Ub,M.prototype.contains=function(t){return this===t},M.prototype.contains=M.prototype.contains,M.prototype.ha=function(t){if(this.Ca)throw new Yc(this.ha,"Not allowed for a child of a group");M.l.ha.call(this,t)},M.prototype.setParentEventTarget=M.prototype.ha,M.prototype.draggable=!1,M.prototype.ja=y,M.prototype.da=function(){return this.ja},M.prototype.getProvider=M.prototype.da,M.prototype.$d=function(t,e){var r,n=this.ja;if(r=n!==t){if(e&&(n&&!C(n,N)||t&&!C(t,N)))throw new Yc(e,"Only LocalObjectProvider allows an object transfers");e=this.type!==nh.GROUP,n&&(this.invalidate(kh.REMOVE),e&&n.Da(this)),(this.ja=t)&&(e&&t.ba(this),this.ra=y,this.invalidate(kh.ADD))}return r},M.prototype.ra=y,M.prototype.Db=function(){return this.ra||(this.ra=new jh)},M.prototype.getInvalidations=M.prototype.Db,M.prototype.pa=function(t){var e,r=this.da();return(e=!!r)&&r.invalidateObject(this,t),e},M.prototype.invalidate=M.prototype.pa,M.prototype.o=function(){this.Ca&&this.Ca.Da(this),M.l.o.call(this)},M.prototype.setData=function(t){return this.data=t,this},M.prototype.setData=M.prototype.setData,M.prototype.Cc=function(t){var e;if(t&&!Da(t))throw new D(M.prototype.Cc,0,"opt_callback must be a function");return t=qh(this,t?t(this.data):this.data,!!t),e=this instanceof rh||this instanceof sh||this instanceof th||this instanceof uh?{type:"Feature",properties:t,geometry:this.ca().Cc()}:{type:"FeatureCollection",features:hf},this.i&&(e.id=this.i),e},M.prototype.toGeoJSON=M.prototype.Cc,M.prototype.W=function(){return{id:this.na,properties:{min:this.pj(),max:this.nj(),zIdx:this.j,sIdx:this.ni,parent:this.Ca?this.Ca.$a():0,visible:this.oc(),volatile:this.Af()},type:"Feature"}},M.prototype.forWorkerMessage=M.prototype.W,t("H.map.SpatialStyle",wh),wh.prototype.Gb=!0,wh.prototype.b=!0,wh.prototype.a=!0;var yh="strokeColor fillColor lineWidth lineCap lineJoin miterLimit lineDash lineDashOffset lineHeadCap lineTailCap".split(" ");wh.prototype.strokeColor="rgba(0,85,170,.6)",wh.prototype.strokeColor=wh.prototype.strokeColor,wh.prototype.fillColor="rgba(0,85,170,.4)",wh.prototype.fillColor=wh.prototype.fillColor,wh.prototype.lineWidth=2,wh.prototype.lineWidth=wh.prototype.lineWidth,wh.prototype.lineCap="round",wh.prototype.lineCap=wh.prototype.lineCap,wh.prototype.lineJoin="miter",wh.prototype.lineJoin=wh.prototype.lineJoin,wh.prototype.miterLimit=1,wh.prototype.miterLimit=wh.prototype.miterLimit,wh.prototype.kn=hf,wh.prototype.lineDash=wh.prototype.kn,wh.prototype.lineDashOffset=0,wh.prototype.lineDashOffset=wh.prototype.lineDashOffset,wh.prototype.ln=B,wh.prototype.lineHeadCap=wh.prototype.ln,wh.prototype.mn=B,wh.prototype.lineTailCap=wh.prototype.mn;var xh=yh.length;wh.prototype.fa=function(t){var e=this===t;if(!e&&t){for(e=0;e<xh;e++){var r=yh[e];if(this[r]!==t[r])break}e=e===xh}return e},wh.prototype.equals=wh.prototype.fa,wh.prototype.fj=function(t){if(t){var e={};Xa(e,this,t)}else e=this;return new wh(e)},wh.prototype.getCopy=wh.prototype.fj;var Ah=pc({}),zh=[function(t){return t?oc(t):Ah},function(t){return t?oc(t):Ah},function(t){return 0<=t&&100>=t?+t:Ah},function(t){return"butt"===(t=oc(t))||"square"===t||"round"===t||"arrow-head"===t||"arrow-tail"===t?t:Ah},function(t){return"round"===t||"bevel"===t||"miter"===t?t:Ah},function(t){return 0<t&&100>=t?+t:Ah},function(t){return t&&t.every&&t.every(Ec)?t:Ah},function(t){return E(+t)?Ah:+t},function(t){return uc(t)?zh[3](t):B},function(t){return uc(t)?zh[3](t):B}];wh.MAX_LINE_WIDTH=100;var Bh=new wh;wh.DEFAULT_STYLE=Bh;var Ch="fillColor strokeColor lineWidth lineCap lineJoin miterLimit lineDashOffset lineDash lineTailCap lineHeadCap".split(" ");function Dh(t){var e;if(t){var r=C(t,Dh);for(e in t)if(e in this){var n=t[e];n!==this[e]&&("fillColor"===e||0<(n=+n))&&(this[e]=n)}(t=r?t.Gb:!!(Ze(this.fillColor)&&this.width&&this.width))||(this.Gb=t)}pc(this)}function Eh(t,e){var r;Eh.l.constructor.call(this,e),e&&this.bc(e.style),t&&(this.g=!0),e&&(r=e.arrows)&&this.Ik(r)}function Fh(t,e){var r,n=!1,i=!1;if(e.length){for(n=0;n<e.length;n++)if(e[n]!==Gh){i=!0;break}e=t.style,n=i?e.b||e.Gb&&t.g||(r=t.c||!1)&&e.a&&r.Gb:e.Gb}return n&&t.oc(!0)}function Hh(t,e){Hh.l.constructor.call(this,t,e)}function Ih(t,e,r,n){var i,o=[],a=e.length;for(i=0;i<a;i++){var s=e[i];s.length&&o.push(Jh(t,s,r,n))}return o}function Jh(t,e,r,n){var i,o=[],a=e.length,s=0;for(t.ya=0,i=i||0;s<a;)o.push(Kh(t,e[s++],e[s++],i,n));return r&&o.push(Kh(t,e[0],e[1],i,n)),o}function Kh(t,e,r,n,i){var o=t.ya;return o&&180<Bd(o-r)&&(r+=0>o?-360:360),t.ya=r,i.lh(e,r+n)}function Lh(t,e,r){for(var n,i,o,a=e,s=t.length+e;a--;){for(i=(e=t[a]).length,n=Array(i);i--;)o=e[i],n[i]=new G(o.x+r,o.y);t[--s]=n}}function Mh(t,e,r){this.paths=this.a=t,e!==B&&(this.interiorsIndex=this.b=e),r!==B&&(this.outlinesIndex=this.c=r)}wh.prototype.W=function(){for(var t,e={},r=Ch.length;r--;)e[t=Ch[r]]=this[t];return e},wh.prototype.forWorkerMessage=wh.prototype.W,t("H.map.ArrowStyle",Dh),Dh.prototype.Gb=!0,Dh.prototype.fillColor="rgba(255,255,255,.75)",Dh.prototype.width=1.2,Dh.prototype.length=1.6,Dh.prototype.frequency=5,Dh.prototype.ej=function(){return new Dh(this)},Dh.prototype.fa=function(t){var e=this===t;return!e&&t&&(e=t.width===this.width&&t.fillColor===this.fillColor&&t.length===this.length&&t.frequency===this.frequency),e},Dh.prototype.equals=Dh.prototype.fa,u(Eh,M),t("H.map.Spatial",Eh),Eh.prototype.type=nh.SPATIAL,Eh.prototype.R=0,Eh.prototype.style=Bh,Eh.prototype.oa=function(){return this.style},Eh.prototype.getStyle=Eh.prototype.oa,Eh.prototype.bc=function(t){var e=!0;return t?this.style=C(t,wh)?t:new wh(t):this.style?delete this.style:e=!1,e&&this.invalidate(kh.VISUAL),this},Eh.prototype.setStyle=Eh.prototype.bc,Eh.prototype.Gl=function(){return this.c},Eh.prototype.getArrows=Eh.prototype.Gl,Eh.prototype.Ik=function(t){var e=this.c,r=!1;return!t&&e?(delete this.c,r=!0):!t||e&&e.fa(t)||(this.c=new Dh(t),r=!0),r&&"none"!==this.style.strokeColor&&this.pa(1),this},Eh.prototype.setArrows=Eh.prototype.Ik,Eh.prototype.g=!1,Eh.prototype.bn=function(){return this.g},Eh.prototype.isClosed=Eh.prototype.bn,Eh.prototype.getGeometriesForTile=Eh.prototype.Gd,Eh.prototype.Tg=function(){return B},Eh.prototype.getLabels=Eh.prototype.Tg,u(Hh,Eh),t("H.map.GeoShape",Hh),Hh.prototype.getBoundingBox=Hh.prototype.G,Mh.prototype.b=Ud,Mh.prototype.interiorsIndex=Mh.prototype.b,Mh.prototype.c=Ud,Mh.prototype.outlinesIndex=Mh.prototype.c;var Gh=qc(new Mh([])),Nh=pc([]),Qh;function th(t,e){th.l.constructor.call(this,!1,e),this.aa(t)}function Oh(t,e){if(!C(t,L)||2>t.Ae())throw new D(e,0)}function Ph(t,e,r,n){var i=eh(e,r.wf());if(i.length&&(i=(t=Ih(t,i,!1,e=r.yf())).length)){var o=r.Ce();e=e.w,r.x||Lh(t,i,-e),r.x===(1<<r.z)-1&&Lh(t,i,e),(r=Uf(t,o.left,o.top,o.right,o.bottom,!1)).length&&n.push(new Mh(r))}}function Rh(t,e){if(x.URL)return new x.URL(t,e).toString();if(!t||!Sh(t))return t;if(!e||Sh(e))throw new TypeError("Failed to construct 'URL': Invalid base URL");Qh||Gc(Qh=document.createElement("a"));var r=Qh;return r.href=e,"/"!==t[0]?t=r.href.replace(/\/[^\/]*$/,"/")+t:((e=r.origin)||(e=r.protocol+"//"+r.host),t=e+t),t}function Sh(t){var e=!1;return"string"===typeof t&&(e=!(-1<t.search(/^(http|https|data|blob):/)||"//"===t.substr(0,2))),e}function Th(t,e){if(Th.l.constructor.call(this),e&&Sh(e))throw new D(Th,1,"Base URL must be absolute");this.i=Uh.INIT,this.a=null,this.m=e}u(th,Hh),t("H.map.Polyline",th),th.prototype.G=function(){return this.a.G()},th.prototype.getBoundingBox=th.prototype.G,th.prototype.aa=function(t){var e,r,n=this.aa;if(C(t,ih)){var i=t.ia;if(!(e=i.length))throw new D(n,0);for(r=0;r<e;r++)Oh(i[r],n)}else Oh(t,n);return this.b=!!i,this.a=t,this.pa(kh.SPATIAL),this},th.prototype.setGeometry=th.prototype.aa,th.prototype.ca=function(){return this.a},th.prototype.getGeometry=th.prototype.ca,th.prototype.clip=function(t){var e=this.a;return eh(this.b?e.ia[0]:e,t)},th.prototype.clip=th.prototype.clip,th.prototype.Gd=function(t){var e,r=this.a,n=[];if(this.b)for(e=(r=r.ia).length;e--;)Ph(this,r[e],t,n);else Ph(this,r,t,n);return n.length?n:B},th.prototype.getGeometriesForTile=th.prototype.Gd,th.prototype.W=function(){var t=th.l.W.call(this),e=t.properties;return t.geometry=this.ca().W(),e.style=this.oa().W(),e.height=0,t},th.prototype.forWorkerMessage=th.prototype.W,u(Th,F),t("H.map.render.Style",Th),Th.prototype.load=Th.prototype.load,Th.prototype.getState=function(){return this.i},Th.prototype.getState=Th.prototype.getState,Th.prototype.O=function(t){this.i=t},Th.prototype.setState=Th.prototype.O,Th.prototype.Ab=function(){return this.m},Th.prototype.getBaseUrl=Th.prototype.Ab,Th.prototype.Kc=function(){return rc(this.a)},Th.prototype.getConfig=Th.prototype.Kc,Th.prototype.Nl=function(){return this.a},Th.prototype.getConfigReference=Th.prototype.Nl,Th.prototype.rd=function(t){this.a=t},Th.prototype.setConfig=Th.prototype.rd,Th.prototype.yb=function(t){this.a=null,this.O(Uh.ERROR);var e=Vh;ue(this.S,void 0!==e?String(e):void 0)?this.dispatchEvent(new ud(Vh,t,this)):console.error(t)},Th.prototype.dispatchError=Th.prototype.yb,Th.prototype.o=function(){Th.l.o.call(this),this.a=null};var Vh="error",Wh={Zc:"change",yi:Vh},Uh={ERROR:-1,INIT:0,LOADING:1,READY:2};function Xh(t,e){var r,n,i,o=arguments.length;for(r=1;r<o;r++)if((n=arguments[r])&&n!==t&&n!==a){var a=n;for(i in n){var s=n[i];t[i]!==s&&(Yh(s)?Yh(t[i])?t[i]=Xh(t[i],s):t[i]=rc(s):void 0!==s&&(t[i]=rc(s)))}}return t}Th.State=Uh,t("H.util.webgl.mergeObjects",Xh);var Zh=nc();function $h(t,e,r){var n=r[t];return e&&n in e&&0>tc.indexOf(n)?(e=e[n],++t<r.length?$h(t,e,r):e):Zh}var ai=$h.bind(null,0),bi={polygons:1,lines:1,"pattern-lines":1,points:1,text:1,raster:1,custom_icons:1,overlays:1},ci={data:1,draw:1,enabled:1,filter:1,properties:1},di=Object.keys(ci);function ei(t,e,r,n,i,o){var a=n[t],s=r[a];if(++t<n.length){var l=e[a]||{};for(r=di.length;r--;){var u=di[r];if("draw"!==u||!o){var c=s[u];c!==B&&(l[u]=rc(c))}}ei(t,l,s,n,i,o)}else i?l=rc(s):(l=s,delete r[a]);e[a]=e[a]?Xh(e[a],l):l}var fi=ei.bind(null,0);function gi(t,e){t in bi&&(e[t]=1)}function hi(t,e,r){var n,i,o;for(n in t)if(ci[n]){if("draw"===n){var a=t[n];for(i in a){var s=a[i];(o=s.style)?(s.style=e+o,gi(o,r)):(delete a[i],a[e+i]=s,gi(i,r))}}}else hi(t[n],e,r)}function ii(t,e){var r,n,i,o,a={};if(e+="_",r=(t=Xh({},t)).styles)for(n in r){var s=r[n];if(delete r[n],r[e+n]=s,i=s.mix)for(Ac(i)&&(i=[i]),o=i.length;o--;)gi(i[o],a),i[o]=e+i[o];(o=s.base)&&(i||(i=s.mix=[]),i.unshift(e+o),delete s.base,gi(o,a)),gi(n,a)}else r=t.styles={};if(s=t.layers)for(n in s)i=s[n],delete s[n],(o=i.data)&&!o.layer&&(o.layer=n),s[e+n]=i,hi(i,e,a);for(n in a)r[e+n]={base:n};return t}function ji(t,e){var r,n=t.sources,i=Object.keys(n)[0],o=Xh(n[i],{uid:e});for(r in n=t.layers,t.sources={},t.sources[e]=o,n)(t=n[r]).data?t.data.source===i&&(t.data.source=e):t.data={source:e}}function ki(t,e){var r,n=t.textures;for(r in t=t.fonts,n){var i=n[r];i.url&&(i.url=Rh(i.url,e))}for(r in t)if(zc(i=t[r]))for(n=0;n<i.length;n++){var o=i[n];o.url=o.url&&Rh(o.url,e)}else(o=i).url=o.url&&Rh(o.url,e)}function li(t,e){return"function(){return feature."+t+(e||"")+";}"}function mi(t){return li("style."+t,void 0)}function ni(t,e,r,n){return t={base:t,blend:e,blend_order:r},n&&(t.clean_depth=!!n),t}function oi(t){var e={};return e["translucent-"+(t?"extruded-":"")+"polygons"]={color:mi("fillColor"),order:1,interactive:!0,extrude:t},e}function pi(t,e,r,n){return t={data:{source:t,layer:e}},r&&(t.draw=r),n&&(t.filter=n),t}function Yh(t){return Ea(t)&&!zc(t)}function qi(t,e){if(qi.l.constructor.call(this,t,e),Ac(t))ri.test(t)&&-1===t.indexOf("import:")?(this.c=t,e||(this.j=Sh(this.c)?B:this.c)):this.f=t;else{if(!Ea(t))throw new D(qi,0,"invalid style configuration");this.rd(rc(t))}}function xi(t){var e,r=t.a;if(Ea(r)){var n;if(n=t.g){for(var i in n=!1,r=r&&r.sources)if(r[i].type===t.g){n=!0;break}n=!(!r||n)}n&&(e="invalid source, the only valid type is "+t.g)}else e="invalid style configuration";return e&&t.yb(e),!e}function vi(t){t.dispatchEvent(new sd("change",t))}function ti(t){if(t.getState()!==Uh.READY)throw new Yc(t.Fe,"style is not ready yet")}function ui(t,e,r,n){var i,o,a=[],s=zc(e)?e:[e];for(void 0===n&&(n=!0),s=s.sort().reverse();i=s.pop();){e=String(i).split(".");for(var l=t.a,u=e.length;u--&&!ci[e[u]];);if(l&&0>u&&Yh(l=ai(l.layers,e))||(l=Zh),l===Zh)throw new D(r,0,'Unresolvable layer ID "'+i+'"');if(a.push({id:e,bb:l}),n)for(o in l)!ci[o]&&Yh(l[o])&&s.push(i+"."+o)}return a}function wi(t,e){var r,n=0;for(r=e.length;n!==r;){var i=e[n++],o=t;if(!(t=o[i]))break}return n===r?{node:t,parent:o,Rf:i}:void 0}u(qi,Th),t("H.map.render.webgl.Style",qi),qi.prototype.load=function(){var t=this,e=this.Ab();this.c?(this.O(Uh.LOADING),new tf("text/plain",this.c).then((function(t){var r={};return si(t,e,!1,(r[e]=!0,r))})).then((function(e){return t.rd(e)}),(function(e){return t.yb(e.message)})),delete this.c):this.f&&(this.O(Uh.LOADING),si(this.f,e).then((function(e){return t.rd(e)}),(function(e){return t.yb(e.message)})),delete this.f)},qi.prototype.load=qi.prototype.load,qi.prototype.Nk=function(t,e,r){var n;for(ti(this),t=ui(this,t,this.Nk,r),r=0;r<t.length;r++){var i=t[r].bb.draw;for(n in i){var o=i[n];Yh(o)&&(o.interactive=!!e)}}vi(this)},qi.prototype.setInteractive=qi.prototype.Nk,qi.prototype.setProperty=function(t,e,r){var n,i=t.split("."),o=0,a=i.length;if(ti(this),!uc(e))throw new D(this.setProperty,1,"value");if(n=wi(this.a,i)){if(!(n.parent instanceof Object)||n.parent instanceof Array){if(!r)throw new D(this.setProperty,0,t+" property is not primitive type");i.pop(),i=wi(this.a,i),n.parent=i.parent[i.Rf]={}}n.parent[n.Rf]=e}else{for(n=this.a;o!==a-1;)n[i[o]]={},n=n[i[o++]];n[i[o]]=e}xi(this)&&vi(this)},qi.prototype.setProperty=qi.prototype.setProperty,qi.prototype.Yg=function(t){return ti(this),(t=wi(this.a,t.split(".")))?rc(t.node):void 0},qi.prototype.getProperty=qi.prototype.Yg,qi.prototype.removeProperty=function(t){ti(this),(t=wi(this.a,t.split(".")))&&t.parent&&t.parent.hasOwnProperty(t.Rf)&&(delete t.parent[t.Rf],xi(this)&&vi(this))},qi.prototype.removeProperty=qi.prototype.removeProperty,qi.prototype.qe=function(t,e,r){var n;ti(this);var i=this.a,o=i.layers,a=ui(this,t,this.qe,!1);for(t=a.length,n={};t--;)fi(n,o,a[t].id,!!e,!!r);for(r={},t=(a=Object.keys(i)).length;t--;){var s=a[t],l=i[s];r[s]=l===o?n:rc(l)}return e||vi(this),r},qi.prototype.extractConfig=qi.prototype.qe,qi.prototype.Fe=function(t){if(ti(this),!Ea(t))throw new D(this.Fe,0,"config");this.rd(Xh(this.a,t))},qi.prototype.mergeConfig=qi.prototype.Fe,qi.prototype.b=ba(2),qi.prototype.toString=function(){return this.getState()===Uh.READY?x.H.gl.yaml.safeDump(this.a,{lineWidth:120}):""},qi.prototype.o=function(){qi.l.o.call(this),delete this.f,delete this.c};var ri=/^(http[s]?)?.*\.ya?ml/i;function si(t,e,r,n){r=void 0!==r&&r,n=void 0===n?{}:n;try{var i=x.H.gl.yaml.safeLoad(t,{json:!0})}catch(o){return Promise.reject(o)}return i&&(Ac(t=i.import)&&(t=[t]),r&&e&&yi(i,e),delete i.import,zc(t)&&t.length)?(r=t.reduce((function(t,r){var i=e?Rh(r,e):r;return n[i]||(n[i]=!0,t.push(new tf("text/plain",i).then((function(t){return si(t,i,!0,n)})))),t}),[]),Promise.all(r).then((function(t){var e={};return t.forEach((function(t){return t&&Xh(e,t)})),Xh(e,i),e}))):Promise.resolve(i)}function yi(t,e){function r(t){t.url&&(t.url=Rh(t.url,e))}var n=t&&t.fonts;if(n)for(var i in n)zc(n[i])?n[i].forEach(r):r(n[i]);if(t=t&&t.textures)for(var o in t)r(t[o])}function O(t,e){var r;if(O.l.constructor.call(this),C(t,L,O,0),e!==B&&zc(e,O,1)){for(r=0;r<e.length;r++)C(e[r],L,O,1,"index "+r);this.a=e}else this.a=[];this.b=t,this.c=[]}function zi(t){var e=O,r=L,n=t.c,i=t.a,o=t.f,a=t.b;return i=[n,i,B,n,a,B,o,a,B,o,i,B],180<=t.sb()&&(i.splice(9,0,o,t=t.Za().lng,B),i.splice(3,0,n,t,B)),new e(new r(i))}qi.normalize=yi,qi.prototype.rd=function(t){qi.l.rd.call(this,t),xi(this)&&(this.O(Uh.READY),vi(this))},qi.prototype.Kc=function(){return qi.l.Kc.call(this)},qi.prototype.getConfig=qi.prototype.Kc,qi.prototype.Ab=function(){return this.j||qi.l.Ab.call(this)},qi.prototype.getBaseUrl=qi.prototype.Ab,t("H.map.Style",qi),qi.State=Uh,u(O,kg),t("H.geo.Polygon",O),O.fromRect=zi;var Ai={NORTH:90,SOUTH:-90};function Bi(t,e){var r,n,i;return(i=t.G())&&((r=t.Qg(!0))&&(n=t.Ae())&&(i=i.Xb(tg([t.re(0),t.re(n-1)],!0),!0)),360===i.sb()&&1===r%2&&(i=i.Rc(e,0))),i}function Ci(t,e,r,n){n=void 0===n||n;var i=t.a,o=Di.bind(null,e,r);return ce(e,r,t.b.X,0,!0,3)!==be.NONE&&(!n||!i.some(o))}function Di(t,e,r){return ce(t,e,r.X,0,!0,3)===be.SURFACE}function Ei(t,e){e=e.X,t=t.b.X;var r,n,i=e.length-3,o=t.length-3,a={};for(r=0;r<i;r+=3){var s=e[r],l=e[r+1],u=e[r+3],c=e[r+4];for(n=0;n<o;n+=3){var h=t[n],f=t[n+1],p=t[n+3],A=t[n+4];if(ag(new Yf(l,s),new Yf(c,u),new Yf(f,h),new Yf(A,p),a,!0))return!0}}return!1}function Fi(t,e){var r=e.b,n=e.a,i=n.length,o=r.X,a=o.length,s=t.b.X,l=s.length;if(Ei(t,r))return!0;for(r=0;r<a;r+=3)if(Ci(t,o[r],o[r+1]))return!0;for(r=0;r<l;r+=3)if(Ci(e,s[r],s[r+1]))return!0;for(r=0;r<i;r++)if(Ei(t,n[r]))return!0;return!1}function Gi(t){Gi.l.constructor.call(this,t)}function uh(t,e){var r=e&&(+e.extrusion||+e.extrude)||0,n=e&&+e.elevation||0,i=0;if(uh.l.constructor.call(this,!0,e),0<n&&(i+=n,this.b=n),0<r&&(i+=r,this.f=r),2047<i)throw new le(uh,i,[0,2047]);C(t,L)?this.aa(new O(t)):this.aa(t)}O.Direction=Ai,O.prototype.kd=Ai.NORTH,O.prototype.Ok=function(t){return this.kd!==t&&(this.f=y,this.c.length=0,this.kd=t),this},O.prototype.setPoleCovering=O.prototype.Ok,O.prototype.wm=function(){return this.kd},O.prototype.getPoleCovering=O.prototype.wm,O.prototype.Xl=function(){return this.b},O.prototype.getExterior=O.prototype.Xl,O.prototype.Lk=function(t){if(!C(t,L))throw new D(this.Lk,0,t);this.b=t,this.f=y},O.prototype.setExterior=O.prototype.Lk,O.prototype.fm=function(){return this.a},O.prototype.getInteriors=O.prototype.fm,O.prototype.hg=function(t,e,r){var n,i=arguments.length;for(n=2;n<i;n++)C(arguments[n],L,this.hg,n);var o=this.a.splice.apply(this.a,arguments);for(n=2;n<i;n++)arguments[n]=B;return this.c.splice.apply(this.c,arguments),o},O.prototype.spliceInteriors=O.prototype.hg,O.prototype.Rn=function(t){return this.hg(t,1)[0]},O.prototype.removeInteriorAt=O.prototype.Rn,O.prototype.Qn=function(t){return 0>(t=this.a.indexOf(t))?B:this.hg(t,1)[0]},O.prototype.removeInterior=O.prototype.Qn,O.prototype.xk=function(t){if(!C(t,L))throw new D(this.xk,0,t);this.a.push(t)},O.prototype.pushInterior=O.prototype.xk,O.prototype.G=function(){var t=this.f;return t||(this.f=t=Bi(this.b,this.kd)),t},O.prototype.getBoundingBox=O.prototype.G,p=O.prototype,p.dj=function(t){var e=this.a.length;if(0>t||t>=e)throw new le(this.dj,t,[0,e-1]);return(e=this.c[t])||(this.c[t]=e=Bi(this.a[t],this.kd)),e},p.lb="Polygon",p.Xc=function(t){var e,r=this.a,n=r.length;if(this.b.Ae()){for(t.push("("),this.b.Xc(t,!0),e=0;e<n;e++)r[e].Ae()&&(t.push(","),r[e].Xc(t,!0));t.push(")")}else t.push("EMPTY");return t},p.zb="Polygon",p.Wc=function(){var t,e=[],r=this.a,n=this.b.Wc();for(n[0].toString()!==n[n.length-1].toString()&&n.push(n[0]),e.push(n),t=0;t<r.length;t++)(n=r[t].Wc())[0].toString()!==n[n.length-1].toString()&&n.push(n[0]),e.push(n);return e},p.W=function(){var t=O.l.W.call(this);return this.G().tb()&&(t.type="Multi"+t.type),t},p.jc=function(){var t=[],e=this.a,r=e.length;for(t.push(this.b.jc());r--;)t[r+1]=e[r].jc();return this.G().tb()?[t]:t},p.fa=function(t){var e=!1;if(C(t,O)){var r=t.a,n=this.a.length;e=r.length;var i=0;for(e=this.b.fa(t.b)&&n===e;e&&i<n;)e=e&&this.a[i].fa(r[i]),i++}return e},O.prototype.equals=O.prototype.fa,u(Gi,gh),t("H.geo.MultiPolygon",Gi),Gi.prototype.b=function(t){return C(t,O)},Gi.prototype.lb="Multi"+O.prototype.lb,Gi.prototype.zb="Multi"+O.prototype.zb,u(uh,Hh),t("H.map.Polygon",uh);var Hi=new O(new L([0,0,0,0,0,0,0,0,0]));function Ii(t,e,r,n){var i,o,a=0,s=!0;if(i=Ji(t,e.b,r,n,e.G())){var l=new Mh(i),u=e.a;if(o=u.length)for(l.b=l.a.length;a<o;a++)(i=Ji(t,u[a],r,n,e.dj(a)))&&(l.a=l.a.concat(i));for(o=l.a.length,a=0;a<o;a++)if(l.a[a]!==Nh){s=!1;break}s&&(l=a%2?Gh:B)}return l}function Ji(t,e,r,n,i){var o,a=r.Ce(),s=i,l=s.sb(),u=[[]],c=e.X,h=[],f=c.length,p=!1;for(o=0;o<f;o+=3){var A=c[o],d=c[o+1];p||180!=Bd(d)||(h.push(A),h.push(d),h.push(A),h.push(-d),p=!0),h.push(A),h.push(d)}if(c=h,360>l&&-180==s.a&&(s=new K(s.c,180,s.f,s.b)),360>l&&180==s.b&&(s=new K(s.c,s.a,s.f,-180)),s.tb()){for(A=(l=c).length,c=-1,h=0;h<A-2;h+=2)if(jg(l[h+1],l[h+3])){c=h+2;break}-1===c&&jg(l[A-1],l[1])&&(c=A),-1!==c&&(f=l[c-2],h=l[c-1],o=l[c%A],p=l[(c+1)%A],180!==Bd(f)&&180!==Bd(o)&&(d=Bd(o-f),A=Bd(p-h),A+=180<A?-360:0,p=Bd(180-p),p+=180<p?-360:0,A&&p&&(d/=Bd(A)/Bd(p),f=o+(o>f?-d:d),h=0<h?180:-180,l.splice(c,0,f,h,f,-h)))),c=l}if(u[0]=Li(c.concat(),s.a),360>s.sb()&&s.ad(new lg(s.c,180))&&(c=Li(c.concat(),s.b),u.push(c)),t=Ih(t,u,!0,s=r.yf()),360===i.sb()&&1===e.Qg(!0)%2){for(e=t,t=r.Ce(),e[0][1].x>e[0][e[0].length-1].x&&(e[0]=e[0].reverse()),c=[],l=e[0].length-1,u=0;u<l;u++)h=e[0][u],c[u]=new G(h.x-2*s.w,h.y),c[u+l]=new G(h.x-s.w,h.y),c[u+2*l]=new G(h.x,h.y),c[u+3*l]=new G(h.x+s.w,h.y),c[u+4*l]=new G(h.x+2*s.w,h.y);e[0]=c,(u=s.lh(n,0)).y=2*t[n===Ai.NORTH?"top":"bottom"],n=u.clone(),u.x=e[0][e[0].length-1].x+1,n.x=e[0][0].x-1,e[0].push(u,n),t=e}if(Uf(t,n=a.left,e=a.top,u=a.right,a=a.bottom,!0).length){if(!r.wf().Cg(i)){for(r=t,i=[new G(n,e),new G(u,e),new G(u,a),new G(n,a)],a=[],t=r.length;t--;)if(n=Wf(i,r[t]))for(e=Mi(n),a.push(e);n.Fh;)e=Mi(n=n.Fh),a.push(e);t=a}}else r=Ni(n,e,t[0]),t[1]&&(r=r!==Ni(n,e,t[1])),t=r?[Nh]:B;return t}function Ni(t,e,r){var n,i,o,a=n=r[0].x,s=i=r[0].y,l=1;for(o=r.length;l<o;l++){var u=r[l].x,c=r[l].y;u>n?n=u:u<a&&(a=u),c>i?i=c:c<s&&(s=c)}return a<=t&&t<=n&&s<=e&&e<=i&&de({x:t,y:e},ee(r.concat(r[0])))}function Mi(t){var e=[],r=t;do{var n=yd(100*(r.In?r.In:r.x))/100,i=yd(100*(r.Jn?r.Jn:r.y))/100;if(!o||.01<Dd(Ed(o.x-n,2)+Ed(o.y-i,2))){var o=new G(n,i);e.push(o)}r=r.next}while(r&&r!==t);return e}function Li(t,e){var r,n=Number.POSITIVE_INFINITY,i=-1,o=t.length;for(r=0;r<o;r+=2){var a=Bd(t[r+1]-e);(a+=180<a?360-a:a)<n&&(n=a,i=r)}return 0<r?(e=t.splice(i,t.length-i)).concat(t):t}function Oi(t,e,r){Oi.l.constructor.call(this,Hi,r),this.cg(t),this.ji(e),r&&"precision"in r&&this.ii(r.precision)}function Pi(t){t.a!==y&&Oi.l.aa.call(t,Qi(t))}function Qi(t){var e=t.N,r=e.lat,n=t.$,i=0,o=new L;if(90===Bd(r))for(r=e.jg(0,n,!0).lat;360>i;i+=120)o.Sh(r,i-180,B);else for(t=360/(t=t.B);360>i;i+=t)o.md(e.jg(i,n,!0));return e=new O(o),0>r&&e.Ok(Ai.SOUTH),e}function Ri(t,e){if(!C(t,Element)){if(Si.innerHTML=t,!(t=Si.firstElementChild))throw new D(Ri,0,"No element data");Si.removeChild(t);var r=!0;Si.innerHTML=""}this.a=0!==kf(t).length,this.f=r?t:lf(t,x.document,this.a),e&&((r="onAttach")in e&&xc(t=e[r],"Function",Ri,1,r)&&(this.Gh=t),(r="onDetach")in e&&xc(t=e[r],"Function",Ri,1,r)&&(this.b=t))}uh.prototype.f=0,uh.prototype.b=0,uh.prototype.a=Hi,uh.MAX_EXTRUDE_HEIGHT=2047,uh.prototype.ai=function(t){var e=+t;if(e!==t)throw new D(this.ai,0,t);if(0>e||2047<this.b+e)throw new le(this.ai,this.b+e,[0,2047]);this.f=e,this.pa(kh.SPATIAL)},uh.prototype.setExtrusion=uh.prototype.ai,uh.prototype.Yl=function(){return this.f},uh.prototype.getExtrusion=uh.prototype.Yl,uh.prototype.$h=function(t){var e=+t;if(e!==t)throw new D(this.$h,0,t);if(0>e||2047<this.f+e)throw new le(this.$h,this.f+e,[0,2047]);this.b=e,this.pa(kh.SPATIAL)},uh.prototype.setElevation=uh.prototype.$h,uh.prototype.Ul=function(){return this.b},uh.prototype.getElevation=uh.prototype.Ul,uh.prototype.ca=function(){return this.a},uh.prototype.getGeometry=uh.prototype.ca,uh.prototype.aa=function(t){if(C(t,O))var e=!1;else C(t,Gi,this.aa,0),e=!0;return this.v=e,e=this.a,this.a=t,e!==Hi&&this.pa(kh.SPATIAL),this},uh.prototype.setGeometry=uh.prototype.aa,uh.prototype.G=function(){return this.ca().G()},uh.prototype.getBoundingBox=uh.prototype.G,uh.prototype.Gd=function(t){var e,r,n,i=this.ca();if(this.v){var o=0;for(n=(i=i.ia).length;o<n;o++)(r=Ii(this,i[o],t,i[o].kd))&&(e||(e=[]),e.push(r))}else(r=this.Xa)===B&&(r=this.v?Ai.NORTH:this.ca().kd),(r=Ii(this,i,t,r))&&(e=[r]);return e},uh.prototype.getGeometriesForTile=uh.prototype.Gd,uh.prototype.Y=y,uh.prototype.W=function(){var t,e=uh.l.W.call(this),r=this.ca(),n=this.v?r.ia:[r],i=e.properties,o=e.geometry=r.W();if(i.style=this.oa().W(),i.height=this.f+this.b,i.min_height=this.b,this.G().tb()&&(o.type="MultiPolygon",this.v)){var a=[];n.forEach((function(e,r){t=o.coordinates[r],e.G().tb()?a=a.concat(t):a.push(t)})),o.coordinates=a}return e},uh.prototype.forWorkerMessage=uh.prototype.W,u(Oi,uh),t("H.map.Circle",Oi),Oi.prototype.cg=function(t){(t=ng(t)).fa(this.N)||(this.N=t,Pi(this))},Oi.prototype.setCenter=Oi.prototype.cg,Oi.prototype.Za=function(){return this.N},Oi.prototype.getCenter=Oi.prototype.Za,Oi.prototype.ji=function(t){if(E(t=Zd(t,0,6371000.79*Nd/2)))throw new D(this.ji,0,t);this.$!==t&&(this.$=t,Pi(this))},Oi.prototype.setRadius=Oi.prototype.ji,Oi.prototype.Bm=function(){return this.$},Oi.prototype.getRadius=Oi.prototype.Bm,Oi.prototype.B=60,Oi.prototype.ii=function(t){if(!Dc(t))throw new D(this.ii,0,t);this.B!==(t=Zd(yd(t),4,360))&&(this.B=t,Pi(this))},Oi.prototype.setPrecision=Oi.prototype.ii,Oi.prototype.ym=function(){return this.B},Oi.prototype.getPrecision=Oi.prototype.ym,Oi.prototype.aa=function(){return this},Oi.prototype.setGeometry=Oi.prototype.aa,Oi.prototype.ca=function(){return this.a===Hi&&Oi.l.aa.call(this,Qi(this)),this.a},Oi.prototype.getGeometry=Oi.prototype.ca,t("H.map.DomIcon",Ri);var Si=document.createElement("DIV");function Ti(t){Ti.l.constructor.call(this,t)}function Ui(t,e){this.w=+t,this.h=+e}function Vi(t,e){var r,n=t,i=e||[];if(t!==Wi.NONE){if(e=r=i.length,-1===Xi.indexOf(n))throw new D(Vi,0,t);if(!i)throw new D(Vi,1,i);for(;r--;)if(E(i[r]))throw new D(Vi,1,i);if(n===Wi.RECT&&3<e&&(i=[i[0],i[1],i[2],i[1],i[2],i[3],i[0],i[3]],n=Wi.POLYGON),n===Wi.CIRCLE&&2<e&&0<(t=i[2])){n=i[0];var o=i[1],a=360/(r=wd(2*Ad(t),40));for(i=[];r--;){var s=a*r*Sd;i.push(n+Gd(s)*t,o+Id(s)*t)}n=Wi.POLYGON}if(n!==Wi.POLYGON||!e||i.length%2)throw new D(Vi,1,i);this.a=i}}Ri.prototype.Gh=null,Ri.prototype.b=null,Ri.prototype.ej=function(t){return lf(this.f,t,this.a)},Ri.prototype.a=!1,u(Ti,gh),t("H.geo.MultiPoint",Ti),Ti.prototype.b=function(t){return mg(t)},Ti.prototype.c=function(t){return C(t,lg)?t:ng(t)},Ti.prototype.lb="Multi"+lg.prototype.lb,Ti.prototype.zb="Multi"+lg.prototype.zb,t("H.math.Size",Ui),t("H.map.HitArea",Vi);var Wi={NONE:0,RECT:1,CIRCLE:2,POLYGON:3};Vi.ShapeType=Wi;var Xi=[Wi.RECT,Wi.CIRCLE,Wi.POLYGON];function rh(t,e){var r;vc(this,rh),rh.l.constructor.call(this,e),this.aa(t),e&&"icon"in e&&(r=e.icon),this.Ac(r||Yi(this))}function Yi(t){var e=t.c;return e||(e=t.constructor.prototype.c=t.b(Zi)),e}Vi.prototype.Cf=function(t,e,r){return this.a?ce(t,e,this.a,r,!0):be.NONE},Vi.prototype.hitTest=Vi.prototype.Cf,u(rh,M),t("H.map.AbstractMarker",rh),rh.prototype.ca=function(){return this.a},rh.prototype.getGeometry=rh.prototype.ca,rh.prototype.aa=function(t){var e=this.a;return C(t,lg)||C(t,Ti)?this.a=t:(mg(t,this.aa,0),this.a=ng(t)),e&&this.pa(kh.SPATIAL),this},rh.prototype.setGeometry=rh.prototype.aa,rh.prototype.G=function(){return this.a.G()},rh.prototype.pb=function(){return this.icon},rh.prototype.getIcon=rh.prototype.pb,rh.prototype.Ac=function(t){var e=this.icon,r=!e;if(e!==t){if(!this.Oj(t)){if(r)throw new D(this.constructor,1,t);throw new D(this.Ac,0,t)}this.icon=t,r||this.pa(kh.VISUAL)}return this},rh.prototype.setIcon=rh.prototype.Ac;var Zi={svg:'<svg xmlns="http://www.w3.org/2000/svg" width="38" height="47" viewBox="0 0 38 47"><g fill="none"><path fill="#0F1621" fill-opacity=".4" d="M15 46c0 .317 1.79.574 4 .574s4-.257 4-.574c0-.317-1.79-.574-4-.574s-4 .257-4 .574z"></path><path fill="#01b6b2" d="M33.25 31.652A19.015 19.015 0 0 0 38 19.06C38 8.549 29.478 0 19 0S0 8.55 0 19.059c0 4.823 1.795 9.233 4.75 12.593L18.975 46 33.25 31.652z"></path><path fill="#6A6D74" fill-opacity=".5" d="M26.862 37.5l4.714-4.77c3.822-3.576 5.924-8.411 5.924-13.62C37.5 8.847 29.2.5 19 .5S.5 8.848.5 19.11c0 5.209 2.102 10.044 5.919 13.614l4.719 4.776h15.724zM19 0c10.493 0 19 8.525 19 19.041 0 5.507-2.348 10.454-6.079 13.932L19 46 6.079 32.973C2.348 29.495 0 24.548 0 19.04 0 8.525 8.507 0 19 0z"></path></g></svg>',size:new Ui(38,47),anchor:new G(19,45),hitArea:new Vi(Wi.POLYGON,[19,46,2,27,0,18,5,6,19,0,32,5,38,15,36,27,19,47])};function $i(t,e){$i.l.constructor.call(this,t,e)}function aj(t,e,r){aj.l.constructor.call(this,t),this.oldValue=r,this.newValue=e}function bj(t,e,r,n){bj.l.constructor.call(this,t,e,r),this.modifiers=n}rh.prototype.W=function(){var t=rh.l.W.call(this),e=this.pb(),r=e.qb(),n=e.ed();return t.geometry=this.ca().W(),r&&((e=t.properties.icon={id:e.uid}).size={w:r.w,h:r.h},e.offset=[r.w/2-(n?n.x:0),r.h/2-(n?n.y:0)]),t},rh.prototype.forWorkerMessage=rh.prototype.W,u($i,rh),t("H.map.DomMarker",$i),$i.prototype.type=nh.DOM_MARKER,$i.prototype.R=2,$i.prototype.b=function(t){var e=new Ri(t.svg,t);return t=t.anchor,e.f.style.margin=-t.y+"px 0 0 -"+t.x+"px",e},$i.prototype.Oj=function(t){return C(t,Ri)},u(aj,sd),t("H.util.ChangeEvent",aj),u(bj,aj),t("H.map.ChangeEvent",bj);var cj={SIZE:1,POSITION:2,HEADING:4,TILT:8,INCLINE:16,ZOOM:32,BOUNDS:64};function dj(){this.a=[],dj.l.constructor.call(this)}function ej(t,e,r){if(t=t.a.length,r)var n=t;else if(E(n=0>(n=+e)?xd(0,t+n):wd(t,n)))throw new le(dj,e,[0,t-1]);return n}function gj(t,e){var r=t.a.splice(e,1)[0];return t.dispatchEvent(new fj(t,t.A.ee,e,null,r,null)),r}function fj(t,e,r,n,i,o){fj.l.constructor.call(this,e,t),this.idx=r,this.added=n,this.removed=i,this.moved=o}function hj(){}function ij(t){return wd(1,xd(0,.5-Cd(Jd(Pd+Od*t/180))/Nd/2))}function jj(t){return 0>=t?90:1<=t?-90:Td*(2*Kd(Fd(Nd*(1-2*t)))-Od)}bj.Type=cj,bj.prototype.el=cj.SIZE,bj.prototype.SIZE=bj.prototype.el,bj.prototype.Fi=cj.POSITION,bj.prototype.POSITION=bj.prototype.Fi,bj.prototype.zi=cj.HEADING,bj.prototype.HEADING=bj.prototype.zi,bj.prototype.Hi=cj.TILT,bj.prototype.TILT=bj.prototype.Hi,bj.prototype.Ai=cj.INCLINE,bj.prototype.INCLINE=bj.prototype.Ai,bj.prototype.Ii=cj.ZOOM,bj.prototype.ZOOM=bj.prototype.Ii,bj.prototype.xi=cj.BOUNDS,bj.prototype.BOUNDS=bj.prototype.xi,u(dj,F),t("H.util.OList",dj),dj.prototype.add=function(t,e){e=ej(this,e,E(e)),this.a.splice(e,0,t),this.dispatchEvent(new fj(this,this.A.ce,e,t,null,null))},dj.prototype.add=dj.prototype.add,dj.prototype.$b=function(t){return this.get(t),gj(this,t)},dj.prototype.removeAt=dj.prototype.$b,dj.prototype.remove=function(t){return 0<=(t=this.indexOf(t))&&(gj(this,t),!0)},dj.prototype.remove=dj.prototype.remove,dj.prototype.set=function(t,e){if(0!==this.a.length||0!==t){this.get(t),t=ej(this,t,!1);var r=this.a[t]}return this.a[t]=e,this.dispatchEvent(new fj(this,this.A.fe,t,e,r,null)),r},dj.prototype.set=dj.prototype.set,dj.prototype.indexOf=function(t){return this.a.indexOf(t)},dj.prototype.indexOf=dj.prototype.indexOf,dj.prototype.get=function(t){var e=ej(this,t,!1),r=this.a;if(e>=r.length)throw new le(this.get,t,[0,r.length-1]);return r[e]},dj.prototype.get=dj.prototype.get,dj.prototype.mm=function(){return this.a.length},dj.prototype.getLength=dj.prototype.mm,dj.prototype.Ha=function(){return this.a.concat()},dj.prototype.asArray=dj.prototype.Ha,dj.prototype.flush=function(){for(var t=this.a.length;t--;)gj(this,t)},dj.prototype.flush=dj.prototype.flush,dj.prototype.o=function(){this.flush(),dj.l.o.call(this)},dj.prototype.A={ce:"add",ee:"remove",fe:"set",wo:"move"},u(fj,sd),dj.Event=fj,hj.prototype.Gf=function(t,e,r){return r?(r.x=e/360+.5,r.y=ij(t)):r=new G(e/360+.5,ij(t)),r},hj.prototype.latLngToPoint=hj.prototype.Gf,hj.prototype.Ic=function(t,e){return this.Gf(t.lat,t.lng,e)},hj.prototype.geoToPoint=hj.prototype.Ic,hj.prototype.Ka=function(t,e,r){return r?(r.lat=jj(e),r.lng=360*(1===t?1:Xd(t,1))-180):r=new lg(jj(e),360*(1===t?1:Xd(t,1))-180),r},hj.prototype.xyToGeo=hj.prototype.Ka,hj.prototype.Qf=function(t,e){return this.Ka(t.x,t.y,e)},hj.prototype.pointToGeo=hj.prototype.Qf;var kj=new hj;function lj(t,e){this.projection=t||kj,this.b=0,this.a=this.exp=Cd(e||256)/Md,mj(this),this.y=this.x=0}t("H.geo.mercator",kj),t("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0),t("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22),t("H.geo.PixelProjection",lj);var nj=Bd(24)+Bd(-8);function mj(t){t.a>nj&&(t.a=nj),t.w=Ed(2,t.a),t.h=Ed(2,t.a)}function oj(t){t=t||{},oj.l.constructor.call(this),this.min=0,this.max=22,this.sl=this.dark=!!t.dark,t.min&&this.ei(t.min),t.max&&this.ci(t.max),this.pixelProjection=new lj(t.projection,t.minWorldSize),t.provider&&(this.ja=t.provider,this.Ra=A(this.Ra,this),this.ja.addEventListener(P.prototype.A.wa,this.Ra,!1,this),this.Ya=A(this.Ya,this),this.ja.addEventListener(P.prototype.A.de,this.Ya,!1,this))}function pj(t,e,r){var n=t[e],i="min"===e,o=i?t.ei:t.ci;if(r!==n){if(!(i?r<=t.max:r>=t.min))throw new D(o,0,"Invalid condition min <= max");t[e]=r,t.Ra(),t.Ya(),t.dispatchEvent(new aj(i?t.A.Ei:t.A.Di,r,n))}return t}function qj(t){var e;if(qj.l.constructor.call(this),this.dispatchEvent=A(this.dispatchEvent,this),t){var r=t.length;for(e=0;e<r;e++)this.add(t[e])}}function rj(t,e){var r=e.getProvider&&e.getProvider();r&&(sj[r.uid]=r),e.ha(t)}function tj(t){var e=t.getProvider&&t.getProvider();e&&delete sj[e.uid],t.ha(null)}lj.prototype.vk=kj,lj.prototype.projection=lj.prototype.vk,lj.prototype.x=0,lj.prototype.x=lj.prototype.x,lj.prototype.y=0,lj.prototype.y=lj.prototype.y,lj.prototype.no=Ed(2,nj),lj.prototype.w=lj.prototype.no,lj.prototype.Vm=Ed(2,nj),lj.prototype.h=lj.prototype.Vm,lj.prototype.Ja=function(t){if(E(t))throw new D(this.Ja,0,t);var e=this.x/this.w,r=this.y/this.h;this.b=t,this.a=this.exp+t,mj(this),this.x=e*this.w,this.y=r*this.h},lj.prototype.rescale=lj.prototype.Ja,lj.prototype.Cj=function(){return this.b||0},lj.prototype.getZoomScale=lj.prototype.Cj,lj.prototype.eb=function(t,e){return(t=this.projection.Gf(t.lat,t.lng,e)).x=t.x*this.w-this.x,t.y=t.y*this.h-this.y,t},lj.prototype.geoToPixel=lj.prototype.eb,lj.prototype.Ie=function(t,e){return this.projection.Ka((t.x+this.x)/this.w,(t.y+this.y)/this.h,e)},lj.prototype.pixelToGeo=lj.prototype.Ie,lj.prototype.Ka=function(t,e,r){return this.projection.Ka((t+this.x)/this.w,(e+this.y)/this.h,r)},lj.prototype.xyToGeo=lj.prototype.Ka,lj.prototype.lh=function(t,e,r){return(t=this.projection.Gf(t,e,r)).x=t.x*this.w-this.x,t.y=t.y*this.h-this.y,t},lj.prototype.latLngToPixel=lj.prototype.lh,lj.prototype.Vd=function(t){return new G(t.x*this.w-this.x,t.y*this.h-this.y)},lj.prototype.pointToPixel=lj.prototype.Vd,u(oj,F),t("H.map.layer.Layer",oj),oj.prototype.min=0,oj.prototype.min=oj.prototype.min,oj.prototype.max=22,oj.prototype.max=oj.prototype.max,oj.prototype.A={wa:"update",de:"configchange",Ei:"minchange",Di:"maxchange"},oj.prototype.da=function(){return this.ja},oj.prototype.getProvider=oj.prototype.da,oj.prototype.dn=function(t){return this.min<=t&&t<=this.max},oj.prototype.isValid=oj.prototype.dn,oj.prototype.ei=function(t){return pj(this,"min",+t)},oj.prototype.setMin=oj.prototype.ei,oj.prototype.ci=function(t){return pj(this,"max",+t)},oj.prototype.setMax=oj.prototype.ci,oj.prototype.Ra=function(){this.dispatchEvent(this.A.wa)},oj.prototype.Ya=function(){this.dispatchEvent(this.A.de)},oj.prototype.o=function(){oj.l.o.call(this)},oj.prototype.la=function(){return null},oj.prototype.getCopyrights=oj.prototype.la,u(qj,dj),t("H.map.DataModel",qj),qj.prototype.add=function(t,e){C(t,oj,this.add,0),rj(this,t),qj.l.add.call(this,t,e)},qj.prototype.add=qj.prototype.add,qj.prototype.set=function(t,e){return C(e,oj,this.set,0),rj(this,e),(t=qj.l.set.call(this,t,e))&&tj(t),t},qj.prototype.set=qj.prototype.set,qj.prototype.$b=function(t){var e;return(e=qj.l.$b.call(this,t))&&tj(e),e},qj.prototype.removeAt=qj.prototype.$b,qj.prototype.remove=function(t){var e;return(e=qj.l.remove.call(this,t))&&tj(t),e},qj.prototype.remove=qj.prototype.remove,qj.prototype.flush=function(){for(var t=this.a.length;t--;)this.$b(t);qj.l.flush.call(this)},qj.prototype.flush=qj.prototype.flush;var sj={};function uj(t,e,r){if(t=sj[t])return C(t[e],Function,uj,1,"invalid method"),t[e].apply(t,r)}function vj(t,e){Da(t)&&(this.j=t),Dc(e)&&(this.b=e)}Gc(sj),qj.invoke=uj,t("H.util.Request",vj),vj.State={PENDING:0,PROCESSING:1,COMPLETE:2,CANCELLED:3,ERROR:4};var wj=[0,1,2,3,4],Cj;function xj(t,e){t.c<t.b&&(uc(e)||(e=2),0===e||1===e||0!==t.a&&1!==t.a||(t.c++,2!==e&&t.i++,t.O(t.c<t.b?1:2)))}function yj(){}function zj(t,e){var r=t.K(),n=r.ownerDocument;zj.l.constructor.call(this),this.a=t,this.P=r=r.appendChild(Aj(n,"DIV","position:absolute;bottom:0;right:0;left:0px;z-index:1;direction:ltr;pointer-events:none;height:40px-webkit-touch-callout: none;-webkit-user-select:none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select:none;",null,"H_imprint")),this.ef=Aj(n,"DIV","margin: 0 0 16px 16px;display:inline-block;",'<svg height="40" viewBox="0 0 47 40" width="47" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m45.2054149 8.82876345.6003191.40637037-.2240425.6914074-.4490426 1.38570368c-.1024468.3148889-.6998936 1.9596297-2.43 3.5918519l-.017234.0163704c-.188617.1887407-.3801064.3659259-.5467021.5084444l-.4605319.4285185-.486383.4516296-.1407447-.0702963c-.7257447.4583704-1.4926596.7886667-2.2796809.9831852l.5840426.5864445-.6769149.6817778-2.052766 2.0636296-.169468.1704444-.019149.0192593-2.3821276 2.3958518c-.4902128.8493334-1.1202128 1.6331852-1.8497873 2.3111112-.6031915.6047407-1.2504255 1.1054814-1.935 1.4954814l-.4777659.4805186-4.3247873 4.3506666-.0296808.0298519-.0315958.0269629-2.1532978 1.8171111-.2661702.2253334h-.3485107-3.8948936l-3.968617 3.9914815-1.3547873 1.3616296-.6769148.6808148-.6769149-.6808148-1.3538298-1.3616296-4.80925535-4.837926-3.2687234-3.2875555-1.63436171-1.6437778h2.3112766 4.62255319 2.67223407l-4.71063832-4.7368148-.6769149-.6808148.6769149-.6808148 4.93851062-4.9650371.6769149-.6798518.6769149.6808148 2.7296809 2.7454074c.9363829-.8820741 2.1485106-1.4685185 3.4037234-1.6562963.278617-1.4694815 1.0187234-2.834963 2.168617-3.9885926.5696808-.572 1.1843617-1.0438519 1.8335106-1.4107407l.2901064-.2917778 4.3094681-4.31985187c.5830851-1.0582963 1.4256383-1.78918519 2.0364893-2.12718519l.4471277-.24748148c.3829787-.7617037.9047872-1.47622222 1.5539362-2.12622222 1.510851-1.51666667 3.3165957-2.31881482 5.22-2.31881482.0871276 0 .1752127.00192593.2594681.00577778 1.9484042.06933334 3.8441489.97933334 5.4775532 2.62792593.1512765.15022222.3303191.34859259.5361702.5797037l.0526595.05874074c.1120213.12518519.2345745.26192593.370532.40733334l1.2657446 1.36066666.6328724.67985185-.6548936.65866667-.2508511.25325926zm-27.9288192 22.17414815h-9.57446804l4.78723404 4.8148148zm23.1864894-21.70422223c-.9220213 1.38666663-2.5180851 3.63037033-4.1984042 1.94133333l4.2510638-4.27651851c-.3810638-.41022222-.6711702-.754-.8923404-.97740741-2.2921277-2.31207407-4.8743617-2.34192593-6.8984043-.312-1.3528723 1.35681481-1.7071277 2.91007407-1.313617 4.38533332l-1.332766-1.52629628c-.385851.21474074-2.0182979 1.65918518-.7937234 3.84703708l-1.5252127-1.274963-2.0240426 2.0299259 2.7344681 2.7502222c-2.1121277-1.6861481-4.3889362-1.5205185-6.2157447.312-1.9560638 1.9615556-1.8181915 4.3381482-.3532979 6.293926l-.295851-.2946667c-1.9321277-1.9432593-4.0318085-1.2576296-5.0706383-.2128148-.8023405.8079259-1.2944681 1.9191852-1.0924468 2.6905185l-4.195532-4.2187407-2.22893613 2.2408148 8.25893613 8.3065185h4.4339362l-2.9767021-2.9938519c-.5893908-.6029568-.9604155-1.0987731-1.1531529-1.5232627-.3182349-.7008886-.1504161-1.2073234.3230465-1.680515.7334043-.7318519 1.583617-.2763704 3.0829787 1.2277777l2.9412766 2.9562963 2.2164894-2.2292592-2.7909575-2.8060741c2.0125532 1.5291852 4.4224468 1.612 6.5728724-.545037 1.3567021-1.2653334 1.7425532-2.4565185 1.7425532-2.4565185l-1.6755319-1.1314815c-.9229788 1.3866666-2.5152128 3.6361481-4.195532 1.9461481l4.2606383-4.2851852 2.655 2.6712593 2.3160639-2.3294074-3.3223405-3.3424445c-1.5520212-1.5609629-.6328723-3.0275555.0124469-3.5793333.3025531.6442222.7448936 1.2624445 1.3078723 1.8296296 2.1485106 2.1676297 4.9260638 2.6038519 7.3685106.1550371 1.3567022-1.2643704 1.7425532-2.4565185 1.7425532-2.4565185zm-3.6564894-1.35537321-2.0211702 2.03377777c-.9890425-1.18251851-.9392553-1.81422222-.3245744-2.43051851.7439361-.7462963 1.4993617-.43044445 2.3457446.39674074zm-12.4879787 12.56088884c-.9890425-1.1825185-.9411702-1.819037-.3284042-2.4353333.7448936-.7462963 1.5003191-.4304444 2.3467021.3967408z" fill="#0f1621" fill-opacity=".7"/><path d="m17.2765957 31.0029116-4.787234 4.8148148-4.78723404-4.8148148zm23.1864894-21.70422223 1.6755319 1.13148153s-.385851 1.1921481-1.7425532 2.4565185c-2.4424468 2.4488148-5.22 2.0125926-7.3685106-.1550371-.5629787-.5671851-1.0053192-1.1854074-1.3078723-1.8296296-.6453192.5517778-1.5644681 2.0183704-.0124469 3.5793333l3.3223405 3.3424445-2.3160639 2.3294074-2.655-2.6712593-4.2606383 4.2851852c1.6803192 1.69 3.2725532-.5594815 4.195532-1.9461481l1.6755319 1.1314815s-.3858511 1.1911851-1.7425532 2.4565185c-2.1504256 2.157037-4.5603192 2.0742222-6.5728724.545037l2.7909575 2.8060741-2.2164894 2.2292592-2.9412766-2.9562963c-1.4993617-1.5041481-2.3495744-1.9596296-3.0829787-1.2277777-.4734626.4731916-.6412814.9796264-.3230465 1.680515.1927374.4244896.5637621.9203059 1.1531529 1.5232627l2.9767021 2.9938519h-4.4339362l-8.25893613-8.3065185 2.22893613-2.2408148 4.195532 4.2187407c-.2020213-.7713333.2901063-1.8825926 1.0924468-2.6905185 1.0388298-1.0448148 3.1385106-1.7304445 5.0706383.2128148l.295851.2946667c-1.4648936-1.9557778-1.6027659-4.3323704.3532979-6.293926 1.8268085-1.8325185 4.103617-1.9981481 6.2157447-.312l-2.7344681-2.7502222 2.0240426-2.0299259 1.5252127 1.274963c-1.2245745-2.1878519.4078724-3.63229634.7937234-3.84703708l1.332766 1.52629628c-.3935107-1.47525925-.0392553-3.02851851 1.313617-4.38533332 2.0240426-2.02992593 4.6062766-2.00007407 6.8984043.312.2211702.22340741.5112766.56718519.8923404.97740741l-4.2510638 4.27651851c1.6803191 1.689037 3.2763829-.5546667 4.1984042-1.94133333zm-16.1444681 11.20551563 2.0182979-2.0385925c-.846383-.8271852-1.6018085-1.1430371-2.3467021-.3967408-.612766.6162963-.6606383 1.2528148.3284042 2.4353333zm12.4879787-12.56088884c-.8463829-.82718519-1.6018085-1.14303704-2.3457446-.39674074-.6146809.61629629-.6644681 1.248.3245744 2.43051851z" fill="#fff" fill-opacity=".3"/></g></svg>',"H_logo"),r.appendChild(this.ef),r=r.appendChild(Aj(n,"DIV","right:0;bottom:0;position:absolute;background-color:rgba(255,255,255,.8);color:#0F1621;padding:2px 16px",null,"H_copyright")),this.g=r.appendChild(Aj(n,"A","color:inherit; margin:0px 8px; text-decoration:none; pointer-events:all;","Terms of use")),this.g.target="_blank",this.f=r.appendChild(Aj(n,"SPAN","margin:0px 8px")),this.j=Va(Bj),this.fi(e),this.c=A(this.c,this),this.b=A(this.b,this),this.a.addEventListener(this.a.A.Ci,this.c),this.a.a.addEventListener("add",this.b),this.a.a.addEventListener("remove",this.b),this.a.a.addEventListener("set",this.b),this.b()}vj.prototype.a=0,vj.prototype.getState=function(){return this.a},vj.prototype.getState=vj.prototype.getState,vj.prototype.O=function(t){if(0>wj.indexOf(t))throw new D(this.O,0,t);(this.a!==t||1===t&&1<this.b)&&(this.a=t,this.j&&this.j(this))},vj.prototype.b=1,vj.prototype.Om=function(){return this.b},vj.prototype.getTotal=vj.prototype.Om,vj.prototype.c=0,vj.prototype.zm=function(){return this.c},vj.prototype.getProcessed=vj.prototype.zm,vj.prototype.i=0,vj.prototype.Zl=function(){return this.i},vj.prototype.getFailed=vj.prototype.Zl,vj.prototype.ie=function(){},vj.prototype.cancel=function(){3!==this.a&&(this.ie(),this.O(3))},vj.prototype.cancel=vj.prototype.cancel,t("H.util.ICapturable",yj),yj.prototype.capture=function(){},yj.prototype.capture=yj.prototype.capture,t("H.util.Disposable",nd),nd.prototype.mb=nd.prototype.mb,nd.prototype.addOnDisposeCallback=nd.prototype.mb,t("H.util.dispose",rd),nd.prototype.C=nd.prototype.C,nd.prototype.dispose=nd.prototype.C,nd.prototype.o=nd.prototype.o,nd.prototype.disposeInternal=nd.prototype.o,u(zj,nd),t("H.map.Imprint",zj);var Bj={font:'11px "Lucida Grande", Arial, Helvetica, sans-serif',href:"https://legal.here.com/{LN}/terms/serviceterms/{CN}",invert:!1,reportHref:"https://wego.here.com/",locale:"en-US"};function Aj(t,e,r,n,i){return t=t.createElement(e),r&&(t.style.cssText=r),n&&(t.innerHTML=n),i&&(t.className=i),t}zj.prototype.fi=function(t){var e,r=this.ef.firstElementChild.firstElementChild.children;t||(this.j=Va(Bj));var n=this.j;for(e in n)t&&e in t&&(n[e]=t[e]);t=(this.hh=t=n.invert)?Dj:Ej,r[0].style.fill=t.Rk,r[0].style.fillOpacity=""+t.Sk,r[1].style.fill=t.Wk,r[1].style.fillOpacity=""+t.Xk,t=n.locale,Fj[t]||(t="en-US",n.locale=t),this.g.innerHTML=Fj[t],t=t.split("-"),this.g.href=n.href.replace("{LN}",t[0]).replace("{CN}",t[1].toLowerCase()),this.P.style.font=n.font},zj.prototype.setOptions=zj.prototype.fi,zj.prototype.K=function(){return this.P},zj.prototype.c=function(){this.f.innerHTML=this.i+" "+this.la()},zj.prototype.b=function(){this.c(),setTimeout(this.c,5e3)};var Ej={Wk:"#0F1621",Xk:.3,Rk:"#fff",Sk:.6},Dj={Wk:"#fff",Xk:1,Rk:"#0F1621",Sk:.7},Gj="1987&ndash;"+xd(2015,(new Date).getFullYear())+" HERE";function Hj(t,e,r,n){Ij(A((function(t){t?this.hh?r("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAADNklEQVRYR82XW6hVVRSGv7+rmJfSMKSnSkMEfY7EogcJC7tilGRopBAiSaI+SBARQSCIIqgFISih2YW0oAgLCsKXojA0RB+81VugZEFZv/yHuWTt7d7Hfc4+6+h4OWefNfcc3xlj/v+YS1zjoab5bE8DZgGngB8keSg5GwO0PQ54F3i2BnQIWCLpx14hGwG0fT3wOfBwB5DzwOOSDvQC2RTgM8Ae4D/gaeA3YDdwN5AWvyxp+6gD2r4OmAq8AbwInAMmA/OAT4CbgBWStvYClzUjWkHbrwHLgF8LVHJ8DDxah7P9JHCil7M40oA/A7OBC8ANtSqlrQOVs30/8CWQat8r6cxg1RwRQNvPA88Bk4D7gJzBV4A5teSp5MlS4VuA/ZIeu1Kr+wa0/QTwIRDlRhT5eTswBvi2CKOd42AULilndNAYCcA7gK+BmbVMiyXtsh3Qt4FFBTgW8w6wXtLfV4LrSyS2FwAvAWOBX+JtwF0laUDmS/oun23fDNwJnJb0Ty9g1ZphVdB2qrK2LdFfBbb685/AIxXkUKDqa4cMaDs2kjalRe8Fola57J3qRQSJviGHA3gMuAdYI2lDUfDOArQLWAd8VTuTOW9vjUoFy6TIGYpS9wKfAjuK5wVuSfn91iKcvZJeHy5ci0hsZwzNk5Qh3xIFbLyks7aPAtPLgv+L4VZwDwLvA6uKz6XdfcVAi22PBz4q4+lVSRurXW2vKYKIZfwEHCmmXC35HngAyITYD0ys2t8XWflyBfhmvKm24QCk7aVFCPVc7WMszzKucknI+NoHPCUppt13VICZm2nNwjoksByY0SXL72Vi3FieZ97mgrpyqF432H9xScW2O0H+W6oSE/4D2FYuA9kzlUzVTwO3Ad9IOtx3ydo2aLGZLpABm5KW2Z4AfAbMLfsEcpGkKLqRuMwHu0CukrSpCCrvGlF6hBEVL5MUw24kOhp1B8gc+FTqgxpkFLuzSbjk6jpJOkC2tDPeKCkVbDRkO67fDTTC2VK7vgfyBUlfNEpV2zyAK4HNXRLmZfshScdHC6g9T+WDGU2XpkdZdNXhWs6g7dXAhmsJ7jKR2M77bG4kV7Wt9TZfBLgYEC7PSpcIAAAAAElFTkSuQmCC"):r("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIMSURBVFiFzdZPiE1RGADwXzPTTPIMQoodVpbKgpoUG5qExUi8DSVJQv4slJJsbNjYWFhNETWLUUosRDRLUVLCYhIiojFojHkW997uvefNGIuZc99Xp/fOO6/Or++c75xDi0d7hDlWYQNqeB9hvv+OGq6jUWjPsKZKVBbtuKOMy9p3bKqOlsROCWYc27AWr9PfJnCgKlgbluNqivmGDmzBrxR3sCocnMEw7sqXdEAzboeK9uLTFPVbed8VcesxglFJtqNEHbcxlIL68ChADuCSpEgauBULt11SDI3C5yJJdrLCCNsQumMBl+J5AKinY4slBfNTfsRcxJwYsK0YxD3J0r1RPut6Cv/twgp0xoDBBc3LNhr0RwJktNifAn7gsnLmsuxVinyVTn4i7dcLoH4sU96Tp2Pi2uSVehN75Gdev+QO7pIXztmZnLwTvf+AzU+/v5Rn50+A24gP2IW5M4mbJ7+ejgVjJ/EpHXuCa8p77nGK68FX5eWfsTgfTJoh92qu1vAaa+CtPJuDZuEh3CHZUyHyxSSYrL3DWKE/gStm8aybDDkmKYperJM/BrJMnsJuHMLq2YJNh/wsX7JuPAyQfTFg0yGPFMZreCCv4n2xgTQjxyXP+CxquK8iXBYhMlzOtliQBVg4RVuCG/iSto/YHAuWxWFTHyXDWBkbNFkc1cK4LI5rYVwW57QY7i/pZeJv8QQJRQAAAABJRU5ErkJggg=="):((t=this.ef.cloneNode(!0)).firstChild.setAttribute("style","font:"+e),r(bf(t.innerHTML)))}),t),n)}function Ij(t,e){var r="data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<svg height="40" viewBox="0 0 47 40" width="47" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m45.2054149 8.82876345.6003191.40637037-.2240425.6914074-.4490426 1.38570368c-.1024468.3148889-.6998936 1.9596297-2.43 3.5918519l-.017234.0163704c-.188617.1887407-.3801064.3659259-.5467021.5084444l-.4605319.4285185-.486383.4516296-.1407447-.0702963c-.7257447.4583704-1.4926596.7886667-2.2796809.9831852l.5840426.5864445-.6769149.6817778-2.052766 2.0636296-.169468.1704444-.019149.0192593-2.3821276 2.3958518c-.4902128.8493334-1.1202128 1.6331852-1.8497873 2.3111112-.6031915.6047407-1.2504255 1.1054814-1.935 1.4954814l-.4777659.4805186-4.3247873 4.3506666-.0296808.0298519-.0315958.0269629-2.1532978 1.8171111-.2661702.2253334h-.3485107-3.8948936l-3.968617 3.9914815-1.3547873 1.3616296-.6769148.6808148-.6769149-.6808148-1.3538298-1.3616296-4.80925535-4.837926-3.2687234-3.2875555-1.63436171-1.6437778h2.3112766 4.62255319 2.67223407l-4.71063832-4.7368148-.6769149-.6808148.6769149-.6808148 4.93851062-4.9650371.6769149-.6798518.6769149.6808148 2.7296809 2.7454074c.9363829-.8820741 2.1485106-1.4685185 3.4037234-1.6562963.278617-1.4694815 1.0187234-2.834963 2.168617-3.9885926.5696808-.572 1.1843617-1.0438519 1.8335106-1.4107407l.2901064-.2917778 4.3094681-4.31985187c.5830851-1.0582963 1.4256383-1.78918519 2.0364893-2.12718519l.4471277-.24748148c.3829787-.7617037.9047872-1.47622222 1.5539362-2.12622222 1.510851-1.51666667 3.3165957-2.31881482 5.22-2.31881482.0871276 0 .1752127.00192593.2594681.00577778 1.9484042.06933334 3.8441489.97933334 5.4775532 2.62792593.1512765.15022222.3303191.34859259.5361702.5797037l.0526595.05874074c.1120213.12518519.2345745.26192593.370532.40733334l1.2657446 1.36066666.6328724.67985185-.6548936.65866667-.2508511.25325926zm-27.9288192 22.17414815h-9.57446804l4.78723404 4.8148148zm23.1864894-21.70422223c-.9220213 1.38666663-2.5180851 3.63037033-4.1984042 1.94133333l4.2510638-4.27651851c-.3810638-.41022222-.6711702-.754-.8923404-.97740741-2.2921277-2.31207407-4.8743617-2.34192593-6.8984043-.312-1.3528723 1.35681481-1.7071277 2.91007407-1.313617 4.38533332l-1.332766-1.52629628c-.385851.21474074-2.0182979 1.65918518-.7937234 3.84703708l-1.5252127-1.274963-2.0240426 2.0299259 2.7344681 2.7502222c-2.1121277-1.6861481-4.3889362-1.5205185-6.2157447.312-1.9560638 1.9615556-1.8181915 4.3381482-.3532979 6.293926l-.295851-.2946667c-1.9321277-1.9432593-4.0318085-1.2576296-5.0706383-.2128148-.8023405.8079259-1.2944681 1.9191852-1.0924468 2.6905185l-4.195532-4.2187407-2.22893613 2.2408148 8.25893613 8.3065185h4.4339362l-2.9767021-2.9938519c-.5893908-.6029568-.9604155-1.0987731-1.1531529-1.5232627-.3182349-.7008886-.1504161-1.2073234.3230465-1.680515.7334043-.7318519 1.583617-.2763704 3.0829787 1.2277777l2.9412766 2.9562963 2.2164894-2.2292592-2.7909575-2.8060741c2.0125532 1.5291852 4.4224468 1.612 6.5728724-.545037 1.3567021-1.2653334 1.7425532-2.4565185 1.7425532-2.4565185l-1.6755319-1.1314815c-.9229788 1.3866666-2.5152128 3.6361481-4.195532 1.9461481l4.2606383-4.2851852 2.655 2.6712593 2.3160639-2.3294074-3.3223405-3.3424445c-1.5520212-1.5609629-.6328723-3.0275555.0124469-3.5793333.3025531.6442222.7448936 1.2624445 1.3078723 1.8296296 2.1485106 2.1676297 4.9260638 2.6038519 7.3685106.1550371 1.3567022-1.2643704 1.7425532-2.4565185 1.7425532-2.4565185zm-3.6564894-1.35537321-2.0211702 2.03377777c-.9890425-1.18251851-.9392553-1.81422222-.3245744-2.43051851.7439361-.7462963 1.4993617-.43044445 2.3457446.39674074zm-12.4879787 12.56088884c-.9890425-1.1825185-.9411702-1.819037-.3284042-2.4353333.7448936-.7462963 1.5003191-.4304444 2.3467021.3967408z" fill="#0f1621" fill-opacity=".7"/><path d="m17.2765957 31.0029116-4.787234 4.8148148-4.78723404-4.8148148zm23.1864894-21.70422223 1.6755319 1.13148153s-.385851 1.1921481-1.7425532 2.4565185c-2.4424468 2.4488148-5.22 2.0125926-7.3685106-.1550371-.5629787-.5671851-1.0053192-1.1854074-1.3078723-1.8296296-.6453192.5517778-1.5644681 2.0183704-.0124469 3.5793333l3.3223405 3.3424445-2.3160639 2.3294074-2.655-2.6712593-4.2606383 4.2851852c1.6803192 1.69 3.2725532-.5594815 4.195532-1.9461481l1.6755319 1.1314815s-.3858511 1.1911851-1.7425532 2.4565185c-2.1504256 2.157037-4.5603192 2.0742222-6.5728724.545037l2.7909575 2.8060741-2.2164894 2.2292592-2.9412766-2.9562963c-1.4993617-1.5041481-2.3495744-1.9596296-3.0829787-1.2277777-.4734626.4731916-.6412814.9796264-.3230465 1.680515.1927374.4244896.5637621.9203059 1.1531529 1.5232627l2.9767021 2.9938519h-4.4339362l-8.25893613-8.3065185 2.22893613-2.2408148 4.195532 4.2187407c-.2020213-.7713333.2901063-1.8825926 1.0924468-2.6905185 1.0388298-1.0448148 3.1385106-1.7304445 5.0706383.2128148l.295851.2946667c-1.4648936-1.9557778-1.6027659-4.3323704.3532979-6.293926 1.8268085-1.8325185 4.103617-1.9981481 6.2157447-.312l-2.7344681-2.7502222 2.0240426-2.0299259 1.5252127 1.274963c-1.2245745-2.1878519.4078724-3.63229634.7937234-3.84703708l1.332766 1.52629628c-.3935107-1.47525925-.0392553-3.02851851 1.313617-4.38533332 2.0240426-2.02992593 4.6062766-2.00007407 6.8984043.312.2211702.22340741.5112766.56718519.8923404.97740741l-4.2510638 4.27651851c1.6803191 1.689037 3.2763829-.5546667 4.1984042-1.94133333zm-16.1444681 11.20551563 2.0182979-2.0385925c-.846383-.8271852-1.6018085-1.1430371-2.3467021-.3967408-.612766.6162963-.6606383 1.2528148.3284042 2.4353333zm12.4879787-12.56088884c-.8463829-.82718519-1.6018085-1.14303704-2.3457446-.39674074-.6146809.61629629-.6644681 1.248.3245744 2.43051851z" fill="#fff" fill-opacity=".3"/></g></svg>'),n=Cj;uc(n)?t(n):new tf("image",r).then((function(e){Ye.drawImage(e,0,0);try{Ye.getImageData(0,0,1,1),n=!1}catch(r){n=18===r.code}finally{Cj=n,t(n)}}),e)}zj.prototype.la=function(){var t,e,r,n=this.a,i=n.ib(),o=n.c.fb().bounds,a=(n=n.a).a.length,s={},l=0,u=[Gj];if(o)for(;l<a;l++)if(e=n.get(l).getCopyrights(o.G(),i))for(t=0;t<e.length;t++)s[r=e[t].label]||(u.push(r),s[r]=1);return u.join(", ")},zj.prototype.getCopyrights=zj.prototype.la,zj.prototype.oa=function(){return this.P.style},zj.prototype.i=String.fromCharCode(169),zj.prototype.o=function(){if(this.a.removeEventListener(this.a.A.Ci,this.c),this.a.a.removeEventListener("add",this.b),this.a.a.removeEventListener("remove",this.b),this.a.a.removeEventListener("set",this.b),this.P.parentNode){var t=this.P;t.parentNode.removeChild(t)}},zj.prototype.disposeInternal=zj.prototype.o,zj.prototype.capture=function(t,e,r,n){var i,o=t.getContext("2d"),a=window.getComputedStyle(this.f.parentElement),s=2*Bc(a.paddingLeft,10),l=(this.f.offsetWidth+2*s)*e,u=this.f.offsetHeight*e,c=Cc(a.getPropertyValue("font-size")),h=this.P.ownerDocument,f=+t.width,p=+t.height,A=16*e,d=this.ef.childNodes[0].getBoundingClientRect(),g=d.width*e,y=d.height*e,v=jd;Da(n)&&(v=function(){n("capture_error")}),o.fillStyle=a.backgroundColor,o.fillRect(f-l,p-u,l,u),l=this.i+" "+(i=this.la(),(i=Aj(h,"div",null,i)).textContent||i.innerText||""),o.font=c*e+"px "+a.getPropertyValue("font-family"),o.fillStyle=a.getPropertyValue("color"),o.textBaseline="bottom",o.textAlign="right",o.fillText(l,f-s*e,p),Hj(this,o.font,(function(e){new tf("image",e).then((function(e){o.drawImage(e,A,p-(y+A),g,y),r(t)}),v)}),v)},zj.prototype.capture=zj.prototype.capture,zj.prototype.hh=!1,zj.prototype.hl=function(t,e){Fj[t]=e},zj.prototype.addL11NString=zj.prototype.hl;var Fj={"de-DE":"Nutzungsbedingungen","en-US":"Terms of use","en-GB":"Terms of use","es-ES":"Condiciones de uso","fi-FI":"Palveluehdot","fr-FR":"Conditions d'utilisation","it-IT":"Condizioni di utilizzo","nl-NL":"Dienstvoorwaarden","pl-PL":"Warunki \u015bwiadczenia us\u0142ugi","pt-BR":"Termos de servi\xe7o","pt-PT":"Termos do servi\xe7o","ru-RU":"\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","tr-TR":"Servis Ko\u015fullar\u0131","zh-CN":"\u4f7f\u7528\u6761\u6b3e"};function Q(t){var e={};this.f=e.previousSibling=e.nextSibling=e,this.g=new cf,Q.l.constructor.call(this,t),t&&"objects"in t&&this.Qb(t.objects)}function Jj(t,e,r){t.$d(r.ja)}function Kj(t){t.Qe()}function Lj(t,e,r){t.pa(r.c)}function Mj(t){this.push(t)}function Nj(t,e){for(var r,n,i=0,o=e.length,a=[];i<o;i++)n=(r=e[i])instanceof Q?{type:"GeometryCollection",geometries:Nj(t,r.Na())}:r instanceof rh||r instanceof sh||r instanceof th||r instanceof uh?r.ca().Cc():{type:"FeatureCollection",features:hf},a.push(n);return a}u(Q,M),t("H.map.Group",Q),Q.prototype.type=nh.GROUP,Q.prototype.$d=function(t,e){return this.b=!0,t=Q.l.$d.call(this,t,e),this.b=!1,t&&this.forEach(Jj,!0),t},Q.prototype.setProvider=Q.prototype.$d,Q.prototype.contains=function(t){var e=this===t;if(!e&&this.a&&C(t,M))for(;!e&&t;)t===this?e=!0:t=t.Ca;return e},Q.prototype.contains=Q.prototype.contains,Q.prototype.Qe=function(){this.L=B,this.forEach(Kj,!0)},Q.prototype.resetZInfo=Q.prototype.Qe,Q.prototype.b=!1,Q.prototype.pa=function(t){var e=Q.l.pa.call(this,t);return e&&!this.b&&(this.c=t,this.forEach(Lj,!0),delete this.c),e},Q.prototype.invalidate=Q.prototype.pa,Q.prototype.forEach=function(t,e,r){var n;if(this.a){var i=this.f,o=i.nextSibling;for(n=0;o!==i;){var a=o.nextSibling;t.call(r,o,n++,this),e&&C(o,Q)&&o.forEach(t,e,r),o=a}}},Q.prototype.forEach=Q.prototype.forEach,Q.prototype.Na=function(t){var e=[];return this.forEach(Mj,t,e),e},Q.prototype.getObjects=Q.prototype.Na,Q.prototype.G=function(){var t=null;return this.a&&this.forEach((function(e){e.G&&(e=e.G())&&(t=t?t.Xb(e):e)})),t},Q.prototype.getBoundingBox=Q.prototype.G,Q.prototype.a=0,Q.prototype.Ll=function(){return this.a},Q.prototype.getChildCount=Q.prototype.Ll,Q.prototype.ba=function(t){var e=this.f,r=e.previousSibling;if(C(t,M,this.ba,0),t.contains(this))throw new Yc(this.ba,"The new object contains the parent group");var n=t.Af(!0),i=t.Ca;if(i!==this){if(i){i=t.previousSibling;var o=t.nextSibling;i.nextSibling=o,o.previousSibling=i}t.Ca=this,M.l.ha.call(t,this),r.nextSibling=t,t.previousSibling=r,t.nextSibling=e,e.previousSibling=t,this.a++}return t.ni=this.g.next(),t.Qe(),e=t.$d(this.ja,this.ba),t.Af(!0)!==n&&t.pa(kh.VOLATILITY),e||t.pa(kh.Z_ORDER),t},Q.prototype.addObject=Q.prototype.ba,Q.prototype.Qb=function(t){var e;zc(t,this.Qb,0);var r=t.length;for(e=0;e<r;e++)this.ba(t[e])},Q.prototype.addObjects=Q.prototype.Qb,Q.prototype.Da=function(t){if(!t||t.Ca!==this)throw new Yc(this.Da,"object not found");var e=t.previousSibling,r=t.nextSibling;return e.nextSibling=r,r.previousSibling=e,t.Ca=null,M.l.ha.call(t,null),delete t.previousSibling,delete t.nextSibling,C(t.ja,N)&&t.$d(null,this.Da),this.a--,t},Q.prototype.removeObject=Q.prototype.Da,Q.prototype.nd=function(t){var e;zc(t,this.nd,0);var r=t.length;for(e=0;e<r;e++)this.Da(t[e])},Q.prototype.removeObjects=Q.prototype.nd,Q.prototype.ka=function(){var t=this.Na();this.nd(t)},Q.prototype.removeAll=Q.prototype.ka,Q.prototype.Cc=function(t){for(var e,r,n,i=this.Na(),o=0,a=i.length,s=[];o<a;o++)(n=i[o])instanceof Q?(r=qh(this,e=t?t(n.getData()):n.getData(),!!t),(e={type:"Feature"}).properties=r,n.i&&(e.id=n.i),e.geometry={},e.geometry.type="GeometryCollection",e.geometry.geometries=Nj(this,n.Na()),s.push(e)):s.push(n.Cc(t));return{type:"FeatureCollection",features:s}},Q.prototype.toGeoJSON=Q.prototype.Cc,Q.prototype.W=function(){var t=Q.l.W.call(this);return t.type="Group",t},Q.prototype.forWorkerMessage=Q.prototype.W;var Oj={PROVIDES_BY_VIEWPORT:1,PROVIDES_RASTERS:2,PROVIDES_SPATIALS:4,PROVIDES_OVERLAYS:8,PROVIDES_MARKERS:16,PROVIDES_DOM_MARKERS:32,PROVIDES_GEOJSON:64,PROVIDES_OMV:128,CROP_LINES_BY_TILE:256,CROP_POLYGONS_BY_TILE:512,HAS_VOLATILE_DATA:1024};function Pj(t,e,r,n,i){switch(e&&(this.g=e),uc(r)&&(this.c=!!r),this.c&&n&&(this.xg=new Ui(n.w,n.h)),uc(i)&&(this.i={crossOrigin:i}),Qj[yc(t)]){case 2:this.a=t,Rj(this,1);break;case 1:if(nf(t)){this.a=t,Sj(this),Rj(this,1);break}t=t.src;case 0:if(t){t=bf(t),this.b=new tf("image",t,B,this.i),this.b.then(A(this.Fn,this),A(this.En,this));break}default:throw Rj(this,-1),new D(Pj,0,"No image data")}}function Rj(t,e){t.f=e,delete t.b,t.g&&t.g(e,t)}function Sj(t){if(t.c){var e=t.a,r=Tj(t),n=r&&r.w||+e.width,i=r&&r.h||+e.height,o=Te();if(C(e,x.HTMLCanvasElement))r=e;else{(r=e.ownerDocument.createElement("canvas")).width=Ad(n*o),r.height=Ad(i*o);var a=r.getContext("2d");a.scale(o,o),a.drawImage(e,0,0,n,i),$c&&(a.clearRect(0,0,n,i),a.drawImage(e,0,0,n,i))}t.a=r}}t("H.map.provider.Capabilities",Oj),Oj.PROVIDES_WEBGL_RENDERABLE_OBJECTS=Oj.PROVIDES_SPATIALS|Oj.PROVIDES_OVERLAYS|Oj.PROVIDES_MARKERS,Pj.prototype.f=0,Pj.prototype.getState=function(){return this.f},Pj.prototype.c=!0,Pj.prototype.getData=function(){return this.a||y};var Qj={String:0,HTMLImageElement:1,HTMLCanvasElement:2};function Tj(t){var e,r=t.xg;if(!r){var n=t.a;if(0===(r=n.naturalWidth||n.width)&&$e&&1===Qj[yc(n)]){var i=!0;if(e=n.parentNode)var o=n.nextSibling;document.body.appendChild(n)}t.xg=r=new Ui(n.naturalWidth||n.width,n.naturalHeight||n.height),i&&(e?e.insertBefore(n,o):document.body.removeChild(n))}return r}function Uj(t,e){var r,n="anonymous";if(this.uid=Vj.next(),Uj.l.constructor.call(this),e){var i="size";if(i in e){var o=e[i];if(!o||isNaN(o.w)||isNaN(o.h))throw new D(Uj,1,i);this.g=new Ui(o.w,o.h)}if((i="anchor")in e){if(!(o=e[i])||isNaN(o.x)||isNaN(o.y))throw new D(Uj,1,i);this.f=new G(o.x,o.y)}(i="hitArea")in e&&(C(o=e[i],Vi,Uj,1),this.c=e[i]),(i="asCanvas")in e&&(r=e[i]),(i="crossOrigin")in e&&(n=e[i]),(o=e.stickHeight)===+o&&0<o&&(this.co=o),o=e[i="stickColor"],i in e&&Ac(o)&&(this.bo=o)}t=new Pj(t,A(this.i,this),r,this.g,n),0!==(e=this.j=t.getState())?this.i(e,t):this.b=t}p=Pj.prototype,p.xg=y,p.qb=function(){return 1===this.f?Tj(this):y},p.Fn=function(t){this.a=t,Sj(this),Rj(this,1)},p.En=function(){Rj(this,-1)},p.cancel=function(){this.b&&this.b.cancel()},u(Uj,F),t("H.map.Icon",Uj);var Vj=new cf;function Wj(t,e,r,n,i,o){Wj.l.constructor.call(this,isNaN(t)?15:t,e,r,n,i,o)}function Xj(t,e,r,n,i){var o=e.entries;if(i)if(e.a)o=Yj(t,e,r,n,i);else if(o){var a=Eg(e,+((o=o[0])[1]>=e[8])|+(o[0]>=e[9])<<1);a.entries=e.entries,delete e.entries,o.node=a,Bg(t,a),o=Yj(t,e,r,n,i)}else Fg(e,o=new Zj(r,n)),Bg(t,e),zg(t,o,!0);else o||Bg(t,e),Fg(e,o=new Zj(r,n)),zg(t,o,!0);return o}function Yj(t,e,r,n,i){return Xj(t,Eg(e,+(r>=e[8])|+(n>=e[9])<<1),r,n,i-1)}function Zj(t,e){this.id=Dg++,this[0]=e,this[1]=t}function ak(){this.a=new Wj(10,180,90,0,0,!0)}function bk(t){this.a=t}function ck(t,e,r){this.c=t,this.a=e,this.g=r,this.f=this.c&Oj.PROVIDES_BY_VIEWPORT?"function(){return sources[$source].isInMinMaxRange(feature, $zoom) && feature.ref.effectiveVisibility;}":B,this.b={}}function dk(t,e,r,n){this.a=t,this.b=e,this.c=r,this.af=n}function ek(t,e,r,n){return t={type:e,uid:t.b,tiled:r,max_zoom:t.c},n&&Xa(t,n),t}function fk(t,e,r,n,i){this.a=t,this.b=e,this.c=r,this.f=n,this.af=i}function gk(t){if(t.a&Oj.PROVIDES_DOM_MARKERS&&!(t.a&Oj.PROVIDES_MARKERS))return{};var e=new dk(t.a,t.b,t.c,t.af),r=new bk(t.a);t=new ck(t.a,t.b,t.f);var n={},i=e.b;if(e=e.a&Oj.PROVIDES_BY_VIEWPORT?ek(e,"ObjectSource",!1,{progressiveUpdate:!0,has_volatile_data:!!(e.a&Oj.HAS_VOLATILE_DATA)}):e.a&Oj.PROVIDES_RASTERS?ek(e,"RemoteRasterTileSource",!0,{url:""}):ek(e,"ObjectTileSource",!0,{tile_size:e.af}),n[i]=e,e={},r.a&Oj.PROVIDES_RASTERS&&(e={"translucent-raster":ni("raster","inlay",1)}),r.a&Oj.PROVIDES_WEBGL_RENDERABLE_OBJECTS){i=!!(r.a&Oj.CROP_LINES_BY_TILE);var o={"translucent-polygons":ni("polygons","inlay",2),"translucent-extruded-polygons":ni("polygons","translucent",3),"translucent-pattern-lines":ni("pattern-lines","translucent",4),"translucent-overlays":ni("overlays","inlay",5),markers:ni("custom_icons","overlay",6,!1)};o["translucent-polygons"].crop_by_tile=!!(r.a&Oj.CROP_POLYGONS_BY_TILE),o["translucent-pattern-lines"].crop_by_tile=i,o.markers.suppress_fade=!0,o.markers.stick=!0,Xa(e,o)}if(t.c&Oj.PROVIDES_RASTERS&&(t.b["tile_layer_"+t.a]=pi(t.a,"_default",{"translucent-raster":{color:[1,1,1,t.g],order:0}})),t.c&Oj.PROVIDES_SPATIALS){r={"translucent-pattern-lines":{color:mi("strokeColor"),width:mi("lineWidth * $meters_per_pixel"),join:mi("lineJoin"),cap:mi("lineCap"),tail_cap:mi("lineTailCap"),head_cap:mi("lineHeadCap"),miter_limit:mi("miterLimit"),order:"function() { return 2 + feature.effectiveZIdx / 2; }",interactive:!0,dash:mi("lineDash"),extrude:!0,dash_phase:mi("lineDashOffset")}},i=t.b,o="polygon_layer_"+t.a;var a=pi(t.a,"polygons",void 0,t.f);a.flat={filter:"function(){return !feature.height && !feature.min_height;}",draw:oi(!1)},a.extruded={filter:"function(){return feature.height || feature.min_height;}",draw:oi(!0)},i[o]=a,t.b["outline_layer_"+t.a]=pi(t.a,"outlines",r,t.f),t.b["polyline_layer_"+t.a]=pi(t.a,"polylines",r,t.f)}return t.c&Oj.PROVIDES_OVERLAYS&&(t.b["overlay_layer_"+t.a]=pi(t.a,"overlays",{"translucent-overlays":{color:[1,1,1,t.g],order:8190,interactive:!0}})),t.c&Oj.PROVIDES_MARKERS&&(t.b["marker_layer_"+t.a]=pi(t.a,"markers",{markers:{sprite:li("icon.id"),offset:li("icon.offset"),collide:!1,priority:8191,elevate_by_altitude:!0,interactive:!0,stick:{color:li("icon.stick_color"),height:li("icon.stick_height")}}},t.f)),{sources:n,styles:e,layers:t.b}}function P(t){var e,r=""+ef();if(P.l.constructor.call(this),t=t||{},this.min=t.min||0,this.max=t.max||22,e=t.uri){if(/_/.test(e))throw new D(P,0,"uri "+e)}else e=r;if(this.uri=e||r,this.uid=r,t.getCopyrights&&xc(t.getCopyrights,"Function",P)&&(this.getCopyrights=t.getCopyrights),this.Ya=this.Ya.bind(this),this.ra=!0,this.c=t.engineType||hk,this.c===ik.HARP&&!H.map.render.harp)throw new D(P,0,"HARP engine is not supported, module not found")}function jk(t,e){e=Zd(e,0,1),E(e)&&(e=1),t.f!==e&&(t.f=e,t.ra&&kk(t),t.Ya(),t.Ra())}function kk(t){if(t.c===ik.WEBGL){var e=new fk(t.getCapabilities(),t.uid,t.max,t.f,t.tileSize);t.a=new qi(gk(e))}else t.c===ik.HARP&&H.map.render.harp&&(t.a=new H.map.render.harp.Style({}));t.ra=!0}function mk(t){var e;for(e in vc(this,mk),mk.l.constructor.call(this,t),this.$=t=[],nh)t[nh[e]]=new jh}function N(t){t=t||{},N.l.constructor.call(this,t),this.g=t=new Q({min:t.min,max:t.max}),t.ja=this,t.ha(this),t.pa(kh.ADD),this.u=new Lg,this.i=new Lg,this.m=new ak,this.s=new Lg,this.T=new ak,this.R=new Lg}function nk(t,e,r,n,i,o,a){if(a=a||[],e.Lc())for(t=e!==t.m&&e!==t.s,i=!i,r=(e=e.Df(r,o,o)).length,o=0;o<r;o++){var s,l=e[o].c;if(s=void 0!==n){for(var u=zd(n),c=l;(s=c.s<=u&&c.m>=u)&&(c=c.Ca););s=!s}s||!i&&!l.oc(!0)||(t||1===l.pb().getState())&&a.push(l)}return a}function ok(t,e,r,n,i){var o=nk(t,t.m,e,r,n,i);return nk(t,t.s,e,r,n,i,o),o}function pk(t,e,r,n,i){var o=nk(t,t.T,e,r,n,i);return nk(t,t.R,e,r,n,i,o),o}function qk(t,e,r){var n,i=r.ca(),o=rk.bind(null,t);t=sk.bind(null,t),C(r,th)?n=C(i,L)?o(i):i.ia.some(o):C(r,uh)?n=C(i,O)?t(i):i.ia.some(t):C(r,sh)&&(n=t(zi(i))),n&&e.push(r)}function rk(t,e){t:{var r=e.X,n=Ei(t,e);if(!n){e=e.X.length;for(var i=0;i<e;i+=3)if(Ci(t,r[i],r[i+1])){t=!0;break t}}t=n}return t}function sk(t,e){return Fi(t,e)}function tk(t,e,r){for(var n=t.length;n--;){var i=t[n],o=i.ca();if(C(o,Ti)){for(var a,s=(o=o.ia).length;s--;)if(Ci(e,(a=o[s]).lat,a.lng)){r.push(i);break}}else Ci(e,o.lat,o.lng)&&r.push(i)}}Uj.State={ERROR:-1,LOADING:0,READY:1},Uj.prototype.getState=function(){return this.j},Uj.prototype.getState=Uj.prototype.getState,Uj.prototype.i=function(t,e){if(this.a=e.getData(),1===t){var r=this.g;r||(r=this.g=e.qb()),this.f||(this.f=new G(r.w/2|0,r.h))}this.b&&(this.j=t,delete this.b,this.dispatchEvent("statechange"))},Uj.prototype.a=y,Uj.prototype.Jc=function(){return this.a},Uj.prototype.getBitmap=Uj.prototype.Jc,Uj.prototype.qb=function(){return this.g||y},Uj.prototype.getSize=Uj.prototype.qb,Uj.prototype.f=y,Uj.prototype.ed=function(){return this.f},Uj.prototype.getAnchor=Uj.prototype.ed,Uj.prototype.c=y,Uj.prototype.bm=function(){return this.c},Uj.prototype.getHitArea=Uj.prototype.bm,Uj.prototype.o=function(){Uj.l.o.call(this),this.a?(this.a.removeAttribute("src"),delete this.a):(this.b.cancel(),delete this.b)},u(Wj,wg),Wj.prototype.m=function(t){for(var e,r,n=this.head,i=t;i;){if(t=i.entries)if(e=t.length){if(2>e&&(r=i.parent)&&1===r.a){r.removeChild(i),n===i&&(n=r),r.entries=t,i=t[0].node=r;continue}}else if(delete i.entries,(r=i.parent)&&(r.removeChild(i),n===i&&(n=r),1===r.a)){i=r.a?r[0]||r[1]||r[2]||r[3]:null;continue}break}this.head!==n&&(this.head=n,Bg(this))},Wj.prototype.qc=function(t,e){if(Gg(this.a,t,e,t,e))return Xj(this,this.a,t,e,this.c);throw Error("Coordinates out of bounds")},Zj.prototype.a=function(t){return this[t%2]},p=ak.prototype,p.oh=0,p.Lc=function(){return this.oh},p.Hf=null,p.G=function(){var t,e=this.Hf;return!e&&(t=xg(this.a))&&(this.Hf=e=new K(-t[0],t[3],-t[2],t[1])),e},p.qc=function(t){return++this.oh,this.Hf=null,this.a.qc(t.lng,-t.lat)},p.remove=function(t){return(t=this.a.remove(t))&&(--this.oh,this.Hf=null),t},p.Df=function(t,e,r){var n=this.a,i=t.Fb(),o=t.Bb(),a=-i.lat;i=i.lng;var s=-o.lat;return o=o.lng,t.tb()?n.Ua(-180,a,o,s,r,e).concat(n.Ua(i,a,180,s,r,e)):n.Ua(i,a,o,s,r,e)},u(P,F),t("H.map.provider.Provider",P),p=P.prototype,p.A={de:"configchange",wa:"update"},p.Ra=function(t,e){this.dispatchEvent(new td(this.A.wa,e,t))},p.Ya=function(){this.dispatchEvent(this.A.de)},p.o=function(){F.prototype.o.call(this),this.a&&(this.a.removeEventListener("change",this.Ya),delete this.a)},p.la=function(){return null},P.prototype.getCopyrights=P.prototype.la,P.prototype.getCapabilities=function(){var t=0;return this.Ph()&&(t|=Oj.PROVIDES_BY_VIEWPORT),this.providesRasters()&&(t|=Oj.PROVIDES_RASTERS),this.providesSpatials()&&(t|=Oj.PROVIDES_SPATIALS),this.providesOverlays()&&(t|=Oj.PROVIDES_OVERLAYS),this.providesMarkers()&&(t|=Oj.PROVIDES_MARKERS),this.providesDomMarkers()&&(t|=Oj.PROVIDES_DOM_MARKERS),this.providesGeoJSON()&&(t|=Oj.PROVIDES_GEOJSON),this.providesOMV()&&(t|=Oj.PROVIDES_OMV),t},P.prototype.getCapabilities=P.prototype.getCapabilities,P.prototype.Ph=gf,P.prototype.Me=gf,P.prototype.providesRasters=P.prototype.Me,P.prototype.uc=gf,P.prototype.providesSpatials=P.prototype.uc,P.prototype.Rh=gf,P.prototype.providesOverlays=P.prototype.Rh,P.prototype.Jb=gf,P.prototype.providesMarkers=P.prototype.Jb,P.prototype.Ib=gf,P.prototype.providesDomMarkers=P.prototype.Ib,P.prototype.Qh=gf,P.prototype.providesGeoJSON=P.prototype.Qh,P.prototype.ld=gf,P.prototype.providesOMV=P.prototype.ld,P.prototype.Wl=function(){return this.c},P.prototype.getEngineType=P.prototype.Wl,P.prototype.Le=jd,P.prototype.preprocessData=P.prototype.Le,P.prototype.f=1,P.prototype.sm=function(){return this.f},P.prototype.getOpacityInternal=P.prototype.sm,P.prototype.Ob=function(t,e){var r=this;if(this.c===ik.WEBGL&&!C(t,qi)||this.c===ik.HARP&&!C(t,H.map.render.harp.Style))throw t=Object.entries(ik).find((function(t){return t[1]===r.c})),new D(this.Ob,0,"Invalid style for engineType "+t);this.a&&(this.a.removeEventListener("change",this.Ya),this.a.removeEventListener(Vh,this.Ya)),this.a=t,this.a.addEventListener("change",this.Ya),this.a.addEventListener(Vh,this.Ya),e||this.Ya(),this.ra=!1},P.prototype.setStyleInternal=P.prototype.Ob,P.prototype.ab=function(){return this.a||kk(this),this.a},P.prototype.getStyleInternal=P.prototype.ab,P.prototype.tj=function(){var t=this.getCapabilities(),e=lk.FEATURE;return t&Oj.PROVIDES_BY_VIEWPORT?e=lk.SOURCE:t&Oj.PROVIDES_RASTERS?e=null:t&Oj.PROVIDES_WEBGL_RENDERABLE_OBJECTS&&(e=lk.PROVIDER),e},P.prototype.getPickingMode=P.prototype.tj,P.prototype.$l=function(){return!1},P.prototype.getFeatureProxy=P.prototype.$l,u(mk,P),t("H.map.provider.ObjectProvider",mk),mk.prototype.Ph=ff,mk.prototype.providesByViewport=mk.prototype.Ph,mk.prototype.Db=function(t){return this.$[t||nh.ANY]},mk.prototype.getInvalidations=mk.prototype.Db,mk.prototype.Pd=function(t,e){if(e!==kh.NONE){var r=this.$[nh.ANY],n=r.a+1;r.update(n,e),(r=this.$[t.type]).update(n,e),t.Db().update(n,e),this.Ra(t)}},mk.prototype.invalidateObject=mk.prototype.Pd,mk.prototype.requestOverlays=mk.prototype.od,mk.prototype.requestSpatials=mk.prototype.Wf,mk.prototype.requestSpatialsByTile=mk.prototype.Xf,mk.prototype.xa=!1,mk.prototype.requestMarkers=mk.prototype.wc,mk.prototype.requestDomMarkers=mk.prototype.vc,u(N,mk),t("H.map.provider.LocalObjectProvider",N),N.prototype.getCapabilities=function(){return Oj.PROVIDES_BY_VIEWPORT|Oj.PROVIDES_WEBGL_RENDERABLE_OBJECTS|Oj.PROVIDES_DOM_MARKERS|Oj.CROP_LINES_BY_TILE},N.prototype.ab=function(){if(!this.B&&(this.B=N.l.ab.call(this),this.B instanceof qi)){var t=new fk(this.getCapabilities()|Oj.HAS_VOLATILE_DATA,this.uid+"_vol",this.max,this.f,this.tileSize);this.B.Fe(gk(t))}return this.B},N.prototype.getStyleInternal=N.prototype.ab,N.prototype.Ub=function(){return this.g},N.prototype.getRootGroup=N.prototype.Ub,N.prototype.Pd=function(t,e){e&kh.SPATIAL&&this.ba(t),N.l.Pd.call(this,t,e)},N.prototype.invalidateObject=N.prototype.Pd,N.prototype.ba=function(t){var e;if(C(t,M,this.ba,0),t.ja!==this)throw new Yc(this.ba,"foreign object");this.Da(t);var r=t.type;if(r===nh.MARKER)if((e=t.ca())instanceof lg){var n=!0;r=this.m}else r=this.s;else r===nh.DOM_MARKER?(e=t.ca())instanceof lg?(n=!0,r=this.T):r=this.R:r=r===nh.OVERLAY?this.u:this.i;(n=n?r.qc(e):r.Ij(t.G())).c=t,t.xa=n},N.prototype.Da=function(t){var e;if(t)if(t.ja!==this){if(C(t,M))throw new Yc(this.Da,"foreign object")}else if(e=t.xa){var r=t.type;r===nh.MARKER?this.m.remove(e)||this.s.remove(e):r===nh.DOM_MARKER?this.T.remove(e)||this.R.remove(e):r===nh.OVERLAY?this.u.remove(e):this.i.remove(e),delete e.c,delete t.xa}},N.prototype.removeObject=N.prototype.Da,N.prototype.Rh=function(){return 0<this.u.Lc()},N.prototype.providesOverlays=N.prototype.Rh,N.prototype.od=function(t,e,r){return nk(this,this.u,t,e,r,!1).filter((function(t){return t.Jc()}))},N.prototype.requestOverlays=N.prototype.od,N.prototype.uc=function(){return 0<this.i.Lc()},N.prototype.providesSpatials=N.prototype.uc,N.prototype.Wf=function(t,e,r){return nk(this,this.i,t,e,r,!1)},N.prototype.requestSpatials=N.prototype.Wf,N.prototype.Xf=function(t,e){return nk(this,this.i,t.wf(),t.zL,e,!1)},N.prototype.requestSpatialsByTile=N.prototype.Xf,N.prototype.Jb=function(){return 0<this.m.Lc()+this.s.Lc()},N.prototype.providesMarkers=N.prototype.Jb,N.prototype.wc=function(t,e,r){return ok(this,t,e,r,!1)},N.prototype.requestMarkers=N.prototype.wc,N.prototype.Ib=function(){return 0<this.T.Lc()+this.R.Lc()},N.prototype.providesDomMarkers=N.prototype.Ib,N.prototype.vc=function(t,e,r){return pk(this,t,e,r,!1)},N.prototype.requestDomMarkers=N.prototype.vc,N.prototype.Na=function(t,e,r,n,i){var o=this,a=t.G(),s=[],l=Yb(),u=1;if(a)for(;u&nh.ANY;){if(u&n)switch(u){case nh.MARKER:l=l.then((function(){return ok(o,a,r,e,!0)})).then((function(e){return tk(e,t,s)}));break;case nh.DOM_MARKER:l=l.then((function(){return pk(o,a,r,e,!0)})).then((function(e){return tk(e,t,s)}));break;case nh.SPATIAL:l=l.then((function(){return nk(o,o.i,a,r,e,!0)})).then((function(e){e.forEach(qk.bind(null,t,s))}));break;case nh.OVERLAY:l=l.then((function(){return nk(o,o.u,a,r,e,!0)})).then((function(e){e.forEach(qk.bind(null,t,s))}))}u<<=1}l.then((function(){return i(s)}))},N.prototype.o=function(){N.l.o.call(this),this.g.ka()};var uk={PENDING:0,ACTIVE:1,DONE:2};function vk(t,e){var r;if(e=e||{},!C(t,Element))throw new D(vk,0,t);var n=t.ownerDocument.createElement("div");this.P=t,vk.l.constructor.call(this),this.padding=new wk(0,0,0,0),this.center=new G(0,0),this.margin=0,this.element=n,n.style.zIndex=0,n.style.height=n.style.width="100%",n.style.direction="ltr",n.style.position="relative"===t.style.position?"absolute":"relative",this.resize(),t.appendChild(n),(r=e.padding)!==B&&this.gi(r.top,r.right,r.bottom,r.left),this.bi((r=e.margin)!==B?r:0)}function xk(t){var e=t.padding;t.center.set((t.width+e.left-e.right)/2<<0,(t.height+e.top-e.bottom)/2<<0)}function yk(t,e,r,n,i,o){var a;for(a=[];n<=i;n++)a=a.concat(zk(t,r,n));for(t=a.length,vj.call(this,o,t),this.m=r=[],this.g=A(this.g,this),this.f=A(this.f,this),this.O(1);t--;)o=a[t],r.push(Ak(e,o[0],o[1],o[2],this.g,this.f))}function Bk(t,e){var r=this;if(!Da(e))throw new D(Ck,1,e);if(!Da(t.next||Da(t.cycle)))throw new D(Bk,2,'Argument "mode" must implement H.util.AsyncQueue.Mode');this.b=[],this.c=[],this.g=t,this.i=e,this.j=function(){Dk(r)},this.a=null,this.f=function(){r.a||(r.a=x.setTimeout(r.j,1))}}function Dk(t){var e=t.c,r=0,n=t.g;for(n.a(),t.a=null;r<e.length;){var i=e[r];i.Nj?e.splice(r,1):r++}for(;i=n.next(t.b,t.c);)i.cancelled?i.done(null,"cancelled"):(e.push(i),t.i(i,i.data))}function Fk(){Ek(this,null,null,null)}function Ek(t,e,r,n){return t.data=e,t.cancelled=!1,t.Nj=!1,t.b=r,t.c=n,t.a=null,t}function Gk(){}t("H.map.render.RenderState",uk),u(vk,F),t("H.map.ViewPort",vk),vk.prototype.A={wa:"update",ge:"sync"},vk.prototype.bi=function(t){if(this.margin!==+t){if(E(this.margin=+t))throw new D(this.bi,0,t);xk(this),this.dispatchEvent(this.A.wa)}},vk.prototype.setMargin=vk.prototype.bi,vk.prototype.gi=function(t,e,r,n){var i=this.padding;if(i.top!==t||i.right!==e||i.bottom!==r||i.left!==n){if(E(t+e+r+n))throw new D(this.gi);i.top=t,i.right=e,i.bottom=r,i.left=n,xk(this),this.dispatchEvent(this.A.wa)}},vk.prototype.setPadding=vk.prototype.gi,vk.prototype.resize=function(){var t=this.P.offsetWidth,e=this.P.offsetHeight;this.width===t&&this.height===e||(this.a=new Ui(this.width,this.height),this.width=t,this.height=e,xk(this),this.dispatchEvent(this.A.wa))},vk.prototype.resize=vk.prototype.resize,vk.prototype.Va=function(t){this.dispatchEvent(new bj(this.A.ge,this.a,t,cj.SIZE))},vk.prototype.synchronize=vk.prototype.Va,vk.prototype.o=function(){this.P.removeChild(this.element),delete this.P,delete this.element,vk.l.o.call(this)},vk.prototype.ec=Oc,vk.prototype.startInteraction=vk.prototype.ec,vk.prototype.Vb=Oc,vk.prototype.interaction=vk.prototype.Vb,vk.prototype.ob=Oc,vk.prototype.endInteraction=vk.prototype.ob,u(yk,vj),yk.prototype.g=function(){xj(this,2)},yk.prototype.f=function(){xj(this,4)},yk.prototype.ie=function(){for(var t=this.m,e=t.length;e--;)t[e].cancel();delete this.m},t("H.util.AsyncQueue",Bk),Bk.prototype.push=function(t,e){if(!Da(e))throw new D(this.push,1,e);return t=Ek(new Fk,t,this.f,e),this.b.push(t),this.f(),t},Bk.prototype.push=Bk.prototype.push,Bk.Task=Fk,Fk.prototype.done=function(t,e){this.Nj=!0,this.b(),this.c(this,t,e)},Fk.prototype.done=Fk.prototype.done,Fk.prototype.cancel=function(){this.a&&this.a(),this.cancelled=!0},Fk.prototype.cancel=Fk.prototype.cancel,Fk.prototype.Wn=function(t){return this.a=t,this},Fk.prototype.setCancelFn=Fk.prototype.Wn,Bk.Mode=Gk,Gk.prototype.next=function(){},Gk.prototype.a=function(){};var Hk,Ik=function(){function t(){}for(var e,r,n,i=sc("o ms moz webkit "),o=5;o--&&!e;)e=i[o],e=(r=x[e+(e?"R":"r")+"equestAnimationFrame"])&&!E(r.call(window,t))&&(n=x[e+(e?"C":"c")+"ancelAnimationFrame"]);return Hk=e?function(t){return r.call(x,t)}:function(t){return x.setTimeout(t,25)},e?function(t){return n.call(x,t)}:function(t){return x.clearTimeout(t)}}(),Jk=x.performance&&x.performance.now?function(){return x.performance.now()}:function(){return x.Date.now()};function Kk(t,e){Kk.l.constructor.call(this,new Lk(t),e)}function Lk(t){if(isNaN(t)||0>t)throw new D(Kk,1,'Argument "maxTime" must be a positive number');this.c=t,this.b=Jk()}function Mk(t){if(vc(this,Mk),Mk.l.constructor.call(this,t),t&&"tileSize"in t){var e=Cd(+t.tileSize)/Md;if(isNaN(e)||e%1||0>e||30<e)throw new D(Mk,0,"tileSize: "+t.tileSize);this.tileSize=+t.tileSize}}function Nk(t,e){return Wd(t)-8-yd(Wd(e))}function Ok(){}function Pk(t,e,r){if(this.g=[],e&&this.Wd(e),r&&!Da(r))throw new D(Pk,2,r);this.b=0,this.filter=r,this.a={},this.f=this.c=null,this.di(t)}function Rk(t,e){return e&&(t.c=Sk(t,e,t.c)),e}function Tk(t){for(;t.b>t.i&&t.f;)Uk(t,t.f,!0)}function Sk(t,e,r){return r!==e&&((e.Yb||e.Tc)&&Uk(t,e,!1),(e.Yb=r)&&(e.Tc=r.Tc,r.Tc=e),e.Tc||(t.c=e),e.Yb||(t.f=e),t.b+=e.size),e}function Uk(t,e,r){var n=e.Tc,i=e.Yb;(n||i||e==t.c&&e==t.f)&&(n?n.Yb=i:t.c=i,i?i.Tc=n:t.f=n,t.b-=e.size,r&&(delete t.a[e.id],Qk(t,e))),e.Yb=e.Tc=null}function Qk(t,e){for(var r=t.g.length;r--;)t.g[r].call(t,e.id,e.data,e.size)}function Vk(t,e,r,n){this.key="",this.x=t,this.y=e,this.z=r,this.data=n,this.valid=!0}function Wk(t,e,r,n){return(t-=r)*t+(e-=n)*e}function Xk(t,e,r){return Yk(t,e*e,r||0,0,t.length-1)}function Yk(t,e,r,n,i){var o=0,a=n,s=t[n].x,l=t[n].y,u=t[i].x,c=t[i].y,h=n+1,f=Wk(s,l,u,c);if(f)for(;h<i;){var p=t[h++],A=p.x,d=((A-s)*(u-s)+((p=p.y)-l)*(c-l))/f;(A=0>d?Wk(A,p,s,l):1<d?Wk(A,p,u,c):Wk(A,p,s+d*(u-s),l+d*(c-l)))>o&&(o=A,a=h-1)}else for(;h<i;)(A=Wk(A=(p=t[h++]).x,p=p.y,s,l))>o&&(o=A,a=h-1);return o>=e||0<r&&a-n?(--r,1<a-n?(n=Yk(t,e,r,n,a)).splice(n.length-1,1):n=[t[n]],n=1<i-a?n.concat(Yk(t,e,r,a,i)):n.concat(t.slice(a,i+1))):n=[t[n],t[i]],n}function Zk(t,e,r,n,i,o,a,s){Zk.l.constructor.call(this,e,r,n,null),this.key=t,this.S=s,this.a=i,this.g=o,this.i={},this.zL=a,this.s=Ad(wh.MAX_LINE_WIDTH/2*this.g+1)}function $k(t){return t.S.getInvalidations(nh.SPATIAL)}function al(t){var e,r=$k(t),n=r.a,i=t.c,o=i===n;if(!(o||r.Kj(i)||r.jh(i))){o=t.f;var a=t.i;if(r.Ff(i))for(e=o.length;e--;){var s=o[e];if(s.Db().Ff(i)){o.splice(e,1);var l=l||bl(t,s.$a())}}if(r.kh(i)){for(e=o.length;e--;)if((s=o[e]).Db().kh(i)){var u=1;if((s=a[s.$a()])&&s.a){l=1;break}}u&&o.sort(cl)}if(!l&&r.Rd(i))for(e=o.length;e--;)if(o[e].Db().Rd(i)){var c=1;break}t.u!==i||c||(t.u=n,t.b!==i||l||(t.b=n)),t.c=n,o=!0}return o}function dl(t,e){this.b=t,this.a=e}function bl(t,e){var r=(t=t.i)[e];if(r)return delete t[e],r.a}function el(t){var e,r=$k(t),n=t.c,i=t.f;if(!al(t)){for(e=i.length;e--;){var o=i[e],a=o.Db();(a.Ff(n)||a.jh(n))&&bl(t,o.$a())}t.f=t.S.requestSpatialsByTile(t,!1,!1).sort(cl),t.c=r.a}}function cl(t,e){return oh(t.Oc(),e.Oc(),!1)}u(Kk,Bk),t("H.util.SequentialQueue",Kk),Lk.prototype.next=function(t){return t.length&&Jk()-this.b<this.c?t=t.shift():null},Lk.prototype.a=function(){this.b=Jk()},u(Mk,P),t("H.map.provider.TileProvider",Mk),Mk.getZoomLevelOffset=Nk,Mk.prototype.requestTile=Mk.prototype.Oa,Mk.prototype.cancelTile=Mk.prototype.fc,Mk.prototype.cancelTileByKey=Mk.prototype.je,Mk.prototype.createTileInternal=Mk.prototype.Sb,Mk.prototype.gd=function(t,e,r){return this.uri.concat("_",t,"_",e,"_",r)},Mk.prototype.getTileKey=Mk.prototype.gd,Mk.prototype.af=256,Mk.prototype.tileSize=Mk.prototype.af,t("H.util.ICache",Ok),Ok.prototype.add=function(){},Ok.prototype.add=Ok.prototype.add,Ok.prototype.get=function(){},Ok.prototype.get=Ok.prototype.get,Ok.prototype.nf=function(){},Ok.prototype.drop=Ok.prototype.nf,Ok.prototype.forEach=function(){},Ok.prototype.forEach=Ok.prototype.forEach,Ok.prototype.ka=function(){},Ok.prototype.removeAll=Ok.prototype.ka,Ok.prototype.Wd=function(){},Ok.prototype.registerOnDrop=Ok.prototype.Wd,Ok.prototype.Gg=function(){},Ok.prototype.deRegisterOnDrop=Ok.prototype.Gg,t("H.util.Cache",Pk),Pk.prototype.add=function(t,e,r){var n,i;if(!Dc(r=+r)||0>r)throw new D(this.add,2,r);return t=String(t),(i=!this.filter||this.filter(t,e,r))&&((n=this.a[t])?(n.data!==e&&Qk(this,n),this.b+=r-n.size,n.size=r,n.data=e,Rk(this,n)):this.a[t]=Sk(this,{id:t,data:e,size:r,Yb:null,Tc:null},this.c),Tk(this)),i},Pk.prototype.add=Pk.prototype.add,Pk.prototype.Wd=function(t){if(!Da(t))throw new D(this.Wd,0,t);this.g.push(t)},Pk.prototype.registerOnDrop=Pk.prototype.Wd,Pk.prototype.Gg=function(t){this.g=this.g.filter((function(e){return e!==t}))},Pk.prototype.deRegisterOnDrop=Pk.prototype.Gg,Pk.prototype.get=function(t,e){return(t=e?this.a[t]:Rk(this,this.a[t]))&&t.data},Pk.prototype.get=Pk.prototype.get,Pk.prototype.nf=function(t){var e;(e=this.a[t])&&Uk(this,e,!0)},Pk.prototype.drop=Pk.prototype.nf,Pk.prototype.forEach=function(t,e,r){var n;for(n in this.a){var i=this.a[n];(!r||r(n,i.data,i.size))&&t.call(e,n,i.data,i.size)}},Pk.prototype.forEach=Pk.prototype.forEach,Pk.prototype.ka=function(t){var e;for(e in this.a){var r=this.a[e];(!t||t(e,r.data,r.size))&&Uk(this,this.a[e],!0)}},Pk.prototype.removeAll=Pk.prototype.ka,Pk.prototype.di=function(t){if(!(0<+t))throw new D(Pk.prototype.di,0,t);return this.i=+t,Tk(this),this},Pk.prototype.setMaxSize=Pk.prototype.di,Pk.prototype.qm=function(){return this.i},Pk.prototype.getMaxSize=Pk.prototype.qm,Pk.prototype.Rl=function(){return this.b},Pk.prototype.getCurrentSize=Pk.prototype.Rl,t("H.map.provider.Tile",Vk),t("H.math.simplifyDP",Xk),u(Zk,Vk),t("H.map.provider.SpatialTile",Zk),Zk.prototype.c=Vd,Zk.prototype.u=Vd,Zk.prototype.b=Vd,Zk.prototype.Qd=function(){var t=$k(this),e=t.a,r=this.b,n=r===e;return n||(this.S.xa&&!t.Rd(r)?n=!0:al(this)&&(n=this.b===e)),n},Zk.prototype.isCanvasValid=Zk.prototype.Qd,Object.defineProperty(Zk.prototype,"valid",{get:function(){return this.Qd()},set:jd,configurable:!0}),Zk.prototype.f=hf,Zk.prototype.Na=function(){return this.f},Zk.prototype.getObjects=Zk.prototype.Na,Zk.prototype.Lm=function(){return this.a},Zk.prototype.getTileSize=Zk.prototype.Lm;var fl={};function hl(t,e,r,n,i,o,a,s,l){var u=t.a,c=-a;if(a=o+a,s=s||0,l===B&&(l=u.length),i&&t===Gh)e.fillRect(0,0,o,o);else if(l>s){for(e.beginPath(),o=s;o<l;o++){var h=u[o],f=h.length;if(h===Nh)e.moveTo(c,c),e.lineTo(c,a),e.lineTo(a,a),e.lineTo(a,c);else{var p=h[0];for(e.moveTo(p.x,p.y),s=1;s<f;s++)p=h[s],e.lineTo(p.x,p.y)}r&&e.closePath()}r&&i&&e.fill(t.b!==Ud?"evenodd":"nonzero"),n&&e.stroke()}}function gl(t,e,r){var n;t.strokeStyle=e.strokeColor,t.lineWidth=e.lineWidth*r,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.setLineDash&&(n=e.lineDash)!==hf&&(t.setLineDash(n),t.lineDashOffset=e.lineDashOffset)}function il(t,e){t.fillStyle=e.fillColor}function jl(t,e,r,n,i,o){var a=i*n.width/2,s=(i=i*n.length/2)/2;n=2*i*n.frequency;var l=Dd(Ed(i,2)+Ed(a,2));t=new wk(l,l,t=t.a-l,t),r=r.a;var u,c,h,f,p,A,d,g=Nd/2;for(o=o||0,l=r.length;l-- >o;){var y=0,v=r[l];if(c=u=v.length){var m=v;for(c=m.length,h=0;--c;)h+=m[c].Sa(m[c-1]);c=(m=h)>=n}if(c)for(h=(c=m/((c=wd(zd(m/n),1e3))+1))/2;--u;){for(f=(p=v[u]).Sa(A=v[u-1]);h<=y+f;){var b=p.x+(A.x-p.x)*(d=(h-y)/f);d=p.y+(A.y-p.y)*d,t.kf(b,d)&&(e.save(),e.translate(b,d),e.rotate(-Kd((A.y-p.y)/(p.x-A.x))+(p.x<A.x?g:-g)),e.beginPath(),e.moveTo(-a,-i),e.lineTo(0,i),e.lineTo(a,-i),e.lineTo(0,-s),e.closePath(),e.fill(),e.restore()),h+=c}y+=f}}}Zk.prototype.Ce=function(){var t=this.a+"_"+this.g,e=fl[t];if(!e){e=-this.s;var r=this.a-e;e=fl[t]=new wk(e,e,r,r)}return e},Zk.prototype.getPxClipRect=Zk.prototype.Ce,Zk.prototype.wf=function(){var t=this.Wa;if(!t){var e=this.yf();t=0;var r=this.a;this.z&&(r-=t+=this.Ce().top),t=this.Wa=sg(e.Ie(new G(t,t)),e.Ie(new G(r,r)))}return t},Zk.prototype.getGeoClipRect=Zk.prototype.wf,Zk.prototype.yf=function(){var t=this.v;if(!t){var e=this.a;(t=this.v=new lj(B,e)).Ja(this.z),t.x=this.x*e,t.y=this.y*e}return t},Zk.prototype.getPxProj=Zk.prototype.yf,Zk.prototype.Ta=function(){return this.g},Zk.prototype.getPixelRatio=Zk.prototype.Ta,Zk.prototype.Sf=function(){var t=this.data;return t&&(this.data=null,this.b=Vd),t},Zk.prototype.releaseCanvas=Zk.prototype.Sf,Zk.prototype.Tf=function(){this.i={},delete this.f,this.c=Vd},Zk.prototype.releaseData=Zk.prototype.Tf,Zk.prototype.U=function(t){var e,r,n,i,o=t.getContext("2d"),a=0;if(el(this),this.b<this.c){var s=this.f;if(e=s.length){t.width=t.height=this.a,o.clearRect(0,0,this.a,this.a);var l=this.i;for(r=0;r<e;r++){var u=s[r],c=u.$a();if(i=(n=l[c])?n.b:u.getGeometriesForTile(this)){if(n)u.Db().Rd(this.b)&&(n.a=Fh(u,i)),n=n.a;else{var h;n=Fh(u,i);for(var f=i,p=u.g?2:0,A=f.length;A--;){var d=f[A];if(d!==Gh){var g=d.a;for(h=g.length;h--;)4<(d=g[h]).length&&(g[h]=Xk(d,.6,p))}}this.i[c]=new dl(i,n)}if(n){for(o.save(),f=u.g?this.B:this.T,c=0;c<i.length;c++)f.call(this,u,i[c],u.oa(),o);if(i=u.getLabels(this))for(u=o,c=i.length;c--;)for(f=(p=i[c]).size,u.font=f+"px "+p.font,u.fillStyle=p.color,u.textAlign="center",u.translate(p.x,p.y),u.rotate(p.angle),f=p.lineHeight||1.375*f,p=(A=p.lines).length;p--;)u.fillText(A[p],0,p*f);o.restore()}a|=+n}}}this.data=a?t:null,this.u=this.b=this.c}else this.data&&(a=1);return 0<a},Zk.prototype.render=Zk.prototype.U,Zk.prototype.data=null,Zk.prototype.T=function(t,e,r,n){var i;r.b&&(gl(n,r,this.g),hl(e,n,!1,!0,!1,this.a,this.s)),r.a&&(i=t.c)&&i.Gb&&(il(n,i),jl(this,n,e,i,r.lineWidth))},Zk.prototype.B=function(t,e,r,n){var i,o=r.Gb,a=r.b,s=this.a,l=this.s;if(e===Gh)o&&(il(n,r),n.fillRect(0,0,s,s));else{if(a&&gl(n,r,this.g),r.a&&(i=t.c)){var u=r.lineWidth;i.Gb||(i=null)}(t=e.c)===Ud?((a||o)&&(il(n,r),hl(e,n,!0,a,o,s,this.s)),i&&(il(n,i),jl(this,n,e,i,u,0))):(o&&(il(n,r),hl(e,n,!0,!1,o,s,l,0,t)),a&&hl(e,n,!1,a,!1,s,l,t),i&&(il(n,i),jl(this,n,e,i,u,t)))}};var kl=[];function ll(t,e){var r;ll.l.constructor.call(this,e),this.v=t,this.T=t=e.pixelRatio,this.tileSize=r=1<<yd(Wd((e.tileSize||256)*t)),this.L=Nk(r,t),this.rh=A(this.rh,this),this.Hh=A(this.Hh,this),this.sh=A(this.sh,this),this.qh=A(this.qh,this),this.s=A(this.s,this),this.v.addEventListener(P.prototype.A.wa,this.s,!1,this),this.g=[],this.i=new Pk(e.tileCacheSize||256,this.rh),this.m=new Pk(e.dataCacheSize||512,this.Hh),this.B=new Kk(20,this.sh),this.b={},this.u=Jk()}function wk(t,e,r,n){this.left=+t,this.top=+e,this.right=+r,this.bottom=+n}function ml(t,e){return new wk(t.x,t.y,e.x,e.y)}function nl(t,e){if(e=e||{},!t)throw new D(nl,0,t);this.tileSize=t.tileSize,this.a={},oj.call(this,{min:void 0!==e.min?e.min:t.min,max:void 0!==e.max?e.max:t.max,minWorldSize:this.tileSize,projection:e.vk,dark:e.dark,provider:t})}function ol(t,e,r,n,i){n=zd(n);var o=Ed(2,n),a=e.left,s=e.top,l=e.right;r=l+(r?o+(l===e.left?0:1):1);var u=e.bottom,c=[];if(i)var h=a+(1+l-a)/2+i.x/t.tileSize-.5,f=s+(1+u-s)/2+i.y/t.tileSize-.5;for(;a<r;){for(s=e.top;s<=u;)t=a%o,c.push([t,s,n,i?Bd(h-a)+Bd(f-s):0]),s++;a++}return c}function zk(t,e,r){r=zd(r),t.pixelProjection.Ja(r),e=t.ue(e);var n=t.Od(e,r);return ol(t,n,e.left>e.right,r)}function pl(t,e){return e[3]-t[3]}function ql(t,e){nl.call(this,t,e)}function rl(t,e){(e=e?Va(e):{}).tileSize=e.tileSize||256,e.pixelRatio=e.pixelRatio||Te(),e.max=24,this.a=new ll(t,e),this.b=new ql(this.a),e.minWorldSize=this.a.tileSize,e.provider=t,rl.l.constructor.call(this,e),this.tileSize=this.b.tileSize,this.c=A(this.c,this),this.a.addEventListener(this.a.A.wa,this.c),t.addEventListener(t.A.wa,this.c)}Zk.prototype.Ba=function(t,e,r){for(var n,i,o,a,s,l,u,c=this.f,h=c.length,f=hf,p=this.g;h--;)if((i=c[h]).oc(!0)&&(o=this.i[i.$a()])&&(a=o.b)){for(l="none"!==(n=i.oa()).fillColor&&i.g,u="none"===n.strokeColor?0:n.lineWidth*p,n=a.length;n--;){var A;if(s=a[n],!(A=l&&s===Gh)&&(A=l||u)){var d;A=t;var g=e,y=l,v=u,m=s.b,b=s.c,_=b!==Ud,w=s.a,x=w.length,E=0,B=0,C=!1;for(s=0;s<x;s++){var S=w[s],k=s>=b,T=!k&&s>=m;if(S===Nh&&y)T?E++:B++;else{var N=S.length;for(kl.length=2*N,d=0;d<N;d++){var L=S[d];kl[2*d]=L.x,kl[2*d+1]=L.y}if(d=y&&!k,k=_&&!k?0:v,d||k){if((k=ce(A,g,kl,k,d))===be.EDGE||k===be.VERTEX){C=!0;break}if(k===be.SURFACE)if(T)E++;else if(B++,m===Ud)break}}}A=C||0<B&&!(E%2)}if(A){f===hf&&(f=[]),f.push(i);break}}if(r&&f.length)break}return f},u(ll,Mk),ll.prototype.s=function(t){(t=t.target).type===nh.SPATIAL&&this.Ra(t)},ll.prototype.Oa=function(t,e,r,n){var i,o=this.getTileKey(t,e,r);if(i=this.i.get(o,n)){if(n||i.Qd())return i;n||this.i.nf(o)}if((i=this.m.get(o,n))&&(n||al(i)))return t=this.g.pop()||document.createElement("canvas"),i.U(t)||this.g.push(t),this.i.add(o,i,1),i;n||((i=this.b[o])?i.count++:((i=this.B.push([o,t,e,r],this.qh)).count=1,this.b[o]=i))},ll.prototype.requestTile=ll.prototype.Oa,ll.prototype.Sb=function(){},ll.prototype.createTileInternal=ll.prototype.Sb,ll.prototype.fc=function(t,e,r){this.je(this.getTileKey(t,e,r))},ll.prototype.cancelTile=ll.prototype.fc,ll.prototype.je=function(t){var e;(e=this.b[t])&&(e.count--,e.count||(e.cancel(),delete this.b[t]))},ll.prototype.cancelTileByKey=ll.prototype.je,p=ll.prototype,p.sh=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3];n=(r=this.i.get(r)||new Zk(r,n,i,o,this.tileSize,this.T,o+this.L,this.v)).data||this.g.pop()||document.createElement("canvas"),r.U(n)||this.g.push(n),e.push(r),t.done(r)},p.qh=function(t,e){t=t.data[0],e&&this.i.add(t,e,1),delete this.b[t],this.Ra()},p.rh=function(t,e){e.data&&this.g.push(e.Sf()),this.m.add(t,e,1)},p.Hh=function(t,e){e.Tf()},p.o=function(){for(var t in this.b)this.b[t].cancel();this.i.ka(),this.m.ka(),this.g.length=0,ll.l.o.call(this)},t("H.math.Rect",wk),wk.prototype.set=wk,wk.prototype.set=wk.prototype.set,wk.prototype.Fb=function(){return this.b||(this.b=new G(this.left,this.top))},wk.prototype.getTopLeft=wk.prototype.Fb,wk.prototype.Bb=function(){return this.a||(this.a=new G(this.right,this.bottom))},wk.prototype.getBottomRight=wk.prototype.Bb,wk.prototype.kf=function(t,e){return this.left<=t&&this.right>=t&&this.top<=e&&this.bottom>=e},wk.prototype.containsXY=wk.prototype.kf,wk.fromPoints=ml,wk.prototype.clone=function(){return new wk(this.left,this.top,this.right,this.bottom)},wk.prototype.clone=wk.prototype.clone,u(nl,oj),t("H.map.layer.BaseTileLayer",nl),nl.prototype.ue=function(t,e){var r=this.pixelProjection;if(!C(t,K))throw new D(this.ue,0,t);if(!E(e)){var n=r.Cj();r.Ja(e)}return t=ml(r.eb(t.Fb()),r.eb(t.Bb())),!E(n)&&r.Ja(n),t},nl.prototype.geoRectToRect=nl.prototype.ue,nl.prototype.Od=function(t,e){var r=Ed(2,zd(e)),n=this.tileSize;if(!C(t,wk))throw new D(this.Od,0,t);if(E(e=+e))throw new D(this.Od,1,e);(e=zd(t.left/n))===r&&--e;var i=zd(t.right/n);return i===r&&--i,new wk(e,Zd(zd(t.top/n),0,r-1),i,Zd(zd(t.bottom/n),0,r-1))},nl.prototype.getTileBounds=nl.prototype.Od,nl.prototype.Oa=function(t,e,r,n){return this.ja.requestTile(t,e,r,n)},nl.prototype.requestTile=nl.prototype.Oa,nl.prototype.fc=function(t,e,r){this.ja.cancelTile(t,e,r)},nl.prototype.cancelTile=nl.prototype.fc,nl.prototype.la=function(t,e){return this.ja.getCopyrights?this.ja.getCopyrights(t,e):null},nl.prototype.getCopyrights=nl.prototype.la,nl.prototype.Be=function(t,e,r,n,i,o){var a,s,l=[],u=this.ja;o=null!=o?o:"__default__";var c=u.requestTile;if(!C(t,wk))throw new D(this.Be,0,t);if(E(r=+r))throw new D(this.Be,1,r);if(n||(a={}),t=(e=ol(this,t,e,r,i)).length)for(n||e.sort(pl),r=t;r--;)i=e[r],n||(a[u.gd.apply(u,i)]=!0),i[3]=+n,(s=c.apply(u,i))&&l.push(s);if(!n){var h;for(h in n=a,a=this.a[o]||{})a.hasOwnProperty(h)&&a[h]&&!n[h]&&this.ja.cancelTileByKey(h);this.a[o]=n}return{total:t,tiles:l}},nl.prototype.getProviderTiles=nl.prototype.Be,u(ql,nl),t("H.map.layer.TileLayer",ql),ql.prototype.pd=function(t,e,r,n,i){if(!C(t,K))throw new D(this.pd,0,t);if(E(e=+e))throw new D(this.pd,1,e);e=zd(e),this.pixelProjection.Ja(e),t=this.ue(t);var o=this.Od(t,e);return this.Be(o,t.left>t.right,e,r,n,i)},ql.prototype.requestTiles=ql.prototype.pd,u(rl,oj),t("H.map.layer.ObjectLayer",rl),rl.prototype.c=function(t){t.currentTarget!==this.a&&t.target.type===nh.SPATIAL||this.Ra()};var sl={markers:hf,total:0};rl.prototype.wc=function(t,e,r){var n,i=this.ja;return i.providesMarkers()&&(n=i.requestMarkers(t,e,!0,r)).length?{markers:n,total:n.length}:sl},rl.prototype.requestMarkers=rl.prototype.wc,rl.prototype.vc=function(t,e,r){var n,i=this.ja;return i.providesDomMarkers()&&(n=i.requestDomMarkers(t,e,!0,r)).length?{markers:n,total:n.length}:sl},rl.prototype.requestDomMarkers=rl.prototype.vc;var tl={tiles:hf,total:0};rl.prototype.pd=function(t,e,r,n){if(this.ja.providesSpatials()){var i=this.b.pd(t,e,r,n);r||(r=this.a,33<(i=Jk())-r.u&&(Dk(r.B),r.u=i),i=this.b.pd(t,e,!0,n))}else i=tl;return i},rl.prototype.requestTiles=rl.prototype.pd,rl.prototype.Oa=function(t,e,r,n){return this.b.Oa(t,e,r,n)},rl.prototype.requestTile=rl.prototype.Oa,rl.prototype.fc=function(t,e,r){this.b.fc(t,e,r)},rl.prototype.cancelTile=rl.prototype.fc;var ul={overlays:hf,total:0};function R(t){vc(this,R),R.l.constructor.call(this,t),this.Pb=new vl,this.Rb=A(this.Rb,this),this.T=wl,this.createTileInternal=this.Sb.bind(this)}rl.prototype.od=function(t,e,r){var n=this.ja,i=ul;return n.providesOverlays&&n.providesOverlays()&&(e=(t=n.requestOverlays(t,e,!0,r)).length)&&(i={overlays:t,total:e}),i},rl.prototype.requestOverlays=rl.prototype.od,rl.prototype.o=function(){this.a.C(),this.b.C(),this.ja.dispose(),rl.l.o.call(this)},u(R,Mk),t("H.map.provider.RemoteTileProvider",R),R.prototype.Ed=function(){return 1},R.prototype.getEntryWeight=R.prototype.Ed;var wl=new Pk(65536),xl={},yl={};function Ak(t,e,r,n,i,o){return n=~~n,t.requestInternal(e,r,n,(function(a,s){t.g().put(t.gd(e,r,n),{raw:s&&s.raw||a,timestamp:x.Date.now()},i,o)}),o,0)}function Al(t){delete xl[t],delete yl[t]}function zl(t){for(var e in xl)t.Rb(e)&&t.cancelTileByKey(e)}R.prototype.Cb=function(){return this.T},R.prototype.getCache=R.prototype.Cb,R.prototype.m=ba(3),R.prototype.Rb=function(t){var e=this.uri;return!t.indexOf(e)&&"_"===t.charAt(e.length)},R.prototype.cacheFilter=R.prototype.Rb,R.prototype.na=function(t,e){e.valid=!1},R.prototype.reload=function(t){var e=this.getCache();t?e.ka(this.Rb):e.forEach(this.na,this,this.Rb),zl(this),this.Ra(this,{isReload:!0})},R.prototype.reload=R.prototype.reload,R.prototype.s=function(){return!1},R.prototype.MAX_STORE_TIME=1/0,R.prototype.g=function(){return this.Pb},R.prototype.L=function(t,e){e(t)},R.prototype.requestInternal=R.prototype.J,R.prototype.Oa=function(t,e,r,n){var i=this,o=this.getCache();if(E(t=+t))throw new D(this.Oa,0,t);if(E(e=+e))throw new D(this.Oa,0,e);if(E(r=+r))throw new D(this.Oa,0,r);r=~~r;var a=this.getTileKey(t,e,r);return(o=o.get(a))&&o.valid||n||xl[a]||(o=B,this.requestTileAsPromise(t,e,r,n).then((function(t){i.Ra(t)}),jd)),o},R.prototype.requestTile=R.prototype.Oa,R.prototype.Ck=function(t,e,r,n){var i,o,a=this,s=this.getCache(),l=this.getTileKey(t,e,r),u=this.g();return yl[l]?yl[l]:(yl[l]=i=new Pb((function(i,c){function h(o){var h,f=0,p=function(n,o){(h=a.createTileInternal(t,e,r,n,o)).key=l,s.add(l,h,a.Ed(n)),i(h),Al(l)};o&&(f=x.Date.now()-o.timestamp),o&&f<a.MAX_STORE_TIME?a.L(o.raw,p):(0<f&&u.remove(l),(h=s.get(l))&&h.valid||n?i(h||null):xl[l]=a.requestInternal(t,e,r,p,c))}o=u.get(l,h,h)})),xl[l]||(xl[l]=o),i.then((function(){Al(l)}),(function(){Al(l)})),i)},R.prototype.requestTileAsPromise=R.prototype.Ck,R.prototype.Bk=function(t,e){var r=this,n=t.id,i=t.tile.coords;return new Pb((function(t,o){r.Ck(i.x,i.y,i.z,e).then((function(e){for(var r,i=y,o=(e=e.Na?e.Na():e.data).length;o--;)if((r=e[o]).$a()===n){i=r;break}t(i)}),o)}))},R.prototype.requestObjectAsPromise=R.prototype.Bk;var Bl={cancel:jd};function vl(){}function Ck(t){if(Ck.l.constructor.call(this,t),t&&(this.v={crossOrigin:t.crossOrigin||"anonymous",headers:t.headers||{}},this.u=t.getURL),!Da(this.u))throw new D(Ck,0,"getURL");if(jk(this,t.opacity),this.b=x.URL||x.webkitURL,!(t="anonymous"===(t=this.v.crossOrigin)||"use-credentials"===t)){t=this.u(0,0,0);var e=window.location,r=document.createElement("a");r.href=t,t=r.hostname===e.hostname&&r.port===e.port&&r.protocol===e.protocol}(this.R=t&&!!uf.arraybuffer&&!!this.b)&&this.Cb().Wd(A(this.Y,this))}R.prototype.Sb=function(t,e,r,n){return new Vk(t,e,r,n)},R.prototype.createTileInternal=R.prototype.Sb,R.prototype.je=function(t){var e=xl[t];e&&(e.cancel(),Al(t))},R.prototype.cancelTileByKey=R.prototype.je,R.prototype.fc=function(t,e,r){this.cancelTileByKey(this.getTileKey(t,e,r))},R.prototype.cancelTile=R.prototype.fc,R.prototype.o=function(){R.l.o.call(this),this.getCache().ka(this.Rb),zl(this)},R.NullStorage=vl,vl.prototype.get=function(t,e){return e(),Bl},vl.prototype.get=vl.prototype.get,vl.prototype.put=function(t,e,r){r&&r()},vl.prototype.put=vl.prototype.put,vl.prototype.clear=function(t){t&&t()},vl.prototype.clear=vl.prototype.clear,vl.prototype.remove=function(t,e){e&&e()},vl.prototype.remove=vl.prototype.remove,u(Ck,R),t("H.map.provider.ImageTileProvider",Ck),Ck.prototype.ac=function(t){jk(this,t)},Ck.prototype.setOpacity=Ck.prototype.ac,Ck.prototype.Nc=function(){return this.f},Ck.prototype.getOpacity=Ck.prototype.Nc,Ck.prototype.Me=ff,Ck.prototype.providesRasters=Ck.prototype.Me,Ck.prototype.Ed=function(){return this.tileSize},Ck.prototype.getEntryWeight=Ck.prototype.Ed,Ck.prototype.J=function(t,e,r,n,i,o){var a,s=this,l=this.u(t,e,r);if(t=Bl,l){var u=x.setTimeout((function(){s.R?(a=new tf("arraybuffer",l,o,s.v)).then((function(t){return t.blob()})).then((function(t){var e=new Image;e.onload=A(n,null,e,{raw:t}),e.onerror=A(i,null,"bad url");try{e.src=s.b.createObjectURL(t)}catch(r){}}),i):(a=new tf("image",l,o,s.v)).then(n,i)}),150);t={cancel:function(){a?a.cancel():x.clearTimeout(u)}}}else n(null);return t},Ck.prototype.requestInternal=Ck.prototype.J,Ck.prototype.L=function(t,e){var r=new Image;r.onload=function(){e(this)},r.src=this.b.createObjectURL(t)},Ck.prototype.Y=function(t,e){(t=e.data)&&t instanceof HTMLImageElement&&this.b.revokeObjectURL(t.src)},t("H.util.events.listenOnce",Ee),t("H.util.events.dispatchEvent",(function(t,e){return t.dispatchEvent(e)})),t("H.util.events.fireListeners",(function(t,e,r,n){return ne(t)?t.dd(e,r,n):Ne(t,e,r,n)})),t("H.util.events.listen",De),t("H.util.events.unlisten",Le);var Cl=Oe;function Dl(t,e,r,n){var i=new wk(0,0,0,0);if(Dl.l.constructor.call(this),!t)throw new D(Dl,0,t);if(!e)throw new D(Dl,1,e);if(!r)throw new D(Dl,2,r);if("object"!==typeof n)throw new D(Dl,3,n+" is not an object");if("number"!==typeof n.pixelRatio)throw new D(Dl,3,n.pixelRatio+" is not a number");this.ma=n.pixelRatio,this.zoom=0,this.cb=Cd(this.ma)/Md,this.b=new lj,this.xa={1:i.clone(),2:i.clone(),4:i.clone()},this.m=new G(.5,.5),this.f=t,El(this,this.ma),this.ec=A(this.ec,this),this.Vb=A(this.Vb,this),this.ob=A(this.ob,this),t.startInteraction=this.ec,t.interaction=this.Vb,t.endInteraction=this.ob,t.addEventListener(t.A.wa,this.R,!1,this),this.getCapabilities=this.getCapabilities,this.capture=this.capture,this.zoomAt=this.td,this.relaunch=this.ea,this.dispose=this.C,this.screenToGeo=this.Pa,this.geoToScreen=this.Aa,this.screenToLookAtData=this.$f,this.v=e,this.dc=A(this.dc,this),this.control=A(this.control,this),this.nb=A(this.nb,this),e.startControl=this.dc,e.control=this.control,e.endControl=this.nb,e.addEventListener(e.A.wa,this.yg,!1,this),this.c=r,this.Lf=A(this.Lf,this),this.De=A(this.De,this),this.Ee=A(this.Ee,this),this.Kf=A(this.Kf,this),r.addEventListener(oj.prototype.A.wa,this.Lf,!1,this),r.addEventListener(r.A.ce,this.De,!1,this),r.addEventListener(r.A.ee,this.Ee,!1,this),r.addEventListener(r.A.fe,this.Kf,!1,this)}function El(t,e){var r=t.f,n=r.width,i=r.height,o=r.padding,a=o.top,s=o.left,l=o.bottom;o=o.right,r=r.margin;var u=-(n+s-o)/2<<0,c=-(i+a-l)/2<<0;n+=u,i+=c,(t=t.xa)[1].set((u-r)*e,(c-r)*e,(n+r)*e,(i+r)*e),t[2].set(u*e,c*e,n*e,i*e),t[4].set((u+s)*e,(c+a)*e,(n-o)*e,(i-l)*e)}function Gl(t,e){t.style.transition="opacity 1.5s",Ee(t,"transitionend",e,!1),t.style.opacity=0}Oe=function(t,e){var r,n,i=!0,o=e[e.currentTarget===e.target?"AT_TARGET":t.capture?"CAPTURING_PHASE":(r=!0,"BUBBLING_PHASE")];return(!r||"pointerenter"!==(n=e.type)&&"pointerleave"!==n)&&(e.eventPhase=o,i=Cl(t,e),r&&t.src&&t.src.Eb&&null===t.src.Eb()&&delete e.eventPhase),i},u(Dl,F),t("H.map.render.RenderEngine",Dl),Dl.prototype.td=function(){},Dl.prototype.R=function(){El(this,this.ma)},Dl.prototype.o=function(){var t=this.f,e=this.v,r=this.c;t.removeEventListener(t.A.wa,this.R,!1,this),t.startInteraction===this.ec&&(t.startInteraction=vk.prototype.ec),t.interaction===this.Vb&&(t.interaction=vk.prototype.Vb),t.endInteraction===this.ob&&(t.endInteraction=vk.prototype.ob),e.removeEventListener(e.A.wa,this.yg,!1,this),e.startControl===this.dc&&(e.startControl=Fl.prototype.dc),e.control===this.control&&(e.control=Fl.prototype.control),e.endControl===this.nb&&(e.endControl=Fl.prototype.nb),r.removeEventListener(oj.prototype.A.wa,this.Lf,!1,this),r.removeEventListener(r.A.ce,this.De,!1,this),r.removeEventListener(r.A.ee,this.Ee,!1,this),r.removeEventListener(r.A.fe,this.Kf,!1,this)},Dl.prototype.Yh=function(t){this.og=t},Dl.prototype.setAnimationCallback=Dl.prototype.Yh,Dl.prototype.Th=function(){this.og=void 0},Dl.prototype.resetAnimationCallback=Dl.prototype.Th,Dl.prototype.control=function(){},Dl.prototype.capture=function(){return Zb(Error("not implemented"))};var Hl={ZOOM:1,HEADING:2,TILT:4,INCLINE:8,COORD:16};function Kl(t,e){return e.tilt=Ll(t,e.tilt),e.heading=Ml(t,e.heading),e.incline=t.getCapabilities().lookAt.incline.min,e}function Jl(t,e){var r=t.getCapabilities().lookAt.zoom;return Zd(e,xd(r.min,t.qg),wd(r.max,t.pg))}function Ll(t,e){return Zd(e,(t=t.getCapabilities().lookAt.tilt).min,t.max)}function Ml(t,e){return Zd((e%360+360)%360,(t=t.getCapabilities().lookAt.heading).min,t.max)}function Il(t,e,r){(r=r?e.addEventListener:e.removeEventListener).call(e,e.A.Ei,t.Jh,!1,t),r.call(e,e.A.Di,t.Jh,!1,t)}Dl.InteractionModifiers=Hl,p=Dl.prototype,p.A={Gi:"render"},p.Lf=function(t){this.ik(t),this.ea()},p.De=function(t){this.Ge(t.idx,t.added)},p.Ee=function(t){this.Ih(t.idx,t.removed,t.type===this.c.A.fe)},p.Kf=function(t){t.removed&&this.Ee(t),this.De(t)},p.ik=jd,p.Ge=function(t,e){this.eh(t,e),0===t&&this.wb(),C(e,oj)&&Il(this,e,!0),this.Yd(),this.ea()},p.wb=function(){var t=this.c.Ha();if(0<t.length){var e=t[0].max;this.qg=t[0].min,this.pg=e}else e=(t=this.getCapabilities().lookAt.zoom).max,this.qg=t.min,this.pg=e;(t=Jl(this,this.zoom))!==this.zoom&&(this.zoom=t,this.b.Ja(t),this.Va())},p.Va=function(t){this.T=this.fb(),t&&(this.T.position=t),this.T.zoom=this.zoom-this.cb,this.T.position.alt=0},p.Zk=0,p.heading=180,p.fb=function(){return Kl(this,{position:this.b.projection.Qf(this.m),zoom:this.zoom,tilt:this.Zk,heading:this.heading})},p.eh=jd,p.Ih=jd,p.Xn=function(t,e){this.B={before:t,after:e}},Dl.prototype.setOnRenderCallbacks=Dl.prototype.Xn;var Nl={P2D:0,WEBGL:1,HARP:2};Dl.EngineType=Nl;var Ol={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:85},incline:{min:0,max:0},heading:{min:0,max:360}},interaction:{ZOOM:Hl.ZOOM,COORD:Hl.COORD},capture:!0};function Pl(t){var e,r=this,n=x.H.gl;Pl.l.constructor.call(this),this.a=e=n.Scene.create(x.URL.createObjectURL(pf(JSON.stringify(Ql))),{viewport:t.viewport,container:t.gc,disableRenderLoop:!0,devicePixelRatio:t.devicePixelRatio,logLevel:"error"}),t.Gn&&e.subscribe({load:t.Gn}),e.subscribe({view_complete:function(){r.Vh=!0,t.kk()}});var i=e.requestRedraw;e.requestRedraw=function(){i.apply(e),t.kk()},this.Wh=A(this.Wh,this),this.Vf=A(this.Vf,this),this.f=0,this.c={},this.b={}}function Rl(t){var e;for(e in t=t.a.sources){var r=t[e];if(r.hasPendingCommands&&r.hasPendingCommands())return!0}return x.H.gl.Task.hasPendingTasks()}function Sl(t){t.Vh=!1,t.a.resetViewComplete()}function Tl(t){return t.a.view}function Ul(t,e){function r(){var r,i,o,a,s,l=e.Ha(),u={},c={},h=++t.f;for(Xh(c,Ql),i=0;i<l.length;i++){var f=l[i];if(r=f.da()){var p=r.ab();if(p.getState()===Uh.READY){var A=p.Kc();if(!Ua(A)){for(o in delete A.cameras,delete A.camera,u[i]=A=ii(A,i),!C(f,rl)&&A.sources&&ji(A,r.uid),A.sources){var d=A.sources[o];d.max_zoom=wd(r.max,Ol.lookAt.zoom.max),d.max_display_zoom=f.max,d.min_display_zoom=f.min,(s=r.tileSize)&&(2<=n&&256<s&&r instanceof Ck&&(s/=2),d.tile_size=s)}(a=p.Ab())&&ki(A,a),Xh(c,A)}}}}return Xh(c.layers.skybox.draw.skybox.color,c.scene.sky),t.a.config=c,t.a.updateConfig().then((function(){var e,r,n={};if(h!==t.f)return!1;for(r in t.f=0,u){f=l[+r];var i=u[r].sources;for(e in i)(i=t.a.sources[e])&&(n[e]=i,i.initialize&&f.getProvider()&&i.initialize(f.getProvider(),t.Wh,t.a.getWorkers().length,i.tiled?B:t.a.tile_manager.getWorkerForTile(y,i)))}for(e in t.c)!n[e]&&t.c[e].dispose&&t.c[e].dispose();return t.c=n,!0}))}var n=t.a.pixelRatio();t.a.initialized?r():t.a.load(y,{blocking:!1}).then(r)}function Vl(t,e){var r=t.a.tile_manager;r.removeTiles(t.Vf),r.updateTilesForView(),e&&r.removeCachedTiles(t.Vf),Sl(t),t.b={}}function Wl(t,e,r,n){t.a.getFeatureAt(e,r,n),t.a.update()}function Xl(t){return t.a.screenshot(void 0).then((function(t){return new Pb((function(e,r){new Pj(URL.createObjectURL(t.blob),(function(t,n){1===t?e(n.getData()):r()}),!1)}))}))}t("H.map.render.webgl.capabilities",Ol),u(Pl,nd),p=Pl.prototype,p.Vh=!1,p.U=function(){var t=x.H.gl.Task;return this.a.immediateRedraw(),t.setState({user_moving_view:this.a.view.user_input_active}),t.processAll(),this.Vh&&!this.a.dirty&&!this.a.building&&!Rl(this)&&!Object.keys(this.b).length},p.Wh=function(t,e,r){var n=this,i=this.a.sources[t],o=r&&r.isReload;e?!0!==this.b[t]&&(this.b[t]||(this.b[t]={Yk:{},Mi:[]}),C(e,Vk)?this.b[t].Yk[e.x+"/"+e.y+"/"+e.z]=!0:(e=e.boundingBox,this.b[t].Mi.push(new K(e[0],e[1],e[2],e[3])))):this.b[t]=!0,i&&i.has_volatile_data?Vl(this,o):(x.clearTimeout(this.g),this.g=x.setTimeout((function(){return Vl(n,o)}),100))},p.Vf=function(t){var e=!1,r=this.b[t.source.name],n=x.H.gl;if(r)if(!0===r)e=!0;else{var i=n.Tile.coord(n.Geo.wrapTile(t.coords));if(!(e=!!r.Yk[i.key])){var o=n.Geo.getTileBoundingBox(i,t.source.tile_size,wh.MAX_LINE_WIDTH/2);o=sg(o.getTopLeft(),o.getBottomRight()),e=r.Mi.some((function(t){return t.hd(o,!0)||o.ad(t.Za(),!0)}))}}return e},p.Kc=function(){return this.a.config},p.Ta=function(){return this.a.pixelRatio()},p.o=function(){var t=this.c;Pl.l.o.call(this),this.a.destroy(),this.b={},t&&Object.keys(t).forEach((function(e){t[e].dispose()})),x.clearTimeout(this.g),delete this.c,delete this.a},Pl.prototype.disposeInternal=Pl.prototype.o;var Ql={scene:{background:{color:"#FFFFFF"},sky:{zenith:"#347BC0",horizon:"#EDF2F9",fog:"#FFFFFF"}},lights:{default_light:{type:"directional",name:"default_light",visible:!0}},camera:{type:"perspective"},styles:{},fonts:{},sources:{skybox:{type:"SkyBox"}},layers:{skybox:{data:{source:"skybox"},draw:{skybox:{color:{}}}}},global:{}},lk={FEATURE:1,SOURCE:2,PROVIDER:3};function Yl(t){return t}function Zl(t){return-t*(t-2)}function $l(t){return 1-Math.sqrt(1-t*t)}function am(t){return Dd(2*t-t*t)}function bm(t){return 1-Math.cos(t*Math.PI/2)}function cm(t){return Math.sin(t*Math.PI/2)}function dm(t,e){this.a={tilt:em(t.tilt,e.tilt),heading:em(t.heading,e.heading),zoom:e.zoom-t.zoom};var r=this.b=ng(t.position),n=e.position;t=n.lat*Sd;var i=r.lat*Sd;n=n.lng*Sd-r.lng*Sd,r=Gd(n)*Id(t),t=Id(i)*Gd(t)-Gd(i)*Id(t)*Id(n),t=Math.atan2(r,t),this.i=(0<=t?t:Qd+t)*Td,this.c=this.b.Sa(e.position),e=this.a.zoom,this.g=0===e?fm:Object.assign({},fm,{zoom:0>e?am:$l,position:0>e?bm:cm}),this.f=Object.assign({},{tilt:0,heading:0,zoom:0})}function em(t,e){return-180<(t=e-t)&&180>=t?t:180<t?t-360:t+360}t("H.map.provider.PickingMode",lk),t("H.util.animation.ease.LINEAR",Yl),t("H.util.animation.ease.EASE_IN_QUAD",(function(t){return t*t})),t("H.util.animation.ease.EASE_OUT_QUAD",Zl),t("H.util.animation.ease.EASE_IN_OUT_QUINT",(function(t){return 1>(t*=2)?Ed(t,5)/2:Ed(t-=2,5)/2+1})),t("H.util.animation.ease.EASE_OUT_CIRC",am);var fm={tilt:Yl,heading:Yl,zoom:Yl,position:Yl};function gm(t,e){if(E(this.x=+t))throw new D(gm,0,t);if(E(this.y=+e))throw new D(gm,1,e)}function hm(t){return Dd(t.a(t))}function im(t){t=t||jf,this.Wa=uc(t.Bn)?t.Bn:3,this.S=uc(t.zn)?t.zn:300,this.u=uc(t.mo)?t.mo:3,this.v=uc(t.ho)?t.ho:50,this.c=[],this.clear()}function lm(t,e){t.g^=t.g&e}gm.prototype.add=function(t){return new gm(this.x+t.x,this.y+t.y)},gm.prototype.a=function(t){if(!C(t,gm))throw new D(this.a,0,t);return(t=this.b(t)).x+t.y},gm.prototype.b=function(t){if(!C(t,gm))throw new D(this.b,0,t);return new gm(this.x*t.x,this.y*t.y)},gm.prototype.Ja=function(t){return new gm(this.x*t,this.y*t)},t("H.map.render.InteractionUtils",im),im.prototype.cn=function(){return this.b},im.prototype.isGestureDetected=im.prototype.cn,im.prototype.start=function(t,e){var r=Hl.HEADING,n=Hl.TILT;this.m&&this.clear(),this.g=t,this.j=!!e,this.m=!0,this.b=!(t&(r|n))||t===r||t===n},im.prototype.start=im.prototype.start,im.prototype.store=function(t,e,r,n,i){var o=!1;if(this.m){if(o=(t=new jm(t,e,r,n,i)).c,this.s=this.a,this.a=t,this.f){if(this.i=!0,o){e=this.g;var a=this.b;if(!a&&this.i){i=Hl.HEADING;var s=Hl.TILT;r=Hl.COORD,n=Hl.ZOOM;var l=e&(r|s)?this.Jd(!0):km,u=e&n?this.rf(!0):1,c=e&i?Bd(this.Og(!0)):0,h=Bd(l.x),f=Bd(l.y);l=10<h||10<f,h=10<f&&f>3*h,u=.8>u||1.2<u,c=7<c,e&s&&(c||u||l&&!h?lm(this,s):h&&(lm(this,~s>>>0),a=!0)),!a&&e&i&&e&(r|n)&&(u||l?(lm(this,i),a=!0):c&&(lm(this,s),a=!0)),this.b=a}}}else this.f=t,o||(this.b=!0);this.j&&this.c.push(t)}return o},im.prototype.store=im.prototype.store,im.prototype.clear=function(){this.c.length=0,this.m=this.j=this.i=this.b=!1,this.f=this.s=this.a=void 0},im.prototype.clear=im.prototype.clear,im.prototype.sc=function(t){return 0<(this.g&t)},im.prototype.isModifierEnabled=im.prototype.sc,im.prototype.qa=function(){return this.m},im.prototype.isRunning=im.prototype.qa;var km=pc(new gm(0,0));function jm(t,e,r,n,i){this.a=new G(t,e),r!==B&&(this.b=new G(r,n),this.c=!0),this.timestamp=i!==B?i:Jk()}function nm(t){var e=t.a;return(t=t.b)?new G(e.x-(e.x-t.x)/2,e.y-(e.y-t.y)/2):B}function pm(t,e){var r=t.a;return(t=t.b)&&t.Sa(e)<r.Sa(e)?t:r}function mm(t,e){var r=t.b,n=e.b;return n&&r?(e=nm(e),t=nm(t)):r?t=pm(t,e=e.a):n?e=pm(e,t=t.a):(e=e.a,t=t.a),new gm(e.x-t.x,e.y-t.y)}function om(t){var e=t.b;return e?t.a.Sa(e):0}function qm(){F.call(this),this.reset()}function sm(t){sm.l.constructor.call(this,qm.prototype.A.ng),this.b=t}function tm(t){return x.Object.create(t.f)}function rm(t,e,r,n,i,o){this.a=t,this.b=e,this.c=r,this.f=n,this.g=i,this.i=o}function um(t,e,r,n){um.l.constructor.call(this),this.gc=t,this.ma=n,this.a=t.appendChild(this.createElement(t.ownerDocument)),this.Ue(e,r)}function vm(t,e,r,n,i,o){var a=i||"2d";vm.l.constructor.apply(this,arguments),this.b=this.a.getContext(a,o),this.c="2d"===a,this.g=a,this.qn=o}function wm(t){this.bb=t}function xm(t){var e="dom";xm.l.constructor.call(this,t),C(this.bb,ym)&&(e="2d"===t.Dd()?"2d":"webgl"),this.a=e}function zm(t,e,r,n,i){if(!Da(t.Yh)||!Da(t.Th))throw new D(zm,0,t);if(this.b=t,!Da(this.j=e))throw new D(zm,1,e);if(E(this.i=+r))throw new D(zm,2,r);if(!Da(this.g=n)&&null!=n)throw new D(zm,3,n);if(!Da(this.c=i)&&null!=i)throw new D(zm,4,i);this.id=(new cf).next(),this.a=!1}function Am(t,e){Am.l.constructor.call(this,t),this.ic=!(!e||!e.ic),this.f={}}im.prototype.kc=function(){var t;if(this.j){var e=this.c,r=e.length,n=0;for(t=new gm(0,0);--r&&n<this.u;)t=t.add(mm(e[r-1],e[r])),n++}else t=this.Jd();return 0!==(r=hm(e=t))?new gm(e.x/r,e.y/r):e},im.prototype.getDirection=im.prototype.kc,im.prototype.rb=function(t){var e,r;if(t=t||Jk(),this.j){var n=this.c,i=this.c.length,o=this.c[i-1];for(r=e=0;--i&&e<this.u;)r+=hm(mm(n[i],n[i-1])),e++;n=r/e}else o=this.a,n=hm(this.Jd());return n>=this.Wa&&t-o.timestamp<=this.v?n>this.S?this.S:n:0},im.prototype.getSpeed=im.prototype.rb,im.prototype.qf=function(){return this.a?nm(this.a):B},im.prototype.getBifocalCenter=im.prototype.qf,im.prototype.Jd=function(t){return(t=t?this.f:this.s)?mm(t,this.a):new gm(0,0)},im.prototype.getMoveVector=im.prototype.Jd,im.prototype.rf=function(t){var e=1;if(this.i){var r=this.a;(t=om(t=t?this.f:this.s))&&(r=om(r))&&(e=r/t)}return e},im.prototype.getBifocalScaling=im.prototype.rf,im.prototype.Og=function(t){if(this.i){var e=t?this.f:this.s,r=this.a;t=e.b;var n=r.b,i=0;t&&n&&(e=e.a,r=r.a,i-=Ld(n.y-r.y,n.x-r.x)*Td-Ld(t.y-e.y,t.x-e.x)*Td),t=i}else t=0;return t},im.prototype.getBifocalRotation=im.prototype.Og,jm.prototype.c=!1,u(qm,F),qm.prototype.start=function(t,e){this.c&&this.reset(),E(t-e)||(this.a=+t,this.b=+e),this.c=!0},qm.prototype.reset=function(){this.c=!1,this.a=this.b=B,this.f=new rm(0,0,0,0,0,0)},qm.prototype.qa=function(){return this.c},qm.prototype.A={ng:"animationupdate"},u(sm,sd),qm.prototype.set=function(t,e,r,n,i,o){var a=this.f;this.c&&(t=new rm(t/1e3,e/1e3,r/1e3,n/1e3,i/1e3,o/1e3),a.fa(t)||(this.f=t,this.dispatchEvent(new sm(tm(this)))))},qm.prototype.rb=function(){return tm(this).rb()},qm.prototype.kc=function(){var t=tm(this),e=this.rb()||1;return new rm(t.a/e,t.b/e,t.c/e,t.f,t.g,t.i)},qm.prototype.o=function(){this.reset(),qm.l.o.call(this)},rm.prototype.rb=function(){return Dd(this.a*this.a+this.b*this.b+this.c*this.c)},rm.prototype.kc=function(){var t=this.rb()||1;return new rm(this.a/t,this.b/t,this.c/t,this.f,this.g,this.i)},rm.prototype.fa=function(t){var e=t===this;return!e&&(e=C(t,rm))&&(e=this.a===t.a&&this.b===t.b&&this.c===t.c&&this.f===t.f&&this.g===t.g&&this.i===t.i),e},u(um,nd),um.prototype.K=function(){return this.a},um.prototype.Ue=function(t,e){this.size?(this.size.w=t,this.size.h=e):this.size=new Ui(t,e),this.Pk(this.a,this.a.style,t,e,this.ma)},um.prototype.setSize=um.prototype.Ue,p=um.prototype,p.qb=function(){return this.size},p.Ta=function(){return this.ma},p.Pj=!0,p.jb=function(t){t!==this.Pj&&(this.a.style.display=t?"block":"none",this.Pj=t)},p.th=1,p.ac=function(t){this.th!==t&&(this.Tj(t),this.th=t)},p.Nc=function(){return this.th},p.ae=function(t){this.a.style.zIndex=t},um.prototype.setZIndex=um.prototype.ae,um.prototype.Bj=function(){return+this.a.style.zIndex},um.prototype.Hc=function(){},um.prototype.clear=function(){},um.prototype.o=function(){this.clear(),this.gc.removeChild(this.a),this.Ue(0,0),delete this.a,delete this.gc,um.l.o.call(this)},um.prototype.disposeInternal=um.prototype.o,um.prototype.f=0,um.prototype.Zf=function(){++this.f},um.prototype.release=function(){--this.f||this.C()},u(vm,um),p=vm.prototype,p.createElement=function(t){var e=(t=t.createElement("canvas")).style;return e.position="absolute",e.top=e.left="0",t},p.Pk=function(t,e,r,n,i){t.width=xd(r,1),t.height=xd(n,1),e.width=yd(r/i)+"px",e.height=yd(n/i)+"px"},p.Tj=function(t){this.b.globalAlpha=t},p.Hc=function(t,e,r,n,i){this.c&&this.b.drawImage(t,e,r,n,i)},p.Dd=function(){return this.g},p.clear=function(t){var e,r;this.c&&(t?this.b.clearRect(e=t.left,r=t.top,t.right-e,t.bottom-r):this.a.width=this.size.w)},p.o=function(){var t=this.a;t.width=t.height=0,delete this.b,vm.l.o.call(this)},vm.prototype.disposeInternal=vm.prototype.o,u(wm,nd),wm.prototype.hb=function(){return this.bb},wm.prototype.getLayer=wm.prototype.hb,wm.prototype.Jm=function(){return this.kb},wm.prototype.getSurface=wm.prototype.Jm,wm.prototype.Vc=function(t){var e=this.kb;t!==e&&(this.kb=t,t.Zf(),e&&e.release())},wm.prototype.setSurface=wm.prototype.Vc,wm.prototype.o=function(){this.kb.release()},wm.prototype.disposeInternal=wm.prototype.o,wm.prototype.Nd=function(){},wm.prototype.render=wm.prototype.U,u(xm,wm),xm.prototype.U=function(t,e,r,n,i,o,a,s){a=this.bb;var l=this.kb,u=!(C(l,vm)&&"2d"===l.Dd());return n>=a.min&&n<=a.max?(u&&l.jb(!0),a.U(l.K(),{boundingBox:t,zoom:n,screenCenter:e,priorityCenter:o,projection:r,cacheOnly:i,size:l.qb(),pixelRatio:l.Ta(),cameraMatrix:s})):(u&&l.jb(!1),uk.DONE)},xm.prototype.Nd=function(){return this.a},t("H.util.animation.Animation",zm),zm.prototype.start=function(){var t=this;this.f=Jk(),this.a=!0;var e=this.f;this.b.Yh((function(){if(t.a){var r=Jk(),n=r-t.f,i=n/t.i,o=!1;1<=i&&(i=1,o=!0),t.j(t.c?t.c(i):i,n,r-e,r),e=r,o&&t.stop()}else t.stop()}))},zm.prototype.start=zm.prototype.start,zm.prototype.stop=function(t){this.a=!1,this.b.Th(),t||this.g&&this.g(this)},zm.prototype.stop=zm.prototype.stop,zm.prototype.qa=function(){return this.a},zm.prototype.isRunning=zm.prototype.qa,u(Am,wm),Am.prototype.Vc=function(t){Am.l.Vc.call(this,t),this.g=t.gc.ownerDocument},Am.prototype.setSurface=Am.prototype.Vc;var Bm=function(t,e){return C(e=e.ca(),gh)?e.ia:(t[0]=e,t)}.bind(null,[]);function Cm(t,e){var r=t[1].Oc(),n=e[1].Oc();return oh(r,n,!0)||t[5]-e[5]||oh(r,n,!1)}function Dm(t,e){Dm.l.constructor.apply(this,arguments),this.c=0,this.a=[],this.b=A(this.b,this)}Am.prototype.U=function(t,e,r,n,i,o,a){var s,l,u,c,h=this.bb;if(this.m=e=this.f,this.f=r={},n>=h.min&&n<=h.max){var f=this.cj(t,n,i,o),p=f.markers;if(t=p.length){for(n=[],i=this.kb,o=0;o<t;o++){h=p[o];var A=Bm(h);for(s=A.length;s--;)(l=a(A[s]))&&((c=e[u=h.$a()+"_"+s])?delete e[u]:c={dk:h},r[u]=c,n.push([c,h,h.pb(),i,l.x,l.y]))}for(n.sort(Cm),t=n.length,o=0;o<t;o++)this.Ak.apply(this,n[o])}}return!f||f.requested&&f.requested===f.total||!f.requested&&p.length===f.total?uk.DONE:uk.PENDING},Am.prototype.render=Am.prototype.U,Am.prototype.Ba=function(){},Am.prototype.getObjectsAt=Am.prototype.Ba,u(Dm,Am),t("H.map.render.dom.MarkerRenderer",Dm),Dm.prototype.cj=function(){return this.bb.vc.apply(this.bb,arguments)},Dm.prototype.U=function(t,e,r,n,i,o,a){this.b(),this.j=0;var s,l=Dm.l.U.apply(this,arguments),u=this.kb,c=this.m;for(s in c)Em(this,u,c[s]);return 0===this.a.length&&l?uk.DONE:uk.PENDING},Dm.prototype.render=Dm.prototype.U,Dm.prototype.Vc=function(t){Dm.l.Vc.call(this,t),this.i=t.Ta()},Dm.prototype.setSurface=Dm.prototype.Vc,Dm.prototype.b=function(){for(var t,e,r,n=this.a.length;n--;)(e=(t=(r=this.a[n]).kg).pb()).Gh(r,e,t);this.a.length=0},Dm.prototype.Ak=function(t,e,r,n,i,o){var a,s=n.Ta(),l=e.Db();i*=s,o*=s,this.ic||(i=yd(i),o=yd(o)),t.detail&&(l.Rd(t.$m)?Em(this,n,t):a=t.detail),a||(t.detail=a=r.ej(this.g),this.c++,Da(r.Gh)&&this.a.push(a)),t.$m=l.a,a.style.zIndex=this.j++,a.kg=e,n.Hc(a,i,o,0,0)};var Fm,Gm="pointer-events",Hm,Im;$e&&($e&&Zc!==y&&(Zc=(Im=/(MSIE\s+|rv:)([^\);]+)(\)|;)/.exec(navigator.userAgent))?+Im[2]:y),Hm=Zc,9===Hm?Gm="display":10===Hm&&(Gm="visibility"));function Em(t,e,r){e.clear(e=r.detail),delete e.kg,t.c--,(r=(t=r.dk).pb()).b&&r.b(e,r,t)}function ym(t,e){var r=e||{},n=r.contextType;if(r=r.contextAttributes,ym.l.constructor.call(this,e),xc(t,"Function",ym,0,"invalid render callback"),n){if(-1===Jm.indexOf(n))throw new D(ym,1,"invalid context type");this.b=n}r&&(this.c=r),this.f=t}Fm=Gm,Dm.prototype.Ba=function(t,e,r){var n,i,o,a,s,l=this.i,u=hf;if(this.c){t/=l,e/=l;var c=(l=this.g).documentElement,h=this.kb.K(),f=h.getBoundingClientRect();for(t+=f.left,e+=f.top;(i=o=l.elementFromPoint(t,e))&&i!==h&&i!==c&&o!==p;){for(;(a=i.parentNode)&&(!Da(a.contains)||!a.contains(h));)i=a;if(a===h&&(i!==o||"svg"!==i.nodeName)&&0>u.indexOf(s=i.kg)&&(u===hf&&(u=[]),u.push(s),r))break;n||(n=[]);var p=i.style;n.push({Ri:p.getPropertyValue(Fm),Zm:p.getPropertyPriority(Fm),style:p}),p.setProperty(Fm,"visibility"===Fm?"hidden":"none","important"),p=o}if(n)for(e=n.length;e--;)(t=n[e]).style.removeProperty(Fm),Ac(t.Ri)&&t.style.setProperty(Fm,t.Ri,t.Zm)}return u},Dm.prototype.getObjectsAt=Dm.prototype.Ba,Dm.prototype.Nd=function(){return"dom"},Dm.prototype.o=function(){this.a.length=0;var t,e=this.kb,r=this.f;for(t in r)Em(this,e,r[t]);this.kb.C(),Dm.l.o.call(this)},Dm.prototype.disposeInternal=Dm.prototype.o,u(ym,oj),t("H.map.layer.CanvasLayer",ym);var Jm=["2d","webgl","webgl2","experimental-webgl"];function Km(t,e){Km.l.constructor.call(this,e),xc(t,"Function",Km,0,"invalid render callback"),this.a=t}function Lm(t,e){if(E(this.b=+t))throw new D(Lm,0,t);this.a=0,e&&this.Mk(e)}function Mm(t,e,r,n){Mm.l.constructor.apply(this,arguments)}function Nm(t,e){this.a=t,this.b=e}function Om(t,e,r){var n=[],i={gc:t.a,width:e.w,height:e.h,ma:t.b};for(t=0;t<r.length;t++){var o=(e=r[t]).Nd(),a={};Xa(a,i);var s=e.kb;switch(o){case"2d":if(C(e.hb(),ym)&&(a.Dg=e.hb().c),o=c&&"2d"===c.Dd()){o=a.Dg;var l=c.qn;o=l===o||(l&&!o?!l.alpha&&!l.willReadFrequently:o&&!l?!o.alpha&&!o.willReadFrequently:!o.alpha===!o.alpha&&!l.willReadFrequently===!o.willReadFrequently)}if(o)var u=!1;else if(s&&!u){var c=s;u=!1}else c=new vm(a.gc,a.width,a.height,a.ma,"2d",a.Dg),u=!0;break;case"dom":c=s||new Mm(a.gc,a.width,a.height,a.ma),u=!s;break;default:c=s||new vm(a.gc,a.width,a.height,a.ma,e.hb().Dd(),a.Dg),u=!s}n[n.length-1]!==c&&(c.ae(n.length),n.push(c)),e.Vc(c)}return n}function Fl(){Fl.l.constructor.call(this),this.b={},this.a={position:new lg(0,0),zoom:0,heading:180,incline:0,tilt:0,bounds:new O(ch([90,-180,90,0,90,180,-90,180,-90,-180]))}}ym.prototype.b="2d",ym.prototype.Dd=function(){return this.b},ym.prototype.U=function(t,e){return this.a&&this.a.canvas===t||(this.a=t.getContext(this.b,this.c)),this.f(this.a,e)},ym.prototype.o=function(){ym.l.o.call(this),delete this.a},u(Km,oj),t("H.map.layer.DomLayer",Km),Km.prototype.U=function(t,e){return this.a(t,e)},t("H.util.kinetics.KineticMove",Lm),Lm.prototype.Mk=function(t){return this.a=t,this},Lm.prototype.setInitialSpeed=Lm.prototype.Mk,Lm.prototype.Tl=function(){return Math.abs(this.a/this.b)},Lm.prototype.getDuration=Lm.prototype.Tl,Lm.prototype.xe=function(t){return this.a+this.b*t},Lm.prototype.getCurrentSpeed=Lm.prototype.xe,Lm.prototype.Ql=function(t){return this.a*t+this.b*t*t/2},Lm.prototype.getCurrentPath=Lm.prototype.Ql,u(Mm,um),t("H.map.render.dom.Surface",Mm),p=Mm.prototype,p.Dd=function(){return"dom"},p.createElement=function(t){return(t=t.createElement("DIV")).style.position="absolute",t.style.pointerEvents="none",t},p.Pk=function(t,e,r,n){e.width=r+"px",e.height=n+"px"},p.Tj=function(t){this.a.style.opacity=t},p.Hc=function(t,e,r){var n=this.ma,i=t.style;i[Af("transform")]="matrix(1,0,0,1,"+e/n+","+r/n+")",t.parentNode!==this.a&&(i.position="absolute",this.a.appendChild(t),this.a.style.pointerEvents="auto","auto"===getComputedStyle(t).pointerEvents&&(t.style.pointerEvents="all"),this.a.style.pointerEvents="none")},p.clear=function(t){t?this.a.removeChild(t):this.a.innerHTML=""},u(Fl,F),t("H.map.ViewModel",Fl),Fl.prototype.A={wa:"update",ge:"sync"},Fl.prototype.Nb=function(t,e){if(!t)throw new D(this.Nb,0,t);var r=t[Pm];if(uc(r)&&!mg(r))throw new D(this.Nb,0,Pm);if(uc(r=t[Qm])&&E(+r))throw new D(this.Nb,0,Qm);if(uc(r=t[Rm])&&!C(r,kg))throw new D(this.Nb,0,Rm);return r=Sm(t=x.Object.assign({},t),this.b,this.a),Tm(this,this.b,t),this.dispatchEvent(new Um(this.b,r,e)),this},Fl.prototype.setLookAtData=Fl.prototype.Nb,Fl.prototype.fb=function(){var t={};return t[Pm]=ng(this.a[Pm]),Tm(this,t,this.a,!0),t},Fl.prototype.getLookAtData=Fl.prototype.fb;var Pm="position",Qm="zoom",Rm="bounds",Vm={Fi:Pm,Ii:Qm,zi:"heading",Hi:"tilt",Ai:"incline",xi:Rm},Wm=Object.keys(Vm).map((function(t){return Vm[t]}));function Tm(t,e,r,n){t.g={},t.f={},t.c=[];for(var i,o,a,s=t.j,l=t.i,u=Wm.length;u--;)if(a=r[i=Wm[u]],null==(o=e[i])||!n)if(null!=a){uc(s)&&s.call(t,i,o,a);var c,h=i;if((c="position"!==i)||(c=!(!(c=a)||E(c.lat)||E(c.lng))),e[h]=c?a:ng(a),uc(l)){switch(i){case"position":o=a&&o&&(a.lat!==o.lat||a.lng!==o.lng);break;case"bounds":o=a&&o&&!a.fa(o);break;default:o=a!==o}o&&l.call(t,i)}}else delete e[i]}Fl.prototype.j=function(t,e,r){this.g[t]=e,this.f[t]=r},Fl.prototype.i=function(t){this.c.push(Xm[t])};var Xm=Wm.reduce((function(t,e){return t[e]=cj[e.toUpperCase()],t}),{});function Sm(t,e,r){var n=0;return["tilt","incline","heading",Qm].forEach((function(i){if(E(t[i])){var o=E(e[i])?r[i]:e[i];t[i]=o}else n|=Xm[i]})),[Pm,Rm].forEach((function(i){t[i]?n|=Xm[i]:t[i]=e[i]||r[i]})),n}function Ym(t,e){return t|e}function Um(t,e,r){Um.l.constructor.call(this,Fl.prototype.A.wa,t,null,e),this.b=this.animate=!!r}function S(t,e,r,n){if(S.l.constructor.call(this,t,e,r,n),this.ya=new Pk(100),this.N=new G(0,0),this.pf=!!n.enableSubpixelRendering,this.Pb=Zm,this.s=new im,this.g=n=new qm,this.Ec=A(this.Ec,this),n.addEventListener(n.A.ng,this.Ec),n=t.element,this.L=t=n.ownerDocument.createElement("div"),t.style.position="absolute",t.style.width=t.style.height="100%",t.style.zIndex=0,n.insertBefore(t,n.firstChild),this.wd=new Nm(this.L,this.ma),this.Y=e.fb().position,!(e=x.H.gl))throw new Yc(S,'"H-webgl" module is missing');for(this.a=new Pl({viewport:this.f,gc:this.L,devicePixelRatio:this.ma,kk:A(this.ea,this)}),e.WorkerBroker.addTarget("model",qj),t=0,n=(e=this.c.Ha()).length,this.j={Gc:[],ga:[]},this.Xa=e;t<n;t++){var i=e[t];this.Ge(t,i),Il(this,i,!0)}this.wb(),this.Yc=A(this.Yc,this),this.vh=A(this.vh,this),this.Aa=A(this.Aa,this),r.addEventListener(oj.prototype.A.de,this.Yc),this.na=$m,this.zoom=Jl(this,this.v.ib()),this.wb(),this.R()}Fl.prototype.Va=function(t){var e={},r={};Tm(this,this.a,t),this.b={},e.lookAt=this.f,r.lookAt=this.g,t=(t=this.c).length?t.reduce(Ym):0,this.dispatchEvent(new bj(this.A.ge,e,r,t))},Fl.prototype.synchronize=Fl.prototype.Va,Fl.prototype.Ve=function(t,e){if(E(t=+t))throw new D(this.Ve,0,Qm);this.Nb({zoom:t},e)},Fl.prototype.ib=function(){return this.a.zoom},Fl.prototype.dc=Oc,Fl.prototype.startControl=Fl.prototype.dc,Fl.prototype.control=Oc,Fl.prototype.control=Fl.prototype.control,Fl.prototype.nb=Oc,Fl.prototype.endControl=Fl.prototype.nb,u(Um,bj),u(S,Dl),t("H.map.render.webgl.RenderEngine",S),S.prototype.fb=function(){var t=this.Y;return Kl(this,{position:{jn:t.jn,nn:t.nn},zoom:this.zoom,tilt:this.Zk,heading:this.heading})},S.prototype.Yc=function(t){((t=(t=t.target.da())&&t.ab())&&t.getState())===Uh.INIT?t.load():(Sl(this.a),Ul(this.a,this.c),this.ea())},S.prototype.type=Nl.WEBGL;var $m=2;function an(t,e,r){return(e=r-e)<(t=Ed(2,8+t.zoom))/2?e:e-t*r/Bd(r)}function bn(t,e,r){function n(t){return i[t]+em(i[t],e[t])/2}if(!(r&cj.POSITION||r&cj.BOUNDS))return null;var i=Tl(t.a).getLookAtData();r=i.position;var o=e.position,a=e.bounds;return Ci(i.bounds,o.lat,o.lng,!1)||a&&Ci(a,r.lat,r.lng,!1)?null:((r=cn(t,{tilt:n("tilt"),heading:n("heading"),incline:0,bounds:tg([r,o])})).zoom=Jl(t,r.zoom-.5),delete r.bounds,r)}function dn(t,e,r,n){return t=(t=t.getCapabilities().lookAt[n]).max-t.min,Bd("zoom"===n?r[n]-e[n]:em(e[n],r[n]))/t||0}function en(t,e,r){return Zd(3e3*(t=xd(8*dn(t,e,r,"zoom"),dn(t,e,r,"heading"),dn(t,e,r,"tilt")/2)),300,4e3)}function cn(t,e){return jn(e),Tl(t.a).getBestLookAtData(e)}function jn(t){var e=t.bounds;!e||e instanceof O||(t.bounds=zi(e.G()))}function ln(t,e,r){Tl(t.a).setLookAtData(e),Sl(t.a),kn(t),t.ea(),r&&setTimeout(r,0)}function hn(t,e,r,n){var i=Tl(t.a).getLookAtData(),o=new dm(i,e);0!==o.a.tilt+o.a.heading+o.a.zoom+o.c?mn(t,(function(e){for(var r in o.a)if(0!==o.a[r]){var n=o.g[r](e);i[r]+=o.a[r]*(n-o.f[r]),o.f[r]=n}return 0!==o.c&&(i.position=o.b.jg(o.i,o.c*o.g.position(e),!0)),ln(t,i)}),r,(function(){return ln(t,e,n)})):ln(t,e,n)}function nn(t,e){t.ya.ka((function(t,r){return r.Eb()===e}))}function on(t){return!(C(t,Km)||C(t,ym))}function gn(t,e){var r=e.position;return Kl(t,{zoom:Jl(t,e.zoom),position:new lg(r.lat,r.lng),tilt:e.tilt,heading:e.heading,bounds:e.bounds})}function kn(t){var e=Tl(t.a).getLookAtData();t.zoom=e.zoom,t.Y=e.position}function qn(t,e){return new G((t=Tl(t.a).geoToMeters(e)).x/40075016.68557849+.5,1-(t.y/40075016.68557849+.5))}function rn(t,e){return e.sub(qn(t,t.Y)).scale(Ed(2,8+t.zoom))}function sn(t,e,r,n,i,o,a,s){var l,u,c,h=0,f=function(){0===--h&&o(i)};if(s&&s.features)for(h=u=s.features.length,c=0;c<u;c++){var p=s.features[c],A=p.id;if(l=t.a.a.sources[p.source_name]){var d=l.provider,g=d.tj();if(g===lk.SOURCE){var y=p.source_layer;if("overlays"===y)tn(t,e,r,n,i,l,p.properties.overlays_config);else if(l=l.getMapObjectById(A))if("markers"!==y)i.push(l);else if(un(t,e,r,l))i.push(l);else if(n&&!a){var v=!0;Wl(t.a,{x:e,y:r},{radius:3.5,top_most_only:!1},(function(a){sn(t,e,r,n,i,o,!0,a)}))}h--}else g===lk.FEATURE?(y=p.tile.coords,(v=d.getFeatureProxy(p.properties,y,(function(t){if(t){for(var e,r=t;r&&(e=r.Eb())&&e!==d;)r=e;e||r.ha(d),i.push(t)}f()})))||((l=t.ya.get(A))||((l=new lh(p)).ha(d),t.ya.add(A,l,1)),i.push(l),h--)):g===lk.PROVIDER&&(v=!0,d.Bk(p,!1).then((function(t){t&&(!(t instanceof rh)||un(this,e,r,t))&&i.push(t),f()}),(function(){f()}),t))}}g&&(v||0!==h)||o(i)}function tn(t,e,r,n,i,o,a){var s;for(t=t.Pa(e,r),e=a.length;e--&&(!(s=o.getMapObjectById(a[e].id))||0<=i.indexOf(s)||!s.ca().ad(t)||(i.push(s),!n)););}function un(t,e,r,n){var i,o=n.pb(),a=o.c,s=!a;if(a)if(e+=(o=o.ed()).x,r+=o.y,C(o=n.ca(),Ti))for(i=(n=o.ia).length;i--&&!s;)o=t.Aa(n[i]),s=a.Cf(e-o.x,r-o.y,0)!==be.NONE;else o=t.Aa(o),s=a.Cf(e-o.x,r-o.y,0)!==be.NONE;return s}function vn(t,e,r,n,i){for(var o,a=e.length;a--&&!((o=e[a])&&o.Ba&&(t=t.concat(o.Ba(r,n,i)),t.length&&i)););return t}function pn(t){return{w:(t=t.xa[2]).right-t.left,h:t.bottom-t.top}}function wn(t){t.i&&t.i.qa()||(Rl(t.a)||Jk()-t.se<t.Pb)&&!t.ra?t.If||(t.If=Hk(t.vh)):(t.ra&&(t.Yd(),xn(t)),t.na=$m)}function xn(t,e){t.$c||setTimeout(A(t.dispatchEvent,t,{type:t.A.Gi,target:e||t}),1)}function zn(t,e,r){Tl(t.a).applyPxOffset([e,r]),kn(t),t.N.set(0,0),Sl(t.a),t.ea()}function An(t,e,r,n){Tl(t.a).setLookAtData({zoom:e},Dc(r)&&Dc(r)?[r,n]:B),kn(t),Sl(t.a),t.ea()}function fn(t){yn(t),t.g.qa()&&t.nb(!0),t.s.qa()&&t.ob(!0)}function Bn(t,e){if(e){var r={};r.Ke=e.power,r.pe=e.ease,r.duration=e.duration,t.u=r}}function Dn(t,e){var r=rn(t,qn(t,e.position)),n=r.y;r=r.x;var i=e.zoom,o=rn(t,qn(t,t.Y));e=o.y;var a=o.x;o=t.zoom;var s=t.g.rb(),l=t.g.a,u=t.g.b,c=0;if(r=an(t,a,r),e=Dd((r-=a)*r+(n-=e)*n+(o=i-o)*o),0!==s&&0!==e){var h=r/e,f=n/e,p=o/e,A=s*s/(2*e);mn(t,(function(e,r){var n;1!==e?((n=p*(r=(e=s*r-A*r*r/2)-c))&&(n=Jl(t,t.zoom+n),An(t,n,l,u)),zn(t,yd(h*r),yd(f*r)),c=e):(An(t,Jl(t,i),l,u),t.ea())}),2*e/s)}}function Cn(t,e,r){r=r||0;var n=t.g,i=Tl(t.a),o=i.getLookAtData();e.c&&An(t,Jl(t,o.zoom+e.c*r),n.a,n.b),i.setLookAtData({heading:Ml(t,o.heading+e.g*r),tilt:Ll(t,o.tilt+e.f*r)}),kn(t),zn(t,e.a*r,e.b*r)}function mn(t,e,r,n,i){t.i&&t.i.qa()&&t.i.stop(!0),t.i=new zm(t,e,r,n,i),t.i.start()}function yn(t){t.i&&t.i.qa()&&t.i.stop(!0)}S.prototype.getState=function(){return this.na},S.prototype.getState=S.prototype.getState,S.prototype.$c=!1,S.prototype.yg=function(t){var e=this,r=t.newValue,n=t.modifiers,i=Tl(this.a);fn(this),this.N.set(0,0);var o=gn(this,r);if(Wm.forEach((function(e){n&t[e.toUpperCase()]||delete o[e]})),t.b){i=Tl(this.a).getLookAtData();var a=cn(this,o);r=bn(this,a,n);var s=function(){return e.$c=!1};if(delete a.bounds,this.$c=!0,r){i=en(this,i,r);var l=en(this,r,a);hn(this,r,i,(function(){return hn(e,a,l,s)}))}else r=en(this,i,a),hn(this,a,r,s)}else jn(o),i.setLookAtData(o);kn(this),Sl(this.a),this.ea()},S.prototype.ag=function(){},S.prototype.setAnimationDuration=S.prototype.ag,S.prototype.Mg=function(){},S.prototype.getAnimationDuration=S.prototype.Mg,S.prototype.bg=function(){},S.prototype.setAnimationEase=S.prototype.bg,S.prototype.Ng=function(){},S.prototype.getAnimationEase=S.prototype.Ng,S.prototype.Yf=function(){},S.prototype.resetAnimationDefaults=S.prototype.Yf,p=S.prototype,p.ik=function(t){nn(this,t.target.da()),Sl(this.a),this.ea()},p.Ge=function(t,e){S.l.Ge.call(this,t,e),on(e)&&(Sl(this.a),(t=(t=e.da())&&t.ab())&&t.getState()===Uh.INIT&&t.load())},p.Ih=function(t,e,r){var n;if(this.se=Jk(),nn(this,e.da()),e.requestDomMarkers||C(e,ym)||C(e,Km)){var i=this.j.ga;for(n=i.length;n--;){var o=i[n];if(o.hb()===e){i.splice(n,1),o.C();break}}}on(e)&&Ul(this.a,this.c),this.Xa=this.c.Ha(),0===t&&(Il(this,e,!1),this.wb()),Om(this.wd,pn(this),this.j.ga.filter(uc)),this.Yd(),r||this.ea()},p.Jh=function(){this.wb()},p.wb=function(){S.l.wb.call(this);var t=this.getCapabilities().lookAt.zoom;Tl(this.a).setZoomConstraints(xd(t.min,this.qg),wd(t.max,this.pg))},p.eh=function(t,e){var r;if(e){if(t={ic:this.pf,cb:this.cb},e.U?(C(e,ym)||C(e,Km))&&(r=new xm(e)):e.requestDomMarkers&&(r=new Dm(e,t)),r){this.j.ga.push(r);var n=this.c.Ha();this.j.ga.sort((function(t,e){return n.indexOf(t.bb)-n.indexOf(e.bb)})),Om(this.wd,pn(this),this.j.ga.filter(uc))}on(e)&&Ul(this.a,this.c)}this.Xa=this.c.Ha()},p.Aa=function(t){return Tl(this.a).geoToPixel(t)},S.prototype.geoToScreen=S.prototype.Aa,S.prototype.Pa=function(t,e){return Tl(this.a).xyToGeo(t,e)},S.prototype.screenToGeo=S.prototype.Pa,S.prototype.$f=function(t,e){return t=this.Pa(t,e),(e=this.v.fb()).position=t,e},S.prototype.Ba=function(t,e,r,n){var i=this,o=[];o=vn(o,this.j.ga,t*this.ma,e*this.ma,r),r&&o.length?n(o):this.a.a.initialized?Wl(this.a,{x:t,y:e},{radius:3.5,top_most_only:r},(function(a){sn(i,t,e,r,o,n,!1,a)})):n(o)},S.prototype.getObjectsAt=S.prototype.Ba,S.prototype.$=y,S.prototype.R=function(){var t=this.j.ga.length;El(this,this.ma),this.N.set(0,0);var e=pn(this),r=e.w,n=e.h;for(this.a.a.handleViewportUpdate();t--;){var i=(e=this.j.ga[t].kb).qb();i.w===r&&i.h===n||e.Ue(r,n)}this.$=new Ui(r,n),Sl(this.a),this.ea()},S.prototype.getCapabilities=function(){return Ol},S.prototype.getCapabilities=S.prototype.getCapabilities,p=S.prototype,p.If=0,p.Yd=function(){this.j.Gc.length=0},p.vh=function(){this.If=0,this.B&&this.B.before();var t=Tl(this.a),e=t.getLookAtData(!1),r=t.getLookAtData(!0);t=this.f.center.clone(),r=r.bounds.G();var n=this.zoom,i=this.N,o=this.Xa,a=o.length;for(this.Pb=Zm;a--;){var s=o[a];C(s,oj)&&s.da()&&s.da().Le(r,n)}this.ra=this.a.U(),this.v.Va(e),o=(e=this.j).ga.length;var l,u=!0;for(l=0;l<o;l++){a=e.ga[l];var c=e.Gc;a&&((s=a.U(r,t,void 0,n,!1,i,this.Aa,this.a.a.getCameraMatrix()))===uk.ACTIVE&&(this.Pb=1/0),s!==uk.DONE||c[l]||(xn(this,a.hb()),c[l]=!0),c[l]||(u=!1))}this.ra=u&&this.ra,this.$&&(this.f.Va(this.$),this.$=y),this.i&&this.i.qa()&&this.og(),this.B&&this.B.after(),wn(this)},p.o=function(){var t=this.c.Ha()[0],e=this.f;Ik(this.If),yn(this),t&&Il(this,t,!1),this.j.ga.filter(uc).forEach((function(t){t.C()})),e.element&&e.element.removeChild(this.L),delete this.L,this.na=3,this.a.C(),S.l.o.call(this)},p.ea=function(){this.se=Jk(),this.na===$m&&(this.ra=!1,this.na=1,wn(this))},p.td=function(t,e,r){An(this,t=Jl(this,Jl(this,t)),e,r)},S.prototype.zoomAt=S.prototype.td,S.prototype.ec=function(t,e){var r=!!(e||t&(Hl.HEADING|Hl.TILT));fn(this),Bn(this,e),this.s.start(t,r),Tl(this.a).setPanning(!0)},S.prototype.startInteraction=S.prototype.ec,S.prototype.Vb=function(t,e,r,n,i){var o=this.s,a=!1;if(o.qa()){var s=Tl(this.a),l=s.getLookAtData(),u=this.f.center;u=[u.x,u.y],e=o.store(t,e,r,n,i),r=o.qf(),t=o.Jd(),i=this.s.rf(),n=this.s.Og(),o.b&&(o.sc(Hl.TILT)&&(s.setLookAtData({tilt:Ll(this,l.tilt+t.y/this.f.height*-180)},u),a=!0),e&&1!==i&&o.sc(Hl.ZOOM)&&(a=o.qf(),An(this,Jl(this,i=Cd(Ed(2,this.zoom)*i)/Md),a.x,a.y),a=!0),o.sc(Hl.COORD)&&0<hm(t)&&(zn(this,-t.x,-t.y),a=!0),o.sc(Hl.HEADING)&&(e?s.setLookAtData({heading:l.heading+Ml(this,n)},[r.x,r.y]):t.x&&s.setLookAtData({heading:Ml(this,l.heading+t.x/this.f.width*360)},u),a=!0),a&&(Sl(this.a),this.ea()))}},S.prototype.interaction=S.prototype.Vb,S.prototype.ob=function(t){var e=this;if(this.s.qa()&&!t){if(this.u){t=this.s.rb();var r=this.s.kc(),n=this.u.duration,i=(this.u.Ke||1)*t,o=new Lm(-i/(0<n?n:1),i);!E(r.x)&&!E(r.y)&&0<i&&e.s.sc(Hl.COORD)&&mn(this,(function(t){i=o.xe(t*n),E(i)||zn(e,yd(-r.x*i),yd(-r.y*i))}),n,void 0,this.u.pe)}delete this.u,this.s.clear()}Tl(this.a).setPanning(!1),this.ea()},S.prototype.endInteraction=S.prototype.ob,S.prototype.dc=function(t,e,r){fn(this),this.g.start(e,r),Bn(this,t),Tl(this.a).setPanning(!0)},S.prototype.startControl=S.prototype.dc,S.prototype.control=function(t,e,r,n,i,o){for(var a,s=0;s<arguments.length;s++)if((a=+arguments[s])!==a)throw new D(this.control,s,a);this.g.qa()&&this.g.set(t,e,r,n,i,o)},S.prototype.control=S.prototype.control,S.prototype.nb=function(t,e){var r,n=this;if(this.g.qa()){yn(this);var i=Jk(),o=i-this.Ad;if(1<=o)Cn(this,tm(this.g),o);if(!this.u||t||e)"function"===typeof e&&(e(t=(t=Tl(this.a)).getLookAtData()),Dn(this,t));else{e=this.g.rb();var a=this.g.kc(),s=this.u.duration,l=(this.u.Ke||1)*e,u=new Lm(-l/(0<s?s:1),l);!E(a.a)&&!E(a.b)&&0<l&&mn(this,(function(t,e,o,c){i&&(o=c-i,i=0),l=u.xe(t*s)*o,E(l)||((r=a.c*l)&&An(n,Jl(n,n.zoom+r),n.g.a,n.g.b),zn(n,yd(a.a*l),yd(a.b*l)))}),s,void 0,this.u.pe)}this.g.reset(),Tl(this.a).setPanning(!1),this.ea()}},S.prototype.endControl=S.prototype.nb,S.prototype.Ec=function(t){var e=this,r=t.b;this.N.set(0,0),r.a||r.b||r.c||r.f||r.g||r.i?(this.Ad=Jk(),mn(this,(function(t,n,i,o){e.Ad=o,Cn(e,r,i)}),Ud),this.ea()):yn(this)},S.prototype.Ig=function(){},S.prototype.enter=S.prototype.Ig,S.prototype.Jg=function(t){Gl(this.L,t)},S.prototype.exit=S.prototype.Jg,S.prototype.capture=function(t,e,r,n){var i=this;return Xl(i.a).then((function(o){var a=i.L.ownerDocument.createElement("canvas"),s=i.ma,l=a.getContext("2d"),u=i.a.Ta()/s,c=(r-t)*s;return s*=n-e,a.width=c,a.height=s,l.drawImage(o,t*u,e*u,c*u,s*u,0,0,c,s),a}))},S.prototype.Cl=function(t){return Tl(this.a).geoToMeters(t)},S.prototype.geoToMeters=S.prototype.Cl,S.prototype.An=function(t){return Tl(this.a).metersToGeo(t)},S.prototype.metersToGeo=S.prototype.An;var Zm=5e3;function T(t,e,r){var n={};if(!(t instanceof HTMLElement))throw new D(T,0);if(T.l.constructor.call(this),this.i=En(r,T),this.c=r=new Fl,this.B=!1,r.addEventListener(r.A.ge,this.N,!1,this),!C(t,Element))throw new D(T,0,t);var i=(r=this.P=t.ownerDocument.createElement("div")).style;if(i.position="relative",i.height=r.style.width="100%",i.overflow="hidden",i.webkitTapHighlightColor="transparent","transparent"!==i.webkitTapHighlightColor&&(i.webkitTapHighlightColor="rgba(0,0,0,0)"),t.appendChild(r),this.b=new vk(this.P,this.i),this.b.addEventListener(this.b.A.ge,this.N,!1,this),(t=this.a=new qj(this.i.layers)).addEventListener(t.A.fe,this.T,!1,this),t.addEventListener(t.A.ce,this.T,!1,this),t.addEventListener(t.A.ee,this.T,!1,this),!this.j&&Fn(this),this.g=null,this.a.add(e,0),this.f=this.u(null!=this.i.engineType?this.i.engineType:hk,this.i),this.v=A(this.v,this),(e=this.i.imprint)!==B&&"object"!==typeof e)throw new D(T,1,"imprint");this.m=null===e?e:new zj(this,e),e=this.i.autoColor,this.L=e===B||!!e,Gn(this),(e=this.i.zoom)&&(n.zoom=e),(e=this.i.bounds)&&(n.bounds=e),(e=this.i.center)&&(n.position=e),this.c.Nb(n)}function En(t,e){if(t){var r=t.pixelRatio;if(r===B)t.pixelRatio=Te();else if(!(0<r))throw new D(e,0,"pixelRatio: "+r)}else(t={}).pixelRatio=Te();return t.renderBaseBackground||(t.renderBaseBackground={lower:3,higher:2}),t}function Gn(t){t.m&&t.L&&t.m.fi({invert:t.g&&t.g.sl})}function Hn(t,e,r){t.dispatchEvent(r?new bj(t.A.Bi,r.newValue,r.oldValue,r.modifiers):t.A.Bi+e)}function In(t){vj.call(this,t)}function Fn(t){t.s=new N({max:24}),t.j=new rl(t.s,t.i),t.a.add(t.j)}u(T,F),t("H.Map",T),T.prototype.draggable=!1,T.prototype.o=function(){this.L=!1,this.m&&this.m.C(),this.f.dispose(),this.c.C(),this.b.C(),this.j.C(),this.s.C(),this.a.C();var t=this.P;t.parentNode.removeChild(t),delete this.P,F.prototype.o.call(this)},T.prototype.K=function(){return this.P},T.prototype.getElement=T.prototype.K,T.prototype.Ta=function(){return this.i.pixelRatio},T.prototype.getPixelRatio=T.prototype.Ta,T.prototype.T=function(t){var e=t.added,r=t.removed;e&&e.da()&&e.da().ha(this),r&&r.da()&&r.da().ha(null),r===this.j&&(delete this.j,delete this.s),r===this.g&&(this.g=null),0===t.idx&&(this.dispatchEvent(new aj(this.A.bf,this.g=t.type!==this.a.A.ee?e:0<this.a.a.length?this.a.get(0):y,t.type!==this.a.A.ce?r:1<this.a.a.length?this.a.get(1):y)),Gn(this))},T.prototype.N=function(t){t.modifiers&&(this.B||(Hn(this,"start"),this.B=!0),Hn(this,"",t),this.R&&x.clearTimeout(this.R),this.R=x.setTimeout(this.v,333))},T.prototype.v=function(){Hn(this,"end"),this.B=!1},T.prototype.cg=function(t,e){return this.f.getCapabilities().lookAt&&this.c.Nb({position:t},!!e),this},T.prototype.setCenter=T.prototype.cg,T.prototype.Za=function(){var t=this.c.fb();return t?t.position:y},T.prototype.getCenter=T.prototype.Za,T.prototype.Ve=function(t,e){return this.c.Ve(t,!!e),this},T.prototype.setZoom=T.prototype.Ve,T.prototype.ib=function(){return this.c.ib()},T.prototype.getZoom=T.prototype.ib,T.prototype.td=function(t,e,r){this.f.zoomAt(t,e,r)},T.prototype.zoomAt=T.prototype.td,T.prototype.Tm=function(){return this.b},T.prototype.getViewPort=T.prototype.Tm,T.prototype.Sm=function(){return this.c},T.prototype.getViewModel=T.prototype.Sm,T.prototype.km=function(){return this.a},T.prototype.getLayers=T.prototype.km,T.prototype.em=function(){return this.m},T.prototype.getImprint=T.prototype.em,T.prototype.capture=function(t,e,r,n,i,o){function a(t,e){d?t.cancel():(u.save(),e.capture(l,f,(function(e){u.restore(),t.done(e)}),(function(e){t.done(null,e),s(null)})))}function s(e){d||(d=!0,t(e))}var l,u,c=this.f,h=c.getCapabilities(),f=this.i.pixelRatio,p=this.b,d=!1,g=this;if(!Da(t))throw new D(this.capture,0,t);r=r||0,n=n||0,i=i||p.width,o=o||p.height;var v=xd(0,wd(r,i)),m=xd(0,wd(n,o));r=wd(p.width,xd(r,i)),n=wd(p.height,xd(n,o)),h.capture?c.capture(v,m,r,n).then((function(t){var r=g.m,n=e||[];u=(l=t).getContext("2d"),l.style.width=l.width/f+"px",l.style.height=l.height/f+"px";var i=new Kk(10,a);(n=n.concat(r).filter((function(t){return Da(t&&t.capture)}))).length?(t=n.pop(),n.forEach((function(t){i.push(t,jd)})),i.push(t,A(s,g,l)),Dk(i)):s(l)}),(function(){s(y)})):t(null)},T.prototype.capture=T.prototype.capture,T.prototype.Vl=function(){return this.f},T.prototype.getEngine=T.prototype.Vl,T.prototype.u=function(t,e){if(e=e?En(e,this.u):this.i,Gn(this),t===ik.P2D)return new x.H.map.render.p2d.RenderEngine(this.b,this.c,this.a,e);if(t===ik.WEBGL)return new S(this.b,this.c,this.a,e);if(t===ik.HARP)return new x.H.map.render.harp.RenderEngine(this.b,this.c,this.a,e);throw new D(this.u,0,t)},T.prototype.Ye=function(t,e,r,n,i){if(e=uc(e)?C(e,K,this.Ye,1,e)&&e:this.c.fb().bounds.G(),!C(i=i||this.g,nl))throw new D(this.Ye,4);var o=i.da(),a=this.Ta(),s=i.tileSize;if(2<=a&&256<s&&o instanceof Ck&&(s/=2),a=this.ib(),s=Math.log2(s)-8,!((r=uc(r)?+r:a)<=(n=uc(n)?+n:a)))throw new D(this.Ye,B,"!(min <= max)");a=o.min;var l=o.max,u=this.f.type===ik.WEBGL?zd:yd;if(r=Zd(u(r)-s,a,l),n=Zd(u(n)-s,a,l),!(o&&C(o,R)&&md()&&o.s()))throw new Yc(this.Ye,"Storing is not supported");return new yk(i,o,e,r,n,t)},T.prototype.storeContent=T.prototype.Ye,u(In,vj),In.prototype.g=function(){xj(this,2)},In.prototype.f=function(){xj(this,4)},T.prototype.rl=function(t){return t=new In(t),ld().clear(A(t.g,t),A(t.f,t)),t},T.prototype.clearContent=T.prototype.rl,T.prototype.ug=function(t,e){var r=this.a,n=r.indexOf(t),i=e!==+e;return e=i?r.a.length-1:e,0>n?r.add(t,e):n-e&&(r.$b(n),r.add(t,i?e-1:e)),this},T.prototype.addLayer=T.prototype.ug,T.prototype.Oe=function(t){var e=this.a.indexOf(t);return t!==this.g&&t!==this.j&&-1!==e&&this.a.$b(e),this},T.prototype.removeLayer=T.prototype.Oe,T.prototype.qd=function(t){return this.g!==t&&(this.a.a.length&&this.a.get(0)!==this.j?this.a.set(0,t):this.a.add(t,0),this.g=t),this},T.prototype.setBaseLayer=T.prototype.qd,T.prototype.Il=function(){return this.g},T.prototype.getBaseLayer=T.prototype.Il,T.prototype.Aa=function(t){if(!mg(t))throw new D(this.Aa,0,t);return(t=this.f.geoToScreen(t))?zf(t):y},T.prototype.geoToScreen=T.prototype.Aa,T.prototype.Pa=function(t,e){var r;if(r=+E(t)||2*+E(e))throw new D(this.Pa,r-1,arguments[r-1]);return(r=this.f.screenToGeo(t,e))?ng(r):y},T.prototype.screenToGeo=T.prototype.Pa,T.prototype.$f=function(t,e){return this.f.screenToLookAtData(t,e)},T.prototype.screenToLookAtData=T.prototype.$f,T.prototype.ba=function(t){if(!C(t,M))throw new D(this.ba,0,t);return!this.j&&Fn(this),this.s.Ub().ba(t),t},T.prototype.addObject=T.prototype.ba,T.prototype.Da=function(t){if(!C(t,M))throw new D(this.Da,0,t);return!this.j&&Fn(this),this.s.Ub().Da(t),t},T.prototype.removeObject=T.prototype.Da,T.prototype.Na=function(t){return!this.j&&Fn(this),this.s.Ub().Na(t)},T.prototype.getObjects=T.prototype.Na,T.prototype.Qb=function(t){var e;zc(t,this.Qb,0,t),!this.j&&Fn(this);var r=t.length;for(e=0;e<r;e++)this.ba(t[e]);return this},T.prototype.addObjects=T.prototype.Qb,T.prototype.nd=function(t){var e;zc(t,this.nd,0,t),!this.j&&Fn(this);var r=t.length;for(e=0;e<r;e++)this.Da(t[e]);return this},T.prototype.removeObjects=T.prototype.nd,T.prototype.Kd=function(t,e,r){var n;if(n=+E(t)||2*+E(e))throw new D(this.Kd,n-1,arguments[n-1]);this.f.getObjectsAt(t,e,!0,(function(t){r(t[0])}))},T.prototype.getObjectAt=T.prototype.Kd,T.prototype.Ba=function(t,e,r,n){var i;if(i=+E(t)||2*+E(e))throw new D(this.Kd,i-1,arguments[i-1]);this.f.getObjectsAt(t,e,!1,r,!!n)},T.prototype.getObjectsAt=T.prototype.Ba,T.prototype.Vg=function(t,e,r){var n=r||jf;r=n.visiblesOnly;var i=n.zoom;n=n.types;var o=nh.ANY;C(t,O,this.Vg,0,"area"),xc(e,"Function",this.Vg,1,"callback"),this.s.Na(t,!uc(r)||!!r,uc(i)?+i:this.c.ib(),uc(n)?n&o:o,e)},T.prototype.getObjectsWithin=T.prototype.Vg;var ik={P2D:Nl.P2D,WEBGL:Nl.WEBGL,HARP:Nl.HARP};function Jn(t,e){Jn.l.constructor.call(this,t,e)}function sh(t,e,r){var n="anonymous",i=1;this.c=A(this.c,this),M.call(this,r),this.aa(t),r&&((t="crossOrigin")in r&&(n=r[t]),(t="opacity")in r&&(i=r[t])),this.Kk(e,n),this.ac(i)}function Kn(t,e){Kn.l.constructor.call(this,t,e)}T.EngineType=ik,T.prototype.A={vo:"mapviewchangestart",Bi:"mapviewchange",Ci:"mapviewchangeend",bf:"baselayerchange"},u(Jn,rh),t("H.map.Marker",Jn),Jn.prototype.type=nh.MARKER,Jn.prototype.R=1,Jn.prototype.pa=function(t){if(t!==kh.VISUAL||1===this.uk||1===this.icon.getState())var e=Jn.l.pa.call(this,t);return e||!1},Jn.prototype.invalidate=Jn.prototype.pa,p=Jn.prototype,p.uk=0,p.Oj=function(t){return C(t,Uj)},p.ih=!1,p.hk=function(){this.pa(kh.VISUAL)},p.Ac=function(t){var e=this.icon;return this.ih&&(e.removeEventListener("statechange",this.hk,!1,this),delete this.ih),e&&(this.uk=e.getState()),Jn.l.Ac.call(this,t),0===t.getState()&&(this.ih=!0,Ee(t,"statechange",this.hk,!1,this)),this},Jn.prototype.setIcon=Jn.prototype.Ac,Jn.prototype.b=function(t){return new Uj(t.svg,t)},Jn.prototype.W=function(){var t=this.getIcon(),e=t.co||0,r=Jn.l.forWorkerMessage.call(this),n=r.properties.icon;return n&&0<e&&Xa(n,{stick_color:t.bo,stick_height:e}),r},Jn.prototype.forWorkerMessage=Jn.prototype.W,u(sh,M),t("H.map.Overlay",sh),sh.prototype.type=nh.OVERLAY,sh.prototype.G=function(){return this.a},sh.prototype.getBoundingBox=sh.prototype.G,sh.prototype.Zd=function(t){return C(t,K,this.Zd,0,t),this.aa(t)},sh.prototype.setBoundingBox=sh.prototype.Zd,sh.prototype.ca=function(){return this.a},sh.prototype.getGeometry=sh.prototype.ca,sh.prototype.aa=function(t){var e=this.a,r=!e;return C(t,K,this.aa,0,t),!r&&e.fa(t)||(this.a=t,r||this.pa(kh.SPATIAL)),this},sh.prototype.setGeometry=sh.prototype.aa,sh.prototype.Jc=function(){return this.b.getData()},sh.prototype.getBitmap=sh.prototype.Jc,sh.prototype.Kk=function(t,e){var r=this.b;return r&&1!==r.getState()&&r.cancel(),this.b=new Pj(t,this.c,!0,B,e),this},sh.prototype.setBitmap=sh.prototype.Kk,sh.prototype.c=function(t,e){this.b=e,1===t&&this.pa(kh.VISUAL)},sh.prototype.Nc=function(){return this.f},sh.prototype.getOpacity=sh.prototype.Nc,sh.prototype.ac=function(t){var e=this.f,r=2>e;if(!(0<=t&&1>=t))throw new D(this.ac,0);return t!==e&&(this.f=t,r&&this.pa(kh.VISUAL)),this},sh.prototype.setOpacity=sh.prototype.ac,sh.prototype.W=function(){var t=sh.l.W.call(this);return t.geometry=zi(this.a).W(),t.properties.overlay=!0,t},sh.prototype.forWorkerMessage=sh.prototype.W,u(Kn,nl),t("H.map.layer.MarkerTileLayer",Kn);var Ln={markers:[],total:0,requested:0};function Mn(t,e,r,n,i){var o,a=zd(r);for(t.pixelProjection.Ja(a),e=t.Od(t.ue(e),a),r=t.Be(e,e.left>e.right,~~r,n,i),t=r.tiles,r=r.total,n=t.length,i=[],o=0;o<n;o++)for(a=(e=t[o]).data.length;a--;)i.push(e.data[a]);return{markers:i,total:t.length,requested:r}}function Nn(t,e,r){var n,i=6;if(e){for(n=' expected close to: "'+e;i--;)-1!==(e=t.a.next())&&(n+=String.fromCharCode(e));n+='"'}throw new D(On,0,"- Malformed WKT: "+(n?r+n:"unexpected end of stream"))}function Pn(t,e){var r=t.next();r!==(e=e?")":"(")&&Nn(t,r,'"'+e+'"')}function Qn(t){return","===Rn(t)&&(t.next(),!0)}function Sn(t,e,r,n,i){var o,a,s=2+e+r;for(a=1;a<=s;a++)(r=t.next())?(o=+r)!==o?Nn(t,r,"number"):1===a?n[i+1]=o:2===a?n[i]=o:3===a&&(n[i+2]=o):Nn(t,r);e||(n[i+2]=0)}Kn.prototype.wc=function(t,e,r,n){return this.ja.providesDomMarkers()?Ln:Mn(this,t,e,r,n)},Kn.prototype.requestMarkers=Kn.prototype.wc,Kn.prototype.vc=function(t,e,r,n){return this.ja.providesDomMarkers()?Mn(this,t,e,r,n):Ln},Kn.prototype.requestDomMarkers=Kn.prototype.vc;var Tn=[];function Un(t,e,r,n){return n||Pn(t,0),Sn(t,e,r,Tn,0),n||Pn(t,1),new lg(Tn[0],Tn[1],e?Tn[2]:B)}function Vn(t,e,r){var n=[];Pn(t,0);do{Sn(t,e,r,n,n.length)}while(Qn(t));return Pn(t,1),new L(n)}function Wn(t,e,r){Pn(t,0);var n=Vn(t,e,r);if(Qn(t)){var i=[];do{i.push(Vn(t,e,r))}while(Qn(t))}return Pn(t,1),new O(n,i)}var Xn=[],Yn=[Wn],Zn=[Un],$n={POINT:Zn,LINESTRING:[Vn],POLYGON:Yn,MULTIPOINT:[Un,Ti],MULTILINESTRING:[Vn,ih],MULTIPOLYGON:[Wn,Gi],GEOMETRY:Xn,GEOMETRYCOLLECTION:Xn,CIRCULARSTRING:Xn,COMPOUNDCURVE:Xn,CURVEPOLYGON:Xn,MULTICURVE:Xn,MULTISURFACE:Xn,CURVE:Xn,SURFACE:Xn,POLYHEDRALSURFACE:Xn,TIN:Xn,TRIANGLE:Xn},ao={Z:1,M:2,ZM:3};function On(t){var e,r=(t=new bo(t)).next();if((e=$n[r.toUpperCase()])||Nn(t,r,"type name"),e!==Xn){r=Rn(t);var n=1&(r=ao[r.toUpperCase()]),i=r>>1;if(n|i&&t.next(),"EMPTY"===(r=Rn(t)))if(t.next(),n=e[1])var o=new n([]);else e!==Zn&&(o=new L([]),e===Yn&&(o=new O(o)));else if("("===r){if(o=e[0],e=e[1]){var a=[];if(Pn(t,0),o===Un){var s="("!==Rn(t);do{a.push(o(t,n,i,s))}while(Qn(t))}else do{a.push(o(t,n,i))}while(Qn(t));Pn(t,1),n=new e(a)}else n=o(t,n,i);o=n}else Nn(t,r,'"Z", "M", "ZM", "(" or "EMPTY"');t.next()&&Nn(t,r,"end of stream")}return o||y}function bo(t){this.a=t}function Rn(t){var e=t.b;if(e===B){for(e=t.a;e.Hb()===co;)e.next();if(eo[e.Hb()])e=(e=e.next())===fo?"":String.fromCharCode(e);else{e.be();do{e.next()}while(!eo[e.Hb()]);e=String.fromCharCode.apply(null,e.Bd())}t.b=e}return e}bo.prototype.next=function(){var t=Rn(this);return""!==t&&delete this.b,t};var co=32,fo=-1,go={zo:co,to:40,yo:41,qo:44,ro:fo},eo=Object.keys(go).reduce((function(t,e){return t[go[e]]=!0,t}),nc());function ho(){}function io(t){this.c=String(t),this.f=0,this.a=[],this.b=!1}function jo(t,e){jo.l.constructor.call(this,Hi,e),this.Zd(t)}function ko(){return Hf("H-core","1.30.15","f5837cb5d",{region:"row"})}t("H.util.ICharStream",ho),ho.prototype.next=function(){},ho.prototype.be=function(){},ho.prototype.Bd=function(){},ho.prototype.Hb=function(){},t("H.util.CharStream",io),io.prototype.next=function(){var t=this.c.charCodeAt(this.f++);return t=isNaN(t)?-1:t,this.b&&this.a.push(t),t},io.prototype.be=function(){this.b=!0,this.a=[]},io.prototype.Bd=function(){var t=this.a.slice();return this.b=!1,this.a=[],t},io.prototype.Hb=function(){var t=this.c.charCodeAt(this.f);return isNaN(t)?-1:t},t("H.util.wkt.toGeometry",(function(t){return On(new io(t))})),u(jo,uh),t("H.map.Rect",jo),jo.prototype.Zd=function(t){if(!C(t,K))throw new D(this.Zd,0,t);t.fa(this.Y)||(this.Y=this.B=t,this.a!==y&&jo.l.aa.call(this,zi(t)))},jo.prototype.setBoundingBox=jo.prototype.Zd,jo.prototype.G=function(){return this.B},jo.prototype.getBoundingBox=jo.prototype.G,jo.prototype.aa=function(){return this},jo.prototype.setGeometry=jo.prototype.aa,jo.prototype.ca=function(){return this.a===Hi&&jo.l.aa.call(this,zi(this.Y)),this.a},jo.prototype.getGeometry=jo.prototype.ca,t("H.buildInfo",ko);var lo="cn"===ko().region,hk=ik[lo?"HARP":"WEBGL"],mo,no="maps".concat("js-"),oo,po,qo,ro,so;if(oo=x.document.querySelector('script[src*="'+no+'"]'),!oo)for(po=x.document.getElementsByTagName("script"),ro=new RegExp("^.*"+no),so=0,qo=po.length;so<qo;so++)if(ro.test(po[so].src)){oo=po[so];break}function to(t){var e=t.ownerDocument;e=e.documentElement||e.body.parentNode||e.body;try{var r=t.getBoundingClientRect()}catch(n){r={top:0,right:0,bottom:0,left:0,height:0,width:0}}return{x:r.left+("number"===typeof window.pageXOffset?window.pageXOffset:e.scrollLeft),y:r.top+("number"===typeof window.pageYOffset?window.pageYOffset:e.scrollTop)}}mo=oo?oo.src.replace(/\/[^\/]*$/,"/"):"",t("H.getScriptPath",(function(){return mo}));var uo=function(){return this}.apply(null);function vo(t,e,r,n,i,o){if(isNaN(t))throw Error("x needs to be a number");if(isNaN(e))throw Error("y needs to be a number");if(isNaN(r))throw Error("pointer must have an id");this.viewportX=t,this.viewportY=e,this.target=null,this.id=r,this.type=n,this.dragTarget=null,this.button=uc(i)?i:-1,this.buttons=uc(o)?o:0,this.a=this.button}function wo(t,e,r){if(isNaN(e))throw Error("x needs to be a number");if(isNaN(r))throw Error("y needs to be a number");t.viewportX=e,t.viewportY=r}function xo(t,e){t.a=e,t.buttons|=yo[+e]||0}function zo(t,e){t.a=e,t.buttons&=~(yo[+e]||0)}t("H.mapevents.Pointer",vo),vo.prototype.im=function(){return this.a},vo.prototype.getLastChangedButton=vo.prototype.im;var yo=[1,4,2],Ao={NONE:-1,LEFT:0,MIDDLE:1,RIGHT:2};function Bo(t,e,r,n,i,o,a){Bo.l.constructor.call(this,t),this.pointers=e,this.changedPointers=r,this.targetPointers=n,this.currentPointer=i,this.originalEvent=a,this.target=o}function Co(t){this.a=t instanceof Array?t.slice(0):[]}function Do(t,e){return-1!==(e=t.indexOf(e))?t.a[e]:null}function Eo(t,e){for(var r=t.a.length,n=[];r--;)t.a[r].type!==e&&n.push(t.a[r]);t.a=n}function Fo(t,e){for(var r=t.a.length;r--;)if(t.a[r].dragTarget===e)return!0;return!1}function Go(t,e,r){if(r=r||{},!(t instanceof T))throw Error("events: map instance required");if(!(e instanceof Array))throw Error("events: map array required");nd.call(this),this.Fg=r.Fg||300,this.Si=r.Si||50,this.Uk=r.Uk||50,this.Vk=r.Vk||500,this.nh=r.nh||900,this.mh=r.mh||8,this.map=t,this.s=this.map.b,this.f=this.s.element,this.B=e,this.a=new Co,this.b=new Co,this.j={},this.c=null,this.u=!0,this.S={},this.g={},this.m=null,this.ne=A(this.ne,this),this.T={pointerdown:this.vl,pointermove:this.wl,pointerup:this.xl,pointercancel:this.ul},Ho(this)}function Ho(t,e){var r,n=t.B.length;for(r=0;r<n;r++){var i=t.B[r],o=i.listener;"function"===typeof o&&(e?(i.target||t.f).removeEventListener(i.La,o):(i.target||t.f).addEventListener(i.La,o))}}function Io(t,e,r){var n;if("function"===typeof t.T[e]){"pointermove"!==e&&(t.u=!0);var i=0;for(n=t.b.length();i<n;i++){var o=t.b.a[i]||null;t.f.contains(r.composedPath()[0])?Jo(t,o,t.Zi.bind(t,r,e,o)):t.Zi(r,e,o,null)}}t.b.clear()}function Jo(t,e,r){if(t.c===e)r(e.target);else{var n=t.s,i=e.viewportX;if(e=e.viewportY,0>i||0>e||i>=n.width||e>=n.height)r(y);else{var o=t.map;o.Kd(i,e,(function(t){r(t||o)}))}}}function Lo(t,e,r){e===t.c&&(Mo(t,e.dragTarget,"dragend",r,e),t.c=null,Ko(e.id,t.S)),e.dragTarget=null}function Ko(t,e){e[t]&&(e[t].timeout?clearTimeout(e[t].timeout):clearTimeout(e[t]),delete e[t])}function No(t,e,r){var n=e.target,i=new G(e.viewportX,e.viewportY),o=e.id;Ko(o,t.g);var a=setTimeout((function(){n&&n===e.target&&i.Sa({x:e.viewportX,y:e.viewportY})<t.mh&&(Mo(t,n,"longpress",r,e),delete t.j[e.id])}),t.nh);t.g[o]={timeout:a,Je:i}}function Mo(t,e,r,n,i){if(e&&"function"===typeof e.dispatchEvent){var o,a=Bo,s=t.a.Ha(),l=t.b.Ha(),u=(t=t.a).a.length,c=[];for(o=0;o<u;o++)t.a[o].target===e&&c.push(t.a[o]);a=new a(r,s,l,c,i,e,n),i.button=/^(?:longpress|(?:dbl)?tap|pointer(?:down|up))$/.test(r)?i.a:Ao.NONE,e.dispatchEvent(a)}return a}function Oo(t){this.i=A(this.i,this),Go.call(this,t,[{La:"touchstart",listener:this.i},{La:"touchmove",listener:this.i},{La:"touchend",listener:this.i},{La:"touchcancel",listener:this.i}]),this.L={touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",touchcancel:"pointercancel"},this.v=(t=(t=t.m)?t.K():null)?Array.prototype.slice.call(t.querySelectorAll("a"),0):[]}function Po(t){var e=Qo(this);(window.PointerEvent||window.MSPointerEvent)&&e.push({La:"MSHoldVisual",listener:"prevent"}),Go.call(this,t,e)}function Qo(t){var e,r,n=!!window.PointerEvent,i=[];return t.i=A(t.i,t),"MSPointerDown MSPointerMove MSPointerUp MSPointerCancel MSPointerOut MSPointerOver".split(" ").forEach((function(o){e=o.toLowerCase().replace(/ms/g,""),r=n?e:o,i.push({La:r,listener:t.i,target:/^pointer(up|move)$/.test(e)?window:null})})),i}vo.Button=Ao,u(Bo,sd),t("H.mapevents.Event",Bo),p=Co.prototype,p.clear=function(){this.a.splice(0,this.a.length)},p.length=function(){return this.a.length},p.indexOf=function(t){for(var e=this.a.length;e--;)if(this.a[e].id===t)return e;return-1},p.remove=function(t){return-1!==(t=this.indexOf(t))?this.a.splice(t,1)[0]:null},p.push=function(t){if(t instanceof vo)return this.a.push(t);throw Error("list needs a pointer")},p.Ha=function(){return this.a},p.clone=function(){return new Co(this.a)},u(Go,nd),p=Go.prototype,p.Zi=function(t,e,r,n){Ko(r.id,this.S),this.T[e].call(this,r,n,t)},p.xl=function(t,e,r){var n=t.id;t.target=e,Lo(this,t,r),Mo(this,e,"pointerup",r,t),"mouse"!==t.type&&Mo(this,e,"pointerleave",r,t),e=this.j[t.id];var i={x:t.viewportX,y:t.viewportY},o=r.timeStamp,a=t.target,s=this.m;e&&e.target===a&&e.Je.Sa(i)<this.Uk&&o-e.si<this.Vk?(Mo(this,a,"tap",r,t),s&&s.target===a&&o-s.si<this.Fg?s.Je.Sa({x:t.viewportX,y:t.viewportY})<this.Si&&(Mo(this,a,"dbltap",r,t),this.m=null):this.m={target:a,Je:new G(t.viewportX,t.viewportY),si:r.timeStamp}):this.m=null,this.j={},Ko(n,this.g)},p.ne=function(t,e){var r=this;Mo(this,t.dragTarget,"drag",e,t),Ko(t.id,this.S),this.S[t.id]=setTimeout((function(){r.ne(t,e)}),150)},p.wl=function(t,e,r){var n=t.dragTarget,i=t.id,o=t.target;t.target=e,o!==e&&(Mo(this,o,"pointerleave",r,t),Mo(this,e,"pointerenter",r,t)),n?this.c?(this.ne(t,r),this.g[i]&&this.g[i].Je.Sa({x:t.viewportX,y:t.viewportY})>this.mh&&Ko(i,this.g)):this.u?this.u=!1:(this.c=t,Mo(this,n,"dragstart",r,t),this.ne(t,r),delete this.j[i],this.u=!0):(!this.c||this.c&&this.c.dragTarget!==e&&this.c.dragTarget!==this.map)&&Mo(this,e,"pointermove",r,t)},p.vl=function(t,e,r){var n=!(/^(?:mouse|pen)$/.test(t.type)&&0!==r.button);if(e){t.target=e,this.j[t.id]={Je:new G(t.viewportX,t.viewportY),target:t.target,si:r.timeStamp},"mouse"!==t.type&&Mo(this,e,"pointerenter",r,t);var i=Mo(this,e,"pointerdown",r,t);!this.c&&n&&(e.draggable&&!Fo(this.a,e)?t.dragTarget=e:!this.map.draggable||i.defaultPrevented||Fo(this.a,this.map)||(t.dragTarget=this.map)),No(this,t,r)}},p.ul=function(t,e,r){var n=t.id;t.target=null,e?(Mo(this,e,"pointerleave",r,t),Mo(this,e,"pointercancel",r,t)):Mo(this,this.map,"pointercancel",r,t),Lo(this,t,r),this.j={},Ko(n,this.g)},p.o=function(){Ho(this,!0),this.a.clear(),this.b.clear();var t,e=this.S;for(t in e)Ko(t,e);for(var r in e=this.g)Ko(r,e);delete this.f,delete this.B,delete this.a,delete this.b,delete this.map,this.m=null,delete this.j,this.c=null,nd.prototype.o.call(this)},u(Oo,Go),Oo.prototype.i=function(t){var e,r=t.touches,n=this.a.length();if("touchstart"===t.type&&n>=r.length){for(n=this.a.clone(),e=r.length;e--;)n.remove(r[e].identifier);for(e=n.length();e--;)this.a.remove((n.a[e]||null).id);this.b=n,Io(this,"pointercancel",t),this.b.clear()}if(this.L[t.type]){r=to(this.s.element),n=t.type;var i,o=(e=t.changedTouches).length;for(this.b.clear(),i=0;i<o;i++){var a=e[i],s=Do(this.a,a.identifier),l=a.pageX-r.x,u=a.pageY-r.y;if(s)if("touchmove"===n){a=Math.abs(s.viewportX-l);var c=Math.abs(s.viewportY-u);(1<a||1<c||1===a&&1===c)&&(wo(s,l,u),this.b.push(s))}else"touchend"===n&&(this.a.remove(s.id),this.b.push(s),zo(s,Ao.LEFT));else s=new vo(l,u,a.identifier,"touch",Ao.LEFT,1),this.a.push(s),this.b.push(s)}Io(this,this.L[t.type],t),-1===this.v.indexOf(t.target)&&t.preventDefault()}},Oo.prototype.o=function(){this.v=null,Go.prototype.o.call(this)},u(Po,Go);var Ro={2:"touch",3:"pen",4:"mouse"};function So(t,e,r,n){So.l.constructor.call(this,"contextmenu"),this.items=[],this.viewportX=t,this.viewportY=e,this.target=r,this.originalEvent=n}function To(t){this.$g=A(this.$g,this),this.bh=A(this.bh,this),this.ah=A(this.ah,this),this.v=!1,this.i=-1,this.L=0,To.l.constructor.call(this,t,[{La:"contextmenu",listener:this.$g},{target:t,La:"longpress",listener:this.bh},{target:t,La:"dbltap",listener:this.ah}])}function Uo(t,e,r,n,i){var o=t.map,a=Date.now()-t.L;i?!t.v&&a>t.nh&&(t.v=!0,i.dispatchEvent(new So(e,r,i,n)),Ee(o.K(),Vo,t.Yi,!1,t)):o.Kd(e,r,t.rn.bind(t,e,r,n))}Po.prototype.i=function(t){var e=window.PointerEvent?t.type:t.type.toLowerCase().replace(/ms/g,""),r=to(this.f),n=Do(this.a,t.pointerId),i=t.pageX-r.x;r=t.pageY-r.y;var o=Ro[t.pointerType]||t.pointerType;if($c&&"rtl"===x.getComputedStyle(this.s.element).direction&&(i-=(x.devicePixelRatio-1)*this.s.width),!(n||/^pointer(up|out|cancel)$/.test(e)||"touch"===o&&"pointerdown"!==e)){n={x:i,y:r};var a=t.pointerType;"number"===typeof a&&(a=Ro[a]),n=new vo(n.x,n.y,t.pointerId,a,t.button,t.buttons),this.a.push(n)}n&&(/^pointer(up|cancel)$/.test(e)?("touch"===o&&this.a.remove(n.id),zo(n,t.button)):"pointerdown"===e&&("touch"===t.pointerType&&(Eo(this.a,"mouse"),Eo(this.a,"pen")),xo(n,t.button)),this.b.push(n),"pointermove"!==e?(wo(n,i,r),Io(this,/^pointer(over|out)$/.test(e)?"pointermove":e,t)):n.viewportX===i&&n.viewportY===r||(wo(n,i,r),Io(this,e,t))),this.b.clear()},u(So,sd),t("H.mapevents.ContextMenuEvent",So),u(To,Go),p=To.prototype,p.bh=function(t){var e=t.currentPointer;"touch"===e.type&&1===t.pointers.length&&Uo(this,e.viewportX,e.viewportY,t.originalEvent,t.target)},p.ah=function(t){"touch"===t.currentPointer.type&&(this.L=Date.now())},p.$g=function(t){var e=this;-1===this.i?this.i=setTimeout((function(){var r=to(e.f),n=t.pageX-r.x;r=t.pageY-r.y,e.i=-1,Uo(e,n,r,t)}),this.Fg):(clearInterval(this.i),this.i=-1),t.preventDefault()},p.rn=function(t,e,r,n){Uo(this,t,e,r,n=n&&Da(n.dispatchEvent)?n:this.map)},p.Yi=function(){this.v&&(this.v=!1,this.map.dispatchEvent(new sd("contextmenuclose",this.map)))},p.o=function(){var t=this.map.K();clearInterval(this.i),t&&Le(t,Vo,this.Yi,!1,this),Go.prototype.o.call(this)};var Vo=["mousedown","touchstart","pointerdown","wheel"];function Wo(t,e,r,n,i){Wo.l.constructor.call(this,"wheel"),this.delta=t,this.viewportX=e,this.viewportY=r,this.target=n,this.originalEvent=i}function Xo(t){var e="onwheel"in document;this.R=e,this.L=(e?"d":"wheelD")+"elta",this.i=A(this.i,this),Xo.l.constructor.call(this,t,[{La:(e?"":"mouse")+"wheel",listener:this.i}]),this.v=this.map.b}function Yo(t){this.i=A(this.i,this),Go.call(this,t,[{La:"mousedown",listener:this.i},{La:"mousemove",listener:this.i,target:window},{La:"mouseup",listener:this.i,target:window},{La:"mouseover",listener:this.i},{La:"mouseout",listener:this.i},{La:"dragstart",listener:this.v}])}function Zo(t){var e=t.b.element.style;if(-1!==$o.indexOf(t))throw Error("InvalidArgument: map is already in use");this.a=t,$o.push(t),e.msTouchAction=e.touchAction="none",ad||!window.PointerEvent&&!window.MSPointerEvent?(this.c=new Oo(this.a),this.b=new Yo(this.a)):this.c=new Po(this.a),this.g=new Xo(this.a),this.f=new To(this.a),this.a.mb(this.C,this),nd.call(this)}u(Wo,sd),t("H.mapevents.WheelEvent",Wo),u(Xo,Go),Xo.prototype.i=function(t){if(!t.dl){var e=to(this.f),r=t.pageX-e.x;e=t.pageY-e.y;var n,i=this.L,o=t[i+(i+"Y"in t?"Y":"")];if($c&&"rtl"===x.getComputedStyle(this.v.element).direction&&(r-=(x.devicePixelRatio-1)*this.v.width),o){var a=Math.abs,s=a(o);o=(!(n=t[i+"X"])||3<=s/a(n))&&(!(n=t[i+"Z"])||3<=s/a(n))?(+(0<o)-+(0>o))*(this.R?1:-1):0}(r=new Wo(o,r,e,null,t)).delta&&(t.stopImmediatePropagation(),t.preventDefault(),this.map.Kd(r.viewportX,r.viewportY,this.N.bind(this,r)))}},Xo.prototype.N=function(t,e){var r,n,i=t.target=e||this.map;setTimeout((function(){i.dispatchEvent(t),t.c||(r=t.originalEvent,(n=new x.WheelEvent("wheel",r)).dl=!0,r.target.dispatchEvent(n))}),0)},u(Yo,Go),Yo.prototype.i=function(t){var e,r=t.type,n=to(this.f);n={x:t.pageX-n.x,y:t.pageY-n.y},(e=this.a.a[0]||null)||(e=new vo(n.x,n.y,1,"mouse"),this.a.push(e)),this.b.push(e),wo(e,n.x,n.y),/^mouse(?:move|over|out)$/.test(r)?Io(this,"pointermove",t):(/^mouse(down|up)$/.test(r)&&(n=t.which-1,"up"===uo.RegExp.$1?zo(e,n):xo(e,n)),Io(this,r.replace("mouse","pointer"),t)),this.b.clear()},Yo.prototype.v=function(t){t.preventDefault()},u(Zo,nd),t("H.mapevents.MapEvents",Zo);var $o=[];function ap(t,e){var r;if(e=void 0===e?{}:e,ap.l.constructor.call(this),-1!==bp.indexOf(t))throw new D(ap,0,"events are already used");this.b=r=t.a,this.j=t,bp.push(t),r.draggable=!0,this.i=e.kinetics||{duration:600,ease:Zl},this.m=e.modifierKey||"Alt",this.enable(e.enabled),this.c=r.b,this.f=this.c.element,this.g=0,r.addEventListener("dragstart",this.xh,!1,this),r.addEventListener("drag",this.Xj,!1,this),r.addEventListener("dragend",this.wh,!0,this),r.addEventListener("wheel",this.lk,!1,this),r.addEventListener("dbltap",this.gk,!1,this),r.addEventListener("pointermove",this.Yj,!1,this),De(this.f,"contextmenu",this.Wj,!1,this),t.mb(this.C,this)}Gc($o),Zo.prototype.C=function(){delete this.a,this.c.C(),this.g.C(),this.f.C(),this.b&&this.b.C(),$o.splice($o.indexOf(this.a),1),nd.prototype.C.call(this)},Zo.prototype.dispose=Zo.prototype.C,Zo.prototype.Hl=function(){return this.a},Zo.prototype.getAttachedMap=Zo.prototype.Hl,u(ap,nd),t("H.mapevents.Behavior",ap);var bp=[];Gc(bp),ap.prototype.a=0;var cp={PANNING:1,PINCH_ZOOM:2,WHEEL_ZOOM:4,DBL_TAP_ZOOM:8,FRACTIONAL_ZOOM:16,TILT:32,HEADING:64};ap.Feature=cp;var dp=cp.PANNING,ep=cp.PINCH_ZOOM,fp=cp.WHEEL_ZOOM,gp=cp.DBL_TAP_ZOOM,hp=cp.FRACTIONAL_ZOOM,ip=cp.TILT,jp=cp.HEADING,kp=dp|ep|fp|gp|hp|ip|jp;function lp(t,e){if(t!==+t||t%1||0>t||2147483647<t)throw new D(e,0,"integer in range [0...0x7FFFFFFF] required")}function mp(t,e,r){var n,i="touch"===e.currentPointer.type,o=0;if(n=!i){n=t.m;var a,s=e.originalEvent;a=s.getModifierState?s.getModifierState(n):!!s[n.replace(/^Control$/,"ctrl").toLowerCase()+"Key"],n=a}return n?o|=ip|jp:(o|=dp,i&&(2===(e=e.pointers).length&&(o|=ep|jp,r?55>Bd(e[0].viewportY-e[1].viewportY)&&(o|=ip):t.fh&Hl.TILT&&(o|=ip)))),((o&=t.a)&ip?Hl.TILT:0)|(o&jp?Hl.HEADING:0)|(o&ep?Hl.ZOOM:0)|(o&dp?Hl.COORD:0)}function np(t){var e=t.pointers;return t=e[0],e=e[1],t=[t.viewportX,t.viewportY],e&&t.push(e.viewportX,e.viewportY),t}function op(t,e,r,n,i){var o=+r-+e;if(t=t.b.c,isNaN(+e))throw Error("start zoom needs to be a number");if(isNaN(+r))throw Error("to zoom needs to be a number");0!==o&&(t.startControl(null,n,i),t.control(0,0,6,0,0,0),t.endControl(!0,(function(t){t.zoom=r})))}function pp(t,e){return Xa.apply(null,arguments),t}function qp(t,e){var r=x.console;r&&r.warn&&(t=wc(t)+" is deprecated and will be removed soon. ",e&&(t+=e),r.warn(t))}function U(t,e,r,n,i,o){if(!t||!e)throw new D(U,B,'Parameters "scheme" and "host" must be specified');this.li(t),this.Te(e),this.sd(r),this.hi(i),this.Hk(o),this.eg(n)}function rp(t,e){var r,n,i,o=x.document,a="";if(o){if(a=o.createElement("a"),e){var s=(r=o.getElementsByTagName("base")[0])&&r.href,l=o.head,u=r||l.appendChild(o.createElement("base"));u.href=e}a.href=t,a=a.href,e&&(r?r.href=s:l.removeChild(u))}else/[\w]+:\/\//.test(t)&&(a=t);if(t=(s=/(?:(\w+):\/\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\/[^?#]*)?(\?[^#]+)?(#.*)?/.exec(a))[1],l=s[4],e=s[5],u=s[6],o=s[7],r=s[8],!s[2]&&l&&/@/.test(l)&&(l=l.split("@")[1]),s=U,u=u&&0<u.length?u.substr(1):"",a={},o)for(n=/([?&]?([^=&+]+))(=([^&]+))?/g;i=n.exec(o);)a[decodeURIComponent(i[2])]=i[4]?decodeURIComponent(i[4]):void 0;return new s(t,l,u,a,isNaN(+e)?void 0:+e,r&&0<r.length?r.substr(1):"")}function tp(t){function e(t,e){return encodeURIComponent(t)+(void 0===e?"":"="+encodeURIComponent(e).replace(/[!'()*]/g,(function(t){return"%"+t.charCodeAt(0).toString(16)})))}var r,n=[],i=t.a;for(r in i)if(i.hasOwnProperty(r)&&"function"!==typeof i[r]){var o=t.a[r];C(o,up)?o.a.forEach((function(t){n.push(e(r,t))})):n.push(e(r,o))}return 0<n.length?"?"+n.join("&"):""}function vp(t){var e=Hf("H-service","1.30.15","f5837cb5d",{region:"row"});return t.a.xnlp="CL_JSMv3."+e.version,t}function sp(t){var e,r=0;for(e in t.a)if(t.a.hasOwnProperty(e)&&"function"!==typeof t.a[e]&&0<++r)break;return!r}function up(t){var e;if(!zc(t))throw new D(up,0,t);for(e=0;e<t.length;e++){var r=t[e];if(!Ac(r)&&!Dc(r))throw new D(up,0,"The array can only contain strings and numbers")}this.a=t}ap.DRAGGING=dp,ap.WHEELZOOM=fp,ap.DBLTAPZOOM=gp,ap.FRACTIONALZOOM=hp,ap.prototype.disable=function(t){var e=this.a;t!==B?(lp(t,this.disable),e^=e&t):e=0,this.c.endInteraction(!0),this.a=e,this.b.draggable=0<(e&(dp|ip|jp|ep))},ap.prototype.disable=ap.prototype.disable,ap.prototype.enable=function(t){var e=this.a;t!==B?(lp(t,this.enable),e|=t&kp):e=kp,this.a=e,this.b.draggable=0<(e&(dp|ip|jp|ep))},ap.prototype.enable=ap.prototype.enable,ap.prototype.isEnabled=function(t){return lp(t,this.isEnabled),t===(this.a&t)},ap.prototype.isEnabled=ap.prototype.isEnabled,p=ap.prototype,p.fh=0,p.xh=function(t){var e=mp(this,t,!0);if(this.fh=e){var r=this.c;if(t=np(t),r.startInteraction(e,this.i),r.interaction.apply(r,t),this.a&fp&&!(this.a&hp)&&(e=t[0],r=t[1],this.g)){t=this.b.ib();var n=(0>this.g?Ad:zd)(t);t!==n&&(this.g=0,op(this,t,n,e,r))}}},p.Xj=function(t){var e=mp(this,t,!1);if(e!==this.fh)"pointerout"!==t.originalEvent.type&&"pointerover"!==t.originalEvent.type&&(this.wh(t),this.xh(t));else if(e){e=this.c;var r=np(t);e.interaction.apply(e,r),t.originalEvent.preventDefault()}},p.wh=function(t){mp(this,t,!1)&&this.c.endInteraction(!this.i)},p.lk=function(t){if(!t.defaultPrevented&&this.a&fp){var e=t.delta,r=this.b.ib(),n=this.b,i=n.f.type;n=this.a&hp?r-e:(0>-e?Ad:zd)(r)-e,i!==ik.P2D&&i!==ik.WEBGL&&i!==ik.HARP||(op(this,r,n,t.viewportX,t.viewportY),this.g=e),t.preventDefault()}},p.Yj=function(){},p.gk=function(t){var e=t.currentPointer,r=this.b.ib(),n=t.currentPointer.type,i=this.b.f.type;(i===ik.P2D||i===ik.WEBGL||i===ik.HARP)&&this.a&gp&&(t="mouse"===n?0===t.originalEvent.button?-1:1:0<t.pointers.length?1:-1,op(this,r,t=this.a&hp?r-t:(0>-t?Ad:zd)(r)-t,e.viewportX,e.viewportY))},p.Wj=function(t){return!(this.a&gp)||(t.preventDefault(),!1)},p.C=function(){var t=this.b;t&&(t.draggable=!1,t.removeEventListener("dragstart",this.xh,!1,this),t.removeEventListener("drag",this.Xj,!1,this),t.removeEventListener("dragend",this.wh,!0,this),t.removeEventListener("wheel",this.lk,!1,this),t.removeEventListener("dbltap",this.gk,!1,this),t.removeEventListener("pointermove",this.Yj,!1,this),delete this.b),this.f&&(this.f.style.msTouchAction="",Le(this.f,"contextmenu",this.Wj,!1,this),delete this.f),delete this.c,delete this.i,bp.splice(bp.indexOf(this.j),1),delete this.j,nd.prototype.C.call(this)},ap.prototype.dispose=ap.prototype.C,t("H.mapevents.buildInfo",(function(){return Hf("H-mapevents","1.30.15","f5837cb5d",{region:"row"})})),R.prototype.m=ca(3,(function(t){var e=this.getCache(),r=this;if(t!==y){C(t,Pk,R.prototype.m,0);var n=t}else n=wl;n!==e&&e.ka((function(t,e,i){return!!r.Rb(t)&&(n.add(t,e,i),!0)})),this.T=n})),qi.prototype.b=ca(2,(function(t){this.g=t,(t=this.getState())!==Uh.INIT&&t!==Uh.LOADING&&xi(this)})),t("H.service.Url",U),U.parse=rp,U.prototype.clone=function(){var t,e={};for(t in this.a)e[t]=this.a[t];return new U(this.i,this.g,this.b,e,this.f,this.c)},U.prototype.clone=U.prototype.clone,U.prototype.li=function(t){if(!t||"string"!==typeof t)throw new D(this.li,0,'The "scheme" parameter must be a non-empty string.');return this.i=t,this},U.prototype.setScheme=U.prototype.li,U.prototype.Gm=function(){return this.i},U.prototype.getScheme=U.prototype.Gm,U.prototype.Te=function(t){if(!t||"string"!==typeof t||"-"===t.charAt(0)||"."===t.charAt(0)||"."===t.charAt(t.length-1))throw new D(this.Te,0,'The "host" parameter is not a valid host name.');return this.g=t,this},U.prototype.setHost=U.prototype.Te,U.prototype.cm=function(){return this.g},U.prototype.getHost=U.prototype.cm,U.prototype.sd=function(t){return this.b=t||void 0,this},U.prototype.setPath=U.prototype.sd,U.prototype.vm=function(){return this.b},U.prototype.getPath=U.prototype.vm,U.prototype.eg=function(t){if(t){if("object"!=typeof t)throw new D(this.eg,0,'Parameter "params" must be an object.');this.a=t}else this.a={};return this},U.prototype.setQuery=U.prototype.eg,U.prototype.Fj=function(){return!sp(this)},U.prototype.hasQuery=U.prototype.Fj,U.prototype.getQuery=function(){return this.a},U.prototype.getQuery=U.prototype.getQuery,U.prototype.hi=function(t){if(void 0===t)this.f=t;else{var e=Zd(+t<<0,0,65535);if(e!=t)throw new D(this.hi,0,'Parameter "port" must be an integer in range [0...65535]');this.f=e}return this},U.prototype.setPort=U.prototype.hi,U.prototype.xm=function(){return this.f},U.prototype.getPort=U.prototype.xm,U.prototype.Hk=function(t){return this.c=t||void 0,this},U.prototype.setAnchor=U.prototype.Hk,U.prototype.ed=function(){return this.c},U.prototype.getAnchor=U.prototype.ed,U.prototype.I=function(t){if("object"!==typeof t)throw new D(this.I,0,'Parameter "other" must be an object.');var e,r=this.a;for(e in t)t.hasOwnProperty(e)&&"function"!==typeof t[e]&&(r[e]=t[e]);return this},U.prototype.mergeQuery=U.prototype.I,U.prototype.za=function(t){if(!t||"string"!==typeof t)throw new D(this.za,0,'Parameter "subDomain" must be a non-empty string');return"."===t.substr(t.length-1)&&(t=t.substr(0,t.length-1)),this.Te(t+"."+this.g)},U.prototype.addSubDomain=U.prototype.za,U.prototype.F=function(t){if(!t||"string"!==typeof t)throw new D(this.F,0,'Parameter "subPath" must be a non-empty string');return this.sd((this.b?this.b+"/":"")+t)},U.prototype.addSubPath=U.prototype.F,U.prototype.toString=function(){return[this.i+"://",this.g,this.f?":"+this.f:"",this.b||!sp(this)||this.c?"/":"",this.b?encodeURI(this.b):"",tp(this),this.c?"#"+encodeURIComponent(this.c):""].join("")},U.prototype.toString=U.prototype.toString,U.MultiValueQueryParameter=up,up.prototype.Rm=function(){return this.a},up.prototype.getValues=up.prototype.Rm;var wp=globalThis;function xp(){}sc("monospace serif"),xp.prototype.pop=function(t){return this[t]||(this[t]=[]),this[t].pop()||document.createElement("canvas")},xp.prototype.push=function(t,e){this[e]||(this[e]=[]),this[e].push(t)};var yp=new xp;function zp(){var t=decodeURIComponent(wp.H.getScriptPath());return rp(t=t?"/"===t[t.length-1]?t.substring(0,t.length-1):t:"https://js.api.here.com/v3/3.1.30.15").F("styles")}function V(t){var e=(t=pp({},this.c,t)).apikey||t.apiKey,r=t.baseUrl;if(r=e?r?0:"baseUrl":"apikey")throw new D(V,0,'"'+r+'" must be specified');this.Jk(t.baseUrl),this.b=e,this.a.I({apikey:e}),this.f=t.headers||{},this.g=Va(t.servicesConfig||{})}function Ap(t,e,r){var n=this,i=+(r=r||{}).min,o=+r.max;r.tileSize=r.tileSize||512,r.min=i?Zd(i,1,17):1,r.min+=Nk(r.tileSize,1),r.max=o?Zd(o,1,17):17,Ap.l.constructor.call(this,r),C(t,Bp,Ap,0),C(e,Th,Ap,1),this.j=t,e.b&&e.b("OMV"),this.Ob(e,!0),this.R=function(){Cp(n),n.reload(!1)},t.addEventListener("versionupdate",this.R),Cp(this),Ap.prototype.Y=function(){var e=/^v2\/vectortiles\/(.+)\/mc$/.exec(t.D().b);return e?e[1]:B+""}()}function Cp(t){var e=t.gd("_#-;,:","_#-;,:","_#-;,:");t.N=new RegExp("^"+e.replace(/[.*+?^${}()|[\]\\\/]/g,"\\$&").replace(/_#-;,:/g,"\\d+")+"$")}function Ep(t,e,r){var n=t.ab().getState()===Uh.READY,i=Ac(e),o=Ac(r);i&&(t.B=e),o&&(t.v=r),(i||o)&&(t.i=[],(e=(i=/^([a-zA-Z]{2})(-|$)/).exec(e))&&t.i.push(e[1]),(e=i.exec(r))&&t.i.push(e[1]),t.b=!0,n&&t.Ya())}t("H.service.util.eval",(function(a){return eval(a)})),t("H.service.Platform",V),V.prototype.c={apikey:null,baseUrl:new U("https","hereapi"+(lo?".cn":".com"))},V.prototype.Jk=function(t){this.a=vp(t.clone()),this.b=t=this.b,this.a.I({apikey:t})},V.prototype.setBaseUrl=V.prototype.Jk,V.prototype.Ab=function(){return this.a},V.prototype.getBaseUrl=V.prototype.Ab,V.prototype.Qa=function(t,e){try{return t.Mj=!0,new t(pp({platformBaseUrl:this.Ab(),headers:this.f},this.g[t.CONFIG_KEY]||{},e||{}))}finally{t.Mj=!1}},V.prototype.createService=V.prototype.Qa,u(Ap,R),t("H.service.omv.Provider",Ap),Ap.prototype.ld=ff,Ap.prototype.providesOMV=Ap.prototype.ld,Ap.prototype.Rb=function(t){return this.N.test(t)},Ap.prototype.cacheFilter=Ap.prototype.Rb,Ap.prototype.gd=function(t,e,r){return Dp(this.j,t,e,r).toString()},Ap.prototype.getTileKey=Ap.prototype.gd,Ap.prototype.Cb=function(){return this.$},Ap.prototype.getCache=Ap.prototype.Cb,Ap.prototype.MAX_STORE_TIME=2592e6,Ap.prototype.s=function(){return md()},Ap.prototype.g=function(){return md()?ld():Ap.l.g.call(this)},Ap.prototype.J=function(t,e,r,n,i){return this.j.Oa(t,e,r,n,i)},Ap.prototype.requestInternal=Ap.prototype.J,Ap.prototype.bc=function(t){t.b&&t.b("OMV"),this.Ob(t)},Ap.prototype.setStyle=Ap.prototype.bc,Ap.prototype.oa=function(){return Ap.l.ab.apply(this)},Ap.prototype.getStyle=Ap.prototype.oa,Ap.prototype.ab=function(){var t=Ap.l.ab.apply(this),e=t.getState()===Uh.READY,r=t.Kc();return e?r&&r.global&&(this.b&&(this.B&&(r.global.ux_language=this.B),this.v&&(r.global.ux_language_fallback=this.v)),this.u&&(r.global.poi.default.visible=this.u),this.b||this.u)&&(t=new qi(r,t.Ab())):t.load(),t},Ap.prototype.getStyleInternal=Ap.prototype.ab,Ap.prototype.b=!1;var Fp=["en"];function Hp(t){if(!t||!Da(t.requestData))throw new D(Hp,0,"options.requestData");Hp.l.constructor.call(this,t),this.R=t.requestData,this.B=!!t.providesDomMarkers}function Ip(){this.a={}}Ap.prototype.hm=function(){return this.i||Fp},Ap.prototype.getLanguages=Ap.prototype.hm,Ap.prototype.o=function(){Ap.l.o.call(this),this.j.removeEventListener("versionupdate",this.R)},Ap.prototype.$=new Pk(256),Ap.prototype.la=function(t,e){return Gp(this.j.la(),this.Y,e,t)},Ap.prototype.getCopyrights=Ap.prototype.la,V.prototype.lf=function(t,e,r,n,i,o){function a(t,e,r,n,i){return t.hc(e,r,c,n,h,1,i,l)}var s=hk,l={crossOrigin:"anonymous"};if(Ea(t)){var u=t;"crossOrigin"in u&&(l.crossOrigin=u.crossOrigin),t=u.tileSize,e=u.ppi,r=u.lg,n=u.lg2,i=u.style,o=u.pois,u.engineType&&(s=u.engineType,l.engineType=s)}var c=t||512,h={};if(0>[72,250,320,500].indexOf(+e)){if(e!==B)throw new D(this.lf,1,e)}else h.ppi=+e;if(r&&(h.lg=r),n&&(h.lg2=n),i&&(h.style=i),o&&(h.pois=!!o),s===ik.HARP&&!H.map.render.harp)throw new D(this.lf,0,"HARP engine is not supported, module not found");if(e=this.sj(),t=s===ik.WEBGL?new qi(zp().F("omv/miami/normal.day.yaml").toString()):new H.map.render.harp.Style(zp().F("harp/oslo/normal.day.json").toString()),r={engineType:s},Ep(n=(t=e.bd(t,r)).da(),h.lg,h.lg2),n.u=!!h.pois,n={},lo)pp(n,{vector:{normal:{map:t}}});else{i=this.Ug(),o=this.Ug({type:"aerial"}),u=this.yj();var f=s===ik.WEBGL?new qi(zp().F("omv/miami/truck.day.yaml").toString()):new H.map.render.harp.Style(zp().F("harp/oslo/normal.day.json").toString());Ep((e=e.bd(f,r)).da(),h.lg,h.lg2),r=u.Qi(h.lg?{lg:h.lg,i18n:!0,engineType:s}:{engineType:s}),pp(n,{vector:{normal:{map:t,truck:e,traffic:u.Pi(void 0,s),trafficincidents:r}},raster:{normal:{xbase:a(i,"xbasetile","normal.day","png8",!1),xbasenight:a(i,"xbasetile","normal.night","png8",!0),base:a(i,"basetile","normal.day","png8",!1),basenight:a(i,"basetile","normal.night","png8",!0),map:a(i,"maptile","normal.day","png8",!1),mapnight:a(i,"maptile","normal.night","png8",!0),trafficincidents:r,transit:a(i,"maptile","normal.day.transit","png8",!1),labels:a(i,"labeltile","normal.day","png",!1)},satellite:{xbase:a(o,"xbasetile","hybrid.day","jpg",!0),base:a(o,"basetile","hybrid.day","jpg",!0),map:a(o,"maptile","hybrid.day","jpg",!0),labels:a(o,"labeltile","hybrid.day","png",!0)},terrain:{xbase:a(o,"xbasetile","terrain.day","jpg",!1),base:a(o,"basetile","terrain.day","jpg",!1),map:a(o,"maptile","terrain.day","jpg",!1),labels:a(o,"labeltile","terrain.day","png",!1)}}})}return n},V.prototype.createDefaultLayers=V.prototype.lf,u(Hp,R),t("H.map.provider.MarkerTileProvider",Hp),Hp.prototype.Ed=function(t){return t?t.length+1:1},Hp.prototype.getEntryWeight=Hp.prototype.Ed,Hp.prototype.J=function(t,e,r,n,i){var o=this;return this.R(t,e,r,(function(i){for(var a,s,l=[],u=i.length;u--;)(s=i[u]).fo=o.getTileKey(t,e,r),s.ha(o),a=s.pb(),(C(s,$i)||1===a.getState())&&l.push(i[u]);n(l)}),i)},Hp.prototype.requestInternal=Hp.prototype.J,Hp.prototype.Pd=function(t,e){e===kh.VISUAL&&(t=this.Cb().get(t.fo))&&(t.valid=!1,this.Ra(t))},Hp.prototype.invalidateObject=Hp.prototype.Pd,Hp.prototype.Ib=function(){return this.B},Hp.prototype.providesDomMarkers=Hp.prototype.Ib,Hp.prototype.Jb=ff,Hp.prototype.providesMarkers=Hp.prototype.Jb,Ip.prototype.pb=function(t,e){var r,n=t+e;return(r=this.a[n])?r:(t=(t=Jp.MARKER.replace("{{icon}}",Kp[t]||Kp.OTHER)).replace("{{color}}",Lp[e]||Lp.BLOCKING),e={size:{w:26,h:33},anchor:{x:13,y:30},hitArea:new Vi(Wi.POLYGON,Mp.MARKER)},this.a[n]=new Uj(t,e))};var Jp={MARKER:'<svg width="26" height="33" enable-background="new 0 0 26 33" viewBox="0 0 26 33" xmlns="http://www.w3.org/2000/svg"><path d="m26 33h-26v-33h26z" fill="#8c8c8c" opacity="0"/><path d="m17 29.566c0 1.116-1.791 2.022-4 2.022s-4-.906-4-2.022c0-1.118 1.791-2.026 4-2.026s4 .908 4 2.026" fill="#878787" opacity=".6"/><path d="m1.795 17.971c-1.562-1.555-1.574-3.828-.028-5.655l8.343-10.021c.769-.895 1.795-1.384 2.894-1.384 1.117 0 2.197.521 2.889 1.394l8.338 10.014c1.588 1.854 1.578 4.022-.029 5.65l-11.202 11.202z" fill="{{color}}"/>{{icon}}</svg>'},Kp={CONGESTION:'<path style="fill:#FFFFFF;" d="M12.966,1.177c0.965,0,1.894,0.442,2.496,1.204l8.378,10.258c1.362,1.592,1.482,3.477,0,4.979L12.994,28.464L2.143,17.618c-1.381-1.375-1.38-3.348,0-4.979l8.314-10.258C11.174,1.547,12.085,1.177,12.966,1.177 M12.967,0.177L12.967,0.177c-1.247,0-2.408,0.551-3.269,1.552l-8.332,10.28c-1.711,2.022-1.688,4.567,0.07,6.317l10.85,10.845l0.707,0.707l0.707-0.707l10.847-10.846c1.784-1.807,1.803-4.292,0.053-6.337L16.237,1.748C15.462,0.769,14.236,0.177,12.967,0.177L12.967,0.177z M16.645,10.405l-2.025-2.22c-0.48-0.51-1.15-0.8-1.84-0.8H9.53c-0.69,0-1.36,0.29-1.84,0.8l-1.94,2.22c-0.39,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.44l0.255-0.539c0.204-0.431,0.456-0.837,0.753-1.21l0.962-1.211l0.83-0.9c0.32-0.35,0.72-0.63,1.15-0.82H8.23c-0.28,0-0.55-0.07-0.79-0.22l-0.28-0.17l1.27-1.45c0.28-0.31,0.68-0.48,1.1-0.48h3.25c0.42,0,0.82,0.17,1.1,0.48l1.354,1.54H16.645z M18.31,12.205c-0.35-0.37-0.81-0.63-1.3-0.74c-0.18-0.04-0.36-0.06-0.54-0.06h-3.24c-0.7,0-1.37,0.29-1.84,0.8l-1.13,1.22l-0.82,1c-0.38,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.75v-1h5.99v1h1.75c0.69,0,1.25-0.56,1.25-1.25v-1.64c0-0.74-0.2-1.46-0.59-2.09L18.31,12.205z M12.1,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C12.35,16.993,12.238,17.105,12.1,17.105z M18.59,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C18.84,16.993,18.728,17.105,18.59,17.105z M18.56,14.505c-0.24,0.15-0.51,0.22-0.79,0.22h-5.85c-0.28,0-0.55-0.07-0.78-0.22l-0.29-0.17l1.27-1.45c0.15-0.16,0.33-0.28,0.53-0.37c0.18-0.07,0.38-0.11,0.58-0.11h3.24c0.24,0,0.48,0.06,0.68,0.16c0.16,0.08,0.3,0.19,0.42,0.32l1.27,1.45L18.56,14.505z M8.42,13.03h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C8.67,12.918,8.559,13.03,8.42,13.03z"/>',ROADWORKS:'<path d="m13.004 1.411c.964 0 1.894.441 2.496 1.204l8.346 10.023c1.363 1.592 1.482 3.477 0 4.979l-10.846 10.847-10.852-10.846c-1.381-1.375-1.379-3.348 0-4.979l8.346-10.023c.717-.835 1.628-1.205 2.51-1.205m0-1c-1.248 0-2.408.551-3.268 1.552l-8.356 10.035c-1.718 2.033-1.695 4.578.064 6.328l10.85 10.845.706.707.707-.707 10.846-10.846c1.784-1.808 1.803-4.293.053-6.337l-8.337-10.012c-.769-.973-1.996-1.565-3.265-1.565zm-.575 15.264c.018-.332-.13-.651-.394-.851l-2.945-2.235-.21.36c-.22.39-.41.78-.58 1.19l-.677 2.129-1.364 3.051h1.314l2.109-4.672 1.317 1.212.138 3.46h1.092zm6.16-1.327c-.401-.54-1.209-.539-1.609.001l-1.17 1.58-2.29-1.74-.139-4.054c-.011-.276-.134-.535-.342-.716l-.7-.61c-.185-.161-.422-.25-.667-.25h-1.885c-.335 0-.648.168-.833.447l-1.144 1.723 7.58 5.76-1.86 2.51c-.098.132-.004.32.161.32h6.648l1.142-1.077zm-8.79-2.989-.876-.665.841-1.018.965.043zm1.63 1.24.969-1.781.118 2.61zm2.76-5.79c-.64 0-1.16.52-1.16 1.16 0 .65.52 1.17 1.16 1.17s1.16-.52 1.16-1.17c0-.64-.52-1.16-1.16-1.16z" fill="#fff"/>',ACCIDENT:'<path style="fill:#FFFFFF;" d="M12.998,1.091c0.964,0,1.894,0.442,2.496,1.204l8.346,10.344c1.363,1.592,1.482,3.477,0,4.979L12.994,28.465L2.143,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.344C11.205,1.462,12.115,1.091,12.998,1.091 M12.998,0.091L12.998,0.091c-1.248,0-2.408,0.551-3.269,1.552L1.364,12.011c-1.708,2.021-1.685,4.566,0.073,6.316l10.85,10.845l0.707,0.707l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337l-8.327-10.32C15.494,0.684,14.268,0.091,12.998,0.091L12.998,0.091z M7.83,18.982l-3.309-1.855l0.945,1.855H7.83z M16.111,19h3.942l1.596-2L16.111,19z M10.512,20.064l1.021-1.021l1.632,0.076c0.329,0.018,0.651-0.022,0.963-0.123c0.626-0.206,1.122-0.76,1.288-1.44l0.264-1.089l2.066-0.93c0.373-0.17,0.673-0.42,0.861-0.731c0.275-0.449,0.405-0.97,0.369-1.498L18.9,11.676l1.021-1.021l-0.724-0.724l-0.427,0.427l-0.121-0.364c-0.201-0.603-0.54-1.151-0.989-1.6l-1.159-1.159c-0.5-0.5-1.31-0.5-1.809,0l-1.267,1.267l0.724,0.724l-5.066,5.066l-0.724-0.724l-1.267,1.267c-0.5,0.5-0.5,1.31,0,1.809l1.159,1.159c0.449,0.449,0.997,0.788,1.6,0.989l0.364,0.121l-0.427,0.427L10.512,20.064z M14.901,10.349l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0l-0.732-0.732C14.803,10.604,14.803,10.446,14.901,10.349z M9.472,15.777l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0L9.472,16.13C9.375,16.033,9.375,15.874,9.472,15.777z M11.391,17.615c0.069-0.271,0.206-0.518,0.405-0.717l4.961-4.961c0.195-0.195,0.445-0.337,0.717-0.405l0.344-0.083l0.137,1.925c0.022,0.318-0.058,0.63-0.221,0.901c-0.101,0.166-0.279,0.271-0.409,0.329L14.8,15.74l-0.38,1.574c-0.083,0.344-0.318,0.615-0.612,0.713c-0.188,0.058-0.38,0.083-0.579,0.072l-1.925-0.138L11.391,17.615z"/>',OTHER:'<path style="fill:#FFFFFF;" d="M13.004,1.411c0.964,0,1.894,0.441,2.496,1.204l8.346,10.023c1.363,1.592,1.482,3.477,0,4.979L13,28.465L2.148,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.023C11.211,1.781,12.122,1.411,13.004,1.411 M13.004,0.411L13.004,0.411c-1.248,0-2.408,0.551-3.268,1.552L1.38,11.998c-1.718,2.033-1.694,4.579,0.064,6.328l10.85,10.845L13,29.878l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337L16.269,1.976C15.5,1.003,14.273,0.411,13.004,0.411L13.004,0.411z M14.716,20.139c0,0.947-0.758,1.724-1.724,1.724c-0.947,0-1.704-0.777-1.704-1.724c0-0.928,0.757-1.704,1.704-1.704C13.958,18.435,14.716,19.211,14.716,20.139z M14.204,16.33H11.78l-0.537-8.533h3.5L14.204,16.33z"/>'},Lp={BLOCKING:"#323232",VERYHIGH:"#d5232f",HIGH:"#ffa100"},Mp={MARKER:[24.1,17.8,14.2,28.42,16.8,29.4,12.8,31.4,8.79,29.4,11.23,28.42,1.7,17.8,1.7,12.1,10,1.9,12.9,.498,15.8,1.9,24.1,12.1,24.1,17.8]};function Np(t,e,r){(r=r||{}).criticality||(r.criticality="major,critical"),C(t,Op,Np,0),Hp.call(this,{max:20,min:8,requestData:A(this.N,this),engineType:r.engineType}),this.b=new Ip,this.v=t,this.i=r,this.reload=A(this.reload,this),this.u=setInterval(this.reload,e||18e4)}u(Np,Hp),t("H.service.traffic.incidents.Provider",Np);var Pp={minor:"HIGH","low impact":"HIGH",major:"VERYHIGH",critical:"BLOCKING"};Np.prototype.N=function(t,e,r,n,i){var o=this,a=this.b;return this.v.requestIncidentsByTile(t,e,r,(function(t){var e,r=[];if(t=t.TRAFFIC_ITEMS)for(e=(t=t.TRAFFIC_ITEM).length;e--;){var i=t[e],s=i.TRAFFIC_ITEM_TYPE_DESC;switch(s){case"ACCIDENT":case"CONGESTION":var l=s;break;case"CONSTRUCTION":l="ROADWORKS";break;default:l="OTHER"}l=a.pb(l,Pp[i.CRITICALITY.DESCRIPTION]),(s=new Jn({lat:(s=i.LOCATION.GEOLOC.ORIGIN).LATITUDE,lng:s.LONGITUDE},{provider:o,icon:l})).setData(i),r.push(s)}n(r)}),i,this.i)},Np.prototype.C=function(){Hp.prototype.C.call(this),clearInterval(this.u)},Np.prototype.dispose=Np.prototype.C;var Qp="A21 A22 F01 F02 F08 F04 F05 F07 F03 F06 A2F F13 A25 A2C F12 D1B F1B A27 E12 A3A A24 A3D A3F F1F F25 F2C E32 A33 F29 D26 D36 F26 D0F F0F F2B E0C D3A A45 D23 D11 F2E F19 F14 F39 A4A A4B A5C D38 F2A F1A D0A F1C A48 D25 D1D F32 A46 A3E D24 E1C E32 A5F D2E D22 D0A".split(" ");function Rp(t,e,r,n){Rp.l.constructor.call(this,{min:10,max:21,engineType:n}),C(t,Op,Rp,0),this.u=t,this.b=r||Sp,this.b.responseattributes="sh,fc",this.i=setInterval(A(this.reload,this),e||18e4),this.c===ik.WEBGL?this.Ob(new qi(zp().F("traffic/flow.yaml").toString()),!0):this.Ob(new H.map.render.harp.Style({styles:[{when:["==",["geometry-type"],"LineString"],technique:"solid-line",renderOrder:10002,attr:{color:["case",[">=",["get","JF"],10],"black",[">=",["get","JF"],8],"red",[">=",["get","JF"],4],"yellow","green"],lineWidth:3,metricUnit:"Pixel"}}]}))}u(Rp,R),t("H.service.traffic.flow.Provider",Rp),Rp.prototype.Qh=ff,Rp.prototype.providesGeoJSON=Rp.prototype.Qh,Rp.prototype.oa=function(){return this.ab()},Rp.prototype.getStyle=Rp.prototype.oa,Rp.prototype.bc=function(t){t.b&&t.b("GeoJSONTileSource"),this.Ob(t)},Rp.prototype.setStyle=Rp.prototype.bc;var Sp={locationreferences:"tmc,shp"};Rp.prototype.o=function(){Rp.l.o.call(this),clearInterval(this.i)},Rp.prototype.J=function(t,e,r,n,i){return this.u.requestFlowByTile(t,e,r,(function(t){t.type&&-1!==t.type.indexOf("Error")?i(t.Details):n(t)}),i,this.b)},Rp.prototype.requestInternal=Rp.prototype.J,Rp.prototype.Sb=function(t,e,r,n,i){var o,a,s,l,u,c={type:"FeatureCollection",features:[]},h=n.RWS.length;for(o=0;o<h;o++){var f=n.RWS[o],p=f.RW,A=p.length,d=-1!==Qp.indexOf(f.EXTENDED_COUNTRY_CODE+f.EBU_COUNTRY_CODE);for(f=0;f<A;f++){var g=p[f].FIS,y=g.length;for(g=0;g<y;g++){var v=p[f].FIS[g].FI,m=v.length;for(a=0;a<m;a++){var b=v[a],_=[],w=b.CF[0],x=!!w.SSS,E={type:"Feature",properties:w,geometry:{type:"MultiLineString",coordinates:_}};for(E.properties.LHT=d,b.SHP.length&&(E.properties.FC=b.SHP[0].FC),x&&(u=[]),w=0;w<b.SHP.length;w++){var B=b.SHP[w].value,C=B.length;for(s=0;s<C;s++){var S=x?u:void 0,k=new io(B[s].trim()),T=[],N={};for(k.be();-1!==(l=k.Hb());)l===Tp?(N.lat=+String.fromCharCode.apply(Rp,k.Bd()),k.next(),k.be()):l===Up?(N.lng=+String.fromCharCode.apply(Rp,k.Bd()),T.push([N.lng,N.lat]),S&&S.push(ng(N)),N=[],k.next(),k.be()):k.next();N.lng=+String.fromCharCode.apply(Rp,k.Bd()),T.push([N.lng,N.lat]),S&&S.push(ng(N)),l=T,_.push(l)}}c.features.push(E)}}}}return Rp.l.Sb.call(this,t,e,r,c,i)},Rp.prototype.createTileInternal=Rp.prototype.Sb;var Up=32,Tp=44;function Vp(t,e){if(e=void 0===e?{}:e,!t.Mj)throw new Yc(t);Vp.l.constructor.call(this);var r=Wp(this,e);if(!r.baseUrl&&!r.platformBaseUrl)throw new D(t,0,'either "baseUrl" or "platformBaseUrl" must be specified');this.j=(r.baseUrl?r.baseUrl:r.platformBaseUrl).clone(),(t=r.baseUrl?e:r).host&&this.j.Te(t.host),t.subDomain&&this.j.za(t.subDomain),t.path&&this.j.sd(t.path),vp(this.j),this.i=r.headers||{}}function Wp(t,e){return t=t.a(),e?pp({},t,e):t}function Xp(t,e,r){return function(n){return"function"!==typeof n.json?Promise.reject(r(Yp(e,n))):n.json().then((function(e){return r(t.b(e))}),(function(){return r(Yp(e,n))}))}}function Yp(t,e){return Error((e.statusText?"["+e.statusText+"] ":"")+t+" request failed")}function Zp(t){function e(e){n.contains(i)&&n.removeChild(i),u&&clearTimeout(u),delete Zp.a[o],e&&t.aj&&t.aj.call(l,e)}if(!t.url||!t.Ag)throw Error('Parameter "options" must specify at least a URL and a callback.');if("function"!==typeof t.Ag)throw Error("Parameters options.callback must be a function");var r=t.Co||document,n=r.getElementsByTagName("head")[0],i=r.createElement("script");r=t.url instanceof U?t.url:rp(t.url,t.Bo);var o=Zp.b++,a=t.pl||"callback",s=t.Ag,l={},u=null;return l.id=o,l.cancel=function(){e("cancelled")},0!==t.timeout&&(u=x.setTimeout((function(){e("timeout")}),t.timeout||3e4)),Zp.a[o]=function(t){e(),s.call(l,t)},i.type="text/javascript",i.src=r.toString()+(r.Fj()?"&":"?")+a+"="+(t.Do?"H.service.jsonp.handleResponse("+o+")":encodeURI("H.service.jsonp.handleResponse("+o+")")),n.appendChild(i),l}function Op(t){Op.l.constructor.call(this,Op,t),this.c=Wp(this,t).callbackKey}function $p(t,e,r,n){return Zp({url:e,Ag:r,aj:function(t){n(Error("["+t+"] "+e+" request failed"))},pl:t.c})}function aq(t){aq.l.constructor.call(this,aq,t),this.c=Wp(this,t).reverseSubDomain}function bq(t){bq.l.constructor.call(this,bq,t)}function cq(t,e,r,n,i){return e=t.D().clone().F(e).I(r||{}),t.J(e,n,i)}function dq(){this.a={}}function eq(t,e){for(var r in e)if(e.hasOwnProperty(r)){var n,i=e[r],o=t.a[r]||(t.a[r]=[]),a=i.length;for(n=0;n<a;n++)o.push(new fq(i[n]))}}function Gp(t,e,r,n){var i=(t=t.a[e])?t.length:0,o=[];for(e=0;e<i;e++)t[e].hd(r,n)&&o.push(t[e]);return o}function fq(t){var e,r=t.boxes;if(this.label=t.label,this.min=t.minLevel,this.max=t.maxLevel,this.b=[],r&&(e=r.length)){var n=r[0],i=new K(n[0],n[1],n[2],n[3]);for(this.b.push(i),this.a=new K(n[0],n[1],n[2],n[3]),t=1;t<e;t++)i=new K((n=r[t])[0],n[1],n[2],n[3]),this.b.push(i),this.a.Xb(i,!1,this.a)}}function Bp(t){Bp.l.constructor.call(this,Bp,t),t=Wp(this,t).mapVersion,this.c=uc(t)?t:gq[this.D().toString()],uc(this.c)||hq(this)}u(Vp,F),t("H.service.Service",Vp),Vp.prototype.a=function(){return{}},Vp.prototype.D=function(){return this.j},Vp.prototype.getUrl=Vp.prototype.D,Vp.prototype.J=function(t,e,r,n){return(n=new tf(void 0===n?"application/json":n,t.toString(),he,{headers:this.i})).then(e,Xp(this,t,r)),n},Vp.prototype.b=function(t){return Error(t.message)},t("H.service.jsonp",Zp),Zp.Wm=function(t){return(t=Zp.a[t])?t:function(){}},Zp.handleResponse=Zp.Wm,Zp.b=0,Zp.a={},u(Op,Vp),t("H.service.traffic.Service",Op),Op.prototype.a=function(){return{subDomain:"traffic.ls",path:"traffic/6.1",callbackKey:"jsoncallback"}},Op.CONFIG_KEY="traffic",Op.prototype.Pi=function(t,e){return new ql(new Rp(this,void 0,t,e),{max:22})},Op.prototype.createFlowLayer=Op.prototype.Pi,Op.prototype.Qi=function(t){return new Kn(new Np(this,void 0,t))},Op.prototype.createIncidentsLayer=Op.prototype.Qi,Op.prototype.Tn=function(t,e,r){return $p(this,t=this.D().clone().F("incidents.json").I(t),e,r)},Op.prototype.requestIncidents=Op.prototype.Tn,Op.prototype.Sn=function(t,e,r,n,i,o){return $p(this,t=this.D().clone().F(["flow/json",r,t,e].join("/")).I(o||{}),n,i)},Op.prototype.requestFlowByTile=Op.prototype.Sn,Op.prototype.Un=function(t,e,r,n,i,o){return $p(this,t=this.D().clone().F(["incidents/json",r,t,e].join("/")).I(o||{}),n,i)},Op.prototype.requestIncidentsByTile=Op.prototype.Un,V.prototype.yj=function(t){return this.Qa(Op,t)},V.prototype.getTrafficService=V.prototype.yj,u(aq,Vp),t("H.service.GeocodingService",aq),aq.prototype.a=function(){return{subDomain:"geocoder.ls",reverseSubDomain:"reverse",path:"6.2"}},aq.CONFIG_KEY="geocoding",aq.prototype.b=function(t){return Error(t.Details||t.message||t.error)},aq.prototype.Lg=function(t,e,r){return t=this.D().clone().F("geocode.json").I(t),this.J(t,e,r)},aq.prototype.geocode=aq.prototype.Lg,aq.prototype.Uh=function(t,e,r){return t=this.D().clone().F("reversegeocode.json").I(t),this.c&&t.za(this.c),this.J(t,e,r)},aq.prototype.reverseGeocode=aq.prototype.Uh,aq.prototype.search=function(t,e,r){return t=this.D().clone().F("search.json").I(t),this.J(t,e,r)},aq.prototype.search=aq.prototype.search,V.prototype.lj=function(t){return qp(V.prototype.lj,"Use H.service.Platform#getSearchService instead"),this.Qa(aq,t)},V.prototype.getGeocodingService=V.prototype.lj,u(bq,Vp),t("H.service.PlacesService",bq),bq.prototype.a=function(){return{subDomain:"places.ls",path:"places/v1"}},bq.CONFIG_KEY="places",bq.EntryPoint={SEARCH:"discover/search",SUGGEST:"suggest",EXPLORE:"discover/explore",AROUND:"discover/around",HERE:"discover/here",CATEGORIES:"categories/places"},bq.prototype.request=function(t,e,r,n){return cq(this,t,e,r,n)},bq.prototype.request=bq.prototype.request,bq.prototype.search=function(t,e,r){return cq(this,"discover/search",t,e,r)},bq.prototype.search=bq.prototype.search,bq.prototype.eo=function(t,e,r){return cq(this,"suggest",t,e,r)},bq.prototype.suggest=bq.prototype.eo,bq.prototype.zl=function(t,e,r){return cq(this,"discover/explore",t,e,r)},bq.prototype.explore=bq.prototype.zl,bq.prototype.ll=function(t,e,r){return cq(this,"discover/around",t,e,r)},bq.prototype.around=bq.prototype.ll,bq.prototype.Ym=function(t,e,r){return cq(this,"discover/here",t,e,r)},bq.prototype.here=bq.prototype.Ym,bq.prototype.ql=function(t,e,r){return cq(this,"categories/places",t,e,r)},bq.prototype.categories=bq.prototype.ql,bq.prototype.Al=function(t,e,r,n){return t=rp(t).I(this.D().getQuery()).I(n||{}),this.J(t,e,r)},bq.prototype.follow=bq.prototype.Al,V.prototype.uj=function(t){return qp(V.prototype.uj,"Use H.service.Platform#getSearchService instead"),this.Qa(bq,t)},V.prototype.getPlacesService=V.prototype.uj,fq.prototype.hd=function(t,e){if(t>=this.min&&t<=this.max){if(!(t=this.b.length)||!this.a)return!0;if(this.a.hd(e))for(;t--;)if(this.b[t].hd(e))return!0}return!1},u(Bp,Vp),t("H.service.omv.Service",Bp),Bp.prototype.a=function(){return{subDomain:"vector",path:"v2/vectortiles/base/mc"}},Bp.CONFIG_KEY="omv";var gq={};function hq(t){t.J(t.D().clone().F("../../info"),(function(e){e=e.mapVersion;var r=t.D().toString();t.c=e,e!==gq[r]&&(gq[r]=e,t.dispatchEvent("versionupdate"))}),(function(){}))}function Dp(t,e,r,n){return e=t.D().clone().F(n+"/"+e+"/"+r+"/omv"),uc(t.c)&&e.I({mv:t.c}),e}function iq(t){iq.l.constructor.call(this,iq,t),this.c=t.getToken}function sq(t,e,r,n){return t.D().clone().F(e+"/layers/"+r+"/features").I(n||{})}function qq(t,e,r,n,i){return sq(t,r,n,e=Object.assign({},i,{id:new up(e)}))}function oq(t,e,r,n,i){return t.D().clone().F(r+"/layers/"+n+"/features/"+e).I(i||{})}function lq(t,e,r,n,i,o,a){return a=void 0===a?"application/json":a,r={method:r,headers:Object.assign({},o?{"Content-Type":"application/geo+json"}:void 0,"function"===typeof t.c?{Authorization:"Bearer "+t.c()}:void 0,t.i)},o&&(r.data=JSON.stringify(o)),(o=new tf(a,e.toString(),he,r)).then(n,Xp(t,e,i)),o}function jq(t,e,r,n){xc(r,"String",t,e,"must be a string"),xc(n,"String",t,e+1,"must be a string")}function nq(t,e){xc(e,"String",t,0,"must be a string")}function pq(t,e){if(!Array.isArray(e)||0===e.length||e.some((function(t){return"string"!==typeof t})))throw new D(t,0,"must be a non-empty array of strings")}function rq(t,e,r){if(!Ea(r))throw new D(t,e,"must be a GeoJSON object")}function kq(t,e,r,n){if(!Da(r))throw new D(t,e,"must be a function");if(!Da(n))throw new D(t,e+1,"must be a function")}function tq(t,e,r,n){if(tq.l.constructor.call(this,n?{min:n.min,max:n.max,engineType:n.engineType}:void 0),C(t,iq,tq,0),!Ac(e))throw new D(tq,1,'"catalogHrn" must be a string');if(!Ac(r))throw new D(tq,2,'"layerId" must be a string');this.v=t,this.b=e,this.i=r,this.u=Ea(n)&&Ea(n.parameters)?n.parameters:{},this.Ob(this.c===ik.WEBGL?new qi({sources:{iml:{type:"MVT"}},layers:{iml:{data:{source:"iml",layer:this.b+":"+this.i},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#0258AE",width:"2px",join:"round",cap:"round"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.b+":"+this.i,when:["==",["geometry-type"],"Point"],technique:"circles",renderOrder:200,color:"#92CF48",size:["interpolate",["linear"],["zoom"],10,8,14,12,18,16]},{layer:this.b+":"+this.i,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#E39E3C",renderOrder:201},{layer:this.b+":"+this.i,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#755DA5",lineWidth:"1px",renderOrder:202},{layer:this.b+":"+this.i,when:["==",["geometry-type"],"LineString"],technique:"solid-line",color:"#0258AE",lineWidth:"2px",renderOrder:203}]}))}function uq(t,e,r,n,i,o,a){var s=this;a=a||{},o=o||{};var l=t.D().clone().F(e+"/"+t.nc()+"/"+r).I(o),u=t.f;this.B=t,this.N=l,Ck.call(this,{tileSize:n,max:512===n?19:20,min:512===n?2:0,getURL:function(t,e,r){var o=s.N.clone();return u&&o.za(u[(r+e+t)%u.length]),o.F(r+"/"+t+"/"+e+"/"+n+"/"+i),o.toString()},crossOrigin:a.crossOrigin,headers:a.headers,uri:l.toString().replace(/_/g,"")+n,engineType:a.engineType}),this.Xa=e,this.ya=r,this.xa=o,this.$=r.split(".")[0],this.i=A(this.i,this),this.getCopyrights=this.la,t.addEventListener("versionupdate",this.i)}function vq(t){vq.l.constructor.call(this,vq,t),t=Wp(this,t),this.f=t.shards,(this.g=t.ignoreTypes?null:t.type)&&this.D().za(this.g),this.c=t.version,this.s=new dq,this.u={},this.m=0,"newest"===this.c&&wq(this)}function xq(t,e){for(var r={},n=t[e+"s"][e],i=n.length;i--;)r[n[i].id]=n[i];t[e+"s"]=r}function wq(t){var e=t.D().clone().F("info").I({output:"json"});t.f&&e.za(t.f[0]),t.J(e,(function(e){var r;if(xq(e=e.response,"map"),xq(e,"scheme"),xq(e,"tiletype"),xq(e,"format"),xq(e,"resolution"),xq(e,"language"),"newest"===t.c&&"traffic"!==t.g)for(r in e.maps)e.maps[r].hash&&e.maps[r].newest&&(t.c=e.maps[r].hash,t.dispatchEvent("versionupdate"));t.v=e,t.dispatchEvent("infoupdate")}),(function(t){throw t}))}function yq(t){var e=t.D().clone().F("copyright").F(t.nc()).I({output:"json"});t.f&&e.za(t.f[0]),t.m=1,t.J(e,(function(e){t.m=2,eq(t.s,e),t.dispatchEvent("copyrightupdate")}),(function(e){throw t.m=-1,e}))}function zq(t){zq.l.constructor.call(this,zq,t)}function Aq(t){Aq.l.constructor.call(this,Aq,t),qp(Aq,"Use HERE Routing API v8 instead.")}function Bq(t){Bq.l.constructor.call(this,Bq,t)}function Cq(){}function Dq(){}function Eq(t,e){this.a=t,this.b=e}function Fq(){}function Gq(t,e){this.b=t,this.a=e}function Hq(t,e,r){var n;if(e=e||(t&&t.length?Object.keys(t[0]):B),this.ub=t,e)for(this.yd=e,this.Bg=t=nc(),n=e.length;n--;)t[e[n]]=!0;r!==B&&(this.Dh=r)}function Iq(t,e){return t.ub?t.ub.push(e):t.ub=[e],t.ub.length-1}function Jq(t){var e=Kq;if(!t||!Ac(af(t.layerId,t.layer))||!Dc(t.level)||uc(t.rowFilter)&&!Da(t.rowFilter)||uc(t.rowFilterContext)&&!Ea(t.rowFilterContext))throw new D(e,1,uc("invalid layer config")?"invalid layer config":t)}function Lq(t,e,r,n){n=n||Mq,this.a={},n.provider=t,this.invalidate=gf,Lq.l.constructor.call(this,e,n),delete this.invalidate,r&&(this.b=r),this.pa(kh.ADD)}Gc(gq),Bp.prototype.om=function(){return this.c},Bp.prototype.getMapVersion=Bp.prototype.om,Bp.prototype.bd=function(t,e){e=e||{};var r={max:22};return lo&&(e.min=r.min=4),new ql(new Ap(this,t,e),r)},Bp.prototype.createLayer=Bp.prototype.bd,Bp.prototype.Oa=function(t,e,r,n,i){return this.J(Dp(this,t,e,r),(function(t){return t.arrayBuffer().then(n,i)}),i,"arraybuffer")},Bp.prototype.Wg=function(t,e){if(!Da(t))throw new D(this.Wg,0,'"onResult" must be a function');if(!Da(e))throw new D(this.Wg,1,'"onError" must be a function');return this.J(this.D().clone().sd("v2/vectortiles/pviews"),t,e)},Bp.prototype.getPoliticalViews=Bp.prototype.Wg,V.prototype.sj=function(t){return this.Qa(Bp,t)},V.prototype.getOMVService=V.prototype.sj,Bp.prototype.g=function(t){eq(this.f,t),this.dispatchEvent("copyrightupdate")},Bp.prototype.la=function(){return this.f||(this.f=new dq,this.J(this.D().clone().F("../../copyrights"),A(this.g,this),jd)),this.f},Bp.prototype.getCopyrights=Bp.prototype.la,u(iq,Vp),t("H.service.iml.Service",iq),iq.prototype.a=function(){return{host:"interactive.data.api.platform.here.com",path:"interactive/v1/catalogs"}},iq.prototype.b=function(t){var e=[{keys:["code","title","cause","action"],format:function(){return t.code+": "+t.title+"; cause: "+t.cause+"; action: "+t.action}},{keys:["error","error_description"],format:function(){return t.error+": "+t.error_description}},{keys:["error","errorMessage"],format:function(){return t.error+": "+t.errorMessage}}];return Error(Ea(t)?function(){for(var r=ea(e),n=r.next();!n.done;n=r.next()){var i=(n=n.value).format;if(n.keys.every((function(e){return t[e]})))return i()}return JSON.stringify(t)}():t)},iq.prototype.Md=function(t,e,r,n,i){var o=this.Md;return jq(o,0,t,e),kq(o,2,r,n),lq(this,t=this.D().clone().F(t+"/layers/"+e+"/statistics").I(i||{}),"GET",r,n)},iq.prototype.getStatistics=iq.prototype.Md,iq.prototype.uf=function(t,e,r,n,i,o,a,s,l){var u=l?"":".mvtf";return lq(this,t=this.D().clone().F(n+"/layers/"+i+"/tile/web/"+r+"_"+t+"_"+e+u).I(Object.assign({clip:!0},s)),"GET",l?o:function(t){return t.arrayBuffer().then(o)},a,void 0,l?"application/json":"arraybuffer")},iq.prototype.getFeaturesByTile=iq.prototype.uf,iq.prototype.ij=function(t,e,r,n,i,o){var a=this.ij;return nq(a,t),jq(a,1,e,r),kq(a,3,n,i),lq(this,t=oq(this,t,e,r,o),"GET",n,i)},iq.prototype.getFeatureById=iq.prototype.ij,iq.prototype.Mc=function(t,e,r,n,i,o){var a=this.Mc;return pq(a,t),jq(a,1,e,r),kq(a,3,n,i),lq(this,t=qq(this,t,e,r,o),"GET",n,i)},iq.prototype.getFeaturesById=iq.prototype.Mc,iq.prototype.Fd=function(t,e,r,n,i){var o=this.Fd;if(!Ea(t)||!(t.bbox||t.north&&t.east&&t.south&&t.west))throw new D(o,0,'must be an object with either "bbox" or a full set of "north", "east", "south" and "west"');return jq(o,1,e,r),kq(o,3,n,i),lq(this,t=this.D().clone().F(e+"/layers/"+r+"/bbox").I(t),"GET",n,i)},iq.prototype.getFeaturesByBoundingBox=iq.prototype.Fd,iq.prototype.kj=function(t,e,r,n,i){var o=this.kj;if(!(Ea(t)&&t.radius&&(t.lat&&(t.lng||t.lon)||t.refCatalogHrn&&t.refLayerId&&t.refFeatureId)))throw new D(o,0,'must be an object with "radius" and a combination of either "lat"+"lng" or "refCatalogHrn"+"refLayerId"+"refFeatureId"');return jq(o,1,e,r),kq(o,3,n,i),lq(this,t=this.D().clone().F(e+"/layers/"+r+"/spatial").I(t),"GET",n,i)},iq.prototype.getFeaturesByPointAndRadius=iq.prototype.kj,iq.prototype.jj=function(t,e,r,n,i,o){var a=this.jj;if(!Ea(t)||!t.radius)throw new D(a,0,'must be an object with "radius"');return rq(a,1,e),jq(a,2,r,n),kq(a,4,i,o),lq(this,t=this.D().clone().F(r+"/layers/"+n+"/spatial").I(t),"POST",i,o,e)},iq.prototype.getFeaturesByGeometryAndRadius=iq.prototype.jj,iq.prototype.Fk=function(t,e,r,n,i){var o=this.Fk;return jq(o,0,t,e),kq(o,2,r,n),lq(this,t=this.D().clone().F(t+"/layers/"+e+"/search").I(i||{}),"GET",r,n)},iq.prototype.searchFeatures=iq.prototype.Fk,iq.prototype.Qj=function(t,e,r,n,i){var o=this.Qj;return jq(o,0,t,e),kq(o,2,r,n),lq(this,t=this.D().clone().F(t+"/layers/"+e+"/iterate").I(i||{}),"GET",r,n)},iq.prototype.iterateFeatures=iq.prototype.Qj,iq.prototype.Uc=function(t,e,r,n,i,o){var a=this.Uc;return rq(a,0,t),jq(a,1,e,r),kq(a,3,n,i),lq(this,e=sq(this,e,r,o),"PUT",n,i,t)},iq.prototype.putFeatures=iq.prototype.Uc,iq.prototype.Sc=function(t,e,r,n,i,o){var a=this.Sc;return rq(a,0,t),jq(a,1,e,r),kq(a,3,n,i),lq(this,e=sq(this,e,r,o),"POST",n,i,t)},iq.prototype.postFeatures=iq.prototype.Sc,iq.prototype.cd=function(t,e,r,n,i){var o=this.cd;return pq(o,t),jq(o,1,e,r),kq(o,3,n,i),lq(this,t=qq(this,t,e,r),"DELETE",n,i)},iq.prototype.deleteFeatures=iq.prototype.cd,iq.prototype.yk=function(t,e,r,n,i,o,a){var s=this.yk;return nq(s,t),rq(s,1,e),jq(s,2,r,n),kq(s,4,i,o),lq(this,t=oq(this,t,r,n,a),"PUT",i,o,e)},iq.prototype.putFeature=iq.prototype.yk,iq.prototype.rk=function(t,e,r,n,i,o,a){var s=this.rk;return nq(s,t),rq(s,1,e),jq(s,2,r,n),kq(s,4,i,o),lq(this,t=oq(this,t,r,n,a),"PATCH",i,o,e)},iq.prototype.patchFeature=iq.prototype.rk,iq.prototype.Ui=function(t,e,r,n,i){var o=this.Ui;return nq(o,t),jq(o,1,e,r),kq(o,3,n,i),lq(this,t=oq(this,t,e,r),"DELETE",n,i,void 0,"text/plain")},iq.prototype.deleteFeature=iq.prototype.Ui,iq.CONFIG_KEY="iml",V.prototype.dm=function(t){return this.Qa(iq,t)},V.prototype.getIMLService=V.prototype.dm,u(tq,R),t("H.service.iml.Provider",tq),tq.prototype.J=function(t,e,r,n,i){return this.v.uf(t,e,r,this.b,this.i,n,i,this.u)},tq.prototype.requestInternal=tq.prototype.J,tq.prototype.ld=ff,tq.prototype.providesOMV=tq.prototype.ld,tq.prototype.oa=function(){return this.ab()},tq.prototype.getStyle=tq.prototype.oa,tq.prototype.bc=function(t){C(t,qi)&&t.b("MVT"),this.Ob(t)},tq.prototype.setStyle=tq.prototype.bc,u(uq,Ck),uq.prototype.MAX_STORE_TIME=2592e6,uq.prototype.o=function(){Ck.prototype.o.call(this),this.B.removeEventListener("versionupdate",this.i)},uq.prototype.la=function(t,e){return Gp(this.B.la(),this.$,e,t)},uq.prototype.getCopyrights=uq.prototype.la,uq.prototype.i=function(){var t=this.B;this.N=t.D().clone().F(this.Xa+"/"+t.nc()+"/"+this.ya).I(this.xa),this.reload(!1)},uq.prototype.s=function(){return md()},uq.prototype.g=function(){return md()?ld():uq.l.g.call(this)},u(vq,Vp),t("H.service.MapTileService",vq),vq.prototype.a=function(){return{subDomain:"maps.ls",path:"maptile/2.1",type:"base",version:"newest",shards:["1","2","3","4"]}},vq.CONFIG_KEY="maptile",vq.prototype.zj=function(){return this.g},vq.prototype.getType=vq.prototype.zj,vq.prototype.nc=function(){return this.c},vq.prototype.getVersion=vq.prototype.nc,vq.prototype.la=function(){return this.m||(this.c&&"newest"!==this.c||"traffic"===this.g)&&yq(this),this.s},vq.prototype.getCopyrights=vq.prototype.la,vq.prototype.Rg=function(){return this.v},vq.prototype.getInfo=vq.prototype.Rg,vq.prototype.oe=function(t,e,r,n,i,o){var a,s=this.D().clone().F(t+"/"+this.nc()+"/"+e+"/"+r+"/"+n).I(i||{}).toString(),l=0,u=s.length;if(0!==u)for(a=0;a<u;a++){l=(l<<5)-l+s.charCodeAt(a),l|=0}return s=l,(l=this.u[s])||(l=new uq(this,t,e,r,n,i,pp({headers:this.i},o||{})),this.u[s]=l),l},vq.prototype.createTileProvider=vq.prototype.oe,vq.prototype.hc=function(t,e,r,n,i,o,a,s){return new ql(t=this.oe(t,e,r,n,i,s),{opacity:o,dark:!!a})},vq.prototype.createTileLayer=vq.prototype.hc,V.prototype.Ug=function(t){return this.Qa(vq,t)},V.prototype.getMapTileService=V.prototype.Ug,u(zq,Vp),t("H.service.publicTransit.Service",zq),zq.prototype.a=function(){return{subDomain:"transit.router",path:"v8"}},zq.CONFIG_KEY="publicTransit",zq.prototype.Em=function(t,e,r){return t=this.D().clone().F("routes").I(t),this.J(t,e,r)},zq.prototype.getRoutes=zq.prototype.Em,zq.prototype.Sl=function(t,e,r){return t=this.D().clone().F("departures").I(t),this.J(t,e,r)},zq.prototype.getDepartures=zq.prototype.Sl,zq.prototype.Im=function(t,e,r){return t=this.D().clone().F("stations").I(t),this.J(t,e,r)},zq.prototype.getStations=zq.prototype.Im,zq.prototype.b=function(t){return Error(JSON.stringify(t))},V.prototype.Am=function(t){return this.Qa(zq,t)},V.prototype.getPublicTransitService=V.prototype.Am,u(Aq,Vp),t("H.service.RoutingService",Aq),Aq.prototype.a=function(){return{subDomain:"route.ls",path:"routing/7.2"}},Aq.prototype.b=function(t){return Error(t.details)},Aq.CONFIG_KEY="routing",Aq.prototype.xd=function(t,e,r){return t=this.D().clone().F("calculateroute.json").I(t),this.J(t,e,r)},Aq.prototype.calculateRoute=Aq.prototype.xd,Aq.prototype.zg=function(t,e,r){return t=this.D().clone().za("isoline").F("calculateisoline.json").I(t),this.J(t,e,r)},Aq.prototype.calculateIsoline=Aq.prototype.zg,u(Bq,Vp),t("H.service.RoutingService8",Bq),Bq.CONFIG_KEY="routing_v8",Bq.prototype.a=function(){return{subDomain:"router",path:"v8/routes"}},Bq.prototype.b=function(t){return Error(t.error)},Bq.prototype.xd=function(t,e,r){return t=this.D().clone().I(t),this.J(t,e,r)},Bq.prototype.calculateRoute=Bq.prototype.xd,Bq.prototype.zg=function(t,e,r){return t=this.D().clone().za("isoline").sd("v8/isolines").I(t),this.J(t,e,r)},Bq.prototype.calculateIsoline=Bq.prototype.zg,V.prototype.wj=function(t,e){if(7===(e=lo?8:+e||7))e=Aq;else{if(8!==e)throw new D(this.wj,1,"allowed values are 7 and 8");e=Bq}return this.Qa(e,t)},V.prototype.getRoutingService=V.prototype.wj,t("H.service.extension.dataView.ITable",Cq),Cq.prototype.Id=function(){},Cq.prototype.getMeta=Cq.prototype.Id,Cq.prototype.Ld=function(){},Cq.prototype.getRowCount=Cq.prototype.Ld,Cq.prototype.mc=function(){},Cq.prototype.getRow=Cq.prototype.mc,Cq.prototype.Ma=function(){},Cq.prototype.getColumnNames=Cq.prototype.Ma,Cq.prototype.ve=function(){},Cq.prototype.getColumn=Cq.prototype.ve,Cq.prototype.sa=function(){},Cq.prototype.getCell=Cq.prototype.sa,Cq.prototype.concat=function(){},Cq.prototype.concat=Cq.prototype.concat,t("H.service.extension.dataView.IRow",Dq),Dq.prototype.Ma=function(){},Dq.prototype.getColumnNames=Dq.prototype.Ma,Dq.prototype.sa=function(){},Dq.prototype.getCell=Dq.prototype.sa,Dq.prototype.fd=function(){},Dq.prototype.getTable=Dq.prototype.fd,t("H.service.extension.dataView.ObjRow",Eq),Eq.prototype.Ma=function(){return this.a.Ma()},Eq.prototype.getColumnNames=Eq.prototype.Ma,Eq.prototype.sa=function(t){return this.a.sa(this.b,t)},Eq.prototype.getCell=Eq.prototype.sa,Eq.prototype.fd=function(){return this.a},Eq.prototype.getTable=Eq.prototype.fd,t("H.service.extension.dataView.IColumn",Fq),Fq.prototype.sa=function(){},Fq.prototype.getCell=Fq.prototype.sa,t("H.service.extension.dataView.ObjColumn",Gq),Gq.prototype.sa=function(t){return this.b.sa(t,this.a)},Gq.prototype.getCell=Gq.prototype.sa,t("H.service.extension.dataView.ObjTable",Hq),p=Hq.prototype,p.Dh=B,p.ub=B,p.yd=B,p.Bg=B,p.Id=function(){return this.Dh},Hq.prototype.getMeta=Hq.prototype.Id,Hq.prototype.Ld=function(){return this.ub?this.ub.length:0},Hq.prototype.getRowCount=Hq.prototype.Ld,Hq.prototype.mc=function(t){var e=this.ub;return e&&e[t]?new Eq(this,t):B},Hq.prototype.getRow=Hq.prototype.mc,Hq.prototype.Ma=function(){return this.yd||hf},Hq.prototype.getColumnNames=Hq.prototype.Ma,Hq.prototype.ve=function(t){return this.Bg[t]?new Gq(this,t):B},Hq.prototype.getColumn=Hq.prototype.ve,Hq.prototype.sa=function(t,e){var r=this.ub;return(t=r&&this.Bg[e]&&r[t])&&t[e]},Hq.prototype.getCell=Hq.prototype.sa,Hq.prototype.concat=function(){var t,e=arguments.length,r=this.yd,n=""+this.yd,i=(this.ub||[]).slice();for(t=0;t<e;t++){var o=arguments[t];if(!(o instanceof Hq))throw new D(this.concat,t);if(o.ub){if(r&&""+o.yd!==n)throw new D(this.concat,t,"Incompatible columns!");i=i.concat(o.ub)}}return new Hq(i,this.yd,this.Dh)},Hq.prototype.concat=Hq.prototype.concat,u(Lq,Eh),t("H.service.remote.Spatial",Lq);var Mq={};function Nq(t,e){this.a=t,e&&(this.b=e)}Lq.prototype.$a=function(){return this.b||Eh.prototype.$a.call(this)},Lq.prototype.getId=Lq.prototype.$a,Lq.prototype.Zf=jd,Lq.prototype.retain=Lq.prototype.Zf,Lq.prototype.release=ff,Lq.prototype.release=Lq.prototype.release;var Oq=new Nq(hf);function Pq(t,e,r){t.a[e.key]=new Nq(r,void 0)}function Qq(t,e,r,n){if(!Da(r))throw new D(t,e,"has invalid type");if(!Da(n))throw new D(t,e+1,"has invalid type")}function Rq(t,e,r){var n=8===t;this.b=e,this.c=r||jd,(this.a=4===t||n)?this.j=n:this.g=1===t,this.f=this.a?"$HProjGeometry":"geometry"}function Sq(t,e,r,n,i){var o=[],a=i.paths,s=a.length,l=0,u=t.b&&t.b(n);for(t=new Lq(e,t.j,B,{style:u||t.i,data:n});l!==s;)o.push(Uq(a[l++]));return Pq(t,r,[new Mh(o,i.interiorsIndex,i.outlinesIndex)]),t}function Tq(t,e,r,n){n=new lg(n[0],n[1]);var i=t.b&&t.b(r);return t.g?t=new Jn(n,t={icon:i,data:r,provider:e}):t=new $i(n,t={icon:i,data:r,provider:e}),t}function Uq(t){for(var e=0,r=t.length,n=[];e<r;)n.push(new G(t[e++],t[e++]));return n}function Vq(t,e){var r={};this.b=t,Xa(r,e||r),mk.call(this,r),this.Uf={},(t=this.Db(nh.SPATIAL)).update(t.a+1,kh.ADD)}function Wq(t){return t.oc(!0)}function Xq(t,e,r){var n,i=e.j&&e.j[r];return!i&&(n=e.m)&&(delete e.m,(e.j=t=t.b.parse(t,e,n))&&(i=t[r])),i||hf}Lq.prototype.Gd=function(t){return(this.a[t.key]||Oq).a},Lq.prototype.getGeometriesForTile=Lq.prototype.Gd,Lq.prototype.Tg=function(t){return(this.a[t.key]||Oq).b},Lq.prototype.getLabels=Lq.prototype.Tg,Rq.prototype.parse=function(t,e,r){var n,i,o,a,s={},l=[],u=0;for(o=r.length;u<o;u++){var c=r[u],h=c.Rows;if(c=h.length){var f=Object.keys(h[0]).filter((function(t){return"geometry"!==t&&"$HProjGeometry"!==t}));for(f=new Hq(h,f),a=0;a<c;a++){var p=h[a];if(i=p[this.f]){if(delete p[this.f],p=f.mc(a))try{(n=this.a?Sq(this,t,e,p,i):Tq(this,t,p,i.path)).ha(t),l.push(n)}catch(A){this.c(A.message)}}else this.c("Layer must contain geometries")}}}return s[this.a?"spatials":this.g?"markers":"domMarkers"]=l,s},u(Vq,mk),t("H.service.remote.ObjectProvider",Vq),Vq.prototype.C=function(){mk.prototype.C.call(this)},Vq.prototype.dispose=Vq.prototype.C,Vq.prototype.wc=function(){return hf},Vq.prototype.requestMarkers=Vq.prototype.wc,Vq.prototype.vc=function(){return hf},Vq.prototype.requestDomMarkers=Vq.prototype.vc,Vq.prototype.od=function(){return hf},Vq.prototype.requestOverlays=Vq.prototype.od,Vq.prototype.Jb=ff,Vq.prototype.providesMarkers=Vq.prototype.Jb,Vq.prototype.Ib=ff,Vq.prototype.providesDomMarkers=Vq.prototype.Ib,Vq.prototype.uc=ff,Vq.prototype.providesSpatials=Vq.prototype.uc,Vq.prototype.Wf=function(){return hf},Vq.prototype.requestSpatials=Vq.prototype.Wf,Vq.prototype.Xf=function(t,e){return t=Xq(this,t,Yq),e&&(t=t.filter(Wq)),t},Vq.prototype.requestSpatialsByTile=Vq.prototype.Xf,Vq.prototype.ba=function(t){var e=t.$a();if(this.Uf[e])throw new Yc(this.ba,"Remote object "+e+" already added");return this.Uf[e]=t},Vq.prototype.Da=function(t){delete this.Uf[t.$a()]};var Yq="spatials";function Zq(t){var e=(t=t||{}).tileCacheSize||1024,r=t.resultType,n=t.styleCallback;if(uc(t.min)||(t.min=12),Zq.l.constructor.call(this,t),-1===$q.indexOf(r))throw new D(Zq,2,"invalid resultType");if(this.b=r,n&&!Da(n))throw new D(Zq,2,"invalid style callback");this.$=n,this.Y=t.pixelRatio||Te(),this.yb=A(this.yb,this),this.m(new Pk(e,A(this.Xa,this))),this.createTileInternal=A(4===r||8===r?this.N:this.R,this)}function ar(t){var e=t.xa;return e||(t.v||(t.v=t.u(t.b,t.$,t.yb)),(e=t.xa=new Vq(t.v)).ha(t),e.addEventListener(t.A.wa,A(t.ya,t)),e.xa=!0),e}u(Zq,R),t("H.service.extension.TileProvider",Zq),Zq.prototype.i=!1,Zq.prototype.getCapabilities=function(){return Zq.l.getCapabilities.call(this)|Oj.CROP_LINES_BY_TILE|Oj.CROP_POLYGONS_BY_TILE},Zq.prototype.Oa=function(t,e,r,n){return this.i?Zq.l.Oa.call(this,t,e,r,n):B},Zq.prototype.requestTile=Zq.prototype.Oa,Zq.prototype.yb=function(t){this.dispatchEvent(new ud("error",Ac(t)?t:t+"",this))},Zq.prototype.Jb=function(){return 1===this.b},Zq.prototype.providesMarkers=Zq.prototype.Jb,Zq.prototype.Ib=function(){return 2===this.b},Zq.prototype.providesDomMarkers=Zq.prototype.Ib,Zq.prototype.uc=function(){return 4===this.b||8===this.b},Zq.prototype.providesSpatials=Zq.prototype.uc,Zq.prototype.R=function(t,e,r,n){var i=this.getTileKey(t,e,r);i=this.Cb().get(i);var o=2==this.b,a=[],s=ar(this);for(i?i.valid=!0:(delete(t=i=new Vk(t,e,r,y)).j,t.m=n),e=(n=Xq(s,i,o?"domMarkers":"markers")).length;e--;)(t=n[e]).ti=i,(o||1===t.pb().getState())&&a.push(t);return i.data=a,i},Zq.prototype.ya=function(t){(t=t.target.ti)&&(t.valid=!1)},Zq.prototype.Zn=function(t){this.B=!!t},Zq.prototype.setTileCanvasRendering=Zq.prototype.Zn,Zq.prototype.B=!0,Zq.prototype.N=function(t,e,r,n){var i=ar(this),o=this.getTileKey(t,e,r),a=this.tileSize,s=this.Cb().get(o);return s||(delete(t=s=new Zk(o,t,e,r,a,this.Y,r,i)).j,t.m=n),this.B?(n=yp.pop(a),s.U(n)||yp.push(n,a)):el(s),s},Zq.prototype.Xa=function(t,e){var r;if(4===this.b||8===this.b){for(r=(t=e.Na()).length;r--;)delete t[r].a[e.key];(t=e.Sf())&&(yp.push(t,this.tileSize),e.Tf())}else for(r=(t=e.data).length;r--;)delete t[r].ti},Zq.prototype.o=function(){Zq.l.o.call(this),ar(this).C()};var br={MARKER:1,DOM_MARKER:2,POLYLINE:4,POLYGON:8};Zq.ResultType=br;var $q=[1,2,4,8];function Kq(t,e,r){var n=this,i=e&&e.rowFilter,o=r.resultType;Kq.l.constructor.call(this,r),C(t,cr,Kq,0),Jq(e),i?(r=Va(e)).rowFilter=i.toString():r=Va(e),delete r.layer,r.layerId=af(e.layerId,e.layer),(new Pf).a("pde","H.service.extension.worker.processor"),t=t.D().clone().F(dr+"."+er).I({meta:1}),new Sf("pde",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:4===o,serverUrl:t.toString(),layerConfigs:[r],horizontalMargin:1}]}).then((function(){n.i=!0,n.Ra()}),this.yb)}u(Kq,Zq),t("H.service.extension.platformData.TileProvider",Kq),Kq.prototype.u=function(t,e,r){return(t=new Rq(t,e,r)).i=fr,t};var fr=new wh({strokeColor:"transparent",fillColor:"transparent",lineWidth:0,lineJoin:"round",lineCap:"round"});function gr(t,e,r,n,i,o){Qq(gr,1,e,r),Qq(gr,2,n,i),(this.f=t.length)?(this.S=t,this.s=e,this.i=r,this.b=0,this.c=A(this.c,this),this.m=n,this.j=i,this.a=nc(),Xa(this.a,hr,o||{}),this.g={},x.setTimeout(this.c,0)):e(hf,!0)}Kq.prototype.J=function(t,e,r,n,i){var o,a=this,s=this.getTileKey(t,e,r);s=this.Cb().get(s);var l={cancel:jd},u=!0,c=this.b;if(s&&(4===c||8===c?s.Qd()||(n(yp.pop(this.tileSize),null),u=!1):(n(y),u=!1)),u){var h=wp.setTimeout((function(){(o=new Sf("pde",{message:[a.uid,1,[t,e,r]]})).then(n,i)}),500);l.cancel=function(){o?o.cancel():wp.clearTimeout(h)}}return l},Kq.prototype.requestInternal=Kq.prototype.J,Kq.prototype.o=function(){Kq.l.o.call(this),new Sf("pde",{message:[this.uid,3]})},Kq.ResultType=br;var hr={duration:100,El:"geometry",Dl:"WKT",Vn:"searchAttributes",Ti:B};function ir(t){this.a=t}function cr(t){cr.l.constructor.call(this,cr,t)}gr.prototype.c=function(){for(var t,e=[],r=!1,n=Jk();this.b<this.f;){var i=this.S[this.b];if(r=i.attributes,t=i.layerId||this.a.Ti,i.distance&&(r[this.a.Vn]={nearest:new lg(i.nearestLat,i.nearestLon),distance:i.distance}),i=i[this.a.El]){try{var o=On(new io(i))}catch(a){this.i(new x.Error(a.message)),r=!0;break}r[this.a.Dl]=o}if((i=this.g[t])||(i=this.g[t]=this.m({layerId:t,columnNames:Object.keys(r)})),r=this.j(i,r),e.push(r),this.b++,(r=this.b===this.f)||Jk()-n>=this.a.duration){this.s(e,r);break}}r?this.g={}:this.u=x.setTimeout(this.c,0)},gr.prototype.cancel=function(){x.clearTimeout(this.u),this.b<this.f&&this.i(new x.Error("parsing canceled"))},gr.prototype.cancel=gr.prototype.cancel,ir.prototype.cancel=function(){for(var t=this.a,e=t.length;e--;)t[e].cancel();t.length=0},ir.prototype.cancel=ir.prototype.cancel,u(cr,Vp),t("H.service.extension.platformData.Service",cr),cr.prototype.a=function(){return{subDomain:"s.fleet.ls",path:"1"}},cr.CONFIG_KEY="platformData",cr.prototype.request=function(t,e,r,n,i){var o="text/plain";if(!t)throw new D(this.request,0,t);if(!e)throw new D(this.request,1,e);if(!n)throw new D(this.request,3,n);if(!i)throw new D(this.request,4,i);return t=this.D().clone().F(t+"."+e).I(r),e===jr.JSON&&(o="application/json"),this.J(t,n,i,o)},cr.prototype.request=cr.prototype.request;var dr="tiles";cr.EntryPoint={DOC_ATTRIBUTES:"doc/attributes",DOC_LAYER:"doc/layer",DOC_LAYERS:"doc/layers",DOC_MAPS:"doc/maps",DOC_INDEXES:"doc/indexes",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SERVICE_CONFIGURATION:"serviceconfiguration",STATIC:"static",TILE:"tile",TILES:dr,FILE:"file",INDEX:"index"};var er="json",jr={TXT:"txt",JSON:er,HTML:"html",BIN:"bin"};function kr(t,e,r,n,i){var o,a=[],s=r.layer_id||r.layer_ids;return t=t.request(e,er,r,(function(t){o=new gr(t.geometries,n,i,(function(t){return new Hq([],t.columnNames,t)}),(function(t,e){return t.mc(Iq(t,e))}),{Ti:s}),a.push(o)}),(function(t){i(new x.Error(t))})),a.push(t),new ir(a)}function lr(t,e,r){if(!zc(t))throw new D(r,0,"has invalid type");if(!zc(e))throw new D(r,1,"has invalid type");if(t.length!==e.length||!t.length)throw new D(r,1,"specify one key attribute for each given layer id in the same order")}function mr(t){mr.l.constructor.call(this,mr,t)}function nr(t){var e=or;if(!t||!Ac(t.layerId)||uc(t.rowFilter)&&!Da(t.rowFilter)||uc(t.rowFilterContext)&&!Ea(t.rowFilterContext))throw new D(e,1,uc("invalid layer config")?"invalid layer config":t)}function pr(t){return Ac(t)&&/^[A-Z][A-Z0-9_]*$/.test(t)}function qr(t){for(var e=t&&t.length,r=2<=e&&"WKT"===t[--e]&&"GEOMETRY_ID"===t[--e];r&&e--;)r=pr(t[e]);return r}function rr(t,e){var r="",n=[];if(e){var i=t.geometries;if(i&&i.length){var o=Object.keys(i[0].attributes);for(r=r+"Meta:\t"+e+"\n"+o.join("\t"),r+="\tWKT\n",t=0;t<i.length;t++){var a=i[t].attributes,s=i[t].geometry;for(e=0;e<o.length;e++)n.push(a[o[e]]);r+=n.join("\t"),r+="\t"+s+"\n",n=[]}}}else{if(s={},n=[],t.geometries)for(i=0;i<t.geometries.length;i++)s[(e=t.geometries[i]).layerId]||(s[e.layerId]=[]),s[e.layerId].push(e);for(o in s)n.push({layerId:o,geometries:s[o]});for(t=0;t<n.length;t++)r+=rr(n[t],n[t].layerId)}return r}function or(t,e,r){var n,i=this,o=e&&e.rowFilter;or.l.constructor.call(this,r),C(t,sr,or,0);var a=r.resultType;if(nr(e),o){var s=Va(e);s.rowFilter=o.toString()}else s=e;(new Pf).a("cle","H.service.extension.worker.processor");var l=e.layerId;t.request(tr,ur,{detail_level:"all",layer_id:l},(function(e){var r;for(e=e.layers,r=0;r<e.length;r++)if(e[r].layerId===l){s.level=e[r].level;break}n=t.D().clone().F(vr+"."+ur).I({meta:1}),new Sf("cle",{message:[i.uid,0,{tileSize:i.tileSize,projected:!0,onlyOutline:4===a,serverUrl:n.toString(),layerConfigs:[s],batchTiles:!1,horizontalMargin:1}]}).then((function(){i.i=!0,i.Ra()}),i.yb)}),(function(t){i.yb(t.message)}))}function wr(){if(xr)throw new Yc(wr)}cr.EntryPointType=jr,cr.prototype.hc=function(t,e){var r=e&&e.resultType;return t=new Kq(this,t,e),1==r||2===r?new Kn(t):new ql(t)},cr.prototype.createTileLayer=cr.prototype.hc,cr.prototype.xc=function(t,e,r,n,i,o){function a(t,e){e&&s--,n(t,!s)}var s,l=[];for(lr(t,e,this.xc),Qq(this.xc,3,n,i),C(r,K,this.xc,2),r={bbox:r.c+","+r.a+";"+r.f+","+r.b},o&&Xa(r,o),t=r.layer_id?[r.layer_id]:t,o=0,s=t.length;o<s;o++)r.layer_id=t[o],r.key_attribute=e[o],l.push(kr(this,"search/bbox",r,a,i));return new ir(l)},cr.prototype.searchByBoundingBox=cr.prototype.xc,cr.prototype.Lb=function(t,e,r,n,i,o,a){if(lr(t,e,this.Lb),C(r,lg,this.Lb,2,"has invalid type"),!Dc(n))throw new D(this.Lb,3,"has invalid type");return Qq(this.Lb,4,i,o),t={layer_ids:t.join(","),key_attributes:e.join(","),proximity:r.lat+","+r.lng+","+n},a&&Xa(t,a),kr(this,"search/proximity",t,i,o)},cr.prototype.searchByProximity=cr.prototype.Lb,cr.prototype.Kb=function(t,e,r,n,i,o,a){var s="";if(lr(t,e,this.Kb),!Ac(r)&&!C(r,L))throw new D(this.Kb,1,"has invalid type");if(!Dc(n))throw new D(this.Kb,2,"has invalid type");if(Qq(this.Kb,4,i,o),t={layer_ids:t.join(","),key_attributes:e.join(","),radius:n},Ac(r))t.route_id=r;else{for(n=r.X,r=0,e=n.length;r<e;r+=3)s+=n[r]+","+n[r+1],r<e-3&&(s+=";");t.corridor=s}return a&&Xa(t,a),kr(this,"search/corridor",t,i,o)},cr.prototype.searchByCorridor=cr.prototype.Kb,V.prototype.vj=function(t){return qp(V.prototype.vj),this.Qa(cr,t)},V.prototype.getPlatformDataService=V.prototype.vj,u(mr,Vp),t("H.service.extension.geofencing.Service",mr),mr.prototype.a=function(){return{subDomain:"fleet.ls",path:"2"}},mr.CONFIG_KEY="geofencing",mr.prototype.request=function(t,e,r,n){if(!t)throw new D(this.request,0,t);if(!Da(r))throw new TypeError("onResult must be a function");if(!Da(n))throw new TypeError("onError must be a function");return t=this.D().clone().F(t+".json").I(e),this.J(t,r,n)},mr.prototype.request=mr.prototype.request,mr.prototype.b=function(t){return Error(t.issues&&t.issues.length?t.issues.map((function(t){return t.message})).join(". "):t.message||t.response_code)},mr.EntryPoint={SEARCH_PROXIMITY:"search/proximity"},V.prototype.mj=function(t){return qp(V.prototype.mj),this.Qa(mr,t)},V.prototype.getGeofencingService=V.prototype.mj,t("H.service.extension.customLocation.Permission",{READ:"read",WRITE:"write",EXPORT:"export"}),t("H.service.extension.customLocation.Storage",{READONLY:"readonly",UPDATABLE:"updatable"}),u(or,Zq),t("H.service.extension.customLocation.TileProvider",or),or.prototype.u=function(t,e,r){return new Rq(t,e,r)},or.prototype.J=function(t,e,r,n,i){var o,a=this,s=this.getTileKey(t,e,r);s=this.Cb().get(s);var l={cancel:jd},u=!0,c=this.b;if(s&&(4===c||8===c?s.Qd()||(n(yp.pop(this.tileSize),null),u=!1):(n(y),u=!1)),u){var h=wp.setTimeout((function(){(o=new Sf("cle",{message:[a.uid,1,[t,e,r]]})).then(n,i)}),500);l.cancel=function(){o?o.cancel():wp.clearTimeout(h)}}return l},or.prototype.requestInternal=or.prototype.J,or.prototype.o=function(){or.l.o.call(this),new Sf("cle",{message:[this.uid,3]})},t("H.service.extension.customLocation.Table",wr);var xr=!0;function yr(t,e){var r;xr=!1;var n=new wr;xr=!0,n.c=qc(x.JSON.parse(x.JSON.stringify(t))),t=t.columnNames;var i=nc();for(r=t.length;r--;)i[t[r]]=r;if(n.f=i,n.b=t.length,e){if(e.length%t.length)throw new D(yr,1,"Invalid number of cells")}else e=[];return n.a=e,n}wr.prototype.Id=function(){return this.c},wr.prototype.getMeta=wr.prototype.Id,wr.prototype.Ld=function(){return this.a.length/this.b},wr.prototype.getRowCount=wr.prototype.Ld,wr.prototype.mc=function(t){return t<this.a.length/this.b?new zr(this,t):B},wr.prototype.getRow=wr.prototype.mc,wr.prototype.Fm=function(){var t,e=this.a.length/this.b,r=new x.Array(e);for(t=0;t<e;t++)r[t]=new zr(this,t);return r},wr.prototype.getRows=wr.prototype.Fm,wr.prototype.tg=function(t){var e=this.b,r=this.a,n=r.length/this.b;if(!t||t.length%e)throw new D(this.tg,0,"Invalid number of cells");return this.a=r.concat(t),n},wr.prototype.addCells=wr.prototype.tg,wr.prototype.il=function(){for(var t=this.b,e=this.a,r=this.a.length/this.b;t--;)e.push(y);return this.mc(r)},wr.prototype.addRow=wr.prototype.il,wr.prototype.Ma=function(){return this.c.columnNames},wr.prototype.getColumnNames=wr.prototype.Ma,wr.prototype.ve=function(t){return this.f[t]===B?B:new Ar(this,t)},wr.prototype.getColumn=wr.prototype.ve,wr.prototype.sa=function(t,e){return this.a[t*this.b+this.f[e]]},wr.prototype.getCell=wr.prototype.sa,wr.prototype.yc=function(t,e,r){if(e=this.f[e],t>=this.a.length/this.b)throw new D(this.yc,0,"Row index out of bounds");if(e===B)throw new D(this.yc,0,"Column unknown");this.a[t*this.b+e]=r},wr.prototype.setCell=wr.prototype.yc,wr.prototype.concat=function(t){var e,r=arguments.length,n=""+this.Ma(),i=this.a?this.a.slice():[];for(e=0;e<r;e++){var o=arguments[e];if(!(o instanceof wr))throw new D(this.concat,e);if(""+o.Ma()!==n)throw new D(this.concat,e,"Incompatible columns!");o.a&&(i=i.concat(o.a))}return yr(this.c,i)},wr.prototype.concat=wr.prototype.concat;var Br=/(\n|\t|\r|")/;function Cr(t,e,r,n,i,o,a,s){var l;for(l=0;l<a;l++){l&&e.push("\t");var u=r[n*i+o[l]];if(l!==s){if(u!==y){if(u=String(u),Br.test(u))throw new D(t.ri,0,'Invalid character (\\n, \\r, \\t, or ") in row '+n+" column "+t.c.columnNames[o[l]]);e.push(u)}}else e.push(u)}}function Ar(t,e){this.b=t,this.a=e}function zr(t,e){this.a=t,this.yh=e}function Dr(t){if(t===B)t="\t";else if(!/^[^"\r\n]$/.test(t))throw new D(Dr,0);this.c=String(t).charCodeAt(0),this.zh=A(this.zh,this),this.a=Er}wr.prototype.ri=function(t,e){var r,n=this.b,i=this.Ma(),o=[],a=[],s=this.a,l=-1;for(r=0;r<n;r++)t&&!t.test(i[r])||("WKT"===i[r]&&(l=o.length),o.push(r));if(!(t=o.length))throw new D(this.ri,1,"No columns filtered");if(Cr(this,a,i,0,n,o,t,l),e){var u=e.length;for(r=0;r<u;r++)a.push("\n"),Cr(this,a,s,i=e[r],n,o,t,l)}else for(u=this.Ld(),i=0;i<u;i++)a.push("\n"),Cr(this,a,s,i,n,o,t,l);return a.join("")},wr.Column=Ar,Ar.prototype.sa=function(t){return this.b.sa(t,this.a)},Ar.prototype.getCell=Ar.prototype.sa,Ar.prototype.yc=function(t,e){this.b.yc(t,this.a,e)},Ar.prototype.setCell=Ar.prototype.yc,wr.Row=zr,zr.prototype.Ma=function(){return this.a.Ma()},zr.prototype.getColumnNames=zr.prototype.Ma,zr.prototype.sa=function(t){return this.a.sa(this.yh,t)},zr.prototype.getCell=zr.prototype.sa,zr.prototype.yc=function(t,e){this.a.yc(this.yh,t,e)},zr.prototype.setCell=zr.prototype.yc,zr.prototype.fd=function(){return this.a},zr.prototype.getTable=zr.prototype.fd;var Er=0;function Fr(t,e,r){var n=t.a;if(n!==e)throw 1===n&&(t.a=Er),new Yc(r,"Requires state: "+["READY","PARSE","PAUSE"][e]+" but found "+["READY","PARSE","PAUSE"][n])}function Gr(t,e){var r=[];return t.parse(e,(function(t,e,n){return 1>t&&(r[e]=n),0<t})),t.a=Er,r}function Hr(t,e,r){this.c=new io(t),this.m=e,this.g=!0,this.hf=this.j=this.b=0,Ir(this),this.a=r,this.f=[],this.i=!1}function Ir(t){var e=t.c.Hb();t.s=!1,(t.S=34===e)&&t.c.next()}function Jr(t,e){var r=t.c;switch(t.s=!0,e){case t.m:t.b++;break;case 13:r.next(),10!==r.Hb()&&t.a("CR without LF");case 10:t.b=0,t.j++;break;case-1:t.g=!1;break;default:t.a("End of field expected")}return r.next(),-1}function Kr(t,e,r,n){if(n=n||{},!e)throw new D(Kr,1,"has to be a function");if(!r)throw new D(Kr,2,"has to be a function");for(this.m=e,this.u=r,this.a=[],this.g={},this.f=[],this.b={},this.i={},this.j={},this.s={},this.S=n.duration||100,this.c=A(this.c,this),t=t.split("Meta:\t").slice(1),e=0;e<t.length;e++){r=(n=t[e].split("\n"))[0].split("\t")[0],n=n.slice(1).join("\n"),this.b[r]=new Dr,this.g[r]=Gr(this.b[r],n);var i={layerId:r,columnNames:this.g[r]};this.f.push(r),this.s[r]=yr(i),this.i[r]=Jk(),Lr(this,n,r),this.c(r)}}function Lr(t,e,r){var n=[],i=t.g[r].length-1,o=t.s[r];try{t.b[r].parse(e,(function(e,a,s){var l=!1;return 0<e&&(n[a]=s,a===i&&(t.a.push(o.mc(o.tg(n))),Jk()-t.i[r]>t.S&&(l=!0))),l}),(function(t,e,r){if(0<t&&e===i)return On(r)}))}catch(a){t.u(a)}}function sr(t){sr.l.constructor.call(this,sr,t)}function Mr(t,e,r,n){var i,o=e[t=t===Nr?"changes":"file"],a=Ac(o),s=!a&&C(o,Blob);if(!a&&!s)throw new D(n,0,"Invalid "+t+" parameter");if(Or)i=s?o:pf(o,"text/plain"),(n=new x.FormData).append(t,i,i.name||t+".wkt"),r.method="POST",r.data=n,delete e[t];else if(s)throw new D(n,0,"Sending Blob data is not supported by the browser")}p=Dr.prototype,p.getState=function(){return this.a},p.abort=function(){Fr(this,2,Dr.prototype.abort),this.a=Er},p.zh=function(t){throw this.a=Er,new D(Dr.prototype.parse,0,"Malformed DSV at row "+this.b.j+" column "+this.b.b+": "+t)},p.parse=function(t,e,r){Fr(this,Er,Dr.prototype.parse),t=t.trim(),this.b=new Hr(t,this.c,this.zh),this.f=e,this.fk=r||gf,this.a=2,this.Ah()},p.fk=gf,p.Ah=function(){var t=this.b,e=[];Fr(this,2,Dr.prototype.Ah),this.a=1;do{if(!t.g){this.a=Er;break}if(i>t.b){if(void 0!==r&&r!==i)return void this.b.a("The number of columns must be the same for all rows");var r=i}var n=t.j,i=t.b,o=t.hf,a=this.fk(n,i,t);if(t.hf>o)for(;-1!==t.next(););else{for(;-1!==(o=t.next());)e.push(o);a=String.fromCharCode.apply(y,e),e.length=0}Ir(t),this.f(n,i,a)&&(this.a=t.g?2:Er)}while(1===this.a);2!=this.a&&void 0!==r&&0<i&&r!==i&&this.b.a("The number of columns must be the same for all rows")},p=Hr.prototype,p.hf=0,p.Hb=function(){if(this.s)var t=-1;else{var e=this.c;if(t=e.Hb(),this.S)switch(t){case 34:e.next(),34!==(t=e.Hb())&&(t=Jr(this,t));break;case-1:this.a("Closing quotation mark expected")}else switch(t){case 34:this.a("Unexpected quotation mark");case this.m:case 13:case 10:case-1:t=Jr(this,t)}}return t},p.be=function(){this.i=!0,this.f=[]},p.Bd=function(){var t=this.f.slice();return this.i=!1,this.f=[],t},p.next=function(){var t=this.Hb();return-1!==t&&this.c.next(),this.i&&this.f.push(t),this.hf++,t},Kr.prototype.cancel=function(){for(var t in this.j)x.clearTimeout(this.j[t])},Kr.prototype.cancel=Kr.prototype.cancel,Kr.prototype.c=function(t){var e,r,n=this;this.j[t]=x.setTimeout((function(){if(2===n.b[t].getState())n.i[t]=Jk(),n.m(n.a,!1),n.a=[],n.b[t].Ah(),n.c(t);else{for(e=!0,r=0;r<n.f.length;r++)if(n.b[n.f[r]].getState()!==Er){e=!1;break}e&&(0<n.a.length&&n.m(n.a,!0),n.a=[])}}),0)},u(sr,Vp),t("H.service.extension.customLocation.Service",sr),sr.prototype.a=function(){return{subDomain:"fleet.ls",path:"2"}},sr.CONFIG_KEY="customLocation",sr.prototype.hc=function(t,e){var r=e&&e.resultType;return t=new or(this,t,e),1===r||2===r?new Kn(t):new ql(t)},sr.prototype.createTileLayer=sr.prototype.hc;var Or=x.FormData&&!!x.FormData.prototype.append;function Pr(t,e,r,n,i,o){var a="text/plain",s=e===Qr.LAYERS_UPLOAD||e===Qr.LAYERS_MODIFY||e===Qr.LAYERS_IMPORT,l=n,u={data:B,method:"GET",headers:t.i};if(!e)throw new D(t.request,0,e);if(!r)throw new D(t.request,1,r);Qq(t.request,3,i,o),s&&(C(n,Object,t.request,2,"Invalid request parameters"),Mr(e,l=Va(n),u,t.request));var c=t.D().clone().F(e+"."+r).I(l);return r===Rr.JSON&&(a="application/json"),(t=new tf(a,c.toString(),he,u)).then((function(t){var e=t.issues;e&&t.error_id&&t.response_code?o(Error(e[0].message)):i(t)}),(function(t){"error"===t.type||404===t.status?o(Error(t.statusText||"Unable to load data")):t.json().then((function(t){o(Error("["+t.issues[0].message+"] "+c+" request failed"))}),(function(){o(Error("["+t.statusText+"] "+c+" request failed"))}))})),t}sr.prototype.request=function(t,e,r,n,i){return Pr(this,t,e,r,n,i)},sr.prototype.request=sr.prototype.request;var tr="layers/list",Nr="layers/modify",vr="tiled/tile",Qr={LAYERS_DELETE:"layers/delete",LAYERS_GRANT:"layers/access/grant",LAYERS_LIST:tr,LAYERS_MODIFY:Nr,LAYERS_UPLOAD:"layers/upload",LAYERS_IMPORT:"layers/import",SEARCH_ALL:"search/all",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SEARCH_TILE:vr};sr.EntryPoint=Qr;var ur="json",Rr={TXT:"txt",JSON:ur};function Sr(t,e,r,n,i){var o,a=[];return t=t.request(e,ur,r,(function(t){t.geometries.length?(t=rr(t,r.layer_id),o=new Kr(t,n,i),a.push(o)):n(hf,!0)}),i),a.push(t),new ir(a)}sr.EntryPointType=Rr,sr.prototype.hb=function(t,e,r){var n=this;return this.request("search/all","txt",{filter:'WKT==""',layer_id:t},(function(i){var o=String(i).replace(/[\r\n]+$/g,"").split("\t");n.request(tr,ur,{layer_id:t,detail_level:"all"},(function(t){(t=t.layers[0]).columnNames=o,e(yr(t))}),r)}),r)},sr.prototype.getLayer=sr.prototype.hb,sr.prototype.Dj=function(t,e,r,n){var i=e&&e.length,o=-1,a=this;return function s(){return++o<i?a.request("layers/access/grant",ur,{layer_id:t,granted_app_id:e[o].grantedAppId,permissions:e[o].permissions.join(",")},s,n):a.hb(t,r,n)}()},sr.prototype.grantAccess=sr.prototype.Dj,sr.prototype.Vi=function(t,e,r){return this.request("layers/delete",ur,{layer_ids:t},e,r)},sr.prototype.deleteLayer=sr.prototype.Vi,sr.prototype.bd=function(t,e,r){function n(){setTimeout((function(){l.hb(a,(function(t){setTimeout(i.bind(null,t),c)}),(function(){64e3>u?(u+=c,n()):r(x.Error("Timeout"))}))}),c),c*=2}function i(n){var i=JSON.stringify(n.Ma()),o=t.grants;if(i!==JSON.stringify(s)){var u="Results into different column names on the backend: "+i;setTimeout((function(){l.Vi(a,(function(){r(x.Error(u))}),(function(t){r(x.Error(u+". "+t.message))}))}),c)}else o&&o.length?l.Dj(a,o,e,r):e(n)}var o,a,s,l=this,u=0,c=1e3,h=!t||!pr(a=t.layerId)&&(o="layerId")||!qr(s=t.columnNames)&&(o="columnNames")?0:Da(e)?Da(r)?-1:2:1;if(0<=h)throw new D(l.bd,h,o||arguments[h]);return l.hb(a,(function(){r(x.Error("Layer exists already"))}),(function(){var e={layer_id:a,file:s.join("\t")},i=t.level,o=t.storage;i!==B&&(e.level=i),o!==B&&(e.storage=o),l.request("layers/upload",ur,e,n,r)}))},sr.prototype.createLayer=sr.prototype.bd,sr.prototype.Lb=function(t,e,r,n,i,o){if(!zc(t))throw new D(this.Lb,0,"has invalid type");if(C(e,lg,this.Lb,1,"has invalid type"),!Dc(r))throw new D(this.Lb,2,"has invalid type");return Qq(this.Lb,3,n,i),t={layer_ids:t.join(","),proximity:e.lat+","+e.lng+","+r},o&&Xa(t,o),Sr(this,"search/proximity",t,n,i)},sr.prototype.searchByProximity=sr.prototype.Lb,sr.prototype.Kb=function(t,e,r,n,i,o){var a="";if(!zc(t))throw new D(this.Kb,0,"has invalid type");if(!Ac(e)&&!C(e,L))throw new D(this.Kb,1,"has invalid type");if(!Dc(r))throw new D(this.Kb,2,"has invalid type");if(Qq(this.Kb,3,n,i),t={layer_ids:t.join(","),radius:r},Ac(e))t.route_id=e;else{var s=e.X;for(e=0,r=s.length;e<r;e+=3)a+=s[e]+","+s[e+1],e<r-3&&(a+=",");t.corridor=a}return o&&Xa(t,o),Sr(this,"search/corridor",t,n,i)},sr.prototype.searchByCorridor=sr.prototype.Kb,sr.prototype.xc=function(t,e,r,n,i){function o(t,e){e&&a--,r(t,!a)}var a,s=[];if(!zc(t))throw new D(this.xc,0,"has invalid type");for(C(e,K,this.xc,1,"has invalid type"),Qq(this.xc,2,r,n),e={bbox:e.c+","+e.a+";"+e.f+","+e.b},i&&Xa(e,i),t=e.layer_id?[e.layer_id]:t,i=0,a=t.length;i<a;i++)e.layer_id=t[i],s.push(Sr(this,"search/bbox",e,o,n));return new ir(s)},sr.prototype.searchByBoundingBox=sr.prototype.xc,sr.prototype.Xh=function(t,e,r,n){var i,o=[];if(!Ac(t))throw new D(this.Xh,0,"has invalid type");Qq(this.Xh,1,e,r);var a={layer_id:t};return n&&Xa(a,n),n=this.request("search/all",ur,a,(function(n){n.geometries.length?(n=rr(n,t),i=new Kr(n,e,r),o.push(i)):e(hf,!0)}),r),o.push(n),new ir(o)},sr.prototype.searchAll=sr.prototype.Xh;var Tr={delete:/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/};function Ur(t,e,r,n,i,o){function a(){d++,n(this,d===f)}function s(t){d++,i(t,this,d===f)}var l,u="append"!==e,c={},h=nc(),f=0,p=[],d=0;if(!zc(r))throw new D(o,0,r);for(Qq(o,1,n,i),l=r.length;l--;){var g=r[l];if(C(g,zr)){var v=g.fd().Id().layerId,m=g.sa("GEOMETRY_ID");if(u){if(m===y||""===String(m))var b='GEOMETRY_ID must not be null or ""';c[m=v+"_"+m]&&(b="same GEOMETRY_ID for multiple rows"),c[m]=g}else m!==y&&""!==String(m)&&(b='GEOMETRY_ID must be null or ""')}else b="Invalid type";if(b)throw new D(o,0,"- Invalid row at index "+l+", "+b);(m=h[v])||(m=h[v]=[],f++),m.push(g)}for(v in h){for(r=[],l=(m=h[v]).length;l--;)r.push(m[l].yh);p.push(t.request(Nr,ur,{layer_id:v,action:e,changes:m[0].fd().ri(Tr[e]||null,r)},A(a,m),A(s,m)))}return new ir(p)}function Vr(t){bq.l.constructor.call(this,Vr,t)}function Wr(t){Wr.l.constructor.call(this,Wr,t)}function Xr(t){if(this.f=!!t.toBypassToken,!this.f&&!t.token)throw new D(Xr,0,'"token" must be specified');Xr.l.constructor.call(this,Xr,t),this.m=t.token,this.g={},this.c={}}function bs(t,e,r,n,i,o,a){return i={method:i,headers:Object.assign(t.f?{}:{authorization:"Bearer "+t.m},{"Content-Type":"application/geo+json"},t.i)},o&&(i.data=JSON.stringify(o)),(o=new tf("application/json",(e=Zr(t.D().clone().F(e+"/features").I(a||{}))).toString(),he,i)).then(r,Xp(t,e,n)),o}function as(t,e){t.c[e]=cs,t.zf(e,(function(r){t.c[e]=ds,t.g[e]=r.copyright,t.dispatchEvent("copyrightupdate")}),(function(r){throw t.c[e]=es,r}))}function $r(t,e){return t.f?e:Zr(e).I({access_token:t.m})}function Zr(t){var e=Object.assign({},t.getQuery());return delete e.apikey,t.eg(e)}sr.prototype.Li=function(t,e,r){return Ur(this,"append",t,e,r,this.Li)},sr.prototype.appendRows=sr.prototype.Li,sr.prototype.bl=function(t,e,r){return Ur(this,"update",t,e,r,this.bl)},sr.prototype.updateRows=sr.prototype.bl,sr.prototype.Wi=function(t,e,r){return Ur(this,"delete",t,e,r,this.Wi)},sr.prototype.deleteRows=sr.prototype.Wi,V.prototype.gj=function(t){return qp(V.prototype.gj),this.Qa(sr,t)},V.prototype.getCustomLocationService=V.prototype.gj,u(Vr,Vp),t("H.service.extension.customRoute.Service",Vr),Vr.prototype.a=function(){return{subDomain:"s.fleet.ls",path:"2"}},Vr.CONFIG_KEY="customRoute",Vr.prototype.b=function(t){return Error(t.issues&&t.issues.length?t.issues.map((function(t){return t.message})).join(". "):t)},Vr.prototype.xd=function(t,e,r){return Qq(this.xd,1,e,r),t=this.D().clone().F("calculateroute.json").I(t),this.J(t,e,r)},Vr.prototype.calculateRoute=Vr.prototype.xd,V.prototype.hj=function(t){return qp(V.prototype.hj),this.Qa(Vr,t)},V.prototype.getCustomRoutingService=V.prototype.hj,u(Wr,Vp),t("H.service.SearchService",Wr),Wr.CONFIG_KEY="search",Wr.prototype.a=function(){return{subDomain:"search",path:"v1"}},Wr.prototype.b=function(t){return t=[t.title,t.action,t.cause].filter((function(t){return t})),Error(t.join(". "))},Wr.prototype.Lg=function(t,e,r){return t=this.D().clone().za("geocode").F("geocode").I(t),this.J(t,e,r)},Wr.prototype.geocode=Wr.prototype.Lg,Wr.prototype.Uh=function(t,e,r){return t=this.D().clone().za("revgeocode").F("revgeocode").I(t),this.J(t,e,r)},Wr.prototype.reverseGeocode=Wr.prototype.Uh,Wr.prototype.ml=function(t,e,r){return t=this.D().clone().za("autosuggest").F("autosuggest").I(t),this.J(t,e,r)},Wr.prototype.autosuggest=Wr.prototype.ml,Wr.prototype.tl=function(t,e,r){return t=this.D().clone().za("discover").F("discover").I(t),this.J(t,e,r)},Wr.prototype.discover=Wr.prototype.tl,Wr.prototype.on=function(t,e,r){return t=this.D().clone().za("lookup").F("lookup").I(t),this.J(t,e,r)},Wr.prototype.lookup=Wr.prototype.on,Wr.prototype.ol=function(t,e,r){return t=this.D().clone().za("browse").F("browse").I(t),this.J(t,e,r)},Wr.prototype.browse=Wr.prototype.ol,V.prototype.Hm=function(t){return this.Qa(Wr,t)},V.prototype.getSearchService=V.prototype.Hm,u(Xr,Vp),t("H.service.xyz.Service",Xr),Xr.prototype.a=function(){return{host:"xyz.api.here.com",path:"hub/spaces"}},Xr.prototype.b=function(t){return Error(t.errorMessage||t.message)},Xr.prototype.Xg=function(t,e,r){return xc(t,"String",this.Xg,0,'"projectId" must be a string'),Yr(this.Xg,1,e,r),t=Zr(this.D().clone().sd("project-api/projects/"+t)),this.J(t,e,r)},Xr.prototype.getProject=Xr.prototype.Xg,Xr.prototype.xj=function(t,e,r){return Yr(this.xj,0,t,e),r=$r(this,this.D().clone().I(r||{})),this.J(r,t,e)},Xr.prototype.getSpaces=Xr.prototype.xj,Xr.prototype.zf=function(t,e,r){return xc(t,"String",this.zf,0,'"spaceId" must be a string'),Yr(this.zf,1,e,r),t=$r(this,this.D().clone().F(t)),this.J(t,e,r)},Xr.prototype.getSpace=Xr.prototype.zf,Xr.prototype.Md=function(t,e,r){return xc(t,"String",this.Md,0,'"spaceId" must be a string'),Yr(this.Md,1,e,r),t=$r(this,this.D().clone().F(t+"/statistics")),this.J(t,e,r)},Xr.prototype.getStatistics=Xr.prototype.Md,Xr.prototype.uf=function(t,e,r,n,i,o,a){return t=$r(this,this.D().clone().F(n+"/tile/web/"+r+"_"+t+"_"+e+".mvtf").I(Object.assign({clip:!0},a))),this.J(t,(function(t){return t.arrayBuffer().then(i)}),o,"arraybuffer")},Xr.prototype.search=function(t,e,r,n){return xc(t,"String",this.search,0,'"spaceId" must be a string'),Yr(this.search,1,e,r),t=$r(this,this.D().clone().F(t+"/search").I(n||{})),this.J(t,e,r)},Xr.prototype.search=Xr.prototype.search,Xr.prototype.Mc=function(t,e,r,n){if(xc(t,"String",this.Mc,0,'"spaceId" must be a string'),!Ea(e))throw new D(this.Mc,1,'"params" must be an object');return Yr(this.Mc,2,r,n),t=$r(this,this.D().clone().F(t+"/features").I(e)),this.J(t,r,n)},Xr.prototype.getFeaturesById=Xr.prototype.Mc,Xr.prototype.Fd=function(t,e,r,n){if(xc(t,"String",this.Fd,0,'"spaceId" must be a string'),!Ea(e))throw new D(this.Mc,1,'"params" must be an object');return Yr(this.Fd,2,r,n),t=$r(this,this.D().clone().F(t+"/bbox").I(e)),this.J(t,r,n)},Xr.prototype.getFeaturesByBoundingBox=Xr.prototype.Fd,Xr.prototype.la=function(t){var e=this.g[t];return e||(this.c[t]||as(this,t),null)},Xr.prototype.Uc=function(t,e,r,n,i){if(xc(t,"String",this.Uc,0,'"spaceId" must be a string'),!Ea(e))throw new D(this.Uc,1,'"geojsonObject" must be an object');if(Yr(this.Uc,2,r,n),i&&!Ea(i))throw new D(this.Uc,4,'"opt_params" must be an object');return bs(this,t,r,n,"PUT",e,i)},Xr.prototype.putFeatures=Xr.prototype.Uc,Xr.prototype.Sc=function(t,e,r,n,i){if(xc(t,"String",this.Sc,0,'"spaceId" must be a string'),!Ea(e))throw new D(this.Sc,1,'"featureCollection" must be an object');if(Yr(this.Sc,2,r,n),i&&!Ea(i))throw new D(this.Sc,4,'"opt_params" must be an object');return bs(this,t,r,n,"POST",e,i)},Xr.prototype.postFeatures=Xr.prototype.Sc,Xr.prototype.cd=function(t,e,r,n){if(xc(t,"String",this.cd,0,'"spaceId" must be a string'),!Ea(e))throw new D(this.cd,1,'"params" must be an object');return Yr(this.cd,2,r,n),bs(this,t,r,n,"DELETE",B,e)},Xr.prototype.deleteFeatures=Xr.prototype.cd,Xr.CONFIG_KEY="xyz";var cs=1,ds=2,es=-1;function Yr(t,e,r,n){if(!Da(r))throw new D(t,e,'"onResult" must be a function');if(!Da(n))throw new D(t,e+1,'"onError" must be a function')}function fs(t,e,r){var n;if(fs.l.constructor.call(this,r?{min:r.min,max:r.max,engineType:r.engineType}:void 0),C(t,Xr,fs,0),!Ac(e))throw new D(fs,1,'"spaceId" must be a string');if(this.u=t,this.b=e,this.i={},r&&(["limit","simplificationLevel","tags"].forEach((function(t){t in r&&(this.i[t]=r[t])}),this),t=r.parameters))for(n in t)this.i[n]=t[n];this.Ob(this.c===ik.WEBGL?new qi({sources:{xyz:{type:"MVT"}},layers:{xyz:{data:{source:"xyz",layer:this.b},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#000000",width:"2px",join:"round",cap:"round"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.b,when:["==",["geometry-type"],"Point"],technique:"circles",renderOrder:200,color:"#92CF48",size:["interpolate",["linear"],["zoom"],10,8,14,12,18,16]},{layer:this.b,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#E39E3C",renderOrder:201},{layer:this.b,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#755DA5",lineWidth:"1px",renderOrder:202},{layer:this.b,when:["==",["geometry-type"],"LineString"],technique:"solid-line",color:"#000000",lineWidth:"2px",renderOrder:203}]}))}function gs(t,e,r,n,i){1&i&&hs(t,t,e,r,n,0),2&i&&hs(t,t,e,r,n,1),4&i&&hs(t,t,e,r,n,2),8&i&&hs(t,t,e,r,n,3)}function hs(t,e,r,n,i,o){for(var a,s,l,u,c=(r+1)*(r+1),h=4*n,f=r+1,p=[{r:0,Bl:0,nl:0,rg:0,next:null}],A=1,d=["r","g","b","a"][o],g=2*r+1;A<g;A++)p[A]={r:0,Bl:0,nl:0,rg:0,next:null},p[A-1].next=p[A];p[2*r].next=p[0];var y=4*(n-1);for(a=0;a<i;a++){var v=a*h,m=t[v+o],b=m*f*(r+2)/2;for(g=m*f,A=0;A<=r;A++)p[A][d]=m;var _=0;for(A=1;A<=r;A++){var w=A<n?v+4*A:v+y;b+=(w=t[w+o])*(f-A),_+=w,p[r+A][d]=w}w=p[0],l=p[f],A=v,u=4*f;var x=v+y;for(m=0;m<n;m++){e[A+o]=b/c,b-=g;var E=m+f<n?A+u:x;if(b+=_+=E=t[E+o],g-=w[d],g+=l[d],_-=l[d],w[d]=E,w=w.next,l=l.next,A+=4,!b)for(;(s=4*(m+f))<h&&0===t[v+o+s];)m++,A+=4}}for(v=(i-1)*h,m=0;m<n;m++){for(b=(a=e[(t=4*m)+o])*f*(r+2)/2,g=a*f,A=0;A<=r;A++)p[A][d]=a;for(_=0,A=1;A<=r;A++)b+=(w=e[(w=A<i?t+A*h:t+v)+o])*(r-A+1),_+=w,p[r+A][d]=w;for(w=p[0],l=p[f],A=t,x=f*h,y=t+v,a=0;a<i;a++)if(e[A+o]=b/c,b-=g,b+=_+=E=e[(E=a+f<i?A+x:y)+o],g-=w[d],g+=l[d],_-=l[d],w[d]=E,w=w.next,l=l.next,A+=h,!b)for(;(s=a+f)<i&&0===e[s*h+o+t];)a++,A+=h}}function is(t,e,r){this.f=e=t>>e,this.j=Math.log(e)*Math.LOG2E,this.i=t=document.createElement("CANVAS"),this.a=t.getContext("2d"),this.b=t.width=t.height=3*e;var n=document.createElement("canvas");t=r.a;var i,o=r.b;for(a in e=[],n.width=256,n.height=1,n=n.getContext("2d"),o)o.hasOwnProperty(a)&&e.push({stop:parseFloat(a),value:o[a]});o=e.length,e.sort(this.m),0<e[0].stop&&e.unshift({stop:0,value:e[0].value}),1>e[o-1].stop&&e.push({stop:1,value:e[o-1].value}),o=e.length;var a=n.createLinearGradient(0,0,256,0);for(i=0;i<o;i++){if(!t&&l){var s=l.stop+(e[i].stop-l.stop)/2;a.addColorStop(s,l.value),a.addColorStop(s,e[i].value)}a.addColorStop(e[i].stop,e[i].value);var l=e[i]}n.fillStyle=a,n.fillRect(0,0,256,1),this.c=n.getImageData(0,0,256,1).data,this.g=r.a}function js(t,e){this.a=t,this.size=e}function ks(t,e){var r,n=0;if(!Ea(t)||Ua(t))throw new D(ks,0,t);for(r in t){var i=+r;if(n++,!(Dc(i)&&0<=i&&1>=i&&Ac(t[r])))throw new D(ks,0,t)}if(2>n)throw new D(ks,0,"Specify at least 2 stops");this.b=t,this.a=!!e}V.prototype.Aj=function(t){return qp(V.prototype.Aj,"Use HERE IML service instead."),this.Qa(Xr,t)},V.prototype.getXYZService=V.prototype.Aj,u(fs,R),t("H.service.xyz.Provider",fs),fs.prototype.J=function(t,e,r,n,i){return this.u.uf(t,e,r,this.b,n,i,this.i)},fs.prototype.requestInternal=fs.prototype.J,fs.prototype.la=function(){return this.u.la(this.b)},fs.prototype.getCopyrights=fs.prototype.la,fs.prototype.ld=ff,fs.prototype.providesOMV=fs.prototype.ld,fs.prototype.oa=function(){return this.ab()},fs.prototype.getStyle=fs.prototype.oa,fs.prototype.bc=function(t){C(t,qi)&&t.b("MVT"),this.Ob(t)},fs.prototype.setStyle=fs.prototype.bc,t("H.service.buildInfo",(function(){return Hf("H-service","1.30.15","f5837cb5d",{region:"row"})})),is.prototype.m=function(t,e){return t.stop-e.stop},t("H.data.heatmap.Colors",ks);var ls=new ks({0:"#008",.2:"#0b0",.5:"#ff0",.7:"#f00"},!0);function ms(t,e,r){this.a=t=Zd(t,0,30),this.u=e,this.i=r,this.m=[],this.b=[];do{this.b[t]=[],this.m[t]=new ns}while(t--);e===os?(this.s=ps,this.j=qs):(this.s=rs,this.j=ss),this.c=1/0,this.f=-1/0}ks.DEFAULT=ls;var ts=Math.log(.5);function qs(t){return this.g?Math.round((t-this.c)/this.g*255):127}function ss(t){return void 0===this.S?127:Math.round(255*Math.pow(t,this.S))}function us(t,e,r,n,i){var o,a,s=1<<e;return n=Yd(n,s),!(s=0<=r&&r<s&&(o=t.b[e])&&(a=o[r])&&(s=a[n])||null)&&i&&0<=e&&(s=us(t,e-1,r>>1,n>>1,i)),s}function vs(t,e,r,n,i,o){for(var a,s=[];r<=n;r++)for(a=i;a<=o;a++)s.push(us(t,e,r,a,!1));return s}function ws(t,e){var r,n=0,i=0,o=us(t,0,0,0,!1);return e.f||(e.z===t.a?e.c=e.a:(xs(t,e,(function(e){var a=ys(t,e),s=4-a.length;if(e.z!==t.a){for(r=0;r<a.length;r++)n+=a[r].a,i++;n+=s*o.a,i+=s}})),e.c=n/i),e.f=!0),e.c}function xs(t,e,r){e=[e];for(var n,i;0<e.length;)n=ys(t,i=e.shift()),r(i),e.push.apply(e,n)}function ys(t,e){var r,n,i,o=[];for(n=0;1>=n;n++)for(i=0;1>=i;i++)(r=us(t,e.z+1,2*e.x+n,2*e.y+i,!1))&&o.push(r);return o}function rs(t,e,r){this.x=t,this.y=e,this.z=r,this.a=this.b=this.g=0,this.f=!1,this.c=0}function ps(t,e,r){this.x=t,this.y=e,this.z=r,this.a=this.b=this.g=0,this.f=!1,this.c=0}function ns(){this.f=this.c=1/0,this.a=this.b=-1/0}function zs(t){var e=t||{},r=+e.sampleDepth;t=+e.coarseness;var n=e.colors,i={min:e.min,max:e.max,engineType:e.engineType},o=e.tileSize,a=+e.dataMax;if(e.tileSize&&(i.tileSize=o),R.call(this,i),jk(this,e.opacity),this.B="value"===e.type?os:As,this.sampleDepth_=Dc(r)?Zd(Math.round(r),1,8):4,this.v=!!e.assumeValues,e=this.max,this.R=Dc(a)?Zd(Math.round(a),this.min,e+this.sampleDepth_):e,t=Dc(t)?Zd(Math.round(t),0,3):1,n&&!C(n,ks))throw new D(zs,0,"colors");this.b=new ms(e+this.sampleDepth_,this.B,this.R),this.Y=new is(this.tileSize,t,n||ls),this.u=A(this.u,this),this.i=A(this.i,this),this.N=new Kk(20,this.u)}function Bs(t,e,r,n){var i=document.createElement("canvas"),o=t.tileSize,a=i.getContext("2d");i.width=i.height=o;var s,l,u=t.Y,c=t.b,h=t.v,f=t.B,p=u.f,A=u.a,d=f===As?2:1,g=d;t=Math.min(t.sampleDepth_+d,u.j),d=u.b;var y=c.a;if(h&&f===os){for(l=-1;1>=l;l++)for(h=-1;1>=h;h++){var v=(v=us(c,n,r+l,e+h,!0))?c.j(ws(c,v)):128;A.fillStyle="rgba("+v+",128,0,1)",A.fillRect((h+1)*p,(l+1)*p,p,p)}h=p-Math.floor(p/10),l=3,gs((v=A.getImageData(0,0,d,d)).data,h,d,d,l),A.putImageData(v,0,0)}else A.fillStyle=h?"#080":"#000",A.fillRect(0,0,d,d);for(;g<=t&&n+g<=y;g++){l=p-(h=p>>g);var m=f===As?127+Math.floor(128/(1<<t-g)):255;v=2+(1<<g);var b=1<<g,_=e<<g,w=r<<g;for(_=(b=vs(c,n+g,w-1,w+b,_-1,_+b)).length;_--;){w=_%v;var x=_/v<<0;(s=b[_])&&(s=c.j(s.a),A.fillStyle="rgba("+s+","+m+",0,1)",A.fillRect(w*h+l,x*h+l,h,h))}v=A,m=h,b=l,_=p+2*h,h=p+2*h,w=w=3,gs((x=A.getImageData(b,l,_,h)).data,m,_,h,w),v.putImageData(x,b,l)}for(e=A.getImageData(0,0,d,d),r=u.c,n=u.g,t=0,d=(c=e.data).length;t<d;t+=4)f=c[t],g=c[t+1],4===r.length&&(f=0),c[t]=r[4*f],c[t+1]=r[4*f+1],c[t+2]=r[4*f+2],c[t+3]=r[4*f+3]*(n?g/255:10>g?0:1);return A.putImageData(e,0,0),p=(u=new js(u.i,p)).size,a.drawImage(u.a,p,p,p,p,0,0,o,o),i}ms.prototype.vb=function(t){var e,r,n=t.value;void 0===n&&(n=1),n>this.f&&(this.f=n,this.g=this.f-this.c),n<this.c&&(this.c=n,this.g=this.f-this.c);var i=kj.Ic(t).scale(1073741823).floor();n=this.a;var o=i.x>>30-n;for(i=i.y>>30-n,r=this.s;-1<n;){this.b[n][i]||(this.b[n][i]=[]),(e=this.b[n][i][o])||(e=this.b[n][i][o]=new r(o,i,n)),e.vb(t,n);var a=this.m[n];a.f>e.b&&(a.f=e.b),a.a<e.b&&(a.a=e.b),a.c>e.a&&(a.c=e.a),a.b<e.a&&(a.b=e.a),n--,o>>=1,i>>=1}},ms.prototype.clear=function(){ms.call(this,this.a,this.u,this.i)},rs.prototype.vb=function(t,e){this.g++,this.b+=t.value||1,this.a=this.b/Math.pow(2,2*(30-e))},ps.prototype.vb=function(t){t=t.value,this.b+=void 0!==t?t:1,this.a=this.b/++this.g,this.f=!1},u(zs,R),t("H.data.heatmap.Provider",zs),zs.prototype.ac=function(t){jk(this,t)},zs.prototype.setOpacity=zs.prototype.ac,zs.prototype.Nc=function(){return this.f},zs.prototype.getOpacity=zs.prototype.Nc,zs.prototype.Me=ff,zs.prototype.providesRasters=zs.prototype.Me,zs.prototype.J=function(t,e,r,n,i){var o,a,s=this.v;if(us(this.b,0,0,0,!1)){if(!s){var l=vs(this.b,r,e-1,e+1,t-1,t+1);for(o=l.length;o--&&!s;)if(null!==l[o]){s=!0;break}}s&&(a=this.N.push([t,e,r,n,i],this.i))}return s||n(null),a||Bl},zs.prototype.requestInternal=zs.prototype.J,zs.prototype.u=function(t,e){t.done(Bs(this,e[0],e[1],e[2]))},zs.prototype.i=function(t,e,r){var n=t.data;t=n[3],n=n[4],r?n():t(e)},zs.prototype.Ki=function(t,e){var r;if(!zc(t))throw new D(this.Ki,0,t);if(r=t.length){for(;r--;)this.b.vb(t[r]);var n;r=(t=this.b).m;var i=t.a,o=0;if(t.u===As){var a=r[t.a].a;for(n=t.a;0<=n&&r[n].a===a;n--)o=n;for(a=r[0].a,n=0;n<=o&&a===r[n].a;n++)i=n;o>t.i&&(o=t.i),a=Math.round(i+(o-i)/2),t.S=ts/Math.log(r[a].b)}this.reload(!!e)}},zs.prototype.addData=zs.prototype.Ki,zs.prototype.clear=function(){this.b.clear(),this.reload(!0)},zs.prototype.clear=zs.prototype.clear;var As=0,os=1;function Cs(){}function Ds(t){for(var e,r=(t=t.attributes).length;r--;)switch((e=t[r]).name){case"x":this.x=parseFloat(e.value);break;case"y":this.y=parseFloat(e.value);break;case"xunits":this.Pc="fraction"===Cs.prototype.Ia(e);break;case"yunits":this.rc="fraction"===Cs.prototype.Ia(e)}}function Es(t){var e=t.childNodes,r=new Cs;for(t=e.length;t--;){var n=e[t];if("href"===n.nodeName)this.href=r.Ia(n)}}function Fs(t){var e;if(t){var r=(t=t.childNodes).length;for(e=new Cs;r--;){var n=t[r];switch(n.nodeName){case"scale":this.scale=e.vf(n);break;case"Icon":this.icon=n=new Es(n);break;case"hotSpot":this.a=n=new Ds(n)}}}}function Gs(){this.a={4:function(t){return["#",t.charAt(1),t.charAt(1),t.charAt(2),t.charAt(2),t.charAt(3),t.charAt(3),"ff"].join("")},5:function(t){return["#",t.charAt(1),t.charAt(1),t.charAt(2),t.charAt(2),t.charAt(3),t.charAt(3),t.charAt(4),t.charAt(4)].join("")},7:function(t){return t+"ff"},9:function(t){return t}},this.b={4:function(t){return[Hs(t.charAt(1)),Hs(t.charAt(2)),Hs(t.charAt(3)),255]},5:function(t){return[Hs(t.charAt(1)),Hs(t.charAt(2)),Hs(t.charAt(3)),Hs(t.charAt(4))]},7:function(t){return[(t=parseInt(t.substring(1),16))>>16&255,t>>8&255,255&t,255]},9:function(t){return[(t=parseInt(t.substring(1),16))>>24&255,t>>16&255,t>>8&255,255&t]}}}function Hs(t){return((t=parseInt(t,16))<<4)+t}function Is(t){return 16>t?"0"+Math.round(t).toString(16):Math.round(t).toString(16)}function Js(t,e,r){return/^(#|rgb).*/.test(e)?(r||(r="","#"===e.charAt(0)?r=t.a[e.length]?e:"":"rgb"===e.substr(0,3)&&(r=2<(r=(e=e.match(/\d+(\.\d+)?/g)).length)&&5>r?["#",Is(+e[0]),Is(+e[1]),Is(+e[2]),3<r?Is(255*+e[3]):"ff"].join(""):""),e=r),(t=t.b[e.length](e))[3]=Math.round(t[3]/255*100)/100,t):[0,0,0,255]}function Ks(t){for(var e,r=(t=t.childNodes).length,n=new Cs,i=new Gs;r--;)switch((e=t[r]).nodeName){case"color":this.a=n.tf(e);break;case"colorMode":this.b=n.Ia(e)}"random"===this.b&&(this.a="#"+i.$k(this.a,!1))}function Ls(t){var e=t.childNodes,r=e.length,n=new Cs;for(this.a=this.fill=!0,this.b=new Ks(t);r--;)switch((t=e[r]).nodeName){case"fill":this.fill=n.Cd(t);break;case"outline":this.a=n.Cd(t)}}function Ms(t){var e=t.childNodes,r=e.length,n=new Cs;for(this.a=new Ks(t);r--;)"width"===(t=e[r]).nodeName&&(this.width=n.vf(t))}function Ns(t){for(var e,r=(t=t.childNodes).length,n=new Cs;r--;)switch((e=t[r]).nodeName){case"bgColor":this.bgColor=n.tf(e);break;case"textColor":this.textColor=n.tf(e);break;case"text":this.text=n.Ia(e);break;case"displayMode":this.displayMode=n.Ia(e)}}function Os(t){var e=t.childNodes,r=e.length;for(this.id=t.getAttribute("id");r--;)switch((t=e[r]).nodeName){case"IconStyle":this.Hj=t=new Fs(t);break;case"LineStyle":this.Sd=t=new Ms(t);break;case"PolyStyle":this.tk=t=new Ls(t);break;case"BalloonStyle":this.df=t=new Ns(t)}}function Ps(t,e){var r=(t=t.childNodes).length,n=new Cs;for(this.b=e;r--;)switch((e=t[r]).nodeName){case"key":this.key=n.Ia(e);break;case"styleUrl":this.a=n.Ia(e)}}function Qs(t,e){var r=t.childNodes,n=r.length;for(this.b=e,this.id=t.getAttribute("id"),this.a=[];n--;)"Pair"===(t=r[n]).nodeName&&(t=new Ps(t,this.b),this.a.push(t))}function Rs(){this.a={}}function Ss(t){for(var e,r=(t=t.childNodes).length,n=null,i=new Cs;r--;)"coordinates"===(e=t[r]).nodeName&&(n=i.Ia(e));this.a=null,n&&(this.a=i.Lh(n)||null)}function Ts(t,e){var r=t&&t.childNodes||[],n=new Cs;if(!t||!e)throw Error("Node or stylesContainer is not defined");for(this.visibility=!0,this.g=t,t=r.length;t--;){var i=r[t];switch(i.nodeName){case"name":this.name=n.Ia(i);break;case"description":this.b=n.Ia(i);break;case"visibility":this.visibility=n.Cd(i);break;case"open":this.open=n.Cd(i);break;case"styleUrl":(this.c=n.Ia(i))&&(i=this.c.substr(1),this.f=e.Zg(i,!1));break;case"Style":this.a=i=new Os(i)}}}function Us(t){for(var e,r=(t=t.childNodes).length,n=new Cs;r--;)if("coordinates"===(e=t[r]).nodeName){var i=[],o=new Cs;try{i=o.qk(n.Ia(e))}catch(a){i=[]}this.a=2>i.length?[]:i}}function Vs(t){for(var e=new L,r=t.a?t.a.length:0;r--;)e.md(t.a[r]);return e}function Ws(){}function Xs(t){var e=t.childNodes,r=e.length;for(this.a=new L,this.c=[];r--;){var n=e[r],i=n.nodeName;if("outerBoundaryIs"===i||"innerBoundaryIs"===i){var o=n.childNodes;for(n=o.length;n--;){var a=o[n];if("LinearRing"===a.nodeName){var s=new Us(a);if("outerBoundaryIs"===i){this.a=Vs(s);var l=void 0,u=t,c=s.a;s=new Cs;var h=u.querySelector("altitudeMode");if(h&&h.parentNode===u&&!/^\s*clampTo/.test(s.Ia(h))&&c){h=c.length;for(var f=0;f<h&&0!==l;f++){var p=c[f].alt;p?l?p!==l&&(l=0):l=p:l=0}(c=u.querySelector("*|altitudeOffset"))&&c.parentNode===a&&"http://www.google.com/kml/ext/2.2"===c.namespaceURI&&(a=s.vf(c))&&(l+=a),l&&(l=wd(2047,l),(a=u.querySelector("extrude"))&&a.parentNode===u&&s.Cd(a)?this.b=l:this.f=l)}}else this.c.push(Vs(s))}}}}}function Ys(t,e){var r=document.createElement("CANVAS");r.width=1,r.height=1,this.i=t,this.b={},this.c={},this.f=new Uj(r),this.g=e||""}function Zs(t,e,r){for(var n,i,o=(e=e.childNodes).length,a={};o--;){var s=e[o];switch(s.nodeName){case"Point":s=new Ss(s),i=$s(t,"Marker"),(s=s.a)&&(n=new Jn(s,i),i.Mh&&Ee(i.Mh,"statechange",A(t.j,t,i.Mh,n,i),!1));break;case"LineString":case"LinearRing":s=new Us(s),i=$s(t,"Polyline"),n=new th(Vs(s),i);break;case"Polygon":s=new Xs(s),(i=$s(t,"Polygon")).elevation=s.f,i.extrusion=s.b,n=new uh(new O(s.a,s.c),i);break;case"MultiGeometry":n=Zs(t,s,new Q)}n&&(t.a.name&&(a.name=t.a.name),t.a.b&&(a.description=t.a.b),i&&i.df&&(a.balloonStyle=i.df),a.kmlNode=t.a.g,n.setData(a),r&&r.ba(n))}return r||n}function $s(t,e){var r=t.a,n={visibility:r.visibility},i=new Gs,o=1,a={x:0,y:0,Pc:!1,rc:!1},s=at(t,r.f);switch(r.a&&(s=at(t,r.a,s)),e){case"Marker":if(s&&s.Hj){if((i=s.Hj).scale&&(o=i.scale),i.a){var l=i.a;a={x:l.x,y:l.y,Pc:l.Pc,rc:l.rc}}i.icon&&i.icon.href?(e=i.icon.href,bt.test(e)||(e=t.g+e),i=o+"_"+a.x+a.y+a.Pc+a.rc+"_"+e,(l=t.b[i]||t.c[i])||(l=new Uj(e),t.c[i]=l),0===l.getState()?(n.icon=t.f,n.Mh=l,n.href=e,n.anchor=a,n.scale=o):1===l.getState()&&(n.icon=l)):1!==o&&(l||(a={x:14,y:4,Pc:!1,rc:!1}),o={size:new Ui((t={w:28*o,h:36*o}).w,t.h),anchor:new G(a.Pc?t.w*a.x:a.x*o,a.rc?t.h*(1-a.y):t.h-a.y*o),hitArea:new Vi(Wi.POLYGON,[0*o,16*o,0*o,7*o,8*o,0*o,18*o,0*o,26*o,7*o,26*o,16*o,18*o,34*o,8*o,34*o])},n.icon=new Uj('<svg xmlns="http://www.w3.org/2000/svg" width="28px" height="36px"><path d="M 19 31 C 19 32.7 16.3 34 13 34 C 9.7 34 7 32.7 7 31 C 7 29.3 9.7 28 13 28 C 16.3 28 19 29.3 19 31 Z" fill="#000" fill-opacity=".2"/><path d="M 13 0 C 9.5 0 6.3 1.3 3.8 3.8 C 1.4 7.8 0 9.4 0 12.8 C 0 16.3 1.4 19.5 3.8 21.9 L 13 31 L 22.2 21.9 C 24.6 19.5 25.9 16.3 25.9 12.8 C 25.9 9.4 24.6 6.1 22.1 3.8 C 19.7 1.3 16.5 0 13 0 Z" fill="#fff"/><path d="M 13 2.2 C 6 2.2 2.3 7.2 2.1 12.8 C 2.1 16.1 3.1 18.4 5.2 20.5 L 13 28.2 L 20.8 20.5 C 22.9 18.4 23.8 16.2 23.8 12.8 C 23.6 7.07 20 2.2 13 2.2 Z" fill="#18d"/></svg>',o))}break;case"Polyline":n.style={},s&&s.Sd&&(o=s.Sd,n.style.strokeColor="rgba("+Js(i,o.a.a,!0)+")",0<=o.width&&(n.style.lineWidth=o.width));break;case"Polygon":n.style={},s&&(s.Sd&&(o=s.Sd,n.style.strokeColor="rgba("+Js(i,o.a.a,!0)+")",0<=o.width&&(n.style.lineWidth=o.width)),s.tk&&(o=s.tk,n.style.fillColor=o.fill?"rgba("+Js(i,o.b.a,!0)+")":"rgba(0,0,0,0)",o.a||(n.style.lineWidth=0)))}return n.df=s.df,n}function at(t,e,r){for(var n in r=r||{},e)e.hasOwnProperty(n)&&(r[n]="object"===typeof e[n]?at(t,e[n],r[n]):e[n]);return r}t("H.data.utils.Dom",Cs),Cs.prototype.Cd=function(t){return!!t&&/^\s*(1|true)\s*$/i.test(this.Ia(t))},Cs.prototype.getBoolean=Cs.prototype.Cd,Cs.prototype.Ia=function(t){var e;try{if(t.nodeType===Node.ATTRIBUTE_NODE)return t.value;var r="",n=0,i=t.childNodes;for(e=i.length;n<e;n++)i[n].nodeType!==Node.COMMENT_NODE&&(r+=i[n].nodeValue.replace(/^\s+|\s+$/g,""))}catch(o){}return r||""},Cs.prototype.getString=Cs.prototype.Ia,Cs.prototype.vf=function(t){return parseFloat(this.Ia(t))||0},Cs.prototype.getFloat=Cs.prototype.vf,Cs.prototype.qk=function(t){var e,r=t.split(/\s+/),n=r.length,i=!(r&&1==n),o=i?1:3,a=[];for(i||(n=(r=t.split(",")).length),e=0;e<n;e+=o){if(!(t=this.Lh(i?r[e]:e+3>r.length?null:r.slice(e,e+3))))return[];a.push(t)}return a},Cs.prototype.parseCoords=Cs.prototype.qk,Cs.prototype.Lh=function(t){if(!t)return null;var e=t instanceof Array&&0<t.length&&4>t.length?t:t.split(",");t=parseFloat(e[0]);var r=parseFloat(e[1]);return e=parseFloat(e[2]),isNaN(r)||isNaN(t)?null:new lg(r,t,isNaN(e)?void 0:e)},Cs.prototype.parseCoord=Cs.prototype.Lh,Cs.prototype.tf=function(t){return t=this.Ia(t),/^[0-9a-fA-F]{8}$/.test(t)?"#"+t.substr(6,2)+t.substr(4,2)+t.substr(2,2)+t.substr(0,2):"#000000ff"},Cs.prototype.getColor=Cs.prototype.tf,t("H.data.kml.HotSpot",Ds),t("H.data.kml.Icon",Es),t("H.data.kml.IconStyle",Fs),t("H.data.utils.ColorHelper",Gs),Gs.prototype.$k=function(t,e){var r="";if(!/^(#|rgb).*/.test(t)){var n;for(r="",n=0;6>n;n++)r+="ABCDEF0123456789".charAt(Math.floor(16*Math.random()));return r+"ff"}for(t=Js(this,t,e),e=0;4>e;e++)r+=Is(n=3>e?Math.floor(Math.random()*(t[e]+1)):255*t[e]);return r},Gs.prototype.toRandomRGBA=Gs.prototype.$k,t("H.data.kml.ColorStyle",Ks),t("H.data.kml.PolyStyle",Ls),t("H.data.kml.LineStyle",Ms),t("H.data.kml.BalloonStyle",Ns),t("H.data.kml.Style",Os),t("H.data.kml.Pair",Ps),Ps.prototype.oa=function(){if(this.a){var t="highlight"===this.key;t=this.b.Zg(this.a.substr(1),t)}return t},Ps.prototype.getStyle=Ps.prototype.oa,t("H.data.kml.StyleMap",Qs),Qs.prototype.oa=function(t){var e=null;t=t?"highlight":"normal";for(var r=this.a.length;r--;)this.a[r].key===t&&(e=this.a[r].oa());return e},Qs.prototype.getStyle=Qs.prototype.oa,t("H.data.kml.StyleContainer",Rs),Rs.prototype.vg=function(t){t&&t.id&&(this.a["style_"+t.id]=t)},Rs.prototype.addStyle=Rs.prototype.vg,Rs.prototype.Zg=function(t,e){return(t=this.a["style_"+t])instanceof Qs&&(t=t.oa(e)),t},Rs.prototype.getStyleById=Rs.prototype.Zg,t("H.data.kml.Point",Ss),t("H.data.kml.Feature",Ts),t("H.data.kml.Line",Us),Ws.prototype.f=0,Ws.prototype.b=0,u(Xs,Ws),t("H.data.kml.Polygon",Xs),Ys.prototype.create=function(t){return this.a=new Ts(t,this.i),Zs(this,t)},Ys.prototype.j=function(t,e,r){var n=r.anchor,i=r.scale;r=i+"_"+n.x+n.y+n.Pc+n.rc+"_"+r.href;var o={};if(1===t.getState()){var a=this.b[r];if(!a){var s=n.x,l=n.y;(a=t.qb())&&(a={w:a.w*i,h:a.h*i},o.size=a),s=n.Pc&&a?a.w*s:s*i,l=n.rc&&a?a.h*(1-l):!n.rc&&a?a.h-l*i:l*i,o.anchor={x:s,y:l},a=new Uj(t.Jc(),o),this.b[r]=a}e.Ac(a)}delete this.c[r]};var bt=/^[^:\/]+:/;function ct(t){vc(this,ct),this.url=t,this.b=[],this.a=y,this.c=A(this.c,this),F.call(this)}u(ct,F),t("H.data.AbstractReader",ct);var dt={ERROR:-1,LOADING:0,VISIT:1,READY:2};function et(t,e,r,n){et.l.constructor.call(this,e,t),this.state=r,this.message=n}function ft(t){var e=t?t.lastIndexOf("/"):-1;this.g=[],ct.call(this,t),0<=e&&(this.i=t.substr(0,e)+"/")}function ht(t,e,r){r?r.ba(e):(t.a&&t.a.Ub().ba(e),t.b.push(e),t.O(dt.VISIT,e))}function gt(t,e){for(var r,n=t.length,i=[];n--;)(r=t[n]).nodeName===e&&i.push(r);return i}function it(t,e){this.b=t,this.a=e}function jt(t){return new lg(t[1],t[0])}function lt(t){for(var e,r=kt(t[0]),n=[],i=1,o=t.length;i<o;i++)e=kt(t[i]),n.push(e);return new O(r,n)}function kt(t){for(var e=0,r=t.length,n=new L;e<r;e++)n.md(jt(t[e]));return n}function mt(t,e){e=e||{},this.i=e.style||this.zd,(this.g=!!e.disableLegacyMode)||window.console.warn("H.data.geojson.Reader: Legacy parser is enabled in GeoJSON Reader. Features like Multi-Geometries, Polygon interiors and GeoJSON feature properties might not work as expected. To maximise compatibility with the remote services it is recommended to set the `disableLegacyMode` flag to true."),ct.call(this,t)}function ot(t){var e={};if(t.geometry){var r=t.geometry;e.type=r.type,e.properties=t.properties,r.coordinates&&(e.coordinates=r.coordinates),r.geometries&&(e.geometries=r.geometries),t.id&&(e.id=t.id)}return e}function nt(t,e){t.a&&t.a.Ub().ba(e),t.b.push(e),t.O(dt.VISIT,e)}function pt(t,e){this.a=t,this.b=e}function qt(t,e,r){this.g=this.b=r,this.Nh=[],this.a=0,this.f=sg(t,e,!0)}function rt(t){var e;nd.call(this),this.a=[],t?Xa(e={},st,t):e=st,this.g=e,nd.call(this)}ct.State=dt,ct.prototype.f=dt.READY,ct.prototype.A={fl:"statechange"},ct.prototype.hb=function(){this.a||(this.a=new N,this.a.Ub().Qb(this.b));return new rl(this.a)},ct.prototype.getLayer=ct.prototype.hb,ct.prototype.um=function(){return this.b.concat([])},ct.prototype.getParsedObjects=ct.prototype.um,ct.prototype.D=function(){return this.url},ct.prototype.getUrl=ct.prototype.D,ct.prototype.$n=function(t){if(this.f===dt.LOADING||this.f===dt.VISIT)throw Error("InvalidState: state "+this.f);return this.b=[],this.a=y,this.url=t,this},ct.prototype.setUrl=ct.prototype.$n,ct.prototype.getState=function(){return this.f},ct.prototype.getState=ct.prototype.getState,ct.prototype.O=function(t,e,r){this.f=t,this.dispatchEvent(new et(e||this,this.A.fl,t,r||""))},ct.prototype.parse=function(){var t=this;uc(this.url)?(this.O(dt.LOADING),new tf("text/plain",this.url).then((function(e){try{t.c(e)}catch(r){t.O(dt.ERROR,y,r.message)}}),(function(){t.O(dt.ERROR,y,"Error loading file")}))):t.O(dt.ERROR,y,"File url was not set")},ct.prototype.parse=ct.prototype.parse,u(et,sd),ct.Event=et,u(ft,ct),t("H.data.kml.Reader",ft),ft.prototype.c=function(t){var e,r=null;if(Ac(t)&&""!=t.trim()){try{var n=(new DOMParser).parseFromString(t,"text/xml")}catch(s){return void this.O(dt.ERROR,y,"Error parsing KML document")}if(n.getElementsByTagName("parsererror").length)this.O(dt.ERROR,y,"Error parsing KML document");else if((t=n.childNodes&&"kml"===n.childNodes[0].nodeName?n.childNodes[0]:void 0)&&(e=gt(t.childNodes,"Document")[0]),e=e||t){n=new Rs;for(var i=gt(e.childNodes,"Style"),o=gt(e.childNodes,"StyleMap"),a=i.length;a--;)t=new Os(i[a]),n.vg(t);for(a=o.length;a--;)t=new Qs(o[a],n),n.vg(t);for(this.j=new Ys(n,this.i),e=(t=e.childNodes).length;e--;)n=r,"Placemark"===(i=t[e]).nodeName?(i=this.j.create(i))&&ht(this,i,n):"Folder"===i.nodeName&&(ht(this,(i={group:new Q,node:i}).group,n),this.g.push(i)),!e&&(n=this.g.shift())&&(t=n.node.childNodes,r=n.group,e=t.length);this.O(dt.READY)}else this.O(dt.ERROR,y,"Invalid KML document")}else this.O(dt.ERROR,y,"Unable to create objects from the empty data")},it.prototype.create=function(t,e){var r=t.coordinates;switch(t.type){case"Point":var n=new Jn(jt(r));break;case"LineString":n=new th(kt(r));break;case"Polygon":n=new uh(lt(r));break;case"MultiPoint":var i=0,o=r.length;if(n=[],this.a){for(;i<o;i++)n.push(jt(r[i]));r=new Jn(new Ti(n))}else{for(;i<o;i++)n.push(new Jn(jt(r[i])));(r=new Q).Qb(n)}n=r,o="multiPoint";break;case"MultiLineString":if(i=0,o=r.length,n=[],this.a){for(;i<o;i++)n.push(kt(r[i]));r=new th(new ih(n))}else{for(;i<o;i++)n.push(new th(kt(r[i])));(r=new Q).Qb(n)}n=r,o="multiLineString";break;case"MultiPolygon":if(n=[],i=0,o=r.length,this.a){for(;i<o;i++)n.push(lt(r[i]));r=new uh(new Gi(n))}else{for(;i<o;i++)n.push(new uh(lt(r[i])));(r=new Q).Qb(n)}n=r,o="multiPolygon";break;case"GeometryCollection":r=n=new Q,o=0;for(var a=(i=t.geometries).length;o<a;o++)this.create(i[o],r);o="geometryCollection"}return n&&(r=n,i=t.properties,t=t.id,a={},i&&(this.a?a=i:a.properties=i),o&&!this.a&&(a[o]=!0),t&&r.ki(t),r.setData(a),this.b(n)),e&&n&&e.ba(n),n},it.prototype.create=it.prototype.create,u(mt,ct),t("H.data.geojson.Reader",mt),mt.prototype.c=function(t){var e,r;try{var n="string"===typeof t?JSON.parse(t):t;if("object"===typeof n){var i=new it(this.i,this.g);switch(n.type){case"FeatureCollection":if(e=n.features){var o=new Q;for(nt(this,o),r=0;r<e.length;r++){var a=ot(e[r]);(a=i.create(a))&&o.ba(a)}}break;case"Feature":a=ot(n),(a=i.create(a))&&nt(this,a);break;default:(a=i.create(n))&&nt(this,a)}this.O(dt.READY)}else this.O(dt.ERROR,y,"Invalid syntax")}catch(s){this.O(dt.ERROR,y,"Parse error. "+s.message)}},mt.prototype.Mn=function(t){this.O(dt.LOADING),this.c(t)},mt.prototype.parseData=mt.prototype.Mn,mt.prototype.zd=function(){},t("H.data.buildInfo",(function(){return Hf("H-data","1.30.15","f5837cb5d",{region:"row"})})),wg.prototype.Dc=ca(1,(function(t,e){this.a.Dc(t,Dc(e)?e:this.c)})),Ag.prototype.Dc=ca(0,(function(t,e){var r,n=0;if(!t(this)&&e--)for(;3>=n;n++)(r=this[n])&&r.Dc(t,e)})),t("H.clustering.grid.NoisePoint",pt),pt.prototype.va=function(){return ng(this.a)},pt.prototype.getPosition=pt.prototype.va,pt.prototype.pc=function(){return this.a.wt},pt.prototype.getWeight=pt.prototype.pc,pt.prototype.jd=gf,pt.prototype.isCluster=pt.prototype.jd,pt.prototype.lc=function(){return this.b},pt.prototype.getMinZoom=pt.prototype.lc,pt.prototype.getData=function(){return this.a.data},pt.prototype.getData=pt.prototype.getData,t("H.clustering.grid.Cluster",qt),qt.prototype.he=function(t){this.c||(this.c=ng(t)),this.a+=t.wt||1,this.Nh.push(t)},qt.prototype.va=function(){return this.c},qt.prototype.getPosition=qt.prototype.va,qt.prototype.pc=function(){return this.a},qt.prototype.getWeight=qt.prototype.pc,qt.prototype.jd=ff,qt.prototype.isCluster=qt.prototype.jd,qt.prototype.lc=function(){return this.b},qt.prototype.getMinZoom=qt.prototype.lc,qt.prototype.xf=function(){return this.g},qt.prototype.getMaxZoom=qt.prototype.xf,qt.prototype.G=function(){return this.f},qt.prototype.getBoundingBox=qt.prototype.G,qt.prototype.Kg=function(t){this.te(t)},qt.prototype.forEachEntry=qt.prototype.Kg,qt.prototype.te=function(t){var e=this;if(!Da(t))throw new D(this.te,0,t);this.Nh.forEach((function(r){t(new pt(r,e.b+1))}))},qt.prototype.forEachDataPoint=qt.prototype.te,u(rt,nd);var tt={clusters:[],noisePoints:[]},st={projection:kj,min:0,max:22,eps:32,minWeight:2};function ut(t){rt.call(this,t)}function vt(t){this.a=t;var e=(t=document.createElement("canvas")).getContext("2d"),r=this.a,n=14*r;t.width=n,t.height=n,e.scale(r,r),e.beginPath(),e.strokeStyle="#FFFFFF",e.fillStyle="#1080DD",e.arc(7,7,6,0,2*Math.PI,!1),e.fill(),e.lineWidth=1,e.stroke(),this.f=new Uj(t,{size:{w:14,h:14},anchor:{x:7,y:7}}),this.b={},this.c={}}function wt(t,e,r){var n,i=document.createElement("canvas"),o=i.getContext("2d"),a=t.a,s=e*a;return i.width=s,i.height=s,o.scale(a,a),a=e+":"+r,(n=t.b[a])?o.putImageData(n,0,0):(e/=2,o.beginPath(),o.strokeStyle="rgba("+r+",0.2)",o.fillStyle="rgba("+r+",1)",o.arc(e,e,e/5*3,0,2*Math.PI,!1),o.fill(),o.lineWidth=e/5*4,o.stroke(),t.b[a]=o.getImageData(0,0,s,s)),i}function xt(t){if(rt.call(this,t),(t=this.g).projection!==kj)throw new D(xt,0,"Other projection than mercator not supported yet");this.m=t.projection,this.f=t.eps,this.B=t.minWeight,this.s=new lj(this.m),(new Pf).a("cluster","H.clustering.dynamicgrid.worker"),this.i=A(this.i,this),this.j=A(this.j,this)}p=rt.prototype,p.zc=function(t){this.a=t,this.b=!0},p.vb=function(t){this.a.push(t),this.b=!0},p.cf=function(t){this.a=this.a.concat(t),this.b=!0},p.Ne=function(t){this.a=this.a.filter((function(e){return e!==t})),this.b=!0},p.o=function(){rt.l.o.call(this),delete this.a},rt.prototype.disposeInternal=rt.prototype.o,rt.prototype.S=jd,u(ut,rt),ut.prototype.oi=function(t){var e,r=this.g,n=r.min,i=r.max,o=[],a=[];if(this.b){for(e=this.a;n<=i;n++){for(var s,l,u,c,h,f,p,A,d=void 0,g=n,y=e,v=o,m=a,b=r.eps,_=r.projection,w=r.minWeight,x=y.length,E=Math.pow(2,g+8),B=[];A=y[--x];)if(!A.vi){for(p=E,f=(u=_.Ic(A).scale(E).floor()).x,h=u.y,l=B.length;l--;)c=(s=B[l]).va(),s.ui||(s.ui=_.Ic(c).scale(E).floor()),(c=(c=s.ui).Sa(u))<p&&(p=c,d=s);d&&d.G().ad(A)||(d=new qt(_.Qf({x:(f-b)/E,y:(h-b)/E}),_.Qf({x:(f+b)/E,y:(h+b)/E}),g),B.push(d)),d.he(A),d=null}for(x=B.length;x--;)if((l=(s=B[x]).pc())<w)for(l=(s=s.Nh).length;A=s[--l];)m.push(new pt(A,g)),A.vi=!0;else v.push(s)}for(n=0,i=e.length;n<i;n++)delete e[n].vi;this.b=!1,t({clusters:o,noisePoints:a})}},t("H.clustering.theme.Circular",vt),vt.prototype.Ml=function(t){var e=t.pc(),r=this.c[e];if(!r){if(10>e){r=wt(this,28,"118,209,0");var n={x:11,y:18}}else 25>e?(r=wt(this,38,"255,105,0"),n={x:13,y:23}):50>e?(r=wt(this,38,"240,60,0"),n={x:13,y:23}):100>e?(r=wt(this,38,"181,0,21"),n={x:13,y:23}):1e3>e?(r=wt(this,48,"181,0,21"),n={x:15,y:28}):(r=wt(this,66,"181,0,21"),n={x:20,y:38});var i=r.getContext("2d");i.fillStyle="#FFFFFF",i.font="bold 11px Arial",i.fillText(String(e),n.x,n.y),r=new Uj(r,{size:{w:n=r.width/this.a,h:n},anchor:{x:n/2,y:n/2}}),this.c[e]=r}return(e=new Jn(t.va(),{icon:r,min:t.lc(),max:t.xf()})).setData(t),e},vt.prototype.getClusterPresentation=vt.prototype.Ml,vt.prototype.rm=function(t){var e=new Jn(t.va(),{icon:this.f,min:t.lc()});return e.setData(t),e},vt.prototype.getNoisePresentation=vt.prototype.rm,u(xt,rt),xt.prototype.S=function(t,e){this.u=t,this.v=zd(e)},xt.prototype.oi=function(t,e){var r=this.c,n=this.u,i=this.v||0,o=!r||!(r.zoom===i&&r.b.fa(n));if(n&&(this.b||o)){if(r&&3>r.Ud&&r.cancel(),this.b=!1,(r=this.f)>=128*Ed(2,i))var a=yt;else{(o=this.s).Ja(i);var s=o.eb(n.Fb());a=o.eb(n.Bb()),s.y-=r,a.y+=r,s=o.Ie(s);var l=o.Ie(a);a=new K(s.lat,s.lng,l.lat,l.lng),r=o.Ka(r,0).lng+180,a=a.tc(s.lat,s.lng-r,l.lat,s.lng).tc(s.lat,l.lng,l.lat,l.lng+r)}for(r=a,a=[],o=(s=this.a).length;o--;)r.ad(s[o])&&a.push(s[o]);0<a.length?(this.c=new zt(n,i,a,this.f,this.B,this.m!==kj,t,e),this.c.then(this.i,this.j)):t(tt)}},xt.prototype.i=function(t){Ca(t)||(t=new x.Uint32Array(t)),this.c.g(At(this,t))},xt.prototype.j=function(t){Ac(t)&&this.c.f(t)};var yt=new K(90,-180,-90,180);function At(t,e){for(var r=0,n=e[r++],i=Array(n),o=0,a=[],s=e.length,l=t.c.a,u=t.c.zoom;n--;)i[o++]=new pt(l[e[r++]],u);for(;r<s;){n=e[r++],o=l[e[r]];var c=t.s,h=t.f;c.Ja(t.c.zoom);var f=c.eb(o);for(o=c.Ka(f.x-h,f.y-h),c=c.Ka(f.x+h,f.y+h),o=new qt((o=new K(o.lat,o.lng,c.lat,c.lng)).Fb(),o.Bb(),u);n--;)o.he(l[e[r++]]);a.push(o)}return{clusters:a,noisePoints:i}}function zt(t,e,r,n,i,o,a,s){this.b=t,this.zoom=e,this.a=r,this.g=a,this.f=s,a=3*(t=r.length),s=new(x.Float64Array||Array)(a);for(var l;t--;)l=r[t],s[--a]=l.lat,s[--a]=l.lng,s[--a]=l.wt;ge.call(this,"cluster",{message:[s,n,i,e,o]},void 0)}function Bt(t,e,r){this.b=t,this.a=e,this.f=r}function Ct(t,e,r,n){this.b=t,this.a=e,this.j=r,this.S=n,this.f=Ja(this.f,this),this.c=Ja(this.c,this)}function Dt(t,e,r,n,i,o){this.g=e,t&&(this.parent=t,1&e?(r=t[8],i=t[5]):(r=t[7],i=t[8]),2&e?(n=t[9],o=t[6]):(n=t[4],o=t[9])),this[7]=r,this[5]=i,this[8]=(r+i)/2,this[4]=n,this[6]=o,this[9]=(n+o)/2}function Et(t,e){return t[e]||(++t.Td,t[e]=new Dt(t,e))}function Ft(t,e,r,n){var i,o;if(!e(t,n)&&r--)for(++n,i=0;4>i;i++)(o=t[i])&&Ft(o,e,r,n)}function Gt(t){this.b=t||10,Ht(this)}function Ht(t){t.head=t.a=new Dt(null,NaN,0,0,4294967296,4294967296)}function It(t,e){var r,n;for(r=0;4>r;r++)(n=e[r])&&(It(t,n),delete e[r]);delete e.parent,delete e.entries}function Jt(t,e){var r,n=t.head;if(e){var i=e;if(i!==n)for(n=i;i=i.parent;)(i.entries||1<i.Td)&&(n=i)}else for(;!n.entries&&2>(r=n.Td)&&r;)n=i;t.head=n}function Kt(t,e,r,n,i,o,a){var s=e.entries;return o?e.Td?s=Kt(t,Et(e,+(r>=e[8])|+(n>=e[9])<<1),r,n,i,o-1,a):s?((s=Et(e,+((s=s[0])[1]>=e[8])|+(s[0]>=e[9])<<1)).entries=e.entries,s.ke=e.ke,s.le=e.le,s.xb=e.xb,s.a=e.a,s.f=e.f,s.b=e.b,s.c=e.c,delete e.entries,Jt(t,s),s=Kt(t,Et(e,+(r>=e[8])|+(n>=e[9])<<1),r,n,i,o-1,a)):(o=s=new Lt(r,n,i,a),(e.entries||(e.entries=[])).push(o),Jt(t,e)):(s||Jt(t,e),t=s=new Lt(r,n,i,a),(e.entries||(e.entries=[])).push(t)),e.ke+=r*i,e.le+=n*i,e.xb+=i,e.a===B?(e.a=e.b=r,e.f=e.c=n):(r<e.a?e.a=r:r>e.b&&(e.b=r),n<e.f?e.f=n:n>e.c&&(e.c=n)),s}function Lt(t,e,r,n){this[0]=e,this[1]=t,this.a=r,this.data=n}function Mt(t){rt.call(this,t),t=this.g,this.j=t.projection,this.s=t.min,this.f=t.max,this.m=t.minWeight,this.c=7-yd(Cd(xd(1,t.eps))/Md),this.i=new Gt(xd(this.s,this.f+this.c))}function Nt(t,e,r,n,i,o,a){var s,l=e.xb;if(a&&(a.node.xb!==l?(o.clusters.push(new Ct(t,a.node,a.depth,r-1)),a=null):i++),a||(l>=t.m?(a={node:e,depth:r},i=r):Ot(t,e,i+1,o)),e.Td&&n--)for(r++,l=0;4>l;l++)(s=e[l])&&(Nt(t,s,r,n,i,o,a),a=null);a&&o.clusters.push(new Ct(t,a.node,a.depth,t.f+t.c))}function Ot(t,e,r,n){var i;if(e=e.entries){var o=e.length;for(n=n.noisePoints,i=0;i<o;i++)n.push(new Bt(t,e[i],r))}else for(i=0;4>i;i++)(o=t[i])&&Ot(t,o,r,n)}function Pt(t,e){var r={},n=(e=e||{}).min||0;switch(n={min:n,max:xd(n,e.max||22)},Pt.l.constructor.call(this,n),this.ya=e.pixelRatio||Te(),Xa(r,st,n,e.clusteringOptions||{}),r.minWeight=xd(st.minWeight,r.minWeight),r.strategy){case Qt.DYNAMICGRID:if(r.projection!==kj)throw new D(Pt,1,"Unsupported projection");this.b=new xt(r);break;case Qt.GRID:this.b=new ut(r);break;default:this.b=new Mt(r)}this.b.zc(t),this.v=e.theme||new vt(this.ya),this.N=A(this.N,this),this.Y=A(this.Y,this),Rt(this)}xt.prototype.o=function(){xt.l.o.call(this)},xt.prototype.disposeInternal=xt.prototype.o,u(zt,Sf),t("H.clustering.fastgrid.NoisePoint",Bt),Bt.prototype.va=function(){return this.c||(this.c=this.b.Ka(this.a[1],this.a[0],1)),this.c},Bt.prototype.getPosition=Bt.prototype.va,Bt.prototype.pc=function(){return this.a.a},Bt.prototype.getWeight=Bt.prototype.pc,Bt.prototype.jd=gf,Bt.prototype.isCluster=Bt.prototype.jd,Bt.prototype.lc=function(){return this.f-this.b.c},Bt.prototype.getMinZoom=Bt.prototype.lc,Bt.prototype.getData=function(){return this.a.data},Bt.prototype.getData=Bt.prototype.getData,t("H.clustering.fastgrid.Cluster",Ct),Ct.prototype.va=function(){return this.m||(this.m=this.b.Ka(this.a.ke,this.a.le,this.a.xb)),this.m},Ct.prototype.getPosition=Ct.prototype.va,Ct.prototype.pc=function(){return this.a.xb},Ct.prototype.getWeight=Ct.prototype.pc,Ct.prototype.jd=ff,Ct.prototype.isCluster=Ct.prototype.jd,Ct.prototype.lc=function(){return this.j?this.j-this.b.c:-1/0},Ct.prototype.getMinZoom=Ct.prototype.lc,Ct.prototype.xf=function(){return this.S-this.b.c},Ct.prototype.getMaxZoom=Ct.prototype.xf,Ct.prototype.G=function(){return this.i||(this.i=sg(this.b.Ka(this.a.a,this.a.f,1),this.b.Ka(this.a.b,this.a.c,1),!0)),this.i},Ct.prototype.getBoundingBox=Ct.prototype.G,Ct.prototype.Kg=function(t){this.g=t,this.a.Dc(this.f,Ud)},Ct.prototype.forEachEntry=Ct.prototype.Kg,Ct.prototype.f=function(t,e){var r,n,i=!1;if(t.xb>=this.b.m&&t!==this.a&&t.xb!==this.a.xb&&(this.g(new Ct(this.b,t,0,e)),i=!0),!i&&(r=t.entries))for(t=r.length,n=0;n<t;n++)this.g(new Bt(this.b,r[n],e));return i},Ct.prototype.te=function(t){this.s=t,this.a.Dc(this.c,Ud)},Ct.prototype.forEachDataPoint=Ct.prototype.te,Ct.prototype.c=function(t,e){var r;if(t=t.entries){var n=t.length;for(r=0;r<n;r++)this.s(new Bt(this.b,t[r],e))}return!1},p=Dt.prototype,p.Td=0,p.removeChild=function(t){var e=t.g;this[e]===t&&(delete this[e],delete t.parent,--this.Td)},p.Dc=function(t,e){for(var r=0,n=this;n=n.parent;)++r;Ft(this,t,e,r)},p.ke=0,p.le=0,p.xb=0,Gt.prototype.qc=function(t,e,r,n){var i=this.a;if(!(t>=i[7]&&e>=i[4]&&t<=i[5]&&e<=i[6]))throw Error("Coordinates out of bounds");return Kt(this,this.a,t,e,r,this.b,n)},Gt.prototype.Dc=function(t,e){Ft(this.a,t,e===+e?e:this.b,0)},u(Mt,rt),p=Mt.prototype,p.zc=function(t){var e,r=0,n=t.length,i=new G(0,0),o=this.j,a=this.i;for(Mt.l.zc.call(this,t),It(a,a.a),Ht(a);r<n;r++)o.Ic(e=t[r],i).scale(4294967296).floor(),a.qc(i.x,i.y,e.wt,e.data);this.b=!0},p.vb=function(t){Mt.l.vb.call(this,t),this.zc(this.a)},p.cf=function(t){for(var e=t.length,r=Mt.l.vb;e--;)r.call(this,t[e]);this.zc(this.a)},p.Ne=function(t){Mt.l.Ne.call(this,t),this.zc(this.a)},p.Ka=function(t,e,r,n){return this.j.Ka(t/r/4294967296,e/r/4294967296,n)},p.oi=function(t){if(this.b){var e={clusters:[],noisePoints:[]};Nt(this,this.i.a,0,this.f+this.c,-1/0,e,null),this.b=!1,t(e)}},p.o=function(){Mt.l.o.call(this),this.i=null},Mt.prototype.disposeInternal=Mt.prototype.o,t("H.clustering.DataPoint",(function(t,e,r,n){this.lat=t,this.lng=e,this.wt=r===+r?r:1,this.data=n})),u(Pt,N),t("H.clustering.Provider",Pt),Pt.prototype.o=function(){Pt.l.o.call(this),this.g.ka(),this.b.C(),delete this.b,delete this.L,delete this.v,x.clearTimeout(this.na)};var Qt={FASTGRID:0,GRID:1,DYNAMICGRID:2};function Rt(t,e,r){t.na&&x.clearTimeout(t.na),e&&t.b.S(e,r),t.na=x.setTimeout(t.N,150)}function St(t){var e=t.L.clusters,r=t.L.noisePoints,n=e.length,i=r.length,o=0<n+i;for(t.g.ka();i--;){var a=r[i];t.g.ba(t.v.getNoisePresentation(a))}for(;n--;)r=e[n],t.g.ba(t.v.getClusterPresentation(r));o&&t.Ra()}function Tt(t,e){t:{for(var r=t.length,n="string"===typeof t?t.split(""):t,i=0;i<r;i++)if(i in n&&e.call(void 0,n[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}Pt.Strategy=Qt,Pt.prototype.N=function(){this.dispatchEvent("start"),this.b.oi(this.Y,jd)},Pt.prototype.Y=function(t){this.dispatchEvent("end"),this.L=t,St(this)},Pt.prototype.zc=function(t){this.b.zc(t),Rt(this)},Pt.prototype.setDataPoints=Pt.prototype.zc,Pt.prototype.vb=function(t){this.b.vb(t),Rt(this)},Pt.prototype.addDataPoint=Pt.prototype.vb,Pt.prototype.cf=function(t){this.b.cf(t),Rt(this)},Pt.prototype.addDataPoints=Pt.prototype.cf,Pt.prototype.Ne=function(t){this.b.Ne(t),Rt(this)},Pt.prototype.removeDataPoint=Pt.prototype.Ne,Pt.prototype.Km=function(){return this.v},Pt.prototype.getTheme=Pt.prototype.Km,Pt.prototype.Yn=function(t){this.v=t,this.L&&(this.g.ka(),St(this))},Pt.prototype.setTheme=Pt.prototype.Yn,Pt.prototype.Ib=function(){return!0},Pt.prototype.providesDomMarkers=Pt.prototype.Ib,Pt.prototype.Jb=function(){return!0},Pt.prototype.providesMarkers=Pt.prototype.Jb,Pt.prototype.uc=function(){return!0},Pt.prototype.providesSpatials=Pt.prototype.uc,Pt.prototype.Le=function(t,e){Rt(this,t,e)},Pt.prototype.preprocessData=Pt.prototype.Le,t("H.clustering.buildInfo",(function(){return Hf("H-clustering","1.30.15","f5837cb5d",{region:"row"})}));var Ut={};function Vt(t){var e=t.ownerDocument,r=e.documentElement;e=e.defaultView;var n=t.getBoundingClientRect();return t=n.left,n=n.top,isNaN(e.pageXOffset)?(t+=r.scrollLeft,n+=r.scrollTop):(t+=e.pageXOffset,n+=e.pageYOffset),new G(t,n)}function Wt(t,e,r){e=Dc(e)?e+"px":e,r=Dc(r)?r+"px":r,t.style[Af("transform")]="translate("+e+","+r+")"}var Xt,Yt=navigator.userAgent,Zt=-1<Yt.indexOf("Android")&&-1<Yt.indexOf("Mozilla/5.0")&&-1<Yt.indexOf("AppleWebKit"),$t=/AppleWebKit\/([\d.]+)/,au=null===$t.exec(Yt)?null:parseFloat($t.exec(Yt)[1]);Xt=Zt&&null!==au&&537>au;var bu=globalThis,cu=document.createElement("T");function du(){this.a=this.Xi()}du.prototype.Xi=function(){var t=navigator,e=[];return t&&(t.msPointerEnabled?e.push(eu):t.pointerEnabled&&e.push(fu)),1>e.length&&("TouchEvent"in bu&&e.push(gu),e.push(hu)),e},du.prototype.detectEventSets=du.prototype.Xi,du.prototype.addEventListener=function(t,e,r,n){for(var i,o=this.a,a=o.length,s=!1;a--;)(i=o[a][e])&&(s=!0,t.addEventListener(i,r,n||!1));s||t.addEventListener(e,r,n||!1)},du.prototype.removeEventListener=function(t,e,r,n){for(var i,o=this.a,a=o.length,s=!1;a--;)(i=o[a][e])&&(s=!0,t.removeEventListener(i,r,n||!1));s||t.removeEventListener(e,r,n||!1)};var fu={start:"pointerdown",end:"pointerup",move:"pointermove",cancel:"pointercancel",over:"pointerover",out:"pointerout",hover:"pointerhover"},eu={start:"MSPointerDown",end:"MSPointerUp",move:"MSPointerMove",cancel:"MSPointerCancel",over:"MSPointerOver",out:"MSPointerOut",hover:"MSPointerHover"},gu={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},hu={start:"mousedown",end:"mouseup",move:"mousemove",over:"mouseover",out:"mouseout",hover:"mousehover"};function iu(t,e,r,n){return t=t.createElement(e),r&&(t.className=r),n&&(t.innerHTML=n),t}function ju(t,e){for(var r=1,n=arguments.length;r<n;r++)t.appendChild(arguments[r])}var ku=new du;function lu(t,e,r){ku.addEventListener(t,e,r,void 0)}function mu(t,e,r){ku.removeEventListener(t,e,r,void 0)}function W(t,e){F.call(this),this.ya=t||"div",this.c=e?e.split(" "):[],this.T=!1,this.c.push("H_el")}function nu(t){(t=t.K())&&t.parentNode&&t.parentNode.removeChild(t)}function ou(t){t=t||{},W.call(this,"div","H_btn"),this.Bc(t.label||" "),this.cc(t.tooltip||""),this.setData(t.data),this.ta(!!t.disabled),this.O(pu.UP,!0),t.onStateChange&&this.addEventListener("statechange",t.onStateChange),this.b=A(this.b,this),this.a=A(this.a,this)}u(W,F),t("H.ui.base.Element",W),W.prototype.U=function(t){if(!t)throw Error("Wrong document object");return this.P=iu(t,this.ya,this.c.join(" ")),this.renderInternal(this.P,t),this.ta(this.Wb(),!0),this.cc(this.ra),this.jb(this.R),this.P},W.prototype.na=function(){},W.prototype.L=function(){},W.prototype.V=function(){},W.prototype.renderInternal=W.prototype.V,W.prototype.Wb=function(){return this.T},W.prototype.isDisabled=W.prototype.Wb,W.prototype.ta=function(t,e){return((t=!!t)!==this.T||e)&&((this.T=t)?this.Ga("H_disabled"):this.gb("H_disabled")),this},W.prototype.setDisabled=W.prototype.ta,W.prototype.v=null,W.prototype.getData=function(){return this.v},W.prototype.getData=W.prototype.getData,W.prototype.setData=function(t){this.v=t},W.prototype.setData=W.prototype.setData,W.prototype.cc=function(t){var e=this.K();this.ra=t,e&&(t?e.setAttribute("title",t):e.removeAttribute("title"))},W.prototype.setTooltip=W.prototype.cc,W.prototype.P=null,W.prototype.K=function(){return this.P},W.prototype.getElement=W.prototype.K,W.prototype.R=!0,W.prototype.jb=function(t){var e=this.K();this.R=t,e&&(e.style.display=t?"":"none")},W.prototype.setVisibility=W.prototype.jb,W.prototype.oc=function(){return this.R},W.prototype.getVisibility=W.prototype.oc,W.prototype.Ga=function(t){var e=this.K();return 0>this.c.indexOf(t)&&this.c.push(t),e&&(e.className=this.c.join(" ")),this},W.prototype.addClass=W.prototype.Ga,W.prototype.gb=function(t){t=this.c.indexOf(t);var e=this.K();return-1<t&&this.c.splice(t,1),e&&(e.className=this.c.join(" ")),this},W.prototype.removeClass=W.prototype.gb,W.prototype.o=function(){W.l.o.call(this),nu(this),this.v=this.P=null,delete this.ra},u(ou,W),t("H.ui.base.Button",ou),ou.prototype.ta=function(t,e){return t&&this.gb("H_active"),ou.l.ta.call(this,t,e)},ou.prototype.setDisabled=ou.prototype.ta,ou.prototype.V=function(t){lu(t,"start",this.b),lu(t,"end",this.a),lu(t,"out",this.a),this.Bc(this.ze(),!0)},ou.prototype.renderInternal=ou.prototype.V,ou.prototype.getState=function(){return this.g},ou.prototype.getState=ou.prototype.getState,ou.prototype.O=function(t,e){return t!==this.g&&(this.g=t,t===pu.DOWN?this.Ga("H_active"):this.gb("H_active"),e||this.dispatchEvent("statechange")),this},ou.prototype.setState=ou.prototype.O,ou.prototype.ze=function(){return this.f},ou.prototype.getLabel=ou.prototype.ze,ou.prototype.Bc=function(t,e){return(e||t!==this.f)&&(this.f=t,(e=this.K())&&(e.innerHTML=t)),this},ou.prototype.setLabel=ou.prototype.Bc,ou.prototype.b=function(t){this.Wb()||this.O(pu.DOWN),t.preventDefault()},ou.prototype.a=function(t){this.Wb()||this.O(pu.UP),t.preventDefault()},ou.prototype.o=function(){var t=this.K();t&&(mu(t,"start",this.b),mu(t,"end",this.a),mu(t,"out",this.a)),W.prototype.o.call(this)};var pu={UP:"up",DOWN:"down"};ou.State=pu;var qu={in:'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g><path d="m5 10.6h5.6v-5.6h2.8v5.6h5.6v2.8h-5.6v5.6h-2.8v-5.6h-5.6v-2.8z"></path></g></svg>',out:'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path d="m5 10.6h14v2.8h-14z"/></svg>'};function ru(t){var e;t=t||{},this.b=!!t.vertical,this.Y=t.length||"16em",this.a=Dc(e=t.min)?e:0,this.i=xd(this.a,Dc(e=t.max)?e:100),this.$=E(e=t.step)?1:e,this.j=su(this,Dc(e=t.value)?e:(this.a+this.i)/2),this.Nf=A(this.Nf,this),this.Jf=A(this.Jf,this),this.Pf=A(this.Pf,this),this.Of=A(this.Of,this),this.m=t.pointerArea,W.call(this,"div","H_slider"+(this.b?"":" H_l_horizontal"))}function tu(t){if(!t.s){lu(t.K(),"start",t.Nf);var e=t.m;lu(e,"move",t.Jf),lu(e,"end",t.Pf),lu(e,"out",t.Of),t.s=!0}}function uu(t){if(t.s){mu(t.K(),"start",t.Nf);var e=t.m;mu(e,"move",t.Jf),mu(e,"end",t.Pf),mu(e,"out",t.Of),t.s=!1}}function su(t,e){var r=t.$;return e=Zd(e,t.a,t.i),r?t.a+yd((e-t.a)/r)*r:e}function vu(t,e){var r=t.B,n=t.b;t.u||(t.u=r["offset"+(n?"Height":"Width")]),0>(e-=Vt(r)[n?"y":"x"])&&(e=0),e=(t.i-t.a)*e/t.u,e=su(t,n?t.i-e:t.a+e),t.j!==e&&(t.gg(e,!0),t.dispatchEvent(new aj(t.A.Zc,e,t.j)))}function wu(t,e){return(e.touches?e.targetTouches[0]:e)["page"+(t.b?"Y":"X")]}function xu(t){var e=!1,r=t.type;return-1!==r.indexOf("pointer")||-1!==r.indexOf("touch")?e=!0:C(t,MouseEvent)&&(e=1===t.which||1===t.buttons),e}function yu(t){var e=t.touches;return e&&1===e.length||C(t,MouseEvent)}u(ru,W),t("H.ui.base.Slider",ru),ru.prototype.gg=function(t,e){var r=this.b,n=r?"top":"left";return this.f&&!e||(t=Zd(t,this.a,this.i),this.g&&(r=(r?-1:1)*(e=100*(t-this.a)/(this.i-this.a)),this.g.style[n]=r+"%",this.xa.style[n]=100+r+"%"),this.j=su(this,t)),this.j},ru.prototype.setValue=ru.prototype.gg,ru.prototype.Qm=function(){return this.j},ru.prototype.getValue=ru.prototype.Qm,p=ru.prototype,p.Nf=function(t){var e=this.b;if(xu(t)&&yu(t)){var r=wu(this,t),n=t.target;n===this.g||n.parentElement===this.g?(this.N=r-Vt(this.g)[e?"y":"x"]-this.g.offsetWidth/2,this.K().className="H_slider H_slider_active"+(this.b?"":" H_l_horizontal"),this.f=!0):vu(this,r),t.preventDefault()}},p.Pf=function(){this.f&&(this.K().className="H_slider "+(this.b?"":" H_l_horizontal"),this.f=!1)},p.Of=function(t){this.f&&t.target===this.m&&(this.f=!1)},p.Jf=function(t){this.f&&yu(t)&&(xu(t)?(vu(this,wu(this,t)-this.N),t.preventDefault()):this.f=!1)},p.A={Zc:"change"},p.V=function(t,e){var r=iu(e,"div","H_slider_cont"),n=iu(e,"div","H_slider_knob_cont"),i=iu(e,"div","H_slider_knob"),o=iu(e,"div","H_slider_knob_halo"),a=iu(e,"div","H_slider_track");e=iu(e,"div","H_slider_track H_slider_track_active"),t.appendChild(r),r.appendChild(a),a.appendChild(e),r.appendChild(n),n.appendChild(i),n.appendChild(o),this.B=a,this.xa=e,this.g=n,this.m||(this.m=t.ownerDocument.body),r.style[this.b?"height":"width"]=this.Y,this.gg(this.j),tu(this)},ru.prototype.renderInternal=ru.prototype.V,ru.prototype.o=function(){uu(this)},ru.prototype.ta=function(t,e){return t?uu(this):this.B&&tu(this),W.prototype.ta.call(this,t,e)},ru.prototype.setDisabled=ru.prototype.ta;var zu={TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right",LEFT_TOP:"left-top",LEFT_MIDDLE:"left-middle",LEFT_BOTTOM:"left-bottom",RIGHT_TOP:"right-top",RIGHT_MIDDLE:"right-middle",RIGHT_BOTTOM:"right-bottom",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right"};function Au(t,e,r){W.call(this,t,e),this.a=r?r.concat():[]}function Bu(){Au.call(this,"div","H_ctl"),this.map=null,this.Fc="top-left"}function Cu(t){var e=(t=t||{}).slider;Bu.call(this),this.m=A(this.m,this),this.g=A(this.g,this),this.b=A(this.b,this),e&&(this.u=A(this.u,this),this.B=e,this.Xa=t.sliderSnaps,this.Ga("H_zoom_slider")),this.i=new ou({label:qu.in,onStateChange:this.m}),this.s=new ou({label:qu.out,onStateChange:this.m}),this.Ga("H_zoom"),this.Ga("H_grp"),this.$=!1!==t.fractionalZoom,this.setZoomSpeed(t.zoomSpeed||4),this.Mb(t.alignment||"right-middle")}function Du(t){t.removeChild(t.f),t.f=null,t.j&&(t.j.removeEventListener("minchange",t.b),t.j.removeEventListener("maxchange",t.b),t.j=null)}function Eu(t,e){var r={},n={};r["top-left"]=iu(e,"div",[Fu,Gu].join(" ")),r["top-center"]=iu(e,"div",[Fu,Hu,Iu,Gu].join(" ")),r["top-right"]=iu(e,"div",[Fu,Gu].join(" ")),r["left-top"]=iu(e,"div",[Fu,Ju].join(" ")),r["left-middle"]=iu(e,"div",[Fu,Ku,Lu,Ju].join(" ")),r["left-bottom"]=iu(e,"div",[Fu,Ju].join(" ")),r["right-top"]=iu(e,"div",[Fu,Ju].join(" ")),r["right-middle"]=iu(e,"div",[Fu,Mu,Lu,Ju].join(" ")),r["right-bottom"]=iu(e,"div",[Fu,Ju].join(" ")),r["bottom-left"]=iu(e,"div",[Fu,Gu].join(" ")),r["bottom-center"]=iu(e,"div",[Fu,Nu,Iu,Gu].join(" ")),r["bottom-right"]=iu(e,"div",[Fu,Gu].join(" ")),n["top-left"]=iu(e,"div",[Hu,Ku].join(" ")),n["top-right"]=iu(e,"div",[Hu,Mu].join(" ")),n["bottom-left"]=iu(e,"div",[Nu,Ku].join(" ")),n["bottom-right"]=iu(e,"div",[Nu,Mu].join(" ")),ju(n["top-left"],r["top-left"],r["left-top"]),ju(n["top-right"],r["top-right"],r["right-top"]),ju(n["bottom-left"],r["left-bottom"],r["bottom-left"]),ju(n["bottom-right"],r["right-bottom"],r["bottom-right"]),ju(t,n["top-left"],n["top-right"],n["bottom-left"],n["bottom-right"],r["top-center"],r["left-middle"],r["right-middle"],r["bottom-center"]),this.a=r}t("H.ui.LayoutAlignment",zu),u(Au,W),t("H.ui.base.Container",Au),Au.prototype.ta=function(t,e){var r=this.a?this.a.length:0;for(W.prototype.ta.call(this,t,e);r--;)this.a[r].ta(t,e);return this},Au.prototype.setDisabled=Au.prototype.ta,Au.prototype.Fa=function(t){var e=this.K();return this.a.push(t),e&&(t.U(e.ownerDocument),e.appendChild(t.K())),this},Au.prototype.addChild=Au.prototype.Fa,Au.prototype.Pg=function(){return this.a.concat()},Au.prototype.getChildren=Au.prototype.Pg,Au.prototype.removeChild=function(t){var e=this.a.indexOf(t),r=this.K();0<=e&&(this.a.splice(e,1),r&&r.removeChild(t.K()))},Au.prototype.removeChild=Au.prototype.removeChild,Au.prototype.ka=function(){var t=this.K();t&&this.a.forEach((function(e){t.removeChild(e.K())})),this.a=[]},Au.prototype.V=function(t,e){for(var r=0,n=this.a.length;r<n;r++)t.appendChild(this.a[r].U(e))},Au.prototype.renderInternal=Au.prototype.V,Au.prototype.o=function(){this.ka(),this.a.forEach(this.Y,this),W.prototype.o.call(this)},Au.prototype.Y=function(t){t.C()},u(Bu,Au),t("H.ui.Control",Bu),Bu.prototype.Ea=function(t){this.map=t},Bu.prototype.U=function(t){return Au.prototype.U.call(this,t)},Bu.prototype.V=function(t,e){Au.prototype.renderInternal.call(this,t,e),this.Mb(this.Fc)},Bu.prototype.renderInternal=Bu.prototype.V,Bu.prototype.He=function(){},Bu.prototype.onUnitSystemChange=Bu.prototype.He,Bu.prototype.Tb=function(){return this.map},Bu.prototype.getMap=Bu.prototype.Tb,Bu.prototype.ua=function(){return this.xa},Bu.prototype.getLocalization=Bu.prototype.ua,Bu.prototype.Fl=function(){return this.Fc},Bu.prototype.getAlignment=Bu.prototype.Fl,Bu.prototype.Mb=function(t){return"string"===typeof t&&zu[t.replace("-","_").toUpperCase()]===t&&(this.Fc=t,this.dispatchEvent("alignmentchange")),this},Bu.prototype.setAlignment=Bu.prototype.Mb,u(Cu,Bu),t("H.ui.ZoomControl",Cu),Cu.prototype.Um=function(){return this.N},Cu.prototype.getZoomSpeed=Cu.prototype.Um,Cu.prototype.ao=function(t){this.N=t},Cu.prototype.setZoomSpeed=Cu.prototype.ao,Cu.prototype.Ea=function(t){this.map!==t&&(this.map&&this.map.removeEventListener("mapviewchange",this.g),Du(this)),Bu.prototype.Ea.apply(this,arguments),this.map&&(this.b(),t.addEventListener("mapviewchange",this.g),t.addEventListener("baselayerchange",this.b))},Cu.prototype.setMap=Cu.prototype.Ea,Cu.prototype.o=function(){Bu.prototype.o.apply(this,arguments),this.map.removeEventListener("baselayerchange",this.b),Du(this)},Cu.prototype.V=function(t,e){Bu.prototype.renderInternal.call(this,t,e),this.i.cc(this.ua().translate("zoom.in")),this.s.cc(this.ua().translate("zoom.out"))},Cu.prototype.renderInternal=Cu.prototype.V,Cu.prototype.Mb=function(t){var e=this.Fc;return Bu.prototype.Mb.call(this,t),e!==t&&this.b(),this},Cu.prototype.setAlignment=Cu.prototype.Mb,Cu.prototype.g=function(){var t=this.map,e=t.ib(),r=t.Ta()-1;t=t.g||t.f.getCapabilities().lookAt.zoom,this.B&&this.f.gg(e),this.Wb()||(this.i.ta(e+r>=t.max),this.s.ta(e<=t.min))},Cu.prototype.ta=function(t,e){return Cu.l.ta.call(this,t,e),this.g(),this},Cu.prototype.setDisabled=Cu.prototype.ta,Cu.prototype.m=function(t){var e,r=(t=t.target)===this.i?1:-1,n=0<r?Math.ceil:Math.floor,i=this.map,o=this;i&&("down"===t.getState()?(i.c.startControl(),i.c.control(0,0,r*this.N,0,0,0)):i.c.endControl(!0,(function(t){e=o.$?t.zoom:n(t.zoom),t.zoom=e})))},Cu.prototype.u=function(t){this.map&&this.map.Ve(t.newValue)},Cu.prototype.b=function(){var t=this.Fc,e=this.Tb();if(/^top/g.test(t)||/^bottom/g.test(t)){var r=this.s;t=this.i;var n=!1}else r=this.i,t=this.s,n=!0;if(this.removeChild(r),this.removeChild(t),this.Fa(r),this.B&&e){Du(this),e=n;var i=(n=(r=this.map)&&r.g)||r.f.getCapabilities().lookAt.zoom;(this.j=n)&&(n.addEventListener("minchange",this.b),n.addEventListener("maxchange",this.b)),this.f=new ru({step:this.Xa?1:0,vertical:e,min:i.min,max:i.max,value:r.ib(),pointerArea:r.K()}),this.f.addEventListener(this.f.A.Zc,this.u),this.Fa(this.f)}this.Fa(t)};var Hu="H_l_top",Nu="H_l_bottom",Ku="H_l_left",Mu="H_l_right",Iu="H_l_center",Lu="H_l_middle",Gu="H_l_horizontal",Ju="H_l_vertical",Fu="H_l_anchor";function Ou(t,e){e?(e=t.offsetWidth,t.style.marginLeft=-Math.round(.5*e)+"px"):(e=t.offsetHeight,t.style.marginTop=-Math.round(.5*e)+"px")}Eu.prototype.update=function(){var t=this.a;Ou(t["top-center"],!0),Ou(t["bottom-center"],!0),Ou(t["left-middle"],!1),Ou(t["right-middle"],!1)},Eu.prototype.put=function(t,e){t=t?t.K():null;var r=e?this.a[e]:null;t&&r&&(t.parentElement&&t.parentElement.removeChild(t),r.insertBefore(t,/(bottom|right)$/.test(e)||/(center|middle)/.test(e)&&r.childNodes.length%2?r.firstChild:null)),this.update()};var Pu={IMPERIAL:"imperial",METRIC:"metric"};t("H.ui.UnitSystem",Pu);var Qu={btn:'<svg class="H_icon" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><g transform="translate(3 2)"><path d="m18 13v7h-18v-7h2v5h2v-2h2v2h2v-3h2v3h2v-2h2v2h2v-5z"></path><path d="m2.3.3c.7 0 1.3.1 1.8.4s.9.6 1.1 1 .4.9.4 1.4c0 .5-.1 1-.3 1.4s-.57 1-1 1.6-1.3 1.3-2.3 2.2h3.9l-.2 1.7h-6.16v-1.6c1.1-1.1 2-2 2.5-2.6s.9-1 1-1.4.3-.8.3-1.2c0-.4-.1-.7-.3-.9s-.5-.3-.9-.3c-.3 0-.6 0-.9.2s-.5.4-.8.7l-1.3-1c.4-.5.9-.9 1.4-1.2s1.2-.4 1.8-.4zm14.4 9.7h-2.3l-.2-3.8c 0-.9-.1-1.7-.1-2.4 0-.5 0-1 0-1.5l-1.5 6.7h-2.2l-1.6-6.7c.1.8.1 1.6.1 2.3 0 .5 0 1.1 0 1.7l-.2 3.8h-2.2l.7-9.7h2.9l1.5 6.6 1.4-6.6h2.9z"></path></g></g></svg>',point:'<svg height="22" viewBox="0 0 12 12" width="22" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m6 12c3.3 0 6-2.7 6-6s-2.7-6-6-6-6 2.7-6 6 2.7 6 6 6z" fill="#fff"></path><path d="m6 10c2.2 0 4-1.8 4-4s-1.8-4-4-4-4 1.8-4 4 1.8 4 4 4z" fill="#2ed5c9" stroke="#272c36" stroke-width="2"></path></g></svg>'};function Ru(t){ou.call(this,t),this.j=function(t){t.preventDefault()},this.i=A((function(t){this.Wb()||this.toggleState(),t.preventDefault()}),this)}function Su(t,e,r){$i.call(this,t,{icon:Tu,visibility:r}),Uu(this,e)}function Uu(t,e){t.hn=e,t.P&&(t.P.textContent=e)}u(Ru,ou),t("H.ui.base.PushButton",Ru),Ru.prototype.V=function(t){lu(t,"start",this.i),lu(t,"end",this.j),this.Bc(this.ze(),!0)},Ru.prototype.renderInternal=Ru.prototype.V,Ru.prototype.ko=function(){var t=pu.DOWN;return this.O(this.getState()===t?pu.UP:t),this},Ru.prototype.toggleState=Ru.prototype.ko,Ru.prototype.o=function(){var t=this.K();t&&mu(t,"start",this.i),ou.prototype.o.call(this)},u(Su,$i);var Tu=new Ri(iu(bu.document,"span","H_dm_label"),{onAttach:function(t,e,r){r.P=t,Uu(r,r.hn)},onDetach:function(t,e,r){delete r.P}});function Vu(t,e){F.call(this),this.b=t,this.f=new Su(this.io,""),e.push(this.f),this.a=new Q({objects:e,data:this}),this.dg=this.dg.bind(this)}function Wu(t,e){e&&(t.nextSibling=e,e.previousSibling=t)}function Xu(t,e,r,n){var i=new L,o=[];Wu(t,this),Wu(this,e),i.md(t.va()),i.md(e.va()),this.c=new th(i,{style:r.Sd}),this.i=new th(i,{style:{strokeColor:"transparent",lineWidth:Math.min(100,this.c.oa().lineWidth+2*(n||5))}}),r.c&&(this.g=new th(i,{style:r.c}),o.push(this.g)),o.push(this.c,this.i),Vu.call(this,r,o),this.m=this.j=-1,(t=this.a).addEventListener("pointermove",this.v,!0,this),t.addEventListener("pointerleave",this.u,!0,this)}function Yu(t,e,r){var n=t.c.ca();n.Xe(3*+r,3,[e.lat,e.lng,0]),t.g&&t.g.aa(n),t.i.aa(n),t.c.aa(n)}function Zu(t,e,r){r=e.b(r||0),this.c=new Jn(t,{icon:r,zIndex:0}),this.c.draggable=!0,Vu.call(this,e,[this.c]),(t=this.a).addEventListener("dragstart",this.xn,!0,this),t.addEventListener("drag",this.yn,!0,this),t.addEventListener("dragend",this.wn,!0,this)}function $u(t){var e=0;t.nextSibling&&t.previousSibling&&(t.nextSibling.Qc||t.previousSibling.Qc?t.nextSibling.Qc&&!t.previousSibling.Qc&&(e=2):e=1),e=t.b.b(e),t.c.Ac(e)}function av(t,e){this.c=e,this.b=t,this.a={Qc:!0},bv(this,this.a),this.Mf=A(this.Mf,this)}function cv(t,e){for(var r=(t=t.a).nextSibling;r!==t;){var n=r,i=r.previousSibling!==t&&e;(n.s=i)?n.dg():(n.Ch&&x.clearTimeout(n.Ch),n.Ch=x.setTimeout(n.dg,100)),r=r.nextSibling}}function dv(t,e){var r=e||t.a.nextSibling,n=0,i=0;if(e&&!ev(t,e))throw new D(t.Pe,0,e);for(r instanceof Zu?n=r.ye():r instanceof Xu&&(n=r.previousSibling.ye()),e=r;e&&e!==t.a;e=e.nextSibling,i++)e.Zh(n),1===i%2&&(n+=e.ye())}function ev(t,e){for(var r=t.a.nextSibling,n=!1;r!==t.a;){if(r===e){n=!0;break}r=r.nextSibling}return n}function fv(t,e,r){e=new Xu(e,r,t.c),t.b.ba(e.a)}function bv(t,e){t.a.nextSibling=e,e.previousSibling=t.a}function gv(t){var e,r=(t=t||{}).lineStyle;Bu.call(this),this.m=new Ru({label:Qu.btn,onStateChange:A(this.un,this)}),this.Fa(this.m),(e=t.distanceFormatter)&&(this.$i=e),r&&(this.Sj=r,this.mk=B),this.Mb(t.alignment||"right-bottom"),this.g={},this.g[0]=t.startIcon,this.g[2]=t.endIcon,this.g[1]=t.stopoverIcon,this.g[3]=t.splitIcon}function hv(t){var e,r=t.map,n={};t.f||(t.j=new N,t.s=new rl(t.j,{pixelRatio:t.map.Ta()}),t.u=e=t.j.Ub(),t.u.Qk(!0),e.addEventListener("dragstart",t.sn,!0,t),e.addEventListener("dragend",t.We,!0,t),e.addEventListener("pointerenter",t.We,!0,t),e.addEventListener("pointerleave",t.tn,!0,t),e.addEventListener("tap",t.Hn,!0,t),t.i=iv(t),n.a=A(t.$i,t),n.b=A(t.Zj,t),n.g=A(t.rj,t),n.map=t.map,n.f=t.i,n.Sd=t.Sj,n.c=t.mk,t.b=new av(t.u,n),t.f=!0),t.i&&t.u.ba(t.i),r.addEventListener("tap",t.jk,!0,t),r.a.add(t.s)}function jv(t){var e=t.map;t.f&&(e.removeEventListener("tap",t.jk,!0,t),e.Oe(t.s),t.b.ka())}function iv(t){function e(){var t=n.qb();return t={anchor:n.ed().clone().scale(o).floor(),size:new Ui(zd(t.w*o),zd(t.h*o)),hitArea:i},new Uj(n.Jc(),t)}var r,n=t.Zj(3),i=new Vi(Wi.NONE,[]),o=n===t.B?.5:1;if(1===n.getState())var a=e();else a=new Uj("<svg/>",{hitArea:i}),n.addEventListener("statechange",(function(){1===n.getState()&&r.Ac(e())}));return r=new Jn(t.map.Za(),{visibility:!1,icon:a})}function kv(){this.b=lv.CLOSED,Au.call(this,"div","H_overlay")}u(Vu,F),p=Vu.prototype,p.Qc=!1,p.io={lat:0,lng:0},p.Bc=function(t,e){Uu(this.f,t),this.f.aa(e)},p.Ch=0,p.dg=function(){this.f.jb(this.s)},u(Xu,Vu),Xu.prototype.ye=function(){var t=this.c.ca();return t.re(0).Sa(t.re(1))},Xu.prototype.v=function(t){var e=t.currentPointer;t=this.previousSibling.va();var r=this.nextSibling.va(),n=this.b.f,i=e.viewportX;e=e.viewportY,this.j===i&&this.m===e||(this.j=i,this.m=e,n.aa(this.b.g(t,r,{x:i,y:e})),n.jb(!0))},Xu.prototype.u=function(){this.b.f.jb()},Xu.prototype.Zh=function(){this.Bc(this.b.a(this.ye()),this.c.G().Za())},u(Zu,Vu),p=Zu.prototype,p.ck=0,p.A={Zc:"change"},p.ye=function(){return this.ck},p.va=function(){return this.c.ca()},p.yn=function(t){var e=t.currentPointer;t=e.viewportX,e=e.viewportY,this.i===t&&this.j===e||(this.i=t,this.j=e,this.c.aa(this.b.map.Pa(t-this.g.x,e-this.g.y)),this.dispatchEvent(new sd(this.A.Zc,this)))},p.xn=function(t){var e=t.currentPointer,r=e.viewportX;e=e.viewportY;var n=this.b.map.Aa(this.va());this.c.ae(1),this.g={x:r-n.x,y:e-n.y},t.stopPropagation()},p.wn=function(){this.c.ae(0)},p.Zh=function(t){this.ck=t,this.Bc(this.b.a(t),this.va())},t("H.ui.distanceMeasurement.Model",av),p=av.prototype,p.Ef=function(){return this.a.nextSibling===this.a},p.he=function(t){var e=this.a.previousSibling,r=this.Ef();return t=new Zu(t,this.c,r?0:2),this.b.ba(t.a),Wu(t,this.a),t.addEventListener(t.A.Zc,this.Mf),r?bv(this,t):(fv(this,e,t),$u(e),dv(this,e)),t},p.insertBefore=function(t,e){var r,n=1;if(e){if(!ev(this,e))throw new D(this.insertBefore,1,e);(r=e.previousSibling.Qc)&&(n=0),(t=new Zu(t,this.c,n)).addEventListener(t.A.Zc,this.Mf),this.b.ba(t.a),r?(fv(this,t,r=this.a.nextSibling),bv(this,t),e=t,$u(r)):(e=(r=e.previousSibling).previousSibling,n=r.nextSibling,this.b.Da(r.a),fv(this,e,t),fv(this,t,n)),dv(this,e)}else t=this.he(t);return t},p.ka=function(){bv(this,this.a),this.b.ka()},p.Pe=function(t){var e=this.a,r=t.previousSibling,n=t.nextSibling;if(!ev(this,t))throw new D(this.Pe,0,t);if(this.b.Da(t.a),r===e){var i=n;i!==e?(bv(this,t=i.nextSibling),t.Zh(0),$u(t),dv(this,t)):bv(this,this.a)}else n===e?(Wu(t=(i=r).previousSibling,e),$u(t)):r&&n&&(fv(this,r.previousSibling,n.nextSibling),this.b.nd([n.a,r.a]),dv(this,r.previousSibling));i&&i!==e&&this.b.Da(i.a)},p.Mf=function(t){var e=(t=t.target).previousSibling,r=t.nextSibling,n=t.va();if(!r.Qc){Yu(r,n,!1);var i=t}e.Qc||(Yu(e,n,!0),i=e.previousSibling),dv(this,i)},u(gv,Bu),t("H.ui.DistanceMeasurement",gv),p=gv.prototype,p.Bh=Pu.METRIC,p.Sj={strokeColor:"rgb(39,44,54)",lineWidth:5},p.mk={strokeColor:"white",lineWidth:7},p.$i=function(t){var e="m",r=0;return"metric"===this.Bh?1e3<=t&&(t/=1e3,e="km",r=1):(e="ft",5280<=(t/=.3048)&&(t/=5280,e="mi",r=1)),t.toFixed(r)+" "+this.ua().translate("scale."+e)},p.rj=function(t,e,r){var n=this.map.Aa(t);return e=this.map.Aa(e),r=new G(r.x,r.y).qj(n,e),this.map.Pa(r.x,r.y)||ng(t)},p.V=function(t,e){var r=22*(this.map.f.type===ik.P2D?this.map.Ta():1),n=r/2;Bu.prototype.renderInternal.call(this,t,e),this.Bh=Pu.METRIC,this.B=new Uj(Qu.point,{anchor:{x:n,y:n},size:{w:r,h:r},hitArea:new Vi(Wi.CIRCLE,[n,n,n])}),this.m.cc(this.ua().translate("distance.measurement"))},gv.prototype.renderInternal=gv.prototype.V,p=gv.prototype,p.Zj=function(t){return this.g[t]||this.B},p.We=function(){cv(this.b,!0)},p.sn=function(){cv(this.b)},p.tn=function(t){"touch"!==t.currentPointer.type&&cv(this.b)},p.Hn=function(t){var e,r=t.currentPointer,n=t.target.Ca;n&&(n=n.getData())instanceof Vu&&(e=n),n=e,t=(t=t.originalEvent).metaKey||t.altKey,n&&(t&&n instanceof Zu?this.b.Pe(n):n instanceof Xu&&(t=n.previousSibling.va(),e=n.nextSibling.va(),r={x:r.viewportX,y:r.viewportY},this.b.insertBefore(this.rj(t,e,r),n.nextSibling),this.i.jb()),this.We())},p.jk=function(t){var e=t.currentPointer;(t=t.target)!==this.map&&t.getProvider&&t.getProvider()===this.j||(this.b.he(this.map.Pa(e.viewportX,e.viewportY)),this.i.jb(),this.We())},p.un=function(t){"down"===t.target.getState()?hv(this):jv(this)},p.He=function(t){this.Bh=t,this.f&&(dv(this.b),this.We())},gv.prototype.onUnitSystemChange=gv.prototype.He,gv.prototype.o=function(){jv(this),this.f&&(this.j.C(),this.s.C()),gv.l.o.call(this)},gv.prototype.Ea=function(t){t?this.m.getState()===pu.DOWN&&(this.map=t,hv(this)):(jv(this),this.f=!1),Bu.prototype.Ea.apply(this,arguments)},gv.prototype.setMap=gv.prototype.Ea,u(kv,Au),t("H.ui.base.OverlayPanel",kv),kv.prototype.O=function(t,e){return(t!==this.b||e)&&(this.b=t,t===lv.OPEN?this.Ga("H_open"):this.gb("H_open")),this},kv.prototype.setState=kv.prototype.O,kv.prototype.getState=function(){return this.b},kv.prototype.getState=kv.prototype.getState,kv.prototype.sk=function(t){var e=t.Fc;t=t.K();var r=this.K(),n=r.style;if(this.gb("H_top"),this.gb("H_middle"),this.gb("H_bottom"),this.gb("H_left"),this.gb("H_center"),this.gb("H_right"),n.bottom=n.top=n.left=n.right=n.margin="",/top/g.test(e)){this.Ga("H_top"),n.top="0",n.margin="0 12px";var i=-1}else/bottom/g.test(e)?(this.Ga("H_bottom"),n.bottom="0",n.margin="0 12px",i=1):(this.Ga("H_middle"),n.top="50%",n.margin="0 12px",n.marginTop=-Math.round(.5*r.offsetHeight)+"px",i=0);/left/g.test(e)?(this.Ga("H_left"),n.left=t.offsetWidth+"px",n.marginLeft="12px"):/right/g.test(e)?(this.Ga("H_right"),n.right=t.offsetWidth+"px",n.marginRight="12px"):(this.Ga("H_center"),n.left="50%",0>i?(n.top=t.offsetHeight+"px",n.marginTop="12px"):0<i&&(n.bottom=t.offsetHeight+"px",n.marginBottom="12px"),n.marginLeft=-Math.round(.5*r.offsetWidth)+"px",t.appendChild(r))},kv.prototype.pointToControl=kv.prototype.sk;var lv={OPEN:"open",CLOSED:"closed"};function mv(t){t=t||{},Au.call(this,"div","H_rdo"),this.g=new W("div","H_rdo_title"),this.b=new Au("div","H_rdo_buttons"),this.Fa(this.g),this.Fa(this.b),this.i=A((function(t){t.target.getState()===pu.DOWN?(this.Gk(t.target,!0),this.dispatchEvent(nv)):t.target.O(pu.DOWN,!0)}),this),this.addEventListener("statechange",this.i),this.mi(t.title||""),t.onActiveButtonChange&&this.addEventListener(nv,t.onActiveButtonChange),t.buttonsOptions&&t.buttonsOptions.forEach((function(t){this.sg(new Ru(t))}),this)}kv.State=lv,u(mv,Au),t("H.ui.base.RadioGroup",mv);var nv="activebuttonchange";function ov(t){t=t||{},Bu.call(this),this.g=new kv,this.b=this.b.bind(this),this.m=this.m.bind(this),this.s=this.s.bind(this),this.Mb(t.alignment||"bottom-right"),pv(this,t.baseLayers,t.layers)}function pv(t,e,r){var n=t.Tb();t.f&&t.f.forEach((function(t){var e=t.layer;t=e&&Tt(r,(function(t){return t.layer===e})),e&&!t&&n.Oe(e)})),t.j=zc(e)?e:[],t.f=zc(r)?r:[],t.i&&(t.i.ka(),t.u.ka(),qv(t))}function qv(t){var e=t.ua();t.j.forEach((function(t,r){this.i.sg(new Ru({label:rv(e,t.label),data:r,disabled:!t.layer}))}),t),t.f.forEach((function(t,r){this.u.Fa(new Ru({label:rv(e,t.label),onStateChange:this.$.bind(this,t.layer),data:r,disabled:!t.layer}))}),t),t.N.jb(!(!t.f.length||!t.j.length)),x.setTimeout(function(){this.map&&(this.b(),this.B.ta(!(this.j&&this.j.length||this.f&&this.f.length)))}.bind(t))}function uv(t,e){var r,n,i={},o=e.da(),a=window.H.service&&window.H.service.omv.Provider;if(a&&e.da()instanceof a&&o.oa().qe){var s=o.oa(),l=function(){var t=vv.ground.filter((function(t){return!!s.Yg("layers."+t)})),a=vv.water.filter((function(t){return!!s.Yg("layers."+t)}));t.concat(a).length&&(Xh(i,s.qe(t)),Xh(i,s.qe(a,!1,!0)),delete i.global,r=new qi(i,s.Ab()),(n=o.j.bd(r)).mg=e,this.map.ug(n)),s.removeEventListener(Wh.CHANGE,l)}.bind(t);s.getState()!==Uh.READY?s.addEventListener(Wh.CHANGE,l):l()}}function sv(t){return Tt(t.map.a.Ha(),(function(t){return!!t.mg}))}function tv(t){t=t.map.a.Ha();var e=window.H.service&&window.H.service.traffic.flow.Provider;return!!e&&t.some((function(t){return t.da()instanceof e}))}mv.prototype.V=function(t,e){Au.prototype.renderInternal.call(this,t,e),this.mi(this.f,!0)},mv.prototype.renderInternal=mv.prototype.V,mv.prototype.ka=function(){this.b.ka()},mv.prototype.mi=function(t,e){return(t!==this.f||e)&&(this.f=t,this.g.K()&&(this.g.K().innerHTML=this.f)),this},mv.prototype.setTitle=mv.prototype.mi,mv.prototype.Mm=function(){return this.f},mv.prototype.getTitle=mv.prototype.Mm,mv.prototype.sg=function(t){if(!(t instanceof Ru))throw Error("PushButton expected");return t.ha(this),this.b.Fa(t),this},mv.prototype.addButton=mv.prototype.sg,mv.prototype.On=function(t){return this.b.removeChild(t),t.ha(null),this},mv.prototype.removeButton=mv.prototype.On,mv.prototype.sf=function(){return this.b.Pg()},mv.prototype.getButtons=mv.prototype.sf,mv.prototype.Gk=function(t,e){for(var r=this.sf(),n=r.length;n--;)r[n].O(r[n]===t?pu.DOWN:pu.UP,e)},mv.prototype.setActiveButton=mv.prototype.Gk,mv.prototype.o=function(){this.removeEventListener("statechange",this.i),this.ka(),Au.prototype.o.call(this)},u(ov,Bu),t("H.ui.MapSettingsControl",ov),ov.prototype.na=function(){var t=this.Tb();t&&(t.addEventListener("tap",this.m),(t=t.a).addEventListener("add",this.b),t.addEventListener("remove",this.b),t.addEventListener("set",this.b))},ov.prototype.L=function(){var t=this.Tb();t&&(t.removeEventListener("tap",this.m),(t=t.a).removeEventListener("add",this.b),t.removeEventListener("remove",this.b),t.removeEventListener("set",this.b))},ov.prototype.V=function(t,e){var r=this.ua().translate("layers.choose");Bu.prototype.renderInternal.call(this,t,e),this.na(),this.B=new Ru({tooltip:r,label:'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M6.7,14.6 L4.5,16 L12,20.6 L19.5,16 L17.3,14.6 L19.1,13.5 L23,16 L12,23 L1,16 L4.9,13.5 L6.7,14.6 Z M12,2 L23,9 L12,16 L1,9 L12,2 Z"></path></svg>',onStateChange:A((function(t){t.target.getState()===pu.DOWN?(this.g.O(lv.OPEN),this.g.sk(this)):this.g.O(lv.CLOSED)}),this)}),this.i=new mv({title:r,onActiveButtonChange:function(){t:{for(var t=this.i.sf(),e=t.length;e--;)if(t[e].getState()===pu.DOWN){t=t[e];break t}t=null}t=t.getData(),this.map.qd(this.j[t].layer),this.s()}.bind(this)}),this.u=new Au("div","H_grp"),this.N=new W("div","H_separator"),this.Fa(this.B),this.Fa(this.g),this.g.Fa(this.i),this.g.Fa(this.N),this.g.Fa(this.u),qv(this)},ov.prototype.renderInternal=ov.prototype.V,ov.prototype.b=function(){var t=this.map.g,e=this.map.a;this.j.forEach((function(e,r){this.i.sf()[r].O(pu[e.layer===t?"DOWN":"UP"],!0)}),this),this.f.forEach((function(t,r){r=this.u.Pg()[r],t.layer?r.O(pu[-1!==e.indexOf(t.layer)?"DOWN":"UP"],!0):r.ta(!0)}),this)},ov.prototype.$=function(t,e){e.target.getState()===pu.DOWN?this.map.ug(t):this.map.Oe(t),this.s()},ov.prototype.s=function(){var t;(t=sv(this))&&(t.mg.da().oa().Fe(t.da().oa().Kc()),this.map.Oe(t),t.C(),delete t.mg);tv(this)&&uv(this,this.map.g)};var vv={water:["water.water-labels"],ground:"road_labels continent_label island_label roads.shields roads.directions truck-restriction.signs places landuse.label".split(" ")};function rv(t,e){return/^layers?/.test(e)&&t.dh(e)?t.translate(e):e}ov.prototype.m=function(){this.B.O(pu.UP)},ov.prototype.o=function(){ov.l.o.call(this),this.L()};var wv=[];t("H.ui.i18n.defaultLocales",wv);var xv={},yv=[];function zv(t,e){xv[t]=e,-1===wv.indexOf(t)&&wv.push(t),yv.length?Av(t,e):yv=Object.keys(e)}function Av(t,e){for(var r,n=yv,i=n.length;i--;)if(!e[r=n[i]])throw Error("'"+r+"' key missing in translation map for "+t)}function Bv(t){t=t||{},Bu.call(this),this.f=new Ru({label:'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><g transform="translate(1 3)"><path fill-rule="nonzero" d="M5,0 L5,2 L2,2 L2,16 L5,16 L5,18 L2,18 C0.9,18 0,17 0,15.75 L0,2.25 C0,1 0.9,0 2,0 L5,0 Z M17,0 L20,0 C21.1,0 22,1 22,2.25 L22,15.75 C22,17 21.1,18 20,18 L17,18 L17,16 L20,16 L20,2 L17,2 L17,0 Z"></path><rect width="10" height="2" x="6" y="8"></rect><rect width="2" height="10" x="10" y="4"></rect></g></svg>',onStateChange:A(this.vn,this)}),this.Fa(this.f),this.Mb(t.alignment||"right-bottom")}function Cv(t,e){if(!Ac(t))throw new TypeError("string locale code required");if(Ea(e))Av(t,e);else{if(-1===wv.indexOf(t))throw Error("Default locale '"+t+"' does nto exist.");e=xv[t]}this.a=e||{},this.b=t}function Dv(t){t=t||{},Bu.call(this),this.Ga("H_scalebar"),this.Mb(t.alignment||"right-bottom"),this.s=150,this.update=A(this.update,this),this.i=this.g=this.b=this.f=null}function Ev(t){C(t,Qe,Ev,1),W.call(this,"div","H_context_menu_item"),this.b=t,this.f=A(this.f,this),this.a=A(this.a,this),this.b.addEventListener("update",this.a)}function Fv(t){C(t,Array,Fv,1),Au.call(this,"div","H_context_menu"),this.f=t,this.b=null}function Gv(t,e){e=e||{};var r=this;W.call(this,"div","H_ib H_ib_top"),this.B=A((function(t){r.Wb()||(r.close(),t.preventDefault())}),this),this.update=A(this.update,this),this.i=A(this.i,this),this.setPosition(t),this.Se(e.content),e.onStateChange&&this.addEventListener("statechange",e.onStateChange),this.O(Hv.OPEN)}u(Bv,Bu),t("H.ui.ZoomRectangle",Bv),p=Bv.prototype,p.vn=function(t){var e=this.map,r=e.b.element;t.target.getState()===pu.DOWN?(e.addEventListener("dragstart",this.ak,!0,this),e.addEventListener("drag",this.bk,!0,this),e.addEventListener("dragend",this.$j,!0,this),(t=r.ownerDocument.createElement("div")).className="H_zoom_lasso",r.appendChild(t),this.b=t):(e.removeEventListener("dragstart",this.ak,!0,this),e.removeEventListener("drag",this.bk,!0,this),e.removeEventListener("dragend",this.$j,!0,this),r.removeChild(this.b))},p.ak=function(t){var e=this.b.style,r=t.currentPointer,n=r.viewportX;r=r.viewportY,t.target===this.map&&(t.stopPropagation(),e.width="0px",e.height="0px",e.top=r+"px",e.left=n+"px",e.display="block",this.i=r,this.g=n)},p.bk=function(t){var e=t.currentPointer,r=e.viewportX,n=e.viewportY;e=this.g;var i=this.i,o=this.b.style;t.target===this.map&&(t.stopPropagation(),t=r-e,r=n-i,o.left=e+(0>t?t:0)+"px",o.top=i+(0>r?r:0)+"px",o.width=Math.abs(t)+"px",o.height=Math.abs(r)+"px")},p.$j=function(t){var e=this.map,r=t.currentPointer;t.target===this.map&&(t.stopPropagation(),this.b.style.display="none",e.c.Nb({bounds:tg([e.Pa(this.g,this.i),e.Pa(r.viewportX,r.viewportY)])},!0))},p.V=function(t,e){Bu.prototype.renderInternal.call(this,t,e),this.f.cc(this.ua().translate("zoom.rectangle"))},Bv.prototype.renderInternal=Bv.prototype.V,zv("nl-NL",{"layers.normal":"Kaartweergave","layers.satellite":"Satelliet","layers.terrain":"Terrein","layer.transit":"Openbaar vervoer","layer.traffic":"Verkeerssituatie","layer.incidents":"Toon verkeersincidenten","layers.choose":"Weergave kiezen",minimap:"Minimap","scale.switchToImperial":"Overgaan naar mijlen","scale.switchToMetric":"Wijzigen naar km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Uitzoomen","zoom.in":"Inzoomen","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Openbaar vervoer","traffic.MISCELLANEOUS":"Diversen","traffic.ACCIDENT":"Ongeval","traffic.OTHER_NEWS":"Meer informatie","traffic.PLANNED_EVENT":"Geplande afzetting","traffic.ROAD_HAZARD":"Gevaar op de weg","traffic.ROAD_CLOSURE":"Rijbaan afgesloten","traffic.WEATHER":"Weer","traffic.CONGESTION":"Verkeersopstopping","traffic.CONSTRUCTION":"Wegwerkzaamheden","traffic.DISABLED_VEHICLE":"Voertuig met pech","traffic.from":"Begintijd:","traffic.until":"Geschatte eindtijd:","distance.measurement":"Measure distance"}),zv("pt-PT",{"layers.normal":"Vista do mapa","layers.satellite":"Sat\xe9lite","layers.terrain":"Terreno","layer.transit":"Transportes p\xfablicos","layer.traffic":"Condi\xe7\xf5es de tr\xe2nsito","layer.incidents":"Mostrar incidentes de tr\xe2nsito","layers.choose":"Escolher vista",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Diminuir","zoom.in":"Aumentar","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transportes p\xfablicos","traffic.MISCELLANEOUS":"Diversos","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras not\xedcias","traffic.PLANNED_EVENT":"Evento planeado","traffic.ROAD_HAZARD":"Perigo na estrada","traffic.ROAD_CLOSURE":"Estrada fechada","traffic.WEATHER":"Meteorologia","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Constru\xe7\xe3o","traffic.DISABLED_VEHICLE":"Ve\xedculo avariado","traffic.from":"Hora de in\xedcio:","traffic.until":"Hora de fim prevista:","distance.measurement":"Measure distance"}),zv("ru-RU",{"layers.normal":"\u0420\u0435\u0436\u0438\u043c \u043a\u0430\u0440\u0442\u044b","layers.satellite":"\u0421\u043f\u0443\u0442\u043d\u0438\u043a\u043e\u0432\u0430\u044f","layers.terrain":"\u041c\u0435\u0441\u0442\u043d\u043e\u0441\u0442\u044c","layer.transit":"\u041e\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442","layer.traffic":"\u0414\u043e\u0440\u043e\u0436\u043d\u044b\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f","layer.incidents":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u043e\u0440\u043e\u0436\u043d\u044b\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f","layers.choose":"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0438\u0434",minimap:"Minimap","scale.switchToImperial":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u0438\u043b\u0438","scale.switchToMetric":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u0438\u043b\u043e\u043c\u0435\u0442\u0440\u044b","scale.km":"\u043a\u043c","scale.m":"\u043c","scale.mi":"\u043c\u0438\u043b\u044c","scale.ft":"\u0444\u0443\u0442","zoom.out":"\u041e\u0442\u0434\u0430\u043b\u0438\u0442\u044c","zoom.in":"\u041f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u044c","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\u041e\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442","traffic.MISCELLANEOUS":"\u041f\u0440\u043e\u0447\u0435\u0435 \u0414\u0422\u041f","traffic.ACCIDENT":"\u0414\u0422\u041f","traffic.OTHER_NEWS":"\u0414\u0440\u0443\u0433\u0438\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0438","traffic.PLANNED_EVENT":"\u041f\u043b\u0430\u043d\u043e\u0432\u043e\u0435 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435","traffic.ROAD_HAZARD":"\u0414\u043e\u0440\u043e\u0436\u043d\u0430\u044f \u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c","traffic.ROAD_CLOSURE":"\u0414\u043e\u0440\u043e\u0433\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u0430","traffic.WEATHER":"\u041f\u043e\u0433\u043e\u0434\u0430","traffic.CONGESTION":"\u041f\u0440\u043e\u0431\u043a\u0430","traffic.CONSTRUCTION":"\u0420\u0435\u043c\u043e\u043d\u0442","traffic.DISABLED_VEHICLE":"\u041d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u044b\u0439 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c","traffic.from":"\u0412\u0440\u0435\u043c\u044f \u043d\u0430\u0447\u0430\u043b\u0430:","traffic.until":"\u041e\u0436\u0438\u0434\u0430\u0435\u043c\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f:","distance.measurement":"\u0418\u0437\u043c\u0435\u0440\u0438\u0442\u044c \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435"}),zv("fi-FI",{"layers.normal":"Karttan\xe4kym\xe4","layers.satellite":"Satelliitti","layers.terrain":"Maasto","layer.transit":"Julkinen liikenne","layer.traffic":"Liikenneolosuhteet","layer.incidents":"N\xe4yt\xe4 liikennetapahtumat","layers.choose":"Valitse n\xe4kym\xe4",minimap:"Minimap","scale.switchToImperial":"Vaihda maileihin","scale.switchToMetric":"Vaihda kilometreihin","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Loitonna","zoom.in":"L\xe4henn\xe4","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Julkinen liikenne","traffic.MISCELLANEOUS":"Erittelem\xe4t\xf6n syy","traffic.ACCIDENT":"Onnettomuus","traffic.OTHER_NEWS":"Muu tapahtuma","traffic.PLANNED_EVENT":"Suunniteltu tapahtuma","traffic.ROAD_HAZARD":"Vaara tiell\xe4","traffic.ROAD_CLOSURE":"Tie suljettu","traffic.WEATHER":"S\xe4\xe4","traffic.CONGESTION":"Ruuhka","traffic.CONSTRUCTION":"Rakennusty\xf6","traffic.DISABLED_VEHICLE":"Pys\xe4htynyt ajoneuvo","traffic.from":"Alkamisaika:","traffic.until":"Arvioitu p\xe4\xe4ttymisaika:","distance.measurement":"Measure distance"}),zv("pt-BR",{"layers.normal":"Exibi\xe7\xe3o do mapa","layers.satellite":"Sat\xe9lite","layers.terrain":"Terreno","layer.transit":"Transporte p\xfablico","layer.traffic":"Condi\xe7\xf5es do tr\xe2nsito","layer.incidents":"Mostrar incidentes no tr\xe2nsito","layers.choose":"Escolher exibi\xe7\xe3o",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"milhas","scale.ft":"p\xe9s","zoom.out":"Menos zoom","zoom.in":"Mais zoom","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transporte p\xfablico","traffic.MISCELLANEOUS":"Miscel\xe2nea","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras not\xedcias","traffic.PLANNED_EVENT":"Evento planejado","traffic.ROAD_HAZARD":"Risco na estrada","traffic.ROAD_CLOSURE":"Estrada fechada","traffic.WEATHER":"Clima","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Constru\xe7\xe3o","traffic.DISABLED_VEHICLE":"Ve\xedculo incapacitado","traffic.from":"Hora de in\xedcio:","traffic.until":"Tempo final estimado:","distance.measurement":"Measure distance"}),zv("zh-CN",{"layers.normal":"\u5730\u56fe\u89c6\u56fe","layers.satellite":"\u536b\u661f","layers.terrain":"\u5730\u5f62","layer.transit":"\u516c\u5171\u4ea4\u901a","layer.traffic":"\u4ea4\u901a\u60c5\u51b5","layer.incidents":"\u663e\u793a\u4ea4\u901a\u4e8b\u4ef6","layers.choose":"\u9009\u62e9\u89c6\u56fe",minimap:"Minimap","scale.switchToImperial":"\u5207\u6362\u4e3a\u300c\u82f1\u91cc\u300d","scale.switchToMetric":"\u5207\u6362\u4e3a\u300c\u516c\u91cc\u300d","scale.km":"\u516c\u91cc","scale.m":"\u7c73","scale.mi":"\u82f1\u91cc","scale.ft":"\u82f1\u5c3a","zoom.out":"\u7f29\u5c0f","zoom.in":"\u653e\u5927","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\u516c\u5171\u4ea4\u901a","traffic.MISCELLANEOUS":"\u7efc\u5408\u4e8b\u4ef6","traffic.ACCIDENT":"\u4ea4\u901a\u610f\u5916","traffic.OTHER_NEWS":"\u5176\u4ed6\u65b0\u95fb","traffic.PLANNED_EVENT":"\u9884\u5b9a\u4e8b\u4ef6","traffic.ROAD_HAZARD":"\u9053\u8def\u5371\u9669","traffic.ROAD_CLOSURE":"\u9053\u8def\u5df2\u5173\u95ed","traffic.WEATHER":"\u5929\u6c14","traffic.CONGESTION":"\u5835\u585e","traffic.CONSTRUCTION":"\u65bd\u5de5","traffic.DISABLED_VEHICLE":"\u8f66\u8f86\u629b\u951a","traffic.from":"\u5f00\u59cb\u65f6\u95f4\uff1a","traffic.until":"\u9884\u8ba1\u7ed3\u675f\u65f6\u95f4\uff1a","distance.measurement":"Measure distance"}),zv("es-ES",{"layers.normal":"Mapa","layers.satellite":"Sat\xe9lite","layers.terrain":"Terreno","layer.transit":"Transporte p\xfablico","layer.traffic":"Estado del tr\xe1fico","layer.incidents":"Mostrar incidentes de tr\xe1fico","layers.choose":"Elija una vista",minimap:"Minimap","scale.switchToImperial":"Cambiar a millas","scale.switchToMetric":"Cambiar a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Alejar","zoom.in":"Acercar","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transporte p\xfablico","traffic.MISCELLANEOUS":"Varios","traffic.ACCIDENT":"Accidente","traffic.OTHER_NEWS":"M\xe1s noticias","traffic.PLANNED_EVENT":"Acto programado","traffic.ROAD_HAZARD":"Riesgo en carretera","traffic.ROAD_CLOSURE":"Carretera cerrada","traffic.WEATHER":"Tiempo","traffic.CONGESTION":"Atasco","traffic.CONSTRUCTION":"Construcci\xf3n","traffic.DISABLED_VEHICLE":"Veh\xedculo averiado","traffic.from":"Inicio:","traffic.until":"Finalizaci\xf3n estimada:","distance.measurement":"Measure distance"}),zv("fr-FR",{"layers.normal":"Carte","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Transports publics","layer.traffic":"Conditions de circulation","layer.incidents":"Afficher les incidents de circulation","layers.choose":"Choisir la vue",minimap:"Minimap","scale.switchToImperial":"Passer en miles","scale.switchToMetric":"Passer en km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom arri\xe8re","zoom.in":"Zoom avant","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transports publics","traffic.MISCELLANEOUS":"Divers","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Autre","traffic.PLANNED_EVENT":"\xc9v\xe9nement pr\xe9vu","traffic.ROAD_HAZARD":"Danger routier","traffic.ROAD_CLOSURE":"Chauss\xe9e ferm\xe9e","traffic.WEATHER":"M\xe9t\xe9o","traffic.CONGESTION":"Embouteillage","traffic.CONSTRUCTION":"Travaux","traffic.DISABLED_VEHICLE":"V\xe9hicule en panne","traffic.from":"Date ou heure de d\xe9but:","traffic.until":"Date et heure de fin estim\xe9es:","distance.measurement":"Measure distance"}),zv("pl-PL",{"layers.normal":"Widok mapy","layers.satellite":"Satelita","layers.terrain":"Teren","layer.transit":"Transport publiczny","layer.traffic":"Warunki drogowe","layer.incidents":"Poka\u017c zdarzenia drogowe","layers.choose":"Wybierz widok",minimap:"Minimap","scale.switchToImperial":"Zmie\u0144 na mile","scale.switchToMetric":"Zmie\u0144 na km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Oddal","zoom.in":"Przybli\u017c","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transport publiczny","traffic.MISCELLANEOUS":"Inne zdarzenie","traffic.ACCIDENT":"Wypadek","traffic.OTHER_NEWS":"Inne wiadomo\u015bci","traffic.PLANNED_EVENT":"Zdarzenie planowane","traffic.ROAD_HAZARD":"Niebezpiecze\u0144stwo na drodze","traffic.ROAD_CLOSURE":"Jezdnia zamkni\u0119ta","traffic.WEATHER":"Pogoda","traffic.CONGESTION":"Korek","traffic.CONSTRUCTION":"Budowa","traffic.DISABLED_VEHICLE":"Uszkodzony pojazd","traffic.from":"Data rozpocz\u0119cia:","traffic.until":"Przybli\u017cona data zako\u0144czenia:","distance.measurement":"Measure distance"}),zv("de-DE",{"layers.normal":"Kartenansicht","layers.satellite":"Satellit","layers.terrain":"Gel\xe4nde","layer.transit":"\xd6ffentliche Verkehrsmittel","layer.traffic":"Verkehrslage","layer.incidents":"Verkehrsst\xf6rungen anzeigen","layers.choose":"Ansicht ausw\xe4hlen",minimap:"Minimap","scale.switchToImperial":"Umrechnung in Meilen","scale.switchToMetric":"Umrechnung in Kilometer","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Verkleinern","zoom.in":"Vergr\xf6\xdfern","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\xd6ffentliche Verkehrsmittel","traffic.MISCELLANEOUS":"Diverse","traffic.ACCIDENT":"Unfall","traffic.OTHER_NEWS":"Anderes Ereignis","traffic.PLANNED_EVENT":"Geplantes Ereignis","traffic.ROAD_HAZARD":"Verkehrshindernis","traffic.ROAD_CLOSURE":"Fahrbahn gesperrt","traffic.WEATHER":"Wetter","traffic.CONGESTION":"Verkehrsstau","traffic.CONSTRUCTION":"Baustelle","traffic.DISABLED_VEHICLE":"Liegengebliebenes Fahrzeug","traffic.from":"Beginn:","traffic.until":"Voraussichtliches Ende:","distance.measurement":"Measure distance"}),zv("tr-TR",{"layers.normal":"Harita g\xf6r\xfcn\xfcm\xfc","layers.satellite":"Uydu","layers.terrain":"Arazi","layer.transit":"Toplu ula\u015f\u0131m","layer.traffic":"Trafik durumlar\u0131","layer.incidents":"Trafik olaylar\u0131n\u0131 g\xf6ster","layers.choose":"G\xf6r\xfcn\xfcm se\xe7",minimap:"Minimap","scale.switchToImperial":"Mile d\xf6n\xfc\u015ft\xfcr","scale.switchToMetric":"Kilometreye d\xf6n\xfc\u015ft\xfcr","scale.km":"km","scale.m":"m","scale.mi":"mil","scale.ft":"ft","zoom.out":"Uzakla\u015ft\u0131r","zoom.in":"Yak\u0131nla\u015ft\u0131r","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Toplu ula\u015f\u0131m","traffic.MISCELLANEOUS":"\xc7e\u015fitli","traffic.ACCIDENT":"Kaza","traffic.OTHER_NEWS":"Di\u011fer haberler","traffic.PLANNED_EVENT":"Planl\u0131 etkinlik","traffic.ROAD_HAZARD":"Yol tehlikesi","traffic.ROAD_CLOSURE":"Yol kapal\u0131","traffic.WEATHER":"Hava durumu","traffic.CONGESTION":"Yo\u011funluk","traffic.CONSTRUCTION":"Yol \xe7al\u0131\u015fmas\u0131","traffic.DISABLED_VEHICLE":"Ara\xe7 ar\u0131zas\u0131","traffic.from":"Ba\u015flang\u0131\xe7 zaman\u0131:","traffic.until":"Tahmini biti\u015f zaman\u0131:","distance.measurement":"Measure distance"}),zv("it-IT",{"layers.normal":"Vista mappa","layers.satellite":"Satellite","layers.terrain":"Terreno","layer.transit":"Mezzi pubblici","layer.traffic":"Condizioni del traffico","layer.incidents":"Mostra incidenti stradali","layers.choose":"Scegli vista",minimap:"Minimap","scale.switchToImperial":"Passa a miglia","scale.switchToMetric":"Passa a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom indietro","zoom.in":"Zoom avanti","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Mezzi pubblici","traffic.MISCELLANEOUS":"Varie","traffic.ACCIDENT":"Incidente","traffic.OTHER_NEWS":"Altre notizie","traffic.PLANNED_EVENT":"Evento pianificato","traffic.ROAD_HAZARD":"Strada dissestata","traffic.ROAD_CLOSURE":"Strada chiusa","traffic.WEATHER":"Maltempo","traffic.CONGESTION":"Ingorgo","traffic.CONSTRUCTION":"Lavori in corso","traffic.DISABLED_VEHICLE":"Veicolo in panne","traffic.from":"Ora di inizio:","traffic.until":"Ora di fine stimata:","distance.measurement":"Measure distance"}),zv("en-US",{"layers.normal":"Map view","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Public transport","layer.traffic":"Traffic conditions","layer.incidents":"Show traffic incidents","layers.choose":"Choose view",minimap:"Minimap","scale.switchToImperial":"Change to miles","scale.switchToMetric":"Change to km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom out","zoom.in":"Zoom in","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Public transport","traffic.MISCELLANEOUS":"Miscellaneous","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Other news","traffic.PLANNED_EVENT":"Planned event","traffic.ROAD_HAZARD":"Road hazard","traffic.ROAD_CLOSURE":"Roadway closed","traffic.WEATHER":"Weather","traffic.CONGESTION":"Congestion","traffic.CONSTRUCTION":"Construction","traffic.DISABLED_VEHICLE":"Disabled vehicle","traffic.from":"Start time:","traffic.until":"Estimated end time:","distance.measurement":"Measure distance"}),t("H.ui.i18n.Localization",Cv),Cv.prototype.nm=function(){return this.b},Cv.prototype.getLocale=Cv.prototype.nm,Cv.prototype.gm=function(){return Object.keys(this.a)},Cv.prototype.getKeys=Cv.prototype.gm,Cv.prototype.dh=function(t){return!(!this.a||!this.a[t])},Cv.prototype.hasKey=Cv.prototype.dh,Cv.prototype.translate=function(t){var e=this.a[t];if(!Ac(e))throw Error("Translation missing for key '"+t+"'.");return e},Cv.prototype.translate=Cv.prototype.translate,u(Dv,Bu),t("H.ui.ScaleBar",Dv),Dv.prototype.V=function(t,e){Bu.prototype.renderInternal.call(this,t,e),t.innerHTML='<svg height="12" version="1.1" xmlns="http://www.w3.org/2000/svg"><polyline style="fill:none; stroke:white; stroke-width:4" points="2,2 2,10 98,10 98,2"/><polyline style="fill:none; stroke:black; stroke-width:2" points="2,2 2,10 98,10 98,2"/></svg><div style="padding: 0 0 0 10px"></div>',t.style.direction="ltr",this.f=t.firstChild,e=this.f.childNodes,this.b=e[0],this.g=e[1],this.i=t.lastChild,this.j=Pu.METRIC,this.m=A((function(t){this.Wb()||(this.dispatchEvent("toggleunitsystem"),t.preventDefault())}),this),this.u=A((function(t){t.preventDefault()}),this),lu(t,"start",this.u),lu(t,"end",this.m),this.cc(this.ua().translate("scale.switchToImperial")),this.update()},Dv.prototype.renderInternal=Dv.prototype.V,Dv.prototype.Ea=function(t){this.map&&this.map.removeEventListener("mapviewchange",this.update),t&&t.addEventListener("mapviewchange",this.update),Bu.prototype.Ea.apply(this,arguments)},Dv.prototype.setMap=Dv.prototype.Ea,Dv.prototype.capture=function(t,e,r){var n=this.K(),i=n.ownerDocument,o=i.createElement("canvas"),a=o.getContext("2d"),s=i.createElementNS("http://www.w3.org/2000/svg","svg"),l=i.createElementNS("http://www.w3.org/2000/svg","foreignObject"),u=lf(n,i,!1);i=parseFloat(n.offsetWidth)+1;var c=parseFloat(n.offsetHeight),h=i*t;t*=c,o.width=h,o.height=t,s.setAttribute("xmlns","http://www.w3.org/2000/svg"),s.setAttribute("width",h),s.setAttribute("height",t),s.setAttribute("viewBox","0 0 "+i+" "+c),l.setAttribute("width","100%"),l.setAttribute("height","100%"),s.appendChild(l),u.setAttribute("width","100%"),u.setAttribute("height","100%"),u.setAttribute("xmlns","http://www.w3.org/1999/xhtml");var f=window.getComputedStyle(n);"box-shadow display align-items font font-family font-size height text-shadow direction".split(" ").forEach((function(t){u.style.setProperty(t,f.getPropertyValue(t))})),l.appendChild(u),new tf("image",n=bf(s.outerHTML)).then((function(t){a.drawImage(t,0,0),e(o)}),r)},Dv.prototype.capture=Dv.prototype.capture,Dv.prototype.He=function(t){this.j=t,this.cc("imperial"===t?this.ua().translate("scale.switchToMetric"):this.ua().translate("scale.switchToImperial")),this.update()},Dv.prototype.onUnitSystemChange=Dv.prototype.He,Dv.prototype.update=function(){var t;if(this.K()){this.f=this.f,this.b=this.b;var e=this.s,r=0,n=this.map;if(n){var i=Math.round(.5*n.b.width),o=Math.round(.5*n.b.height);(t=n.Pa(i,o))&&(n=n.Pa(i+1,o))&&(r=100*t.Sa(n))}r&&(this.j===Pu.IMPERIAL?1609.344>r?(n=r/.3048006,t=this.ua().translate("scale.ft")):(n=r/1609.344,t=this.ua().translate("scale.mi")):1e3>r?(n=r,t=this.ua().translate("scale.m")):(n=r/1e3,t=this.ua().translate("scale.km")),(n=(r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)))/n*100)<e/5?(r*=5,n*=5):n<e/2?(r*=2,n*=2):n>e&&(r/=2,n/=2),n=Math.round(n),this.f.setAttribute("width",n),this.i.textContent=r+" "+t,this.b.points.getItem(2).x=this.g.points.getItem(2).x=this.b.points.getItem(3).x=this.g.points.getItem(3).x=n-2)}},u(Ev,W),t("H.ui.context.Item",Ev),Ev.prototype.f=function(t){var e=this.b,r=e.callback;r&&!e.isDisabled()&&(this.dispatchEvent("click"),r(t))},Ev.prototype.V=function(){var t=this,e=this.K();De(e,"click",this.f),e.addEventListener("keyup",(function(e){13==e.keyCode&&t.f(e)})),this.a()},Ev.prototype.renderInternal=Ev.prototype.V,Ev.prototype.a=function(){var t=this.K(),e=this.b;e.callback?(this.Ga("clickable"),t.setAttribute("tabindex","0")):(this.gb("clickable"),t.removeAttribute("tabindex")),e.isDisabled()?this.Ga("disabled"):this.gb("disabled"),e=e.getLabel(),cu.textContent=e,t.innerHTML=cu.innerHTML.split("\n").join("<br/>")},Ev.prototype.o=function(){W.prototype.o.call(this),this.b.removeEventListener("update",this.a)},u(Fv,Au),t("H.ui.context.Menu",Fv),Fv.prototype.V=function(){Au.prototype.V.apply(this,arguments),this.f.forEach((function(t){t===Re?t=new W("div","H_context_menu_item_separator"):(t=new Ev(t)).addEventListener("click",this.g.bind(this)),this.Fa(t)}),this),De(this.K(),["mousedown","touchstart","pointerdown","wheel"],(function(t){t.stopPropagation()}))},Fv.prototype.renderInternal=Fv.prototype.V,Fv.prototype.setPosition=function(t,e){if(this.b){var r=this.K(),n=r.offsetWidth,i=r.offsetHeight,o=this.b,a=o.b.width;t+n>a&&t>a/2&&(t-=n),e+i>(o=o.b.height)&&e>o/2&&(e-=i),Wt(r,t,e)}},Fv.prototype.setPosition=Fv.prototype.setPosition,Fv.prototype.g=function(){this.b&&this.b.dispatchEvent(new sd("contextmenuclose",this.b))},Fv.prototype.Ea=function(t){this.b=t},Fv.prototype.setMap=Fv.prototype.Ea,u(Gv,W),t("H.ui.InfoBubble",Gv),Gv.prototype.a=null,Gv.prototype.va=function(){return this.u},Gv.prototype.setPosition=function(t){this.u=ng(t),this.update()},Gv.prototype.setPosition=Gv.prototype.setPosition,Gv.prototype.Ea=function(t){this.a=t},Gv.prototype.V=function(t,e){this.m=iu(e,"div","H_ib_body"),this.tailEl_=iu(e,"div","H_ib_tail"),this.f=iu(e,"div","H_ib_close H_btn",'<svg version="1.1" class="H_icon" viewBox="0 0 12 12"><path d="m8.12 6 3.66-3.66c.29-.29.29-.76 0-1.05l-1.06-1.06c-.29-.29-.76-.29-1.05 0l-3.66 3.66-3.66-3.66c-.29-.29-.76-.29-1.05 0l-1.06 1.06c-.29.29-.3.76 0 1.05l3.66 3.66-3.66 3.66c-.29.29-.29.76 0 1.05l1.06 1.06c.29.29.76.29 1.05 0l3.66-3.66 3.66 3.66c.29.29.76.29 1.05 0l1.06-1.06c.29-.29.3-.76 0-1.05z"></path></svg>'),this.b=iu(e,"div","H_ib_content","&nbsp;"),this.m.appendChild(this.f),this.m.appendChild(this.b),lu(this.f,"start",this.B),this.a.c.addEventListener("sync",this.update),this.a.b.addEventListener("sync",this.update),t.appendChild(this.m),t.appendChild(this.tailEl_),this.Se(this.g)},Gv.prototype.renderInternal=Gv.prototype.V,Gv.prototype.i=function(){this.s||(this.s=setTimeout(this.update,0))},Gv.prototype.update=function(){var t,e=this.K(),r=this.a,n="none";if(this.s=0,r&&e&&this.getState()===Hv.OPEN){if(t=r.Aa(this.u)){var i=t.x;t=t.y,(i>=-(r=r.b.width)||i<=2*r||t>=-r||t<=2*r)&&(n="",Xt?(e.style.left=i-r+"px",e.style.top=t+"px"):Wt(e,i,t))}e.style.display=n,""===n&&(e.style.visibility="visible")}};var Hv={OPEN:"open",CLOSED:"closed"};function Iv(t){this.c=t,this.a=this.b=null,this.i=0,this.g=22,this.f=A(this.f,this),(t=this.c.Tb()).addEventListener("mapviewchange",this.s,!1,this),(t=t.a).addEventListener("add",this.j,!1,this),t.addEventListener("remove",this.m,!1,this)}function Jv(t,e){t.b&&e&&t.b===e.da()||(t.b&&t.b.removeEventListener("tap",t.f),e?(t.b=e.da(),t.b.addEventListener("tap",t.f),t.i=t.b.min,t.g=t.b.max):(t.b=null,t.i=0,t.g=22))}function Kv(t){return window.H.service&&t.da()instanceof window.H.service.traffic.incidents.Provider}function Lv(t,e){var r=t.K(),n=this;F.call(this),this.c=t,this.i=r.ownerDocument,this.f={},this.b=[],new Iv(this),this.P=iu(this.i,"div","H_ui"),this.setDirection(),this.T=A((function(t){this.s.put(t.target,t.target.Fc)}),this),this.addEventListener("alignmentchange",this.T),this.L=A((function(){this.al()}),this),this.addEventListener("toggleunitsystem",this.L),this.P.addEventListener("contextmenu",this.v,!1),this.P.addEventListener("MSHoldVisual",this.v,!1),this.c.addEventListener("contextmenu",this.B,!1,this),this.c.addEventListener("contextmenuclose",this.u,!1,this),this.c.mb(this.C.bind(this)),this.a=null,this.m=-1,this.s=new Eu(this.P,this.i),this.g=Pu.METRIC,Mv(this,"en-US"),e&&Nv(this,e),r.appendChild(this.P),x.setTimeout((function(){n.s.update()}),1)}function Mv(t,e){if(Ac(e))var r=e;else{if(!(e instanceof Cv))throw Error("The locale parameter must be a string or a H.ui.i18n.Localization object.");r=e.b;var n=e}if(!r)throw Error("No locale was defined.");if(n)t.j=n;else{if(!(0<=wv.indexOf(r)))throw Error("Locale ["+r+"] is not supported.");t.j=new Cv(r)}}function Nv(t,e){var r,n;e.unitSystem&&t.fg(e.unitSystem),(n=e.locale)&&Mv(t,n),(r=e.zoom)&&t.vd("zoom",new Cu(Ea(r)?r:null)),(r=e.zoomrectangle)&&t.vd("zoomrectangle",new Bv(Ea(r)?r:null)),(r=e.mapsettings)&&t.vd("mapsettings",new ov(Ea(r)?r:null)),(r=e.scalebar)&&t.vd("scalebar",new Dv(Ea(r)?r:null)),(r=e.distancemeasurement)&&t.vd("distancemeasurement",new gv(Ea(r)?r:null))}function Pv(t,e,r,n){for(var i=t,o=0;i&&o<e.length;o++)i=i[e[o]];i&&i!==t&&n.push({label:r,layer:i})}function Ov(t,e,r){var n=[],i=[],o=e.raster;if(t===ik.P2D&&o){if(Pv(e,["raster","normal","map"],"layers.normal",n),Pv(e,["raster","satellite","map"],"layers.satellite",n),Pv(e,["raster","terrain","map"],"layers.terrain",n),r)for(var a in o)if(o[a]&&o[a].map===r){var s=a;break}Pv(e,["raster","normal","trafficincidents"],"layer.incidents",i),Pv(e,["raster",s,"transit"],"layer.transit",i)}else Pv(e,["vector","normal","map"],"layers.normal",n),Pv(e,["raster","satellite","map"],"layers.satellite",n),Pv(e,["vector","normal","traffic"],"layer.traffic",i),Pv(e,["vector","normal","trafficincidents"],"layer.incidents",i);return{alignment:"bottom-right",baseLayers:n,layers:i}}function Qv(t,e){if(e=e||{},!(t&&t instanceof ql))throw Error("Base layer is mandatory for overview UI element");Bu.call(this),this.f=new Ru({label:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="H_icon"><g fill-rule="evenodd" transform="translate(2 2)"><rect width="9" height="9" x="10" y="10"/><rect class="H_icon_stroke" width="18" height="18" x="1" y="1" fill="none" stroke="#000" stroke-width="2" rx="2"/></g></svg>',onStateChange:A(this.g,this)}),this.Fa(this.f),this.b=new Rv(t,e.zoomDelta,e.scaleX,e.scaleY),this.Mb(e.alignment||"right-bottom"),this.Fa(this.b)}function Rv(t,e,r,n){this.j=t,"number"===typeof e&&(this.cl=e),"number"===typeof r&&(this.nk=r),"number"===typeof n&&(this.pk=n),Au.call(this,"div","H_overview")}function Tv(t){!t.ud&&Sv(t),t.gb("H_overview_active"),t.b.removeEventListener("mapviewchange",t.pi,!1,t)}function Sv(t,e){var r=t.b.b.element,n=t.K().style,i=r.offsetWidth/t.nk/10;r=r.offsetHeight/t.pk/10;var o=t.g.style;e?(n.width=i+"em",n.height=r+"em",o.width=i+"em",o.height=r+"em"):n.width=n.height="0em",t.f.b.resize()}function Uv(t,e){if(!t)throw new D(Uv,0,t);Uv.l.constructor.call(this,t),this.b={},this.c=!(!e||!e.ic),this.f=Vv++}Gv.State=Hv,Gv.prototype.j=Hv.OPEN,Gv.prototype.getState=function(){return this.j},Gv.prototype.getState=Gv.prototype.getState,Gv.prototype.O=function(t){t!==this.j&&(this.j=t,this.dispatchEvent("statechange")),(t=this.K())&&(this.j===Hv.OPEN?(t.style.display="block",t.style.visibility="hidden",this.i()):t.style.display="none")},Gv.prototype.setState=Gv.prototype.O,Gv.prototype.close=function(){this.O(Hv.CLOSED)},Gv.prototype.close=Gv.prototype.close,Gv.prototype.open=function(){this.O(Hv.OPEN)},Gv.prototype.open=Gv.prototype.open,Gv.prototype.Ol=function(){return this.b||null},Gv.prototype.getContentElement=Gv.prototype.Ol,Gv.prototype.Se=function(t){if(t){if("string"!==typeof t&&("number"!==typeof t.nodeType||"string"!==typeof t.nodeName))throw Error("InfoBubble content must be a string or HTML node.");this.g=t}else this.g="";this.K()&&(this.g?(this.b.innerHTML="","string"===typeof this.g?this.b.innerHTML=t:"number"===typeof t.nodeType&&"string"===typeof t.nodeName&&this.b.appendChild(t)):this.b.innerHTML="&nbsp;",this.i())},Gv.prototype.setContent=Gv.prototype.Se,Gv.prototype.o=function(){this.close(),this.Se(""),this.f&&mu(this.f,"end",this.B),this.a&&(this.a.c.removeEventListener("sync",this.update),this.a.b.removeEventListener("sync",this.update)),W.prototype.o.call(this)},Iv.prototype.s=function(t){var e=t.newValue.zoom;this.a&&t.modifiers&t.ZOOM&&(e<this.i||e>this.g)&&this.a.close()},Iv.prototype.j=function(t){Kv(t=t.added)&&Jv(this,t)},Iv.prototype.m=function(t){Kv(t.removed)&&(this.a&&this.a.close(),Jv(this,null))},Iv.prototype.f=function(t){var e;if(t.target&&(e=t.target.getData())&&0===t.currentPointer.button){var r=t.target.ca();this.a||(this.a=new Gv(r),this.a.Ga("H_tib"),this.c.Ji(this.a)),this.a.setPosition(r),r=e.TRAFFIC_ITEM_TYPE_DESC.replace(" ","_"),r=this.c.ua().dh("traffic."+r)?this.c.ua().translate("traffic."+r):e.TRAFFIC_ITEM_DESCRIPTION[e.TRAFFIC_ITEM_DESCRIPTION.length-1].value,this.a.Se('<div class="H_tib_content"><div class="H_rdo_title" dir="auto">{{title}}</div><div class="H_tib_desc" dir="auto"><span>{{desc}}</span><div class="H_tib_time"><span class="H_tib_left">{{traffic.from}}</span><span class="H_tib_right">{{from}}</span><br/><span class="H_tib_left">{{traffic.until}}</span><span class="H_tib_right">{{until}}</span></div></div>'.replace("{{title}}",r).replace("{{desc}}",e.TRAFFIC_ITEM_DESCRIPTION[0].value).replace("{{traffic.from}}",this.c.ua().translate("traffic.from")).replace("{{traffic.until}}",this.c.ua().translate("traffic.until")).replace("{{from}}",e.START_TIME).replace("{{until}}",e.END_TIME)),this.a.open()}t.stopPropagation()},u(Lv,F),t("H.ui.UI",Lv),Lv.prototype.v=function(t){for(var e=t.target;e&&!/\bH_ib_content\b/.test(e.className);)e=e.parentNode;e||t.preventDefault()},Lv.prototype.K=function(){return this.P},Lv.prototype.getElement=Lv.prototype.K,Lv.prototype.Tb=function(){return this.c},Lv.prototype.getMap=Lv.prototype.Tb,Lv.prototype.Pm=function(){return this.g},Lv.prototype.getUnitSystem=Lv.prototype.Pm,Lv.prototype.fg=function(t){var e,r=this.f;if(t!==this.g)for(e in this.g=t,r)r[e]instanceof Bu&&r[e].onUnitSystemChange(this.g)},Lv.prototype.setUnitSystem=Lv.prototype.fg,Lv.prototype.setDirection=function(t){this.P.setAttribute("dir",t||getComputedStyle(this.Tb().K()).direction)},Lv.prototype.setDirection=Lv.prototype.setDirection,Lv.prototype.ua=function(){return this.j},Lv.prototype.al=function(){this.g===Pu.METRIC?this.fg(Pu.IMPERIAL):this.fg(Pu.METRIC)},Lv.prototype.toggleUnitSystem=Lv.prototype.al,Lv.prototype.Ji=function(t){var e=this.b.length,r=this.P;if(0>this.b.indexOf(t)){t.ha(this),t.Ea(this.c);var n=t.U(this.i);e=0<e?this.b[e-1].K().nextSibling:this.P.firstChild,r.insertBefore(n,e),this.b.push(t)}},Lv.prototype.addBubble=Lv.prototype.Ji,Lv.prototype.B=function(t){var e=t.items;this.a&&this.u(),clearTimeout(this.m),this.m=x.setTimeout(function(){e.length&&(this.a=new Fv(e),this.P.insertBefore(this.a.U(this.i),this.P.firstChild),this.a.ha(this),this.a.Ea(this.c),this.a.setPosition(t.viewportX,t.viewportY))}.bind(this),0)},Lv.prototype.u=function(){this.a&&(this.a.C(),this.a=null)},Lv.prototype.Nn=function(t){var e=this.b.indexOf(t);-1<e&&(t.ha(null),t.Ea(null),this.b.splice(e,1),this.P.removeChild(t.K()))},Lv.prototype.removeBubble=Lv.prototype.Nn,Lv.prototype.Kl=function(){return this.b},Lv.prototype.getBubbles=Lv.prototype.Kl,Lv.prototype.vd=function(t,e){if(this.we(t))throw Error("A control with name ["+t+"] is already registered.");e.ha(this),e.Ea(this.c),e.xa=this.j,e.U(this.i),e.onUnitSystemChange(this.g),this.f[t]=e},Lv.prototype.addControl=Lv.prototype.vd,Lv.prototype.Pn=function(t){var e=this.we(t);if(!e)throw Error("Control ["+t+"] not found in this UI's controls.");return e.L(),e.ha(null),e.Ea(null),nu(e),delete this.f[t],e},Lv.prototype.removeControl=Lv.prototype.Pn,Lv.prototype.we=function(t){return this.f[t]},Lv.prototype.getControl=Lv.prototype.we,Lv.prototype.o=function(){for(var t in this.f)Ut.hasOwnProperty.call(this.f,t)&&this.f[t].C();this.b.forEach((function(t){t.C()})),(t=this.P.parentNode)&&t.removeChild(this.P),F.prototype.o.call(this),delete this.P},Lv.prototype.capture=function(t,e,r,n){var i=this.we("scalebar"),o=t.getContext("2d"),a=t.width,s=t.height,l=this.c.m,u=5+(l?l.K().childNodes[1].offsetHeight:0);i&&i.oc()?i.capture(e,(function(n){o.drawImage(n,a-n.width-5*e,s-n.height-u*e),r(t)}),n):r(t)},Lv.prototype.capture=Lv.prototype.capture,Lv.createDefault=function(t,e,r){var n=t.f.type;if(r=new Lv(t,{unitSystem:Pu.METRIC,zoom:{alignment:"right-bottom"},mapsettings:Ov(n,e,t.g),scalebar:{alignment:"bottom-right"},locale:r||"en-US"}),n===ik.P2D){var i=r.we("mapsettings"),o=function(){if(i.Tb()){var r=Ov(n,e,t.g);pv(i,r.baseLayers,r.layers)}};t.addEventListener(t.A.bf,o),r.mb((function(){t.removeEventListener(t.A.bf,o)})),i.mb((function(){t.removeEventListener(t.A.bf,o)}))}return r},u(Qv,Bu),t("H.ui.Overview",Qv),Qv.prototype.qd=function(t){return this.b.qd(t),this},Qv.prototype.setBaseLayer=Qv.prototype.qd,Qv.prototype.g=function(t){t.target.getState()===pu.DOWN?(Sv(t=this.b,!0),t.pi(),t.Ga("H_overview_active"),t.b.addEventListener("mapviewchange",t.pi,!1,t)):Tv(this.b)},Qv.prototype.V=function(t,e){Bu.prototype.renderInternal.call(this,t,e),this.f.K().style.float=this.Fc.match("right")?"right":"left",this.b.Ea(this.map),this.f.cc(this.ua().translate("minimap"))},Qv.prototype.renderInternal=Qv.prototype.V,Qv.prototype.o=function(){this.b.C(),W.prototype.o.call(this)},u(Rv,Bu),Rv.prototype.qd=function(t){this.f.qd(t)},Rv.prototype.V=function(t,e){ju(t,e=iu(e,"div","H_overview_map")),this.g=e},Rv.prototype.renderInternal=Rv.prototype.V,Rv.prototype.renderInternal=Rv.prototype.V,p=Rv.prototype,p.cl=3,p.nk=5,p.pk=5,p.Ea=function(t){this.b=t,this.f=new T(this.g,this.j,{pixelRatio:this.b.Ta(),engineType:this.b.f.type}),this.f.m.K().style.display="none",this.m=this.f.c,this.i=this.b.c},p.pi=function(t){t&&t.modifiers&t.SIZE&&Sv(this,!0),(t=this.i.fb()).zoom-=this.cl,this.m.Nb(t)},p.o=function(){Rv.l.o.call(this),Tv(this),this.f.C(),this.f=this.m=this.i=this.b=this.j=this.g=null},t("H.ui.buildInfo",(function(){return Hf("H-ui","1.30.15","f5837cb5d",{region:"row"})})),u(Uv,wm);var Vv=0;function Wv(t,e){e=e||{},C(t,rl,Wv,0),Wv.l.constructor.call(this,t),this.ic=!!e.ic,this.c=e.cb||0,this.a=[],this.b={}}Uv.prototype.U=function(t,e,r,n,i,o){var a=yd(n),s=this.bb,l=a+(r.exp-s.pixelProjection.exp),u=s.min,c=s.max;n=s.tileSize;var h=s.da().f,f=this.kb,p=f.Nc(),A=f.qb().w,d=r.w,g=r.x,y=r.y,v={};if(a<u||a>c)return uk.DONE;for(t=(i=s.requestTiles(t,l,i,o,this.f)).total,o=(i=i.tiles).length,this.g=r,this.j=e,this.a=l,p!==h&&f.ac(h),r=n=n*d/(Ed(2,l)*n),this.c||(n%1&&(g/=d=r/(n=zd(n)),y/=d,d=Ed(2,l)*n),g=zd(g),y=zd(y)),this.i=r,l=-n,a=A+n,s=0;s<o;s++){if((u=(A=i[s]).data)&&u.tagName){for(r=e.x-(g-A.x*n),h=e.y-(y-A.y*n),f.Hc(u,r,h,n,n),p=r;(p-=d)>l;)f.Hc(u,p,h,n,n);for(p=r;(p+=d)<a;)f.Hc(u,p,h,n,n)}v[this.a+"_"+A.x+"_"+A.y]=A}return this.b=v,o===t?uk.DONE:uk.PENDING},Uv.prototype.Ba=function(t,e,r){var n,i=this.i,o=i/this.bb.tileSize,a=this.g,s=this.j;if(uc(this.a)&&a){t=a.x+(t-s.x),e=a.y+(e-s.y);var l=zd(a.w/i),u=a=zd(t/i);s=zd(e/i),Bd(u)>=l&&(u%=l),0>u&&(u=l+u),(l=this.b[this.a+"_"+u+"_"+s])&&l.Ba&&(n=l.Ba((t-i*a)/o,(e-i*s)/o,r))}return n||hf},Uv.prototype.Nd=function(){return"2d"},u(Wv,wm),Wv.prototype.U=function(t,e,r,n,i,o){var a,s,l=this.bb;n-=this.c,this.a.length=0;var u=this.b;if(this.b=a={},n>=l.min&&n<=l.max){var c=l.od(t,n,i,o),h=c.overlays;if(t=h.length)for(h.sort(ph),n=this.kb,i=this.ic,o=0;o<t;o++){var f=(l=h[o]).G(),p=r.eb(f.Fb()),A=r.eb(f.Bb());f=r.w,p.x>=A.x&&(p.x-=f),f=-((p.x+A.x)/f>>1)*f,p.x+=f,p.add(e),A.x+=f,A.add(e),i||(p.round(),A.round()),(f=u[s=l.$a()])?delete u[s]:f={Kn:l},a[s]=f;var d=p.x;p=p.y;var g=A.x,y=g-d,v=(A=A.y)-p;n.ac(l.Nc()),n.Hc(l.Jc(),d,p,y,v),f.Hg?f.Hg.set(d,p,g,A):f.Hg=new wk(d,p,g,A),this.a.push(f)}}return!c||c.requested&&c.requested===c.total||!c.requested&&h.length===c.total?uk.DONE:uk.PENDING},Wv.prototype.Ba=function(t,e,r){for(var n,i,o=this.a,a=o.length;a--;)if((n=o[a]).Hg.kf(t,e))if(n=n.Kn,i)i.push(n);else if(i=[n],r)break;return i||hf},Wv.prototype.Nd=function(){return"2d"},Wv.prototype.o=function(){delete this.a,Wv.l.o.call(this)},Wv.prototype.disposeInternal=Wv.prototype.o;var Xv={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:0},incline:{min:0,max:0},heading:{min:180,max:180}},interaction:{ZOOM:Hl.ZOOM,COORD:Hl.COORD},capture:!0};function Yv(t,e){this.a=[],Yv.l.constructor.apply(this,arguments)}function Y(t,e,r,n){Y.l.constructor.call(this,t,e,r,n),this.L=new G(0,0),(r=n.renderBaseBackground)&&(this.Dn=r.lower,this.Cn=r.higher),this.pn=!!n.enableSubpixelRendering,this.Yc=Zv,this.pf=0,this.Ad=this.se=!1,this.g=new im,this.a=n=new qm,this.$c=A(this.$c,this),n.addEventListener(n.A.ng,this.$c),this.Aa=A(this.Aa,this),n=t.element,this.Y=t=n.ownerDocument.createElement("div"),t.style.position="absolute",t.style.width=t.style.height="100%",t.style.zIndex=0,n.insertBefore(t,n.firstChild),this.Ej=new Nm(this.Y,this.ma),this.s=[],$v(this),this.uh=A(Y.prototype.uh,this),this.$=aw,this.Yf(),this.zoom=bw(this,this.v.ib()+this.cb),this.wb(),cw(this,e.fb().position,this.zoom),this.Va(),this.R()}t("H.map.render.p2d.capabilities",Xv),u(Yv,Am),p=Yv.prototype,p.cj=function(){return this.bb.wc.apply(this.bb,arguments)},p.U=function(t,e,r,n,i,o,a){return this.a=[],Yv.l.U.apply(this,arguments)},p.Vj=1,p.Ak=function(t,e,r,n,i,o){var a=this.Vj=n.Ta();i*=a,o*=a;var s=r.qb();e=s.w*a,s=s.h*a;var l=r.ed();this.ic?(i-=l.x*a,o-=l.y*a):(i=yd(i-l.x*a),o=yd(o-l.y*a)),n.Hc(r.Jc(),i,o,e,s),t.detail?t.detail.set(i,o,i+e,o+s):t.detail=new wk(i,o,i+e,o+s),this.a.push(t)},p.Ba=function(t,e,r){for(var n,i,o,a=this.a,s=a.length,l=hf,u=this.Vj;s--&&!((i=(n=a[s]).detail).kf(t,e)&&(n=n.dk,(!(o=n.pb().c)||o.Cf((t-i.left)/u,(e-i.top)/u,0))&&0>l.indexOf(n)&&(l===hf&&(l=[]),l.push(n),r))););return l},p.Nd=function(){return"2d"},p.o=function(){this.a=[],Yv.l.o.call(this)},Yv.prototype.disposeInternal=Yv.prototype.o,u(Y,Dl),t("H.map.render.p2d.RenderEngine",Y),Y.prototype.type=Nl.P2D;var aw=2;function dw(t,e,r){return Bd(e=r-e)<t.b.w/2?e:e-t.b.w*r/Bd(r)}function $v(t){var e=t.c.Ha(),r=0,n=e.length;for([t.N={},t.u={},t.ra={},t.na={}].forEach((function(t){t.Gc=[],t.ga=[]})),t.Pb=t.c.Ha();r<n;r++)t.Ge(r,e[r]);t.wb()}function mw(t){var e=[];return(e=(e=(e=(e=e.concat(t.u.ga)).concat(t.N.ga)).concat(t.ra.ga)).concat(t.na.ga)).filter(uc)}function gw(t,e){var r=Jl(t,Jl(t,e.zoom)+t.cb);return(t=Kl(t,e)).zoom=r,t}function cw(t,e,r){var n=t.b;n.Ja(r),t.m=n.projection.Ic(e),n.x=n.w*t.m.x,n.y=n.h*t.m.y}function lw(t){return{w:(t=t.xa[2]).right-t.left,h:t.bottom-t.top}}function nw(t){t.i&&t.i.qa()||Jk()-t.Rj<t.Yc&&!t.wd?t.Ln=Hk(t.uh):(t.wd&&(t.Yd(),ow(t)),t.$=aw)}function ow(t,e){t.dispatchEvent({type:t.A.Gi,target:e||t})}function sw(t,e,r){iw(t,e*t.ma,r*t.ma),t.L.set(0,0),t.Va(),t.ea()}function iw(t,e,r){var n=t.b;t=t.m,n.x=Xd(n.x+e,n.w),n.y=xd(0,wd(n.w,n.y+r)),t.x=n.x/n.w,t.y=n.y/n.h}function jw(t,e,r,n){var i=t.ma,o=t.f.center;r===+r&&n===+n?(r=(r-o.x)*i,n=(n-o.y)*i,t.L.set(r,n),iw(t,r,n),t.b.Ja(e),iw(t,-r,-n)):(t.L.set(0,0),t.b.Ja(e)),t.zoom=e,t.Va(),t.ea()}function ew(t,e,r,n){var i=t.getCapabilities().lookAt.zoom.max,o=e.Za(),a=n||o;if(e.Ef()||r&&n)r=r===B?i:r;else{var s=new lj(t.b.projection);s.Ja(i);var l=s.eb(e.Fb()).round(),u=s.eb(e.Bb()).round();i=s.w,e.tb()&&(l.x-=i),n?(o=s.eb(a),e=2*xd(o.x-l.x,u.x-o.x),l=2*xd(o.y-l.y,u.y-o.y)):(e=u.x-l.x,l=u.y-l.y,a=o),r===B&&(r=(o=t.xa[4]).right-o.left,o=o.bottom-o.top,r=Jl(t,r=-8+wd(Cd(r/e*i)/Md,Cd(o/l*i)/Md)-t.cb))}return{zoom:zd(r),position:a}}function fw(t){kw(t,!0),t.a.qa()&&t.nb(!0),t.g.qa()&&t.ob(!0),kw(t,!0)}function tw(t,e){if(e){var r={};r.Ke=e.power,r.pe=e.ease,r.duration=e.duration,t.j=r}}function bw(t,e){return Jl(t,Jl(t,e-t.cb)+t.cb)}function vw(t,e){var r=t.m,n=t.b.projection.Ic(e.position),i=t.b.Vd(n),o=i.y;i=i.x;var a=e.zoom;e=(r=t.b.Vd(r)).y;var s=r.x;r=t.zoom;var l=t.a.rb(),u=t.a.a,c=t.a.b,h=0;if(i=dw(t,s,i),e=Dd((i-=s)*i+(o-=e)*o+(r=a-r)*r),0!==l&&0!==e){var f=i/e,p=o/e,A=r/e,d=l*l/(2*e);hw(t,(function(e,r){var i;1!==e?((i=A*(r=(e=l*r-d*r*r/2)-h))&&(i=bw(t,t.zoom+i),jw(t,bw(t,i),u,c)),sw(t,yd(f*r),yd(p*r)),h=e):(t.m=n,jw(t,bw(t,a),u,c),t.Va(),t.ea())}),2*e/l)}}function uw(t,e,r){r=r||0,e.c&&jw(t,bw(t,t.zoom+e.c*r),t.a.atX,t.a.atY),sw(t,e.a*r,e.b*r)}function hw(t,e,r,n,i){t.i&&t.i.qa()&&t.i.stop(!0),t.i=new zm(t,e,r,n,i),t.i.start()}function kw(t,e){t.i&&t.i.qa()&&t.i.stop(e)}Y.prototype.getState=function(){return this.$},Y.prototype.getState=Y.prototype.getState,Y.prototype.yg=function(t){var e=this,r=t.b,n=t.newValue,i=t.modifiers;t=n.position;var o,a=n.bounds,s=this.zoom,l=this.m,u=0;if(i&cj.POSITION&&(o=e.b.eb(t)),i&cj.BOUNDS)n=ew(this,a.G(),i&cj.ZOOM?n.zoom:B,i&cj.POSITION?t:B),this.v.Nb(n,r);else{i&cj.POSITION||(o=e.b.eb(n.position));var c=o.x,h=o.y;fw(this),this.L.set(0,0);var f=(n=gw(this,n)).zoom,p=n.position;if(r){var A=f-s,d={x:l.x,y:l.y};r=this.b.Vd(d).x;var g=this.b.projection.Ic(t);g.x===this.m.x&&g.y===this.m.y&&f===this.zoom||(c=dw(this,r,c),hw(this,(function(t){var r=t-u;if(f!==s){o=e.b.Vd(g);var n=e.b.Vd(d);c=dw(e,n.x,o.x),h=o.y-n.y}u=t,iw(e,c*r,h*r),jw(e,s+=A*r),e.Va(),e.ea()}),this.ya,(function(){cw(e,p,f),jw(e,f),e.Va(p),e.ea()}),this.Xa))}else kw(this),cw(this,p,f),jw(this,f),this.Va(p);this.ea()}},Y.prototype.ya=300,Y.prototype.ag=function(t){var e=Dc(t);if(!e||e&&0>t)throw new D(this.ag,1,"positive number required");this.ya=t},Y.prototype.setAnimationDuration=Y.prototype.ag,Y.prototype.Mg=function(){return this.ya},Y.prototype.getAnimationDuration=Y.prototype.Mg,Y.prototype.Xa=Zl,Y.prototype.bg=function(t){if(!Da(t))throw new D(this.bg,1,"function required");this.Xa=t},Y.prototype.setAnimationEase=Y.prototype.bg,Y.prototype.Ng=function(){return this.Xa},Y.prototype.getAnimationEase=Y.prototype.Ng,Y.prototype.Yf=function(){this.Xa=Zl,this.ya=300},Y.prototype.resetAnimationDefaults=Y.prototype.Yf,Y.prototype.Ih=function(t,e,r){var n;this.Rj=Jk(),(n=this.N.ga.splice(t,1)[0])&&n.C&&n.C(),(n=this.u.ga.splice(t,1)[0])&&n.C&&n.C(),(n=this.ra.ga.splice(t,1)[0])&&n.C&&n.C(),(n=this.na.ga.splice(t,1)[0])&&n.C&&n.C(),this.Pb=this.c.Ha(),0===t&&(Il(this,e,!1),this.wb()),this.s=Om(this.Ej,lw(this),mw(this)),this.Yd(),r||this.ea()},Y.prototype.Jh=function(){this.wb(),this.ea()},Y.prototype.eh=function(t,e,r){var n,i,o,a;if(e){var s={ic:this.pn,cb:this.cb};e.U?C(e,ym)?i=new xm(e):C(e,Km)&&(a=new xm(e)):(e.requestOverlays&&(n=new Wv(e,s)),e.requestTiles&&(i=new Uv(e,s)),e.requestMarkers&&(o=new Yv(e,s)),e.requestDomMarkers&&(a=new Dm(e,s)))}r=r||0,this.N.ga.splice(t,r,n),this.u.ga.splice(t,r,i),this.ra.ga.splice(t,r,o),this.na.ga.splice(t,r,a),this.Pb=this.c.Ha(),this.s=Om(this.Ej,lw(this),mw(this))},Y.prototype.Pa=function(t,e){var r=this.f.center,n=this.ma;return this.b.Ka((t-r.x)*n,(e-r.y)*n)},Y.prototype.screenToGeo=Y.prototype.Pa,Y.prototype.$f=function(t,e){return t=this.Pa(t,e),(e=this.v.fb()).position=t,e},Y.prototype.Aa=function(t){var e=this.ma,r=this.f.center,n=r.x*e;r=r.y*e,t=this.b.eb(t);var i=this.b.w;return new G(yd((t.x-yd(t.x/i)*i+n)/e),yd((t.y+r)/e))},Y.prototype.geoToScreen=Y.prototype.Aa,Y.prototype.G=function(t,e){var r=this.xa[t||4];t=this.b;var n=r.left-e,i=t.Ka(n,r.top-e),o=r.right+e;return e=t.Ka(o,r.bottom+e),o-n>=t.w&&(i.lng=-(e.lng=180)),sg(i,e)},Y.prototype.Ba=function(t,e,r,n){var i,o=[],a=this.ma;for(t*=a,e*=a,i=(a=[this.N,this.u,this.ra,this.na]).length;i--&&(!r||!o.length);){for(var s=o,l=a[i].ga,u=t,c=e,h=r,f=l.length;f--&&!((o=l[f])&&o.Ba&&(s=s.concat(o.Ba(u,c,h)),s.length&&h)););o=s}n(o)},Y.prototype.getObjectsAt=Y.prototype.Ba,Y.prototype.Ec=y,Y.prototype.R=function(){var t,e=this.s.length;Y.l.R.call(this);var r=lw(this);this.L.set(0,0);var n=r.w;for(t=r.h;e--;){var i=(r=this.s[e]).qb();i.w===n&&i.h===t||r.Ue(n,t)}this.Ec=new Ui(n,t),this.ea()},Y.prototype.getCapabilities=function(){return Xv},Y.prototype.getCapabilities=Y.prototype.getCapabilities,p=Y.prototype,p.Yd=function(){this.N.Gc.length=0,this.u.Gc.length=0,this.ra.Gc.length=0,this.na.Gc.length=0},p.uh=function(){var t;this.B&&this.B.before();var e=this.u.ga,r=this.f.center.clone().scale(this.ma).round(),n=this.G(1,0),i=this.G(1,pw),o=this.zoom,a=o-this.cb,s=this.b,l=this.Dn,u=this.Cn,c=e[0];e=this.L;var h=this.s.length,f=this.Pb;for(t=f.length;h--;){var p=this.s[h];C(p,vm)&&p.clear()}if(c){if(l)for(;l;)h=o-l,c.U(n,r,s,h,!0,e),--l;if(u&&this.Ad)for(p=1;p<=u&&(h=o+p,s.Ja(h),l=this.G(2,0),s.Ja(o),!c.U(l,r,s,h,!0,e));p++);}for(this.Yc=Zv;t--;)C(s=f[t],oj)&&s.da()&&s.da().Le(i,a);n=this.Uj(n,r,o,!1,e,qw,this.u,this.N),r=this.Uj(i,r,a,!1,e,rw,this.ra,this.na),this.wd=n&&r,this.i&&this.i.qa()&&this.og(),this.T||(this.T=this.v.fb()),this.T.bounds=this.G(4,0),this.v.Va(this.T),this.T=null,this.Ec&&(this.f.Va(this.Ec),this.Ec=y),o<this.pf?this.Ad=!0:this.se&&(this.Ad=!1),this.pf=o,this.se=n,this.B&&this.B.after(),nw(this)},p.Uj=function(t,e,r,n,i,o,a){var s,l=Array.prototype.slice.call(arguments,6),u=l.length,c=l[0].ga.length,h=u*c,f=!!h;for(s=0;s<h;s++){if(o===qw)var p=s%u,A=Math.floor(s/u);else p=Math.floor(s/c),A=s%c;var d=l[p].ga[A];p=l[p].Gc,d&&((d=d.U(t,e,this.b,r,n,i,this.Aa))===uk.ACTIVE&&(this.Yc=1/0),d!==uk.DONE||p[A]||(ow(this,this.Pb[A]),p[A]=!0),p[A]||(f=!1))}return f},p.o=function(){var t=this.c.Ha()[0],e=this.f;Ik(this.Ln),kw(this,!0),t&&Il(this,t,!1),mw(this).forEach((function(t){t.C()})),e.element&&e.element.removeChild(this.Y),this.Y=null,this.$=3,Y.l.o.call(this)},p.ea=function(){this.Rj=Jk(),this.$===aw&&(this.wd=!1,this.$=1,nw(this))},p.td=function(t,e,r){jw(this,t=Jl(this,Jl(this,t)+this.cb),e,r)},Y.prototype.zoomAt=Y.prototype.td,Y.prototype.ec=function(t,e){fw(this),tw(this,e),this.g.start(t,!!e)},Y.prototype.startInteraction=Y.prototype.ec,Y.prototype.Vb=function(t,e,r,n,i){var o=!1;this.g.qa()&&(e=this.g.store(t,e,r,n,i),this.g.sc(Hl.COORD)&&(0<hm(t=this.g.Jd())&&(sw(this,-t.x,-t.y),o=!0)),e&&this.g.sc(Hl.ZOOM)&&(t=this.g.qf(),e=this.g.rf(),(e=Cd(Ed(2,this.zoom)*e)/Md)!==this.zoom&&(jw(this,e=bw(this,e),t.x,t.y),o=!0)),o&&this.ea())},Y.prototype.interaction=Y.prototype.Vb,Y.prototype.ob=function(t){var e=this;if(this.g.qa()&&!t){if(this.j){t=this.g.rb();var r=this.g.kc(),n=this.j.duration,i=(this.j.Ke||1)*t,o=new Lm(-i/(0<n?n:1),i);!E(r.x)&&!E(r.y)&&0<i&&e.g.sc(Hl.COORD)&&hw(this,(function(t){i=o.xe(t*n),E(i)||sw(e,yd(-r.x*i),yd(-r.y*i))}),n,void 0,this.j.pe)}this.j=null,this.g.clear()}},Y.prototype.endInteraction=Y.prototype.ob,Y.prototype.dc=function(t,e,r){fw(this),this.a.start(e,r),tw(this,t)},Y.prototype.startControl=Y.prototype.dc,Y.prototype.control=function(t,e,r){if(E(+r))throw new D(this.control,2,r);if(E(t))throw new D(this.control,0,t);if(E(e))throw new D(this.control,1,e);this.a.qa()&&this.a.set(t,e,r,0,0,0)},Y.prototype.control=Y.prototype.control,Y.prototype.nb=function(t,e){var r,n=this;if(this.a.qa()){kw(this,!0);var i=Jk(),o=i-this.Gj;if(1<=o)uw(this,tm(this.a),o);if(!this.j||t||e)"function"===typeof e&&((t=this.fb()).zoom=this.zoom-this.cb,e(t),t.zoom+=this.cb,vw(this,t));else{e=this.a.rb();var a=this.a.kc(),s=this.j.duration,l=(this.j.Ke||1)*e,u=new Lm(-l/(0<s?s:1),l);!E(a.a)&&!E(a.b)&&0<l&&hw(this,(function(t,e,o,c){i&&(o=c-i,i=0),l=u.xe(t*s)*o,E(l)||((r=a.c*l)&&jw(n,bw(n,n.zoom+r),n.a.a,n.a.b),sw(n,yd(a.a*l),yd(a.b*l)))}),s,void 0,this.j.pe)}this.a.reset()}},Y.prototype.endControl=Y.prototype.nb,Y.prototype.$c=function(t){var e=this,r=t.b;this.L.set(0,0),r.a||r.b||r.c?(this.Gj=Jk(),hw(this,(function(t,n,i,o){e.Gj=o,uw(e,r,i)}),Number.POSITIVE_INFINITY),this.ea()):kw(this,!0)},Y.prototype.Ig=function(){},Y.prototype.enter=Y.prototype.Ig,Y.prototype.Jg=function(t){Gl(this.Y,t)},Y.prototype.exit=Y.prototype.Jg,Y.prototype.capture=function(t,e,r,n){var i=this.Y.ownerDocument.createElement("canvas"),o=i.getContext("2d"),a=this.ma;for(i.width=(r-t)*a,i.height=(n-e)*a,r=0;r<this.s.length;r++)C(n=this.s[r],vm)&&o.drawImage(n.K(),-t*a,-e*a);return Yb(i)};var rw=0,qw=1,Zv=1e3,pw=256;function ww(t){var e;if(t)for(xw={},e=t.length;e--;)xw[t[e]]=!0;this.Tk={}}var yw,xw={};ww.prototype.parse=function(t,e,r){var n,i,o,a,s;yw=!1;try{r=JSON.parse(r)}catch(c){yw=!0}if(r&&(n=r.metadata)){var l={spatials:[]};for(i in n)if((r=!xw[i]&&(o=zw[i]))&&((a=n[i])||(yw=!0,a=void 0),r=a),r)for(r=a.length;r--;){var u;(u=a[r])||(yw=!0,u=void 0),(s=u)&&o(e,t,this,i,s,l)}}else yw=!0;return yw?void 0:l},ww.prototype.parse=ww.prototype.parse;var zw={"street labels":function(t,e,r,n,i,o){var a;if((a=i.vertices)||(yw=!0,a=void 0),a){var s,l,u=a.length;if((l=0<u)||(yw=!0,l=void 0),l)for(s=Array(u/2);u;){var c=a[--u];l=a[--u],s[u/2]=new G(l,c)}s=s?{a:[s]}:B,u=+i["font size"]/t.Ta(),(a=r.Tk[u])||(Aw.lineWidth=u,a=r.Tk[u]=r.zd.fj(Aw)),Bw(t,e,s,!1,a,i,n,o)}delete i.vertices},"city center labels":function(t,e,r,n,i,o){Bw(t,e,Cw(i,new Mh([])),!0,r.zd,i,n,o)},labels:function(t,e,r,n,i,o){var a;if((a=i["bounding boxes"])||(yw=!0,a=void 0),a){for(var s,l=a.length,u=new Mh([]);l--;){var c;(c=a[l])||(yw=!0,c=void 0),(s=c)&&Cw(s,u)}Bw(t,e,u,!0,r.zd,i,n,o)}delete i["bounding boxes"]},buildings:function(t,e,r,n,i,o){var a,s,l,u,c=i.id,h=e.Uf[c],f=[],p=[];((a=i)||(yw=!0,a=void 0),a&&((s=a.vertices)||(yw=!0,s=void 0),s))&&((u=a.polygons)||(yw=!0,u=void 0),(l=u)&&f.push.apply(f,Dw(s,l)),(a=a.outlines)||(yw=!0,a=void 0),(l=a)&&p.push.apply(p,Dw(s,l)));l=f.length,f.push.apply(f,p),p=new Mh(f,Ud,l),(f=f.length)||(yw=!0,f=void 0),f&&(h?(Pq(h,t,[p]),o.spatials.push(h)):(h=Bw(t,e,p,!0,r.zd,i,n,o,c),e.ba(h)))}};zw["transit stops"]=zw.POIs=zw.labels;var Ew=["box 2","box 1","annotation box","icon box"];function Cw(t,e){for(var r,n,i=Ew.length;i--;)if(n=t[r=Ew[i]]){var o=n[0],a=n[1],s=n[2];n=n[3],e.a.push([new G(o,a),new G(o+s,a),new G(o+s,a+n),new G(o,a+n)]),delete t[r]}return e}function Dw(t,e){var r,n,i,o=e.length;if(0<o)for(n=Array(o);o--;)if((r=e[o])||(yw=!0,r=void 0),r){var a=r.length;if(0<a)for(n[o]=i=Array(a);a--;){var s=2*r[a];i[a]=new G(t[s],t[s+1])}}return n||[]}var Fw={};function Bw(t,e,r,n,i,o,a,s,l){return Fw.style=i,n=new Lq(e,n,l,Fw),r&&Pq(n,t,[r]),Gw(o),o.category=a,n.setData(o),s.spatials.push(n),n.ha(e),n}ww.prototype.zd=new wh({strokeColor:"transparent",fillColor:"transparent",lineWidth:0});var Aw={};function Gw(t){var e,r=!1;switch(typeof t){case"object":if(t instanceof Array)for(e=t.length;e--;)Gw(t[e])?r=!0:delete t[e];else if(t)for(e in t)Gw(t[e])?r=!0:delete t[e];break;case"number":r=!0;break;default:r=!!t}return r}function Hw(t,e,r){e=e||{};var n=(r=r||{}).tileType||"maptile",i=r.scheme||"normal.day";if(R.call(this,{min:0,max:20}),!0===e.pois&&(e.pois="!F"),this.R=e,!(t&&t instanceof Iw))throw Error("InvalidArgument: service required");this.u=t,this.i=A(this.i,this),this.u.addEventListener("versionupdate",this.i),this.B=t.D().clone().F(n+"/"+t.nc()+"/"+i).I(Jw).I(e),this.Y=t.g||null,this.N=r.pixelRatio||r.pixelratio||Te(),this.tileSize=r.tileSize||256,this.tileType=n,this.scheme=i,this.b=new Vq(new ww(r.categoryFilter)),this.b.ha(this),this.v=A(this.v,this),this.b.addEventListener("update",this.v),R.call(this,{min:0,max:20}),this.m(new Pk(r.tileCacheSize||256,A(this.$,this)))}u(Hw,R),t("H.service.metaInfo.TileProvider",Hw),Hw.prototype.$=function(t,e){for(var r,n=(t=e.Na()).length;n--;)delete(r=t[n]).a[e.key],r.release();e.data&&(yp.push(e.Sf(),this.tileSize),e.Tf())},Hw.prototype.v=function(){this.dispatchEvent("update")},Hw.prototype.J=function(t,e,r,n,i){var o,a=this.B.clone(),s=this.Y,l=this.tileSize,u=this.getTileKey(t,e,r);if((u=this.Cb().get(u))&&!u.Qd()){n(yp.pop(this.tileSize),null);var c={cancel:function(){}}}else{s&&a.za(s[(r+e+t)%s.length]),a.F(r+"/"+t+"/"+e+"/"+l+"/png8");var h=wp.setTimeout((function(){(o=new tf("text/plain",a.toString())).then((function(t){n(null,t)}),i)}),500)}return c||{cancel:function(){o?o.cancel():wp.clearTimeout(h)}}},Hw.prototype.requestInternal=Hw.prototype.J,Hw.prototype.Sb=function(t,e,r,n,i){var o=this.b,a=n||yp.pop(this.tileSize);if(n)(t=this.Cb().get(this.getTileKey(t,e,r))).U(n);else if(delete(n=t=new Zk(this.gd(t,e,r),t,e,r,this.tileSize,this.N,r,o)).j,n.m=i,t.U(a))for(a=(i=t.Na()).length;a--;)i[a].Zf();else yp.push(a,this.tileSize);return t},Hw.prototype.createTileInternal=Hw.prototype.Sb,Hw.prototype.C=function(){this.b.C(),this.u.removeEventListener("versionupdate",this.i),R.prototype.C.call(this)},Hw.prototype.dispose=Hw.prototype.C,Hw.prototype.i=function(){var t=this.u;this.B=t.D().clone().F(this.tileType+"/"+t.nc()+"/"+this.scheme).I(Jw).I(this.R),this.reload(!1)};var Jw={metadata:"metaonly",mgen:"2"};function Iw(t){Iw.l.constructor.call(this,Iw,t),t=Wp(this,t),this.g=t.shards,(this.c=t.ignoreTypes?null:t.type)&&this.D().za(this.c),this.f=t.version,this.m=new dq,"newest"===this.f&&Kw(this)}function Lw(t,e){for(var r={},n=t[e+"s"][e],i=n.length;i--;)r[n[i].id]=n[i];t[e+"s"]=r}function Kw(t){var e=t.D().clone().F("info").I({output:"json"});t.g&&e.za(t.g[0]),t.J(e,(function(e){var r;if(Lw(e=e.response,"map"),Lw(e,"scheme"),Lw(e,"tiletype"),Lw(e,"format"),Lw(e,"resolution"),Lw(e,"language"),"newest"===t.f&&"traffic"!==t.c)for(r in e.maps)e.maps[r].hash&&e.maps[r].newest&&(t.f=e.maps[r].hash,t.dispatchEvent("versionupdate"));t.s=e,t.dispatchEvent("infoupdate")}),(function(t){throw t}))}u(Iw,Vp),t("H.service.metaInfo.Service",Iw),Iw.prototype.a=function(){return{type:"base",version:"newest",subDomain:"maps.ls",path:"maptile/2.1",shards:["1","2","3","4"]}},Iw.CONFIG_KEY="metaInfo",Iw.prototype.zj=function(){return this.c},Iw.prototype.nc=function(){return this.f},Iw.prototype.getVersion=Iw.prototype.nc,Iw.prototype.la=function(){return this.m},Iw.prototype.getCopyrights=Iw.prototype.la,Iw.prototype.Rg=function(){return this.s},Iw.prototype.getInfo=Iw.prototype.Rg,Iw.prototype.oe=function(t,e,r,n,i,o){return new Hw(this,n,{tileSize:t,pixelRatio:e,categoryFilter:r,tileType:i,scheme:o})},Iw.prototype.createTileProvider=Iw.prototype.oe,Iw.prototype.hc=function(t,e,r,n,i,o){return new ql(this.oe(t,e,r,n,i,o))},Iw.prototype.createTileLayer=Iw.prototype.hc,V.prototype.oj=function(t){return this.Qa(Iw,t)},V.prototype.getMetaInfoService=V.prototype.oj,function(){var t=V.prototype.createDefaultLayers;V.prototype.createDefaultLayers=function(e,r,n,i,o,a){var s=t.call(this,e,r,n,i,o,a),l={},u=this.oj();"object"===typeof e&&(e=(a=e).tileSize,r=a.ppi,n=a.lg,i=a.lg2,o=a.style,a=a.pois),e=e||256;var c=320===r?2:1;if(0>[72,250,320,500].indexOf(+r)){if(r!==B)throw new D(this.lf,1,r)}else l.ppi=+r;return n&&(l.lg=n),i&&(l.lg2=i),o&&(l.style=o),a&&(l.pois=a),s.raster.normal.metaInfo=u.hc(e,c,["buildings"],l),s}}(),H.__bootstrap__='var l,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ca(a,b){if(b){var c=ba;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}var ea;\nif("function"==typeof Object.setPrototypeOf)ea=Object.setPrototypeOf;else{var fa;a:{var ha={kb:!0},ja={};try{ja.__proto__=ha;fa=ja.kb;break a}catch(a){}fa=!1}ea=fa?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ka=ea;ca("Object.setPrototypeOf",function(a){return a||ka});var p=this||self;\nfunction la(a,b,c){a=a.split(".");c=c||p;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b}function ma(){}\nfunction na(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";\nelse if("function"==b&&"undefined"==typeof a.call)return"object";return b}function r(a){return"function"==na(a)}function oa(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var pa="closure_uid_"+(1E9*Math.random()>>>0),ra=0;function sa(a,b,c){return a.call.apply(a.bind,arguments)}\nfunction ta(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function ua(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ua=sa:ua=ta;return ua.apply(null,arguments)}\nfunction va(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}}function t(a,b){la(a,b,void 0)}function wa(a,b){function c(){}c.prototype=b.prototype;a.T=b.prototype;a.prototype=new c;a.prototype.constructor=a};function v(){}t("H.util.ICache",v);v.prototype.add=function(){};v.prototype.add=v.prototype.add;v.prototype.get=function(){};v.prototype.get=v.prototype.get;v.prototype.qa=function(){};v.prototype.drop=v.prototype.qa;v.prototype.forEach=function(){};v.prototype.forEach=v.prototype.forEach;v.prototype.R=function(){};v.prototype.removeAll=v.prototype.R;v.prototype.$=function(){};v.prototype.registerOnDrop=v.prototype.$;v.prototype.oa=function(){};v.prototype.deRegisterOnDrop=v.prototype.oa;function xa(){var a=ya,b;for(b in a)return!1;return!0}function za(a){var b={},c;for(c in a)b[c]=a[c];return b}var Aa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ba(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Aa.length;f++)c=Aa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var Ca=this;function Da(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Da);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}wa(Da,Error);Da.prototype.name="CustomError";var Ea=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"===typeof a)return"string"!==typeof b||1!=b.length?-1:a.indexOf(b,0);for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};var Fa=ua,Ga=String,Ha=Ca.Object.freeze||function(a){return a},x=[].pop(),Ia=/x/.exec("");function Ja(a){return Ga(a).split(","!==x?",":" ")}var Ma="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Na(a,b,c,d){if(!(b=a instanceof b)&&c)throw new z(c,d,void 0!==x?void 0:a);return b}function Oa(a,b,c,d){var e;if(!(e="Array"===Pa(a))&&b)throw new z(b,c,d!==x?d:a);return e}\nt("H.lang.isArray",function(a,b,c,d){return Oa(a,b,c,d)});function Qa(a){return"string"===typeof a}t("H.lang.isString",Qa);var Ra=isNaN;function Sa(a){return a===+a}t("H.lang.isNumber",Sa);t("H.lang.isInteger",Number.isInteger?Number.isInteger:function(a){return"number"===typeof a&&0===a%1});function Pa(a){var b=Object[Ma[0]][Ma[6]].call(a).match(/^\\[object (\\w+)\\]$/);return b?b[1]:typeof a}var Ta=[];0>Ta.indexOf(Ta)&&Ta.push(Ta);\nfunction Ua(a,b,c,d){var e="",f=2>arguments.length,g;f&&(b={H:Ca.H},c="",d=Ta.slice());Va(b,!0,function(h,k){try{if(g=h[k],k=Wa(h,g),!(oa(g)&&g.window===g&&g.self===g||oa(g)&&0<g.nodeType&&r(g.cloneNode))&&oa(g)){if(g===a)return e=c+"."+k,!0;if(0>d.indexOf(g)&&(d.push(g),e=Ua(a,g,c+"."+k,d)))return!0}}catch(m){}});f&&(e=e?e.substr(1).replace("."+Ma[0]+".","#"):"~"+(r(a)?Xa(a)+"()":Pa(a)));return e}\nfunction Wa(a,b){var c=[];Va(a,!1,function(d,e){d[e]===b&&c.push(e)});return c.sort(Ya)[0]}function Ya(a,b){return b.length-a.length}var Za=Object[Ma[0]][Ma[2]];function Va(a,b,c){var d;if(a){for(e in a)if((!b||Za.call(a,e))&&c(a,e,!0))return;for(d=Ma.length;d--;){var e=Ma[d];if((!b||Za.call(a,e))&&c(a,e,!1))break}}}function Xa(a){return(a=/^\\s*function ([^\\( ]+)/.exec(a))?a[1]:"anonymous"}function $a(a,b,c){c[b]="#"+b};function A(a,b,c){this.g=[];b&&this.$(b);if(c&&!r(c))throw new z(A,2,c);this.b=0;this.filter=c;this.a={};this.f=this.c=null;this.Fa(a)}t("H.util.Cache",A);A.prototype.add=function(a,b,c){var d,e;c=+c;if(!Sa(c)||0>c)throw new z(this.add,2,c);a=String(a);if(e=this.filter?this.filter(a,b,c):!0)(d=this.a[a])?(d.data!==b&&ab(this,d),this.b+=c-d.size,d.size=c,d.data=b,eb(this,d)):this.a[a]=fb(this,{id:a,data:b,size:c,m:null,B:null},this.c),gb(this);return e};A.prototype.add=A.prototype.add;\nA.prototype.$=function(a){if(!r(a))throw new z(this.$,0,a);this.g.push(a)};A.prototype.registerOnDrop=A.prototype.$;A.prototype.oa=function(a){this.g=this.g.filter(function(b){return b!==a})};A.prototype.deRegisterOnDrop=A.prototype.oa;A.prototype.get=function(a,b){return(a=b?this.a[a]:eb(this,this.a[a]))&&a.data};A.prototype.get=A.prototype.get;A.prototype.qa=function(a){var b;(b=this.a[a])&&hb(this,b,!0)};A.prototype.drop=A.prototype.qa;\nA.prototype.forEach=function(a,b,c){var d;for(d in this.a){var e=this.a[d];(c?c(d,e.data,e.size):1)&&a.call(b,d,e.data,e.size)}};A.prototype.forEach=A.prototype.forEach;A.prototype.R=function(a){var b;for(b in this.a){var c=this.a[b];(a?a(b,c.data,c.size):1)&&hb(this,this.a[b],!0)}};A.prototype.removeAll=A.prototype.R;A.prototype.Fa=function(a){if(!(0<+a))throw new z(A.prototype.Fa,0,a);this.i=+a;gb(this);return this};A.prototype.setMaxSize=A.prototype.Fa;A.prototype.Ab=function(){return this.i};\nA.prototype.getMaxSize=A.prototype.Ab;A.prototype.wb=function(){return this.b};A.prototype.getCurrentSize=A.prototype.wb;function eb(a,b){b&&(a.c=fb(a,b,a.c));return b}function gb(a){for(;a.b>a.i&&a.f;)hb(a,a.f,!0)}function fb(a,b,c){if(c!==b){(b.m||b.B)&&hb(a,b,!1);if(b.m=c)b.B=c.B,c.B=b;b.B||(a.c=b);b.m||(a.f=b);a.b+=b.size}return b}function hb(a,b,c){var d=b.B,e=b.m;if(d||e||b==a.c&&b==a.f)d?d.m=e:a.c=e,e?e.B=d:a.f=d,a.b-=b.size,c&&(delete a.a[b.id],ab(a,b));b.m=b.B=null}\nfunction ab(a,b){for(var c=a.g.length;c--;)a.g[c].call(a,b.id,b.data,b.size)};function B(){}t("H.service.extension.dataView.ITable",B);B.prototype.va=function(){};B.prototype.getMeta=B.prototype.va;B.prototype.wa=function(){};B.prototype.getRowCount=B.prototype.wa;B.prototype.fa=function(){};B.prototype.getRow=B.prototype.fa;B.prototype.A=function(){};B.prototype.getColumnNames=B.prototype.A;B.prototype.ua=function(){};B.prototype.getColumn=B.prototype.ua;B.prototype.l=function(){};B.prototype.getCell=B.prototype.l;B.prototype.concat=function(){};B.prototype.concat=B.prototype.concat;function ib(){}t("H.service.extension.dataView.IRow",ib);ib.prototype.A=function(){};ib.prototype.getColumnNames=ib.prototype.A;ib.prototype.l=function(){};ib.prototype.getCell=ib.prototype.l;ib.prototype.xa=function(){};ib.prototype.getTable=ib.prototype.xa;function jb(a,b){this.a=a;this.b=b}t("H.service.extension.dataView.ObjRow",jb);jb.prototype.A=function(){return this.a.A()};jb.prototype.getColumnNames=jb.prototype.A;jb.prototype.l=function(a){return this.a.l(this.b,a)};jb.prototype.getCell=jb.prototype.l;jb.prototype.xa=function(){return this.a};jb.prototype.getTable=jb.prototype.xa;function kb(){}t("H.service.extension.dataView.IColumn",kb);kb.prototype.l=function(){};kb.prototype.getCell=kb.prototype.l;function lb(a,b){this.b=a;this.a=b}t("H.service.extension.dataView.ObjColumn",lb);lb.prototype.l=function(a){return this.b.l(a,this.a)};lb.prototype.getCell=lb.prototype.l;function z(a,b,c){var d=arguments.length;b=b!==x?+b:b;if(b!==x){var e=(e=/^.*?\\(([^\\)]+)/.exec((""+a).replace(/(\\/\\*([\\s\\S]*?)\\*\\/)|(\\/\\/(.*)$)/gm,"")))?Ja(e[1].replace(/\\s+/g,"")):[];e.forEach($a);e=e[b]||"#"+b}var f=a?Ua(a):"";d=2<d?Ga(c):"";if(e||d)f+=" (Argument "+(e||"")+(d?" "+d:"")+")";d=Error(f);Object.setPrototypeOf(d,z.prototype);return d}wa(z,Error);t("H.lang.InvalidArgumentError",z);z.prototype.name="InvalidArgumentError";function C(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):x);this.C=a;if(b)for(this.L=b,this.na=a=Object.create(Ia,void 0),d=b.length;d--;)a[b[d]]=!0;c!==x&&(this.Aa=c)}t("H.service.extension.dataView.ObjTable",C);l=C.prototype;l.Aa=x;l.C=x;l.L=x;l.na=x;l.va=function(){return this.Aa};C.prototype.getMeta=C.prototype.va;C.prototype.wa=function(){return this.C?this.C.length:0};C.prototype.getRowCount=C.prototype.wa;C.prototype.fa=function(a){var b=this.C;return b&&b[a]?new jb(this,a):x};\nC.prototype.getRow=C.prototype.fa;C.prototype.A=function(){return this.L||mb};C.prototype.getColumnNames=C.prototype.A;C.prototype.ua=function(a){return this.na[a]?new lb(this,a):x};C.prototype.getColumn=C.prototype.ua;C.prototype.l=function(a,b){var c=this.C;return(a=c&&this.na[b]&&c[a])&&a[b]};C.prototype.getCell=C.prototype.l;\nC.prototype.concat=function(){var a=arguments.length,b,c=this.L,d=""+this.L,e=(this.C||[]).slice();for(b=0;b<a;b++){var f=arguments[b];if(!(f instanceof C))throw new z(this.concat,b);if(f.C){if(c&&""+f.L!==d)throw new z(this.concat,b,"Incompatible columns!");e=e.concat(f.C)}}return new C(e,this.L,this.Aa)};C.prototype.concat=C.prototype.concat;var D=Math,nb=D.min,ob=D.max,pb=D.round,qb=D.floor,rb=D.ceil,sb=D.abs,tb=D.log,ub=D.sqrt,vb=D.pow,wb=D.exp,xb=D.sin,yb=D.asin,zb=D.cos,Ab=D.tan,Bb=D.atan,Cb=D.atan2,Db=D.LN2,E=D.PI,Eb=E/2,Fb=E/4,Gb=2*E,Ib=3*E,Jb=E/180,Kb=180/E,Lb=1/0;vb(-2,53);function Mb(a,b){var c;return 0>(c=a%b)===0>b?c:c+b}t("H.math.normalize",function(a,b,c){b-=c=c||0;a-=c;return a-qb(a/b)*b+c});function Nb(a,b,c){return a>c?c:a<b?b:a}t("H.math.clamp",Nb);function Ob(a,b,c){return b<c?a>=b&&a<=c:a>=c&&a<=b}\nfunction Pb(a,b,c,d,e,f){return ub(vb((a-e)*(d-f)-(b-f)*(c-e),2)/(vb(c-e,2)+vb(d-f,2)))}var Qb={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};t("H.math.CoverType",Qb);\nfunction Rb(a,b,c){for(var d=c.length,e=d,f,g,h,k,m=c[0],n=0,q=0,u=0;1!=n&&1<e;){g=c[--e];f=c[--e];k=c[e?e-1:(d+(e-1))%d];h=c[e?e-2:(d+(e-2))%d];if(f>=a&&f<=a&&g>=b&&g<=b||h>=a&&h<=a&&k>=b&&k<=b)n=1;else if(!n&&f===a)h===a&&(g<b&&k>b||g>b&&k<b)||(m<=a&&h>a||m>=a&&h<a)&&(g>=b?++q:++u),n=Ob(b,g,k)&&0>=Pb(a,b,f,g,h,k)?2:0;else if(!n&&Ob(a,f,h)){if(f<a&&h>a||f>a&&h<a)m=g+(a-f)/(h-f)*(k-g),q+=m>b,u+=m<b;n=Ob(b,g,k)&&0>=Pb(a,b,f,g,h,k)?2:0}m=f}!n&&0!==u&&0!==q%2&&(n=3);return n}\nfunction Sb(a,b){return Rb(a.x,a.y,b)!==Qb.NONE}t("H.math.isPointInsidePolygon",Sb);function Tb(a){for(var b=a.length,c=new Float64Array(2*b),d=b&&a[0].x!==x;b--;){var e=a[b],f=b<<1;c[f]=d?e.x:e[0];c[f+1]=d?e.y:e[1]}return c}t("H.math.flatten",Tb);function F(a,b){this.x=+a;this.y=+b}t("H.math.Point",F);F.prototype.set=F;F.prototype.set=F.prototype.set;F.prototype.clone=function(a){a?(a.x=this.x,a.y=this.y):a=new F(this.x,this.y);return a};F.prototype.clone=F.prototype.clone;F.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};F.prototype.add=F.prototype.add;F.prototype.sub=function(a){this.x-=a.x;this.y-=a.y;return this};F.prototype.sub=F.prototype.sub;F.prototype.scale=function(a,b){this.x*=a;this.y*=void 0===b?a:b;return this};\nF.prototype.scale=F.prototype.scale;F.prototype.round=function(){this.x=pb(this.x);this.y=pb(this.y);return this};F.prototype.round=F.prototype.round;F.prototype.floor=function(){this.x=qb(this.x);this.y=qb(this.y);return this};F.prototype.floor=F.prototype.floor;F.prototype.ceil=function(){this.x=rb(this.x);this.y=rb(this.y);return this};F.prototype.ceil=F.prototype.ceil;F.prototype.D=function(a){return!(!a||this.x!==a.x||this.y!==a.y)};F.prototype.equals=F.prototype.D;\nF.prototype.Bb=function(a,b){var c=b.x-a.x,d=b.y-a.y,e=a;if(c||d){var f=((this.x-a.x)*c+(this.y-a.y)*d)/(c*c+d*d);0>=f?e=a:1<=f?e=b:e=new F(a.x+f*c,a.y+f*d)}return e};F.prototype.getNearest=F.prototype.Bb;F.prototype.pa=function(a){return ub(vb(this.x-a.x,2)+vb(this.y-a.y,2))};F.prototype.distance=F.prototype.pa;F.fromIPoint=function(a){if(!a)throw Error("invalid argument");return a instanceof F?a:new F(a.x,a.y)};function Ub(a,b,c,d,e,f){var g,h,k=a.length,m,n;if(k)for(g=[];k--;){var q=a[k];var u=q.length;var I=0;for(m=1;m<u;m++)if(n=Vb(q[m-1],q[m],c,b,d,e)){var L=n[0];var w=n[1];I&&I.D(L)?h.push(w):g.push(h=n);I=w;f&&(m=u,k=0)}}else g=a;return g}t("H.math.clipping.clipStrips",Ub);\nfunction Vb(a,b,c,d,e,f){var g=a.x;a=-a.y;var h=b.x;b=-b.y;c=-c;f=-f;if(g>h){if(h>e||g<d)return;var k=g;var m=a;g=h;a=b;h=k;b=m;k=1}else if(g>e||h<d)return;if(a>b){if(b>c||a<f)return;var n=1;a=-a;b=-b;m=f;f=-c;c=-m}else if(a>c||b<f)return;if(g<d){if((a+=(d-g)*(b-a)/(h-g))>c)return;g=d}if(a<f){if((g+=(f-a)*(h-g)/(b-a))>e)return;a=f}h>e&&(b=a+(e-g)*(b-a)/(h-g),h=e);b>c&&(h=g+(c-a)*(h-g)/(b-a),b=c);n&&(a=-a,b=-b);return k?[new F(h,-b),new F(g,-a)]:[new F(g,-a),new F(h,-b)]}\nfunction Wb(a,b,c){a=Xb(a,!0);b=Xb(b,!1);var d,e;var f={};var g=d=1;switch(~~(c||0)){case 1:g=d=0;break;case 2:d=0;g=1;break;case 3:d=1,g=0}c=d;var h=g;if(b&&a){b.V=new Yb(b.x,b.y,null,Zb(b));a.V=new Yb(a.x,a.y,null,Zb(a));for(g=b;g.next;g=g.next)if(!g.u)for(d=a;d.next;d=d.next)if(!d.u){var k=$b(g.next);var m=$b(d.next);if(e=ac(g,k,d,m,f)){e=f.lb;var n=f.mb;var q=f.cc;var u=f.dc;e=new Yb(q,u,null,null,null,null,!0,0,0,e);bc(e,g,k);k=new Yb(q,u,null,null,null,null,!0,0,0,n);bc(k,d,m);e.Ba=k;k.Ba=e}}f=\nSb(b,cc(a));c&&(f=!f);for(g=b;g;g=g.next)g.u&&(g.ya=f,f=!f);f=Sb(a,cc(b));h&&(f=!f);for(d=a;d.next;d=d.next)d.u&&(d.ya=f,f=!f);dc(b);for(dc(a);(a=ec(b))!=b;){for(c=null;!a.la;a=a.Ba){for(f=a.ya;;){c=new Yb(a.x,a.y,c);c.artificial=a.u||a.Va;a.la=1;a=f?a.next:a.o;if(!a)break;if(a.u){a.la=1;break}}if(!a)break}c.Ya=I||null;var I=c}return I}}t("H.math.clipping.clipPolygon",Wb);\nfunction Yb(a,b,c,d,e,f,g,h,k,m){this.x=a;this.y=b;this.next=c||null;this.o=d||null;this.Ya=e||null;this.Ba=f||null;this.u=!!g;this.ya=!!h;this.la=k||0;this.alpha=m||0;d&&(d.next=this);c&&(c.o=this);this.Va=!1;this.V=null}function $b(a){for(;a&&a.u;)a=a.next;return a}function Zb(a){if(a)for(;a.next;)a=a.next;return a}function ec(a){var b=a;if(b){do b=b.next;while(b!=a&&(!b.u||b.u&&b.la))}return b}function dc(a){var b=Zb(a);b.o.next=a;a.o=b.o}\nfunction ac(a,b,c,d,e){var f,g=b.x-a.x,h=b.y-a.y;var k=d.x-c.x;var m=d.y-c.y;var n=g*m-h*k;if(!n)return 0;k=((c.x-a.x)*m-(c.y-a.y)*k)/n;n=(h*(c.x-a.x)-g*(c.y-a.y))/n;if(0>k||1<k||0>n||1<n)return 0;0===k?f=a:1===k?f=b:0===n?f=c:1===n&&(f=d);if(f)return f.x+=2.480549651603763E-5,f.y+=7.321997314118067E-5,f.V&&(f.V.x=f.x,f.V.y=f.y),ac(a,b,c,d,e);e.cc=a.x+k*g;e.dc=a.y+k*h;e.lb=k;e.mb=n;return 1}function cc(a){for(var b=[];a;)b.push(a.x,a.y),a=a.next;return b}\nfunction bc(a,b,c){for(b=b.next;b!==c&&b.alpha<=a.alpha;)b=b.next;a.next=b;a.o=b.o;a.next.o=a;a.o.next=a}function Xb(a,b){for(var c,d=null,e=0,f=a.length;e<f;e++){c=new Yb(a[e].x,a[e].y,d);c.Va=b;if(c.next=d)d.o=c;d=c}return d};function fc(a,b){var c=[];a&&c.push(Ua(a));1<arguments.length&&c.push(""+b);c=Error(c.join(" "));Object.setPrototypeOf(c,fc.prototype);return c}wa(fc,Error);t("H.lang.IllegalOperationError",fc);fc.prototype.name="IllegalOperationError";function gc(){this.constructor=this.constructor;if(!Qa("STATIC_DB"))throw new z(this.constructor,0);this.i=hc();if(!this.i)throw new fc(this.constructor,"This browser does not support IndexedDB");this.a=[];this.c=[];this.g=Fa(this.g,this)}var ic,jc;gc.prototype.get=function(a,b,c){var d;if(!Qa(a)&&!Sa(a))throw new z(this.get,0);if(!r(b))throw new z(this.get,1);kc(this,function(e){d=e.get(a);lc(d,b,c)},c);return{cancel:function(){d&&(d.onsuccess=mc)}}};\ngc.prototype.g=function(){var a=this.b.result;a.objectStoreNames.contains("data")||a.createObjectStore("data")};\nfunction nc(a,b,c){if(a.b)a.a?(a.a.push(b),c&&a.c.push(c)):a.f?c&&c(a.f):b(a.b.result);else{a.b=a.i.open("H_STATIC_DB",1);a.b.onupgradeneeded=a.g;var d=a.b.onerror=function(){clearTimeout(a.j);a.f=this.error;a.c.forEach(function(e){e(a.f)});delete a.a;delete a.c};a.j=setTimeout(function(){d.call({error:Error("DbOpenTimeoutError")})},500);a.b.onsuccess=function(){clearTimeout(a.j);a.a?(a.a.forEach(function(e){e(this.result)},this),delete a.a,delete a.c):(delete a.b,delete a.f,a.a=[],a.c=[])};\na.a.push(b);c&&a.c.push(c)}}function kc(a,b,c){nc(a,function(d){d=d.transaction(["data"],"readwrite");b(d.objectStore("data"))},c)}function lc(a,b,c){b&&(a.onsuccess=function(){b(this.result)});c&&(a.onerror=function(){c(this.error)})}t("H.util.IndexedDBStorage.getInstance",function(){ic||(ic=new gc);return ic});function hc(){return Ca.indexedDB||Ca.webkitIndexedDB||Ca.mozIndexedDB||Ca.msIndexedDB}\nt("H.util.IndexedDBStorage.isSupported",function(){var a="";if(jc===x)if("file:"===window.location.protocol&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&128<=window.location.href.length)jc=!1;else{try{var b=hc();a="H_TEST_DB";var c=b&&b.open(a,1)}catch(d){}jc=!!c&&null===c.onupgradeneeded;c&&b.deleteDatabase&&b.deleteDatabase(a)}return jc});function J(){0!=oc&&(pc[this[pa]||(this[pa]=++ra)]=this);this.c=this.c;this.a=this.a}var oc=0,pc={};J.prototype.c=!1;J.prototype.s=function(){if(!this.c&&(this.c=!0,this.v(),0!=oc)){var a=this[pa]||(this[pa]=++ra);if(0!=oc&&this.a&&0<this.a.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass\' method.");delete pc[a]}};\nJ.prototype.K=function(a,b){this.c?void 0!==b?a.call(b):a():(this.a||(this.a=[]),this.a.push(void 0!==b?ua(a,b):a))};J.prototype.v=function(){if(this.a)for(;this.a.length;)this.a.shift()()};function K(a,b){this.type=a;this.currentTarget=this.target=b;this.a=!1;this.$a=!0}K.prototype.stopPropagation=function(){this.a=!0};K.prototype.c=function(){this.$a=!1};t("H.util.Event",K);K.prototype.stopPropagation=K.prototype.stopPropagation;K.prototype.stopPropagation=K.prototype.stopPropagation;K.prototype.CAPTURING_PHASE=1;K.prototype.CAPTURING_PHASE=K.prototype.CAPTURING_PHASE;K.prototype.AT_TARGET=2;K.prototype.AT_TARGET=K.prototype.AT_TARGET;K.prototype.BUBBLING_PHASE=3;K.prototype.BUBBLING_PHASE=K.prototype.BUBBLING_PHASE;K.prototype.eventPhase=0;K.prototype.eventPhase=K.prototype.eventPhase;function qc(a,b,c){qc.T.constructor.call(this,a,c);this.data=b}wa(qc,K);t("H.util.DataEvent",qc);function rc(a,b,c){rc.T.constructor.call(this,a,c);this.message=b}wa(rc,K);t("H.util.ErrorEvent",rc);function sc(){}t("H.util.ICancelable",sc);sc.prototype.cancel=function(){};sc.prototype.cancel=sc.prototype.cancel;function tc(a,b){this.c=a;this.f=b;this.b=0;this.a=null}tc.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next;a.next=null}else a=this.c();return a};function uc(a,b){a.f(b);100>a.b&&(a.b++,b.next=a.a,a.a=b)};function vc(){this.b=this.a=null}var xc=new tc(function(){return new wc},function(a){a.reset()});vc.prototype.add=function(a,b){var c=xc.get();c.set(a,b);this.b?this.b.next=c:this.a=c;this.b=c};function yc(){var a=zc,b=null;a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null);return b}function wc(){this.next=this.b=this.a=null}wc.prototype.set=function(a,b){this.a=a;this.b=b;this.next=null};wc.prototype.reset=function(){this.next=this.b=this.a=null};var Ac=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(a)[1]};function Bc(a,b){return a<b?-1:a>b?1:0};var Cc;a:{var Fc=p.navigator;if(Fc){var Gc=Fc.userAgent;if(Gc){Cc=Gc;break a}}Cc=""}function M(a){return-1!=Cc.indexOf(a)};function Hc(a,b){this.b=a===Ic&&b||"";this.a=Jc}var Jc={},Ic={},Kc=new Hc(Ic,"");function Lc(a,b){this.b=a===Mc&&b||"";this.a=Nc}var Nc={},Mc={};function Oc(){this.a="";this.b=Pc}function Qc(){var a=Rc;if(a instanceof Oc&&a.constructor===Oc&&a.b===Pc)return a.a;na(a);return"type_error:SafeHtml"}var Pc={};function Sc(a){var b=new Oc;b.a=a;return b}Sc("<!DOCTYPE html>");var Rc=Sc("");Sc("<br>");function Tc(a){var b=new Lc(Mc,Kc instanceof Hc&&Kc.constructor===Hc&&Kc.a===Jc?Kc.b:"type_error:Const");b instanceof Lc&&b.constructor===Lc&&b.a===Nc?b=b.b:(na(b),b="type_error:TrustedResourceUrl");a.src=b.toString()};function Uc(a){Uc[" "](a);return a}Uc[" "]=ma;var Vc=M("Opera"),Wc=M("Trident")||M("MSIE"),Xc=M("Edge"),Yc=M("Gecko")&&!(-1!=Cc.toLowerCase().indexOf("webkit")&&!M("Edge"))&&!(M("Trident")||M("MSIE"))&&!M("Edge"),Zc=-1!=Cc.toLowerCase().indexOf("webkit")&&!M("Edge");function $c(){var a=p.document;return a?a.documentMode:void 0}var ad;\na:{var bd="",cd=function(){var a=Cc;if(Yc)return/rv:([^\\);]+)(\\)|;)/.exec(a);if(Xc)return/Edge\\/([\\d\\.]+)/.exec(a);if(Wc)return/\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(a);if(Zc)return/WebKit\\/(\\S+)/.exec(a);if(Vc)return/(?:Version)[ \\/]?(\\S+)/.exec(a)}();cd&&(bd=cd?cd[1]:"");if(Wc){var dd=$c();if(null!=dd&&dd>parseFloat(bd)){ad=String(dd);break a}}ad=bd}var ed={},fd;fd=p.document&&Wc?$c():void 0;function gd(a){var b=document;a=String(a);"application/xhtml+xml"===b.contentType&&(a=a.toLowerCase());return b.createElement(a)};function hd(a){p.setTimeout(function(){throw a;},0)}var id;\nfunction jd(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!M("Presto")&&(a=function(){var e=gd("IFRAME");e.style.display="none";Tc(e);document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.write(Qc());e.close();var g="callImmediate"+Math.random(),h="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=ua(function(k){if(("*"==h||k.origin==h)&&k.data==g)this.port1.onmessage()},\nthis);f.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,h)}}});if("undefined"!==typeof a&&!M("Trident")&&!M("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var e=c.Oa;c.Oa=null;e()}};return function(e){d.next={Oa:e};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in gd("SCRIPT")?function(e){var f=gd("SCRIPT");f.onreadystatechange=function(){f.onreadystatechange=null;\nf.parentNode.removeChild(f);f=null;e();e=null};document.documentElement.appendChild(f)}:function(e){p.setTimeout(e,0)}};function kd(a,b){ld||md();nd||(ld(),nd=!0);zc.add(a,b)}var ld;function md(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);ld=function(){a.then(od)}}else ld=function(){var b=od;!r(p.setImmediate)||p.Window&&p.Window.prototype&&!M("Edge")&&p.Window.prototype.setImmediate==p.setImmediate?(id||(id=jd()),id(b)):p.setImmediate(b)}}var nd=!1,zc=new vc;function od(){for(var a;a=yc();){try{a.a.call(a.b)}catch(b){hd(b)}uc(xc,a)}nd=!1};function pd(a){this.a=qd;this.j=void 0;this.f=this.b=this.c=null;this.g=this.i=!1;if(a!=ma)try{var b=this;a.call(void 0,function(c){rd(b,sd,c)},function(c){rd(b,td,c)})}catch(c){rd(this,td,c)}}var qd=0,sd=2,td=3;function ud(){this.next=this.c=this.b=this.f=this.a=null;this.g=!1}ud.prototype.reset=function(){this.c=this.b=this.f=this.a=null;this.g=!1};var vd=new tc(function(){return new ud},function(a){a.reset()});function wd(a,b,c){var d=vd.get();d.f=a;d.b=b;d.c=c;return d}\nfunction xd(a,b,c){yd(a,b,c,null)||kd(va(b,a))}function zd(a){return new pd(function(b,c){var d=a.length,e=[];if(d)for(var f=function(m,n){d--;e[m]=n;0==d&&b(e)},g=function(m){c(m)},h=0,k;h<a.length;h++)k=a[h],xd(k,va(f,h),g);else b(e)})}function Ad(){var a,b,c=new pd(function(d,e){a=d;b=e});return new Bd(c,a,b)}pd.prototype.then=function(a,b,c){return Cd(this,r(a)?a:null,r(b)?b:null,c)};pd.prototype.$goog_Thenable=!0;\npd.prototype.cancel=function(a){if(this.a==qd){var b=new Dd(a);kd(function(){Ed(this,b)},this)}};function Ed(a,b){if(a.a==qd)if(a.c){var c=a.c;if(c.b){for(var d=0,e=null,f=null,g=c.b;g&&(g.g||(d++,g.a==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(c.a==qd&&1==d?Ed(c,b):(f?(d=f,d.next==c.f&&(c.f=d),d.next=d.next.next):Fd(c),Gd(c,e,td,b)))}a.c=null}else rd(a,td,b)}function Hd(a,b){a.b||a.a!=sd&&a.a!=td||Id(a);a.f?a.f.next=b:a.b=b;a.f=b}\nfunction Cd(a,b,c,d){var e=wd(null,null,null);e.a=new pd(function(f,g){e.f=b?function(h){try{var k=b.call(d,h);f(k)}catch(m){g(m)}}:f;e.b=c?function(h){try{var k=c.call(d,h);void 0===k&&h instanceof Dd?g(h):f(k)}catch(m){g(m)}}:g});e.a.c=a;Hd(a,e);return e.a}pd.prototype.Ca=function(a){this.a=qd;rd(this,sd,a)};pd.prototype.Ea=function(a){this.a=qd;rd(this,td,a)};\nfunction rd(a,b,c){a.a==qd&&(a===c&&(b=td,c=new TypeError("Promise cannot resolve to itself")),a.a=1,yd(c,a.Ca,a.Ea,a)||(a.j=c,a.a=b,a.c=null,Id(a),b!=td||c instanceof Dd||Jd(a,c)))}function yd(a,b,c,d){if(a instanceof pd)return Hd(a,wd(b||ma,c||null,d)),!0;if(a)try{var e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;if(oa(a))try{var f=a.then;if(r(f))return Kd(a,f,b,c,d),!0}catch(g){return c.call(d,g),!0}return!1}\nfunction Kd(a,b,c,d,e){function f(k){h||(h=!0,d.call(e,k))}function g(k){h||(h=!0,c.call(e,k))}var h=!1;try{b.call(a,g,f)}catch(k){f(k)}}function Id(a){a.i||(a.i=!0,kd(a.O,a))}function Fd(a){var b=null;a.b&&(b=a.b,a.b=b.next,b.next=null);a.b||(a.f=null);return b}pd.prototype.O=function(){for(var a;a=Fd(this);)Gd(this,a,this.a,this.j);this.i=!1};\nfunction Gd(a,b,c,d){if(c==td&&b.b&&!b.g)for(;a&&a.g;a=a.c)a.g=!1;if(b.a)b.a.c=null,Ld(b,c,d);else try{b.g?b.f.call(b.c):Ld(b,c,d)}catch(e){Md.call(null,e)}uc(vd,b)}function Ld(a,b,c){b==sd?a.f.call(a.c,c):a.b&&a.b.call(a.c,c)}function Jd(a,b){a.g=!0;kd(function(){a.g&&Md.call(null,b)})}var Md=hd;function Dd(a){Da.call(this,a)}wa(Dd,Da);Dd.prototype.name="cancel";function Bd(a,b,c){this.a=a;this.b=b;this.reject=c};function Nd(a,b,c){this.type=a;this.data=b;this.a=Ad();this.Wa=Fa(this.Wa,this);this.reject=Fa(this.reject,this);this.priority=Od;c!==x&&(this.priority=c);this.b().add(this)}var Od=1,Pd={fc:0,gc:Od,ec:2};l=Nd.prototype;l.then=function(a,b,c){return this.a.a.then(a,b,c)};l.Wa=function(a){this.Y=3;this.a.b(a)};l.reject=function(a){this.Y=5;this.a.reject(a)};l.Y=0;\nl.cancel=function(){if(3>this.Y){this.c();var a=this.b(),b=this.priority,c=a.a[b].indexOf(this);-1<c?a.a[b].splice(c,1):this.La&&a.ba.pb(this.La);this.Y=4}};Nd.prototype.cancel=Nd.prototype.cancel;function Qd(a){var b;this.a={};for(b in Pd)this.a[Pd[b]]=[];this.ba=a;this.ba.addEventListener("allocatable",Fa(this.b,this))}t("H.util.JobManager",Qd);var Rd=Object.keys(Pd).map(function(a){return Pd[a]}).sort().reverse();Qd.prototype.add=function(a){Na(a,Nd,this.add,0);this.a[a.priority].push(a);this.b()};Qd.prototype.contains=function(a){return-1<this.a[a.priority].indexOf(a)};\nQd.prototype.b=function(){Rd.forEach(function(a){this.a[a]=this.a[a].filter(function(b){var c;if((c=this.ba.hc(b))!==Ia){var d=Fa(this.ba.pb,this.ba,c,b);b.La=c;b.then(d,d);b.Y=b.ic(c)?1:5}else return!0},this)},this)};function Sd(a,b,c){var d=[],e=arguments.length;a&&d.push(Ua(a));1<e&&(e=2<e&&Oa(c,void 0,void 0,void 0)?" out of ["+c[0]+"..."+c[1]+"]":"",d.push("("+b+e+")"));d=Error(d.join(" "));Object.setPrototypeOf(d,Sd.prototype);return d}wa(Sd,Error);t("H.lang.OutOfRangeError",Sd);Sd.prototype.name="OutOfRangeError";var Td="closure_listenable_"+(1E6*Math.random()|0),Ud=0;function Vd(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.ga=e;this.key=++Ud;this.S=this.ca=!1}function Wd(a){a.S=!0;a.listener=null;a.proxy=null;a.src=null;a.ga=null};function Xd(a){this.src=a;this.a={};this.b=0}Xd.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f];a||(a=this.a[f]=[],this.b++);var g=Yd(a,b,d,e);-1<g?(b=a[g],c||(b.ca=!1)):(b=new Vd(b,this.src,f,!!d,e),b.ca=c,a.push(b));return b};function Zd(a,b){var c=b.type;if(c in a.a){var d=a.a[c],e=Ea(d,b),f;(f=0<=e)&&Array.prototype.splice.call(d,e,1);f&&(Wd(b),0==a.a[c].length&&(delete a.a[c],a.b--))}}\nXd.prototype.R=function(a){a=a&&a.toString();var b=0,c;for(c in this.a)if(!a||c==a){for(var d=this.a[c],e=0;e<d.length;e++)++b,Wd(d[e]);delete this.a[c];this.b--}return b};function Yd(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.S&&f.listener==b&&f.capture==!!c&&f.ga==d)return e}return-1};var $d;($d=!Wc)||($d=9<=Number(fd));var ae=$d,be;\nif(be=Wc){var ce;if(Object.prototype.hasOwnProperty.call(ed,"9"))ce=ed["9"];else{for(var de=0,ee=Ac(String(ad)).split("."),fe=Ac("9").split("."),ge=Math.max(ee.length,fe.length),he=0;0==de&&he<ge;he++){var ie=ee[he]||"",je=fe[he]||"";do{var ke=/(\\d*)(\\D*)(.*)/.exec(ie)||["","","",""],le=/(\\d*)(\\D*)(.*)/.exec(je)||["","","",""];if(0==ke[0].length&&0==le[0].length)break;de=Bc(0==ke[1].length?0:parseInt(ke[1],10),0==le[1].length?0:parseInt(le[1],10))||Bc(0==ke[2].length,0==le[2].length)||Bc(ke[2],le[2]);\nie=ke[3];je=le[3]}while(0==de)}ce=ed["9"]=0<=de}be=!ce}var me=be,ne=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{p.addEventListener("test",ma,b),p.removeEventListener("test",ma,b)}catch(c){}return a}();function oe(a,b){K.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.pointerId=0;this.pointerType="";this.b=null;if(a){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;if(b=a.relatedTarget){if(Yc){a:{try{Uc(b.nodeName);var e=!0;break a}catch(f){}e=\n!1}e||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=\na.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType="string"===typeof a.pointerType?a.pointerType:pe[a.pointerType]||"";this.b=a;a.defaultPrevented&&this.c()}}wa(oe,K);var pe={2:"touch",3:"pen",4:"mouse"};oe.prototype.stopPropagation=function(){oe.T.stopPropagation.call(this);this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0};\noe.prototype.c=function(){oe.T.c.call(this);var a=this.b;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,me)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var qe="closure_lm_"+(1E6*Math.random()|0),re={},se=0;function te(a,b,c,d,e){if(d&&d.once)ue(a,b,c,d,e);else if("array"==na(b))for(var f=0;f<b.length;f++)te(a,b[f],c,d,e);else c=ve(c),a&&a[Td]?a.b.add(String(b),c,!1,oa(d)?!!d.capture:!!d,e):we(a,b,c,!1,d,e)}\nfunction we(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=oa(e)?!!e.capture:!!e,h=xe(a);h||(a[qe]=h=new Xd(a));c=h.add(b,c,d,g,f);if(!c.proxy){d=ye();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)ne||(e=g),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(ze(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");se++}}\nfunction ye(){var a=Ae,b=ae?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function ue(a,b,c,d,e){if("array"==na(b))for(var f=0;f<b.length;f++)ue(a,b[f],c,d,e);else c=ve(c),a&&a[Td]?a.b.add(String(b),c,!0,oa(d)?!!d.capture:!!d,e):we(a,b,c,!0,d,e)}\nfunction Be(a,b,c,d,e){if("array"==na(b))for(var f=0;f<b.length;f++)Be(a,b[f],c,d,e);else(d=oa(d)?!!d.capture:!!d,c=ve(c),a&&a[Td])?(a=a.b,b=String(b).toString(),b in a.a&&(f=a.a[b],c=Yd(f,c,d,e),-1<c&&(Wd(f[c]),Array.prototype.splice.call(f,c,1),0==f.length&&(delete a.a[b],a.b--)))):a&&(a=xe(a))&&(b=a.a[b.toString()],a=-1,b&&(a=Yd(b,c,d,e)),(c=-1<a?b[a]:null)&&Ce(c))}\nfunction Ce(a){if("number"!==typeof a&&a&&!a.S){var b=a.src;if(b&&b[Td])Zd(b.b,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(ze(c),d):b.addListener&&b.removeListener&&b.removeListener(d);se--;(c=xe(b))?(Zd(c,a),0==c.b&&(c.src=null,b[qe]=null)):Wd(a)}}}function ze(a){return a in re?re[a]:re[a]="on"+a}\nfunction De(a,b,c,d){var e=!0;if(a=xe(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.S&&(f=Fe(f,d),e=e&&!1!==f)}return e}function Fe(a,b){var c=a.listener,d=a.ga||a.src;a.ca&&Ce(a);return c.call(d,b)}\nfunction Ae(a,b){if(a.S)return!0;if(!ae){if(!b)a:{b=["window","event"];for(var c=p,d=0;d<b.length;d++)if(c=c[b[d]],null==c){b=null;break a}b=c}d=b;b=new oe(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.currentTarget;e;e=e.parentNode)d.push(e);a=a.type;for(e=d.length-1;!b.a&&0<=e;e--){b.currentTarget=d[e];var f=De(d[e],a,!0,b);c=c&&f}for(e=0;!b.a&&e<d.length;e++)b.currentTarget=\nd[e],f=De(d[e],a,!1,b),c=c&&f}return c}return Fe(a,new oe(b,this))}function xe(a){a=a[qe];return a instanceof Xd?a:null}var Ge="__closure_events_fn_"+(1E9*Math.random()>>>0);function ve(a){if(r(a))return a;a[Ge]||(a[Ge]=function(b){return a.handleEvent(b)});return a[Ge]};function N(){J.call(this);this.b=new Xd(this);this.j=this;this.i=null}wa(N,J);N.prototype[Td]=!0;l=N.prototype;l.G=function(){return this.i};l.Ga=function(a){this.i=a};l.addEventListener=function(a,b,c,d){te(this,a,b,c,d)};l.removeEventListener=function(a,b,c,d){Be(this,a,b,c,d)};\nl.dispatchEvent=function(a){var b,c=this.G();if(c)for(b=[];c;c=c.G())b.push(c);c=this.j;var d=a.type||a;if("string"===typeof a)a=new K(a,c);else if(a instanceof K)a.target=a.target||c;else{var e=a;a=new K(d,c);Ba(a,e)}e=!0;if(b)for(var f=b.length-1;!a.a&&0<=f;f--){var g=a.currentTarget=b[f];e=g.M(d,!0,a)&&e}a.a||(g=a.currentTarget=c,e=g.M(d,!0,a)&&e,a.a||(e=g.M(d,!1,a)&&e));if(b)for(f=0;!a.a&&f<b.length;f++)g=a.currentTarget=b[f],e=g.M(d,!1,a)&&e;return e};\nl.v=function(){N.T.v.call(this);this.b&&this.b.R(void 0);this.i=null};l.M=function(a,b,c){a=this.b.a[String(a)];if(!a)return!0;a=a.concat();for(var d=!0,e=0;e<a.length;++e){var f=a[e];if(f&&!f.S&&f.capture==b){var g=f.listener,h=f.ga||f.src;f.ca&&Zd(this.b,f);d=!1!==g.call(h,c)&&d}}return d&&0!=c.$a};t("H.util.EventTarget",N);N.prototype.Ga=N.prototype.Ga;N.prototype.setParentEventTarget=N.prototype.Ga;N.prototype.G=N.prototype.G;N.prototype.getParentEventTarget=N.prototype.G;N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.dispatchEvent=N.prototype.dispatchEvent;\nN.prototype.dispatchEvent=N.prototype.dispatchEvent;N.prototype.s=N.prototype.s;N.prototype.dispose=N.prototype.s;N.prototype.K=N.prototype.K;N.prototype.addOnDisposeCallback=N.prototype.K;N.prototype.O=N.prototype.M;\nN.prototype.M=function(a,b,c){var d,e,f=!0;var g=c[c.currentTarget===c.target?"AT_TARGET":b?"CAPTURING_PHASE":(d=!0,"BUBBLING_PHASE")];if(!d||"pointerenter"!==(e=c.type)&&"pointerleave"!==e)c.eventPhase=g,f=N.prototype.O.apply(this,arguments),d&&this.G&&null===this.G()&&delete c.eventPhase;return f};function Q(a){a=a||{};var b=a.callback;this.g=a.label;r(b)&&(this.callback=b);this.f=!!a.disabled;Q.T.constructor.call(this)}wa(Q,N);t("H.util.ContextItem",Q);Q.prototype.yb=function(){return this.g};Q.prototype.getLabel=Q.prototype.yb;Q.prototype.Wb=function(a){this.g!==a&&(this.g=a,this.dispatchEvent("update"));return this};Q.prototype.setLabel=Q.prototype.Wb;Q.prototype.Nb=function(){return this.f};Q.prototype.isDisabled=Q.prototype.Nb;\nQ.prototype.Vb=function(a){a!==this.f&&(this.f=a,this.dispatchEvent("update"));return this};Q.prototype.setDisabled=Q.prototype.Vb;var He=new Q;Q.SEPARATOR=He;function Ie(){if(Ca.document){var a=document.createElement("canvas");a.width=a.height=1;a.getContext("2d")}}t("H.util.getPixelRatio",function(){return window.devicePixelRatio||1});Object.create(Ia,void 0);t("H.util.eval",function(a){return eval(a)});t("H.util.provide",function(a){var b=p.$jscomp;if(b&&("function"!=typeof b.vb?0:b.vb()))throw Error("goog.provide cannot be used within a module.");la(a,void 0)});function Je(){this.m=0}\nJe.prototype.next=function(a){if(9007199254740992===this.m)throw new Sd(a,this.m,[0,9007199254740991]);return this.m++};var Ke=new Je;Fa(Ke.next,Ke);function mc(){}var mb=Ha([]);Ha({});Ie();Ie();function Le(a,b,c){var d=Nb(+a,-90,90);if(b&&Ra(d))throw new z(b,c,a);return d}function Me(a,b,c){var d=+a;if(-180>d||180<d)d=Mb(d+180,360)-180;if(b&&Ra(d))throw new z(b,c,a);return d}function Ne(a,b,c){var d;if(a!==x&&Ra(d=+a)&&b)throw new z(b,c,a);return d}t("H.geo.isDBC",function(a,b){return 0>a!==0>b&&180<sb(b-a)});function R(){var a=R;if(!0===(Na(this,a)&&this.constructor===a))throw new TypeError("Illegal constructor "+Ua(a));}t("H.geo.AbstractGeometry",R);R.prototype.getBoundingBox=R.prototype.W;R.prototype.equals=R.prototype.D;R.prototype.ma="";R.prototype.ta="";R.prototype.toString=function(){return this.cb([this.ma.toUpperCase()," "]).join("")};R.prototype.toString=R.prototype.toString;R.prototype.Yb=function(){return{type:this.ta,coordinates:this.bb()}};R.prototype.toGeoJSON=R.prototype.Yb;\nR.prototype.ra=function(){return{type:this.ma,coordinates:this.sa(),boundingBox:this.W().ra()}};R.prototype.forWorkerMessage=R.prototype.ra;function S(a,b,c){this.lat=Le(a,S,0);this.lng=Me(b,S,1);c!==x&&(this.alt=Ne(c,S,2))}wa(S,R);t("H.geo.Point",S);S.prototype.D=function(a){return this===a||!!a&&this.lat===a.lat&&this.lng===a.lng&&(this.alt||0)===(a.alt||0)};S.prototype.equals=S.prototype.D;S.prototype.pa=function(a){if(this===a||this.lat===a.lat&&this.lng===a.lng)a=0;else{var b=this.lat*Jb;var c=a.lat*Jb;a=1.274200158E7*yb(nb(1,ub(vb(xb((b-c)/2),2)+zb(b)*zb(c)*vb(xb((this.lng*Jb-a.lng*Jb)/2),2))))}return a};\nS.prototype.distance=S.prototype.pa;\nS.prototype.bc=function(a,b,c){var d;if(c){if(d=b/6371000.79){b=a*Jb;a=Jb*this.lat;var e=xb(a);c=xb(d);var f=zb(d);d=Jb*this.lng;var g=zb(a);a=yb(g*zb(b)*c+e*f);b=Cb(xb(b)*g*c,f-e*xb(a));b=(d+b+E)%(2*E)-E;b*=Kb;e=new S(a*Kb,(b+540)%360-180)}return e||this}a=(a%360+360)%360;if(0===(a+90)%180)return a=this.lng+b/(6371000.79*Gb*zb(this.lat*Jb))*(270===a?-360:360),new S(this.lat,(a+540)%360-180);if(b/=6371000.79)a*=Jb,e=this.lat*Jb,c=this.lng*Jb,d=e+b*zb(a),f=d-e,g=tb(Ab(d/2+Fb)/Ab(e/2+Fb)),g=Ra(f/g)?\nzb(e):f/g,a=b*xb(a)/g,sb(d)>Eb&&(d=0<d?E-d:-(E+d)),d=new S(d*Kb,((c+a+Ib+(sb(e+f)>Eb?E:0))%Gb-E)*Kb);return d||this};S.prototype.walk=S.prototype.bc;S.prototype.W=function(){return new V(this.lat,this.lng,this.lat,this.lng)};S.prototype.getBoundingBox=S.prototype.W;function Oe(a,b,c){var d=oa(a)&&!(Ra(a.lat=Le(a.lat))||Ra(a.lng=Me(a.lng))||a.alt!==x&&Ra(a.alt=Ne(a.alt)));if(!d&&b)throw new z(b,c,a);return d}S.validate=Oe;function Pe(a){if(!a)throw new z(Pe,0,a);return new S(a.lat,a.lng,a.alt)}\nS.fromIPoint=Pe;l=S.prototype;l.ma="Point";l.cb=function(a){a.push("(",this.lng," ",this.lat,")");return a};l.ta="Point";l.bb=function(){return[this.lng,this.lat,this.alt||0]};l.sa=function(){return[this.lat,this.lng,this.alt||0]};function Qe(){}function Re(a){return nb(1,ob(0,.5-tb(Ab(Fb+Eb*a/180))/E/2))}Qe.prototype.ha=function(a,b,c){c?(c.x=b/360+.5,c.y=Re(a)):c=new F(b/360+.5,Re(a));return c};Qe.prototype.latLngToPoint=Qe.prototype.ha;Qe.prototype.sb=function(a,b){return this.ha(a.lat,a.lng,b)};Qe.prototype.geoToPoint=Qe.prototype.sb;function Se(a){return 0>=a?90:1<=a?-90:Kb*(2*Bb(wb(E*(1-2*a)))-Eb)}Qe.prototype.U=function(a,b,c){c?(c.lat=Se(b),c.lng=360*(1===a?1:Mb(a,1))-180):c=new S(Se(b),360*(1===a?1:Mb(a,1))-180);return c};\nQe.prototype.xyToGeo=Qe.prototype.U;Qe.prototype.Sb=function(a,b){return this.U(a.x,a.y,b)};Qe.prototype.pointToGeo=Qe.prototype.Sb;var Te=new Qe;t("H.geo.mercator",Te);t("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0);t("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22);function W(a,b){this.projection=a||Te;this.b=0;this.a=this.exp=tb(b||256)/Db;Ue(this);this.y=this.x=0}t("H.geo.PixelProjection",W);var Ve=sb(24)+sb(-8);W.prototype.Ub=Te;W.prototype.projection=W.prototype.Ub;W.prototype.x=0;W.prototype.x=W.prototype.x;W.prototype.y=0;W.prototype.y=W.prototype.y;W.prototype.ac=vb(2,Ve);W.prototype.w=W.prototype.ac;W.prototype.Ib=vb(2,Ve);W.prototype.h=W.prototype.Ib;\nW.prototype.aa=function(a){if(Ra(a))throw new z(this.aa,0,a);var b=this.x/this.w;var c=this.y/this.h;this.b=a;this.a=this.exp+a;Ue(this);this.x=b*this.w;this.y=c*this.h};W.prototype.rescale=W.prototype.aa;function Ue(a){a.a>Ve&&(a.a=Ve);a.w=vb(2,a.a);a.h=vb(2,a.a)}W.prototype.Sa=function(){return this.b||0};W.prototype.getZoomScale=W.prototype.Sa;W.prototype.rb=function(a,b){a=this.projection.ha(a.lat,a.lng,b);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};W.prototype.geoToPixel=W.prototype.rb;\nW.prototype.Da=function(a,b){return this.projection.U((a.x+this.x)/this.w,(a.y+this.y)/this.h,b)};W.prototype.pixelToGeo=W.prototype.Da;W.prototype.U=function(a,b,c){return this.projection.U((a+this.x)/this.w,(b+this.y)/this.h,c)};W.prototype.xyToGeo=W.prototype.U;W.prototype.za=function(a,b,c){a=this.projection.ha(a,b,c);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};W.prototype.latLngToPixel=W.prototype.za;W.prototype.Tb=function(a){return new F(a.x*this.w-this.x,a.y*this.h-this.y)};\nW.prototype.pointToPixel=W.prototype.Tb;t("H.util.Disposable",J);J.prototype.K=J.prototype.K;J.prototype.addOnDisposeCallback=J.prototype.K;t("H.util.dispose",function(a){a&&"function"==typeof a.s&&a.s()});J.prototype.s=J.prototype.s;J.prototype.dispose=J.prototype.s;J.prototype.v=J.prototype.v;J.prototype.disposeInternal=J.prototype.v;function We(a,b,c,d){if(!a||!b||!c)throw new z(We,x,"Must specify name, version and revision parameter");this.name=a;this.version=b;this.revision=c;d&&Ba(this,d)}t("H.util.BuildInfo",We);We.prototype.toString=function(){var a,b=[];for(a in this)Qa(this[a])&&b.push(this[a]);return b.join(";")};var Xe={};function Ye(a,b,c,d){if(!a)throw new z(Ye,1,"Must specify a name parameter");return Xe[a]||(Xe[a]=new We(a,b,c,d))}We.get=Ye;function Y(a,b,c,d,e,f){if(a&&b)this.Ja(a),this.ja(b),this.Ha(c),this.Ia(e),this.ab(f),this.ka(d);else throw new z(Y,x,\'Parameters "scheme" and "host" must be specified\');}t("H.service.Url",Y);\nfunction Ze(a,b){var c=Ca.document,d;var e="";if(c){e=c.createElement("a");if(b){var f=(d=c.getElementsByTagName("base")[0])&&d.href;var g=c.head;var h=d||g.appendChild(c.createElement("base"));h.href=b}e.href=a;e=e.href;b&&(d?d.href=f:g.removeChild(h))}else/[\\w]+:\\/\\//.test(a)&&(e=a);f=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(e);a=f[1];g=f[4];b=f[5];h=f[6];c=f[7];d=f[8];!f[2]&&g&&/@/.test(g)&&(g=g.split("@")[1]);f=Y;h=h&&0<h.length?h.substr(1):\n"";e={};var k,m;if(c)for(k=/([?&]?([^=&+]+))(=([^&]+))?/g;m=k.exec(c);)e[decodeURIComponent(m[2])]=m[4]?decodeURIComponent(m[4]):void 0;return new f(a,g,h,e,isNaN(+b)?void 0:+b,d&&0<d.length?d.substr(1):"")}Y.parse=Ze;Y.prototype.clone=function(){var a={},b;for(b in this.a)a[b]=this.a[b];return new Y(this.i,this.g,this.b,a,this.f,this.c)};Y.prototype.clone=Y.prototype.clone;\nY.prototype.Ja=function(a){if(!a||"string"!==typeof a)throw new z(this.Ja,0,\'The "scheme" parameter must be a non-empty string.\');this.i=a;return this};Y.prototype.setScheme=Y.prototype.Ja;Y.prototype.Fb=function(){return this.i};Y.prototype.getScheme=Y.prototype.Fb;Y.prototype.ja=function(a){if(!a||"string"!==typeof a||"-"===a.charAt(0)||"."===a.charAt(0)||"."===a.charAt(a.length-1))throw new z(this.ja,0,\'The "host" parameter is not a valid host name.\');this.g=a;return this};\nY.prototype.setHost=Y.prototype.ja;Y.prototype.xb=function(){return this.g};Y.prototype.getHost=Y.prototype.xb;Y.prototype.Ha=function(a){this.b=a||void 0;return this};Y.prototype.setPath=Y.prototype.Ha;Y.prototype.Cb=function(){return this.b};Y.prototype.getPath=Y.prototype.Cb;Y.prototype.ka=function(a){if(a)if("object"==typeof a)this.a=a;else throw new z(this.ka,0,\'Parameter "params" must be an object.\');else this.a={};return this};Y.prototype.setQuery=Y.prototype.ka;Y.prototype.Jb=function(){return!$e(this)};\nY.prototype.hasQuery=Y.prototype.Jb;Y.prototype.getQuery=function(){return this.a};Y.prototype.getQuery=Y.prototype.getQuery;Y.prototype.Ia=function(a){if(void 0===a)this.f=a;else{var b=Nb(+a<<0,0,65535);if(b!=a)throw new z(this.Ia,0,\'Parameter "port" must be an integer in range [0...65535]\');this.f=b}return this};Y.prototype.setPort=Y.prototype.Ia;Y.prototype.Db=function(){return this.f};Y.prototype.getPort=Y.prototype.Db;Y.prototype.ab=function(a){this.c=a||void 0;return this};\nY.prototype.setAnchor=Y.prototype.ab;Y.prototype.tb=function(){return this.c};Y.prototype.getAnchor=Y.prototype.tb;Y.prototype.P=function(a){if("object"!==typeof a)throw new z(this.P,0,\'Parameter "other" must be an object.\');var b=this.a,c;for(c in a)a.hasOwnProperty(c)&&"function"!==typeof a[c]&&(b[c]=a[c]);return this};Y.prototype.mergeQuery=Y.prototype.P;\nY.prototype.Ma=function(a){if(!a||"string"!==typeof a)throw new z(this.Ma,0,\'Parameter "subDomain" must be a non-empty string\');"."===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.ja(a+"."+this.g)};Y.prototype.addSubDomain=Y.prototype.Ma;Y.prototype.Na=function(a){if(!a||"string"!==typeof a)throw new z(this.Na,0,\'Parameter "subPath" must be a non-empty string\');return this.Ha((this.b?this.b+"/":"")+a)};Y.prototype.addSubPath=Y.prototype.Na;\nY.prototype.toString=function(){return[this.i+"://",this.g,this.f?":"+this.f:"",this.b||!$e(this)||this.c?"/":"",this.b?encodeURI(this.b):"",af(this),this.c?"#"+encodeURIComponent(this.c):""].join("")};Y.prototype.toString=Y.prototype.toString;\nfunction af(a){function b(g,h){return encodeURIComponent(g)+(void 0===h?"":"="+encodeURIComponent(h).replace(/[!\'()*]/g,function(k){return"%"+k.charCodeAt(0).toString(16)}))}var c=[],d,e=a.a;for(d in e)if(e.hasOwnProperty(d)&&"function"!==typeof e[d]){var f=a.a[d];Na(f,bf)?f.a.forEach(function(g){c.push(b(d,g))}):c.push(b(d,f))}return 0<c.length?"?"+c.join("&"):""}function $e(a){var b,c=0;for(b in a.a)if(a.a.hasOwnProperty(b)&&"function"!==typeof a.a[b]&&(c++,0<c))break;return!c}\nfunction bf(a){var b;if(!Oa(a,void 0,void 0,void 0))throw new z(bf,0,a);for(b=0;b<a.length;b++){var c=a[b];if(!Qa(c)&&!Sa(c))throw new z(bf,0,"The array can only contain strings and numbers");}this.a=a}Y.MultiValueQueryParameter=bf;bf.prototype.Hb=function(){return this.a};bf.prototype.getValues=bf.prototype.Hb;var cf={};function df(a){try{importScripts.apply(self,arguments)}catch(b){this.postError("invalid_script")}}function ef(a){delete cf[a];this.postMessage(a)}function ff(a,b,c){if(r(b))var d=b;else try{d=self.eval("("+b+")"),r(d)||(d=null)}catch(e){}d?(cf[a]=d,c||this.postMessage(a)):this.postError("invalid_processor")}function gf(a){this.b=a&&a[0];this.a=a&&a[1];this.c=a&&a[2]||[]}gf.prototype.postError=function(a){this.postMessage(a,x,0)};\ngf.prototype.postMessage=function(a,b,c){self.postMessage({processor:this.b,taskId:this.a,type:c===x?1:c,data:a},b||x)};function hf(a,b,c){if(!Qa(a))throw new z(hf,0,"InvalidArgument");if(!r(b))throw new z(hf,1,"InvalidArgument");var d=jf++;kf[d]={mimeType:c||lf,nb:b};(new gf(["3",d,[]])).postMessage(a,[],2)}var kf={},jf=0;\nfunction mf(a,b){var c=a;if(kf[this.a]){var d=kf[this.a];var e=d.nb;delete kf[this.a];if(b)e(null,b);else{if(d.mimeType===nf){a=new Uint8Array(a);b=a.byteLength;d="";c=0;for(var f,g,h,k;c<b;)f=a[c++],192>f||(g=a[c++],224>f?f=(f&31)<<6|g&63:(h=a[c++],240>f?f=(f&15)<<12|(g&63)<<6|h&63:(k=a[c++],f=(f&7)<<18|(g&63)<<12|(h&63)<<6|k&63))),65536>f?d+=String.fromCharCode(f):(f-=65536,d+=String.fromCharCode((f>>10)+55296,(f&1023)+56320));c=d}e(c)}}}var lf=0,nf=1;function V(a,b,c,d){of(this,Le(a,V,0),Me(b,V,1),Le(c,V,2),Me(d,V,3))}wa(V,R);t("H.geo.Rect",V);V.prototype.ma="Polygon";V.prototype.cb=function(a){var b=this.f,c=this.a,d=this.c,e=this.b;a.push("(","(",c," ",b,",",e," ",b,",",e," ",d,",",c," ",d,",",c," ",b,")",")");return a};V.prototype.D=function(a){var b=this===a;!b&&Na(a,V)&&(b=this.f===a.f&&this.a===a.a&&this.c===a.c&&this.b===a.b);return b};V.prototype.equals=V.prototype.D;\nV.prototype.clone=function(){return new V(this.f,this.a,this.c,this.b)};V.prototype.clone=V.prototype.clone;function of(a,b,c,d,e){a.a=c;a.b=e;b<d&&(c=b,b=d,d=c);a.f=b;a.c=d;a.j=a.g=a.i=null;return a}V.prototype.Ra=function(){this.j||(this.j=new S(this.f,this.a));return this.j};V.prototype.getTopLeft=V.prototype.Ra;V.prototype.Qa=function(){this.g||(this.g=new S(this.c,this.b));return this.g};V.prototype.getBottomRight=V.prototype.Qa;V.prototype.Gb=function(){return this.f};V.prototype.getTop=V.prototype.Gb;\nV.prototype.ub=function(){return this.c};V.prototype.getBottom=V.prototype.ub;V.prototype.zb=function(){return this.a};V.prototype.getLeft=V.prototype.zb;V.prototype.Eb=function(){return this.b};V.prototype.getRight=V.prototype.Eb;V.prototype.F=function(){this.i||(this.i=new S(this.c+(this.f-this.c)/2,pf(this.a,this.I())));return this.i};V.prototype.getCenter=V.prototype.F;V.prototype.I=function(){return qf(this.a,this.b)};V.prototype.getWidth=V.prototype.I;\nV.prototype.N=function(){return this.f-this.c};V.prototype.getHeight=V.prototype.N;V.prototype.Mb=function(){return this.a>this.b};V.prototype.isCDB=V.prototype.Mb;V.prototype.Ob=function(){return!this.I()&&!this.N()};V.prototype.isEmpty=V.prototype.Ob;V.prototype.W=function(){return new V(this.f,this.a,this.c,this.b)};V.prototype.getBoundingBox=V.prototype.W;\nV.prototype.da=function(a,b,c){var d=this.F();c||(a=Le(a,this.da,0),b=Me(b,this.da,1));b=this.J(a,b,c);a=b.F();return a.lat===d.lat&&a.lng===d.lng&&this.N()===b.N()&&this.I()===b.I()};V.prototype.containsLatLng=V.prototype.da;V.prototype.ea=function(a,b){b||Oe(a,this.ea,0);return this.da(a.lat,a.lng,b)};V.prototype.containsPoint=V.prototype.ea;\nV.prototype.Pa=function(a,b){var c=this.F();if(!b&&!Na(a,V))throw new z(this.Pa,0,a);b=this.ia(a,b);a=b.F();return a.lat===c.lat&&a.lng===c.lng&&this.N()===b.N()&&this.I()===b.I()};V.prototype.containsRect=V.prototype.Pa;V.prototype.J=function(a,b,c,d){if(!c){if(Ra(a=Le(a)))throw new z(this.J,0,a);if(Ra(b=Me(b)))throw new z(this.J,1,b);}return rf(this.f,this.a,this.c,this.b,a,b,a,b,d)};V.prototype.mergeLatLng=V.prototype.J;\nV.prototype.Xa=function(a,b,c){b||Oe(a,this.Xa,0);return this.J(a.lat,a.lng,b,c)};V.prototype.mergePoint=V.prototype.Xa;V.prototype.ia=function(a,b,c){if(!b&&!Na(a,V))throw new z(this.ia,0,a);return rf(this.f,this.a,this.c,this.b,a.f,a.a,a.c,a.b,c)};V.prototype.mergeRect=V.prototype.ia;V.prototype.Z=function(a,b,c,d,e,f){e||(a=Le(a,this.Z,0),b=Me(b,this.Z,1),c=Le(c,this.Z,2),d=Me(d,this.Z,3));return rf(this.f,this.a,this.c,this.b,a,b,c,d,f)};V.prototype.mergeTopLeftBottomRight=V.prototype.Z;\nV.prototype.Ua=function(a,b){var c=this.a<=this.b,d=a.a<=a.b,e=this.a<a.b,f=a.a<this.b;if(!b&&!Na(a,V))throw new z(this.Ua,0,a);return this.c<=a.f&&a.c<=this.f&&(!c&&(!d||e||f)||!d&&(e||f)||e&&f)};V.prototype.intersects=V.prototype.Ua;function qf(a,b){a=b-a;return a+(0>a?360:0)}function pf(a,b){a+=b/2;return a-(180<a?360:0)}\nfunction rf(a,b,c,d,e,f,g,h,k){c=nb(c,g);a=ob(a,e);e=qf(b,d);var m=pf(b,e);g=qf(f,h);var n=pf(f,g)-m;n+=0>n-1E-6?360:0;if(180>n-1E-6){m=b;var q=h}else n=360-n,m=f,q=d;n=n+e/2+g/2;360<=n+5E-7?(m=-180,q=180):n-5E-7<e?(m=b,q=d):n-5E-7<g&&(m=f,q=h);return k?of(k,a,m,c,q):new V(a,m,c,q)}V.merge=rf;function sf(a,b,c){c||(Oe(a,sf,0),Oe(b,sf,1));return new V(a.lat,a.lng,b.lat,b.lng)}V.fromPoints=sf;\nfunction tf(a,b){var c=1,d=a.length,e=null;var f=na(a);if("array"!=f&&("object"!=f||"number"!=typeof a.length))throw new z(tf,0,a);if(0<d)for(f=a[0],e=sf(f,f,b);c<d;c++)f=a[c],e.J(f.lat,f.lng,b,e);return e}V.coverPoints=tf;function uf(a,b){var c=3,d=a.length,e;if(!(b||a&&null!=a.length))throw new z(uf,0,a);if(0<d)for(e=new V(a[0],a[1],a[0],a[1]);c<d;c+=3)e.J(a[c],a[c+1],b,e);return e}V.coverLatLngAlts=uf;\nfunction vf(a,b){var c=1,d=a.length,e;if(b&&(!a||null==a.length))throw new z(vf,0,a);if(0<d)for(e=new V(a[0].f,a[0].a,a[0].c,a[0].b);c<d;c++)e.ia(a[c],b,e);return e}V.coverRects=vf;\nV.prototype.Za=function(a,b){var c=this.a,d=this.f,e=this.b,f=this.c,g=this.F().lng;Oe(a,this.Za,0);var h=a.lat-f-(d-f)/2;var k=a.lng-g;k=180<k||-180>k?-(g+a.lng):k;a=c+(0>k?2*k:0);a=-180>a?360+a:a;e+=0<k?2*k:0;e=180<e?e-360:e;d=0<h?d+2*h:d;90<=d&&(d=90);f=0>h?f+2*h:f;-90>=f&&(f=-90);return b?of(b,d,a,f,e):new V(d,a,f,e)};V.prototype.resizeToCenter=V.prototype.Za;V.prototype.ta="Polygon";\nV.prototype.bb=function(){return[[this.a,this.f,0],[this.b,this.f,0],[this.b,this.c,0],[this.a,this.c,0],[this.a,this.f,0]]};V.prototype.ra=function(){return this.sa()};V.prototype.sa=function(){return[this.f,this.a,this.c,this.b]};function wf(a,b,c,d){this.key="";this.x=a;this.y=b;this.b=c;this.X=d;this.a=Ad()}wf.prototype.then=function(a,b,c){return this.a.a.then(a,b,c)};wf.prototype.reject=function(a){this.a.reject(a)};wf.prototype.cancel=function(){this.a.a.cancel()};wf.prototype.cancel=wf.prototype.cancel;function xf(a,b,c,d){var e=!!c,f,g=0,h=0,k=0,m=0,n=0,q,u=-1;var I=Ca.Float32Array;var L,w=[];if(b){b=Ja(b);a=Ja(a);e&&(f=Ja(c));c=b.length;d=d?1E-7:1E-5;for(L=new I(3*c);g<c;){I=b[g];var G=+I;var X=+a[g];e&&(q=+f[g]);yf.test(I)?0<=u&&(0<g-u&&w.push(u,g+1),u=-1):0>u&&(u=g);g++;m=L[h++]=m+X*d;k=L[h++]=k+G*d;e&&(n=L[h]=n+q);h++}0<=u&&1<c-u&&w.push(u,c)}else L=new I(0);return{path:L,outlineIndices:w}}var yf=/^-?0\\d/;\nfunction zf(a,b){for(var c=0,d=a.length/3,e=new Ca.Array(d),f=0;c<d;)e[c++]=b.za(a[f],a[++f]),f+=2;return e};function Af(a,b){b=180/(1<<b);var c=a.lat+90;a=(a.lng+180)%360;var d=0;180==c&&d--;d+=Math.floor(c/b);return[d,Math.floor(a/b)]}var Bf=1/Math.pow(10,10);function Cf(a,b){var c=[],d=a.Ra();a=a.Qa();var e;180==a.lng&&(a.lng-=Bf);d=Af(d,b);a=Af(a,b);for(e=d[0];e>=a[0];e--)for(b=d[1];b<=a[1];b++)c.push(e,b);return c};function Df(a,b){var c=a.tileSize||256;this.b={};this.j=Ze(a.serverUrl);this.g=b;this.eb=a.layerConfigs||[];this.i=a.projected;this.O=c;this.Ca=!1!==a.batchTiles;this.$b=a.horizontalMargin||0;this.fb=a.onlyOutline;this.hb=new W(x,c);this.f=new W(x,c);this.f.aa(22-Math.log(c)/Math.LN2+8)}wa(Df,J);\nDf.prototype.jb=function(a,b,c){var d=this.O,e=this.$b,f={x:a*d-e,y:b*d};d={x:(a+1)*d-1+e,y:(b+1)*d-1};e=this.hb;e.aa(c);f=e.Da(f);d=e.Da(d);return Ef(this,new V(f.lat,f.lng,d.lat,d.lng),this.eb,{x:a,y:b,z:c})};Df.prototype.ib=function(a,b,c,d,e){return Ef(this,new V(a,b,c,d),e)};\nfunction Ef(a,b,c,d){var e=Ff(c),f=e.length,g={},h,k=a.b,m=[],n=[];for(c=0;c<f;c++){var q=e[c];var u=q.layerId;var I=q.level;g[u]=q.columns;q=Cf(b,I);var L=q.length-1;for(h=0;h<L;h+=2){var w=[u,q[h+1],q[h],I].join("_");var G=k[w]||a.g.get(w);G||(G=new wf(q[h+1],q[h],I,u),G.key=w,k[w]=G,n.push(G));m.push(G)}}n.length&&(a.Ca?Gf(a,n):Hf(a,n));return zd(m.map(function(X){return X.then(Fa(this.Ea,this,X.X,If(e))).then(Fa(this.gb,this,X,d||Jf)).then(Fa(this.Zb,this,g[X.X]))},a))}var Jf={x:0,y:0,z:0};\nDf.prototype.Ea=function(a,b,c){var d=c.Rows,e=d.length,f,g;if(e&&(f=b[a])){b=new C(c.Rows);var h=[];for(g=0;g<e;g++){var k=d[g];f(b.fa(g),a)&&h.push(k)}a={Rows:h};if(c=c.Meta)a.Meta=c}else a=c;return a};function Hf(a,b){function c(k,m,n){n?(delete a.b[k.key],k.reject(n)):Kf(a,k,m)}var d,e=b.length,f=a.j;for(d=0;d<e;d++){var g=b[d];var h=f.clone().P({tilex:g.x}).P({tiley:g.y}).P({level:g.b}).P({layer:g.X});new hf(h.toString(),Fa(c,null,g),nf)}}\nfunction Gf(a,b){var c=b.length,d;for(d=0;d<c;d+=15){var e=b.slice(d,d+15);Lf(a,e)}}function Lf(a,b){var c=a.j.clone(),d=[],e=[],f=[],g=c.getQuery();b.length&&(b.forEach(function(h){d.push(h.x,h.y);e.push(h.b);f.push(h.X)}),g.tilexy=d.join(","),g.layers=f.join(","),g.levels=e.join(","),c.ka(g),new hf(c.toString(),function(h,k){k?b.forEach(function(m){delete a.b[m.key];m.reject("error")}):Kf(a,b,h)},nf))}\nfunction Kf(a,b,c){var d=b.length,e;if(Oa(b,void 0,void 0,void 0)){var f=c.indexOf("[")+1;for(e=0;e<d;e++){var g=c.indexOf("]},{",f+3)+2;g<f&&(g=c.lastIndexOf("]}"));var h=c.substr(f,g-f);f=g+1;Mf(a,b[e],h)}}else Mf(a,b,c)}function Mf(a,b,c){try{var d=c.length;var e=b.key;delete a.b[e];a.g.add(e,b,2*d);var f=JSON.parse(c);b.a.b(f)}catch(g){b.reject(g.message)}}\nfunction If(a){var b={},c,d=a.length;for(c=0;c<d;c++){var e=a[c];if(e.rowFilter){var f=e.layerId;f=f!==x?f:e.layer;b[f]=Fa(e.rowFilter,e.rowFilterContext)}}return b}function Nf(a,b,c,d,e){return e?[new F(a,b),new F(c,b),new F(c,d),new F(a,d),new F(a,b)]:[a,b,c,b,c,d,a,d]}\nDf.prototype.gb=function(a,b,c){var d=this.f.Sa()-b.z,e=this.O<<d,f=50<<d,g=b.x*e;b=b.y*e;var h=g+e;e=b+e;var k=g-f,m=b-f,n=h+f;f=e+f;var q,u,I=c.Rows,L=I.length,w,G=/^ADAS/.test(a.X),X=this.f,qa=this.fb,O,bb=[],Ka=[],La=[],cb=[];for(a=0;a<L;a++){var y=w=I[a];var T=(O=G)?"HPY":"LAT";var U=O?"HPX":"LON";var da=O?"HPZ":"ZLEVEL";if(y[T]){var P=xf(y[T],y[U],y[da],O);y.geometry=P;delete y[T];delete y[U];delete y[da];if(y.INNER_LAT)for(T=y.INNER_LAT.split(";"),P=y.INNER_LON.split(";"),delete y.INNER_LAT,\ndelete y.INNER_LON,y.interiors=da=[],U=T.length,y=0;y<U;y++)da.push(xf(T[y],P[y],"",O))}if(this.i){U=w;y=X;P=U.$$projected$$;T=0;if(!P){var Z=U.geometry;O=zf(Z.path,y);w=[O];U.$$projected$$=P={Rb:w};U=(da=U.interiors)?da.length:0;w.length+=U;T|=+Of(w,O,Z.outlineIndices);if(U)for(P.Kb=1,q=0;q<U;q++)Z=da[q],O=zf(Z.path,y),w[1+q]=O,T|=+Of(w,O,Z.outlineIndices);T&&(P.Pb=1+U)}y=P;O=y.Rb;w=y.Kb;var Dc=y.Pb;P=[];T=U=Lb;var db=da=x;y=O[0];if(1===y.length){var Ec=Ec||(Ec=Nf(g,b,h,e,!1));w=y[0];Rb(w.x,w.y,\nEc)&&P.push(Pf(y,g,b,d))}else{var Ee=O.length;for(Z=qa?Dc:0;Z<Ee&&(qa||!Z||P.length);Z++)if(y=O[Z],Z>=Dc){Z===Dc&&(T=P.length);var ia=Ub([y],k,m,n,f,!1);Qf(ia,g,b,d,P)}else{var Hb=Hb||(Hb=Nf(k,m,n,f,!0));if(Z>=w)if(Z===w&&(U=P.length),db)for(q=db.length;q--;){if(ia=Rf(db[q],y),u=ia.length){for(da=da||[];u--;)da.push(q);Qf(ia,g,b,d,P)}}else ia=Rf(Hb,y),Qf(ia,g,b,d,P);else if(ia=Rf(Hb,y),Qf(ia,g,b,d,P),1<ia.length&&w<Ee)for(db=[],q=ia.length;q--;)db[q]=ia[q]}}P.length&&(bb[a]=P,Ka[a]=U,La[a]=da,cb[a]=\nT)}}return{Xb:c,ob:bb,Lb:Ka,qb:La,Qb:cb}};function Of(a,b,c){for(var d=c.length,e=0,f,g,h=b.length;e<d;)f=c[e++],g=c[e++],a.push(g-f===h?b:b.slice(f,g));return 0<c.length}function Rf(a,b){var c,d=[];if(c=Wb(a,b)){do{a=[];b=c;do a.push(b);while(b=b.next);d.push(a)}while(c=c.Ya)}else Sb(b[0],Tb(a))?d.push(b):Sb(a[0],Tb(b))&&d.push(a);return d}function Qf(a,b,c,d,e){for(var f=0,g=a.length;f<g;f++)e.push(Pf(a[f],b,c,d))}\nfunction Pf(a,b,c,d){var e,f=a.length,g=new Int32Array(2*f),h=0;for(e=0;e<f;e++){var k=a[e];g[h++]=k.x-b>>d;g[h++]=k.y-c>>d}return g}\nDf.prototype.Zb=function(a,b){var c=b.Xb,d=b.ob,e=b.Lb,f=b.Qb;b=b.qb;for(var g=[],h,k={Rows:g},m,n=a?a.length:0,q=0,u,I=c.Rows,L=I.length,w;q<L;q+=1)if(d[q]||!this.i){h={};u=I[q];if(n)for(m=0;m<n;m++)u.hasOwnProperty(a[m])&&(h[a[m]]=u[a[m]]);else for(w in u)"$$projected$$"!==w&&(h[w]=u[w]);u.geometry&&(h.geometry=u.geometry);m=void 0;var G,X=h,qa=d[q],O=e[q],bb=b[q],Ka=f[q],La=g;if(qa){var cb=qa.length;if(bb)for(G=O;G--;){if(G){var y={};for(m in X)y[m]=X[m]}else y=X;u=[qa[G]];var T=nb(cb,Ka)-O;for(h=\n0;h<T;h++)bb[h]===G&&u.push(qa[O+h]);T=u.length;if(!G)for(h=Ka;h<cb;h++)u.push(qa[h]);y.$HProjGeometry={paths:u,interiorsIndex:1,outlinesIndex:T};La.push(y)}else X.$HProjGeometry={paths:qa,interiorsIndex:O,outlinesIndex:Ka},La.push(X)}else La.push(X)}c.Meta&&(k.Meta=c.Meta);return k};Df.prototype.v=function(){var a,b=this.b;for(a in b)b.hasOwnProperty(a)&&(b[a].reject("disposed"),delete b[a])};Df.prototype.disposeInternal=Df.prototype.v;\nfunction Ff(a){for(var b=[],c,d=a.length,e=0;e<d;e++){c=za(a[e]);if(c.rowFilter&&(c.rowFilter=eval("("+c.rowFilter+")"),!r(c.rowFilter)))throw Error("Invalid row filter for layer "+c.layerId);b.push(c)}return b};t("H.service.extension.worker.processor",function(a,b,c){function d(h){e.postMessage(h)}var e=this,f=ya[a];var g=function(h){e.postError(h.toString())};if(0===b)f||(ya[a]=new Df(c,Sf)),this.postMessage(void 0);else if(f)switch(b){case 1:try{f.jb.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 2:try{f.ib.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 3:f.s();delete ya[a];xa()&&Sf.R();break;default:e.postError("Unsupported command")}});\nvar Sf=new A(26214400),ya=Object.create(Ia,void 0);function Tf(a,b,c){var d=a[b];a=a[b+1];this.Ta=[];this.Ka=0;this.b=b;this.a=[a-c,d-c,a+c,d+c]}Tf.prototype.ea=function(a,b){var c=a[b];a=a[b+1];b=this.a;return b[1]<=c&&c<=b[3]&&b[0]<=a&&a<=b[2]};Tf.prototype.F=function(){return this.b};var Uf=new F(0,0);function Vf(a,b,c,d,e){d[e]=b;d[e+1]=a}var Wf=new W;function Xf(a,b,c,d,e){Wf.za(a,b,Uf);d[e]=Uf.x;d[e+1]=Uf.y}\nt("H.clustering.dynamicgrid.worker",function(a,b,c,d,e){var f=e?Vf:Xf,g=0;e=!!self.ArrayBuffer;var h=a.byteLength?new Float64Array(a):a,k=h.length/3;a=[];var m=[],n=[],q=e?new Float64Array(2*k):[];k=0;var u=0;for(Wf.aa(d);g<h.length;){var I=h[g++];var L=h[g++];var w=h[g++];f(w,L,d,q,u);for(w=a.length;w--;)if(L=a[w],L.ea(q,u)){var G=L;break}G||(G=new Tf(q,u,b),a.push(G));w=u/2;G.Ka+=I||1;G.Ta.push(w);G=null;u+=2}for(w=a.length;w--;)L=a[w],b=L.Ka>=c,f=L.Ta,d=f.length,b?(m.push(d),m=m.concat(f)):\n(k+=d,n=n.concat(f));c=[k].concat(n,m);c=e?(new Uint32Array(c)).buffer:c;this.postMessage(c,[c])});self.addEventListener("message",function(a){a=new gf(a.data);var b=cf[a.b];if(b)try{b.apply(a,a.c)}catch(c){a.postError(c.message)}else a.postError("processor_not_found")});(function(){var a=new gf;var b=function(c,d){ff.apply(a,[c,d,!0])};b("0",df);b("1",ff);b("2",ef);b("3",mf)})();\n',function t(){var e,r,n;"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope||!(module.exports||"undefined"!=typeof window)||(e=t.toString(),r="",n="undefined"!=typeof document&&document.currentScript instanceof HTMLScriptElement?document.currentScript.src:""),function(){function t(t){return i.call(t).slice(8,-1)}var i={}.toString,o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(t,e){return t(e={exports:{}},e.exports),e.exports}function s(t){return t&&t.Math==Math&&t}function l(t){try{return!!t()}catch(t){return!0}}function u(t){return"object"==typeof t?null!==t:"function"==typeof t}function c(t){return w?_.createElement(t):{}}function h(t){if(!u(t))throw TypeError(String(t)+" is not an object");return t}function f(t,e){if(!u(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!u(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!u(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!u(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")}function p(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function A(t,e){try{C(m,t,e)}catch(o){m[t]=e}return e}function d(t){return"Symbol(".concat(void 0===t?"":t,")_",(++k+T).toString(36))}function g(t){return L[t]||(L[t]=N&&I[t]||(N?I:d)("Symbol."+t))}function y(e){var r,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(r=Object(e),M))?n:O?t(r):"Object"==(i=t(r))&&"function"==typeof r.callee?"Arguments":i}var v="object",m=s(typeof globalThis==v&&globalThis)||s(typeof window==v&&window)||s(typeof self==v&&self)||s(typeof o==v&&o)||Function("return this")(),b=!l((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),_=m.document,w=u(_)&&u(_.createElement),x=!b&&!l((function(){return 7!=Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a})),E=Object.defineProperty,B={f:b?E:function(t,e,r){if(h(t),e=f(e,!0),h(r),x)try{return E(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},C=b?function(t,e,r){return B.f(t,e,p(1,r))}:function(t,e,r){return t[e]=r,t},S=a((function(t){var e="__core-js_shared__",r=m[e]||A(e,{});(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.1.0",mode:"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})})),k=0,T=Math.random(),N=!l((function(){return!String(Symbol())})),L=S("wks"),I=m.Symbol,M=g("toStringTag"),O="Arguments"==t(function(){return arguments}()),P={};function F(t,e){return Y.call(t,e)}function U(t){return Z[t]||(Z[t]=d(t))}P[g("toStringTag")]="z";var R,D,j,Q,z,V,G,q,K="[object z]"!==String(P)?function(){return"[object "+y(this)+"]"}:P.toString,Y={}.hasOwnProperty,W=S("native-function-to-string",Function.toString),X=m.WeakMap,J="function"==typeof X&&/native code/.test(W.call(X)),Z=S("keys"),$={},tt=m.WeakMap;G=J?(R=new tt,D=R.get,j=R.has,Q=R.set,z=function(t,e){return Q.call(R,t,e),e},V=function(t){return D.call(R,t)||{}},function(t){return j.call(R,t)}):(q=U("state"),$[q]=!0,z=function(t,e){return C(t,q,e),e},V=function(t){return F(t,q)?t[q]:{}},function(t){return F(t,q)});var et={set:z,get:V,has:G,enforce:function(t){return G(t)?V(t):z(t,{})},getterFor:function(t){return function(e){var r;if(!u(e)||(r=V(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}},rt=a((function(t){var e=et.get,r=et.enforce,n=String(W).split("toString");S("inspectSource",(function(t){return W.call(t)})),(t.exports=function(t,e,i,o){var a=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable,l=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||F(i,"name")||C(i,"name",e),r(i).source=n.join("string"==typeof e?e:"")),t!==m?(a?!l&&t[e]&&(s=!0):delete t[e],s?t[e]=i:C(t,e,i)):s?t[e]=i:A(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||W.call(this)}))})),nt=Object.prototype;function it(t){return isNaN(t=+t)?0:(0<t?dt:At)(t)}function ot(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function at(t){return bt(ot(t))}function st(t){return 0<t?xt(it(t),9007199254740991):0}function lt(t,e){var r,n=at(t),i=0,o=[];for(r in n)!F($,r)&&F(n,r)&&o.push(r);for(;e.length>i;)F(n,r=e[i++])&&(~Ct(o,r)||o.push(r));return o}function ut(t,e){var r=Pt[Ot(t)];return r==Ut||r!=Ft&&("function"==typeof e?l(e):!!e)}function ct(t,e){var r,n,i,o,a=t.target,s=t.global,l=t.stat,u=s?m:l?m[a]||A(a,{}):(m[a]||{}).prototype;if(u)for(r in e){if(i=e[r],n=t.noTargetGet?(o=Dt(u,r))&&o.value:u[r],!Rt(s?r:a+(l?".":"#")+r,t.forced)&&void 0!==n){if(typeof i==typeof n)continue;!function(t,e){for(var r=It(e),n=B.f,i=wt.f,o=0;o<r.length;o++){var a=r[o];F(t,a)||n(t,a,i(e,a))}}(i,n)}(t.sham||n&&n.sham)&&C(i,"sham",!0),rt(u,r,i,t)}}K!==nt.toString&&rt(nt,"toString",K,{unsafe:!0});var ht,ft,pt,At=Math.ceil,dt=Math.floor,gt={}.propertyIsEnumerable,yt=Object.getOwnPropertyDescriptor,vt={f:yt&&!gt.call({1:2},1)?function(t){var e=yt(this,t);return!!e&&e.enumerable}:gt},mt="".split,bt=l((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==t(e)?mt.call(e,""):Object(e)}:Object,_t=Object.getOwnPropertyDescriptor,wt={f:b?_t:function(t,e){if(t=at(t),e=f(e,!0),x)try{return _t(t,e)}catch(t){}if(F(t,e))return p(!vt.f.call(t,e),t[e])}},xt=Math.min,Et=Math.max,Bt=Math.min,Ct=(!1,function(t,e,r){for(var n,i,o=at(t),a=st(o.length),s=(n=a,(i=it(r))<0?Et(i+n,0):Bt(i,n));s<a;s++)if(s in o&&o[s]===e)return s||0;return-1}),St=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],kt=St.concat("length","prototype"),Tt={f:Object.getOwnPropertyNames||function(t){return lt(t,kt)}},Nt={f:Object.getOwnPropertySymbols},Lt=m.Reflect,It=Lt&&Lt.ownKeys||function(t){var e=Tt.f(h(t)),r=Nt.f;return r?e.concat(r(t)):e},Mt=/#|\.prototype\./,Ot=ut.normalize=function(t){return String(t).replace(Mt,".").toLowerCase()},Pt=ut.data={},Ft=ut.NATIVE="N",Ut=ut.POLYFILL="P",Rt=ut,Dt=wt.f,jt=!l((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Ht=U("IE_PROTO"),Qt=Object.prototype,zt=jt?Object.getPrototypeOf:function(t){return F(t=Object(ot(t)),Ht)?t[Ht]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Qt:null},Vt=g("iterator"),Gt=!1;function qt(){}[].keys&&("next"in(pt=[].keys())?(ft=zt(zt(pt)))!==Object.prototype&&(ht=ft):Gt=!0),null==ht&&(ht={}),F(ht,Vt)||C(ht,Vt,(function(){return this}));var Kt={IteratorPrototype:ht,BUGGY_SAFARI_ITERATORS:Gt},Yt=Object.keys||function(t){return lt(t,St)},Wt=b?Object.defineProperties:function(t,e){h(t);for(var r,n=Yt(e),i=n.length,o=0;o<i;)B.f(t,r=n[o++],e[r]);return t},Xt=m.document,Jt=Xt&&Xt.documentElement,Zt=U("IE_PROTO"),$t="prototype",te=function(){var t,e=c("iframe"),r=St.length;for(e.style.display="none",Jt.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),te=t.F;r--;)delete te[$t][St[r]];return te()},ee=Object.create||function(t,e){var r;return null!==t?(qt[$t]=h(t),r=new qt,qt[$t]=null,r[Zt]=t):r=te(),void 0===e?r:Wt(r,e)};function re(t,e,r){t&&!F(t=r?t:t.prototype,se)&&ae(t,se,{configurable:!0,value:e})}function ne(){return this}function ie(){return this}function oe(t,e,r,n,i,o,a){var s,l,u;function c(t){if(t===i&&m)return m;if(!pe&&t in y)return y[t];switch(t){case"keys":case Ae:case de:return function(){return new r(this,t)}}return function(){return new r(this)}}l=n,u=e+" Iterator",(s=r).prototype=ee(ue,{next:p(1,l)}),re(s,u,!1),le[u]=ne;var h,f,A,d=e+" Iterator",g=!1,y=t.prototype,v=y[he]||y["@@iterator"]||i&&y[i],m=!pe&&v||c(i),b="Array"==e&&y.entries||v;if(b&&(h=zt(b.call(new t)),fe!==Object.prototype&&h.next&&(zt(h)!==fe&&(ce?ce(h,fe):"function"!=typeof h[he]&&C(h,he,ie)),re(h,d,!0))),i==Ae&&v&&v.name!==Ae&&(g=!0,m=function(){return v.call(this)}),y[he]!==m&&C(y,he,m),le[e]=m,i)if(f={values:c(Ae),keys:o?m:c("keys"),entries:c(de)},a)for(A in f)!pe&&!g&&A in y||rt(y,A,f[A]);else ct({target:e,proto:!0,forced:pe||g},f);return f}$[Zt]=!0;var ae=B.f,se=g("toStringTag"),le={},ue=Kt.IteratorPrototype,ce=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),e=r instanceof Array}catch(r){}return function(r,n){return function(t,e){if(h(t),!u(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(r,n),e?t.call(r,n):r.__proto__=n,r}}():void 0),he=g("iterator"),fe=Kt.IteratorPrototype,pe=Kt.BUGGY_SAFARI_ITERATORS,Ae="values",de="entries",ge="String Iterator",ye=et.set,ve=et.getterFor(ge);oe(String,"String",(function(t){ye(this,{type:ge,string:String(t),index:0})}),(function(){var t,e,r,n,i,o,a,s=ve(this),l=s.string,u=s.index;return u>=l.length?{value:void 0,done:!0}:(e=u,i=String(ot(l)),o=it(e),a=i.length,t=o<0||a<=o?"":(r=i.charCodeAt(o))<55296||56319<r||o+1===a||(n=i.charCodeAt(o+1))<56320||57343<n?i.charAt(o):i.slice(o,o+2),s.index+=t.length,{value:t,done:!1})}));var me={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},be=g("unscopables"),_e=Array.prototype;function we(t){_e[be][t]=!0}null==_e[be]&&C(_e,be,ee(null));var xe="Array Iterator",Ee=et.set,Be=et.getterFor(xe),Ce=oe(Array,"Array",(function(t,e){Ee(this,{type:xe,target:at(t),index:0,kind:e})}),(function(){var t=Be(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?{value:t.target=void 0,done:!0}:"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values");le.Arguments=le.Array,we("keys"),we("values"),we("entries");var Se=g("iterator"),ke=g("toStringTag"),Te=Ce.values;for(var Ne in me){var Le=m[Ne],Ie=Le&&Le.prototype;if(Ie){if(Ie[Se]!==Te)try{C(Ie,Se,Te)}catch(o){Ie[Se]=Te}if(Ie[ke]||C(Ie,ke,Ne),me[Ne])for(var Me in Ce)if(Ie[Me]!==Ce[Me])try{C(Ie,Me,Ce[Me])}catch(o){Ie[Me]=Ce[Me]}}}function Oe(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function Pe(t,e,r){if(Oe(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}var Fe=g("iterator"),Ue=Array.prototype,Re=g("iterator"),De=a((function(t){var e={};(t.exports=function(t,r,n,i,o){var a,s,l,u,c,f,p=Pe(r,n,i?2:1);if(o)a=t;else{if("function"!=typeof(s=function(t){if(null!=t)return t[Re]||t["@@iterator"]||le[y(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(f=s)&&(le.Array===f||Ue[Fe]===f)){for(l=0,u=st(t.length);l<u;l++)if((i?p(h(c=t[l])[0],c[1]):p(t[l]))===e)return e;return}a=s.call(t)}for(;!(c=a.next()).done;)if(function(t,e,r,n){try{return n?e(h(r)[0],r[1]):e(r)}catch(e){var i=t.return;throw void 0!==i&&h(i.call(t)),e}}(a,p,c.value,i)===e)return e}).BREAK=e})),je=g("iterator"),He=!1;try{var Qe=0;({next:function(){return{done:!!Qe++}},return:function(){He=!0}})[je]=function(){return this}}catch(o){}function ze(t,e){var r,n=h(t).constructor;return void 0===n||null==(r=h(n)[Je])?e:Oe(r)}function Ve(t){var e;or.hasOwnProperty(t)&&(e=or[t],delete or[t],e())}function Ge(t){return function(){Ve(t)}}function qe(t){Ve(t.data)}function Ke(t){m.postMessage(t+"",Ze.protocol+"//"+Ze.host)}var Ye,We,Xe,Je=g("species"),Ze=m.location,$e=m.setImmediate,tr=m.clearImmediate,er=m.process,rr=m.MessageChannel,nr=m.Dispatch,ir=0,or={},ar="onreadystatechange";$e&&tr||($e=function(t){for(var e=[],r=1;r<arguments.length;)e.push(arguments[r++]);return or[++ir]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Ye(ir),ir},tr=function(t){delete or[t]},"process"==t(er)?Ye=function(t){er.nextTick(Ge(t))}:nr&&nr.now?Ye=function(t){nr.now(Ge(t))}:rr?(Xe=(We=new rr).port2,We.port1.onmessage=qe,Ye=Pe(Xe.postMessage,Xe,1)):!m.addEventListener||"function"!=typeof postMessage||m.importScripts||l(Ke)?Ye=ar in c("script")?function(t){Jt.appendChild(c("script"))[ar]=function(){Jt.removeChild(this),Ve(t)}}:function(t){setTimeout(Ge(t),0)}:(Ye=Ke,m.addEventListener("message",qe,!1)));var sr,lr,ur,cr,hr,fr,pr,Ar={set:$e,clear:tr},dr=m.navigator,gr=dr&&dr.userAgent||"",yr=wt.f,vr=Ar.set,mr=m.MutationObserver||m.WebKitMutationObserver,br=m.process,_r=m.Promise,wr="process"==t(br),xr=yr(m,"queueMicrotask"),Er=xr&&xr.value;function Br(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n})),this.resolve=Oe(e),this.reject=Oe(r)}function Cr(t,e){if(h(t),u(e)&&e.constructor===t)return e;var r=zr.f(t);return(0,r.resolve)(e),r.promise}function Sr(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}function kr(t){return"function"==typeof t?t:void 0}function Tr(t,e){return arguments.length<2?kr(Vr[t])||kr(m[t]):Vr[t]&&Vr[t][e]||m[t]&&m[t][e]}function Nr(t){var e;return!(!u(t)||"function"!=typeof(e=t.then))&&e}function Lr(t,e,r){var n;e.notified||(e.notified=!0,n=e.reactions,Qr((function(){for(var i=e.value,o=1==e.state,a=0;n.length>a;)!function(r){var n,a,s,l=o?r.ok:r.fail,u=r.resolve,c=r.reject,h=r.domain;try{l?(o||(2===e.rejection&&dn(t,e),e.rejection=1),!0===l?n=i:(h&&h.enter(),n=l(i),h&&(h.exit(),s=!0)),n===r.promise?c($r("Promise-chain cycle")):(a=Nr(n))?a.call(n,u,c):u(n)):c(i)}catch(r){h&&!s&&h.exit(),c(r)}}(n[a++]);e.reactions=[],e.notified=!1,r&&!e.rejection&&pn(t,e)})))}function Ir(t,e,r){var n,i;un?((n=tn.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),m.dispatchEvent(n)):n={promise:e,reason:r},(i=m["on"+t])?i(n):t===cn&&function(t,e){var r=m.console;r&&r.error&&(1===arguments.length?r.error(t):r.error(t,e))}("Unhandled promise rejection",r)}function Mr(t,e,r,n){return function(i){t(e,r,i,n)}}function Or(t,e,r,n){e.done||(e.done=!0,n&&(e=n),e.value=r,e.state=2,Lr(t,e,!0))}Er||(sr=function(){var t,e;for(wr&&(t=br.domain)&&t.exit();lr;){e=lr.fn,lr=lr.next;try{e()}catch(t){throw lr?cr():ur=void 0,t}}ur=void 0,t&&t.enter()},cr=wr?function(){br.nextTick(sr)}:mr&&!/(iphone|ipod|ipad).*applewebkit/i.test(gr)?(hr=!0,fr=document.createTextNode(""),new mr(sr).observe(fr,{characterData:!0}),function(){fr.data=hr=!hr}):_r&&_r.resolve?(pr=_r.resolve(void 0),function(){pr.then(sr)}):function(){vr.call(m,sr)});var Pr,Fr,Ur,Rr,Dr,jr,Hr,Qr=Er||function(t){var e={fn:t,next:void 0};ur&&(ur.next=e),lr||(lr=e,cr()),ur=e},zr={f:function(t){return new Br(t)}},Vr=m,Gr=g("species"),qr="Promise",Kr=Ar.set,Yr=g("species"),Wr=et.get,Xr=et.set,Jr=et.getterFor(qr),Zr=m[qr],$r=m.TypeError,tn=m.document,en=m.process,rn=m.fetch,nn=en&&en.versions,on=nn&&nn.v8||"",an=zr.f,sn=an,ln="process"==t(en),un=!!(tn&&tn.createEvent&&m.dispatchEvent),cn="unhandledrejection",hn=Rt(qr,(function(){function t(){}var e=Zr.resolve(1),r=(e.constructor={})[Yr]=function(e){e(t,t)};return!((ln||"function"==typeof PromiseRejectionEvent)&&e.then(t)instanceof r&&0!==on.indexOf("6.6")&&-1===gr.indexOf("Chrome/66"))})),fn=hn||!function(t,e){if(!He)return!1;var r=!1;try{var n={};n[je]=function(){return{next:function(){return{done:r=!0}}}},function(t){Zr.all(t).catch((function(){}))}(n)}catch(t){}return r}(),pn=function(t,e){Kr.call(m,(function(){var r,n=e.value;if(An(e)&&(r=Sr((function(){ln?en.emit("unhandledRejection",n,t):Ir(cn,t,n)})),e.rejection=ln||An(e)?2:1,r.error))throw r.value}))},An=function(t){return 1!==t.rejection&&!t.parent},dn=function(t,e){Kr.call(m,(function(){ln?en.emit("rejectionHandled",t):Ir("rejectionhandled",t,e.value)}))},gn=function t(e,r,n,i){if(!r.done){r.done=!0,i&&(r=i);try{if(e===n)throw $r("Promise can't be resolved itself");var o=Nr(n);o?Qr((function(){var i={done:!1};try{o.call(n,Mr(t,e,i,r),Mr(Or,e,i,r))}catch(n){Or(e,i,n,r)}})):(r.value=n,r.state=1,Lr(e,r,!1))}catch(n){Or(e,{done:!1},n,r)}}};function yn(t){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bn(t,e,r){return e&&mn(t.prototype,e),r&&mn(t,r),t}function _n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&En(t,e)}function xn(t){return(xn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function En(t,e){return(En=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(o){return!1}}function Cn(t,e,r){return(Cn=Bn()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&En(i,r.prototype),i}).apply(null,arguments)}function Sn(t){var e="function"==typeof Map?new Map:void 0;return(Sn=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return Cn(t,arguments,xn(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),En(n,t)})(t)}function kn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tn(t){var e=Bn();return function(){var r,n,i,o=xn(t);return n=this,!(i=e?(r=xn(this).constructor,Reflect.construct(o,arguments,r)):o.apply(this,arguments))||"object"!=typeof i&&"function"!=typeof i?kn(n):i}}function Nn(t,e,r){return(Nn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xn(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function Ln(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}(t,e)||Mn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function In(t){return function(t){if(Array.isArray(t))return On(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Mn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mn(t,e){if(t){if("string"==typeof t)return On(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?On(t,e):void 0}}function On(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Pn(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=Mn(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}hn&&(Zr=function(t){!function(t,e,r){if(!(t instanceof e))throw TypeError("Incorrect "+r+" invocation")}(this,Zr,qr),Oe(t),Pr.call(this);var e=Wr(this);try{t(Mr(gn,this,e),Mr(Or,this,e))}catch(t){Or(this,e,t)}},(Pr=function(){Xr(this,{type:qr,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(t,e,r){for(var n in e)rt(t,n,e[n],void 0);return t}(Zr.prototype,{then:function(t,e){var r=Jr(this),n=an(ze(this,Zr));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=ln?en.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&Lr(this,r,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),Fr=function(){var t=new Pr,e=Wr(t);this.promise=t,this.resolve=Mr(gn,t,e),this.reject=Mr(Or,t,e)},zr.f=an=function(t){return t===Zr||t===Ur?new Fr:sn(t)},"function"==typeof rn&&ct({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Cr(Zr,rn.apply(m,arguments))}})),ct({global:!0,wrap:!0,forced:hn},{Promise:Zr}),re(Zr,qr,!1),Rr=Tr(qr),Dr=B.f,b&&Rr&&!Rr[Gr]&&Dr(Rr,Gr,{configurable:!0,get:function(){return this}}),Ur=Vr[qr],ct({target:qr,stat:!0,forced:hn},{reject:function(t){var e=an(this);return e.reject.call(void 0,t),e.promise}}),ct({target:qr,stat:!0,forced:hn},{resolve:function(t){return Cr(this,t)}}),ct({target:qr,stat:!0,forced:fn},{all:function(t){var e=this,r=an(e),n=r.resolve,i=r.reject,o=Sr((function(){var r=Oe(e.resolve),o=[],a=0,s=1;De(t,(function(t){var l=a++,u=!1;o.push(void 0),s++,r.call(e,t).then((function(t){u||(u=!0,o[l]=t,--s||n(o))}),i)})),--s||n(o)}));return o.error&&i(o.value),r.promise},race:function(t){var e=this,r=an(e),n=r.reject,i=Sr((function(){var i=Oe(e.resolve);De(t,(function(t){i.call(e,t).then(r.resolve,n)}))}));return i.error&&n(i.value),r.promise}}),ct({target:"Promise",proto:!0,real:!0},{finally:function(t){var e=ze(this,Tr("Promise")),r="function"==typeof t;return this.then(r?function(r){return Cr(e,t()).then((function(){return r}))}:t,r?function(r){return Cr(e,t()).then((function(){throw r}))}:t)}}),Vr.Promise,"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}return e}),"function"!=typeof Object.values&&(Object.values=function(t){return Object.keys(t).map((function(e){return t[e]}))}),Math.hypot=Math.hypot||function(){for(var t=0,e=arguments.length,r=0;r<e;r++){if(arguments[r]===1/0||arguments[r]===-1/0)return 1/0;t+=arguments[r]*arguments[r]}return Math.sqrt(t)},Math.log2=Math.log2||function(t){return Math.log(t)*Math.LOG2E},"undefined"!=typeof window?("performance"in window==0&&(window.performance={}),jr=window.performance):"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&("performance"in self==0&&(self.performance={}),jr=self.performance),jr&&"function"!=typeof jr.now&&(Hr=+new Date,jr.now=function(){return new Date-Hr});var Fn=Un;function Un(t,e){this.x=t,this.y=e}Un.prototype={clone:function(){return new Un(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,r=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=r,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=e*this.x-r*this.y,i=r*this.x+e*this.y;return this.x=n,this.y=i,this},_rotateAround:function(t,e){var r=Math.cos(t),n=Math.sin(t),i=e.x+r*(this.x-e.x)-n*(this.y-e.y),o=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Un.convert=function(t){return t instanceof Un||!Array.isArray(t)?t:new Un(t[0],t[1])};var Rn=Dn;function Dn(t,e,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=i,t.readFields(jn,this,e)}function jn(t,e,r){1==t?e.id=r.readVarint():2==t?function(t,e){for(var r=t.readVarint()+t.pos;t.pos<r;){var n=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[n]=i}}(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos)}Dn.types=["Unknown","Point","LineString","Polygon"],Dn.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r,n=t.readVarint()+t.pos,i=1,o=0,a=0,s=0,l=[];t.pos<n;)if(o||(i=7&(r=t.readVarint()),o=r>>3),o--,1===i||2===i)a+=t.readSVarint(),s+=t.readSVarint(),1===i&&(e&&l.push(e),e=[]),e.push(new Fn(a,s));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}return e&&l.push(e),l},Dn.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,n=1,i=0,o=0,a=0,s=1/0,l=-1/0,u=1/0,c=-1/0;t.pos<r;)if(i||(n=7&(e=t.readVarint()),i=e>>3),i--,1===n||2===n)(o+=t.readSVarint())<s&&(s=o),l<o&&(l=o),(a+=t.readSVarint())<u&&(u=a),c<a&&(c=a);else if(7!==n)throw new Error("unknown command "+n);return[s,u,l,c]},Dn.prototype.toGeoJSON=function(t,e,r){var n,i=this.extent*Math.pow(2,r),o=this.extent*t,a=this.extent*e,s=this.loadGeometry(),l=Dn.types[this.type];function u(t){for(var e=0;e<t.length;e++){var r=t[e],n=180-360*(r.y+a)/i;t[e]=[360*(r.x+o)/i-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}switch(this.type){case 1:for(var c=[],h=0;h<s.length;h++)c[h]=s[h][0];u(s=c);break;case 2:for(h=0;h<s.length;h++)u(s[h]);break;case 3:for(s=function(t){var e=t.length;if(e<=1)return[t];for(var r,n,i=[],o=0;o<e;o++){var a=function(t){for(var e,r,n=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],n+=((r=t[a]).x-e.x)*(e.y+r.y);return n}(t[o]);0!==a&&(void 0===n&&(n=a<0),n===a<0?(r&&i.push(r),r=[t[o]]):r.push(t[o]))}return r&&i.push(r),i}(s),h=0;h<s.length;h++)for(n=0;n<s[h].length;n++)u(s[h][n])}1===s.length?s=s[0]:l="Multi"+l;var f={type:"Feature",geometry:{type:l,coordinates:s},properties:this.properties};return"id"in this&&(f.id=this.id),f};var Hn=Qn;function Qn(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(zn,this,e),this.length=this._features.length}function zn(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(function(t){for(var e=null,r=t.readVarint()+t.pos;t.pos<r;){var n=t.readVarint()>>3;e=1==n?t.readString():2==n?t.readFloat():3==n?t.readDouble():4==n?t.readVarint64():5==n?t.readVarint():6==n?t.readSVarint():7==n?t.readBoolean():null}return e}(r))}function Vn(t,e,r){var n;3!==t||(n=new Hn(r,r.readVarint()+r.pos)).length&&(e[n.name]=n)}Qn.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Rn(this._pbf,e,this.extent,this._keys,this._values)};var Gn,qn=function(t,e){this.layers=t.readFields(Vn,{},e)},Kn=Rn,Yn="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Wn={};(function(){var t,e,r="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,r){t!=Array.prototype&&t!=Object.prototype&&(t[e]=r.value)},n="undefined"!=typeof window&&window===this||void 0===Yn||null==Yn?this:Yn;if("function"==typeof Object.setPrototypeOf)t=Object.setPrototypeOf;else{t:{var i={};try{i.__proto__={ea:!0},e=i.ea;break t}catch(t){}e=!1}t=e?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var o=t;!function(t,e){if(e){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(e=e(o=i[t=t[t.length-1]]))!=o&&null!=e&&r(i,t,{configurable:!0,writable:!0,value:e})}}("Object.setPrototypeOf",(function(t){return t||o}));var a=this||self;function s(t){var e=yn(t);if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var r=Object.prototype.toString.call(t);if("[object Window]"==r)return"object";if("[object Array]"==r||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==r||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function l(t){return"function"==s(t)}function u(t){var e=yn(t);return"object"==e&&null!=t||"function"==e}function c(t,e){t=t.split(".");var r,n=a;t[0]in n||void 0===n.execScript||n.execScript("var "+t[0]);for(;t.length&&(r=t.shift());)t.length||void 0===e?n=n[r]&&n[r]!==Object.prototype[r]?n[r]:n[r]={}:n[r]=e}function h(t,e){function r(){}r.prototype=e.prototype,t.ua=e.prototype,t.prototype=new r,t.prototype.constructor=t}var f=Math,p=f.min,A=f.max,d=f.round,g=f.floor,y=f.ceil,v=f.abs,m=f.log,b=f.sqrt,_=f.pow,w=f.sin,x=f.asin,E=f.cos,B=f.tan,C=f.atan2,S=f.PI,k=S/2,T=S/4,N=2*S,L=3*S,I=S/180,M=180/S;function O(t,e,r){return r<t?r:t<e?e:t}function P(t,e,r){return e<r?e<=t&&t<=r:r<=t&&t<=e}function F(t,e,r,n,i,o){return b(_((t-i)*(n-o)-(e-o)*(r-i),2)/(_(r-i,2)+_(n-o,2)))}c("H.math.normalize",(function(t,e,r){return e-=r=r||0,(t-=r)-g(t/e)*e+r})),c("H.math.clamp",O);var U={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};function R(t,e){var r=t.x;t=t.y;for(var n,i,o,a,s=e.length,l=s,u=e[0],c=0,h=0,f=0;1!=c&&1<l;)i=e[--l],n=e[--l],a=e[l?l-1:(s+(l-1))%s],o=e[l?l-2:(s+(l-2))%s],r<=n&&n<=r&&t<=i&&i<=t||r<=o&&o<=r&&t<=a&&a<=t?c=1:c||n!==r?!c&&P(r,n,o)&&((n<r&&r<o||r<n&&o<r)&&(h+=t<(u=i+(r-n)/(o-n)*(a-i)),f+=u<t),c=P(t,i,a)&&F(r,t,n,i,o,a)<=0?2:0):(o===r&&(i<t&&t<a||t<i&&a<t)||(u<=r&&r<o||r<=u&&o<r)&&(t<=i?++h:++f),c=P(t,i,a)&&F(r,t,n,i,o,a)<=0?2:0),u=n;return c||0===f||0==h%2||(c=3),c!==U.NONE}function D(t,e){this.x=+t,this.y=+e}function j(t,e,r,n,i,o,a,s,l,u){return t={x:t,y:e,next:r||null,s:n||null,ta:i||null,X:o||null,o:!!a,T:s||0,O:l||0,alpha:u||0},n&&(t.s.next=t),r&&(t.next.s=t),t}function H(t){for(;t&&t.o;)t=t.next;return t}function Q(t){if(t)for(;t.next;)t=t.next;return t}function z(t){var e=Q(t);(e.s.next=t).s=e.s}function V(t){for(var e=[];t;)e.push(t.x,t.y),t=t.next;return e}function G(t,e,r){for(e=e.next;e!==r&&e.alpha<=t.alpha;)e=e.next;t.next=e,t.s=e.s,(t.next.s=t).s.next=t}function q(t,e){for(var r,n=null,i=0,o=t.length;i<o;i++)(r=j(t[i].x,t[i].y,n)).qa=e,(r.next=n)&&(n.s=r),n=r;return n}function K(t,e,r,n){return(t-=r)*t+(e-=n)*e}c("H.math.CoverType",U),c("H.math.isPointInsidePolygon",R),c("H.math.flatten",(function(t){for(var e=t.length,r=new Float64Array(2*e),n=e&&t[0].x!==X;e--;){var i=t[e],o=e<<1;r[o]=n?i.x:i[0],r[1+o]=n?i.y:i[1]}return r})),c("H.math.Point",D),(D.prototype.set=D).prototype.clone=function(t){return t?(t.x=this.x,t.y=this.y):t=new D(this.x,this.y),t},D.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},D.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},D.prototype.scale=function(t,e){return this.x*=t,this.y*=void 0===e?t:e,this},D.prototype.round=function(){return this.x=d(this.x),this.y=d(this.y),this},D.prototype.floor=function(){return this.x=g(this.x),this.y=g(this.y),this},D.prototype.ceil=function(){return this.x=y(this.x),this.y=y(this.y),this},D.prototype.equals=D.prototype.w=function(t){return!(!t||this.x!==t.x||this.y!==t.y)},D.prototype.getNearest=D.prototype.la=function(t,e){var r,n=e.x-t.x,i=e.y-t.y,o=t;return(n||i)&&(o=(r=((this.x-t.x)*n+(this.y-t.y)*i)/(n*n+i*i))<=0?t:1<=r?e:new D(t.x+r*n,t.y+r*i)),o},D.prototype.distance=D.prototype.R=function(t){return b(_(this.x-t.x,2)+_(this.y-t.y,2))},D.fromIPoint=function(t){if(!t)throw Error("invalid argument");return t instanceof D?t:new D(t.x,t.y)},c("H.math.clipping.clipStrips",(function(t,e,r,n,i,o){var a,s,l,u=t.length;if(u)for(a=[];u--;)for(var c,h,f=t[u],p=f.length,A=0,d=1;d<p;d++)(l=function(t,e,r,n,i,o){var a=t.x;t=-t.y;var s=e.x;if(e=-e.y,r=-r,o=-o,s<a){if(i<s||a<n)return;var l=a,u=t;a=s,t=e,s=l,e=u,l=1}else if(i<a||s<n)return;if(e<t){if(r<e||t<o)return;var c=1;t=-t,e=-e,u=o,o=-r,r=-u}else if(r<t||e<o)return;if(a<n){if((t+=(n-a)*(e-t)/(s-a))>r)return;a=n}if(t<o){if((a+=(o-t)*(s-a)/(e-t))>i)return;t=o}return i<s&&(e=t+(i-a)*(e-t)/(s-a),s=i),r<e&&(s=a+(r-t)*(s-a)/(e-t),e=r),c&&(t=-t,e=-e),l?[new D(s,-e),new D(a,-t)]:[new D(a,-t),new D(s,-e)]}(f[d-1],f[d],r,e,n,i))&&(c=l[0],h=l[1],A&&A.w(c)?s.push(h):a.push(s=l),A=h,o&&(d=p,u=0));else a=t;return a})),c("H.math.clipping.clipPolygon",(function(t,e,r){var n;t=q(t,!0),e=q(e,!1);var i={},o=n=1;switch(~~(r||0)){case 1:o=n=0;break;case 2:n=0,o=1;break;case 3:n=1,o=0}r=n;var a,s,l,u,c,h,f=o;if(e&&t){for(e.M=j(e.x,e.y,null,Q(e)),t.M=j(t.x,t.y,null,Q(t)),o=e;o.next;o=o.next)if(!o.o)for(n=t;n.next;n=n.next)n.o||(h=function t(e,r,n,i,o){var a,s=r.x-e.x,l=r.y-e.y,u=i.x-n.x,c=i.y-n.y,h=s*c-l*u;return h?(u=((n.x-e.x)*c-(n.y-e.y)*u)/h,h=(l*(n.x-e.x)-s*(n.y-e.y))/h,u<0||1<u||h<0||1<h?0:(0===u?a=e:1===u?a=r:0===h?a=n:1===h&&(a=i),a?(a.x+=2480549651603763e-20,a.y+=7321997314118067e-20,a.M&&(a.M.x=a.x,a.M.y=a.y),t(e,r,n,i,o)):(o.xa=e.x+u*s,o.ya=e.y+u*l,o.fa=u,o.ga=h,1))):0}(o,a=H(o.next),n,s=H(n.next),i))&&(h=i.fa,l=i.ga,G(h=j(u=i.xa,c=i.ya,null,null,null,null,!0,0,0,h),o,a),G(a=j(u,c,null,null,null,null,!0,0,0,l),n,s),(h.X=a).X=h);for(i=R(e,V(t)),r&&(i=!i),o=e;o;o=o.next)o.o&&(i=!(o.T=i));for(i=R(t,V(e)),f&&(i=!i),n=t;n.next;n=n.next)n.o&&(i=!(n.T=i));for(z(e),z(t);(t=function(t){var e=t;if(e)for(;(e=e.next)!=t&&(!e.o||e.o&&e.O););return e}(e))!=e;){for(r=null;!t.O;t=t.X){for(i=t.T;(r=j(t.x,t.y,r)).artificial=t.o||t.qa,t.O=1,t=i?t.next:t.s;)if(t.o){t.O=1;break}if(!t)break}r.ta=p;var p=r}return p}})),c("H.math.simplifyDP",(function(t,e,r){return function t(e,r,n,i,o){var a=0,s=i,l=e[i].x,u=e[i].y,c=e[o].x,h=e[o].y,f=i+1,p=K(l,u,c,h);if(p)for(;f<o;){var A=e[f++],d=A.x,g=((d-l)*(c-l)+((A=A.y)-u)*(h-u))/p;a<(d=g<0?K(d,A,l,u):1<g?K(d,A,c,h):K(d,A,l+g*(c-l),u+g*(h-u)))&&(a=d,s=f-1)}else for(;f<o;)a<(d=K(d=(A=e[f++]).x,A=A.y,l,u))&&(a=d,s=f-1);return i=r<=a||0<n&&s-i?(--n,1<s-i?(i=t(e,r,n,i,s)).splice(i.length-1,1):i=[e[i]],1<o-s?i.concat(t(e,r,n,s,o)):i.concat(e.slice(s,o+1))):[e[i],e[o]]}(t,e*e,r||0,0,t.length-1)}));var Y=this,W=String,X=[].pop(),J=/x/.exec(""),Z="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $(t,e){if(1==(t instanceof e&&t.constructor===e))throw new TypeError("Illegal constructor "+it(e))}c("H.lang.isArray",(function(t,e,r,n){var i;if(!(i="Array"===rt(t))&&e)throw new ut(e,r,n!==X?n:t);return i})),c("H.lang.isString",(function(t){return"string"==typeof t}));var tt=isNaN;function et(t){return t===+t}function rt(t){var e=Object[Z[0]][Z[6]].call(t).match(/^\[object (\w+)\]$/);return e?e[1]:yn(t)}c("H.lang.isNumber",et),c("H.lang.isInteger",Number.isInteger?Number.isInteger:function(t){return"number"==typeof t&&0==t%1});var nt=[];function it(t,e,r,n){var i,o,a="",s=arguments.length<2;return s&&(e={H:Y.H},r="",n=nt.slice()),st(e,!0,(function(e,o){try{if(i=e[o],s=i,st(e,!(c=[]),(function(t,e){t[e]===s&&c.push(e)})),o=c.sort(ot)[0],!(u(i)&&i.window===i&&i.self===i||u(i)&&0<i.nodeType&&l(i.cloneNode))&&u(i)){if(i===t)return a=r+"."+o,1;if(n.indexOf(i)<0&&(n.push(i),a=it(t,i,r+"."+o,n)))return 1}}catch(e){}var s,c})),s&&(a=a?a.substr(1).replace("."+Z[0]+".","#"):"~"+(l(t)?((o=/^\s*function ([^\( ]+)/.exec(o=t))?o[1]:"anonymous")+"()":rt(t))),a}function ot(t,e){return e.length-t.length}nt.indexOf(nt)<0&&nt.push(nt);var at=Object[Z[0]][Z[2]];function st(t,e,r){var n;if(t){for(i in t)if((!e||at.call(t,i))&&r(t,i,!0))return;for(n=Z.length;n--;){var i=Z[n];if((!e||at.call(t,i))&&r(t,i,!1))break}}}function lt(t,e,r){r[e]="#"+e}function ut(t,e,r){var n,i,o=arguments.length;return(e=e!==X?+e:e)!==X&&((i=n=(i=/^.*?\(([^\)]+)/.exec((""+t).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"")))?W(i[1].replace(/\s+/g,"")).split(","!==X?",":" "):[]).forEach(lt),i=i[e]||"#"+e),n=t?it(t):"",o=2<o?W(r):"",(i||o)&&(n+=" (Argument "+(i||"")+(o?" "+o:"")+")"),o=Error(n),Object.setPrototypeOf(o,ut.prototype),o}function ct(t,e,r){var n=O(+t,-90,90);if(e&&tt(n))throw new ut(e,r,t);return n}function ht(t,e,r){var n,i=+t;if((i<-180||180<i)&&(i=(0==(n=(i+180)%360)<0?n:360+n)-180),e&&tt(i))throw new ut(e,r,t);return i}function ft(t,e,r){var n;if(t!==X&&tt(n=+t)&&e)throw new ut(e,r,t);return n}function pt(){$(this,pt)}function At(t,e,r){this.lat=ct(t,At,0),this.lng=ht(e,At,1),r!==X&&(this.alt=ft(r,At,2))}function dt(t,e,r){var n=u(t)&&!(tt(t.lat=ct(t.lat))||tt(t.lng=ht(t.lng))||t.alt!==X&&tt(t.alt=ft(t.alt)));if(!n&&e)throw new ut(e,r,t);return n}function gt(t,e,r,n){yt(this,ct(t,gt,0),ht(e,gt,1),ct(r,gt,2),ht(n,gt,3))}function yt(t,e,r,n,i){return t.f=r,t.g=i,e<n&&(r=e,e=n,n=r),t.i=e,t.h=n,t.m=t.b=t.c=null,t}function vt(t,e){return(t=e-t)+(t<0?360:0)}function mt(t,e){return(t+=e/2)-(180<t?360:0)}function bt(t,e,r,n,i,o,a,s,l){r=p(r,a),t=A(t,i);var u=mt(e,i=vt(e,n)),c=mt(o,a=vt(o,s))-u,h=(c+=c-1e-6<0?360:0)-1e-6<180?(u=e,s):(c=360-c,u=o,n);return 360<=(c=c+i/2+a/2)+5e-7?(u=-180,h=180):c-5e-7<i?(u=e,h=n):c-5e-7<a&&(u=o,h=s),l?yt(l,t,u,r,h):new gt(t,u,r,h)}function _t(t,e,r){return r||(dt(t,_t,0),dt(e,_t,1)),new gt(t.lat,t.lng,e.lat,e.lng)}function wt(t,e,r,n,i,o){$(this,wt),this.sa=t||10,this.c=this.b=null,this.j=n||0,this.l=i||0,this.m=e||1,this.u=r||1,this.I=!!o,this.flush()}function xt(t,e,r){var n,i;if(t.I&&(n=t.c))for(i=3;0<=i;i--){var o=e[i];if(i%3?o>=n[i]:o<=n[i]){if(!r){t.c=null;break}n[i]=o}}}function Et(t,e){var r,n=t.a;if(e){var i=e;if(i!==n)for(n=i;i=i.c;)(i.entries||1<i.a)&&(n=i)}else for(;!n.entries&&(r=n.a)<2&&r;)n=i;t.a=n}h(ut,Error),c("H.lang.InvalidArgumentError",ut),ut.prototype.name="InvalidArgumentError",c("H.geo.isDBC",(function(t,e){return 0!=(t<0^e<0)&&180<v(e-t)})),c("H.geo.AbstractGeometry",pt),pt.prototype.getBoundingBox=pt.prototype.D,pt.prototype.equals=pt.prototype.w,pt.prototype.a="",pt.prototype.l="",pt.prototype.toString=function(){return this.I([this.a.toUpperCase()," "]).join("")},pt.prototype.toGeoJSON=pt.prototype.va=function(){return{type:this.l,coordinates:this.u()}},pt.prototype.forWorkerMessage=pt.prototype.U=function(){return{type:this.a,coordinates:this.j(),boundingBox:this.D().U()}},h(At,pt),c("H.geo.Point",At),At.prototype.equals=At.prototype.w=function(t){return this===t||!!t&&this.lat===t.lat&&this.lng===t.lng&&(this.alt||0)===(t.alt||0)},At.prototype.distance=At.prototype.R=function(t){var e,r;return this===t||this.lat===t.lat&&this.lng===t.lng?0:(e=this.lat*I,r=t.lat*I,12742001.58*x(p(1,b(_(w((e-r)/2),2)+E(e)*E(r)*_(w((this.lng*I-t.lng*I)/2),2)))))},At.prototype.walk=At.prototype.wa=function(t,e,r){var n,i,o,a,s,l,u;return r?((e/=6371000.79)&&(t*=I,s=I*this.lat,n=w(s),i=w(e),o=E(e),a=I*this.lng,l=E(s),s=x(l*E(t)*i+n*o),l=(t=(a+(t=C(w(t)*l*i,o-n*w(s)))+S)%(2*S)-S)*M),e?new At(s*M,(l+540)%360-180):this):0==(90+(t=(t%360+360)%360))%180?(s=this.lng+e/(6371000.79*N*E(this.lat*I))*(270===t?-360:360),new At(this.lat,(s+540)%360-180)):((e/=6371000.79)&&(t*=I,a=this.lat*I,n=this.lng*I,o=(i=a+e*E(t))-a,s=m(B(i/2+T)/B(a/2+T)),s=tt(o/s)?E(a):o/s,u=e*w(t)/s,v(i)>k&&(i=0<i?S-i:-(S+i))),e?new At(i*M,((n+u+L+(v(a+o)>k?S:0))%N-S)*M):this)},At.prototype.getBoundingBox=At.prototype.D=function(){return new gt(this.lat,this.lng,this.lat,this.lng)},At.validate=dt,At.fromIPoint=function t(e){if(!e)throw new ut(t,0,e);return new At(e.lat,e.lng,e.alt)},At.prototype.a="Point",At.prototype.I=function(t){return t.push("(",this.lng," ",this.lat,")"),t},At.prototype.l="Point",At.prototype.u=function(){return[this.lng,this.lat,this.alt||0]},At.prototype.j=function(){return[this.lat,this.lng,this.alt||0]},h(gt,pt),c("H.geo.Rect",gt),gt.prototype.a="Polygon",gt.prototype.I=function(t){var e=this.i,r=this.f,n=this.h,i=this.g;return t.push("(","(",r," ",e,",",i," ",e,",",i," ",n,",",r," ",n,",",r," ",e,")",")"),t},gt.prototype.equals=gt.prototype.w=function(t){return this===t||!!t&&this.i===t.i&&this.f===t.f&&this.h===t.h&&this.g===t.g},gt.prototype.clone=function(){return new gt(this.i,this.f,this.h,this.g)},gt.prototype.getTopLeft=gt.prototype.W=function(){return this.m||(this.m=new At(this.i,this.f)),this.m},gt.prototype.getBottomRight=gt.prototype.V=function(){return this.b||(this.b=new At(this.h,this.g)),this.b},gt.prototype.getTop=gt.prototype.na=function(){return this.i},gt.prototype.getBottom=gt.prototype.ha=function(){return this.h},gt.prototype.getLeft=gt.prototype.ja=function(){return this.f},gt.prototype.getRight=gt.prototype.ma=function(){return this.g},gt.prototype.getCenter=gt.prototype.F=function(){return this.c||(this.c=new At(this.h+(this.i-this.h)/2,mt(this.f,this.A()))),this.c},gt.prototype.getWidth=gt.prototype.A=function(){return vt(this.f,this.g)},gt.prototype.getHeight=gt.prototype.G=function(){return this.i-this.h},gt.prototype.isCDB=gt.prototype.N=function(){return this.f>this.g},gt.prototype.isEmpty=gt.prototype.ra=function(){return!this.A()&&!this.G()},gt.prototype.getBoundingBox=gt.prototype.D=function(){return new gt(this.i,this.f,this.h,this.g)},gt.prototype.containsLatLng=gt.prototype.L=function(t,e,r){var n=this.F();return r||(t=ct(t,this.L,0),e=ht(e,this.L,1)),(t=(e=this.B(t,e,r)).F()).lat===n.lat&&t.lng===n.lng&&this.G()===e.G()&&this.A()===e.A()},gt.prototype.containsPoint=gt.prototype.$=function(t,e){return e||dt(t,this.$,0),this.L(t.lat,t.lng,e)},gt.prototype.containsRect=gt.prototype.aa=function(t,e){var r=this.F();if(!(e||t instanceof gt))throw new ut(this.aa,0,t);return(t=(e=this.J(t,e)).F()).lat===r.lat&&t.lng===r.lng&&this.G()===e.G()&&this.A()===e.A()},gt.prototype.mergeLatLng=gt.prototype.B=function(t,e,r,n){if(!r){if(tt(t=ct(t)))throw new ut(this.B,0,t);if(tt(e=ht(e)))throw new ut(this.B,1,e)}return bt(this.i,this.f,this.h,this.g,t,e,t,e,n)},gt.prototype.mergePoint=gt.prototype.ca=function(t,e,r){return e||dt(t,this.ca,0),this.B(t.lat,t.lng,e,r)},gt.prototype.mergeRect=gt.prototype.J=function(t,e,r){if(!(e||t instanceof gt))throw new ut(this.J,0,t);return bt(this.i,this.f,this.h,this.g,t.i,t.f,t.h,t.g,r)},gt.prototype.mergeTopLeftBottomRight=gt.prototype.C=function(t,e,r,n,i,o){return i||(t=ct(t,this.C,0),e=ht(e,this.C,1),r=ct(r,this.C,2),n=ht(n,this.C,3)),bt(this.i,this.f,this.h,this.g,t,e,r,n,o)},gt.prototype.intersects=gt.prototype.ba=function(t,e){var r=this.f<=this.g,n=t.f<=t.g,i=this.f<t.g,o=t.f<this.g;if(!(e||t instanceof gt))throw new ut(this.ba,0,t);return this.h<=t.i&&t.h<=this.i&&(!r&&(!n||i||o)||!n&&(i||o)||i&&o)},gt.merge=bt,gt.fromPoints=_t,gt.coverPoints=function t(e,r){var n=1,i=e.length,o=null,a=s(e);if("array"!=a&&("object"!=a||"number"!=typeof e.length))throw new ut(t,0,e);if(0<i)for(o=_t(a=e[0],a,r);n<i;n++)a=e[n],o.B(a.lat,a.lng,r,o);return o},gt.coverLatLngAlts=function t(e,r){var n,i=3,o=e.length;if(!(r||e&&null!=e.length))throw new ut(t,0,e);if(0<o)for(n=new gt(e[0],e[1],e[0],e[1]);i<o;i+=3)n.B(e[i],e[i+1],r,n);return n},gt.coverRects=function t(e,r){var n,i=1,o=e.length;if(r&&(!e||null==e.length))throw new ut(t,0,e);if(0<o)for(n=new gt(e[0].i,e[0].f,e[0].h,e[0].g);i<o;i++)n.J(e[i],r,n);return n},gt.prototype.resizeToCenter=gt.prototype.da=function(t,e){var r=this.f,n=this.i,i=this.g,o=this.h,a=this.F().lng;dt(t,this.da,0);var s=t.lat-o-(n-o)/2,l=t.lng-a;return t=(t=r+((l=180<l||l<-180?-(a+t.lng):l)<0?2*l:0))<-180?360+t:t,i=180<(i+=0<l?2*l:0)?i-360:i,90<=(n=0<s?n+2*s:n)&&(n=90),(o=s<0?o+2*s:o)<=-90&&(o=-90),e?yt(e,n,t,o,i):new gt(n,t,o,i)},gt.prototype.l="Polygon",gt.prototype.u=function(){return[[this.f,this.i,0],[this.g,this.i,0],[this.g,this.h,0],[this.f,this.h,0],[this.f,this.i,0]]},gt.prototype.U=function(){return this.j()},gt.prototype.j=function(){return[this.i,this.f,this.h,this.g]},wt.prototype.remove=function(t){var e,r,n,i,o,a,s=!1;if(t&&(e=t.a)&&e.b===this&&(r=e.entries)&&0<=(n=r.indexOf(t))){for(r.splice(n,1),r=this.a;e;)(i=e.entries)&&i.length||(i&&delete e.entries,e.a||!(o=e.c))?e=J:((n=o)[a=(s=e).j]===s&&(delete n[a],delete s.c,--n.a),r===e&&(r=o),e=o);this.a!==r&&(this.a=r,Et(this)),xt(this,t,!1),s=!0}return s},wt.prototype.flush=function(){var t=new Ct(null,NaN,this.j-this.m,this.l-this.u,this.j+this.m,this.l+this.u);(t.b=this).a=this.b=t,this.c=null},wt.prototype.o=function(t,e,r,n,i,o){var a=[],s=this.a,l=this.b;return t<=s[5]&&e<=s[6]&&(i?r>=s[7]:r>s[7])&&(o?n>=s[4]:n>s[4])&&function t(e,r,n,i,o,a,s,l,u){var c,h=r.entries,f=r[7],p=r[4],A=r[5],d=r[6],g=r[8],y=r[9];if(h){var v=h.length;if(p<o||f<i||s<d||a<A)for(;v--;)p=(f=h[v])[3],A=f[0],d=f[1],o<=f[2]&&i<=d&&(A<s||l&&A==s)&&(p<a||u&&p==a)&&n.push(f);else for(;v--;)n.push(h[v])}(g<a||u&&a==g)&&(o<y&&(c=r[1])&&t(e,c,n,i,o,a,s,l,u),(y<s||l&&s==y)&&(c=r[3])&&t(e,c,n,i,o,a,s,l,u)),i<g&&(o<y&&(c=r[0])&&t(e,c,n,i,o,a,s,l,u),(y<s||l&&s==y)&&(c=r[2])&&t(e,c,n,i,o,a,s,l,u))}(this,s,a,t,e,r,n,o||n>=l[6],i||r>=l[5]),a};var Bt=0;function Ct(t,e,r,n,i,o){this.j=e,t&&(this.c=t,this.b=t.b,i=1&e?(r=t[8],t[5]):(r=t[7],t[8]),o=2&e?(n=t[9],t[6]):(n=t[4],t[9])),this[7]=r,this[5]=i,this[8]=(r+i)/2,this[4]=n,this[6]=o,this[9]=(n+o)/2}function St(t,e,r,n,i,o){St.ua.constructor.apply(this,arguments)}function kt(t,e,r,n,i,o,a){var s,l,u=e[8],c=e[9];return a&&(i<u||(s=u<=r))&&(o<c||(l=c<=n))?r=(u=kt)(t,e=e[s|=l<<1]||(++e.a,e[s]=new Ct(e,s)),r,n,i,o,a-1):(n=r=new Tt(r,n,i,o),(e.entries||(e.entries=[])).push(n),n.a=e,xt(t,r,!0),Et(t,e)),r}function Tt(t,e,r,n){this.id=Bt++,this[0]=e,this[1]=r,this[2]=n,this[3]=t}function Nt(t){this.l=new St(+t||10,180,90,0,0,!0),this.j=[],this.m=!1,this.a=this.b=this.c=null}function Lt(t,e,r,n,i,o){if(o)o=new Tt(i,-e,r+360,-n),t.j.push(o),t.m=!0,t.a&&t.a.C(e,r,n,i,!0,t.a);else{var a=-e,s=-n,l=(o=t.l).b,u=l[5],c=l[6];if(!(l[7]<=r&&l[4]<=a&&(i<u||u===i&&u===l.b.b[5])&&(s<c||c===s&&c===l.b.b[6])))throw Error("Coordinates out of bounds");o=kt(o,o.b,r,a,i,s,o.sa),t.b&&t.b.C(e,r,n,i,!0,t.b)}return t.c=null,o}function It(t,e,r,n,i,o,a){var s=(t=t.j).length,l=[];if(s)for(var u=r+360,c=i+360;s--;){var h=t[s];(Mt(h,e,r,n,i,o,a)||Mt(h,e,u,n,c,o,a))&&l.push(h)}return l}function Mt(t,e,r,n,i,o,a){var s=t[3],l=t[0],u=t[1];return t=t[2],(o?l<=n:l<n)&&(a?s<=i:s<i)&&e<=t&&r<=u}function Ot(t,e){var r,n;if(r=e.length){for(var i=t.length,o={};i--;)o[t[i].id]=1;for(;r--;)(n=e[r]).id in o||t.push(n)}}function Pt(){}function Ft(t,e,r){if(this.l=[],e&&this.K(e),r&&!l(r))throw new ut(Ft,2,r);this.b=0,this.m=r,this.a={},this.j=this.c=null,this.Z(t)}function Ut(t,e){return e&&(t.c=Dt(t,e,t.c)),e}function Rt(t){for(;t.b>t.u&&t.j;)jt(t,t.j,!0)}function Dt(t,e,r){return r!==e&&((e.H||e.v)&&jt(t,e,!1),(e.H=r)&&(e.v=r.v,r.v=e),e.v||(t.c=e),e.H||(t.j=e),t.b+=e.size),e}function jt(t,e,r){var n=e.v,i=e.H;(n||i||e==t.c&&e==t.j)&&(n?n.H=i:t.c=i,i?i.v=n:t.j=n,t.b-=e.size,r&&(delete t.a[e.id],Ht(t,e))),e.H=e.v=null}function Ht(t,e){for(var r=t.l.length;r--;)t.l[r].call(t,e.id,e.data,e.size)}Ct.prototype.a=0,h(St,wt),c("H.geo.QuadTree",Nt),Nt.prototype.N=function(){return this.m},Nt.prototype.D=function(){var t;if(!this.c){var e,r,n=[];if((a=!this.b)&&(s=(o=this.l).c,o.I&&!s&&((a=o.a).entries||a[0]||a[1]||a[2]||a[3])&&(s=function t(e,r){for(var n,i,o=0,a=3;0<=a;a--){for(var s=a+4,l=0<a%3,u=[],c=r[a],h=e[a],f=h.length;f--;){var p=h[f];if(n=p.entries)for(i=n.length;i--;){var A=n[i][a];(l?c<A:A<c)&&(c=A)}for(i=4;i--;)(n=p[i])&&(l?n[s]>c:n[s]<c)&&u.push(n)}o+=u.length,r[a]=c,e[a]=u}return o&&(r=t(e,r)),r}([s=[a],s,s,s],[a[6],a[7],a[4],a[5]]),o.c=s),a=o=s),a&&(this.b=new gt(-o[0],o[3],-o[2],o[1])),(t=this.b)&&n.push(t),!this.a&&(r=(e=this.j).length)){for(a=360,s=-(o=90),l=0;r--;)var i=e[r],o=p(o,i[0]),a=p(a,i[3]),s=A(s,i[2]),l=A(l,i[1]);this.a=new gt(-o,a,-s,l-360)}(t=this.a)&&n.push(t),(t=n[0])&&(n[1]&&(t=t.J(n[1],!0)),this.c=t)}return this.c},Nt.prototype.insertBoundingBox=Nt.prototype.oa=function(t){var e=t.W(),r=t.V();return(t=t.N())?Lt(this,e.lat,r.lng,r.lat,e.lng,t):Lt(this,e.lat,e.lng,r.lat,r.lng,t)},Nt.prototype.remove=function(t){var e,r;return t.a?(r=this.l.remove(t),this.b=null):(r=0<=(t=(e=this.j).indexOf(t)))&&(e.splice(t,1),this.m=0<e.length,this.a=null),r&&(this.c=null),r},Nt.prototype.intersectBoundingBox=Nt.prototype.pa=function(t,e,r){var n=this.l,i=t.W(),o=t.V(),a=-i.lat,s=(i=i.lng,-o.lat);return o=o.lng,!e&&a==s||!r&&i===o?t=[]:t.N()?(Ot(t=n.o(-180,a,o,s,r,e),n.o(i,a,180,s,!1,e)),Ot(t,It(this,a,o,s,i+360,e,r))):Ot(t=n.o(i,a,o,s,r,e),It(this,a,i,s,o,e,r)),t},c("H.util.ICache",Pt),Pt.prototype.add=function(){},Pt.prototype.get=function(){},Pt.prototype.drop=Pt.prototype.S=function(){},Pt.prototype.forEach=function(){},Pt.prototype.removeAll=Pt.prototype.Y=function(){},Pt.prototype.registerOnDrop=Pt.prototype.K=function(){},Pt.prototype.deRegisterOnDrop=Pt.prototype.P=function(){},c("H.util.Cache",Ft),Ft.prototype.add=function(t,e,r){var n,i;if(!et(r=+r)||r<0)throw new ut(this.add,2,r);return t=String(t),(i=!this.m||this.m(t,e,r))&&((n=this.a[t])?(n.data!==e&&Ht(this,n),this.b+=r-n.size,n.size=r,n.data=e,Ut(this,n)):this.a[t]=Dt(this,{id:t,data:e,size:r,H:null,v:null},this.c),Rt(this)),i},Ft.prototype.registerOnDrop=Ft.prototype.K=function(t){if(!l(t))throw new ut(this.K,0,t);this.l.push(t)},Ft.prototype.deRegisterOnDrop=Ft.prototype.P=function(t){this.l=this.l.filter((function(e){return e!==t}))},Ft.prototype.get=function(t,e){return(t=e?this.a[t]:Ut(this,this.a[t]))&&t.data},Ft.prototype.drop=Ft.prototype.S=function(t){var e;(e=this.a[t])&&jt(this,e,!0)},Ft.prototype.forEach=function(t,e,r){var n;for(n in this.a){var i=this.a[n];r&&!r(n,i.data,i.size)||t.call(e,n,i.data,i.size)}},Ft.prototype.removeAll=Ft.prototype.Y=function(t){var e;for(e in this.a){var r=this.a[e];t&&!t(e,r.data,r.size)||jt(this,this.a[e],!0)}},Ft.prototype.setMaxSize=Ft.prototype.Z=function(t){if(!(0<+t))throw new ut(Ft.prototype.Z,0,t);return this.u=+t,Rt(this),this},Ft.prototype.getMaxSize=Ft.prototype.ka=function(){return this.u},Ft.prototype.getCurrentSize=Ft.prototype.ia=function(){return this.b}}).call(Wn);var Xn,Jn=Gn={};function Zn(t){return Cn(Wn.H.math.Point,In(t))}Gn.clipPolygon=function(t,e){var r,n,i,o=[],a=Wn.H.math.clipping.clipPolygon(t.map(Zn),e.map(Zn));if(a)do{for(r=[],n=a;r.push([(i=n).x,i.y]),n=n.next;);o.push(r)}while(a=a.nextPoly);else Gn.isPointInsidePolygon(e[0],t)?o.push(e):Gn.isPointInsidePolygon(t[0],e)&&o.push(t);return o},Gn.isPointInsidePolygon=function(t,e){return Wn.H.math.isPointInsidePolygon({x:t[0],y:t[1]},Wn.H.math.flatten(e))},Gn.clamp=function(t,e,r){return(t-=0)>r?r:t<e?e:t},Gn.splitLegs=function(t,e){var r=[];t.push(t[0]);for(var n=0;n<t.length-1;n++){var i,o=t[n],a=t[n+1];r.push(o),Math.abs(a[0]-o[0])>=e&&(i=[(o[0]+a[0])/2,(o[1]+a[1])/2],r.push(i))}return r.length!==t.length-1?Gn.splitLegs(r,e):r},Gn.getBBox=function(t){var e=1/0,r=1/0,n=-1/0,i=-1/0;return t.forEach((function(t){t[0]<e&&(e=t[0]),t[1]<r&&(r=t[1]),t[0]>n&&(n=t[0]),t[1]>i&&(i=t[1])})),[e,r,n,i]},Gn.getBBoxCenter=function(t){var e=Ln(t,4),r=e[0],n=e[1];return[r+(e[2]-r)/2,n+(e[3]-n)/2]},Gn.getLineLength=function(t,e,r,n){return Math.sqrt(Math.pow(t-r,2)+Math.pow(e-n,2))},Gn.modulo=function(t,e){var r;return(r=t%e)<0==e<0?r:r+e};var $n=Xn={};Xn.default_source_max_zoom=18,Xn.default_view_max_zoom=20,Xn.tile_size=256,Xn.half_circumference_meters=20037508.342789244,Xn.circumference_meters=2*Xn.half_circumference_meters,Xn.min_zoom_meters_per_pixel=Xn.circumference_meters/Xn.tile_size;var ti=[];Xn.metersPerPixel=function(t){return ti[t]=ti[t]||Xn.min_zoom_meters_per_pixel/Math.pow(2,t),ti[t]};var ei=[];Xn.metersPerTile=function(t){return ei[t]=ei[t]||Xn.circumference_meters/Math.pow(2,t),ei[t]},Xn.tile_scale=4096,Xn.units_per_pixel=Xn.tile_scale/Xn.tile_size,Xn.height_scale=16;var ri=[];Xn.unitsPerMeter=function(t){return ri[t]=ri[t]||Xn.tile_scale/(Xn.tile_size*Xn.metersPerPixel(t)),ri[t]},Xn.metersForTile=function(t){return{x:t.x*Xn.circumference_meters/Math.pow(2,t.z)-Xn.half_circumference_meters,y:-(t.y*Xn.circumference_meters/Math.pow(2,t.z)-Xn.half_circumference_meters)}},Xn.tileForMeters=function(t,e){var r=Ln(t,2),n=r[0],i=r[1];return{x:Math.floor((n+Xn.half_circumference_meters)/(Xn.circumference_meters/Math.pow(2,e))),y:Math.floor((-i+Xn.half_circumference_meters)/(Xn.circumference_meters/Math.pow(2,e))),z:e}},Xn.metersToExactTileCoords=function(t,e){var r=Ln(t,2),n=r[0],i=r[1];return{x:Math.pow(2,e-1)*(1+n/Xn.half_circumference_meters),y:Math.pow(2,e-1)*(1-i/Xn.half_circumference_meters),z:e}},Xn.wrapTile=function(t){var e=t.x,r=t.y,n=t.z,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{x:!0,y:!1},o=(1<<n)-1;return i.x&&(e&=o),i.y&&(r&=o),{x:e,y:r,z:n}},Xn.wrapMeters=function(t){var e=t.x,r=t.y;return{x:Jn.modulo(e+Xn.half_circumference_meters,Xn.circumference_meters)-Xn.half_circumference_meters,y:r}},Xn.metersToLatLng=function(t){var e=Ln(t,2),r=e[0],n=e[1];return r/=Xn.half_circumference_meters,n/=Xn.half_circumference_meters,n=(2*Math.atan(Math.exp(n*Math.PI))-Math.PI/2)/Math.PI,[r*=180,n*=180]},Xn.latLngToMeters=function(t){var e=Ln(t,2),r=e[0],n=e[1];return n=Math.log(Math.tan(n*Math.PI/360+Math.PI/4))/Math.PI,n*=Xn.half_circumference_meters,n=Math.min(Math.max(n,-Xn.half_circumference_meters),Xn.half_circumference_meters),[r*=Xn.half_circumference_meters/180,n]},Xn.tileSpaceToMeters=function(t,e,r){var n=Ln(t,2),i=n[0],o=n[1],a=Xn.unitsPerMeter(e);return[i/a+r.x,o/a+r.y]},Xn.tileSpaceToLatlng=function(t,e,r){var n=Xn.unitsPerMeter(e);return Xn.transformGeometry(t,(function(t){t[0]=t[0]/n+r.x,t[1]=t[1]/n+r.y;var e=Ln(Xn.metersToLatLng(t),2),i=e[0],o=e[1];t[0]=i,t[1]=o})),t},Xn.copyGeometry=function(t){if(null!=t){var e={type:t.type};return"Point"===t.type?e.coordinates=[t.coordinates[0],t.coordinates[1]]:"LineString"===t.type||"MultiPoint"===t.type?e.coordinates=t.coordinates.map((function(t){return[t[0],t[1]]})):"Polygon"===t.type||"MultiLineString"===t.type?e.coordinates=t.coordinates.map((function(t){return t.map((function(t){return[t[0],t[1]]}))})):"MultiPolygon"===t.type&&(e.coordinates=t.coordinates.map((function(t){return t.map((function(t){return t.map((function(t){return[t[0],t[1]]}))}))}))),e}},Xn.transformGeometry=function(t,e){null!=t&&("Point"===t.type?e(t.coordinates):"LineString"===t.type||"MultiPoint"===t.type?t.coordinates.forEach(e):"Polygon"===t.type||"MultiLineString"===t.type?t.coordinates.forEach((function(t){return t.forEach(e)})):"MultiPolygon"===t.type&&t.coordinates.forEach((function(t){t.forEach((function(t){return t.forEach(e)}))})))},Xn.boxIntersect=function(t,e){return!(e.sw.x>t.ne.x||e.ne.x<t.sw.x||e.sw.y>t.ne.y||e.ne.y<t.sw.y)},Xn.findBoundingBox=function(t){for(var e=1/0,r=-1/0,n=1/0,i=-1/0,o=t[0].length,a=0;a<o;a++){var s=t[0][a];s[0]<e&&(e=s[0]),s[1]<n&&(n=s[1]),s[0]>r&&(r=s[0]),s[1]>i&&(i=s[1])}return[e,n,r,i]},Xn.geometryType=function(t){return"Polygon"===t||"MultiPolygon"===t?"polygon":"LineString"===t||"MultiLineString"===t?"line":"Point"===t||"MultiPoint"===t?"point":void 0},Xn.centroid=function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(t&&0!==t.length){var r,n=0,i=0,o=0,a=t[0],s=a.length;e&&(r=a[0],a=a.map((function(t){return[t[0]-r[0],t[1]-r[1]]})));for(var l=0,u=s-1;l<s;u=l,l++){var c=a[l],h=a[u],f=c[1]*h[0]-h[1]*c[0];n+=(c[0]+h[0])*f,i+=(c[1]+h[1])*f,o+=3*f}var p=[n/o,i/o];return e&&(p[0]+=r[0],p[1]+=r[1]),p}},Xn.multiCentroid=function(t){for(var e=t.length,r=[0,0],n=0;n<t.length;n++){var i=Xn.centroid(t[n]);r[0]+=i[0],r[1]+=i[1]}return r[0]/=e,r[1]/=e,r},Xn.signedPolygonRingAreaSum=function(t){for(var e=0,r=t.length,n=0;n<r-1;n++){var i=t[n],o=t[n+1];e+=i[0]*o[1]-o[0]*i[1]}return e+(t[r-1][0]*t[0][1]-t[0][0]*t[r-1][1])},Xn.polygonRingArea=function(t){return Math.abs(Xn.signedPolygonRingAreaSum(t))/2},Xn.polygonArea=function(t){if(t)return Xn.polygonRingArea(t[0])},Xn.multiPolygonArea=function(t){for(var e=0,r=0;r<t.length;r++)e+=Xn.polygonArea(t[r]);return e},Xn.ringWinding=function(t){var e=Xn.signedPolygonRingAreaSum(t);return 0<e?"CW":e<0?"CCW":void 0},Xn.getTileBoundingBox=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=Xn.wrapTile(t,{x:!0}),i=Xn.metersForTile(n),o=Xn.metersPerPixel(n.z),a=Xn.metersToLatLng([i.x-r*o,i.y+r*o]),s=Xn.metersToLatLng([i.x+(e+r)*o,i.y-(e+r)*o]),l=Xn.isLastTile(n);return new Wn.H.geo.Rect(0===t.y?90:Jn.clamp(a[1],-90,90),Jn.clamp(a[0],-180,180),l.row?-90:Jn.clamp(s[1],-90,90),l.column?180:Jn.clamp(s[0],-180,180))},Xn.isLastTile=function(t){var e=t.x,r=t.y,n=t.z;return{row:r===Math.pow(2,n)-1,column:e===Math.pow(2,n)-1}};var ni,ii,oi=function(){wn(e,Sn(Error));var t=Tn(e);function e(r){var n;return vn(this,e),(n=t.call(this)).name="MethodNotImplemented",n.message="Method "+r+" must be implemented in subclass",n}return e}(),ai=!1,si=!1;try{window.document!==HTMLDocument&&(si=!0)}catch(o){void 0!==self&&(ai=!0,self.window={document:{}},self.document=self.window.document)}var li={get is_fake_worker(){return self.is_fake_worker},get is_worker(){return void 0!==ii?ii:ai||self.is_fake_worker},set is_worker(t){ii=t},get is_main(){return void 0!==ni?ni:si&&!self.is_fake_worker},set is_main(t){ni=t},is_native_worker:ai},ui={},ci=0,hi={},fi={},pi={};function Ai(t,e,r){var n=2<arguments.length&&void 0!==r?r:fi,i=[];if("string"==typeof t&&(t=(i=t.split(".")).pop()),li.is_main&&e&&1===i.length&&"self"===i[0])n=e;else for(var o=0;o<i.length;o++){if(!n[i[o]])return[];n=n[i[o]]}return[t,n]}ui.addTarget=function(t,e){li.is_fake_worker?pi[t]=e:fi[t]=e},ui.removeTarget=function(t){delete fi[t],delete pi[t]};var di=" No object with that name is registered on main thread.",gi=" Object has no method with that name.",yi="_worker_broker_error_not_set_";function vi(t){Array.isArray(t)&&t.filter((function(t){return t.parent&&t.property})).forEach((function(t){return delete t.parent[t.property]}))}ui.withTransferables=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(!(this instanceof ui.withTransferables))return Cn(ui.withTransferables,e);this.value=e,this.transferables=function t(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];if(!e)return i;if(Array.isArray(e))e.forEach((function(r,n){return t(r,e,n,i)}));else if("object"===yn(e))if(e instanceof ArrayBuffer)i.push({object:e,parent:r,property:n});else if(e.buffer instanceof ArrayBuffer)i.push({object:e.buffer,parent:r,property:n});else for(var o in e)t(e[o],e,o,i);return i}(this.value)},li.is_main&&(ui.postMessage=function(t,e){for(var r=arguments.length,n=new Array(2<r?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];if(Array.isArray(t))return Promise.all(t.map((function(t){return ui.postMessage.apply(ui,[t,e].concat(In(n)))})));var o,a={};"object"===yn(e)&&(e=(a=e).method);var s="main_send";"string"==typeof t?(e=t,n=Array.prototype.slice.call(arguments,1),o=!0,s="worker_send"):t.init&&(o=!0);var l,u=[];if(n&&1===n.length&&n[0]instanceof ui.withTransferables&&(u=n[0].transferables,n=n[0].value),l={type:s,message_id:++ci,method:e,message:n},o)return function(t,e){var r=t.type,n=Ln(Ai(t.method,e,"main_send"===r?pi:fi),2),i=n[0],o=n[1],a="Worker broker could not dispatch message type ".concat(t.method," on target ").concat(t.target,".");if(!o)throw Error(a+di);var s="function"==typeof o[i]&&o[i];if(!s)throw Error(a+gi);return new Promise((function(e,r){var n;try{n=s.apply(o,t.message)}catch(n){return void r(n)}n instanceof Promise?n.then((function(t){t instanceof ui.withTransferables&&(t=t.value[0]),e(t)}),(function(t){r(t instanceof Error?"".concat(t.message,": ").concat(t.stack):t)})):(n instanceof ui.withTransferables&&(n=n.value[0]),e(n))}))}(l,t&&t.init?t:void 0);var c=new Promise((function(t,r){hi[ci]={method:e,message:n,resolve:t,reject:r}}));return a.stringify&&(l=JSON.stringify(l)),t.postMessage(l,u.map((function(t){return t.object}))),vi(u),c},ui.addWorker=function(t){if(!(t instanceof Worker))throw Error("Worker broker could not add non-Worker object",t);t.addEventListener("message",(function(e){var r="string"==typeof e.data?JSON.parse(e.data):e.data,n=r.message_id;if("worker_reply"===r.type)hi[n]&&(r.error?hi[n].reject(r.error):hi[n].resolve(r.message),delete hi[n]);else if("worker_send"===r.type&&null!=n){var i=Ln(Ai(r.method),2),o=i[0],a=i[1],s="Worker broker could not dispatch message type ".concat(r.method," on target ").concat(r.target,".");if(!a)throw Error(s+di);var l="function"==typeof a[o]&&a[o];if(!l)throw Error(s+gi);var u,c=yi;try{u=l.apply(a,r.message)}catch(e){c=e}var h,f=[];u&&"function"==typeof u.then?u.then((function(e){e instanceof ui.withTransferables&&(f=e.transferables,e=e.value[0]),h={type:"main_reply",message_id:n,message:e},t.postMessage(h,f.map((function(t){return t.object}))),vi(f)}),(function(e){t.postMessage({type:"main_reply",message_id:n,error:e instanceof Error?"".concat(e.message,": ").concat(e.stack):e})})):(u instanceof ui.withTransferables&&(f=u.transferables,u=u.value[0]),h={type:"main_reply",message_id:n,message:u,error:c instanceof Error?"".concat(c.message,": ").concat(c.stack):c},t.postMessage(h,f.map((function(t){return t.object}))),vi(f))}}))},ui.getMessages=function(){return hi},ui.getMessageId=function(){return ci}),li.is_worker&&(ui.postMessage=function(t){for(var e=arguments.length,r=new Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i={};"object"===yn(t)&&(t=(i=t).method);var o,a=new Promise((function(e,n){hi[ci]={method:t,message:r,resolve:e,reject:n}})),s=[];return r&&1===r.length&&r[0]instanceof ui.withTransferables&&(s=r[0].transferables,r=r[0].value),o={type:"worker_send",message_id:ci,method:t,message:r},i.stringify&&(o=JSON.stringify(o)),self.postMessage(o,s.map((function(t){return t.object}))),vi(s),ci++,a},self.addEventListener("message",(function(t){var e="string"==typeof t.data?JSON.parse(t.data):t.data,r=e.message_id;if("main_reply"===e.type)hi[r]&&(e.hasOwnProperty("error")&&e.error!==yi?hi[r].reject(e.error):hi[r].resolve(e.message),delete hi[r]);else if("main_send"===e.type&&null!=r){var n=Ln(Ai(e.method),2),i=n[0],o=n[1],a="Worker broker could not dispatch message type ".concat(e.method," on target ").concat(e.target,".");if(!o)throw Error(a+di);var s,l,u="function"==typeof o[i]&&o[i];if(!u)throw Error(a+gi);try{s=u.apply(o,e.message)}catch(t){l=t}var c,h=[];s instanceof Promise?s.then((function(t){t instanceof ui.withTransferables&&(h=t.transferables,t=t.value[0]),c={type:"worker_reply",message_id:r,message:t},self.postMessage(c,h.map((function(t){return t.object}))),vi(h)}),(function(t){self.postMessage({type:"worker_reply",message_id:r,error:t instanceof Error?"".concat(t.message,": ").concat(t.stack):t})})):(s instanceof ui.withTransferables&&(h=s.transferables,s=s.value[0]),c={type:"worker_reply",message_id:r,message:s,error:l instanceof Error?"".concat(l.message,": ").concat(l.stack):l},self.postMessage(c,h.map((function(t){return t.object}))),vi(h))}})));var mi,bi={silent:-1,error:0,warn:1,info:2,debug:3,trace:4},_i={},wi={};function xi(t){var e,r="object"===yn(t)?t.level:t;if(bi[r]<=bi[xi.level]){for(var n=arguments.length,i=new Array(1<n?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];if(li.is_native_worker)ui.postMessage.apply(ui,[{method:"_logProxy",stringify:!0},t].concat(i));else{if("object"===yn(t)&&!0===t.once){if(wi[JSON.stringify(i)])return;wi[JSON.stringify(i)]=!0}var a=(_i[e=r]=_i[e]||(console[e]?console[e]:console.log).bind(console),_i[e]);1<i.length?a.apply(void 0,["Tangram [".concat(r,"]: ").concat(i[0])].concat(In(i.slice(1)))):a("Tangram [".concat(r,"]: ").concat(i[0]))}}}function Ei(t,e,r){var n,i;return r=r||0,function(){var o=this,a=arguments;function s(){i=0,t.apply(o,a)}clearTimeout(n),i&&r&&Date.now()-i>=r?s():(i=i||Date.now(),n=setTimeout((function(){s()}),e))}}xi.level="info",xi.workers=null,xi.setLevel=function(t){xi.level=t,li.is_main&&Array.isArray(xi.workers)&&ui.postMessage(xi.workers,"_logSetLevelProxy",t)},li.is_main&&(xi.setWorkers=function(t){xi.workers=t},xi.reset=function(){wi={}}),ui.addTarget("_logProxy",xi),ui.addTarget("_logSetLevelProxy",xi.setLevel);var Bi=mi={};ui.addTarget("Utils",mi),mi.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},mi.isMicrosoft=function(){return/(Trident\/7.0|Edge[ /](\d+[\.\d]+))/i.test(navigator.userAgent)},mi._requests={},mi._proxy_requests={},mi.io=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6e4,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"text",n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"GET",i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,a=6<arguments.length&&void 0!==arguments[6]&&arguments[6];if(li.is_worker&&mi.isMicrosoft())return xi("debug","Proxying request for URL to worker",t),o&&(mi._proxy_requests[o]=!0),ui.postMessage("Utils.io",t,e,r,n,i,o,!0);var s=new XMLHttpRequest,l=(l=new Promise((function(i,o){s.open(n,t,!0),s.timeout=e,s.responseType=r,s.onload=function(){200===s.status?-1<["text","json"].indexOf(s.responseType)?i(s.responseText):i(s.response):o(Error("Request error with a status of "+s.statusText))},s.onerror=function(t){o(Error("There was a network error"+t.toString()))},s.ontimeout=function(t){o(Error("timeout "+t.toString()))},s.send()}))).then((function(t){return o&&delete mi._requests[o],a?ui.withTransferables(t):t}));return o&&(mi._requests[o]=s),l},mi.cancelRequest=function(t){if(li.is_worker&&mi._proxy_requests[t])return ui.postMessage("Utils.cancelRequest",t);mi._requests[t]?(xi("trace","Cancelling network request key '".concat(t,"'")),mi._requests[t].abort(),delete mi._requests[t]):xi("trace","Could not find network request key '".concat(t,"'"))},mi.requestAnimationFramePolyfill=function(){"function"!=typeof window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)})},mi.serializeWithFunctions=function(t){return"function"==typeof t?t.toString():JSON.stringify(t,(function(t,e){return"function"==typeof e?e.toString():e}))},mi.stringsToFunctions=function(t,e){if("string"==typeof t)t=mi.stringToFunction(t,e);else if(null!=t&&"object"===yn(t))for(var r in t)t[r]=mi.stringsToFunctions(t[r],e);return t},mi._use_count=0,mi._function_cache={};var Ci,Si,ki=Ei((function(){xi("trace","Cleared cached ".concat(Object.keys(mi._function_cache).length," functions (reused ").concat(mi._use_count," times)")),mi._use_count=0,mi._function_cache={}}),1e4),Ti=/^\s*function[^(]*\(([^)]*)\)\s*?\{([\s\S]*)\}$/m;function Ni(t){if("string"!=typeof t||-1!==t.search(/^(data|blob):/))return"";var e=t.indexOf("?");-1<e&&(t=t.substr(0,e));var r=t.indexOf("#");return-1<r&&(t=t.substr(0,r)),t.substr(0,t.lastIndexOf("/")+1)||""}function Li(t){return"string"==typeof t&&!(-1<t.search(/^(http|https|data|blob):/)||"//"===t.substr(0,2))}function Ii(t){return void 0===Ci&&"function"!=typeof(Ci=window.URL&&window.URL.createObjectURL||window.webkitURL&&window.webkitURL.createObjectURL)&&(Ci=null,xi("warn","window.URL.createObjectURL (or vendor prefix) not found, unable to create local blob URLs")),Ci?Ci(t):t}mi.stringToFunction=function(t,e){var r=t;e&&(r+=e.toString());var n=mi._function_cache[r];if(ki(),n)return mi._use_count++,n;var i="string"==typeof t&&t.match(Ti);if(i&&2<i.length)try{var o=i[2],a=0<(a=0<i[1].length&&i[1].split(",").map((function(t){return t.trim()})).filter((function(t){return t}))).length?a:["context"],s=new Function(a.toString(),"function"==typeof e?e(o):o);return mi._function_cache[r]=s}catch(e){return t}return t},mi.device_pixel_ratio=1,mi.isPowerOf2=function(t){return 0==(t&t-1)},mi.interpolate=function(t,e,r){if(!Array.isArray(e)||!Array.isArray(e[0]))return e;if(e.length<1)return e;var n,i,o,a,s;if(t<=e[0][0])a=e[0][1],"function"==typeof r&&(a=r(a));else if(t>=e[e.length-1][0])a=e[e.length-1][1],"function"==typeof r&&(a=r(a));else for(var l=0;l<e.length-1;l++)if(t>=e[l][0]&&t<e[l+1][0]){if(n=e[l][0],i=e[l+1][0],Array.isArray(e[l][1])){a=[];for(var u=0;u<e[l][1].length;u++)"function"==typeof r?(s=r(e[l][1][u]),o=r(e[l+1][1][u])-s,a[u]=o*(t-n)/(i-n)+s):(o=e[l+1][1][u]-e[l][1][u],a[u]=o*(t-n)/(i-n)+e[l][1][u])}else a="function"==typeof r?(s=r(e[l][1]),(o=r(e[l+1][1])-s)*(t-n)/(i-n)+s):(o=e[l+1][1]-e[l][1])*(t-n)/(i-n)+e[l][1];break}return a},mi.toCSSColor=function(t){return 1===t[3]?"rgb(".concat(t.slice(0,3).map((function(t){return Math.round(255*t)})).join(", "),")"):"rgba(".concat(t.map((function(t,e){return e<3&&Math.round(255*t)||t})).join(", "),")")},mi.pointInTile=function(t){return 0<=t[0]&&t[1]>-$n.tile_scale&&t[0]<$n.tile_scale&&t[1]<=0},mi.zoomToTileLevel=function(t){return Math.floor(t)};var Mi=function(){function t(e,r){var n=this;if(vn(this,t),this.config=e,this.sources=r,this.id=e.id,this.name=e.name,this.pad_scale=e.pad_scale||1e-4,this.default_winding=null,this.rasters=[],Array.isArray(e.rasters)&&e.rasters.forEach((function(t){-1===n.rasters.indexOf(t)&&n.rasters.push(t)})),this.preprocess=e.preprocess,"function"==typeof this.preprocess&&this.preprocess.bind(this),this.transform=e.transform,"function"==typeof this.transform)this.transform=this.transform.bind(this);else if("object"===yn(this.transform))for(var i in this.transform)"function"==typeof this.transform[i]&&(this.transform[i]=this.transform[i].bind(this));this.extra_data=e.extra_data,this.scripts=e.scripts,this.max_zoom=null!=e.max_zoom?e.max_zoom:$n.default_source_max_zoom,this.setTileSize(e.tile_size),this.max_coord_zoom=this.max_zoom+this.zoom_bias,this.min_display_zoom=null!=e.min_display_zoom?e.min_display_zoom:0,this.max_display_zoom=null!=e.max_display_zoom?e.max_display_zoom:null,this._has_volatile_data=!!e.has_volatile_data}return bn(t,[{key:"hasLabeledData",value:function(){return!0}},{key:"_transformTile",value:function(t){if(t.source_data.layers){var e={coords:t.coords},r=[];if("function"==typeof this.transform)r.push(this.transform);else if("object"===yn(this.transform))for(var n=Object.keys(this.transform).sort(),i=0;i<n.length;i++)r.push(this.transform[n[i]]);for(var o=1===Object.keys(t.source_data.layers).length&&t.source_data.layers._default,a=0;a<r.length;a++)o?t.source_data.layers._default=r[a](t.source_data.layers._default,this.extra_data,e):t.source_data.layers=r[a](t.source_data.layers,this.extra_data,e)}}},{key:"_postProcessTile",value:function(t){var e=this;for(var r in this._transformTile(t),t.source_data.layers){var n=t.source_data.layers[r];n&&n.features&&n.features.forEach((function(t){$n.transformGeometry(t.geometry,(function(t){t[1]=-t[1],e.pad_scale&&(t[0]=Math.round(t[0]*(1+e.pad_scale)-$n.tile_scale*e.pad_scale/2),t[1]=Math.round(t[1]*(1+e.pad_scale)-$n.tile_scale*e.pad_scale/2))})),e.updateDefaultWinding(t.geometry)}))}t.default_winding=this.default_winding||"CCW"}},{key:"load",value:function(t){return t.source_data={},t.source_data.layers={},t.pad_scale=this.pad_scale,t.rasters=In(this.rasters),this._load(t)}},{key:"_load",value:function(){throw new oi("_load")}},{key:"setTileSize",value:function(t){this.tile_size=t||256,("number"!=typeof this.tile_size||this.tile_size<256||!Bi.isPowerOf2(this.tile_size))&&(xi({level:"warn",once:!0},"Data source '".concat(this.name,"': 'tile_size' parameter must be a number that is a power of 2 greater than or equal to 256, but was '").concat(t,"'")),this.tile_size=256),this.zoom_bias=Math.log2(this.tile_size)-8}},{key:"updateDefaultWinding",value:function(t){return null==this.default_winding&&("Polygon"===t.type?this.default_winding=$n.ringWinding(t.coordinates[0]):"MultiPolygon"===t.type&&(this.default_winding=$n.ringWinding(t.coordinates[0][0]))),this.default_winding}},{key:"includesTile",value:function(t,e){if(t.z<this.min_display_zoom||null!=this.max_display_zoom&&e>this.max_display_zoom)return!1;for(var r=0;r<this.rasters.length;r++){var n=this.rasters[r];if(this.sources[n]&&this.sources[n]!==this&&!this.sources[n].includesTile(t,t.z))return!1}return!0}},{key:"has_volatile_data",get:function(){return this._has_volatile_data},set:function(t){var e=0<arguments.length&&void 0!==t&&t;this._has_volatile_data=e}}],[{key:"create",value:function(e,r){for(var n in r)if(r[n].config.name===e.name&&t.sameConfig(r[n],{config:e}))return r[n];if(t.types[e.type])return new t.types[e.type](e,r)}},{key:"sameConfig",value:function(t,e){if(!t||!e)return!1;var r=Object.assign({},t.config,{id:null,tiled:null,url:null}),n=Object.assign({},e.config,{id:null,tiled:null,url:null});return JSON.stringify(r)===JSON.stringify(n)}},{key:"coordsToMeters",value:function(t){var e=Ln($n.latLngToMeters(t),2),r=e[0],n=e[1];t[0]=r,t[1]=n}},{key:"projectData",value:function(e){for(var r in e.layers)for(var n=e.layers[r].features.length,i=0;i<n;i++){var o=e.layers[r].features[i];$n.transformGeometry(o.geometry,t.coordsToMeters)}}},{key:"metersToTileUnits",value:function(t,e,r){r[0]=Math.round((r[0]-e.x)*t),r[1]=-1*Math.round((r[1]-e.y)*t)}},{key:"scaleData",value:function(e,r){var n=r.coords.z,i=r.min,o=(r.max,t.metersToTileUnits.bind(this,$n.unitsPerMeter(n),i));for(var a in e.layers)for(var s=e.layers[a].features.length,l=0;l<s;l++){var u=e.layers[a].features[l];$n.transformGeometry(u.geometry,o)}}},{key:"register",value:function(e,r){e&&r&&(t.types[r]=e)}}]),t}();Mi.types={};var Oi=0,Pi=function(){wn(e,Mi);var t=Tn(e);function e(r,n){var i;vn(this,e),(i=t.call(this,r,n)).response_type="";var o=Ln(function(t,e){if(!e||0===Object.keys(e).length)return[t,[]];var r=t.indexOf("?"),n=t.indexOf("#"),i="";-1<n&&(i=t.slice(n),t=t.slice(0,n)),-1===r&&(r=t.length,t+="?"),r++;var o="",a=[];for(var s in e)""===function(t,e){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))}(s,t)?o+="".concat(s,"=").concat(e[s],"&"):a.push([s,e[s]]);return[t=t.slice(0,r)+o+t.slice(r)+i,a]}(r.url,r.url_params),2),a=o[0],s=o[1];if(i.url=a,s.forEach((function(t){var e=Ln(t,2),n=e[0],o=e[1];xi({level:"warn",once:!0},"Data source '".concat(i.name,"': parameter '").concat(n,"' already present in URL '").concat(r.url,"', ")+"skipping value '".concat(n,"=").concat(o,"' specified in 'url_params'"))})),"string"!=typeof i.url)throw Error("Network data source must provide a string `url` property");return i}return bn(e,[{key:"_load",value:function(t){var e=this,r=this.formatUrl(this.url,t),n=t.source_data;return n.url=r,new Promise((function(i,o){n.error=null;var a=Oi+++"-"+r,s=Bi.io(r,6e4,e.response_type,"GET",{},a);n.request_id=a,s.then((function(r){"function"==typeof e.preprocess&&(r=e.preprocess(r)),(r=r instanceof Promise?r:Promise.resolve(r)).then((function(r){e.parseSourceData(t,n,r),e._postProcessTile(t),i(t)}))}),(function(r){n.error=r.stack,e._postProcessTile(t),i(t)}))}))}},{key:"formatUrl",value:function(){throw new oi("formatUrl")}},{key:"parseSourceData",value:function(){throw new oi("parseSourceData")}}]),e}(),Fi=function(){wn(e,Pi);var t=Tn(e);function e(r,n){var i;return vn(this,e),(i=t.call(this,r,n)).tiled=!0,i.parseBounds(r),i.builds_geometry_tiles=!1,i.tms=!0===r.tms,-1<i.url.search("{s}")&&(Array.isArray(r.url_subdomains)&&0<r.url_subdomains.length?(i.url_subdomains=r.url_subdomains,i.next_url_subdomain=0):xi({level:"warn",once:!0},"Data source '".concat(i.name,"': source URL includes '{s}' subdomain marker ('").concat(i.url,"'), but no subdomains ")+"were specified in 'url_subdomains' parameter")),i}return bn(e,[{key:"parseBounds",value:function(t){var e,r,n,i,o;Array.isArray(t.bounds)&&4===t.bounds.length&&(this.bounds=t.bounds,r=(e=Ln(this.bounds,4))[0],n=e[1],i=e[2],o=e[3],this.bounds_meters={min:$n.latLngToMeters([r,o]),max:$n.latLngToMeters([i,n])},this.bounds_tiles={min:{},max:{}})}},{key:"checkBounds",value:function(t){if(this.bounds){t=$n.wrapTile(t,{x:!0});var e=(e=this.bounds_tiles.min[t.z])||(this.bounds_tiles.min[t.z]=$n.tileForMeters(this.bounds_meters.min,t.z)),r=(r=this.bounds_tiles.max[t.z])||(this.bounds_tiles.max[t.z]=$n.tileForMeters(this.bounds_meters.max,t.z));if(t.x<e.x||t.x>r.x||t.y<e.y||t.y>r.y)return!1}return!0}},{key:"includesTile",value:function(t,r){return!!Nn(xn(e.prototype),"includesTile",this).call(this,t,r)&&!!this.checkBounds(t)}},{key:"formatUrl",value:function(t,e){var r=$n.wrapTile(e.coords,{x:!0});this.tms&&(r.y=Math.pow(2,r.z)-1-r.y);var n=t.replace("{x}",r.x).replace("{y}",r.y).replace("{z}",r.z);return null!=this.url_subdomains&&(n=n.replace("{s}",this.url_subdomains[this.next_url_subdomain]),this.next_url_subdomain=(this.next_url_subdomain+1)%this.url_subdomains.length),n}},{key:"urlHasTilePattern",value:function(t){return t&&-1<t.search("{x}")&&-1<t.search("{y}")&&-1<t.search("{z}")}}]),e}(),Ui=function(){wn(e,Mi);var t=Tn(e);function e(r,n){var i;return vn(this,e),(i=t.call(this,r,n)).target_name="MapsJsSource"+r.uid,i.tiled=!!r.tiled,ui.addTarget(i.target_name,kn(i)),li.is_worker&&ui.postMessage(i.target_name+".onWorkerInitialized"),li.is_main&&(i._workers_left=0),i}return bn(e,[{key:"initialize",value:function(t,e,r,n){this._main_initialized||(this.provider=t,this.worker=n,this._workers_left+=r,this._on_update=e,this._main_initialized=!0,this._onProviderUpdate=this._onProviderUpdate.bind(this),t.addEventListener("update",this._onProviderUpdate),this._isReady()&&this.onReady())}},{key:"onWorkerInitialized",value:function(){--this._workers_left,this._isReady()&&this.onReady()}},{key:"onReady",value:function(){}},{key:"_isReady",value:function(){return this._main_initialized&&!this._workers_left}},{key:"_onProviderUpdate",value:function(t){this._isReady()&&this.onProviderUpdate(t)}},{key:"onProviderUpdate",value:function(t){this.dispatchUpdate(void 0,t.data)}},{key:"dispatchUpdate",value:function(t,e){this._on_update(this.name,t,e)}},{key:"dispose",value:function(){ui.removeTarget(this.target_name),this.provider.removeEventListener("update",this._onProviderUpdate)}}]),e}(),Ri=function(t,e,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,h=r?i-1:0,f=r?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;0<c;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;0<c;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=u}return(p?-1:1)*a*Math.pow(2,o-n)},Di=function(t,e,r,n,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,A=n?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(e+=1<=a+h?f/l:f*Math.pow(2,1-h))*l&&(a++,l/=2),c<=a+h?(s=0,a=c):1<=a+h?(s=(e*l-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));8<=i;t[r+p]=255&s,p+=A,s/=256,i-=8);for(a=a<<i|s,u+=i;0<u;t[r+p]=255&a,p+=A,a/=256,u-=8);t[r+p-A]|=128*d},ji=Hi;function Hi(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Hi.Varint=0,Hi.Fixed64=1,Hi.Bytes=2,Hi.Fixed32=5;var Qi=4294967296,zi=1/Qi;function Vi(t){return t.type===Hi.Bytes?t.readVarint()+t.pos:t.pos+1}function Gi(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function qi(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;t<=i;i--)r.buf[i+n]=r.buf[i]}function Ki(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function Yi(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function Wi(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function Xi(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function Ji(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function Zi(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function $i(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function to(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function eo(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function ro(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function no(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function io(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}Hi.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=7&n,t(i,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=ro(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=io(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=ro(this.buf,this.pos)+ro(this.buf,this.pos+4)*Qi;return this.pos+=8,t},readSFixed64:function(){var t=ro(this.buf,this.pos)+io(this.buf,this.pos+4)*Qi;return this.pos+=8,t},readFloat:function(){var t=Ri(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Ri(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e=this.buf,r=e[this.pos++],n=127&r;return r<128?n:(n|=(127&(r=e[this.pos++]))<<7,r<128?n:(n|=(127&(r=e[this.pos++]))<<14,r<128?n:(n|=(127&(r=e[this.pos++]))<<21,r<128?n:function(t,e,r){var n,i,o=r.buf;if(n=(112&(i=o[r.pos++]))>>4,i<128)return Gi(t,n,e);if(n|=(127&(i=o[r.pos++]))<<3,i<128)return Gi(t,n,e);if(n|=(127&(i=o[r.pos++]))<<10,i<128)return Gi(t,n,e);if(n|=(127&(i=o[r.pos++]))<<17,i<128)return Gi(t,n,e);if(n|=(127&(i=o[r.pos++]))<<24,i<128)return Gi(t,n,e);if(n|=(1&(i=o[r.pos++]))<<31,i<128)return Gi(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(r=e[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,r){for(var n,i,o,a="",s=e;s<r;){var l=t[s],u=null,c=239<l?4:223<l?3:191<l?2:1;if(r<s+c)break;1===c?l<128&&(u=l):2===c?128==(192&(n=t[s+1]))&&(u=(31&l)<<6|63&n)<=127&&(u=null):3===c?(n=t[s+1],i=t[s+2],128==(192&n)&&128==(192&i)&&((u=(15&l)<<12|(63&n)<<6|63&i)<=2047||55296<=u&&u<=57343)&&(u=null)):4===c&&(n=t[s+1],i=t[s+2],o=t[s+3],128==(192&n)&&128==(192&i)&&128==(192&o)&&((u=(15&l)<<18|(63&n)<<12|(63&i)<<6|63&o)<=65535||1114112<=u)&&(u=null)),null===u?(u=65533,c=1):65535<u&&(u-=65536,a+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),a+=String.fromCharCode(u),s+=c}return a}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var r=Vi(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=Vi(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=Vi(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=Vi(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=Vi(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=Vi(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=Vi(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=Vi(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=Vi(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Hi.Varint)for(;127<this.buf[this.pos++];);else if(e===Hi.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Hi.Fixed32)this.pos+=4;else{if(e!==Hi.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e,r=this.length||16;r<this.pos+t;)r*=2;r!==this.length&&((e=new Uint8Array(r)).set(this.buf),this.buf=e,this.length=r)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),no(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),no(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),no(this.buf,-1&t,this.pos),no(this.buf,Math.floor(t*zi),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),no(this.buf,-1&t,this.pos),no(this.buf,Math.floor(t*zi),this.pos+4),this.pos+=8},writeVarint:function(t){268435455<(t=+t||0)||t<0?function(t,e){var r,n;if(0<=t?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:n=n+1|(r=0)),0x10000000000000000<=t||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e){e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos]=127&t}(r,e),function(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(127<t?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,i,o=0;o<e.length;o++){if(55295<(n=e.charCodeAt(o))&&n<57344){if(!i){56319<n||o+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;128<=r&&qi(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),Di(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Di(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;128<=n&&qi(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,Hi.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){this.writeMessage(t,Ki,e)},writePackedSVarint:function(t,e){this.writeMessage(t,Yi,e)},writePackedBoolean:function(t,e){this.writeMessage(t,Ji,e)},writePackedFloat:function(t,e){this.writeMessage(t,Wi,e)},writePackedDouble:function(t,e){this.writeMessage(t,Xi,e)},writePackedFixed32:function(t,e){this.writeMessage(t,Zi,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,$i,e)},writePackedFixed64:function(t,e){this.writeMessage(t,to,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,eo,e)},writeBytesField:function(t,e){this.writeTag(t,Hi.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Hi.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Hi.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Hi.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Hi.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Hi.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Hi.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Hi.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Hi.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Hi.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}},Kn.prototype.loadGeometry=function(t){var e=this._pbf;e.pos=this._geometry;for(var r,n,i=e.readVarint()+e.pos,o=1,a=0,s=0,l=0,u=[];e.pos<i;)if(a<=0&&(o=7&(n=e.readVarint()),a=n>>3),a--,1===o||2===o)s+=e.readSVarint(),l+=e.readSVarint(),1===o&&(r&&u.push(r),r=[]),r.push([s*t,l*t]);else{if(7!==o)throw new Error("unknown command "+o);r&&r.push(r[0].slice())}return r&&u.push(r),u};var oo=1,ao=2,so=3;function lo(t){var e=[],r=t&&t.features;if(r)for(var n=0,i=r.length;n<i;n++){var o=r[n],a=o.type,s=void 0;switch(a){case oo:s={type:"MultiPoint",coordinates:o.geometry.map((function(t){return t.slice()}))};break;case ao:case so:if(s={type:"MultiLineString",coordinates:o.geometry.map((function(t){return t.map((function(t){return t.slice()}))}))},a===so&&null==(s=uo(s)))continue;break;default:continue}e.push({id:o.id,type:"Feature",geometry:s,properties:o.tags})}return{type:"FeatureCollection",features:e}}function uo(t){for(var e,r=[],n=[],i=0,o=t.coordinates.length;i<o;i++){var a=t.coordinates[i],s=$n.ringWinding(a);null!=s&&(s===(e=e||s)&&n.length&&(r.push(n),n=[]),n.push(a))}return 0<n.length&&r.push(n),1===r.length?(t.type="Polygon",t.coordinates=r[0]):1<r.length?(t.type="MultiPolygon",t.coordinates=r):t=null,t}var co={type:"FeatureCollection",features:[]},ho=function(){wn(e,Ui);var t=Tn(e);function e(r,n){return vn(this,e),r.tiled=!0,t.call(this,r,n)}return bn(e,[{key:"fetchTile",value:function(t,e,r){return this.provider?this.provider.requestTileAsPromise(t,e,r).then((function(t){return t.data})):Promise.resolve()}},{key:"_load",value:function(t){var e=this,r=$n.wrapTile(t.coords,{x:!0,y:!0}),n=r.x,i=r.y,o=r.z;return ui.postMessage(this.target_name+".fetchTile",n,i,o).then((function(r){var n;return r instanceof ArrayBuffer?(n=new ji(new Uint8Array(r)),t.source_data.layers=function(t){var e={};for(var r in t.layers){for(var n=t.layers[r],i=[],o=$n.tile_scale/n.extent,a=0,s=n.length;a<s;a++){var l=n.feature(a),u=Kn.types[l.type],c=l.loadGeometry(o),h=null;switch(u){case"Point":h=function(t){var e=t.coordinates.length;if(1<e){t.type="MultiPoint";for(var r=[],n=0;n<e;n++)r.push(t.coordinates[n][0]);t.coordinates=r}else t.type="Point",t.coordinates=t.coordinates[0][0];return t}({coordinates:c});break;case"LineString":h=1===c.length?{type:u,coordinates:c[0]}:{type:"MultiLineString",coordinates:c};break;case"Polygon":h=uo({coordinates:c})}h&&h.coordinates&&i.push({type:"Feature",geometry:h,properties:l.properties})}e[r]={type:"FeatureCollection",features:i}}return e}(new qn(n))):r?t.source_data.error=r:t.source_data.layers={_default:co},e._postProcessTile(t),t}))}},{key:"onReady",value:function(){this.dispatchUpdate()}}]),e}();function fo(t){return Math.max(t,0)}function po(t){return isNaN(t)?0:t}function Ao(t){return Array.isArray(t)?t.map(parseFloat).map(po):po(parseFloat(t))}function go(t){return Array.isArray(t)?t.map(Ao).map(fo):fo(Ao(t))}Mi.register(ho,"MVT"),Mi.register(ho,"OMV");var yo=a((function(t,e){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(t){return(t=Math.round(t))<0?0:255<t?255:t}function i(t){return t<0?0:1<t?1:t}function o(t){return"%"===t[t.length-1]?n(parseFloat(t)/100*255):n(parseInt(t))}function a(t){return"%"===t[t.length-1]?i(parseFloat(t)/100):i(parseFloat(t))}function s(t,e,r){return r<0?r+=1:1<r&&--r,6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}try{e.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in r)return r[i].slice();if("#"===i[0])return 4===i.length?0<=(e=parseInt(i.substr(1),16))&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&0<=(e=parseInt(i.substr(1),16))&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=i.indexOf("("),u=i.indexOf(")");if(-1!==l&&u+1===i.length){var c=i.substr(0,l),h=i.substr(l+1,u-(l+1)).split(","),f=1;switch(c){case"rgba":if(4!==h.length)return null;f=a(h.pop());case"rgb":return 3!==h.length?null:[o(h[0]),o(h[1]),o(h[2]),f];case"hsla":if(4!==h.length)return null;f=a(h.pop());case"hsl":if(3!==h.length)return null;var p=(parseFloat(h[0])%360+360)%360/360,A=a(h[1]),d=a(h[2]),g=d<=.5?d*(A+1):d+A-d*A,y=2*d-g;return[n(255*s(y,g,p+1/3)),n(255*s(y,g,p)),n(255*s(y,g,p-1/3)),f];default:return null}}return null}}catch(t){}})),vo=(yo.parseCSSColor,{});Object.assign(vo,{clampPositive:fo,noNaN:po,parseNumber:Ao,parsePositiveNumber:go}),vo.wrapFunction=function(t){return"\n        var feature = context.feature.properties;\n        var global = context.global;\n        var $zoom = context.zoom;\n        var $layer = context.layer;\n        var $source = context.source;\n        var sources = context.sources;\n        var $geometry = context.geometry;\n        var $meters_per_pixel = context.meters_per_pixel;\n\n        var val = (function(){ ".concat(t," }());\n\n        if (typeof val === 'number' && isNaN(val)) {\n            val = null; // convert NaNs to nulls\n        }\n\n        return val;\n    ")},vo.zeroPair=Object.freeze([0,0]),vo.defaults={color:[1,1,1,1],width:1,size:1,extrude:!1,height:20,min_height:0,order:0,z:0,outline:{color:[0,0,0,0],width:0},material:{ambient:1,diffuse:1}},vo.macros={"Style.color.pseudoRandomColor":function(){return[parseInt(feature.id,16)/100%1*.7,parseInt(feature.id,16)/1e4%1*.7,parseInt(feature.id,16)/1e6%1*.7,1]},"Style.color.randomColor":function(){return[.7*Math.random(),.7*Math.random(),.7*Math.random(),1]}},vo.getFeatureParseContext=function(t,e,r,n){return{feature:t,tile:e,global:r,sources:n,zoom:e.style_zoom,geometry:$n.geometryType(t.geometry.type),meters_per_pixel:e.meters_per_pixel,meters_per_pixel_sq:e.meters_per_pixel_sq,units_per_meter_overzoom:e.units_per_meter_overzoom}};var mo={STATIC:0,DYNAMIC:1,ZOOM:2};function bo(t){return"string"==typeof t&&"%"===t[t.length-1]}function _o(t){return"auto"===t}function wo(t){return bo(t)||_o(t)}vo.CACHE_TYPE=mo,vo.createPropertyCache=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(null!=t){if(t.value)return{value:t.value,zoom:t.zoom?{}:null,type:t.type};var r={value:t,type:mo.STATIC};return Array.isArray(r.value)&&Array.isArray(r.value[0])?(r.zoom={},r.type=mo.ZOOM):"function"==typeof r.value&&(r.type=mo.DYNAMIC),"function"==typeof e&&(r.zoom?r.value=r.value.map((function(t,r){return[t[0],e(t[1],r)]})):"function"!=typeof r.value&&(r.value=e(r.value,0))),r}},vo.createColorPropertyCache=function(t){return vo.createPropertyCache(t,(function(t){return"Style.color.pseudoRandomColor"===t?Bi.stringToFunction(vo.wrapFunction(vo.macros["Style.color.pseudoRandomColor"])):"Style.color.randomColor"===t?vo.macros["Style.color.randomColor"]:t}))};var xo="'size' can specify either width or height as derived from aspect ratio, but not both";vo.createPointSizePropertyCache=function(t){var e=null,r=null;if(bo(t))e=[!0];else if(Array.isArray(t))if(Array.isArray(t[0])){if(t.some((function(t){return Array.isArray(t[1])?t[1].some(wo):bo(t[1])}))&&(e=t.map((function(t){return Array.isArray(t[1])?t[1].map(bo):bo(t[1])})),(r=t.map((function(t){return Array.isArray(t[1])&&t[1].map(_o)}))).some((function(t){return Array.isArray(t)&&t.every((function(t){return t}))}))))throw xo}else if(t.some(wo)&&(e=[t.map(bo)],(r=[t.map(_o)])[0].every((function(t){return t}))))throw xo;return e?((t={value:t}).has_pct=e,t.has_ratio=r,t.sprites={}):t=vo.createPropertyCache(t,go),t},vo.evalCachedPointSizeProperty=function(t,e,r){return t.has_pct||t.has_ratio?e?(t.sprites[e.sprite]||(t.sprites[e.sprite]=vo.createPropertyCache(t.value,(function(r,n){return Array.isArray(r)?(r=r.map((function(e,r){return t.has_ratio[n][r]?e:go(e)})).map((function(r,i){return t.has_pct[n][i]?e.css_size[i]*r/100:r})),t.has_ratio[n][0]?r[0]=r[1]*e.aspect:t.has_ratio[n][1]&&(r[1]=r[0]/e.aspect)):(r=go(r),r=t.has_pct[n]?e.css_size.map((function(t){return t*r/100})):[r,r]),r}))),vo.evalCachedProperty(t.sprites[e.sprite],r)):void 0:vo.evalCachedProperty(t,r)},vo.evalCachedProperty=function(t,e){if(null!=t)return t.dynamic?t.dynamic(e):t.static?t.static:t.zoom&&t.zoom[e.zoom]?t.zoom[e.zoom]:"function"!=typeof t.value?Array.isArray(t.value)&&Array.isArray(t.value[0])?(t.zoom=t.zoom||{},t.zoom[e.zoom]=Bi.interpolate(e.zoom,t.value),t.zoom[e.zoom]):(t.static=t.value,t.static):(t.dynamic=t.value,t.dynamic(e))},vo.convertUnits=function(t,e){if(null!=t.val)return"px"===t.units?t.val*$n.metersPerPixel(e.zoom):t.val;if("string"==typeof t)"px"===t.trim().slice(-2)?(t=Ao(t),t*=$n.metersPerPixel(e.zoom)):t=Ao(t);else if(Array.isArray(t))return Array.isArray(t[0])?t.map((function(t){return[t[0],vo.convertUnits(t[1],e)]})):t.map((function(t){return vo.convertUnits(t,e)}));return t},vo.parseUnits=function(t){var e={val:Ao(t)};return 0!==e.val&&"string"==typeof t&&"px"===t.trim().slice(-2)&&(e.units="px"),e},vo.evalCachedDistanceProperty=function(t,e){return t.dynamic?t.dynamic(e):t.zoom&&t.zoom[e.zoom]?t.zoom[e.zoom]:"function"!=typeof t.value?t.zoom?(t.zoom[e.zoom]=Bi.interpolate(e.zoom,t.value,(function(t){return vo.convertUnits(t,e)})),t.zoom[e.zoom]):vo.convertUnits(t.value,e):(t.dynamic=t.value,t.dynamic(e))},vo.string_colors={},vo.colorForString=function(t){if(vo.string_colors[t])return vo.string_colors[t];var e=null;return"none"!==t&&((e=yo.parseCSSColor(t))&&4===e.length?(e[0]/=255,e[1]/=255,e[2]/=255):e=vo.defaults.color),vo.string_colors[t]=e},vo.evalCachedColorProperty=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(t.dynamic){var r=t.dynamic(e);return"string"==typeof r&&(r=vo.colorForString(r)),r&&null==r[3]&&(r[3]=1),r}if(t.static)return t.static;if(t.zoom&&t.zoom[e.zoom])return t.zoom[e.zoom];if("function"==typeof t.value){t.dynamic=t.value;var n=t.dynamic(e);return"string"==typeof n&&(n=vo.colorForString(n)),n&&null==n[3]&&(n[3]=1),n}if("string"==typeof t.value)return t.static=vo.colorForString(t.value),t.static;if(t.zoom){if(!t.zoom_preprocessed){for(var i=0;i<t.value.length;i++){var o=t.value[i];o&&"string"==typeof o[1]&&(o[1]=vo.colorForString(o[1]))}t.zoom_preprocessed=!0}return t.zoom[e.zoom]=Bi.interpolate(e.zoom,t.value),t.zoom[e.zoom][3]=t.zoom[e.zoom][3]||1,t.zoom[e.zoom]}return t.static=t.value.map((function(t){return t})),t.static&&null==t.static[3]&&(t.static[3]=1),t.static},vo.parseColor=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("function"==typeof t&&(t=t(e)),"string"==typeof t)t=vo.colorForString(t);else if(Array.isArray(t)&&Array.isArray(t[0])){for(var r=0;r<t.length;r++){var n=t[r];"string"==typeof n[1]&&(n[1]=vo.colorForString(n[1]))}e.zoom&&(t=Bi.interpolate(e.zoom,t))}return Array.isArray(t)?null==(t=t.map((function(t){return t})))[3]&&(t[3]=1):t=[0,0,0,1],t},vo.calculateOrder=function(t,e){return"function"==typeof t?t=t(e):"string"==typeof t&&(t=e.feature.properties[t]?e.feature.properties[t]:go(t)),t},vo.evalProperty=function(t,e){return"function"==typeof t?t(e):t};var Eo=function(){function t(e,r){vn(this,t),this.key=e,this.repeat_dist=r,this.repeat_dist_sq=this.repeat_dist*this.repeat_dist,this.positions=[]}return bn(t,[{key:"check",value:function(t){for(var e=t.position,r=0;r<this.positions.length;r++){var n=this.positions[r],i=e[0]-n[0],o=e[1]-n[1],a=i*i+o*o;if(a<this.repeat_dist_sq)return{dist_sq:a,repeat_dist_sq:this.repeat_dist_sq}}}},{key:"add",value:function(t){t&&t.position&&this.positions.push(t.position)}}],[{key:"clear",value:function(t){this.groups[t]={}}},{key:"check",value:function(t,e,r){if(e.repeat_distance&&e.repeat_group&&this.groups[r][e.repeat_group])return this.groups[r][e.repeat_group].check(t)}},{key:"add",value:function(e,r,n){r.repeat_distance&&r.repeat_group&&(null==this.groups[n][r.repeat_group]&&(this.groups[n][r.repeat_group]=new t(r.repeat_group,r.repeat_distance*r.repeat_scale)),this.groups[n][r.repeat_group].add(e))}}]),t}();Eo.groups={};var Bo=function(){function t(e,r,n){vn(this,t);var i=this.boxCells=[],o=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(r/n);for(var a=0;a<this.xCellCount*this.yCellCount;a++)i.push([]),o.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=r,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/r,this.boxUid=0,this.circleUid=0}return bn(t,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(t,e,r,n,i){this._forEachCell(e,r,n,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)}},{key:"insertCircle",value:function(t,e,r,n){this._forEachCell(e-n,r-n,e+n,r+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(r),this.circles.push(n)}},{key:"insertCircleList",value:function(t,e){for(var r=0;r<e.length-2;r+=3)this.insertCircle("".concat(t,"/").concat(r),e[r],e[r+1],e[r+2])}},{key:"_insertBoxCell",value:function(t,e,r,n,i,o){this.boxCells[i].push(o)}},{key:"_insertCircleCell",value:function(t,e,r,n,i,o){this.circleCells[i].push(o)}},{key:"_query",value:function(t,e,r,n,i,o){if(r<0||t>this.width||n<0||e>this.height)return!i&&[];var a=[];if(t<=0&&e<=0&&this.width<=r&&this.height<=n){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],h=this.circles[3*l+2];a.push({key:this.circleKeys[l],x1:u-h,y1:c-h,x2:u+h,y2:c+h})}return o?a.filter(o):a}var f={hitTest:i,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,r,n,this._queryCell,a,f,o),i?0<a.length:a}},{key:"_queryCircle",value:function(t,e,r,n,i){var o=t-r,a=t+r,s=e-r,l=e+r;if(a<0||o>this.width||l<0||s>this.height)return!n&&[];var u=[],c={hitTest:n,circle:{x:t,y:e,radius:r},seenUids:{box:{},circle:{}}};return this._forEachCell(o,s,a,l,this._queryCellCircle,u,c,i),n?0<u.length:u}},{key:"query",value:function(t,e,r,n,i){return this._query(t,e,r,n,!1,i)}},{key:"hitTest",value:function(t,e,r,n,i){return this._query(t,e,r,n,!0,i)}},{key:"hitTestCircle",value:function(t,e,r,n){return this._queryCircle(t,e,r,!0,n)}},{key:"hitTestCircleList",value:function(t,e){for(var r=0;r<t.length-2;r+=3)if(this.hitTestCircle(t[r],t[r+1],t[r+2],e))return!0;return!1}},{key:"_queryCell",value:function(t,e,r,n,i,o,a,s){var l=a.seenUids,u=this.boxCells[i];if(null!==u){var c,h=this.bboxes,f=Pn(u);try{for(f.s();!(c=f.n()).done;){var p=c.value;if(!l.box[p]){l.box[p]=!0;var A=4*p;if(t<=h[2+A]&&e<=h[3+A]&&r>=h[0+A]&&n>=h[1+A]&&(!s||s(this.boxKeys[p]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[p],x1:h[A],y1:h[1+A],x2:h[2+A],y2:h[3+A]})}}}}catch(t){f.e(t)}finally{f.f()}}var d=this.circleCells[i];if(null!==d){var g,y=this.circles,v=Pn(d);try{for(v.s();!(g=v.n()).done;){var m=g.value;if(!l.circle[m]){l.circle[m]=!0;var b=3*m;if(this._circleAndRectCollide(y[b],y[1+b],y[2+b],t,e,r,n)&&(!s||s(this.circleKeys[m]))){if(a.hitTest)return o.push(!0),!0;var _=y[b],w=y[1+b],x=y[2+b];o.push({key:this.circleKeys[m],x1:_-x,y1:w-x,x2:_+x,y2:w+x})}}}}catch(t){v.e(t)}finally{v.f()}}}},{key:"_queryCellCircle",value:function(t,e,r,n,i,o,a,s){var l=a.circle,u=a.seenUids,c=this.boxCells[i];if(null!==c){var h,f=this.bboxes,p=Pn(c);try{for(p.s();!(h=p.n()).done;){var A=h.value;if(!u.box[A]){u.box[A]=!0;var d=4*A;if(this._circleAndRectCollide(l.x,l.y,l.radius,f[0+d],f[1+d],f[2+d],f[3+d])&&(!s||s(this.boxKeys[A])))return o.push(!0),!0}}}catch(t){p.e(t)}finally{p.f()}}var g=this.circleCells[i];if(null!==g){var y,v=this.circles,m=Pn(g);try{for(m.s();!(y=m.n()).done;){var b=y.value;if(!u.circle[b]){u.circle[b]=!0;var _=3*b;if(this._circlesCollide(v[_],v[1+_],v[2+_],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[b])))return o.push(!0),!0}}}catch(t){m.e(t)}finally{m.f()}}}},{key:"_forEachCell",value:function(t,e,r,n,i,o,a,s){for(var l=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),c=this._convertToXCellCoord(r),h=this._convertToYCellCoord(n),f=l;f<=c;f++)for(var p=u;p<=h;p++){var A=this.xCellCount*p+f;if(i.call(this,t,e,r,n,A,o,a,s))return}}},{key:"_convertToXCellCoord",value:function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}},{key:"_convertToYCellCoord",value:function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}},{key:"_circlesCollide",value:function(t,e,r,n,i,o){var a=n-t,s=i-e,l=r+o;return a*a+s*s<l*l}},{key:"_circleAndRectCollide",value:function(t,e,r,n,i,o,a){var s=(o-n)/2,l=Math.abs(t-(n+s));if(s+r<l)return!1;var u=(a-i)/2,c=Math.abs(e-(i+u));if(u+r<c)return!1;if(l<=s||c<=u)return!0;var h=l-s,f=c-u;return h*h+f*f<=r*r}}]),t}(),Co=function(t,e,r,n){var i;if(n&&(i=function(t){return t!==n.id}),!e){if("point"===t.type&&!t.angle){var o=t.getAABB(),a=o.left,s=o.top,l=o.right,u=o.bottom;if(r.hitTest(a,-s,l,-u,i)){if(Array.isArray(t.layout.anchor))for(var c=1;c<t.layout.anchor.length;c++){t.setAnchor(t.layout.anchor[c]);var h=t.getAABB(),f=h.left,p=h.top,A=h.right,d=h.bottom;if(!r.hitTest(f,-p,A,-d,i))return!1}return!0}return!1}var g=t.getBoundingCircles();return r.hitTestCircleList(g,i)}if(e){if("point"===t.type&&!t.isFlat()){var y=t.getScreenSpaceBoundingBox(),v=y.left,m=y.top,b=y.right,_=y.bottom;return r.hitTest(v,m,b,_,i)}var w=t.getBoundingCircles();return r.hitTestCircleList(w,i)}return!1},So={tiles:{},startTile:function(t,e){var r=1<arguments.length&&void 0!==e?e:{},n=r.apply_repeat_groups,i=void 0===n||n,o=r.return_hidden,a=void 0!==o&&o,s=r.grid_index,l=void 0===s?null:s,u=this.tiles[t]={grid_index:l||new Bo($n.tile_scale,$n.tile_scale,240),objects:{},labels:{},styles:{},repeat:i,return_hidden:a};null==u.complete&&(u.complete=new Promise((function(t,e){u.resolve=t,u.reject=e})))},resetTile:function(t){delete this.tiles[t]},abortTile:function(t){this.tiles[t]&&this.tiles[t].resolve&&this.tiles[t].resolve([]),this.resetTile(t)},addStyle:function(t,e){this.tiles[e].styles[t]=!0},collide:function(t,e,r){var n=this.tiles[r];if(!n)return Promise.resolve([]);for(var i=n.objects,o=0;o<t.length;o++){var a=t[o],s=a.label.layout.priority;i[s]=i[s]||{},i[s][e]=i[s][e]||[],i[s][e].push(a)}return delete n.styles[e],0===Object.keys(n.styles).length&&this.endTile(r),n.complete.then((function(){return n.resolve=null,n.labels[e]||[]}))},endTile:function(t){var e=this.tiles[t],r=e.labels;e.repeat&&Eo.clear(t);for(var n=Object.keys(e.objects).sort((function(t,e){return t-e})),i=0;i<n.length;i++){var o=e.objects[n[i]];if(o)for(var a in o){var s=o[a];r[a]=r[a]||[];for(var l=0;l<s.length;l++){var u=s[l];this.canBePlaced(u,t,u.linked,e)?u.linked?this.canBePlaced(u.linked,t,u,e)?(u.show=!0,(u.label.breach||u.linked.label.breach)&&(u.label.breach=!0,u.linked.label.breach=!0),r[a].push(u),this.place(u,t,e),this.place(u.linked,t,e)):e.return_hidden&&(u.show=!1,r[a].push(u)):(u.show=!0,r[a].push(u),this.place(u,t,e)):e.return_hidden&&(u.show=!1,r[a].push(u))}}}delete this.tiles[t],e.resolve()},canBePlaced:function(t,e,r,n){var i=2<arguments.length&&void 0!==r?r:null,o=(3<arguments.length&&void 0!==n?n:{}).repeat,a=void 0===o||o,s=t.label,l=t.label.layout;if(null!==s.placed)return s.placed;var u=this.tiles[e].grid_index;if(l.collide&&Co(s,"main"===e,u,i&&i.label))l.collide&&(s.placed=!1);else{if(!a||!Eo.check(s,l,e))return!0;s.placed=!1}return s.placed},place:function(t,e,r){var n=t.label,i=r.repeat,o=void 0===i||i;null===n.placed&&(o&&Eo.add(n,n.layout,e),function(t,e,r){var n,i,o,a,s,l,u,c,h,f,p,A,d=t.id;t.placed=!0,e||("point"!==t.type||t.angle?(n=t.getBoundingCircles(),r.insertCircleList(d,n)):(o=(i=t.getAABB()).left,a=i.top,s=i.right,l=i.bottom,r.insert(d,o,-a,s,-l))),e&&("point"!==t.type||t.isFlat()?(u=t.getBoundingCircles(),r.insertCircleList(d,u)):(h=(c=t.getScreenSpaceBoundingBox()).left,f=c.top,p=c.right,A=c.bottom,r.insert(d,h,f,p,A)))}(n,"main"===e,this.tiles[e].grid_index))}},ko={id:0,queue:[],max_time:20,start_time:null,state:{},ignore_user_moving_view:!1,_ignoreViewMoveWithDebounce:Ei((function(){ko.ignore_user_moving_view=!0}),0,500),add:function(t){t.id=ko.id++,t.max_time=t.max_time||ko.max_time,t.pause_factor=t.pause_factor||1;var e=new Promise((function(e,r){t.resolve=e,t.reject=r}));return t.promise=e,t.total_elapsed=0,t.stats={calls:0},this.queue.push(t),this.start_time=this.start_time||performance.now(),this.elapsed=performance.now()-this.start_time,this.elapsed<ko.max_time&&this.process(t),t.promise},remove:function(t){var e=this.queue.indexOf(t);-1<e&&this.queue.splice(e,1)},process:function(t){if(!this.state.user_moving_view||!1!==t.user_moving_view||this.ignore_user_moving_view)return t.pause?(t.pause--,!0):(t.stats.calls++,t.start_time=performance.now(),t.run(t));ko._ignoreViewMoveWithDebounce()},processAll:function(){this.start_time=this.start_time||performance.now(),this.ignore_user_moving_view&&!this.hasPendingTasks()&&(this.ignore_user_moving_view=!1);for(var t=0;t<this.queue.length;t++){var e=this.queue[t];if(!0!==this.process(e)&&(e.pause||(e.pause=e.elapsed>e.max_time?e.pause_factor:0),e.total_elapsed+=e.elapsed),this.elapsed=performance.now()-this.start_time,this.elapsed>=ko.max_time){this.start_time=null;break}}},finish:function(t,e){return t.elapsed=performance.now()-t.start_time,t.total_elapsed+=t.elapsed,this.remove(t),t.resolve(e),t.promise},cancel:function(t){var e;t.cancel instanceof Function&&(e=t.cancel(t)),t.resolve(e||{})},shouldContinue:function(t){return t.elapsed=performance.now()-t.start_time,this.elapsed=performance.now()-this.start_time,t.elapsed<t.max_time&&this.elapsed<ko.max_time},removeForTile:function(t){for(var e=this.queue.length-1;0<=e;e--)this.queue[e].tile_id===t&&(this.cancel(this.queue[e]),this.queue.splice(e,1))},setState:function(t){this.state=t},hasPendingTasks:function(){return!!this.queue.length}};function To(t){return{coords:t.coords,uid:t.uid,filtering:t.filtering,sprites:t.sprites,url:t.url,element:t.element,data:t.data,width:t.width,height:t.height,density:t.density,repeat:t.repeat,TEXTURE_WRAP_S:t.TEXTURE_WRAP_S,TEXTURE_WRAP_T:t.TEXTURE_WRAP_T,UNPACK_FLIP_Y_WEBGL:t.UNPACK_FLIP_Y_WEBGL,UNPACK_PREMULTIPLY_ALPHA_WEBGL:t.UNPACK_PREMULTIPLY_ALPHA_WEBGL}}var No=function(){function t(e,r,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};vn(this,t),i=To(i),this.gl=e,this.texture=e.createTexture(),this.texture&&(this.valid=!0),this.manager=n,this.bind(),this.name=r,this.retain_count=0,this.config_type=null,this.loading=null,this.loaded=!1,this.filtering=i.filtering,this.density=i.density||1,this.sprites=i.sprites,this.texcoords={},this.sizes={},this.css_sizes={},this.aspects={},this._byte_length=0,this.setData(1,1,new Uint8Array([0,0,0,0]),{filtering:"nearest"}),this.loaded=!1,this.manager.textures[this.name]&&(this.retain_count=this.manager.textures[this.name].retain_count,this.manager.textures[this.name].retain_count=0,this.manager.textures[this.name].destroy()),(this.manager.textures[this.name]=this).manager.texture_configs[this.name]=JSON.stringify(Object.assign({name:r},i)),this.load(i),xi("trace","creating Texture ".concat(this.name))}return bn(t,[{key:"destroy",value:function(t){var e=(0<arguments.length&&void 0!==t?t:{}).force;0<this.retain_count&&!e?xi("error","Texture '".concat(this.name,"': destroying texture with retain count of '").concat(this.retain_count,"'")):this.valid&&(this.gl.deleteTexture(this.texture),this.texture=null,delete this.data,this.data=null,delete this.manager.textures[this.name],delete this.manager.texture_configs[this.name],this.valid=!1,this._byte_length=0,xi("trace","destroying Texture ".concat(this.name)))}},{key:"retain",value:function(){this.retain_count++}},{key:"release",value:function(){this.retain_count<=0&&xi("error","Texture '".concat(this.name,"': releasing texture with retain count of '").concat(this.retain_count,"'")),this.retain_count--,this.retain_count<=0&&this.destroy()}},{key:"bind",value:function(t){var e=0<arguments.length&&void 0!==t?t:0;this.valid&&(this.manager.activeUnit!==e&&(this.gl.activeTexture(this.gl.TEXTURE0+e),this.manager.activeUnit=e,this.manager.boundTexture=null),this.manager.boundTexture!==this.texture&&(this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.manager.boundTexture=this.texture))}},{key:"load",value:function(t){var e=this;return t?(this.loading=null,"string"==typeof t.url?(this.config_type="url",this.setUrl(t.url,t)):t.element?(this.config_type="element",this.setElement(t.element,t)):t.data&&t.width&&t.height&&(this.config_type="data",this.setData(t.width,t.height,t.data,t)),this.loading=this.loading&&this.loading.then((function(){return e.calculateSprites(),e}))||Promise.resolve(this),this.loading):this.loading||Promise.resolve(this)}},{key:"setUrl",value:function(t,e){var r=this,n=1<arguments.length&&void 0!==e?e:{};if(this.valid)return this.url=t,this.loading=new Promise((function(t,e){var i=new Image;i.onload=function(){try{r.setElement(i,n)}catch(e){r.loaded=!1,xi("warn","Texture '".concat(r.name,"': failed to load url: '").concat(r.url,"'"),e,n),r.manager.trigger("warning",{message:"Failed to load texture from ".concat(r.url),error:e,texture:n})}r.loaded=!0,t(r)},i.onerror=function(e){r.loaded=!1,xi("warn","Texture '".concat(r.name,"': failed to load url: '").concat(r.url,"'"),e,n),r.manager.trigger("warning",{message:"Failed to load texture from ".concat(r.url),error:e,texture:n}),t(r)},Bi.isSafari()&&"data:"===r.url.slice(0,5)||(i.crossOrigin="anonymous"),i.src=r.url})),this.loading}},{key:"setData",value:function(t,e,r,n){var i=3<arguments.length&&void 0!==n?n:{};return this.width=t,this.height=e,Array.isArray(r)&&(r=new Uint8Array(r)),this.update(r,i),this.setFiltering(i),this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"setElement",value:function(t,e){var r,n=t;return"string"==typeof t&&(t=document.querySelector(t)),t instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof HTMLVideoElement?(this.update(t,e),this.setFiltering(e)):(this.loaded=!1,r="the 'element' parameter (`element: ".concat(JSON.stringify(n),"`) must be a CSS "),r+="selector string, or a <canvas>, <image> or <video> object",xi("warn","Texture '".concat(this.name,"': ").concat(r),e),this.manager.trigger("warning",{message:"Failed to load texture because ".concat(r),texture:e})),this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"update",value:function(t,e){var r=1<arguments.length&&void 0!==e?e:{};this.valid&&(this.bind(),t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof HTMLImageElement&&t.complete?(this.width=t.width,this.height=t.height,this._byte_length=this.width*this.height*4,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1!==r.UNPACK_FLIP_Y_WEBGL),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.UNPACK_PREMULTIPLY_ALPHA_WEBGL||!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t)):(this._byte_length=t?t.byteLength:0,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.width,this.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t)),this.manager.trigger("update",this))}},{key:"getByteLength",value:function(){return this._byte_length}},{key:"setFiltering",value:function(t){var e,r=0<arguments.length&&void 0!==t?t:{};this.valid&&(r.filtering=r.filtering||"linear",e=this.gl,this.bind(),Bi.isPowerOf2(this.width)&&Bi.isPowerOf2(this.height)?(this.power_of_2=!0,e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,r.TEXTURE_WRAP_S||r.repeat&&e.REPEAT||e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,r.TEXTURE_WRAP_T||r.repeat&&e.REPEAT||e.CLAMP_TO_EDGE),"mipmap"===r.filtering?(this.filtering="mipmap",e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.generateMipmap(e.TEXTURE_2D)):"linear"===r.filtering?(this.filtering="linear",e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR)):"nearest"===r.filtering&&(this.filtering="nearest",e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST))):(this.power_of_2=!1,e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),"nearest"===r.filtering?(this.filtering="nearest",e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)):(this.filtering="linear",e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR))),this.manager.trigger("update",this))}},{key:"calculateSprites",value:function(){if(this.sprites)for(var t in this.sprites){var e=this.sprites[t];this.texcoords[t]=this.manager.getTexcoordsForSprite([e[0],e[1]],[e[2],e[3]],[this.width,this.height]),this.sizes[t]=[e[2],e[3]],this.css_sizes[t]=[e[2]/this.density,e[3]/this.density],this.aspects[t]=e[2]/e[3]}}}]),t}();function Lo(t){var e=[];return Object.assign(t,{subscribe:function(t){-1===e.indexOf(t)&&e.push(t)},unsubscribe:function(t){var r=e.indexOf(t);-1<r&&e.splice(r,1)},unsubscribeAll:function(){e=[]},trigger:function(t){for(var r=arguments.length,n=new Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];e.forEach((function(e){if("function"==typeof e[t])try{e[t].apply(e,n)}catch(e){xi("warn","Caught exception in listener for event '".concat(t,"':"),e)}}))},hasSubscribersFor:function(t){var r=!1;return e.forEach((function(e){"function"==typeof e[t]&&(r=!0)})),r}})}var Io=function(){function t(e){vn(this,t),this.default=t.DEFAULT_TEXTURE_NAME,this.textures={},this.texture_configs={},this.boundTexture=null,this.activeUnit=null,this.scene_id=e,ui.addTarget("Texture"+this.scene_id,this),Lo(this)}return bn(t,[{key:"create",value:function(e,r,n){for(var i=t.matchers_,o=0;o<i.length;o++){var a=i[o][0],s=i[o][1];if(s&&s(n))return new a(e,r,this,n)}return new No(e,r,this,n)}},{key:"retain",value:function(t){this.textures[t]&&this.textures[t].retain()}},{key:"release",value:function(t){this.textures[t]&&this.textures[t].release()}},{key:"getRetainCount",value:function(t){if(this.textures[t])return this.textures[t].retain_count}},{key:"getByteLength",value:function(t){if(this.textures[t])return this.textures[t].getByteLength()}},{key:"destroy",value:function(t){var e=this;Object.keys(this.textures).forEach((function(r){var n=e.textures[r];r!==e.default&&n.gl===t&&n.destroy({force:!0})}))}},{key:"getSpriteInfo",value:function(t,e){var r=this.textures[t];return r&&{size:r.sizes[e],css_size:r.css_sizes[e],aspect:r.aspects[e],texcoords:r.texcoords[e]}}},{key:"getTexcoordsForSprite",value:function(t,e,r){var n=r[1]-t[1]-e[1];return[t[0]/r[0],n/r[1],(e[0]+t[0])/r[0],(e[1]+n)/r[1]]}},{key:"createFromObject",value:function(t,e){var r=[];if(e)for(var n in e){var i,o=e[n];this.changed(n,o)&&(i=this.create(t,n,o),r.push(i.loading))}return Promise.all(r)}},{key:"createDefault",value:function(t){return this.create(t,this.default)}},{key:"changed",value:function(t,e){var r=this.textures[t];if(r){if("element"===r.config_type||null!=e.element)return!0;if(e=To(e),this.texture_configs[t]===JSON.stringify(Object.assign({name:t},e)))return!1}return!0}},{key:"getInfo",value:function(t){var e=this;if(t=t||Object.keys(this.textures),Array.isArray(t))return Promise.all(t.map((function(t){return e.getInfo(t)})));var r=this.textures[t];return r?(r.loading||Promise.resolve(r)).then((function(){return{name:r.name,width:r.width,height:r.height,density:r.density,sprites:r.sprites,texcoords:r.texcoords,sizes:r.sizes,css_sizes:r.css_sizes,aspects:r.aspects,filtering:r.filtering,power_of_2:r.power_of_2,valid:r.valid}})):Promise.resolve(null)}},{key:"syncTexturesToWorker",value:function(t){var e=this;return li.is_main?Promise.all(t.map((function(t){var r=e.textures[t];return r&&r.loading||Promise.resolve()}))).then((function(){return e.textures})):ui.postMessage("Texture"+this.scene_id+".getInfo",t).then((function(t){return t.forEach((function(t){e.textures[t.name]=t})),e.textures}))}},{key:"getMaxTextureSize",value:function(t){return t.getParameter(t.MAX_TEXTURE_SIZE)}}],[{key:"register",value:function(e,r){var n=t.matchers_;if(!(e instanceof Function&&r instanceof Function))throw"Invalid texture constructor or matcher";this.deRegister(e),n.push([e,r])}},{key:"deRegister",value:function(e){for(var r=t.matchers_,n=0;n<r.length;n++)r[n][0]===e&&r.splice(n,1)}}]),t}();Io.DEFAULT_TEXTURE_NAME="__default",Io.matchers_=[];var Mo={};function Oo(t){return Mo[t]||(Mo[t]=new Io(t)),Mo[t]}var Po=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Fo=function(t,e,r){var n=new Float64Array(3);return n[0]=t,n[1]=e,n[2]=r,n},Uo=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,t[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,t[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,t[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,t},Ro=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],f=e[10],p=e[11],A=e[12],d=e[13],g=e[14],y=e[15],v=r*s-n*a,m=r*l-i*a,b=r*u-o*a,_=n*l-i*s,w=n*u-o*s,x=i*u-o*l,E=c*d-h*A,B=c*g-f*A,C=c*y-p*A,S=h*g-f*d,k=h*y-p*d,T=f*y-p*g,N=v*T-m*k+b*S+_*C-w*B+x*E;return N?(N=1/N,t[0]=(s*T-l*k+u*S)*N,t[1]=(l*C-a*T-u*B)*N,t[2]=(a*k-s*C+u*E)*N,t[3]=(i*k-n*T-o*S)*N,t[4]=(r*T-i*C+o*B)*N,t[5]=(n*C-r*k-o*E)*N,t[6]=(d*x-g*w+y*_)*N,t[7]=(g*b-A*x-y*m)*N,t[8]=(A*w-d*b+y*v)*N,t):null},Do=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=c*a-s*u,f=-c*o+s*l,p=u*o-a*l,A=r*h+n*f+i*p;return A?(A=1/A,t[0]=h*A,t[1]=(-c*n+i*u)*A,t[2]=(s*n-i*a)*A,t[3]=f*A,t[4]=(c*r-i*l)*A,t[5]=(-s*r+i*o)*A,t[6]=p*A,t[7]=(-u*r+n*l)*A,t[8]=(a*r-n*o)*A,t):null},jo=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],f=e[9],p=e[10],A=e[11],d=e[12],g=e[13],y=e[14],v=e[15],m=r[0],b=r[1],_=r[2],w=r[3];return t[0]=m*n+b*s+_*h+w*d,t[1]=m*i+b*l+_*f+w*g,t[2]=m*o+b*u+_*p+w*y,t[3]=m*a+b*c+_*A+w*v,m=r[4],b=r[5],_=r[6],w=r[7],t[4]=m*n+b*s+_*h+w*d,t[5]=m*i+b*l+_*f+w*g,t[6]=m*o+b*u+_*p+w*y,t[7]=m*a+b*c+_*A+w*v,m=r[8],b=r[9],_=r[10],w=r[11],t[8]=m*n+b*s+_*h+w*d,t[9]=m*i+b*l+_*f+w*g,t[10]=m*o+b*u+_*p+w*y,t[11]=m*a+b*c+_*A+w*v,m=r[12],b=r[13],_=r[14],w=r[15],t[12]=m*n+b*s+_*h+w*d,t[13]=m*i+b*l+_*f+w*g,t[14]=m*o+b*u+_*p+w*y,t[15]=m*a+b*c+_*A+w*v,t},Ho=function(t,e,r){var n,i,o,a,s,l,u,c,h,f,p,A,d=r[0],g=r[1],y=r[2];return e===t?(t[12]=e[0]*d+e[4]*g+e[8]*y+e[12],t[13]=e[1]*d+e[5]*g+e[9]*y+e[13],t[14]=e[2]*d+e[6]*g+e[10]*y+e[14],t[15]=e[3]*d+e[7]*g+e[11]*y+e[15]):(n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],f=e[9],p=e[10],A=e[11],t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=f,t[10]=p,t[11]=A,t[12]=n*d+s*g+h*y+e[12],t[13]=i*d+l*g+f*y+e[13],t[14]=o*d+u*g+p*y+e[14],t[15]=a*d+c*g+A*y+e[15]),t},Qo=function(t,e,r){var n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},zo=function(t,e,r,n,i){var o=1/Math.tan(e/2),a=1/(n-i);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*a,t[15]=0,t},Vo=function(t,e,r,n){var i,o,a,s,l,u,c,h,f,p,A=e[0],d=e[1],g=e[2],y=n[0],v=n[1],m=n[2],b=r[0],_=r[1],w=r[2];return Math.abs(A-b)<1e-6&&Math.abs(d-_)<1e-6&&Math.abs(g-w)<1e-6?Po(t):(c=A-b,h=d-_,f=g-w,i=v*(f*=p=1/Math.sqrt(c*c+h*h+f*f))-m*(h*=p),o=m*(c*=p)-y*f,a=y*h-v*c,(p=Math.sqrt(i*i+o*o+a*a))?(i*=p=1/p,o*=p,a*=p):a=o=i=0,s=h*a-f*o,l=f*i-c*a,u=c*o-h*i,(p=Math.sqrt(s*s+l*l+u*u))?(s*=p=1/p,l*=p,u*=p):u=l=s=0,t[0]=i,t[1]=s,t[2]=c,t[3]=0,t[4]=o,t[5]=l,t[6]=h,t[7]=0,t[8]=a,t[9]=u,t[10]=f,t[11]=0,t[12]=-(i*A+o*d+a*g),t[13]=-(s*A+l*d+u*g),t[14]=-(c*A+h*d+f*g),t[15]=1,t)},Go=Po,qo=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},Ko=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],f=e[10],p=e[11],A=e[12],d=e[13],g=e[14],y=e[15],v=r*s-n*a,m=r*l-i*a,b=r*u-o*a,_=n*l-i*s,w=n*u-o*s,x=i*u-o*l,E=c*d-h*A,B=c*g-f*A,C=c*y-p*A,S=h*g-f*d,k=h*y-p*d,T=f*y-p*g,N=v*T-m*k+b*S+_*C-w*B+x*E;return N?(N=1/N,t[0]=(s*T-l*k+u*S)*N,t[1]=(i*k-n*T-o*S)*N,t[2]=(d*x-g*w+y*_)*N,t[3]=(f*w-h*x-p*_)*N,t[4]=(l*C-a*T-u*B)*N,t[5]=(r*T-i*C+o*B)*N,t[6]=(g*b-A*x-y*m)*N,t[7]=(c*x-f*b+p*m)*N,t[8]=(a*k-s*C+u*E)*N,t[9]=(n*C-r*k-o*E)*N,t[10]=(A*w-d*b+y*v)*N,t[11]=(h*b-c*w-p*v)*N,t[12]=(s*B-a*S-l*E)*N,t[13]=(r*S-n*B+i*E)*N,t[14]=(d*m-A*_-g*v)*N,t[15]=(c*_-h*m+f*v)*N,t):null},Yo=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,t},Wo=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o;return 0<a&&(a=1/Math.sqrt(a),t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=o*a),t},Xo=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},Jo=function(){function t(e,r){vn(this,t),this._gl=e,this._requests={},this._pixels=null,this._has_dirty_buffer=!1,this._fbo=this._gl.createFramebuffer(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._fbo_size={width:256,height:256};var n=Oo(r).create(this._gl,"selection_fbo",{filtering:"nearest"});n.setData(this._fbo_size.width,this._fbo_size.height,null,{filtering:"nearest"}),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,n.texture,0);var i=this._gl.createRenderbuffer();this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,i),this._gl.renderbufferStorage(this._gl.RENDERBUFFER,this._gl.DEPTH_COMPONENT16,this._fbo_size.width,this._fbo_size.height),this._gl.framebufferRenderbuffer(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.RENDERBUFFER,i),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)}return bn(t,[{key:"destroy",value:function(){this._gl&&this._fbo&&(this._gl.deleteFramebuffer(this._fbo),this._fbo=null,this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null))}},{key:"bind",value:function(){var e;this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._gl.viewport(0,0,this._fbo_size.width,this._fbo_size.height),(e=this._gl).clearColor.apply(e,In(t.defaultColor))}},{key:"getFeatureAt",value:function(e,r,n){var i=r.radius,o=r.top_most_only,a=void 0===o||o;!e||e.x<0||e.y<0||1<e.x||1<e.y?n({features:null}):(this.selection_request_id=this.selection_request_id+1||0,this._requests[this.selection_request_id]={id:this.selection_request_id,point:e,radius:i,top_most_only:a,ttl:a?1:t.MAX_PICKING_TRIES,callback:n})}},{key:"hasPendingRequests",value:function(){return 0<Object.keys(this._requests).length}},{key:"clearPendingRequests",value:function(){for(var t in this._requests)this._requests[t].callback(new Error("cleared")),delete this._requests[t];this._pending_deep_request=null}},{key:"read",value:function(t){if(this.hasPendingRequests()){var e=this._gl;for(var r in e.bindFramebuffer(e.FRAMEBUFFER,this._fbo),this._pending_deep_request&&this.processRequest(this._pending_deep_request,t),this._requests)if(this.processRequest(this._requests[r],t))break;e.bindFramebuffer(e.FRAMEBUFFER,null)}}},{key:"processRequest",value:function(e,r){var n,i,o,a=this._gl,s=255,l=e.point,u=e.radius,c=(o=u?(i=Math.min(this._fbo_size.width,this._fbo_size.height),{x:Math.min(Math.ceil(2*u.x*this._fbo_size.width),i),y:Math.min(Math.ceil(2*u.y*this._fbo_size.height),i)}):(u={x:0,y:0},{x:1,y:1})).x*o.y*4;if(null==this._pixels||this._pixels.byteLength<c)this._pixels=new Uint8Array(c);else if(this._pixels.fill instanceof Function)this._pixels.fill(0,0,c);else for(var h=0;h<c;h++)this._pixels[h]=0;a.readPixels(Math.round((l.x-u.x)*this._fbo_size.width),Math.round((1-l.y-u.y)*this._fbo_size.height),o.x,o.y,a.RGBA,a.UNSIGNED_BYTE,this._pixels),e.ttl--;var f=Math.floor(o.x/2),p=Math.floor(o.y/2),A=4*(p*o.x+f),d=this._pixels.slice(A,A+4),g=d[0]+(d[1]<<8)+(d[2]<<16);if(0<g)n=g+(d[3]<<24)>>>0,s=d[3];else if(4<c)for(var y=1/0,v=(A=0,0);v<o.y;v++)for(var m,b=0;b<o.x;b++,A+=4)0<(g=(d=this._pixels.slice(A,A+4))[0]+(d[1]<<8)+(d[2]<<16))&&(m=Math.pow(b-f,2)+Math.pow(v-p,2))<y&&(n=g+(d[3]<<24)>>>0,s=d[3],y=m);if(255!==s){var _=this._getFeatureByKey(n,r);if(e.features||(e.features=[]),!_)return void this._finishRead(e);if(e.features.every((function(t){return t.id!==_.id}))&&e.features.push(_),e.ttl)return this._pending_deep_request=e,t._discardColor(d),this._has_dirty_buffer=!0;this._finishRead(e)}else this._finishRead(e)}},{key:"_finishRead",value:function(e){var r=e.features||t.EMPTY_ARRAY;e.top_most_only||(this._pending_deep_request=null,t._resetDiscardedColors()),delete this._requests[e.id],e.callback({features:r})}},{key:"_getFeatureByKey",value:function(t,e){for(var r=null,n=0;n<e.length;n++){var i=e[n];if(i.selection_data&&(r=i.selection_data[t])){r.tile={coords:i.coords};break}}return r}},{key:"setupDiscards",value:function(e){for(var r=t.MAX_PICKING_TRIES;r--;)e.uniform("4fv","u_selection_discard".concat(r),t._discarded_colors[r]||t.defaultColor)}},{key:"has_dirty_buffer",get:function(){return this._has_dirty_buffer},set:function(){this._has_dirty_buffer=!!this._pending_deep_request}}],[{key:"makeEntry",value:function(){this.map_entry++;var t=255&this.map_entry,e=this.map_entry>>8&255,r=this.map_entry>>16&255,n=this.map_prefix;return{key:t+(e<<8)+(r<<16)+(n<<24)>>>0,color:[t/255,e/255,r/255,n/255]}}},{key:"reset",value:function(){this.map_entry=0}},{key:"setPrefix",value:function(t){this.map_prefix=t}},{key:"_discardColor",value:function(t){this._discarded_colors.push([t[0]/255,t[1]/255,t[2]/255,t[3]/255])}},{key:"_resetDiscardedColors",value:function(){this._discarded_colors.length=0}}]),t}();Jo._discarded_colors=[],Jo.map_entry=0,Jo.map_prefix=0,Jo.defaultColor=[0,0,0,1],Jo.MAX_PICKING_TRIES=10,Jo.EMPTY_ARRAY=Object.freeze([]);var Zo={parseUniforms:function(t){var e=[];for(var r in t){var n,i=r,o=t[r];if("number"==typeof o)e.push({type:"float",method:"1f",name:r,value:o,key:i,uniforms:t});else if(Array.isArray(o)){if("number"==typeof o[0])2<=o.length&&o.length<=4?e.push({type:"vec"+o.length,method:o.length+"fv",name:r,value:o,key:i,uniforms:t}):4<o.length&&e.push({type:"float[]",method:"1fv",name:r+"[0]",value:o,key:i,uniforms:t});else if("string"==typeof o[0])for(n=0;n<o.length;n++)e.push({type:"sampler2D",method:"1i",name:r+"["+n+"]",value:o[n],key:n,uniforms:o});else if(Array.isArray(o[0])&&"number"==typeof o[0][0]&&2<=o[0].length&&o[0].length<=4)for(n=0;n<o.length;n++)e.push({type:"vec"+o[0].length,method:o[n].length+"fv",name:r+"["+n+"]",value:o[n],key:n,uniforms:o})}else"boolean"==typeof o?e.push({type:"bool",method:"1i",name:r,value:o,key:i,uniforms:t}):"string"==typeof o&&e.push({type:"sampler2D",method:"1i",name:r,value:o,key:i,uniforms:t})}return e},defineVariable:function(t,e){var r,n;if("number"==typeof e)r="float";else if(Array.isArray(e))"number"==typeof e[0]?2<=e.length&&e.length<=4?r="vec"+e.length:(r="float",n=e.length):"string"==typeof e[0]&&(r="sampler2D",n=e.length);else if("boolean"==typeof e)r="bool";else{if("string"!=typeof e)return;r="sampler2D"}var i="";return i+="".concat(r," ").concat(t),n&&(i+="[".concat(n,"]")),i+";\n"},defineUniform:function(t,e){var r=Zo.defineVariable(t,e);if(r)return"uniform "+r},isUniformDefined:function(t,e){var r=new RegExp("uniform[^;]+(?:{[\\s\\S]*})?[^;]*\\b"+t+"\\b","g");return!!e.match(r)},isSymbolReferenced:function(t,e){var r=new RegExp("\\b"+t+"\\b","g");return 0<=e.search(r)},expandVec3:function(t){var e,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(Array.isArray(t)){if(2!==t.length)return t;e=[].concat(In(t),[r]).map(parseFloat)}else e=[t,t,t].map(parseFloat);if(e&&e.every((function(t){return"number"==typeof t&&!isNaN(t)})))return e},expandVec4:function(t){var e,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(Array.isArray(t)){if(3!==t.length)return t;e=[].concat(In(t),[r]).map(parseFloat)}else e=[t,t,t,r].map(parseFloat);if(e&&e.every((function(t){return"number"==typeof t&&!isNaN(t)})))return e}},$o=[];function ta(t,e){var r=$o.filter((function(e){return e[0]===t}))[0];return(r=r&&r[1])||($o.push([t,{}]),r=$o[$o.length-1][1]),r[e]||(r[e]=t.getExtension(e)),r[e]}function ea(t){var e,r,n=0;if(0===t.length)return n;for(e=0,r=t.length;e<r;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return n}var ra=a((function(t){var e="(.|[\\r\\n]|\\n)*?\\*\\/\\n?\\n?",r=/(^|[^\S\n])(?:\/\/)([\s\S]+?)$/gm,n=/(^|[^\S\n])(?:\/\/[^!])([\s\S]+?)$/gm,i=t.exports=function(t,e){return t?i.block(i.line(t,e),e):""};i.block=function(t,r){r=r||{};var n=new RegExp("\\/\\*"+e,"gm");return r.safe&&(n=new RegExp("\\/\\*(?!\\*?\\!)"+e,"gm")),t?t.replace(n,""):""},i.line=function(t,e){var i=r;return(e=e||{}).safe&&(i=n),t?t.replace(i,""):""}})),na=/^\s*#pragma.*$/gm,ia=/\\\s*\n/gm,oa=function(){function t(e,r,n,i,o){if(vn(this,t),o=o||{},this.textureManager=Oo(i),this.gl=e,this.program=null,this.compiled=!1,this.compiling=!1,this.error=null,!t.polyfills[i]){t.polyfills[i]={};try{this.gl.uniformMatrix3fv(null,!1,new Float64Array(9))}catch(e){t.polyfills[i].uniformMatrix3fv=this.gl.uniformMatrix3fv,this.gl.uniformMatrix3fv=function(e,r,n){t.polyfills[i].uniformMatrix3fv.call(this,e,r,new Float32Array(n))}}try{this.gl.uniformMatrix4fv(null,!1,new Float64Array(16))}catch(e){t.polyfills[i].uniformMatrix4fv=this.gl.uniformMatrix4fv,this.gl.uniformMatrix4fv=function(e,r,n){t.polyfills[i].uniformMatrix4fv.call(this,e,r,new Float32Array(n))}}}this.defines=Object.assign({},o.defines||{}),this.blocks=Object.assign({},o.blocks||{}),this.block_scopes=Object.assign({},o.block_scopes||{}),this.extensions=o.extensions||[],this.dependent_uniforms=o.uniforms,this.uniforms={},this.attribs={},this.vertex_source=r,this.fragment_source=n,this.id=t.id++,this.name=o.name}return bn(t,[{key:"destroy",value:function(){this.gl.useProgram(null),this.gl.deleteProgram(this.program),this.program=null,this.uniforms={},this.attribs={},this.compiled=!1}},{key:"use",value:function(){this.compiled&&(t.current!==this&&this.gl.useProgram(this.program),t.current=this)}},{key:"compile",value:function(){var e=this;if(this.compiling)throw new Error("ShaderProgram.compile(): skipping for ".concat(this.id," (").concat(this.name,") because already compiling"));this.compiling=!0,this.compiled=!1,this.error=null,this.computed_vertex_source=this.vertex_source,this.computed_fragment_source=this.fragment_source;var r,n=this.checkExtensions(),i=this.buildDefineList(),o=this.buildShaderBlockList();for(var a in o){var s,l,u,c=o[a];!c||Array.isArray(c)&&0===c.length||(r=new RegExp("^\\s*#pragma\\s+tangram:\\s+"+a+"\\s*$","m"),s=this.computed_vertex_source.match(r),l=this.computed_fragment_source.match(r),null==s&&null==l||(u="",c.forEach((function(t){var e="".concat(t.scope,", ").concat(t.key,", ").concat(t.num);u+="\n// tangram-block-start: ".concat(e,"\n"),u+=t.source,u+="\n// tangram-block-end: ".concat(e,"\n")})),null!=s&&(this.computed_vertex_source=this.computed_vertex_source.replace(r,u)),null!=l&&(this.computed_fragment_source=this.computed_fragment_source.replace(r,u)),i["TANGRAM_BLOCK_"+a.replace(/[\s-]+/g,"_").toUpperCase()]=!0))}this.computed_vertex_source=this.computed_vertex_source.replace(na,""),this.computed_fragment_source=this.computed_fragment_source.replace(na,""),this.ensureUniforms(this.dependent_uniforms);var h=this.gl.getShaderPrecisionFormat(this.gl.FRAGMENT_SHADER,this.gl.HIGH_FLOAT),f=h&&0<h.precision?"precision highp float;\n":"precision mediump float;\n";i.TANGRAM_VERTEX_SHADER=!0,i.TANGRAM_FRAGMENT_SHADER=!1,this.computed_vertex_source=f+t.buildDefineString(i)+this.computed_vertex_source,i.TANGRAM_VERTEX_SHADER=!1,i.TANGRAM_FRAGMENT_SHADER=!0,this.computed_fragment_source=t.buildExtensionString(n)+f+t.buildDefineString(i)+this.computed_fragment_source,this.computed_vertex_source=this.computed_vertex_source.replace(ia,""),this.computed_fragment_source=this.computed_fragment_source.replace(ia,"");try{this.program=t.updateProgram(this.gl,this.program,this.computed_vertex_source,this.computed_fragment_source),this.compiled=!0,this.compiling=!1}catch(n){throw this.program=null,this.compiled=!1,this.compiling=!1,"vertex"!==(this.error=n).type&&"fragment"!==n.type||(this.shader_errors=n.errors,this.shader_errors.forEach((function(t){t.type=n.type,t.block=e.block(n.type,t.line)}))),n}this.computed_vertex_source=null,this.computed_fragment_source=null,this.use(),this.refreshUniforms(),this.refreshAttributes()}},{key:"buildDefineList",value:function(){var e,r={};for(e in t.defines)r[e]=t.defines[e];for(e in this.defines)r[e]=this.defines[e];return r}},{key:"buildShaderBlockList",value:function(){var e,r,n={};for(e in t.blocks)n[e]=[],Array.isArray(t.blocks[e])?(r=n[e]).push.apply(r,In(t.blocks[e].map((function(t,r){return{key:e,source:t,num:r,scope:"ShaderProgram"}})))):n[e]=[{key:e,source:t.blocks[e],num:0,scope:"ShaderProgram"}];for(e in this.blocks)if(n[e]=n[e]||[],Array.isArray(this.blocks[e]))for(var i=this.block_scopes&&this.block_scopes[e]||[],o=null,a=0,s=0;s<this.blocks[e].length;s++)i[s]!==o&&(o=i[s],a=0),n[e].push({key:e,source:this.blocks[e][s],num:a,scope:o||this.name}),a++;else n[e].push({key:e,source:this.blocks[e],num:0,scope:this.name});return n}},{key:"ensureUniforms",value:function(t){if(t){var e,r=ra(this.computed_vertex_source),n=ra(this.computed_fragment_source),i=[],o=[];for(var a in t){var s=Zo.isUniformDefined(a,r),l=Zo.isUniformDefined(a,n);if(!s||!l){if(!(e=Zo.defineUniform(a,t[a])))continue;s||(xi("trace","Program ".concat(this.name,": ").concat(a," not defined in vertex shader, injecting: '").concat(e,"'")),i.push(e)),l||(xi("trace","Program ".concat(this.name,": ").concat(a," not defined in fragment shader, injecting: '").concat(e,"'")),o.push(e))}}0<i.length&&(this.computed_vertex_source=i.join("\n")+this.computed_vertex_source),0<o.length&&(this.computed_fragment_source=o.join("\n")+this.computed_fragment_source)}}},{key:"setUniforms",value:function(t,e){var r=!(1<arguments.length&&void 0!==e)||e;if(this.compiled){r&&(this.texture_unit=0);for(var n=Zo.parseUniforms(t),i=0;i<n.length;i++){var o=n[i];"sampler2D"===o.type?this.setTextureUniform(o.name,o.value):this.uniform(o.method,o.name,o.value)}}}},{key:"saveUniforms",value:function(t){var e=t||this.uniforms;for(var r in e){var n=this.uniforms[r];n&&(n.saved_value=n.value)}this.saved_texture_unit=this.texture_unit||0}},{key:"restoreUniforms",value:function(t){var e=t||this.uniforms;for(var r in e){var n=this.uniforms[r];n&&n.saved_value&&(n.value=n.saved_value,this.updateUniform(n))}this.texture_unit=this.saved_texture_unit||0}},{key:"setTextureUniform",value:function(t,e){var r=this.textureManager.textures[e];null!=r?(r.bind(this.texture_unit),this.uniform("1i",t,this.texture_unit),this.texture_unit++):xi("warn","Cannot find texture '".concat(e,"'"))}},{key:"uniform",value:function(t,e,r){var n;this.compiled&&(this.uniforms[e]=this.uniforms[e]||{},(n=this.uniforms[e]).name=e,void 0===n.location&&(n.location=this.gl.getUniformLocation(this.program,e)),n.method=t,n.value=r,this.updateUniform(n))}},{key:"updateUniform",value:function(t){this.compiled&&t&&null!=t.location&&(this.use(),this.commitUniform(t))}},{key:"commitUniform",value:function(t){var e=t.location,r=t.value;switch(t.method){case"1i":this.gl.uniform1i(e,r);break;case"1f":this.gl.uniform1f(e,r);break;case"2f":this.gl.uniform2f(e,r[0],r[1]);break;case"3f":this.gl.uniform3f(e,r[0],r[1],r[2]);break;case"4f":this.gl.uniform4f(e,r[0],r[1],r[2],r[3]);break;case"1iv":this.gl.uniform1iv(e,r);break;case"3iv":this.gl.uniform3iv(e,r);break;case"1fv":this.gl.uniform1fv(e,r);break;case"2fv":this.gl.uniform2fv(e,r);break;case"3fv":this.gl.uniform3fv(e,r);break;case"4fv":this.gl.uniform4fv(e,r);break;case"Matrix3fv":this.gl.uniformMatrix3fv(e,!1,r);break;case"Matrix4fv":this.gl.uniformMatrix4fv(e,!1,r)}}},{key:"refreshUniforms",value:function(){if(this.compiled)for(var t in this.uniforms){var e=this.uniforms[t];e.location=this.gl.getUniformLocation(this.program,t),this.updateUniform(e)}}},{key:"refreshAttributes",value:function(){this.attribs={}}},{key:"attribute",value:function(t){if(this.compiled){var e=this.attribs[t]=this.attribs[t]||{};return null!=e.location||(e.name=t,e.location=this.gl.getAttribLocation(this.program,t)),e}}},{key:"source",value:function(t){return"vertex"===t?this.computed_vertex_source:"fragment"===t?this.computed_fragment_source:void 0}},{key:"lines",value:function(t){var e=this.source(t);return e?e.split("\n"):[]}},{key:"line",value:function(t,e){var r=this.lines(t);if(r)return r[e]}},{key:"block",value:function(t,e){for(var r,n=this.lines(t),i=0;i<e&&i<n.length;i++){var o=n[i],a=o.match(/\/\/ tangram-block-start: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/);a&&1<a.length?r={scope:a[1],name:a[2],num:a[3]}:(a=o.match(/\/\/ tangram-block-end: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/))&&1<a.length&&(r=null),r&&(r.line=null==r.line?-1:r.line+1,r.source=o)}return r}},{key:"checkExtensions",value:function(){var t=this,e=[];return this.extensions.forEach((function(r){var n=ta(t.gl,r),i="TANGRAM_EXTENSION_".concat(r);t.defines[i]=null!=n,n?e.push(r):xi("debug","Could not enable extension '".concat(r,"'"))})),e}}]),t}();oa.polyfills={},oa.id=0,oa.current=null,oa.defines={},oa.blocks={},oa.reset=function(){oa.programs_by_source={},oa.shaders_by_source={}},oa.reset(),oa.buildDefineString=function(t){var e="";for(var r in t)null!=t[r]&&!1!==t[r]&&("boolean"==typeof t[r]&&!0===t[r]?e+="#define "+r+"\n":"number"==typeof t[r]&&Math.floor(t[r])===t[r]?e+="#define "+r+" "+t[r].toFixed(1)+"\n":e+="#define "+r+" "+t[r]+"\n");return e},oa.buildExtensionString=function(t){var e="";return(t=t||[]).forEach((function(t){e+="#ifdef GL_".concat(t,"\n#extension GL_").concat(t," : enable\n#endif\n")})),e},oa.addBlock=function(t){var e;oa.blocks[t]=oa.blocks[t]||[];for(var r=arguments.length,n=new Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(e=oa.blocks[t]).push.apply(e,n)},oa.removeBlock=function(t){oa.blocks[t]=[]},oa.replaceBlock=function(t){oa.removeBlock(t);for(var e=arguments.length,r=new Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];oa.addBlock.apply(oa,[t].concat(r))},oa.updateProgram=function(t,e,r,n){var i=ea(t._tangram_id+"::"+r+"::"+n);if(oa.programs_by_source[i])return xi("trace","Reusing identical source GL program object"),oa.programs_by_source[i];var o=oa.createShader(t,r,t.VERTEX_SHADER),a=oa.createShader(t,n,t.FRAGMENT_SHADER);if(t.useProgram(null),null!=e)for(var s=t.getAttachedShaders(e),l=0;l<s.length;l++)t.detachShader(e,s[l]);else e=t.createProgram();if(null==o||null==a)return e;if(t.attachShader(e,o),t.attachShader(e,a),t.linkProgram(e),t.getProgramParameter(e,t.LINK_STATUS))return oa.programs_by_source[i]=e;var u=new Error("WebGL program error:\n            VALIDATE_STATUS: ".concat(t.getProgramParameter(e,t.VALIDATE_STATUS),"\n            ERROR: ").concat(t.getError(),"\n            --- Vertex Shader ---\n            ").concat(r,"\n            --- Fragment Shader ---\n            ").concat(n));throw Object.assign(new Error(u),{type:"program"})};var aa,sa={disabled:!(oa.createShader=function(t,e,r){var n=ea(t._tangram_id+"::"+e);if(oa.shaders_by_source[n])return xi("trace","Reusing identical source GL shader object"),oa.shaders_by_source[n];var i=t.createShader(r);if(t.shaderSource(i,e),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS))return oa.shaders_by_source[n]=i;var o=r===t.VERTEX_SHADER?"vertex":"fragment",a=t.getShaderInfoLog(i),s=function(t){t=String(t);for(var e,r=[];e=t.match(/ERROR\:([^\n]+)/);){t=t.slice(e.index+1);var n=(a=e[1].trim()).split(":"),i=n.slice(2).join(":").trim(),o=parseInt(n[0],10),a=parseInt(n[1],10);r.push({message:i,file:o,line:a})}return r}(a);throw Object.assign(new Error(a),{type:o,errors:s})}),bound_vao:[],init:function(t){var e;!0!==this.disabled&&(e=ta(t,"OES_vertex_array_object")),null!=e?xi("info","Vertex Array Object extension available"):!0!==this.disabled?xi("warn","Vertex Array Object extension NOT available"):xi("warn","Vertex Array Object extension force disabled")},create:function(t,e,r){var n={};n.setup=e,n.teardown=r;var i=ta(t,"OES_vertex_array_object");return null!=i&&(n._vao=i.createVertexArrayOES(),i.bindVertexArrayOES(n._vao)),n.setup(!0),n},getCurrentBinding:function(t){var e=this.bound_vao.filter((function(e){return e[0]===t}))[0];return e&&e[1]},setCurrentBinding:function(t,e){var r=this.bound_vao,n=r.filter((function(e){return e[0]===t}))[0];null==n?r.push([t,e]):n[1]=e},bind:function(t,e){var r,n=ta(t,"OES_vertex_array_object");null!=e?null!=n&&null!=e._vao?(n.bindVertexArrayOES(e._vao),this.setCurrentBinding(t,e)):e.setup(!1):(r=this.getCurrentBinding(t),null!=n?n.bindVertexArrayOES(null):null!=r&&"function"==typeof r.teardown&&r.teardown(),this.setCurrentBinding(t,null))},destroy:function(t,e){var r=ta(t,"OES_vertex_array_object");null!=r&&null!=e&&null!=e._vao&&(r.deleteVertexArrayOES(e._vao),e._vao=null)}},la=function(){function t(e,r,n,i,o,a){vn(this,t),a=a||{},this.textureManager=Oo(o),this.gl=e,this.vertex_data=r,this.element_data=n,this.vertex_layout=i,this.vertex_buffer=this.gl.createBuffer(),this.buffer_size=this.vertex_data.byteLength,this.draw_mode=a.draw_mode||this.gl.TRIANGLES,this.data_usage=a.data_usage||this.gl.STATIC_DRAW,this.vertices_per_geometry=3,this.uniforms=a.uniforms,this.textures=a.textures,this.retain=a.retain||!1,this.created_at=+new Date,this.fade_in_time=a.fade_in_time||0,this.vertex_count=this.vertex_data.byteLength/this.vertex_layout.stride,this.element_count=0,this.vaos={},this.toggle_element_array=!1,this.element_data?(this.toggle_element_array=!0,this.element_count=this.element_data.length,this.geometry_count=this.element_count/this.vertices_per_geometry,this.element_type=this.element_data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT,this.element_buffer=this.gl.createBuffer(),this.buffer_size+=this.element_data.byteLength,this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.element_buffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.element_data,this.data_usage)):this.geometry_count=this.vertex_count/this.vertices_per_geometry,this.upload(),this.retain||(delete this.vertex_data,delete this.element_data),this.valid=!0}return bn(t,[{key:"render",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};if(!this.valid)return!1;var r=e.program||oa.current;r.use(),this.uniforms&&(r.saveUniforms(this.uniforms),r.setUniforms(this.uniforms,!1));var n=(new Date-this.created_at)/1e3;return r.uniform("1f","u_visible_time",n),this.bind(r),this.toggle_element_array?this.gl.drawElements(this.draw_mode,this.element_count,this.element_type,0):this.gl.drawArrays(this.draw_mode,0,this.vertex_count),sa.bind(this.gl,null),this.uniforms&&r.restoreUniforms(this.uniforms),n<this.fade_in_time}},{key:"bind",value:function(t){var e=this,r=this.vaos[t.id];r?sa.bind(this.gl,r):this.vaos[t.id]=sa.create(this.gl,(function(r){e.gl.bindBuffer(e.gl.ARRAY_BUFFER,e.vertex_buffer),e.toggle_element_array&&e.gl.bindBuffer(e.gl.ELEMENT_ARRAY_BUFFER,e.element_buffer),e.vertex_layout.enable(e.gl,t,r)}))}},{key:"upload",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertex_buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertex_data,this.data_usage)}},{key:"destroy",value:function(){var t=this;if(!this.valid)return!1;for(var e in this.valid=!1,this.vaos)sa.destroy(this.gl,this.vaos[e]);return this.gl.deleteBuffer(this.vertex_buffer),this.vertex_buffer=null,this.element_buffer&&(this.gl.deleteBuffer(this.element_buffer),this.element_buffer=null),delete this.vertex_data,delete this.element_data,this.textures&&this.textures.forEach((function(e){return t.textureManager.release(e)})),!0}}]),t}(),ua=["emission","ambient","diffuse","specular"],ca=function(){function t(e){var r=this;vn(this,t),e=e||{},ua.forEach((function(t){var n=e[t];null!=n&&(n.texture?r[t]={texture:n.texture,mapping:n.mapping||"spheremap",scale:Zo.expandVec3(null!=n.scale?n.scale:1),amount:Zo.expandVec4(null!=n.amount?n.amount:1)}:"number"==typeof n||Array.isArray(n)?r[t]={amount:Zo.expandVec4(n)}:r[t]="string"==typeof n?{amount:vo.parseColor(n)}:n)})),this.specular&&(this.specular.shininess=e.shininess?parseFloat(e.shininess):.2),null!=e.normal&&(this.normal={texture:e.normal.texture,mapping:e.normal.mapping||"triplanar",scale:Zo.expandVec3(null!=e.normal.scale?e.normal.scale:1),amount:null!=e.normal.amount?e.normal.amount:1})}return bn(t,[{key:"inject",value:function(e){var r=this;ua.forEach((function(t){var n="TANGRAM_MATERIAL_".concat(t.toUpperCase()),i=n+"_TEXTURE";e.defines[n]=null!=r[t],r[t]&&r[t].texture&&(e.defines[i]=!0,e.defines[i+"_"+r[t].mapping.toUpperCase()]=!0,e.defines["TANGRAM_MATERIAL_TEXTURE_".concat(r[t].mapping.toUpperCase())]=!0,e.texcoords=e.texcoords||"uv"===r[t].mapping)})),this.normal&&this.normal.texture&&(e.defines.TANGRAM_MATERIAL_NORMAL_TEXTURE=!0,e.defines["TANGRAM_MATERIAL_NORMAL_TEXTURE_"+this.normal.mapping.toUpperCase()]=!0,e.defines["TANGRAM_MATERIAL_TEXTURE_".concat(this.normal.mapping.toUpperCase())]=!0,e.texcoords=e.texcoords||"uv"===this.normal.mapping),e.replaceShaderBlock(t.block,"/*Defines globals:materiallight_accumulator_**/struct Material{\n#ifdef TANGRAM_MATERIAL_EMISSION\nvec4 emission;\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\nvec3 emissionScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT\nvec4 ambient;\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\nvec3 ambientScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nvec4 diffuse;\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\nvec3 diffuseScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nvec4 specular;float shininess;\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\nvec3 specularScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nvec3 normalScale;float normalAmount;\n#endif\n};uniform Material u_material;Material material;\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\nuniform sampler2D u_material_emission_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\nuniform sampler2D u_material_ambient_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\nuniform sampler2D u_material_diffuse_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\nuniform sampler2D u_material_specular_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nuniform sampler2D u_material_normal_texture;\n#endif\nvec4 light_accumulator_ambient=vec4(vec3(0.0),1.);vec4 light_accumulator_diffuse=vec4(vec3(0.0),1.);\n#ifdef TANGRAM_MATERIAL_SPECULAR\nvec4 light_accumulator_specular=vec4(vec3(0.0),1.);\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_SPHEREMAP\nvec4 getSphereMap(in sampler2D _tex,in vec3 _eyeToPoint,in vec3 _normal,in vec2 _skew){vec3 eye=normalize(_eyeToPoint);eye.xy-=_skew;eye=normalize(eye);vec3 r=reflect(eye,_normal);r.z+=1.0;float m=2.*length(r);vec2 uv=r.xy/m+.5;return texture2D(_tex,uv);}\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_TRIPLANAR\nvec3 getTriPlanarBlend(in vec3 _normal){vec3 blending=abs(_normal);blending=normalize(max(blending,0.00001));float b=(blending.x+blending.y+blending.z);return blending/b;}vec4 getTriPlanar(in sampler2D _tex,in vec3 _pos,in vec3 _normal,in vec3 _scale){vec3 blending=getTriPlanarBlend(_normal);vec4 xaxis=texture2D(_tex,fract(_pos.yz*_scale.x));vec4 yaxis=texture2D(_tex,fract(_pos.xz*_scale.y));vec4 zaxis=texture2D(_tex,fract(_pos.xy*_scale.z));return xaxis*blending.x+yaxis*blending.y+zaxis*blending.z;}\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_PLANAR\nvec4 getPlanar(in sampler2D _tex,in vec3 _pos,in vec2 _scale){return texture2D(_tex,fract(_pos.xy*_scale.x));}\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nvoid calculateNormal(inout vec3 _normal){\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_UV\n_normal+=texture2D(u_material_normal_texture,fract(v_texcoord*material.normalScale.xy)).rgb*2.0-1.0;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_PLANAR\nvec3 normalTex=getPlanar(u_material_normal_texture,v_world_position.xyz,material.normalScale.xy).rgb*2.0-1.0;_normal+=normalTex;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_TRIPLANAR\nvec3 normalTex=getTriPlanar(u_material_normal_texture,v_world_position.xyz,_normal,material.normalScale).rgb*2.0-1.0;_normal+=normalTex;\n#endif\n_normal=normalize(_normal);}\n#endif\nvoid calculateMaterial(in vec3 _eyeToPoint,inout vec3 _normal){\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_UV\nmaterial.emission*=texture2D(u_material_emission_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_PLANAR\nmaterial.emission*=getPlanar(u_material_emission_texture,v_world_position.xyz,material.emissionScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_TRIPLANAR\nmaterial.emission*=getTriPlanar(u_material_emission_texture,v_world_position.xyz,_normal,material.emissionScale);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_SPHEREMAP\nmaterial.emission*=getSphereMap(u_material_emission_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_UV\nmaterial.ambient*=texture2D(u_material_ambient_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_PLANAR\nmaterial.ambient*=getPlanar(u_material_ambient_texture,v_world_position.xyz,material.ambientScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_TRIPLANAR\nmaterial.ambient*=getTriPlanar(u_material_ambient_texture,v_world_position.xyz,_normal,material.ambientScale);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_SPHEREMAP\nmaterial.ambient*=getSphereMap(u_material_ambient_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_UV\nmaterial.diffuse*=texture2D(u_material_diffuse_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_PLANAR\nmaterial.diffuse*=getPlanar(u_material_diffuse_texture,v_world_position.xyz,material.diffuseScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_TRIPLANAR\nmaterial.diffuse*=getTriPlanar(u_material_diffuse_texture,v_world_position.xyz,_normal,material.diffuseScale);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_SPHEREMAP\nmaterial.diffuse*=getSphereMap(u_material_diffuse_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_UV\nmaterial.specular*=texture2D(u_material_specular_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_PLANAR\nmaterial.specular*=getPlanar(u_material_specular_texture,v_world_position.xyz,material.specularScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_TRIPLANAR\nmaterial.specular*=getTriPlanar(u_material_specular_texture,v_world_position.xyz,_normal,material.specularScale);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_SPHEREMAP\nmaterial.specular*=getSphereMap(u_material_specular_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n}","Material"),e.addShaderBlock("setup","\nmaterial = u_material;\n","Material")}},{key:"setupProgram",value:function(t){var e=this;ua.forEach((function(r){e[r]&&(e[r].texture?(t.setTextureUniform("u_material_".concat(r,"_texture"),e[r].texture),t.uniform("3fv","u_material.".concat(r,"Scale"),e[r].scale),t.uniform("4fv","u_material.".concat(r),e[r].amount)):e[r].amount&&t.uniform("4fv","u_material.".concat(r),e[r].amount))})),this.specular&&t.uniform("1f","u_material.shininess",this.specular.shininess),this.normal&&this.normal.texture&&(t.setTextureUniform("u_material_normal_texture",this.normal.texture),t.uniform("3fv","u_material.normalScale",this.normal.scale),t.uniform("1f","u_material.normalAmount",this.normal.amount))}}],[{key:"isValid",value:function(t){return null!=t&&(null!=t.emission||null!=t.ambient||null!=t.diffuse||null!=t.specular)}}]),t}();ca.block="material";var ha=aa={};aa.copy=function(t){for(var e=[],r=t.length,n=0;n<r;n++)e[n]=t[n];return e},aa.neg=function(t){for(var e=[],r=t.length,n=0;n<r;n++)e[n]=-t[n];return e},aa.add=function(t,e){for(var r=[],n=Math.min(t.length,e.length),i=0;i<n;i++)r[i]=t[i]+e[i];return r},aa.sub=function(t,e){for(var r=[],n=Math.min(t.length,e.length),i=0;i<n;i++)r[i]=t[i]-e[i];return r},aa.signed_area=function(t,e,r){return(e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1])},aa.mult=function(t,e){var r,n=[],i=t.length;if("number"==typeof e)for(r=0;r<i;r++)n[r]=t[r]*e;else for(i=Math.min(t.length,e.length),r=0;r<i;r++)n[r]=t[r]*e[r];return n},aa.multMatrix=function(t,e){return[t[0][0]*e[0]+t[0][1]*e[1],t[1][0]*e[0]+t[1][1]*e[1]]},aa.div=function(t,e){var r=[];if("number"==typeof e)for(i=0;i<t.length;i++)r[i]=t[i]/e;else for(var n=Math.min(t.length,e.length),i=0;i<n;i++)r[i]=t[i]/e[i];return r},aa.perp=function(t,e){return[e[1]-t[1],t[0]-e[0]]},aa.rot=function(t,e){var r=Math.cos(e),n=Math.sin(e);return[t[0]*r-t[1]*n,t[0]*n+t[1]*r]},aa.angle=function(t){var e=Ln(t,2),r=e[0],n=e[1];return Math.atan2(n,r)},aa.angleBetween=function(t,e){var r=aa.dot(aa.normalize(aa.copy(t)),aa.normalize(aa.copy(e)));return 1<r&&(r=1),Math.acos(r)},aa.signedAngleBetween=function(t,e){return Math.atan2(t[0]*e[1]-t[1]*e[0],t[0]*e[0]+t[1]*e[1])},aa.isEqual=function(t,e){for(var r=t.length,n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0},aa.lengthSq=function(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:3<=t.length?t[0]*t[0]+t[1]*t[1]+t[2]*t[2]:0},aa.length=function(t){return Math.sqrt(aa.lengthSq(t))},aa.normalize=function(t){var e;if(2===t.length){if(1===(e=t[0]*t[0]+t[1]*t[1]))return t;0!==(e=Math.sqrt(e))?(t[0]/=e,t[1]/=e):(t[0]=0,t[1]=0)}else if(3<=t.length){if(1===(e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2]))return t;0!==(e=Math.sqrt(e))?(t[0]/=e,t[1]/=e,t[2]/=e):(t[0]=0,t[1]=0,t[2]=0)}return t},aa.cross=function(t,e){return 2===t.length?t[0]*e[1]-t[1]*e[0]:3===t.length?[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]:void 0},aa.dot=function(t,e){for(var r=0,n=Math.min(t.length,e.length),i=0;i<n;i++)r+=t[i]*e[i];return r};var fa=function(){function t(e,r){vn(this,t),this.name=r.name,this.view=e,null==r.ambient||"number"==typeof r.ambient?this.ambient=Zo.expandVec3(r.ambient||0):this.ambient=vo.parseColor(r.ambient).slice(0,3),null==r.diffuse||"number"==typeof r.diffuse?this.diffuse=Zo.expandVec3(null!=r.diffuse?r.diffuse:1):this.diffuse=vo.parseColor(r.diffuse).slice(0,3),null==r.specular||"number"==typeof r.specular?this.specular=Zo.expandVec3(r.specular||0):this.specular=vo.parseColor(r.specular).slice(0,3)}return bn(t,[{key:"inject",value:function(){var e="\n            uniform ".concat(this.struct_name," u_").concat(this.name,";\n            ").concat(this.struct_name," ").concat(this.name,";\n            "),r="\n            ".concat(this.name," = u_").concat(this.name,";\n\n        ");oa.addBlock(t.block,e),oa.addBlock("setup",r)}},{key:"update",value:function(){}},{key:"setupProgram",value:function(t){t.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient),t.uniform("3fv","u_".concat(this.name,".diffuse"),this.diffuse),t.uniform("3fv","u_".concat(this.name,".specular"),this.specular)}}],[{key:"create",value:function(e,r){if(t.types[r.type])return new t.types[r.type](e,r)}},{key:"setMode",value:function(e,r){!0===e&&(e="fragment"),e=t.enabled&&(null!=e?e:"fragment"),r.defines.TANGRAM_LIGHTING_FRAGMENT="fragment"===e,r.defines.TANGRAM_LIGHTING_VERTEX="vertex"===e}},{key:"inject",value:function(e){if(oa.removeBlock(t.block),t.enabled){var r="";if(e&&0<Object.keys(e).length){var n={};for(var i in e)n[e[i].type]=!0;for(var o in n)t.types[o].inject();for(var a in e)e[a].inject(),r+="calculateLight(".concat(a,", _eyeToPoint, _normal);\n")}var s="\n            vec4 calculateLighting(in vec3 _eyeToPoint, in vec3 _normal, in vec4 _color) {\n\n                // Do initial material calculations over normal, emission, ambient, diffuse and specular values\n                calculateMaterial(_eyeToPoint,_normal);\n\n                // Un roll the loop of individual ligths to calculate\n                ".concat(r,"\n\n                //  Final light intensity calculation\n                vec4 color = vec4(vec3(0.), _color.a); // start with vertex color alpha\n\n                #ifdef TANGRAM_MATERIAL_EMISSION\n                    color.rgb = material.emission.rgb;\n                    color.a *= material.emission.a;\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_AMBIENT\n                    color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.ambient.rgb;\n                    color.a *= material.ambient.a;\n                #else\n                    #ifdef TANGRAM_MATERIAL_DIFFUSE\n                        color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.diffuse.rgb;\n                    #endif\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_DIFFUSE\n                    color.rgb += light_accumulator_diffuse.rgb * _color.rgb * material.diffuse.rgb;\n                    color.a *= material.diffuse.a;\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_SPECULAR\n                    color.rgb += light_accumulator_specular.rgb * material.specular.rgb;\n                    color.a *= material.specular.a;\n                #endif\n\n                // Clamp final color\n                color = clamp(color, 0.0, 1.0);\n\n                return color;\n            }");oa.addBlock(t.block,s)}}}]),t}();fa.types={},fa.block="lighting",fa.enabled=!0;var pa=function(){wn(e,fa);var t=Tn(e);function e(r,n){var i;return vn(this,e),(i=t.call(this,r,n)).type="ambient",i.struct_name="AmbientLight",i}return bn(e,[{key:"setupProgram",value:function(t){t.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient)}}],[{key:"inject",value:function(){oa.addBlock(fa.block,"/*Expected globals:light_accumulator_**/struct AmbientLight{vec3 ambient;};void calculateLight(in AmbientLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;}")}}]),e}();fa.types.ambient=pa;var Aa=function(){wn(e,fa);var t=Tn(e);function e(r,n){var i,o;return vn(this,e),(i=t.call(this,r,n)).type="directional",i.struct_name="DirectionalLight",n.direction?i._direction=n.direction:(o=Math.sin(60*Math.PI/180),i._direction=[Math.cos(135*Math.PI/180)*o,Math.sin(135*Math.PI/180)*o,-.5]),null==n.ambient&&(i.ambient=Zo.expandVec3(.5)),i.direction=i._direction.map(parseFloat),i._initial_direction=[i.direction[0],i.direction[1],i.direction[2]],i}return bn(e,[{key:"update",value:function(){Uo(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}},{key:"setupProgram",value:function(t){Nn(xn(e.prototype),"setupProgram",this).call(this,t),t.uniform("3fv","u_".concat(this.name,".direction"),this.direction)}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction=ha.normalize(ha.copy(t))}}],[{key:"inject",value:function(){oa.addBlock(fa.block,"/*Expected globals:materiallight_accumulator_**/struct DirectionalLight{vec3 ambient;vec3 diffuse;vec3 specular;vec3 direction;};void calculateLight(in DirectionalLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;float nDotVP=clamp(dot(_normal,-_light.direction),0.0,1.0);\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(_light.direction,_normal);float eyeDotR=max(dot(normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf;\n#endif\n}")}}]),e}();fa.types.directional=Aa;var da=function(){wn(e,fa);var t=Tn(e);function e(r,n){var i;return vn(this,e),(i=t.call(this,r,n)).type="point",i.struct_name="PointLight",i.position=n.position||[0,0,"100px"],i.position_eye=[],i.origin=n.origin||"ground",i.attenuation=isNaN(parseFloat(n.attenuation))?0:parseFloat(n.attenuation),n.radius?Array.isArray(n.radius)&&2===n.radius.length?i.radius=n.radius:i.radius=[null,n.radius]:i.radius=null,i}return bn(e,[{key:"inject",value:function(){Nn(xn(e.prototype),"inject",this).call(this),oa.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT=0!==this.attenuation,oa.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS=null!=this.radius&&null!=this.radius[0],oa.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS=null!=this.radius}},{key:"update",value:function(){var t,e,r,n=this.view.lookAtManipulator.getLookAtData().zoom;"world"===this.origin?(e=(t=Ln($n.latLngToMeters(this.position),2))[0],r=t[1],this.position_eye[0]=e-this.view.lookAtManipulator.getLookAtData().position[0],this.position_eye[1]=r-this.view.lookAtManipulator.getLookAtData().position[1],this.position_eye[2]=vo.convertUnits(this.position[2],{zoom:n,meters_per_pixel:$n.metersPerPixel(n)}),this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance):"ground"!==this.origin&&"camera"!==this.origin||(this.position_eye=vo.convertUnits(this.position,{zoom:n,meters_per_pixel:$n.metersPerPixel(n)}),"ground"===this.origin&&(this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance)),this.position_eye[3]=1}},{key:"setupProgram",value:function(t){Nn(xn(e.prototype),"setupProgram",this).call(this,t),t.uniform("4fv","u_".concat(this.name,".position"),this.position_eye),oa.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT&&t.uniform("1f","u_".concat(this.name,".attenuationExponent"),this.attenuation);var r=this.view.lookAtManipulator.getLookAtData().zoom;oa.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS&&t.uniform("1f","u_".concat(this.name,".innerRadius"),vo.convertUnits(this.radius[0],{zoom:r,meters_per_pixel:$n.metersPerPixel(r)})),oa.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS&&t.uniform("1f","u_".concat(this.name,".outerRadius"),vo.convertUnits(this.radius[1],{zoom:r,meters_per_pixel:$n.metersPerPixel(r)}))}}],[{key:"inject",value:function(){oa.addBlock(fa.block,"/*Expected globals:materiallight_accumulator_**/struct PointLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat attenuationExponent;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nfloat innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat outerRadius;\n#endif\n};void calculateLight(in PointLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(VP,_normal),0.0,1.0);float attenuation=1.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat Rin=1.0;float e=_light.attenuationExponent;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);\n#endif\n#else\nfloat Rin=0.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);\n#endif\n#else\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;\n#else\nattenuation=1.0;\n#endif\n#endif\n#endif\nlight_accumulator_ambient.rgb+=_light.ambient*attenuation;\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(0.0,dot(-normalize(_eyeToPoint),reflectVector));pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation;\n#endif\n}")}}]),e}();fa.types.point=da;var ga=function(){wn(e,da);var t=Tn(e);function e(r,n){var i;return vn(this,e),(i=t.call(this,r,n)).type="spotlight",i.struct_name="SpotLight",i.direction=i._direction=(n.direction||[0,0,-1]).map(parseFloat),i._initial_direction=[i.direction[0],i.direction[1],i.direction[2]],i.exponent=n.exponent?parseFloat(n.exponent):.2,i.angle=n.angle?parseFloat(n.angle):20,i}return bn(e,[{key:"setupProgram",value:function(t){Nn(xn(e.prototype),"setupProgram",this).call(this,t),t.uniform("3fv","u_".concat(this.name,".direction"),this.direction),t.uniform("1f","u_".concat(this.name,".spotCosCutoff"),Math.cos(3.14159*this.angle/180)),t.uniform("1f","u_".concat(this.name,".spotExponent"),this.exponent)}},{key:"update",value:function(){Nn(xn(e.prototype),"update",this).call(this),Uo(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction=ha.normalize(ha.copy(t))}}],[{key:"inject",value:function(){oa.addBlock(fa.block,"/*Expected globals:materiallight_accumulator_**/struct SpotLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat attenuationExponent;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nfloat innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat outerRadius;\n#endif\nvec3 direction;float spotCosCutoff;float spotExponent;};void calculateLight(in SpotLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(_normal,VP),0.0,1.0);float attenuation=1.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat Rin=1.0;float e=_light.attenuationExponent;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);\n#endif\n#else\nfloat Rin=0.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);\n#endif\n#else\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;\n#else\nattenuation=1.0;\n#endif\n#endif\n#endif\nfloat spotAttenuation=0.0;float spotDot=clamp(dot(-VP,_light.direction),0.0,1.0);if(spotDot>=_light.spotCosCutoff){spotAttenuation=pow(spotDot,_light.spotExponent);}light_accumulator_ambient.rgb+=_light.ambient*attenuation*spotAttenuation;\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation*spotAttenuation;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(dot(-normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation*spotAttenuation;\n#endif\n}")}}]),e}();function ya(t){for(var e=0;e<(arguments.length<=1?0:arguments.length-1);e++){var r=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];if(r)for(var n in r){var i=r[n];null===i||"object"!==yn(i)||Array.isArray(i)?void 0!==i&&(t[n]=i):null===t[n]||"object"!==yn(t[n])||Array.isArray(t[n])?t[n]=ya({},i):t[n]=ya(t[n],i)}}return t}fa.types.spotlight=ga;var va="#ifdef TANGRAM_FRAGMENT_SHADER\nuniform sampler2D u_raster;uniform vec3 u_raster_offset;\n#define sampleRaster() (texture2D(u_raster, v_modelpos_base_zoom.xy * u_raster_offset.z + u_raster_offset.xy))\n#endif\n",ma={init:function(t){var e=0<arguments.length&&void 0!==t?t:{},r=e.generation,n=e.styles,i=e.sources,o=void 0===i?{}:i,a=e.introspection,s=e.id,l=void 0!==s?s+"/":"";this.scene_id=s,this.textureManager=Oo(s),this.main_thread_target="".concat(l,"Style/").concat(this.name),this.setGeneration(r),this.styles=n,this.sources=o,this.defines=this.hasOwnProperty("defines")&&this.defines||{},this.shaders=this.hasOwnProperty("shaders")&&this.shaders||{},this.introspection=a||!1,this.selection=this.selection||this.introspection||!1,this.compile_setup=!1,this.program=null,this.selection_program=null,this.feature_style={},this.vertex_template=[],this.tile_data={},this.defines.TANGRAM_WORLD_POSITION_WRAP=1e5,this.blend=this.blend||"opaque",this.defines["TANGRAM_BLEND_".concat(this.blend.toUpperCase())]=!0,null==this.blend_order&&(this.blend_order=-1),this.removeShaderBlock("setup"),this.material instanceof ca||(ca.isValid(this.material)||(this.material=vo.defaults.material),this.material=new ca(this.material)),this.material.inject(this),fa.setMode(this.lighting,this),this.setupRasters(),this.initialized=!0},destroy:function(){this.program&&(this.program.destroy(),this.program=null),this.selection_program&&(this.selection_program.destroy(),this.selection_program=null),ui.removeTarget(this.main_thread_target),this.gl=null,this.initialized=!1},reset:function(){},baseStyle:function(){return this.base||this.name},setGeneration:function(t){this.generation=t,li.is_main&&ui.addTarget(this.main_thread_target,this)},fillVertexTemplate:function(t,e,r,n){var i=n.size,o=void 0===(o=n.offset)?0:o,a=t.index[e];if(void 0!==a)for(var s=0;s<i;++s){var l=r.length>s?r[s]:r;this.vertex_template[a+s+o]=l}else xi("warn","Style: in style '".concat(this.name,"', no index found in vertex layout for attribute '").concat(e,"'"))},startData:function(t){this.tile_data[t.id]=this.tile_data[t.id]||{meshes:{},uniforms:{},textures:[]}},endData:function(t){var e=this.tile_data[t.id];if(this.tile_data[t.id]=null,e&&0<Object.keys(e.meshes).length){for(var r in e.meshes){var n=e.meshes[r];0!==n.vertex_data.vertex_count?(n.vertex_data.end(),n.vertex_elements=n.vertex_data.element_buffer,n.vertex_data=n.vertex_data.vertex_buffer):delete e.meshes[r]}return t.mesh_data[this.name]=e,this.buildRasterTextures(t,e).then((function(t){return t}))}return Promise.resolve(null)},hasDataForTile:function(t){return null!=this.tile_data[t.id]},getTileMesh:function(t,e){var r=this.tile_data[t.id].meshes;return null==r[e.key]&&(r[e.key]={variant:e,vertex_data:this.vertexLayoutForMeshVariant(e).createVertexData()}),r[e.key]},vertexLayoutForMeshVariant:function(){return this.vertex_layout},default_mesh_variant:{key:0},style_mesh_variants:{default:{variants:{0:{variant:{key:0},times_unref:0}}}},addMeshVariantForDraw:function(t,e){this.style_mesh_variants[t]||(this.style_mesh_variants[t]={variants:{}});var r=this.computeVariantForDraw(e);return this.style_mesh_variants[t].variants[r.key]={variant:r,times_unref:0},this.style_mesh_variants[t].variants[r.key].variant},getMeshVariantTypeForDraw:function(t){return this.getMeshVariantType(this.base,t)},getMeshVariantType:function(t,e){void 0===t&&(t="default");var r=this.style_mesh_variants[t];if(void 0===e.variantKey||!r||!r.variants[e.variantKey])return this.addMeshVariantForDraw(t,e);var n=e.variantKey,i=r.variants[n];return i.times_unref=0,i.variant},updateMeshVariantTypeCache:function(t){for(var e in this.style_mesh_variants){var r=this.style_mesh_variants[e].variants;for(var n in r){var i=r[n];i.times_unref++,i.times_unref>t&&("default"!==e||0!=+n)&&(delete r[n],0===Object.keys(r).length&&delete this.style_mesh_variants[e])}}},computeVariantForDraw:function(){return this.default_mesh_variant},addFeature:function(t,e,r){var n=r.tile;this.tile_data[n.id]||this.startData(n);var i,o,a,s,l=this.parseFeature(t,e,r);l&&(i="lines"===this.base?this.getMeshVariantTypeForDraw(e):this.getMeshVariantTypeForDraw(l),a=(o=this.getTileMesh(n,i)).vertex_data.offset,s=o.vertex_data.vertex_count,0<this.buildGeometry(t.geometry,l,o,r)?t.generation=this.generation:o.vertex_data.vertex_count>s&&(o.vertex_data.vertex_buffer.fill(0,a,o.vertex_data.offset),o.vertex_data.vertex_count=s,o.vertex_data.offset=a))},buildGeometry:function(t,e,r,n){var i;return"Polygon"===t.type?i=this.buildPolygons([t.coordinates],e,r,n):"MultiPolygon"===t.type?i=this.buildPolygons(t.coordinates,e,r,n):"LineString"===t.type?i=this.buildLines([t.coordinates],e,r,n):"MultiLineString"===t.type?i=this.buildLines(t.coordinates,e,r,n):"Point"===t.type?i=this.buildPoints([t.coordinates],e,r,n):"MultiPoint"===t.type&&(i=this.buildPoints(t.coordinates,e,r,n)),i},parseFeature:function(t,e,r){try{var n,i,o,a=this.feature_style;if(a.order=this.parseOrder(e.order,r),null==a.order&&"overlay"!==this.blend){var s="Layer '".concat(e.layers.join(", "),"', draw group '").concat(e.group,"': ");return s+="'order' parameter is required unless blend mode is 'overlay'",null!=e.order&&(s+="; 'order' was set to a dynamic value (e.g. string tied to feature property, ",s+="or JS function), but evaluated to null for one or more features"),void xi({level:"warn",once:!0},s)}if(!(a=this._parseFeature(t,e,r)))return;return this.selection?a.interactive=vo.evalProperty(this.introspection||e.interactive,r):a.interactive=!1,!0===a.interactive?(i=(n=Jo.makeEntry()).color,o=n.key,a.selection_color=i,r.tile.selection_data||(r.tile.selection_data={}),r.tile.selection_data[o]={id:t.id||o,properties:t.properties,source_name:r.source,source_layer:r.layer,layers:r.layers}):a.selection_color=Jo.defaultColor,a}catch(e){xi("error","Style.parseFeature: style parsing error",t,a,e.stack)}},_parseFeature:function(){return this.feature_style},preprocess:function(t,e){if(!t.preprocessed){if(this.draw)for(var r in this.draw){var n=this.draw[r];"object"!==yn(n)||Array.isArray(n)?null==t[r]&&(t[r]=n):t[r]=ya({},n,t[r])}var i=e||"";if(!(t=this._preprocess(t,i)))return;t.preprocessed=!0}return t},_preprocess:function(t){return t},parseOrder:function(t,e){return"number"!=typeof t?vo.calculateOrder(t,e):t},scaleOrder:function(t){return 2*t},parseColor:function(t,e){return t?vo.evalCachedColorProperty(t,e):this.shaders.blocks.color||this.shaders.blocks.filter?vo.defaults.color:void 0},buildPolygons:function(){return 0},buildLines:function(){return 0},buildPoints:function(){return 0},setGL:function(t){this.gl=t,this.max_texture_size=this.textureManager.getMaxTextureSize(this.gl)},makeMesh:function(t,e,r){var n=2<arguments.length&&void 0!==r?r:{},i=this.vertexLayoutForMeshVariant(n.variant);return new la(this.gl,t,e,i,this.scene_id,n)},render:function(t){return t.render()},getProgram:function(t){var e=0<arguments.length&&void 0!==t?t:"program";this.compileSetup();var r=this[e];if(r&&!r.error){if(!r.compiled)try{r.compile()}catch(t){xi("error","Style: error compiling program for style '".concat(this.name,"' (program key '").concat(e,"')"),this,t.stack)}return r}},compileSetup:function(){if(!this.compile_setup){if(!this.gl)throw new Error("style.compile(): skipping for ".concat(this.name," because no GL context"));var t,e=this.buildDefineList();this.selection&&((t=Object.assign({},e)).TANGRAM_FEATURE_SELECTION=!0);var r=this.shaders&&this.shaders.blocks,n=this.shaders&&this.shaders.block_scopes,i=Object.assign({},this.shaders&&this.shaders.uniforms);for(var o in i)null==i[o]&&xi({level:"warn",once:!0},"Style '".concat(this.name,"' has invalid uniform '").concat(o,"': uniform values must be non-null"));var a=this.shaders&&this.shaders.extensions;"string"==typeof a&&(a=[a]),this.program=new oa(this.gl,this.vertex_shader_src,this.fragment_shader_src,this.scene_id,{name:this.name,defines:e,uniforms:i,blocks:r,block_scopes:n,extensions:a}),this.selection?this.selection_program=new oa(this.gl,this.vertex_shader_src,this.crop_by_tile?"\n#pragma tangram: utils\n#ifdef TANGRAM_FEATURE_SELECTION\nuniform float u_meters_per_pixel;varying vec4 v_selection_color;varying vec4 v_local_space_position;\n#endif\nvoid main(void){\n#ifdef TANGRAM_FEATURE_SELECTION\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}else{gl_FragColor=v_selection_color;}\n#else\ngl_FragColor=vec4(0.,0.,0.,1.);\n#endif\n}":"\n#ifdef TANGRAM_FEATURE_SELECTION\nvarying vec4 v_selection_color;\n#endif\nvoid main(void){\n#ifdef TANGRAM_FEATURE_SELECTION\ngl_FragColor=v_selection_color;\n#else\ngl_FragColor=vec4(0.,0.,0.,1.);\n#endif\n}",this.scene_id,{name:this.name+" (selection)",defines:t,uniforms:i,blocks:r,block_scopes:n,extensions:a}):this.selection_program=null,this.compile_setup=!0}},addShaderBlock:function(t,e,r){var n=2<arguments.length&&void 0!==r?r:null;this.shaders.blocks=this.shaders.blocks||{},this.shaders.blocks[t]=this.shaders.blocks[t]||[],this.shaders.blocks[t].push(e),this.shaders.block_scopes=this.shaders.block_scopes||{},this.shaders.block_scopes[t]=this.shaders.block_scopes[t]||[],this.shaders.block_scopes[t].push(n)},removeShaderBlock:function(t){this.shaders.blocks&&(this.shaders.blocks[t]=null)},replaceShaderBlock:function(t,e,r){var n=2<arguments.length&&void 0!==r?r:null;this.removeShaderBlock(t),this.addShaderBlock(t,e,n)},buildDefineList:function(){var t={};if(null!=this.defines)for(var e in this.defines)t[e]=this.defines[e];if(null!=this.shaders&&null!=this.shaders.defines)for(e in this.shaders.defines)t[e]=this.shaders.defines[e];return t},hasRasters:function(){return-1<["color","normal","custom"].indexOf(this.raster)},setupRasters:function(){if(!li.is_main)return!1;if(!this.hasRasters())return!1;"color"===this.raster?this.defines.TANGRAM_RASTER_TEXTURE_COLOR=!0:"normal"===this.raster&&(this.defines.TANGRAM_RASTER_TEXTURE_NORMAL=!0);var t=!1;for(var e in this.sources)if(this.sources[e]instanceof Ea){t=!0;break}return!!t&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",va,"Raster"),!0)},buildRasterTextures:function(t,e){var r=this;if(!this.hasRasters())return Promise.resolve(e);var n={};return t.rasters.map((function(t){return r.sources[t]})).filter((function(t){return t})).forEach((function(e,r){var i;e instanceof Ea&&(i=e.tileTexture(t),n[i.url]=i)})),0===Object.keys(n).length?Promise.resolve(e):ui.postMessage(this.main_thread_target+".loadTextures",n).then((function(r){if(!r||r.length<1)return xi("trace","Missing texture info for tile ".concat(t.key)),null;if(r.some((function(t){return!t.loaded})))return null;e.uniforms=e.uniforms||{},e.textures=e.textures||[];var i,o,a=r[0].name,s=n[a].coords;return e.uniforms.u_raster=a,e.textures.push(a),t.coords.z>s.z?(i=t.coords.z-s.z,o=Math.pow(2,i),e.uniforms.u_raster_offset=[(t.coords.x%o+o)%o/o,(o-1-t.coords.y%o)/o,1/o]):e.uniforms.u_raster_offset=[0,0,1],e}))},loadTextures:function(t){var e=this;return this.textureManager.createFromObject(this.gl,t).then((function(){return Promise.all(Object.keys(t).map((function(t){return e.textureManager.textures[t]&&e.textureManager.textures[t].load()})).filter((function(t){return t})))})).then((function(t){return t.forEach((function(t){return t.retain()})),t.map((function(t){return{name:t.name,width:t.width,height:t.height,loaded:t.loaded}}))}))},setup:function(){this.setUniforms(),this.material.setupProgram(oa.current)},setUniforms:function(){var t=oa.current;t&&t.setUniforms(this.shaders&&this.shaders.uniforms,!0)},render_states:{opaque:{depth_test:!0,depth_write:!0},translucent:{depth_test:!0,depth_write:!0},add:{depth_test:!0,depth_write:!1},multiply:{depth_test:!0,depth_write:!1},inlay:{depth_test:!0,depth_write:!1},overlay:{depth_test:!1,depth_write:!1}},default_blend_orders:{opaque:0,add:1,multiply:2,inlay:3,translucent:4,overlay:5},sortByBlendOrderWithinLayers:function(t){var e=[],r={};for(var n in t.forEach((function(t){var e=parseInt(t.name,10)||0;r[e]||(r[e]=[]),r[e].push(t)})),r)e.push.apply(e,In(r[n].sort(ma.blendOrderSort)));return e},blendOrderSort:function(t,e){return"opaque"===t.blend||"opaque"===e.blend?"opaque"===t.blend&&"opaque"===e.blend?t.name<e.name?-1:1:"opaque"===t.blend?-1:1:t.blend_order<e.blend_order||!(t.blend_order>e.blend_order)&&(ma.default_blend_orders[t.blend]<ma.default_blend_orders[e.blend]||!(ma.default_blend_orders[t.blend]>ma.default_blend_orders[e.blend])&&t.name<e.name)?-1:1}},ba=0,_a=0,wa=function(){function t(e){var r=e.coords,n=e.style_zoom,i=e.source,o=e.worker,a=e.view,s=e.sceneId;vn(this,t),this.textureManager=Oo(s),this.id=ba++,this.worker=o,this.view=a,this.source=i,this.generation=null,this.valid=!0,this.proxy_for=null,this.proxy_depth=0,this.proxied_as=null,this.fade_in=!0,this.loading=!1,this.loaded=!1,this.built=!1,this.labeled=!1,this.error=null,this.style_zoom=n,this.coords=t.normalizedCoordinate(r,this.source,this.style_zoom),this.key=t.key(this.coords,this.source,this.style_zoom),this.overzoom=Math.max(this.style_zoom-this.coords.z,0),this.overzoom2=Math.pow(2,this.overzoom),this.min=$n.metersForTile(this.coords),this.max=$n.metersForTile({x:this.coords.x+1,y:this.coords.y+1,z:this.coords.z}),this.span={x:this.max.x-this.min.x,y:this.max.y-this.min.y},this.bounds={sw:{x:this.min.x,y:this.max.y},ne:{x:this.max.x,y:this.min.y}},this.center_dist=0,this.meters_per_pixel=$n.metersPerPixel(this.style_zoom),this.meters_per_pixel_sq=this.meters_per_pixel*this.meters_per_pixel,this.units_per_pixel=$n.units_per_pixel/this.overzoom2,this.units_per_meter_overzoom=$n.unitsPerMeter(this.coords.z)*this.overzoom2,this.meshes={},this.new_mesh_styles=[]}return bn(t,[{key:"freeResources",value:function(){for(var t in this.meshes)this.meshes[t].forEach((function(t){return t.destroy()}));this.meshes={}}},{key:"destroy",value:function(){ko.removeForTile(this.id),this.workerMessage("self.removeTile",this.id),this.freeResources(),this.worker=null,this.valid=!1}},{key:"buildAsMessage",value:function(){return{id:this.id,key:this.key,source:this.source.name,coords:this.coords,min:this.min,max:this.max,units_per_pixel:this.units_per_pixel,meters_per_pixel:this.meters_per_pixel,meters_per_pixel_sq:this.meters_per_pixel_sq,units_per_meter_overzoom:this.units_per_meter_overzoom,style_zoom:this.style_zoom,overzoom:this.overzoom,overzoom2:this.overzoom2,generation:this.generation}}},{key:"workerMessage",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return ui.postMessage.apply(ui,[this.worker].concat(e))}},{key:"build",value:function(t,e){var r=(1<arguments.length&&void 0!==e?e:{}).fade_in,n=void 0===r||r;return this.generation=t,this.fade_in=n,this.loaded||(this.loading=!0,this.built=!1,this.labeled=!1),this.workerMessage("self.buildTile",{tile:this.buildAsMessage()})}},{key:"buildMeshes",value:function(t,e){if(!this.error){this.build_id=_a++;var r={},n=this.mesh_data;if(n)for(var i in n){for(var o in n[i].meshes){var a=n[i].meshes[o];if(a.vertex_data){if(!t[i]){xi("warn","Could not create mesh because style '".concat(i,"' not found, for tile ").concat(this.key,", aborting tile"));break}var s=Object.assign({},n[i]);s.uniforms=Object.assign({},s.uniforms,a.uniforms),s.variant=a.variant,a.textures&&(s.textures=a.textures),a.labels&&(s.retain=!0);var l=t[i].makeMesh(a.vertex_data,a.vertex_elements,s);l.variant=s.variant,l.labels=a.labels,r[i]=r[i]||[],r[i].push(l),null==l.variant.order&&(l.variant.order=r[i].length-1)}}r[i]&&r[i].sort((function(t,e){var r=t.variant.order,n=e.variant.order;return null!=r&&(null==n||r<n)?-1:1}))}for(var u in delete this.mesh_data,r)this.meshes[u]&&this.meshes[u].forEach((function(t){return t.destroy()})),this.meshes[u]=r[u],this.new_mesh_styles.push(u);if(e.done){for(var c in this.meshes)-1===this.new_mesh_styles.indexOf(c)&&(this.meshes[c].forEach((function(t){return t.destroy()})),delete this.meshes[c]);this.new_mesh_styles=[]}}}},{key:"setProxyFor",value:function(t){t?(this.proxy_for=this.proxy_for||[],this.proxy_for.push(t),this.proxy_depth=1,t.proxied_as=t.style_zoom>this.style_zoom?"child":"parent"):(this.proxy_for=null,this.proxy_depth=0)}},{key:"isProxy",value:function(){return null!=this.proxy_for}},{key:"shouldProxyForStyle",value:function(t){return!this.proxy_for||this.proxy_for.some((function(e){return null==e.meshes[t]}))}},{key:"setupProgram",value:function(t,e){var r=t.model,n=t.model32;e.uniform("4fv","u_tile_origin",[this.min.x,this.min.y,this.style_zoom,this.coords.z]),e.uniform("1f","u_tile_proxy_depth",this.proxy_depth),Go(r),Ho(r,r,Fo(this.min.x,this.min.y,0)),Qo(r,r,Fo(this.span.x/$n.tile_scale,-1*this.span.y/$n.tile_scale,1)),qo(n,r),e.uniform("Matrix4fv","u_model",n),e.uniform("1i","u_tile_fade_in",this.fade_in&&"child"!==this.proxied_as)}},{key:"merge",value:function(t){return this.loading=t.loading,this.loaded=t.loaded,this.generation=t.generation,this.error=t.error,this.mesh_data=t.mesh_data,this.selection_data?Object.assign(this.selection_data,t.selection_data):this.selection_data=t.selection_data,this}}],[{key:"coord",value:function(e){return{x:e.x,y:e.y,z:e.z,key:t.coordKey(e)}}},{key:"coordKey",value:function(t){return t.x+"/"+t.y+"/"+t.z}},{key:"key",value:function(t,e,r){if(!(t.y<0||t.y>=1<<t.z||t.z<0))return[e.name,r,t.x,t.y,t.z].join("/")}},{key:"normalizedKey",value:function(e,r,n){return t.key(t.normalizedCoordinate(e,r,n),r,n)}},{key:"normalizedCoordinate",value:function(e,r){return r.zoom_bias&&(e=t.coordinateAtZoom(e,Math.max(0,e.z-r.zoom_bias))),t.coordinateWithMaxZoom(e,r.max_zoom)}},{key:"coordinateAtZoom",value:function(e,r){var n,i=e.x,o=e.y,a=e.z;return a!==r&&(n=Math.pow(2,a-r),i=Math.floor(i/n),o=Math.floor(o/n),a=r),t.coord({x:i,y:o,z:a})}},{key:"coordinateWithMaxZoom",value:function(e,r){var n=e.x,i=e.y,o=e.z;return void 0!==r&&r<o?t.coordinateAtZoom({x:n,y:i,z:o},r):t.coord({x:n,y:i,z:o})}},{key:"childrenForCoordinate",value:function(e){var r=e.x,n=e.y,i=e.z,o=e.key;return t.coord_children[o]||(i++,r*=2,n*=2,t.coord_children[o]=[t.coord({x:r,y:n,z:i}),t.coord({x:r+1,y:n,z:i}),t.coord({x:r,y:n+1,z:i}),t.coord({x:r+1,y:n+1,z:i})]),t.coord_children[o]}},{key:"isDescendant",value:function(e,r){if(r.z>e.z){var n=t.coordinateAtZoom(r,e.z),i=n.x,o=n.y;return e.x===i&&e.y===o}return!1}},{key:"cancel",value:function(e){e&&(e.canceled=!0,e.source_data&&e.source_data.request_id&&(Bi.cancelRequest(e.source_data.request_id),e.source_data.request_id=null),t.abortBuild(e))}},{key:"buildGeometry",value:function(e,r){var n=r.scene_id,i=r.layers,o=r.styles,a=r.global,s=r.sources,l=r.meshVariantMaxLife,u=e.source_data;for(var c in So.startTile(e.id,{apply_repeat_groups:!0}),i){var h=i[c];if(h&&h.config_data){if(h.config_data.source===e.source)for(var f=t._getDataForSource(u,h.config_data,c),p=0;p<f.length;p++){var A=f[p],d=A.geom;if(d)for(var g=0;g<d.features.length;g++){var y=d.features[g];if(null!=y.geometry){var v=vo.getFeatureParseContext(y,e,a,s);v.winding=e.default_winding,v.source=e.source,v.layer=A.layer;var m=h.buildDrawGroups(v,!0);if(m)for(var b in m){var _=m[b],w=_.style||b,x=o[w];x?null!=(_=x.preprocess(_,e.source))&&!1!==_.visible&&(v.layers=_.layers,x.addFeature(y,_,v)):xi("warn","Style '".concat(w,"' not found, skipping layer '").concat(c,"':"),_,y)}}}}}else xi("warn","Layer ".concat(c," was defined without a geometry data source and will not be rendered."))}var E=t._stylesForTile(e,o);t._sendStyleGroups(e,E,{scene_id:n,meshVariantMaxLife:l},(function(t){return t.collision?"collision":"non-collision"}))}},{key:"_stylesForTile",value:function(t,e){var r=[];for(var n in e)e[n].hasDataForTile(t)&&r.push(e[n]);return r}},{key:"_sendStyleGroups",value:function(e,r,n,i){var o=n.scene_id,a=n.meshVariantMaxLife,s={};r.forEach((function(t){var e=i(t);s[e]=s[e]||[],s[e].push(t)})),0<Object.keys(s).length?function(){var r={start:!0};for(var n in e.mesh_data={},s)!function(n){var i=s[n];Promise.all(i.map((function(t){return t.endData(e)}))).then((function(){xi("trace","Finished style group '".concat(n,"' for tile ").concat(e.key)),s[n]=[],Object.keys(s).every((function(t){return 0===s[t].length}))&&(r.done=!0),ui.postMessage("TileManager_".concat(o,".buildTileStylesCompleted"),ui.withTransferables({tile:t.slice(e,["mesh_data","selection_data"]),progress:r})),r.start=null,e.mesh_data={},e.selection_data={},r.done&&So.resetTile(e.id)}),(function(t){xi("error","Error for style group '".concat(n,"' for tile ").concat(e.key),t)}))}(n);ma.updateMeshVariantTypeCache(a)}():(ui.postMessage("TileManager_".concat(o,".buildTileStylesCompleted"),ui.withTransferables({tile:t.slice(e),progress:{start:!0,done:!0}})),So.resetTile(e.id))}},{key:"_getDataForSource",value:function(t,e,r){var n=2<arguments.length&&void 0!==r?r:null,i=[];return null!=e&&null!=t&&null!=t.layers&&(!e.layer&&t.layers._default||"string"==typeof e.layer&&!t.layers[e.layer]&&new RegExp("^\\d+_"+e.layer+"$").test(n)&&t.layers._default?i.push({geom:t.layers._default}):!e.layer&&n?i.push({layer:n,geom:t.layers[n]}):"string"==typeof e.layer?i.push({layer:e.layer,geom:t.layers[e.layer]}):Array.isArray(e.layer)&&e.layer.forEach((function(e){t.layers[e]&&t.layers[e].features&&i.push({layer:e,geom:t.layers[e]})}))),i}},{key:"abortBuild",value:function(t,e){if(ko.removeForTile(t.id),So.abortTile(t.id),t.mesh_data)for(var r in t.mesh_data){var n=t.mesh_data[r].textures;n&&n.forEach((function(r){var n=Oo(e).textures[r];n&&(xi("trace","releasing texture ".concat(r," for tile ").concat(t.key)),n.release())}))}}},{key:"slice",value:function(t,e){var r=["id","key","loading","loaded","generation","error","debug"];Array.isArray(e)&&r.push.apply(r,In(e));for(var n={},i=0;i<r.length;i++){var o=r[i];n[o]=t[o]}return n}}]),t}();wa.coord_children={};var xa,Ea=function(){wn(e,Fi);var t=Tn(e);function e(r,n){var i;return vn(this,e),-1===(i=t.call(this,r,n)).rasters.indexOf(i.name)&&i.rasters.unshift(i.name),i.filtering=r.filtering,i.textures={},i}return bn(e,[{key:"load",value:function(t){t.source_data={},t.source_data.layers={},t.pad_scale=this.pad_scale,t.rasters=In(this.rasters);var e=$n.tile_scale;return t.source_data.layers={_default:{type:"FeatureCollection",features:[{geometry:{type:"Polygon",coordinates:[[[0,0],[e,0],[e,-e],[0,-e],[0,0]]]},properties:{}}]}},t.default_winding="CW",Promise.resolve(t)}},{key:"tileTexture",value:function(t){var e,r,n=t.coords.key;return this.textures[n]||(e=wa.coordinateWithMaxZoom(t.coords,this.max_zoom),r=this.formatUrl(this.url,{coords:e}),this.textures[n]={url:r,filtering:this.filtering,coords:e}),this.textures[n]}}]),e}();Mi.register(Ea,"Raster");var Ba=xa={};function Ca(t,e,r,n){for(var i,o=n,a=r-e>>1,s=r-e,l=t[e],u=t[e+1],c=t[r],h=t[r+1],f=e+3;f<r;f+=3){var p,A=function(t,e,r,n,i,o){var a,s=i-r,l=o-n;return 0===s&&0===l||(1<(a=((t-r)*s+(e-n)*l)/(s*s+l*l))?(r=i,n=o):0<a&&(r+=s*a,n+=l*a)),(s=t-r)*s+(l=e-n)*l}(t[f],t[f+1],l,u,c,h);o<A?(i=f,o=A):A!==o||(p=Math.abs(f-a))<s&&(i=f,s=p)}n<o&&(3<i-e&&Ca(t,e,i,n),t[i+2]=o,3<r-i&&Ca(t,i,r,n))}function Sa(t,e,r,n){var i={id:void 0===t?null:t,type:e,geometry:r,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,r=t.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)ka(t,e);else if("Polygon"===r||"MultiLineString"===r)for(var n=0;n<e.length;n++)ka(t,e[n]);else if("MultiPolygon"===r)for(n=0;n<e.length;n++)for(var i=0;i<e[n].length;i++)ka(t,e[n][i])}(i),i}function ka(t,e){for(var r=0;r<e.length;r+=3)t.minX=Math.min(t.minX,e[r]),t.minY=Math.min(t.minY,e[r+1]),t.maxX=Math.max(t.maxX,e[r]),t.maxY=Math.max(t.maxY,e[r+1])}function Ta(t,e){var r=[];if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)Na(r,t.features[n],e,n);else"Feature"===t.type?Na(r,t,e):Na(r,{geometry:t},e);return r}function Na(t,e,r,n){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),s=[],l=e.id;if(r.promoteId?l=e.properties[r.promoteId]:r.generateId&&(l=n||0),"Point"===o)La(i,s);else if("MultiPoint"===o)for(var u=0;u<i.length;u++)La(i[u],s);else if("LineString"===o)Ia(i,s,a,!1);else if("MultiLineString"===o){if(r.lineMetrics){for(u=0;u<i.length;u++)s=[],Ia(i[u],s,a,!1),t.push(Sa(l,"LineString",s,e.properties));return}Ma(i,s,a,!1)}else if("Polygon"===o)Ma(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"!==o)throw new Error("Input data is not a valid GeoJSON object.");for(u=0;u<e.geometry.geometries.length;u++)Na(t,{id:l,geometry:e.geometry.geometries[u],properties:e.properties},r,n);return}for(u=0;u<i.length;u++){var c=[];Ma(i[u],c,a,!0),s.push(c)}}t.push(Sa(l,o,s,e.properties))}}function La(t,e){e.push(Oa(t[0])),e.push(Pa(t[1])),e.push(0)}function Ia(t,e,r,n){for(var i,o,a=0,s=0;s<t.length;s++){var l=Oa(t[s][0]),u=Pa(t[s][1]);e.push(l),e.push(u),e.push(0),0<s&&(a+=n?(i*u-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(u-o,2))),i=l,o=u}var c=e.length-3;e[2]=1,Ca(e,0,c,r),e[2+c]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function Ma(t,e,r,n){for(var i=0;i<t.length;i++){var o=[];Ia(t[i],o,r,n),e.push(o)}}function Oa(t){return t/360+.5}function Pa(t){var e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:1<r?1:r}function Fa(t,e,r,n,i,o,a,s){if(n/=e,(r/=e)<=o&&a<n)return t;if(a<r||n<=o)return null;for(var l=[],u=0;u<t.length;u++){var c=t[u],h=c.geometry,f=c.type,p=0===i?c.minX:c.minY,A=0===i?c.maxX:c.maxY;if(r<=p&&A<n)l.push(c);else if(!(A<r||n<=p)){var d=[];if("Point"===f||"MultiPoint"===f)!function(t,e,r,n,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];r<=a&&a<=n&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}(h,d,r,n,i);else if("LineString"===f)Ua(h,d,r,n,i,!1,s.lineMetrics);else if("MultiLineString"===f)Da(h,d,r,n,i,!1);else if("Polygon"===f)Da(h,d,r,n,i,!0);else if("MultiPolygon"===f)for(var g=0;g<h.length;g++){var y=[];Da(h[g],y,r,n,i,!0),y.length&&d.push(y)}if(d.length){if(s.lineMetrics&&"LineString"===f){for(g=0;g<d.length;g++)l.push(Sa(c.id,f,d[g],c.tags));continue}"LineString"!==f&&"MultiLineString"!==f||(1===d.length?(f="LineString",d=d[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===d.length?"Point":"MultiPoint"),l.push(Sa(c.id,f,d,c.tags))}}}return l.length?l:null}function Ua(t,e,r,n,i,o,a){for(var s,l,u=Ra(t),c=0===i?Ha:Qa,h=t.start,f=0;f<t.length-3;f+=3){var p=t[f],A=t[f+1],d=t[f+2],g=t[f+3],y=t[f+4],v=0===i?p:A,m=0===i?g:y,b=!1;a&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(A-y,2))),v<r?r<m&&(l=c(u,p,A,g,y,r),a&&(u.start=h+s*l)):n<v?m<n&&(l=c(u,p,A,g,y,n),a&&(u.start=h+s*l)):ja(u,p,A,d),m<r&&r<=v&&(l=c(u,p,A,g,y,r),b=!0),n<m&&v<=n&&(l=c(u,p,A,g,y,n),b=!0),!o&&b&&(a&&(u.end=h+s*l),e.push(u),u=Ra(t)),a&&(h+=s)}var _=t.length-3;p=t[_],A=t[_+1],d=t[_+2],r<=(v=0===i?p:A)&&v<=n&&ja(u,p,A,d),_=u.length-3,o&&3<=_&&(u[_]!==u[0]||u[_+1]!==u[1])&&ja(u,u[0],u[1],u[2]),u.length&&e.push(u)}function Ra(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function Da(t,e,r,n,i,o){for(var a=0;a<t.length;a++)Ua(t[a],e,r,n,i,o,!1)}function ja(t,e,r,n){t.push(e),t.push(r),t.push(n)}function Ha(t,e,r,n,i,o){var a=(o-e)/(n-e);return t.push(o),t.push(r+(i-r)*a),t.push(1),a}function Qa(t,e,r,n,i,o){var a=(o-r)/(i-r);return t.push(e+(n-e)*a),t.push(o),t.push(1),a}function za(t,e){var r=e.buffer/e.extent,n=t,i=Fa(t,1,-1-r,r,0,-1,2,e),o=Fa(t,1,1-r,2+r,0,-1,2,e);return(i||o)&&(n=Fa(t,1,-r,1+r,0,-1,2,e)||[],i&&(n=Va(i,1).concat(n)),o&&(n=n.concat(Va(o,-1)))),n}function Va(t,e){for(var r=[],n=0;n<t.length;n++){var i,o=t[n],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=Ga(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(Ga(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],u=0;u<o.geometry[s].length;u++)l.push(Ga(o.geometry[s][u],e));i.push(l)}r.push(Sa(o.id,a,i,o.tags))}return r}function Ga(t,e){var r=[];r.size=t.size,void 0!==t.start&&(r.start=t.start,r.end=t.end);for(var n=0;n<t.length;n+=3)r.push(t[n]+e,t[n+1],t[n+2]);return r}function qa(t,e){if(t.transformed)return t;for(var r,n=1<<t.z,i=t.x,o=t.y,a=0;a<t.features.length;a++){var s=t.features[a],l=s.geometry,u=s.type;if(s.geometry=[],1===u)for(r=0;r<l.length;r+=2)s.geometry.push(Ka(l[r],l[r+1],e,n,i,o));else for(r=0;r<l.length;r++){for(var c=[],h=0;h<l[r].length;h+=2)c.push(Ka(l[r][h],l[r][h+1],e,n,i,o));s.geometry.push(c)}}return t.transformed=!0,t}function Ka(t,e,r,n,i,o){return[Math.round(r*(t*n-i)),Math.round(r*(e*n-o))]}function Ya(t,e,r,n,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,function(t,e,r,n){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)Wa(a,i,t,r,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)Wa(a,i[s],t,r,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var u=i[l];for(s=0;s<u.length;s++)Wa(a,u[s],t,r,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&n.lineMetrics){for(var h in c={},e.tags)c[h]=e.tags[h];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var f={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(f.id=e.id),t.features.push(f)}}(a,t[s],o,i);var l=t[s].minX,u=t[s].minY,c=t[s].maxX,h=t[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),c>a.maxX&&(a.maxX=c),h>a.maxY&&(a.maxY=h)}return a}function Wa(t,e,r,n,i,o){var a=n*n;if(0<n&&e.size<(i?a:n))r.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===n||e[l+2]>a)&&(r.numSimplified++,s.push(e[l]),s.push(e[l+1])),r.numPoints++;i&&function(t,e){for(var r=0,n=0,i=t.length,o=i-2;n<i;o=n,n+=2)r+=(t[n]-t[o])*(t[n+1]+t[o+1]);if(0<r===e)for(n=0,i=t.length;n<i/2;n+=2){var a=t[n],s=t[n+1];t[n]=t[i-2-n],t[n+1]=t[i-1-n],t[i-2-n]=a,t[i-1-n]=s}}(s,o),t.push(s)}}var Xa={maxZoom:14,tolerance:3,extent:4096,buffer:64,lineMetrics:!(xa.deepClone=function(t){return Array.isArray(t)?t.map(xa.deepClone):t}),promoteId:null,generateId:!1};function Ja(t,e,r,n,i){var o=Object.assign({},Xa,i),a=Ta(t,o),s=function(t){var e,r=2,n=-1,i=1,o=0,a=Pn(t);try{for(a.s();!(e=a.n()).done;){var s=e.value;s.minX<r&&(r=s.minX),s.maxX>n&&(n=s.maxX),s.minY<i&&(i=s.minY),s.maxY>o&&(o=s.maxY)}}catch(t){a.e(t)}finally{a.f()}return{minX:r,maxX:n,minY:i,maxY:o}}(a=za(a,o)),l=s.minX,u=s.minY,c=s.maxX,h=s.maxY,f=1<<e,p=o.buffer/o.extent,A=1+p;return a=Fa(a,f,r-p,r+A,0,l,c,o)||[],qa(Ya(a=Fa(a,f,n-p,n+A,1,u,h,o)||[],e,r,n,o),o.extent)}function Za(t,e){this.items=[],this.algorithm=t;var r=void 0===(e=e||{}).sort||e.sort;this.sort=r}Za.prototype={addItem:function(t){this.items.push(t)},normalizeCoordinates:function(){var t=this.items,e=1/0,r=1/0;t.forEach((function(t){var n=t;e=Math.min(e,n.x),r=Math.min(r,n.y)})),t.forEach((function(t){var n=t;n.x-=e,n.y-=r}))},getStats:function(){var t=this.items.map((function(t){return t})),e=t.map((function(t){return t.x})),r=t.map((function(t){return t.y})),n=t.map((function(t){return t.x+t.width})),i=t.map((function(t){return t.y+t.height}));return{minX:Math.max.apply(Math,e),minY:Math.max.apply(Math,r),maxX:Math.max.apply(Math,n),maxY:Math.max.apply(Math,i)}},getItems:function(){return this.items},processItems:function(){var t=this.items;return this.sort&&(t=this.algorithm.sort(t)),t=this.algorithm.placeItems(t),this.items=t},exportItems:function(){return this.processItems(),this.normalizeCoordinates(),this.items},export:function(){var t=this.exportItems(),e=this.getStats();return{height:e.maxY,width:e.maxX,items:t}}};var $a=Za,ts=[],es=[],rs="undefined"!=typeof Uint8Array?Uint8Array:Array,ns=!1;function is(){ns=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=t.length;e<r;++e)ts[e]=t[e],es[t.charCodeAt(e)]=e;es["-".charCodeAt(0)]=62,es["_".charCodeAt(0)]=63}function os(t,e,r){for(var n,i,o=[],a=e;a<r;a+=3)n=(t[a]<<16)+(t[a+1]<<8)+t[a+2],o.push(ts[(i=n)>>18&63]+ts[i>>12&63]+ts[i>>6&63]+ts[63&i]);return o.join("")}function as(t){var e;ns||is();for(var r=t.length,n=r%3,i="",o=[],a=0,s=r-n;a<s;a+=16383)o.push(os(t,a,s<a+16383?s:a+16383));return 1==n?(e=t[r-1],i+=ts[e>>2],i+=ts[e<<4&63],i+="=="):2==n&&(e=(t[r-2]<<8)+t[r-1],i+=ts[e>>10],i+=ts[e>>4&63],i+=ts[e<<2&63],i+="="),o.push(i),o.join("")}function ss(t,e,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,h=r?i-1:0,f=r?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;0<c;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;0<c;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=u}return(p?-1:1)*a*Math.pow(2,o-n)}function ls(t,e,r,n,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,A=n?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(e+=1<=a+h?f/l:f*Math.pow(2,1-h))*l&&(a++,l/=2),c<=a+h?(s=0,a=c):1<=a+h?(s=(e*l-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));8<=i;t[r+p]=255&s,p+=A,s/=256,i-=8);for(a=a<<i|s,u+=i;0<u;t[r+p]=255&a,p+=A,a/=256,u-=8);t[r+p-A]|=128*d}var us={}.toString,cs=Array.isArray||function(t){return"[object Array]"==us.call(t)};As.TYPED_ARRAY_SUPPORT=void 0===Yn.TYPED_ARRAY_SUPPORT||Yn.TYPED_ARRAY_SUPPORT;var hs=fs();function fs(){return As.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ps(t,e){if(fs()<e)throw new RangeError("Invalid typed array length");return As.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=As.prototype:(null===t&&(t=new As(e)),t.length=e),t}function As(t,e,r){if(!(As.TYPED_ARRAY_SUPPORT||this instanceof As))return new As(t,e,r);if("number"!=typeof t)return ds(this,t,e,r);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return ys(this,t)}function ds(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),As.TYPED_ARRAY_SUPPORT?(t=e).__proto__=As.prototype:t=vs(t,e),t}(t,e,r,n):"string"==typeof e?function(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!As.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|_s(e,r),i=(t=ps(t,n)).write(e,r);return i!==n&&(t=t.slice(0,i)),t}(t,e,r):function(t,e){if(bs(e)){var r=0|ms(e.length);return 0===(t=ps(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?ps(t,0):vs(t,e);if("Buffer"===e.type&&cs(e.data))return vs(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function gs(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function ys(t,e){if(gs(e),t=ps(t,e<0?0:0|ms(e)),!As.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function vs(t,e){var r=e.length<0?0:0|ms(e.length);t=ps(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function ms(t){if(t>=fs())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+fs().toString(16)+" bytes");return 0|t}function bs(t){return null!=t&&t._isBuffer}function _s(t,e){if(bs(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Rs(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Ds(t).length;default:if(n)return Rs(t).length;e=(""+e).toLowerCase(),n=!0}}function ws(t,e,r){var n,i,o,a=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return function(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||n<r)&&(r=n);for(var i="",o=e;o<r;++o)i+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(t[o]);return i}(this,e,r);case"utf8":case"utf-8":return ks(this,e,r);case"ascii":return function(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}(this,e,r);case"latin1":case"binary":return function(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}(this,e,r);case"base64":return n=this,o=r,0===(i=e)&&o===n.length?as(n):as(n.slice(i,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}(this,e,r);default:if(a)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),a=!0}}function xs(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function Es(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=As.from(e,n)),bs(e))return 0===e.length?-1:Bs(t,e,r,n,i);if("number"==typeof e)return e&=255,As.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):Bs(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function Bs(t,e,r,n,i){var o=1,a=t.length,s=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a/=o=2,s/=2,r/=2}function l(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i)for(var u=-1,c=r;c<a;c++)if(l(t,c)===l(e,-1===u?0:c-u)){if(-1===u&&(u=c),c-u+1===s)return u*o}else-1!==u&&(c-=c-u),u=-1;else for(a<r+s&&(r=a-s),c=r;0<=c;c--){for(var h=!0,f=0;f<s;f++)if(l(t,c+f)!==l(e,f)){h=!1;break}if(h)return c}return-1}function Cs(t,e,r,n){return js(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function Ss(t,e,r,n){return js(function(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=(r=t.charCodeAt(a))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function ks(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,a,s,l,u=t[i],c=null,h=239<u?4:223<u?3:191<u?2:1;if(i+h<=r)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(o=t[i+1]))&&127<(l=(31&u)<<6|63&o)&&(c=l);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&2047<(l=(15&u)<<12|(63&o)<<6|63&a)&&(l<55296||57343<l)&&(c=l);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)&&l<1114112&&(c=l)}null===c?(c=65533,h=1):65535<c&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(t){var e=t.length;if(e<=Ts)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Ts));return r}(n)}As.poolSize=8192,As._augment=function(t){return t.__proto__=As.prototype,t},As.from=function(t,e,r){return ds(null,t,e,r)},As.TYPED_ARRAY_SUPPORT&&(As.prototype.__proto__=Uint8Array.prototype,As.__proto__=Uint8Array),As.alloc=function(t,e,r){return n=null,o=e,a=r,gs(i=t),i<=0||void 0===o?ps(n,i):"string"==typeof a?ps(n,i).fill(o,a):ps(n,i).fill(o);var n,i,o,a},As.allocUnsafe=function(t){return ys(null,t)},As.allocUnsafeSlow=function(t){return ys(null,t)},As.isBuffer=Hs,As.compare=function(t,e){if(!bs(t)||!bs(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},As.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},As.concat=function(t,e){if(!cs(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return As.alloc(0);if(void 0===e)for(i=e=0;i<t.length;++i)e+=t[i].length;for(var r=As.allocUnsafe(e),n=0,i=0;i<t.length;++i){var o=t[i];if(!bs(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,n),n+=o.length}return r},As.byteLength=_s,As.prototype._isBuffer=!0,As.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)xs(this,e,e+1);return this},As.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)xs(this,e,e+3),xs(this,e+1,e+2);return this},As.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)xs(this,e,e+7),xs(this,e+1,e+6),xs(this,e+2,e+5),xs(this,e+3,e+4);return this},As.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?ks(this,0,t):ws.apply(this,arguments)},As.prototype.equals=function(t){if(!bs(t))throw new TypeError("Argument must be a Buffer");return this===t||0===As.compare(this,t)},As.prototype.inspect=function(){var t="";return 0<this.length&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(t+=" ... ")),"<Buffer "+t+">"},As.prototype.compare=function(t,e,r,n,i){if(!bs(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=e)return 0;if(i<=n)return-1;if(r<=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),s=Math.min(o,a),l=this.slice(n,i),u=t.slice(e,r),c=0;c<s;++c)if(l[c]!==u[c]){o=l[c],a=u[c];break}return o<a?-1:a<o?1:0},As.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},As.prototype.indexOf=function(t,e,r){return Es(this,t,e,r,!0)},As.prototype.lastIndexOf=function(t,e,r){return Es(this,t,e,r,!1)},As.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||i<r)&&(r=i),0<t.length&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var o,a,s,l,u=!1;;)switch(n){case"hex":return function(t,e,r,n){r=Number(r)||0;var i=t.length-r;(!n||i<(n=Number(n)))&&(n=i);var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<n&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}(this,t,e,r);case"utf8":case"utf-8":return s=e,l=r,js(Rs(t,this.length-s),this,s,l);case"ascii":case"latin1":case"binary":return Cs(this,t,e,r);case"base64":return o=e,a=r,js(Ds(t),this,o,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ss(this,t,e,r);default:if(u)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),u=!0}},As.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ts=4096;function Ns(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(r<t+e)throw new RangeError("Trying to access beyond buffer length")}function Ls(t,e,r,n,i,o){if(!bs(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function Is(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function Ms(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function Os(t,e,r,n){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Ps(t,e,r,n,i){return i||Os(t,0,r,4),ls(t,e,r,n,23,4),r+4}function Fs(t,e,r,n,i){return i||Os(t,0,r,8),ls(t,e,r,n,52,8),r+8}As.prototype.slice=function(t,e){var r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t),As.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=As.prototype;else for(var n=e-t,i=new As(n,void 0),o=0;o<n;++o)i[o]=this[o+t];return i},As.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||Ns(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},As.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||Ns(t,e,this.length);for(var n=this[t+--e],i=1;0<e&&(i*=256);)n+=this[t+--e]*i;return n},As.prototype.readUInt8=function(t,e){return e||Ns(t,1,this.length),this[t]},As.prototype.readUInt16LE=function(t,e){return e||Ns(t,2,this.length),this[t]|this[t+1]<<8},As.prototype.readUInt16BE=function(t,e){return e||Ns(t,2,this.length),this[t]<<8|this[t+1]},As.prototype.readUInt32LE=function(t,e){return e||Ns(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},As.prototype.readUInt32BE=function(t,e){return e||Ns(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},As.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||Ns(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*e)),n},As.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||Ns(t,e,this.length);for(var n=e,i=1,o=this[t+--n];0<n&&(i*=256);)o+=this[t+--n]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*e)),o},As.prototype.readInt8=function(t,e){return e||Ns(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},As.prototype.readInt16LE=function(t,e){e||Ns(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},As.prototype.readInt16BE=function(t,e){e||Ns(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},As.prototype.readInt32LE=function(t,e){return e||Ns(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},As.prototype.readInt32BE=function(t,e){return e||Ns(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},As.prototype.readFloatLE=function(t,e){return e||Ns(t,4,this.length),ss(this,t,!0,23,4)},As.prototype.readFloatBE=function(t,e){return e||Ns(t,4,this.length),ss(this,t,!1,23,4)},As.prototype.readDoubleLE=function(t,e){return e||Ns(t,8,this.length),ss(this,t,!0,52,8)},As.prototype.readDoubleBE=function(t,e){return e||Ns(t,8,this.length),ss(this,t,!1,52,8)},As.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||Ls(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},As.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||Ls(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;0<=--i&&(o*=256);)this[e+i]=t/o&255;return e+r},As.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||Ls(this,t,e,1,255,0),As.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},As.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||Ls(this,t,e,2,65535,0),As.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Is(this,t,e,!0),e+2},As.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||Ls(this,t,e,2,65535,0),As.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Is(this,t,e,!1),e+2},As.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||Ls(this,t,e,4,4294967295,0),As.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):Ms(this,t,e,!0),e+4},As.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||Ls(this,t,e,4,4294967295,0),As.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Ms(this,t,e,!1),e+4},As.prototype.writeIntLE=function(t,e,r,n){var i;t=+t,e|=0,n||Ls(this,t,e,r,(i=Math.pow(2,8*r-1))-1,-i);var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},As.prototype.writeIntBE=function(t,e,r,n){var i;t=+t,e|=0,n||Ls(this,t,e,r,(i=Math.pow(2,8*r-1))-1,-i);var o=r-1,a=1,s=0;for(this[e+o]=255&t;0<=--o&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},As.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||Ls(this,t,e,1,127,-128),As.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},As.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||Ls(this,t,e,2,32767,-32768),As.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Is(this,t,e,!0),e+2},As.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||Ls(this,t,e,2,32767,-32768),As.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Is(this,t,e,!1),e+2},As.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||Ls(this,t,e,4,2147483647,-2147483648),As.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Ms(this,t,e,!0),e+4},As.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||Ls(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),As.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Ms(this,t,e,!1),e+4},As.prototype.writeFloatLE=function(t,e,r){return Ps(this,t,e,!0,r)},As.prototype.writeFloatBE=function(t,e,r){return Ps(this,t,e,!1,r)},As.prototype.writeDoubleLE=function(t,e,r){return Fs(this,t,e,!0,r)},As.prototype.writeDoubleBE=function(t,e,r){return Fs(this,t,e,!1,r)},As.prototype.copy=function(t,e,r,n){if(r=r||0,n||0===n||(n=this.length),e>=t.length&&(e=t.length),e=e||0,0<n&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;0<=i;--i)t[i+e]=this[i+r];else if(o<1e3||!As.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},As.prototype.fill=function(t,e,r,n){if("string"==typeof t){var i;if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1!==t.length||(i=t.charCodeAt(0))<256&&(t=i),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!As.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;if(e>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(t=t||0))for(s=e;s<r;++s)this[s]=t;else for(var o=bs(t)?t:Rs(new As(t,n).toString()),a=o.length,s=0;s<r-e;++s)this[s+e]=o[s%a];return this};var Us=/[^+\/0-9A-Za-z-_]/g;function Rs(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if(55295<(r=t.charCodeAt(a))&&r<57344){if(!i){if(56319<r){-1<(e-=3)&&o.push(239,191,189);continue}if(a+1===n){-1<(e-=3)&&o.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(e-=3)&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,r<128){if(--e<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Ds(t){return function(t){var e,r,n,i;ns||is();var o=t.length;if(0<o%4)throw new Error("Invalid string. Length must be a multiple of 4");n="="===t[o-2]?2:"="===t[o-1]?1:0,i=new rs(3*o/4-n),e=0<n?o-4:o;for(var a=0,s=0;s<e;s+=4,0)r=es[t.charCodeAt(s)]<<18|es[t.charCodeAt(s+1)]<<12|es[t.charCodeAt(s+2)]<<6|es[t.charCodeAt(s+3)],i[a++]=r>>16&255,i[a++]=r>>8&255,i[a++]=255&r;return 2==n?(r=es[t.charCodeAt(s)]<<2|es[t.charCodeAt(s+1)]>>4,i[a++]=255&r):1==n&&(r=es[t.charCodeAt(s)]<<10|es[t.charCodeAt(s+1)]<<4|es[t.charCodeAt(s+2)]>>2,i[a++]=r>>8&255,i[a++]=255&r),i}(function(t){var e;if((t=((e=t).trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(Us,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function js(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Hs(t){return null!=t&&(!!t._isBuffer||Qs(t)||"function"==typeof(e=t).readFloatLE&&"function"==typeof e.slice&&Qs(e.slice(0,0)));var e}function Qs(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var zs=Object.freeze({INSPECT_MAX_BYTES:50,kMaxLength:hs,Buffer:As,SlowBuffer:function(t){return+t!=t&&(t=0),As.alloc(+t)},isBuffer:Hs});Yn.setTimeout,Yn.clearTimeout,Yn.performance;var Vs="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){function r(){}t.super_=e,r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t},Gs=Vs;function qs(t,e){var r={seen:[],stylize:Ys};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),Zs(e)?r.showHidden=e:e&&function(t,e){if(e&&nl(e))for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]]}(r,e),el(r.showHidden)&&(r.showHidden=!1),el(r.depth)&&(r.depth=2),el(r.colors)&&(r.colors=!1),el(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=Ks),Ws(r,t,r.depth)}function Ks(t,e){var r=qs.styles[e];return r?"\x1b["+qs.colors[r][0]+"m"+t+"\x1b["+qs.colors[r][1]+"m":t}function Ys(t,e){return t}function Ws(t,e,r){if(t.customInspect&&e&&al(e.inspect)&&e.inspect!==qs&&(!e.constructor||e.constructor.prototype!==e)){var n=e.inspect(r,t);return tl(n)||(n=Ws(t,n,r)),n}var i=function(t,e){if(el(e))return t.stylize("undefined","undefined");if(tl(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return"number"==typeof e?t.stylize(""+e,"number"):Zs(e)?t.stylize(""+e,"boolean"):$s(e)?t.stylize("null","null"):void 0}(t,e);if(i)return i;var o,a=Object.keys(e),s=(o={},a.forEach((function(t,e){o[t]=!0})),o);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),ol(e)&&(0<=a.indexOf("message")||0<=a.indexOf("description")))return Xs(e);if(0===a.length){if(al(e)){var l=e.name?": "+e.name:"";return t.stylize("[Function"+l+"]","special")}if(rl(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(il(e))return t.stylize(Date.prototype.toString.call(e),"date");if(ol(e))return Xs(e)}var u,c,h="",f=!1,p=["{","}"];return u=e,Array.isArray(u)&&(f=!0,p=["[","]"]),al(e)&&(h=" [Function"+(e.name?": "+e.name:"")+"]"),rl(e)&&(h=" "+RegExp.prototype.toString.call(e)),il(e)&&(h=" "+Date.prototype.toUTCString.call(e)),ol(e)&&(h=" "+Xs(e)),0!==a.length||f&&0!=e.length?r<0?rl(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),c=f?function(t,e,r,n,i){for(var o=[],a=0,s=e.length;a<s;++a)ul(e,String(a))?o.push(Js(t,e,r,n,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(Js(t,e,r,n,i,!0))})),o}(t,e,r,s,a):a.map((function(n){return Js(t,e,r,s,n,f)})),t.seen.pop(),function(t,e,r){return 60<t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}(c,h,p)):p[0]+h+p[1]}function Xs(t){return"["+Error.prototype.toString.call(t)+"]"}function Js(t,e,r,n,i,o){var a,s,l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]};if(l.get?s=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),ul(n,i)||(a="["+i+"]"),s||(t.seen.indexOf(l.value)<0?-1<(s=$s(r)?Ws(t,l.value,null):Ws(t,l.value,r-1)).indexOf("\n")&&(s=o?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),el(a)){if(o&&i.match(/^\d+$/))return s;a=(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),t.stylize(a,"string"))}return a+": "+s}function Zs(t){return"boolean"==typeof t}function $s(t){return null===t}function tl(t){return"string"==typeof t}function el(t){return void 0===t}function rl(t){return nl(t)&&"[object RegExp]"===ll(t)}function nl(t){return"object"==typeof t&&null!==t}function il(t){return nl(t)&&"[object Date]"===ll(t)}function ol(t){return nl(t)&&("[object Error]"===ll(t)||t instanceof Error)}function al(t){return"function"==typeof t}function sl(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function ll(t){return Object.prototype.toString.call(t)}function ul(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function cl(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}qs.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},qs.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var hl,fl=Object.prototype.hasOwnProperty,pl=Object.keys||function(t){var e=[];for(var r in t)fl.call(t,r)&&e.push(r);return e},Al=Array.prototype.slice;function dl(){return void 0!==hl?hl:hl="foo"===function(){}.name}function gl(t){return Object.prototype.toString.call(t)}function yl(t){if(!Hs(t)&&"function"==typeof Yn.ArrayBuffer){if("function"==typeof ArrayBuffer.isView)return ArrayBuffer.isView(t);if(t)return t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer)}}function vl(t,e){t||El(t,!0,e,"==",Bl)}var ml=/\s*function\s+([^\(\s]*)\s*/;function bl(t){if(al(t)){if(dl())return t.name;var e=t.toString().match(ml);return e&&e[1]}}function _l(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=wl(xl(this.actual),128)+" "+this.operator+" "+wl(xl(this.expected),128),this.generatedMessage=!0);var e,r,n,i,o,a=t.stackStartFunction||El;Error.captureStackTrace?Error.captureStackTrace(this,a):(e=new Error).stack&&(o=e.stack,r=bl(a),0<=(n=o.indexOf("\n"+r))&&(i=o.indexOf("\n",n+1),o=o.substring(i+1)),this.stack=o)}function wl(t,e){return"string"!=typeof t||t.length<e?t:t.slice(0,e)}function xl(t){if(dl()||!al(t))return qs(t);var e=bl(t);return"[Function"+(e?": "+e:"")+"]"}function El(t,e,r,n,i){throw new _l({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}function Bl(t,e){t||El(t,!0,e,"==",Bl)}function Cl(t,e,r,n){if(t===e)return!0;if(Hs(t)&&Hs(e))return 0===cl(t,e);if(il(t)&&il(e))return t.getTime()===e.getTime();if(rl(t)&&rl(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(yl(t)&&yl(e)&&gl(t)===gl(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===cl(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(Hs(t)!==Hs(e))return!1;var i=(n=n||{actual:[],expected:[]}).actual.indexOf(t);return-1!==i&&i===n.expected.indexOf(e)||(n.actual.push(t),n.expected.push(e),function(t,e,r,n){if(null==t||null==e)return!1;if(sl(t)||sl(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=Sl(t),o=Sl(e);if(i&&!o||!i&&o)return!1;if(i)return Cl(t=Al.call(t),e=Al.call(e),r);var a,s,l=pl(t),u=pl(e);if(l.length!==u.length)return!1;for(l.sort(),u.sort(),s=l.length-1;0<=s;s--)if(l[s]!==u[s])return!1;for(s=l.length-1;0<=s;s--)if(!Cl(t[a=l[s]],e[a],r,n))return!1;return!0}(t,e,r,n))}return r?t===e:t==e}function Sl(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function kl(t,e){if(t&&e){if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return 1}catch(t){}if(!Error.isPrototypeOf(e))return!0===e.call({},t)}}function Tl(t,e,r,n){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=function(t){var e;try{t()}catch(t){e=t}return e}(e),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!i&&El(i,r,"Missing expected exception"+n);var o="string"==typeof n,a=!t&&i&&!r;if((!t&&ol(i)&&o&&kl(i,r)||a)&&El(i,r,"Got unwanted exception"+n),t&&i&&r&&!kl(i,r)||!t&&i)throw i}function Nl(){}Gs(vl.AssertionError=_l,Error),vl.fail=El,vl.ok=Bl,vl.equal=function t(e,r,n){e!=r&&El(e,r,n,"==",t)},vl.notEqual=function t(e,r,n){e==r&&El(e,r,n,"!=",t)},vl.deepEqual=function t(e,r,n){Cl(e,r,!1)||El(e,r,n,"deepEqual",t)},vl.deepStrictEqual=function t(e,r,n){Cl(e,r,!0)||El(e,r,n,"deepStrictEqual",t)},vl.notDeepEqual=function t(e,r,n){Cl(e,r,!1)&&El(e,r,n,"notDeepEqual",t)},vl.notDeepStrictEqual=function t(e,r,n){Cl(e,r,!0)&&El(e,r,n,"notDeepStrictEqual",t)},vl.strictEqual=function t(e,r,n){e!==r&&El(e,r,n,"===",t)},vl.notStrictEqual=function t(e,r,n){e===r&&El(e,r,n,"!==",t)},vl.throws=function(t,e,r){Tl(!0,t,e,r)},vl.doesNotThrow=function(t,e,r){Tl(!1,t,e,r)},vl.ifError=function(t){if(t)throw t};var Ll={sort:function(t){return t.sort((function(t,e){return Math.sqrt(Math.pow(t.height,2)+Math.pow(t.width,2))-Math.sqrt(Math.pow(e.height,2)+Math.pow(e.width,2))})),t},placeItems:function(t){var e=0,r=0;return t.forEach((function(t){t.x=e,t.y=r,e+=t.width,r+=t.height})),t}},Il={sort:function(t){return t.sort((function(t,e){return Math.sqrt(Math.pow(t.height,2)+Math.pow(t.width,2))-Math.sqrt(Math.pow(e.height,2)+Math.pow(e.width,2))})),t},placeItems:function(t){var e=0,r=0;return t.forEach((function(t){var n=t.width;t.x=e-n,t.y=r,e-=n,r+=t.height})),t}};Nl.prototype={fit:function(t){var e,r,n,i,o=t.length,a=0<o?t[0].width:0,s=0<o?t[0].height:0;for(this.root={x:0,y:0,width:a,height:s},e=0;e<o;e++)n=t[e],i=(r=this.findNode(this.root,n.width,n.height))?this.splitNode(r,n.width,n.height):this.growNode(n.width,n.height),n.x=i.x,n.y=i.y},findNode:function(t,e,r){return t.used?this.findNode(t.right,e,r)||this.findNode(t.down,e,r):e<=t.width&&r<=t.height?t:null},splitNode:function(t,e,r){return t.used=!0,t.down={x:t.x,y:t.y+r,width:t.width,height:t.height-r},t.right={x:t.x+e,y:t.y,width:t.width-e,height:r},t},growNode:function(t,e){var r=t<=this.root.width,n=e<=this.root.height,i=n&&this.root.height>=this.root.width+t,o=r&&this.root.width>=this.root.height+e;return i?this.growRight(t,e):o?this.growDown(t,e):n?this.growRight(t,e):r?this.growDown(t,e):null},growRight:function(t,e){var r;return this.root={used:!0,x:0,y:0,width:this.root.width+t,height:this.root.height,down:this.root,right:{x:this.root.width,y:0,width:t,height:this.root.height}},(r=this.findNode(this.root,t,e))?this.splitNode(r,t,e):null},growDown:function(t,e){var r;return this.root={used:!0,x:0,y:0,width:this.root.width,height:this.root.height+e,down:{x:0,y:this.root.height,width:this.root.width,height:e},right:this.root},(r=this.findNode(this.root,t,e))?this.splitNode(r,t,e):null}};var Ml=Nl,Ol={sort:function(t){return t},placeItems:function(t){return function(t,e){e=e||{};var r=new Ml,n=e.inPlace||!1,i=(i=t.map((function(t){return n?t:{width:t.width,height:t.height,item:t}}))).sort((function(t,e){return e.width*e.height-t.width*t.height}));r.fit(i);var o={width:i.reduce((function(t,e){return Math.max(t,e.x+e.width)}),0),height:i.reduce((function(t,e){return Math.max(t,e.y+e.height)}),0)};n||(o.items=i)}(t,{inPlace:!0}),t}},Pl={};function Fl(t,e){var r=t||"top-down";return"string"==typeof r&&vl(r=Pl[t],"Sorry, the '"+t+"' algorithm could not be loaded."),new $a(r,e)}function Ul(t,e){Pl[t]=e}Fl.PackingSmith=$a,Fl.addAlgorithm=Ul,Fl.algorithms=Pl,Ul("top-down",{sort:function(t){return t.sort((function(t,e){return t.height-e.height})),t},placeItems:function(t){var e=0;return t.forEach((function(t){t.x=0,t.y=e,e+=t.height})),t}}),Ul("left-right",{sort:function(t){return t.sort((function(t,e){return t.width-e.width})),t},placeItems:function(t){var e=0;return t.forEach((function(t){t.x=e,t.y=0,e+=t.width})),t}}),Ul("diagonal",Ll),Ul("alt-diagonal",Il),Ul("binary-tree",Ol);var Rl=Fl;function Dl(t){var e;try{t.getContext("2d").getImageData(0,0,1,1)}catch(t){e=t.message}return e}function jl(t,e,r){var n;return t instanceof HTMLImageElement&&((n=t.ownerDocument.createElement("canvas")).width=e,n.height=r,n.getContext("2d").drawImage(t,0,0,e,r),t=n),t}var Hl=$n.metersToLatLng([$n.half_circumference_meters,$n.half_circumference_meters]),Ql=Math.log($n.tile_size)/Math.LN2,zl=function(){wn(e,Ui);var t=Tn(e);function e(r,n){var i;return vn(this,e),i=t.call(this,r,n),li.is_worker&&(i._quad_tree=new Wn.H.geo.QuadTree,i._marker_quad_tree=new Wn.H.geo.QuadTree,i._tree_entries_by_object_id={},i._groups_by_id={},i._layersCache=new Wn.H.util.Cache(100)),li.is_main&&(i._objects_by_id={},i._commands=[],i._sendCommands=Ei(i._sendCommands,100,200),i.dispatchUpdate=i.dispatchUpdate.bind(kn(i))),i}return bn(e,[{key:"hasLabeledData",value:function(){return!1}},{key:"onReady",value:function(){this._synced_at=this.provider.getInvalidations().getMark();var t,e,r=this.provider.getRootGroup(),n=r.getObjects(!0),i=[];for(n.push(r),t=n.length;t--;)e=n[t],this._isObjectSupported(e)&&this._shouldBeStored(e)&&(this._objects_by_id[e.getId()]=e,i.push(e.forWorkerMessage()));var o=[{method_name:"addObjects",arguments:[i]}];this._sendImmediateCommands(o)}},{key:"onProviderUpdate",value:function(t){var e,r,n,i,o=t.target,a=t.currentTarget.getInvalidations(o.type);this._isObjectSupported(o)&&(e=this._synced_at,r=o.getId(),a.isRemove(e)?(delete this._objects_by_id[r],this._commands.push({method_name:"removeObjectsByIds",arguments:[[r],!0]})):a.isAdd(e)?this._shouldBeStored(o)&&(this._objects_by_id[r]=o,this._commands.push({method_name:"addObjects",arguments:[[o.forWorkerMessage()]]})):a.isSpatial(e)||a.isZOrder(e)?this._shouldBeStored(o)&&(n=[{method_name:"removeObjectsByIds",arguments:[[r],!0]},{method_name:"addObjects",arguments:[[(this._objects_by_id[r]=o).forWorkerMessage()]]}],this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands(n):this._commands.push(n[0],n[1])):a.isVisual(e)?this._shouldBeStored(o)&&(i={method_name:"updateObjectProperties",arguments:[(this._objects_by_id[r]=o).forWorkerMessage()]},this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands([i]):this._commands.push(i)):a.isVolatility(e)&&(delete this._objects_by_id[r],this._commands.push({method_name:"removeObjectsByIds",arguments:[[r],!0]}),this._shouldBeStored(o)&&(this._objects_by_id[r]=o,this._commands.push({method_name:"addObjects",arguments:[[o.forWorkerMessage()]]}))),this._commands.length&&this._sendCommands()),this._synced_at=a.getMark()}},{key:"_shouldBeStored",value:function(t){return 16===t.type||(!t.getIcon||1===t.getIcon().getState())&&this._hasSameVolatility(t)}},{key:"_hasSameVolatility",value:function(t){return t.getVolatility(!0)===this.has_volatile_data}},{key:"hasPendingCommands",value:function(){return 0<this._commands.length}},{key:"_sendCommands",value:function(){this._sendImmediateCommands(this._commands),this._commands=[]}},{key:"_sendImmediateCommands",value:function(t){t.length&&ui.postMessage(this.worker,this.target_name+".executeCommands",t).then(this.dispatchUpdate)}},{key:"_isObjectSupported",value:function(t){return t.forWorkerMessage&&8!==t.type}},{key:"getSyncedAt",value:function(){return this._synced_at}},{key:"getMapObjectById",value:function(t){return this._objects_by_id[t]}},{key:"getIconBitmapByObjectId",value:function(t,e){var r=this.getMapObjectById(t);if(r){var n=r.getIcon();if(n.uid===e&&1===n.getState()){var i=n.getSize();return jl(n.getBitmap(),i.w,i.h)}}}},{key:"_getRastersForMarkers",value:function(t){for(var e={},r=Rl("binary-tree"),n=0;n<t.length;n++){var i=t[n],o=i.properties.icon;e[o.id]||(r.addItem({width:o.size.w,height:o.size.h,meta:{objectId:i.id,id:o.id}}),e[o.id]=!0)}return r.export()}},{key:"fetchFeaturesForTile",value:function(t){var r=[],n=[],i=[],o=[],a=[],s=this._marker_quad_tree.intersectBoundingBox($n.getTileBoundingBox(t.coords,this.tile_size));t.source_data.error=null;for(var l=0;l<s.length;l++){var u={id:s[l].$feature$.id,properties:Object.assign({},s[l].$feature$.properties),geometry:{type:s[l].$feature$.geometry.type,coordinates:Ba.deepClone(s[l].$feature$.geometry.coordinates)}};r.push(u)}s=this._quad_tree.intersectBoundingBox($n.getTileBoundingBox(t.coords,this.tile_size,100));for(var c=0;c<s.length;c++){var h,f={id:s[c].$feature$.id,properties:Object.assign({},s[c].$feature$.properties),geometry:{type:s[c].$feature$.geometry.type,coordinates:Ba.deepClone(s[c].$feature$.geometry.coordinates)}};f.properties.overlay?n.push(f):f.geometry.type.includes("LineString")?i.push(f):f.geometry.type.includes("Polygon")&&(o.push(f),h={id:f.id,properties:f.properties,geometry:{type:f.geometry.type,coordinates:Ba.deepClone(f.geometry.coordinates)}},a.push(h))}r.sort(e._compareZInfo),o.sort(e._compareZInfo),n.sort(e._compareZInfo);var p=this.has_volatile_data?4096:0;a.sort(e._compareZInfo);for(var A=0;A<a.length;A++)a[A].properties.effectiveZIdx=p++;i.sort(e._compareZInfo);for(var d=0;d<i.length;d++)i[d].properties.effectiveZIdx=p++;t.source_data.layers.markers={type:"FeatureCollection",features:r},t.source_data.layers.polylines={type:"FeatureCollection",features:i},t.source_data.layers.polygons={type:"FeatureCollection",features:o},t.source_data.layers.outlines={type:"FeatureCollection",features:a},t.source_data.layers.overlays={type:"FeatureCollection",features:n}}},{key:"tileTexture",value:function(t){var e=t.source_data.layers.overlays;if(e){var r=this.name+"_"+t.coords.key,n=wa.coordinateWithMaxZoom(t.coords,this.max_zoom),i=e.features[0].properties.overlays_config;return{name:r,filtering:this.filtering,coords:n,width:$n.tile_size,height:$n.tile_size,overlays_config:i,source:this.name}}}},{key:"_load",value:function(t){var e=$n.wrapTile(t.coords,{x:!0}),r=e.z,n=e.x,i=e.y,o="".concat(r,"_").concat(n,"_").concat(i),a=this._layersCache.get(o),s=!1;if(a)t.source_data.layers=a;else{this.fetchFeaturesForTile(t);var l={maxZoom:this.max_zoom,tolerance:1.5,extent:$n.tile_scale},u=t.source_data.layers.overlays;u.features.length&&delete t.source_data.layers.overlays;var c=t.source_data.layers.markers;for(var h in c.features.length&&delete t.source_data.layers.markers,t.source_data.layers){var f,p=t.source_data.layers[h];p.features.length&&(l.buffer=h.includes("lines")?100*$n.units_per_pixel:0,f=Ja(p,r,n,i,l),t.source_data.layers[h]=lo(f))}t.source_data.layers.overlays=this._processOverlays(t,u);for(var A=t.source_data.layers.overlays.features.length;A--;)if(!t.source_data.layers.overlays.features[A].id){s=!0,this._layersCache.drop(o);break}t.source_data.layers.markers=this._processMarkers(t,c),this._postProcessTile(t),s||this._layersCache.add(o,t.source_data.layers,1)}return t.rasters=this._getRastersForMarkers(t.source_data.layers.markers.features),Promise.resolve(t)}},{key:"_processMarkers",value:function(t,e){var r=e.features.length;if(r){for(var n=$n.unitsPerMeter(t.coords.z),i=$n.wrapTile(t.coords,{x:!0}),o=$n.metersForTile(i),a=$n.isLastTile(i),s=$n.wrapMeters(t.min),l=$n.wrapMeters(t.max),u=function(e){Mi.coordsToMeters(e);var r=Ln(e,2),i=r[0],u=r[1],c=i>=s.x&&(a.column||i<l.x)&&u>=l.y&&(a.row||!t.coords.y||u<s.y);return Mi.metersToTileUnits(n,o,e),c},c=[],h=0;h<r;h++){var f,p=e.features[h].geometry,A=!1;"Point"===p.type?u(f=p.coordinates)?p.coordinates=f:A=!0:"MultiPoint"===p.type&&(p.coordinates=p.coordinates.filter(u),0===p.coordinates.length&&(A=!0)),A||c.push(e.features[h])}e.features=c}return e}},{key:"_processOverlays",value:function(t,e){var r=this;if(!e.features.length)return e;var n={coords:t.coords,min:$n.metersForTile($n.wrapTile(t.coords,{x:!0}))},i={coords:t.coords,source_data:{layers:{_default:{type:"FeatureCollection",features:e.features}}}},o=Math.pow(2,t.coords.z+Ql);Ui.projectData(i.source_data),Ui.scaleData(i.source_data,n);var a=e.features.map((function(t){var e=t.geometry.coordinates[0],r=e[0],n=e[5===e.length?2:3],i=Math.floor(r[0]/$n.tile_scale*$n.tile_size),a=Math.floor(r[1]/$n.tile_scale*$n.tile_size),s=Math.floor(n[0]/$n.tile_scale*$n.tile_size),l=Math.floor(n[1]/$n.tile_scale*$n.tile_size)-a,u=s<=i,c=u?o-(i-s):s-i,h=[];return i<=$n.tile_size&&h.push([i,a,c,l]),u&&0<s&&h.push([i-o,a,c,l]),{id:t.id,properties:t.properties,texcoords:h}})).filter((function(e){return r._isVisible(e.properties)&&r.isInMinMaxRange(e.properties,t.style_zoom)})),s=$n.tile_scale;return t.pad_scale=this.pad_scale,t.default_winding="CW",e.features=a.length?[{geometry:{type:"Polygon",coordinates:[[[0,0],[s,0],[s,s],[0,s],[0,0]]]},properties:{overlays_config:a}}]:a,e}},{key:"executeCommands",value:function(t){for(var e,r=t.length<10,n=0;n<t.length;n++){var i=t[n];i.arguments.push(r);var o=this[i.method_name].apply(this,i.arguments);r&&(o&&e?e.mergeRect(o,!0,e):o&&(e=o))}return e?e.forWorkerMessage():void 0}},{key:"_getClampedGeoRectForFeature",value:function(t){var e=t.geometry.boundingBox;return new Wn.H.geo.Rect(Jn.clamp(e[0],-Hl[1],Hl[1]),e[1],Jn.clamp(e[2],-Hl[1],Hl[1]),e[3])}},{key:"addObjects",value:function(t,r){for(var n,i=1<arguments.length&&void 0!==r&&r,o=0;o<t.length;o++){var a,s,l,u=t[o];"Group"===u.type?(u.$children_ids$={},this._groups_by_id[u.id]=u):(e._preprocessGeometry(u.geometry),a=this._getClampedGeoRectForFeature(u),i&&(n?n.mergeRect(a,!0,n):n=a),(l=(s=-1!==u.geometry.type.indexOf("Point")?this._marker_quad_tree:this._quad_tree).insertBoundingBox(a)).$tree=s,l.$feature$=u,this._tree_entries_by_object_id[u.id]=l)}for(var c=0;c<t.length;c++){var h=t[c];h.properties.parent&&(this._groups_by_id[h.properties.parent].$children_ids$[h.id]=h.id),h.properties.ref={effectiveVisibility:this._isVisible(h.properties),zInfo:this._getZInfo([],h)}}return this._layersCache.removeAll(),n}},{key:"removeObjectsByIds",value:function(t,e,r){for(var n,i=2<arguments.length&&void 0!==r&&r,o=0;o<t.length;o++){var a,s=t[o],l=void 0,u=void 0;(l=this._tree_entries_by_object_id[s])?(i&&(a=this._getClampedGeoRectForFeature(l.$feature$),n?n.mergeRect(a,!0,n):n=a),delete this._groups_by_id[l.$feature$.properties.parent].$children_ids$[s],l.$tree.remove(l),delete this._tree_entries_by_object_id[s]):(u=this._groups_by_id[s])&&(u.properties.parent&&delete this._groups_by_id[u.properties.parent].$children_ids$[s],e&&this.removeObjectsByIds(Object.keys(u.$children_ids$),!0),delete this._groups_by_id[s])}return this._layersCache.removeAll(),n}},{key:"updateObjectProperties",value:function(t,e){var r,n=1<arguments.length&&void 0!==e&&e;return"Group"===t.type?(ya(this._groups_by_id[t.id].properties,t.properties),this._groups_by_id[t.id].properties.ref.effectiveVisibility=this._isVisible(t.properties)):(this._tree_entries_by_object_id[t.id]||this.addObjects([t]),ya(this._tree_entries_by_object_id[t.id].$feature$.properties,t.properties),this._tree_entries_by_object_id[t.id].$feature$.properties.ref.effectiveVisibility=this._isVisible(t.properties),n&&(r=this._getClampedGeoRectForFeature(t))),r}},{key:"_getZInfo",value:function(t,e){var r=e.properties.zIdx,n=e.properties.sIdx;return t[0]|=void 0!==r,t.splice(1,0,r||0,n<0?e.id:n),0===e.properties.parent?t:this._getZInfo(t,this._groups_by_id[e.properties.parent])}},{key:"_isVisible",value:function(t){var e=t.visible,r=!t.parent||this._isVisible(this._groups_by_id[t.parent].properties);return e&&r}},{key:"isInMinMaxRange",value:function(t,e){var r=t.min<=e&&t.max>=e,n=!t.parent||this.isInMinMaxRange(this._groups_by_id[t.parent].properties,e);return r&&n}},{key:"dispose",value:function(){this._commands=[],Nn(xn(e.prototype),"dispose",this).call(this)}}],[{key:"_compareZInfo",value:function(t,e){for(var r,n=t.properties.ref.zInfo,i=e.properties.ref.zInfo,o=n.length,a=i.length,s=Math.min(o,a),l=1;l<s;l++)if(r=n[l]-i[l])return r;return o-a}},{key:"_preprocessGeometry",value:function(t){var r=t.type;t.coordinates="Point"===r?e._processPointCoordinates(t.coordinates):"MultiPoint"===r?t.coordinates.map(e._processPointCoordinates):"LineString"===r?e._processLineStringCoordinates(t.coordinates):"MultiLineString"===r?t.coordinates.map(e._processLineStringCoordinates):"Polygon"===r?t.coordinates.map(e._processPolygonCoordinates):"MultiPolygon"===r?t.coordinates.map(e._processMultiPolygonCoordinates):[]}},{key:"_processPointCoordinates",value:function(t){return[t[1],t[0],t[2]]}},{key:"_processLineStringCoordinates",value:function(t){return e._latLngAltArrayToLineString(t,!1)}},{key:"_processPolygonCoordinates",value:function(t){return e._latLngAltArrayToLineString(t,!0)}},{key:"_processMultiPolygonCoordinates",value:function(t){return t.map(e._processPolygonCoordinates)}},{key:"_latLngAltArrayToLineString",value:function(t,e){for(var r=[],n=t.length,i=0;i<n;i+=3)r.push([t[i+1],t[i]]);return e&&r.push([t[1],t[0]]),r}}]),e}();Ui.register(zl,"ObjectSource");var Vl=function(){function t(){vn(this,t),this._map={}}return bn(t,[{key:"set",value:function(t,e,r){var n;this._map[t]?this._map[t].accumulator.add(r):((n=new Set).add(r),this._map[t]={value:e,accumulator:n})}},{key:"get",value:function(t){return this._map[t]&&this._map[t].value}},{key:"delete",value:function(t,e){var r=this._map[t];r&&r.accumulator&&(r.accumulator.delete(e),0===r.accumulator.size&&delete this._map[t])}}]),t}(),Gl=function(){wn(e,Ui);var t=Tn(e);function e(r,n){var i;return vn(this,e),i=t.call(this,r,n),li.is_worker||(i._icons=new Vl),i}return bn(e,[{key:"onProviderUpdate",value:function(t){t.target instanceof H.map.provider.Tile?this.dispatchUpdate(t.target,t.data):this.dispatchUpdate(void 0,t.data)}},{key:"onReady",value:function(){var t=this.provider;t.setTileCanvasRendering&&t.setTileCanvasRendering(!1),t.providesMarkers()&&(this._onCacheDrop=this._onCacheDrop.bind(this),t.getCache().registerOnDrop(this._onCacheDrop)),this.dispatchUpdate()}},{key:"dispose",value:function(){Nn(xn(e.prototype),"dispose",this).call(this);var t=this.provider;t.providesMarkers()&&t.getCache().deRegisterOnDrop(this._onCacheDrop)}},{key:"_onCacheDrop",value:function(t,e){this.provider.cacheFilter(t)&&this._deleteIcons(t,e.data)}},{key:"_deleteIcons",value:function(t,e){for(var r=0,n=e.length;r<n;r++){var i=e[r].getIcon();this._icons.delete(i.uid,t)}}},{key:"getIconBitmapByObjectId",value:function(t,e){var r=this._icons.get(e);return r&&r.getBitmap()}},{key:"requestMarkerTile",value:function(t){var e=this;return new Promise((function(r,n){e.provider?e.provider.requestTileAsPromise(t.x,t.y,t.z,!1).then((function(t){var n,i,o=[];if(t.data)for(i=(n=t.data).length;i--;){var a=n[i],s=a.getIcon();e._icons.set(s.uid,s,t.key),o.push(a.forWorkerMessage())}r(o)})):r([])}))}},{key:"requestSpatialTile",value:function(t){var e=this;return new Promise((function(r,n){e.provider?e.provider.requestTileAsPromise(t.x,t.y,t.z,!1).then((function(t){var e,n=[];if(t.getObjects){e=t.getObjects();for(var i=0;i<e.length;i++){var o=e[i];n.push({id:o.getId(),geometries:o.getGeometriesForTile(t),isClosed:o.isClosed(),style:o.getStyle().forWorkerMessage()})}}r(n)})):r([])}))}},{key:"_pointToArray",value:function(t){var e=$n.tile_scale/this.tile_size;return[t.x*e,t.y*e]}},{key:"_getGeoJsonMultiPolygon",value:function(t){for(var e=t.geometries,r=e.length,n=[],i={coordinates:n,type:"MultiPolygon"},o=0;o<r;o++){var a=e[o],s=a.paths,l=s.length,u=a.interiorsIndex,c=a.outlinesIndex,h=Math.min(u,c,l),f=void 0,p=void 0;for(p=0;p<h;p++)f=[s[p].map(this._pointToArray,this)],n.push(f);if(1===h)for(h=Math.min(c,l),p=u;p<h;p++)f.push(s[p].map(this._pointToArray,this))}return i}},{key:"_getGeoJsonMultiLineString",value:function(t,e){for(var r=1<arguments.length&&void 0!==e&&e,n={coordinates:[],type:"MultiLineString"},i=t.geometries,o=0;o<i.length;o++)for(var a=i[o],s=r?a.outlinesIndex:0,l=r?a.paths.length:Math.min(a.interiorsIndex,a.outlinesIndex,a.paths.length),u=s;u<l;u++){var c=a.paths[u].map(this._pointToArray,this);n.coordinates.push(c)}return n}},{key:"_getGeoJsonGeometry",value:function(t,e){var r=1===e?this._getGeoJsonMultiPolygon(t):this._getGeoJsonMultiLineString(t,3===e);return r.coordinates.length?r:null}},{key:"_load",value:function(t){var e=this;return new Promise((function(r,n){var i=ui.postMessage(e.target_name+".requestMarkerTile",t.coords).then(e._prepareTileData.bind(e,t)),o=new Promise((function(r,n){ui.postMessage(e.target_name+".requestSpatialTile",t.coords).then((function(n){for(var i=[],o=[],a=[],s=0;s<n.length;s++){var l,u=n[s],c=void 0,h=u.isClosed?(c=o,1):(c=i,2),f=e._getGeoJsonGeometry(u,h);f&&(l={id:u.id,type:"Feature",properties:{height:0,style:u.style},geometry:f},2===h&&(l.properties.effectiveZIdx=i.length),c.push(l));var p=e._getGeoJsonGeometry(u,3);p&&a.push({id:u.id,type:"Feature",properties:{height:0,style:u.style,effectiveZIdx:a.length},geometry:p})}t.source_data.layers.polylines={type:"FeatureCollection",features:i},t.source_data.layers.polygons={type:"FeatureCollection",features:o},t.source_data.layers.outlines={type:"FeatureCollection",features:a},r(t)}))}));Promise.all([i,o]).then((function(n){e._postProcessTile(t),r(t)}))}))}},{key:"_prepareTileData",value:function(t,e){var r=$n.wrapTile(t.coords,{x:!0,y:!0}),n=$n.metersForTile(r);t.source_data.layers={markers:{features:e,type:"FeatureCollection"}};var i={coords:r,min:n},o=t.source_data,a=Rl("binary-tree"),s={};for(var l in o.layers)for(var u=o.layers[l].features.length,c=0;c<u;c++){var h=o.layers[l].features[c],f=h.properties.icon;s[f.id]||(a.addItem({width:f.size.w,height:f.size.h,meta:{objectId:h.id,id:f.id}}),s[f.id]=!0),$n.transformGeometry(h.geometry,(function(t){var e=t[0];t[0]=t[1],t[1]=e}))}return t.rasters=a.export(),Ui.projectData(t.source_data),Ui.scaleData(t.source_data,i),t}}]),e}();Ui.register(Gl,"ObjectTileSource");var ql=function(){wn(e,Ea);var t=Tn(e);function e(r,n){var i;return vn(this,e),(i=t.call(this,r,n)).uid_=r.uid,i}return bn(e,[{key:"initialize",value:function(t,e){this.provider=t,this._on_update=e,this._onProviderUpdate=this._onProviderUpdate.bind(this),t.addEventListener("update",this._onProviderUpdate)}},{key:"_onProviderUpdate",value:function(){this._on_update(this.name)}},{key:"tileTexture",value:function(t){return Object.assign(Nn(xn(e.prototype),"tileTexture",this).call(this,t),{uid:this.uid_,url:this.uid_+"_"+t.coords.key,coords:t.coords})}},{key:"dispose",value:function(){this.provider.removeEventListener("update",this._onProviderUpdate)}}]),e}();function Kl(t,e){var r=(e=this.options=function(t,e){for(var r in e)t[r]=e[r];return t}(Object.create(this.options),e)).debug;if(r&&console.time("preprocess data"),e.maxZoom<0||24<e.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=Ta(t,e);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(n=za(n,e)).length&&this.splitTile(n,0,0,0),r&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Yl(t,e,r){return 32*((1<<t)*r+e)+t}Mi.register(ql,"RemoteRasterTileSource"),Kl.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Kl.prototype.splitTile=function(t,e,r,n,i,o,a){for(var s=[t,e,r,n],l=this.options,u=l.debug;s.length;){n=s.pop(),r=s.pop(),e=s.pop(),t=s.pop();var c,h,f,p,A,d,g,y,v,m,b,_=1<<e,w=Yl(e,r,n),x=this.tiles[w];if(x||(1<u&&console.time("creation"),x=this.tiles[w]=Ya(t,e,r,n,l),this.tileCoords.push({z:e,x:r,y:n}),u&&(1<u&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,r,n,x.numFeatures,x.numPoints,x.numSimplified),console.timeEnd("creation")),c="z"+e,this.stats[c]=(this.stats[c]||0)+1,this.total++)),x.source=t,i){if(e===l.maxZoom||e===i)continue;var E=1<<i-e;if(r!==Math.floor(o/E)||n!==Math.floor(a/E))continue}else if(e===l.indexMaxZoom||x.numPoints<=l.indexMaxPoints)continue;x.source=null,0!==t.length&&(1<u&&console.time("clipping"),f=.5-(h=.5*l.buffer/l.extent),A=1+h,v=d=g=y=null,m=Fa(t,_,r-h,r+(p=.5+h),0,x.minX,x.maxX,l),b=Fa(t,_,r+f,r+A,0,x.minX,x.maxX,l),t=null,m&&(v=Fa(m,_,n-h,n+p,1,x.minY,x.maxY,l),d=Fa(m,_,n+f,n+A,1,x.minY,x.maxY,l),m=null),b&&(g=Fa(b,_,n-h,n+p,1,x.minY,x.maxY,l),y=Fa(b,_,n+f,n+A,1,x.minY,x.maxY,l),b=null),1<u&&console.timeEnd("clipping"),s.push(v||[],e+1,2*r,2*n),s.push(d||[],e+1,2*r,2*n+1),s.push(g||[],e+1,2*r+1,2*n),s.push(y||[],e+1,2*r+1,2*n+1))}},Kl.prototype.getTile=function(t,e,r){var n=this.options,i=n.extent,o=n.debug;if(t<0||24<t)return null;var a=1<<t,s=Yl(t,e=(e%a+a)%a,r);if(this.tiles[s])return qa(this.tiles[s],i);1<o&&console.log("drilling down to z%d-%d-%d",t,e,r);for(var l,u=t,c=e,h=r;!l&&0<u;)u--,c=Math.floor(c/2),h=Math.floor(h/2),l=this.tiles[Yl(u,c,h)];return l&&l.source?(1<o&&console.log("found parent tile z%d-%d-%d",u,c,h),1<o&&console.time("drilling down"),this.splitTile(l.source,u,c,h,t,e,r),1<o&&console.timeEnd("drilling down"),this.tiles[s]?qa(this.tiles[s],i):null):null};var Wl={type:"FeatureCollection",features:[]},Xl=function(){wn(e,Ui);var t=Tn(e);function e(r,n){return vn(this,e),r.tiled=!0,r.url="",t.call(this,r,n)}return bn(e,[{key:"fetchTile",value:function(t,e,r){return this.provider?this.provider.requestTileAsPromise(t,e,r).then((function(t){return t.data})):Promise.resolve(Wl)}},{key:"_load",value:function(t){var e=this,r=$n.wrapTile(t.coords,{x:!0,y:!0}),n={indexMaxZoom:0,maxZoom:this.max_zoom,tolerance:1.5,extent:$n.tile_scale};return ui.postMessage(this.target_name+".fetchTile",r.x,r.y,r.z).then((function(i){for(var o in t.source_data.layers="FeatureCollection"===i.type?{_default:i}:i,t.source_data.layers){var a=new Kl(t.source_data.layers[o],n).getTile(r.z,r.x,r.y);t.source_data.layers[o]=lo(a)}return e._postProcessTile(t),t}))}},{key:"onReady",value:function(){this.dispatchUpdate()}}]),e}();Mi.register(Xl,"GeoJSONTileSource");var Jl,Zl={layers:{_default:{type:"FeatureCollection",features:[{type:"Point",geometry:{}}]}}},$l=function(){wn(e,Mi);var t=Tn(e);function e(r,n){return vn(this,e),r.max_zoom=0,t.call(this,r,n)}return bn(e,[{key:"load",value:function(t){return t.source_data="0/0/0"===t.coords.key?Zl:void 0,Promise.resolve(t)}}]),e}();Mi.register($l,"SkyBox");var tu,eu=Jl={draw_label_collision_boxes:!1,draw_label_texture_boxes:!1,suppress_label_fade_in:!1,suppress_snap_animation:!1,show_hidden_labels:!1,layer_stats:!1};function ru(t,e){var r={};return e.forEach((function(e){return r[e]=t[e]})),r}var nu,iu=tu={},ou=0;tu.getContext=function(t,e){var r=!1;null==t&&((t=document.createElement("canvas")).style.position="absolute",t.style.top=0,t.style.left=0,t.style.zIndex=-1,document.body.appendChild(t),r=!0);var n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!n)throw new Error("Couldn't create WebGL context.");return n._tangram_id=ou++,r?(tu.resize(n,window.innerWidth,window.innerHeight,e.device_pixel_ratio),window.addEventListener("resize",(function(){tu.resize(n,window.innerWidth,window.innerHeight,e.device_pixel_ratio)}))):tu.resize(n,parseFloat(t.style.width),parseFloat(t.style.height),e.device_pixel_ratio),n},tu.resize=function(t,e,r,n){t.canvas.style.width=e+"px",t.canvas.style.height=r+"px",t.canvas.width=Math.round(e*n),t.canvas.height=Math.round(r*n),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,t.canvas.width,t.canvas.height)};var au=nu={};nu.BYTE=5120,nu.UNSIGNED_BYTE=5121,nu.SHORT=5122,nu.UNSIGNED_SHORT=5123,nu.INT=5124,nu.UNSIGNED_INT=5125,nu.FLOAT=5126;var su,lu=Math.pow(2,16)-1,uu=!1,cu=function(){function t(e){vn(this,t),this.size_=e||1024,this.position_=0,this.ArrayType_=Uint16Array,this.buffer_=new this.ArrayType_(this.size_),this.overflows_=!1}return bn(t,[{key:"push",value:function(t){if(!this.overflows_||uu){if(lu<t){if(this.overflows_=!0,!uu)return;this.ArrayType_===Uint16Array&&(this.ArrayType_=Uint32Array,this.buffer_=new this.ArrayType_(this.buffer_))}this.position_===this.size_&&this.expand_(),this.buffer_[this.position_]=t,this.position_+=1}}},{key:"end",value:function(){if(0===this.position_)return!1;var t=this.buffer_,e=this.position_;return this.buffer_=new this.ArrayType_(this.size_),this.position_=0,this.overflows_=!1,t.subarray(0,e)}},{key:"expand_",value:function(){this.size_=this.size_<<1;var t=new this.ArrayType_(this.size_);t.set(this.buffer_),this.buffer_=t}}]),t}();cu.setElementIndexUint=function(t){uu=t};var hu=(_n(su={},au.FLOAT,Float32Array),_n(su,au.BYTE,Int8Array),_n(su,au.UNSIGNED_BYTE,Uint8Array),_n(su,au.INT,Int32Array),_n(su,au.UNSIGNED_INT,Uint32Array),_n(su,au.SHORT,Int16Array),_n(su,au.UNSIGNED_SHORT,Uint16Array),su),fu=function(){function t(e){var r=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).prealloc,n=void 0===r?500:r;vn(this,t),this.vertex_layout=e,this.vertex_elements=new cu,this.stride=this.vertex_layout.stride,0<t.array_pool.length?(this.vertex_buffer=t.array_pool.pop(),this.byte_length=this.vertex_buffer.byteLength,this.size=Math.floor(this.byte_length/this.stride),xi("trace","VertexData: reused buffer of bytes ".concat(this.byte_length,", ").concat(this.size," vertices"))):(this.size=n,this.byte_length=this.stride*this.size,this.vertex_buffer=new Uint8Array(this.byte_length)),this.offset=0,this.vertex_count=0,this.realloc_count=0,this.setBufferViews(),this.setAddVertexFunction()}return bn(t,[{key:"setBufferViews",value:function(){var t=this;this.views={},this.views[au.UNSIGNED_BYTE]=this.vertex_buffer,this.vertex_layout.dynamic_attribs.forEach((function(e){var r;null==t.views[e.type]&&(r=hu[e.type],t.views[e.type]=new r(t.vertex_buffer.buffer))}))}},{key:"checkBufferSize",value:function(){var e;this.offset+this.stride>this.byte_length&&(this.size=Math.floor(1.5*this.size),this.size-=this.size%4,this.byte_length=this.stride*this.size,(e=new Uint8Array(this.byte_length)).set(this.vertex_buffer),t.array_pool.push(this.vertex_buffer),this.vertex_buffer=e,this.setBufferViews(),this.realloc_count++)}},{key:"setAddVertexFunction",value:function(){this.vertexLayoutAddVertex=this.vertex_layout.getAddVertexFunction()}},{key:"addVertex",value:function(t){this.checkBufferSize(),this.vertexLayoutAddVertex(t,this.views,this.offset),this.offset+=this.stride,this.vertex_count++}},{key:"end",value:function(){return this.vertex_buffer=this.vertex_buffer.subarray(0,this.offset),this.element_buffer=this.vertex_elements.end(),xi("trace","VertexData: ".concat(this.size," vertices total, realloc count ").concat(this.realloc_count)),this}}]),t}();fu.array_pool=[];var pu=function(){function t(e){vn(this,t),this.attribs=e,this.dynamic_attribs=this.attribs.filter((function(t){return!t.static})),this.components=[],this.index={},this.offset={};for(var r=this.stride=0,n=0,i=0;i<this.attribs.length;i++){var o=this.attribs[i];if(null==o.static){o.offset=this.stride,o.byte_size=o.size;var a=0;switch(o.type){case au.FLOAT:case au.INT:case au.UNSIGNED_INT:o.byte_size*=4,a=2;break;case au.SHORT:case au.UNSIGNED_SHORT:o.byte_size*=2,a=1}3&o.byte_size&&(o.byte_size+=4-(3&o.byte_size)),this.stride+=o.byte_size;for(var s=o.offset>>a,l=0;l<o.size;l++)this.components.push({type:o.type,shift:a,offset:s++,index:n++});this.index[o.name]=r,r+=o.size,this.offset[o.name]=o.offset}else o.static=Array.isArray(o.static)?o.static:[o.static],o.method="vertexAttrib".concat(o.static.length,"fv")}}return bn(t,[{key:"enable",value:function(e,r,n){for(var i,o,a=0;a<this.attribs.length;a++)i=this.attribs[a],-1!==(o=r.attribute(i.name).location)&&(null==i.static?(t.enabled_attribs[o]&&!n||e.enableVertexAttribArray(o),e.vertexAttribPointer(o,i.size,i.type,i.normalized,this.stride,i.offset),t.enabled_attribs[o]=r):e[i.method]instanceof Function&&(e.enableVertexAttribArray(o),e[i.method](o,i.static),e.disableVertexAttribArray(o),delete t.enabled_attribs[o]));for(o in t.enabled_attribs)this.disableUnusedAttribute(e,o,r)}},{key:"disableUnusedAttribute",value:function(e,r,n){t.enabled_attribs[r]!==n&&(e.disableVertexAttribArray(r),delete t.enabled_attribs[r])}},{key:"createVertexData",value:function(){return new fu(this)}},{key:"getAddVertexFunction",value:function(){return null==this.addVertex&&this.createAddVertexFunction(),this.addVertex}},{key:"createAddVertexFunction",value:function(){var e=ea(JSON.stringify(this.attribs));if(null==t.add_vertex_funcs[e]){var r,n=["var t, o;"],i=In(this.components);i.sort((function(t,e){return t.type!==e.type?t.type-e.type:t.index-e.index}));for(var o=0;o<i.length;o++){var a=i[o];r!==a.type&&(n.push("t = vs[".concat(a.type,"];")),n.push("o = off".concat(a.shift?" >> "+a.shift:"",";")),r=a.type),n.push("t[o + ".concat(a.offset,"] = v[").concat(a.index,"];"))}n=n.join("\n");var s=new Function("v","vs","off",n);t.add_vertex_funcs[e]=s}this.addVertex=t.add_vertex_funcs[e]}}]),t}();pu.enabled_attribs={},pu.add_vertex_funcs={};var Au=[{x:0,y:0},{x:$n.tile_scale,y:-$n.tile_scale}],du=[0,0,1,1];function gu(t,e,r){var n=Au[0],i=Au[1];return t[0]<=n.x+r&&e[0]<=n.x+r||t[0]>=i.x-r&&e[0]>=i.x-r||t[1]>=n.y-r&&e[1]>=n.y-r||t[1]<=i.y+r&&e[1]<=i.y+r}function yu(t,e){e=e||0;var r=Au[0],n=Au[1];return t[0]<=r.x+e||t[0]>=n.x-e||t[1]>=r.y-e||t[1]<=n.y+e}var vu=mu;function mu(t,e,r){r=r||2;var n,i,o,a,s,l,u,c=e&&e.length,h=c?e[0]*r:t.length,f=bu(t,0,h,r,!0),p=[];if(!f)return p;if(c&&(f=function(t,e,r,n){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=bu(t,e[i]*n,i<o-1?e[i+1]*n:t.length,n,!1))===a.next&&(a.steiner=!0),s.push(function(t){for(var e=t,r=t;e.x<r.x&&(r=e),(e=e.next)!==t;);return r}(a));for(s.sort(xu),i=0;i<s.length;i++)!function(t,e){var r;(e=function(t,e){var r,n=e,i=t.x,o=t.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&a<s){if((a=s)===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===a)return r.prev;var l,u=r,c=r.x,h=r.y,f=1/0;for(n=r.next;n!==u;)i>=n.x&&n.x>=c&&Bu(o<h?i:a,o,c,h,o<h?a:i,o,n.x,n.y)&&((l=Math.abs(o-n.y)/(i-n.x))<f||l===f&&n.x>r.x)&&Tu(n,t)&&(r=n,f=l),n=n.next;return r}(t,e))&&_u(r=Nu(e,t),r.next)}(s[i],r),r=_u(r,r.next);return r}(t,e,f,r)),t.length>80*r){n=o=t[0],i=a=t[1];for(var A=r;A<h;A+=r)(s=t[A])<n&&(n=s),(l=t[A+1])<i&&(i=l),o<s&&(o=s),a<l&&(a=l);u=Math.max(o-n,a-i)}return wu(f,p,r,n,i,u),p}function bu(t,e,r,n,i){var o,a;if(i===0<Ou(t,e,r,n))for(o=e;o<r;o+=n)a=Lu(o,t[o],t[o+1],a);else for(o=r-n;e<=o;o-=n)a=Lu(o,t[o],t[o+1],a);return a&&Su(a,a.next)&&(Iu(a),a=a.next),a}function _u(t,e){if(!t)return t;e=e||t;var r,n=t;do{if(r=!1,n.steiner||!Su(n,n.next)&&0!==Cu(n.prev,n,n.next))n=n.next;else{if(Iu(n),(n=e=n.prev)===n.next)return null;r=!0}}while(r||n!==e);return e}function wu(t,e,r,n,i,o,a){if(t){!a&&o&&function(t,e,r,n){for(var i=t;null===i.z&&(i.z=Eu(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,(i=i.next)!==t;);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,o,a,s,l,u=1;do{for(r=t,o=t=null,a=0;r;){for(a++,n=r,e=s=0;e<u&&(s++,n=n.nextZ);e++);for(l=u;0<s||0<l&&n;)0!==s&&(0===l||!n||r.z<=n.z)?(r=(i=r).nextZ,s--):(n=(i=n).nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(1<a)}(i)}(t,n,i,o);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?function(t,e,r,n){var i=t.prev,o=t,a=t.next;if(0<=Cu(i,o,a))return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=Eu(s,l,e,r,n),f=Eu(u,c,e,r,n),p=t.nextZ;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&Bu(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&0<=Cu(p.prev,p,p.next))return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&Bu(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&0<=Cu(p.prev,p,p.next))return!1;p=p.prevZ}return!0}(t,n,i,o):function(t){var e=t.prev,r=t,n=t.next;if(0<=Cu(e,r,n))return!1;for(var i=t.next.next;i!==t.prev;){if(Bu(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&0<=Cu(i.prev,i,i.next))return!1;i=i.next}return!0}(t))e.push(s.i/r),e.push(t.i/r),e.push(l.i/r),Iu(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?wu(t=function(t,e,r){var n=t;do{var i=n.prev,o=n.next.next;!Su(i,o)&&ku(i,n,n.next,o)&&Tu(i,o)&&Tu(o,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(o.i/r),Iu(n),Iu(n.next),n=t=o),n=n.next}while(n!==t);return n}(t,e,r),e,r,n,i,o,2):2===a&&function(t,e,r,n,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&ku(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&Tu(t,e)&&Tu(e,t)&&function(t,e){for(var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;r.y>o!=r.next.y>o&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),(r=r.next)!==t;);return n}(t,e)}(a,s)){var l=Nu(a,s);return a=_u(a,a.next),l=_u(l,l.next),wu(a,e,r,n,i,o),wu(l,e,r,n,i,o)}s=s.next}a=a.next}while(a!==t)}(t,e,r,n,i,o):wu(_u(t),e,r,n,i,o,1);break}}}function xu(t,e){return t.x-e.x}function Eu(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)/i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)/i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Bu(t,e,r,n,i,o,a,s){return 0<=(i-a)*(e-s)-(t-a)*(o-s)&&0<=(t-a)*(n-s)-(r-a)*(e-s)&&0<=(r-a)*(o-s)-(i-a)*(n-s)}function Cu(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Su(t,e){return t.x===e.x&&t.y===e.y}function ku(t,e,r,n){return Su(t,e)&&Su(r,n)||Su(t,n)&&Su(r,e)||0<Cu(t,e,r)!=0<Cu(t,e,n)&&0<Cu(r,n,t)!=0<Cu(r,n,e)}function Tu(t,e){return Cu(t.prev,t,t.next)<0?0<=Cu(t,e,t.next)&&0<=Cu(t,t.prev,e):Cu(t,e,t.prev)<0||Cu(t,t.next,e)<0}function Nu(t,e){var r=new Mu(t.i,t.x,t.y),n=new Mu(e.i,e.x,e.y),i=t.next,o=e.prev;return(t.next=e).prev=t,(r.next=i).prev=r,(n.next=r).prev=n,(o.next=n).prev=o,n}function Lu(t,e,r,n){var i=new Mu(t,e,r);return n?(i.next=n.next,(i.prev=n).next.prev=i,n.next=i):(i.prev=i).next=i,i}function Iu(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Mu(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ou(t,e,r,n){for(var i=0,o=e,a=r-n;o<r;o+=n)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}mu.deviation=function(t,e,r,n){var i=e&&e.length,o=i?e[0]*r:t.length,a=Math.abs(Ou(t,0,o,r));if(i)for(var s=0,l=e.length;s<l;s++){var u=e[s]*r,c=s<l-1?e[s+1]*r:t.length;a-=Math.abs(Ou(t,u,c,r))}var h=0;for(s=0;s<n.length;s+=3){var f=n[s]*r,p=n[s+1]*r,A=n[s+2]*r;h+=Math.abs((t[f]-t[A])*(t[1+p]-t[1+f])-(t[f]-t[p])*(t[1+A]-t[1+f]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},mu.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)r.vertices.push(t[i][o][a]);0<i&&(n+=t[i-1].length,r.holes.push(n))}return r};var Pu=[0,0,1];function Fu(t,e,r,n){var i,o,a,s,l,u=n.texcoord_index,c=n.texcoord_scale,h=n.texcoord_normalize,f=e.vertex_elements;u&&(h=h||1,o=(i=Ln(c||du,4))[0],a=i[1],s=i[2],l=i[3]);for(var p,A=0,d=t.length,g=0;g<d;g++){var y,v,m,b,_,w=e.vertex_count,x=t[g];u&&(v=(y=Ln($n.findBoundingBox(x),4))[0],m=y[1],b=(s-o)/(y[2]-v),_=(l-a)/(y[3]-m));for(var E=0;E<x.length;E++)for(var B=x[E],C=0;C<B.length;C++){var S=B[C];r[0]=S[0],r[1]=S[1],u&&(r[u+0]=((S[0]-v)*b+o)*h,r[u+1]=((S[1]-m)*_+a)*h),e.addVertex(r)}for(var k=(p=vu.flatten(x),vu(p.vertices,p.holes,p.dimensions)),T=0;T<k.length;T++)f.push(w+k[T]);A+=k.length/3}return A}var Uu="uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;attribute vec4 a_position;attribute vec4 a_color;\n#ifdef TANGRAM_NORMAL_ATTRIBUTE\nattribute vec3 a_normal;\n#define TANGRAM_NORMAL a_normal\n#else\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#endif\n#ifdef TANGRAM_EXTRUDE_LINES\nattribute vec2 a_extrude;attribute vec2 a_offset;attribute vec2 a_scaling;uniform float u_v_scale_adjust;\n#endif\nvarying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)\nattribute vec2 a_texcoord;varying vec2 v_texcoord;\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#define UNPACK_SCALING(x) (x / 1024.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\nvoid main(){\n#pragma tangram: setup\n#ifdef TANGRAM_TEXTURE_COORDS\nv_texcoord=a_texcoord;\n#ifdef TANGRAM_EXTRUDE_LINES\nv_texcoord.y*=u_v_scale_adjust;\n#endif\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nv_modelpos_base_zoom=modelPositionBaseZoom();\n#endif\nvec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.);\n#ifdef TANGRAM_EXTRUDE_LINES\nvec2 extrude=a_extrude.xy;vec2 offset=a_offset.xy;float dz=clamp(u_map_position.z-u_tile_origin.z,0.,4.);dz+=step(1.,dz)*(1.-dz)+mix(0.,2.,clamp((dz-2.)/2.,0.,1.));float mdz=(dz-0.5)*2.;extrude-=extrude*UNPACK_SCALING(a_scaling.x)*mdz;float dwdz=UNPACK_SCALING(a_scaling.y);float sdwdz=sign(step(0.,dwdz)-0.5);offset-=offset*abs(dwdz)*((1.-step(0.,sdwdz))-(dz*-sdwdz));float ssz=exp2(-dz-(u_tile_origin.z-u_tile_origin.w));extrude*=ssz;offset*=ssz;\n#ifdef TANGRAM_BLOCK_WIDTH\nfloat width=1.;\n#pragma tangram: width\nextrude*=width;\n#endif\nposition.xy+=extrude+offset;\n#endif\nv_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;\n#pragma tangram: position\nv_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);v_color=a_color;\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvec3 normal=v_normal;\n#pragma tangram: normal\nv_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));\n#endif\ncameraProjection(position);applyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);\n#if defined(SNAP_TO_PIXEL_GRID)\nsnapToPixelGrid(position);\n#endif\ngl_Position=position;}",Ru="uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_EXTRUDE_LINES\nuniform bool u_has_line_texture;uniform sampler2D u_texture;uniform float u_texture_ratio;uniform vec4 u_dash_background_color;\n#endif\n#define TANGRAM_NORMAL v_normal\n#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)\nvarying vec2 v_texcoord;\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n#pragma tangram: utils\nvoid main(void){\n#pragma tangram: setup\nvec4 color=v_color;vec3 normal=TANGRAM_NORMAL;\n#ifdef TANGRAM_CROP_BY_TILE\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}\n#endif\n#ifdef TANGRAM_RASTER_TEXTURE_COLOR\ncolor*=sampleRaster();\n#endif\n#ifdef TANGRAM_EXTRUDE_LINES\nif(u_has_line_texture){vec2 _line_st=vec2(v_texcoord.x,fract(v_texcoord.y/u_texture_ratio));vec4 _line_color=texture2D(u_texture,_line_st);if(_line_color.a<TANGRAM_ALPHA_TEST){\n#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY)\nif(u_dash_background_color.a==0.){discard;}color=u_dash_background_color;\n#else\ncolor=vec4(u_dash_background_color.rgb,color.a*step(TANGRAM_EPSILON,u_dash_background_color.a));\n#endif\n}else{color*=_line_color;}}\n#endif\n#ifdef TANGRAM_RASTER_TEXTURE_NORMAL\nnormal=normalize(sampleRaster().rgb*2.-1.);\n#endif\n#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)\ncalculateNormal(normal);\n#endif\n#if !defined(TANGRAM_LIGHTING_VERTEX)\n#pragma tangram: normal\n#endif\n#pragma tangram: color\n#if defined(TANGRAM_LIGHTING_FRAGMENT)\ncolor=calculateLighting(v_position.xyz-u_eye,normal,color);\n#elif defined(TANGRAM_LIGHTING_VERTEX)\ncolor*=v_lighting;\n#endif\n#pragma tangram: filter\ngl_FragColor=color;}",Du=Object.create(ma);Object.assign(Du,{name:"polygons",built_in:!0,vertex_shader_src:Uu,fragment_shader_src:Ru,selection:!0,init:function(){ma.init.apply(this,arguments),this.defines.TANGRAM_NORMAL_ATTRIBUTE=!0,this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.texcoords&&(this.defines.TANGRAM_TEXTURE_COORDS=!0)},vertexLayoutForMeshVariant:function(){var t;return this.vertex_layout||(t=[{name:"a_position",size:4,type:au.SHORT,normalized:!1},{name:"a_normal",size:3,type:au.BYTE,normalized:!0},{name:"a_color",size:4,type:au.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:au.UNSIGNED_BYTE,normalized:!0}],this.texcoords&&t.push({name:"a_texcoord",size:2,type:au.UNSIGNED_SHORT,normalized:!0}),this.vertex_layout=new pu(t)),this.vertex_layout},_parseFeature:function(t,e,r){var n=this.feature_style;return n.color=this.parseColor(e.color,r),n.color?(n.z=e.z&&vo.evalCachedDistanceProperty(e.z,r)||vo.defaults.z,n.z*=$n.height_scale,n.extrude=vo.evalProperty(e.extrude,r),n.extrude&&(!0===n.extrude?(n.height=void 0!==t.properties.height?t.properties.height:vo.defaults.height,n.min_height=void 0!==t.properties.min_height?t.properties.min_height:vo.defaults.min_height):"number"==typeof n.extrude?(n.height=n.extrude,n.min_height=0):Array.isArray(n.extrude)&&(n.min_height=n.extrude[0],n.height=n.extrude[1]),n.height*=$n.height_scale,n.min_height*=$n.height_scale),n.tile_edges=e.tile_edges,n):null},_preprocess:function(t){return t.color=vo.createColorPropertyCache(t.color),t.z=vo.createPropertyCache(t.z,vo.parseUnits),t},makeVertexTemplate:function(t){var e=0;return this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=t.z||0,this.vertex_template[e++]=this.scaleOrder(t.order),this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=127,this.vertex_template[e++]=255*t.color[0],this.vertex_template[e++]=255*t.color[1],this.vertex_template[e++]=255*t.color[2],this.vertex_template[e++]=255*t.color[3],this.selection&&(this.vertex_template[e++]=255*t.selection_color[0],this.vertex_template[e++]=255*t.selection_color[1],this.vertex_template[e++]=255*t.selection_color[2],this.vertex_template[e++]=255*t.selection_color[3]),this.texcoords&&(this.vertex_template[e++]=0,this.vertex_template[e++]=0),this.vertex_template},buildPolygons:function(t,e,r,n){var i=this.makeVertexTemplate(e),o={texcoord_index:this.vertex_layout.index.a_texcoord,texcoord_normalize:65535,remove_tile_edges:!e.tile_edges,tile_edge_tolerance:$n.tile_scale*n.tile.pad_scale*4,winding:n.winding};return e.extrude&&e.height?function(t,e,r,n,i,o,a,s,l){var u=l.remove_tile_edges,c=l.tile_edge_tolerance,h=l.texcoord_index,f=l.texcoord_scale,p=l.texcoord_normalize,A=l.winding,d=e+(n||0),g=e+r;o[2]=g;var y,v,m,b,_,w,x=Fu(t,i,o,{texcoord_index:h,texcoord_scale:f,texcoord_normalize:p}),E=i.vertex_elements,B=i.vertex_count;h&&(p=p||1,v=(y=Ln(f||du,4))[0],m=y[1],b=y[2],w=[[v,_=y[3]],[v,m],[b,m],[b,_]]);for(var C=t.length,S=0;S<C;S++)for(var k=t[S],T=0;T<k.length;T++)for(var N=k[T],L=0;L<N.length-1;L++)if(!u||!gu(N[L],N[L+1],c)){var I,M=void 0,O=[[N[I="CCW"===A?(M=L)+1:(M=L+1,L)][0],N[I][1],g],[N[I][0],N[I][1],d],[N[M][0],N[M][1],d],[N[M][0],N[M][1],g]],P=ha.normalize([N[I][0]-N[M][0],N[I][1]-N[M][1],0]),F=ha.cross(Pu,P);o[a+0]=127*F[0],o[a+1]=127*F[1],o[a+2]=127*F[2];for(var U=0;U<O.length;U++)o[0]=O[U][0],o[1]=O[U][1],o[2]=O[U][2],h&&(o[h+0]=w[U][0]*p,o[h+1]=w[U][1]*p),i.addVertex(o);E.push(B+0),E.push(B+1),E.push(B+2),E.push(B+2),E.push(B+3),E.push(B+0),B+=4,x+=2}return x}(t,e.z,e.height,e.min_height,r.vertex_data,i,this.vertex_layout.index.a_normal,0,o):Fu(t,r.vertex_data,i,o)}});var ju=[0,0],Hu={butt:0,square:1,round:2},Qu={miter:0,bevel:1,round:2},zu=3,Vu=1,Gu=1,qu=5,Ku=$n.tile_scale,Yu=[0,0],Wu=[1,0],Xu=[.5,0];function Ju(t,e){if(!(t.length<2)){var r,n,i=e.join_type,o=e.cap_type,a=e.closed_polygon,s=e.remove_tile_edges,l=e.tile_edge_tolerance,u=e.v_scale,c=e.miter_len_sq,h=e.crop_by_tile,f=null!=e.texcoord_index,p=0;if(a&&i===Qu.miter){var A=function(t){if(yu(t[0]))return 0;for(var e=0;e<t.length;e++)if(yu(t[t.length-1-e]))return t.length-1-e;return 0}(t);if(0!==A){var d=function(t,e){for(var r=[],n=0;n<t.length;n++){var i=(n+e)%t.length;0!=i&&r.push(t[i])}return r.push(r[0]),r}(t,A);return e.extra_lines=e.extra_lines||[],void e.extra_lines.push(d)}}var g=0,y=t.length-1,v=0;for(x=t[g],E=t[g+1];ha.isEqual(x,E);)if(x=E,E=t[1+ ++g],v++,g===t.length-1)return;for(;ha.isEqual(t[y],t[y-1]);)if(v++,0===--y)return;if(!(t.length<2+v))if(n=ha.normalize(ha.perp(x,E)),s&&gu(x,E,l)){var m=Zu(t,g,l);m&&(e.extra_lines=e.extra_lines||[],e.extra_lines.push(m))}else{a?function(t,e,r,n,i){void 0===n||yu(t)&&!i.crop_by_tile?(nc(t,r,r,1,0,i,1),nc(t,r,r,0,0,i,-1)):n===Qu.miter?tc(0,t,e,r,i.miter_len_sq,!0,i):ec(n,0,t,e,r,!0,i)}(x,r=ha.normalize(ha.perp(t[y-1],x)),n,i,e):(!h&&yu(x)||(ac(x,p,n,o,!0,e),f&&o!==Hu.butt&&(p+=.5*u*e.texcoord_width)),nc(x,n,n,1,p,e,1),nc(x,n,n,0,p,e,-1)),f&&(p+=u*ha.length(ha.sub(E,x)));for(var b=g+1;b<y;b++){var _=b,w=b+1,x=t[_],E=t[w];if(!ha.isEqual(x,E)){if(s&&gu(x,E,l)){nc(x,n,n,1,p,e,1),nc(x,n,n,0,p,e,-1),rc(1,e);var B=Zu(t,_+1,l);return void(B&&(e.extra_lines=e.extra_lines||[],e.extra_lines.push(B)))}r=n,n=ha.normalize(ha.perp(x,E)),i===Qu.miter?tc(p,x,r,n,c,!1,e):ec(i,p,x,r,n,!1,e),f&&(p+=u*ha.length(ha.sub(E,x)))}}x=E,r=n,a?function(t,e,r,n,i,o){var a;yu(t)&&!o.crop_by_tile?(nc(t,e,e,1,i,o,1),nc(t,e,e,0,i,o,-1)):(a=$u(e,r),n===Qu.miter&&ha.lengthSq(a)>o.miter_len_sq&&(n=Qu.bevel),n===Qu.miter?(nc(t,a,e,1,i,o,1),nc(t,a,e,0,i,o,-1)):(nc(t,e,e,1,i,o,1),nc(t,e,e,0,i,o,-1))),rc(1,o)}(x,r,n=ha.normalize(ha.perp(x,t[1])),i,p,e):(nc(x,r,n,1,p,e,1),nc(x,r,n,0,p,e,-1),rc(1,e),!h&&yu(x)||ac(x,p,r,o,!1,e))}}}function Zu(t,e,r){for(var n=e;t[n+1]&&gu(t[n],t[n+1],r);)n++;return 2<=t.length-n&&t.slice(n)}function $u(t,e){var r=ha.normalize(ha.add(t,e)),n=2/(1+Math.abs(ha.dot(t,r)));return ha.mult(r,n*n)}function tc(t,e,r,n,i,o,a){var s=$u(r,n);ha.lengthSq(s)>i?ec(Qu.bevel,t,e,r,n,o,a):(nc(e,s,s,1,t,a,1),nc(e,s,s,0,t,a,-1),o||rc(1,a))}function ec(t,e,r,n,i,o,a){var s=$u(n,i),l=0<i[0]*n[1]-i[1]*n[0];null!=a.texcoord_index&&(Yu[1]=e,Wu[1]=e),l?(nc(r,s,s,1,e,a,1),nc(r,n,s,0,e,a,-1),o||rc(1,a),oc(r,ha.neg(n),s,ha.neg(i),s,Yu,Wu,Yu,!1,t===Qu.bevel,a),nc(r,s,s,1,e,a,1),nc(r,i,s,0,e,a,-1)):(nc(r,n,s,1,e,a,1),nc(r,s,s,0,e,a,-1),o||rc(1,a),oc(r,n,ha.neg(s),i,s,Wu,Yu,Wu,!1,t===Qu.bevel,a),nc(r,i,s,1,e,a,1),nc(r,s,s,0,e,a,-1))}function rc(t,e){for(var r=e.vertex_data.vertex_elements,n=e.vertex_data.vertex_count-2*t-2,i=0;i<t;i++)r.push(n+2*i+2),r.push(n+2*i+1),r.push(n+2*i),r.push(n+2*i+2),r.push(n+2*i+3),r.push(n+2*i+1),e.geom_count+=2}function nc(t,e,r,n,i,o,a){var s=o.vertex_template,l=o.vertex_data;s[0]=t[0],s[1]=t[1];var u=o.half_width*a;s[o.extrude_index+0]=e[0]*u,s[o.extrude_index+1]=e[1]*u,o.offset&&(s[o.offset_index+0]=r[0]*o.offset,s[o.offset_index+1]=r[1]*o.offset),null!=o.texcoord_index&&(s[o.texcoord_index+0]=n*o.texcoord_normalize,s[o.texcoord_index+1]=i*o.texcoord_normalize),l.addVertex(s)}var ic=[0,0];function oc(t,e,r,n,i,o,a,s,l,u,c){for(var h=e[0]*n[1]-e[1]*n[0],f=ha.dot(e,n),p=Math.atan2(h,f);p>=Math.PI;)p-=2*Math.PI;if(u)A=1;else{var A=function(t,e){t<0&&(t=-t);var r=e>2*qu?Math.log2(e/qu):1;return Math.ceil(t/Math.PI*r)}(p,c.half_width);if(A<1)return}var d=c.vertex_data.vertex_count,g=c.vertex_data.vertex_elements;nc(t,r,i,a[0],a[1],c,1),nc(t,e,i,o[0],o[1],c,1);var y,v,m=e,b=null!=c.texcoord_index;b&&(l?y=ha.sub(o,a):(ic=ha.copy(o),v=ha.div(ha.sub(s,o),A)));for(var _,w=p/A,x=p<0?-1:1,E=0<h?(_=2,1):(_=1,2),B=0;B<A;B++)0===B&&p<0&&(m=ha.neg(m)),m=ha.rot(m,w),b&&(l?(y=ha.rot(y,w),ic[0]=y[0]+a[0],ic[1]=y[1]*c.texcoord_width*c.v_scale+a[1]):ic=ha.add(ic,v)),nc(t,m,i,ic[0],ic[1],c,x),g.push(d+B+_),g.push(d),g.push(d+B+E)}function ac(t,e,r,n,i,o){var a,s=ha.neg(r),l=null!=o.texcoord_index;switch(n){case Hu.square:i?(a=[r[1],-r[0]],nc(t,ha.add(r,a),r,1,e,o,1),nc(t,ha.add(s,a),r,0,e,o,1),l&&(e+=.5*o.texcoord_width*o.v_scale),nc(t,r,r,1,e,o,1),nc(t,s,r,0,e,o,1)):(a=[-r[1],r[0]],nc(t,r,r,1,e,o,1),nc(t,s,r,0,e,o,1),l&&(e+=.5*o.texcoord_width*o.v_scale),nc(t,ha.add(r,a),r,1,e,o,1),nc(t,ha.add(s,a),r,0,e,o,1)),rc(1,o);break;case Hu.round:var u,c,h=Yu,f=Wu,p=Xu;i?(u=r,c=s,l&&(e+=.5*o.texcoord_width*o.v_scale,h=Wu,f=Yu,p=Xu)):(u=s,c=r),l&&(Yu[1]=e,Wu[1]=e,Xu[1]=e),oc(t,u,ju,c,r,h,p,f,!0,!1,o);break;case Hu.butt:return}}var sc=[255,255,255,255],lc=[0,0,0,0],uc=Object.create(ma);function cc(t,e,r,n,i,o){for(var a={closed:o,vertex_data:r,vertex_template:n,half_width:e/2,vertex_layout_index:i,geom_count:0},s=0,l=t.length;s<l;s++)!function(t,e){if(!(t.length<2)){for(var r=[t[0]],n=0,i=[],o=[],a=1,s=t.length;a<s;a++){var l,u;t[a][0]===t[a-1][0]&&t[a][1]===t[a-1][1]||(r.push(t[a]),l=ha.sub(t[a],t[a-1]),u=ha.length(l),i.push(l),o.push([n,n+u]),n+=u)}if(!(r.length<2)){var c=0,h=i[i.length-1],f=i[0],p=i[1],A=[0,0];2<r.length&&(e.closed&&(A[0]=ha.signedAngleBetween(h,f)),A[1]=ha.signedAngleBetween(f,p));var d=r[0],g=o[0];e.closed?(pc(d,e,c++,g,n,A,[h,f]),pc(d,e,c++,g,n,A,[h,f])):(pc(d,e,c++,g,n,A,[f,f]),pc(d,e,c++,g,n,A,[f,f]));for(var y=1,v=r.length-1;y<v;y++)d=r[y],h=i[y-1],f=i[y],p=i[y+1],pc(d,e,c++,g=o[y-1],n,A,[h,f]),pc(d,e,c++,g,n,A,[h,f]),hc(e),g=o[y],A[0]=A[1],A[1]=y!==v-1?ha.signedAngleBetween(f,p):e.closed?ha.signedAngleBetween(f,i[0]):0,pc(d,e,c++,g,n,A,[h,f]),pc(d,e,c++,g,n,A,[h,f]);d=r[r.length-1],g=o[o.length-1],f=i[i.length-1],e.closed?(pc(d,e,c++,g,n,A,[f,i[0]]),pc(d,e,c++,g,n,A,[f,i[0]])):(pc(d,e,c++,g,n,A,[f,f]),pc(d,e,c++,g,n,A,[f,f])),hc(e)}}}(t[s],a);return a.geom_count}function hc(t){var e=t.vertex_data.vertex_elements,r=t.vertex_data.vertex_count-4;e.push(2+r),e.push(1+r),e.push(r),e.push(2+r),e.push(3+r),e.push(1+r),t.geom_count+=2}uc.vertex_layouts=[[],[]],uc.dash_textures={},Object.assign(uc,{name:"lines",built_in:!0,vertex_shader_src:Uu,fragment_shader_src:Ru,selection:!0,init:function(){ma.init.apply(this,arguments),this.styles=this.styles||{},this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_EXTRUDE_LINES=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_TEXTURE_COORDS=!0,this.outline_feature_style={},this.inline_feature_style=this.feature_style},calcDistance:function(t,e){return t&&vo.evalCachedDistanceProperty(t,e)||0},calcDistanceNextZoom:function(t,e){e.zoom++;var r=this.calcDistance(t,e);return e.zoom--,r},calcWidth:function(t,e,r){var n=this.calcDistance(t.width,r);if(!(n<0)){var i,o=t.next_width?this.calcDistanceNextZoom(t.next_width,r):n/2;return!(0===n&&0===o||o<0)&&(e.width_unscaled=n,e.next_width_unscaled=o,t.next_width?(i=.5*(n+(o*=2)),e.width=i*r.units_per_meter_overzoom,e.width_scale=1-o/i):(e.width=n*r.units_per_meter_overzoom,e.width_scale=0),t.texcoords&&(t.inline_texcoord_width?e.texcoord_width=t.inline_texcoord_width:e.texcoord_width=(e.width_unscaled||e.next_width_unscaled)*r.units_per_meter_overzoom/r.tile.overzoom2),!0)}},calcOffset:function(t,e,r){var n,i;t.offset_precalc?(e.offset=t.offset_precalc,e.offset_scale=t.offset_scale_precalc):t.offset?(n=this.calcDistance(t.offset,r),t.next_offset?(i=2*this.calcDistanceNextZoom(t.next_offset,r),Math.abs(n)>=Math.abs(i)?(e.offset=n*r.units_per_meter_overzoom,e.offset_scale=0!==n?1-i/n:0):(e.offset=i*r.units_per_meter_overzoom,e.offset_scale=0!=i?-1*(1-n/i):0)):(e.offset=n*r.units_per_meter_overzoom,e.offset_scale=0)):(e.offset=0,e.offset_scale=0),vo.evalProperty(t.offset_reverse,r)&&(e.offset*=-1)},_parseFeature:function(t,e,r){var n,i,o=this.feature_style;if(!1!==this.calcWidth(e,o,r)&&(this.calcOffset(e,o,r),o.color=this.parseColor(e.color,r),o.color))return o.variantKey=e.variantKey,o.z=e.z&&vo.evalCachedDistanceProperty(e.z||0,r)||vo.defaults.z,o.height=t.properties.height||vo.defaults.height,o.extrude=vo.evalProperty(e.extrude,r),o.extrude&&("number"==typeof o.extrude?o.height=o.extrude:Array.isArray(o.extrude)&&(o.height=o.extrude[1])),o.extrude&&o.height&&(o.z+=o.height),o.z*=$n.height_scale,o.height*=$n.height_scale,o.cap=vo.evalProperty(e.cap,r),o.join=vo.evalProperty(e.join,r),o.miter_limit=vo.evalProperty(e.miter_limit,r),o.tile_edges=e.tile_edges,o.outline=o.outline||{width:{},next_width:{},preprocessed:!0},e.outline&&!1!==e.outline.visible&&e.outline.color&&e.outline.width?(n=2*this.calcDistance(e.outline.width,r),i=2*this.calcDistanceNextZoom(e.outline.next_width,r),0==n&&0==i||n<0||i<0?(o.outline.width.value=null,o.outline.next_width.value=null,o.outline.color=null,o.outline.inline_texcoord_width=null,o.outline.texcoords=!1):(o.outline.width.value=n+o.width_unscaled,o.outline.next_width.value=i+o.next_width_unscaled,o.outline.inline_texcoord_width=o.texcoord_width,o.outline.offset_precalc=o.offset,o.outline.offset_scale_precalc=o.offset_scale,o.outline.color=e.outline.color,o.outline.cap=e.outline.cap,o.outline.join=e.outline.join,o.outline.miter_limit=e.outline.miter_limit,o.outline.texcoords=e.outline.texcoords,o.outline.style=e.outline.style,o.outline.variantKey=e.outline.variantKey,e.outline.order?o.outline.order=this.parseOrder(e.outline.order,r):o.outline.order=o.order,o.outline.order>o.order&&(o.outline.order=o.order),o.outline.order-=.5,o.outline.variant_order=0)):(o.outline.width.value=null,o.outline.next_width.value=null,o.outline.color=null,o.outline.inline_texcoord_width=null),o},_preprocess:function(t,e){var r,n=this.sources[e]?this.sources[e].config.uid:"";return t.color=vo.createColorPropertyCache(t.color),t.width=vo.createPropertyCache(t.width,vo.parseUnits),t.width&&t.width.type!==vo.CACHE_TYPE.STATIC&&(t.next_width=vo.createPropertyCache(t.width,vo.parseUnits)),t.offset=t.offset&&vo.createPropertyCache(t.offset,vo.parseUnits),t.offset&&t.offset.type!==vo.CACHE_TYPE.STATIC&&(t.next_offset=vo.createPropertyCache(t.offset,vo.parseUnits)),t.z=vo.createPropertyCache(t.z,vo.parseUnits),t.dash=void 0!==t.dash?t.dash:this.dash,t.dash_key=t.dash&&this.dashTextureKey(t.dash,n),t.dash_background_color=void 0!==t.dash_background_color?t.dash_background_color:this.dash_background_color,t.dash_background_color=t.dash_background_color&&vo.parseColor(t.dash_background_color),t.texture_merged=t.dash_key||(void 0!==t.texture?t.texture:this.texture),t.texcoords=this.texcoords||t.texture_merged?1:0,this.addMeshVariantForDraw(this.base,t),t.outline&&(t.outline.style=t.outline.style||this.name,t.outline.color=vo.createColorPropertyCache(t.outline.color),t.outline.width=vo.createPropertyCache(t.outline.width,vo.parseUnits),t.outline.next_width=vo.createPropertyCache(t.outline.width,vo.parseUnits),t.outline.cap=t.outline.cap||t.cap,t.outline.join=t.outline.join||t.join,t.outline.miter_limit=t.outline.miter_limit||t.miter_limit,t.outline.offset=t.offset,(r=this.styles[t.outline.style])?(t.outline.dash=void 0!==t.outline.dash?t.outline.dash:r.dash,t.outline.texture=void 0!==t.outline.texture?t.outline.texture:r.texture,null!=t.outline.dash?(t.outline.dash_key=t.outline.dash&&this.dashTextureKey(t.outline.dash,n),t.outline.texture_merged=t.outline.dash_key):null===t.outline.dash||null!=t.outline.texture?(t.outline.dash_key=null,t.outline.texture_merged=t.outline.texture):(t.outline.dash=t.dash,t.outline.dash_key=t.outline.dash&&this.dashTextureKey(t.outline.dash,n),t.outline.texture_merged=t.outline.dash_key),t.outline.dash_background_color=void 0!==t.outline.dash_background_color?t.outline.dash_background_color:r.dash_background_color,t.outline.dash_background_color=void 0!==t.outline.dash_background_color?t.outline.dash_background_color:t.dash_background_color,t.outline.dash_background_color=t.outline.dash_background_color&&vo.parseColor(t.outline.dash_background_color),t.outline.texcoords=r.texcoords||t.outline.texture_merged?1:0,this.addMeshVariantForDraw(this.base,t.outline)):(xi({level:"warn",once:!0},"Layer '".concat(t.layers[t.layers.length-1],"': ")+"line 'outline' specifies non-existent draw style '".concat(t.outline.style,"' (or maybe the style is ")+"defined but is missing a 'base' or has another error), skipping outlines in layer"),t.outline=null)),t},dashTextureKey:function(t,e){return"__dash_"+e+"_"+this.scene_id+"_"+JSON.stringify(t)},getDashTexture:function(t,e){var r,n=this.dashTextureKey(t,this.sources[e].config.uid);null==uc.dash_textures[n]&&(uc.dash_textures[n]=!0,r=function(t,e){var r=1<arguments.length&&void 0!==e?e:{},n=r.dash_color||sc,i=r.background_color||lc,o=t,a=r.scale||1;o.length%2==1&&Array.prototype.push.apply(o,o);for(var s=!0,l=[],u=0;u<o.length;u++){for(var c=Math.floor(o[u]*a),h=0;h<c;h++)Array.prototype.push.apply(l,s?n:i);s=!s}return{pixels:l=new Uint8Array(l),length:l.length/4}}(t,{scale:20}),this.textureManager.create(this.gl,n,{data:r.pixels,height:r.length,width:1,filtering:"nearest"}))},endData:function(t){var e=this;return ma.endData.call(this,t).then((function(r){if(r){r.uniforms.u_has_line_texture=!1,r.uniforms.u_texture=e.textureManager.default,r.uniforms.u_v_scale_adjust=$n.tile_scale;var n=[];for(var i in r.meshes)!function(i){var o,a,s=r.meshes[i].variant;s.texture&&((o=r.meshes[i].uniforms=r.meshes[i].uniforms||{}).u_has_line_texture=!0,o.u_texture=s.texture,o.u_texture_ratio=1,s.dash&&(o.u_v_scale_adjust=20*$n.tile_scale,o.u_dash_background_color=s.dash_background_color||[0,0,0,0]),s.dash_key&&null==uc.dash_textures[s.dash_key]&&(uc.dash_textures[s.dash_key]=!0,ui.postMessage(e.main_thread_target+".getDashTexture",s.dash,t.source)),null==e.textureManager.textures[s.texture]?n.push(e.textureManager.syncTexturesToWorker([s.texture]).then((function(t){var e=t[s.texture];e&&(o.u_texture_ratio=e.height/e.width)}))):(a=e.textureManager.textures[s.texture],o.u_texture_ratio=a.height/a.width))}(i);return t.mesh_data[e.name]=r,Promise.all(n).then((function(){return r}))}return r}))},computeVariantForDraw:function(t){var e=t.offset?1:0;return t.dash_key&&(e+=t.dash_key,t.dash_background_color&&(e+=t.dash_background_color)),t.texture_merged&&(e+=t.texture_merged),e=ea(e+="/"+t.texcoords),{key:t.variantKey=e,order:t.variant_order,offset:t.offset?1:0,texcoords:t.texcoords,texture:t.texture_merged,dash:t.dash,dash_key:t.dash_key,dash_background_color:t.dash_background_color}},vertexLayoutForMeshVariant:function(t){var e;return null==uc.vertex_layouts[t.key]&&(e=[{name:"a_position",size:4,type:au.SHORT,normalized:!1},{name:"a_extrude",size:2,type:au.SHORT,normalized:!1},{name:"a_offset",size:2,type:au.SHORT,normalized:!1,static:t.offset?null:[0,0]},{name:"a_scaling",size:2,type:au.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:au.UNSIGNED_SHORT,normalized:!0,static:t.texcoords?null:[0,0]},{name:"a_color",size:4,type:au.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:au.UNSIGNED_BYTE,normalized:!0}],uc.vertex_layouts[t.key]=new pu(e)),uc.vertex_layouts[t.key]},makeVertexTemplate:function(t,e){var r=0;return this.vertex_template[r++]=0,this.vertex_template[r++]=0,this.vertex_template[r++]=t.z||0,this.vertex_template[r++]=this.scaleOrder(t.order),this.vertex_template[r++]=0,this.vertex_template[r++]=0,e.variant.offset&&(this.vertex_template[r++]=0,this.vertex_template[r++]=0),this.vertex_template[r++]=1024*t.width_scale,this.vertex_template[r++]=1024*t.offset_scale,e.variant.texcoords&&(this.vertex_template[r++]=0,this.vertex_template[r++]=0),this.vertex_template[r++]=255*t.color[0],this.vertex_template[r++]=255*t.color[1],this.vertex_template[r++]=255*t.color[2],this.vertex_template[r++]=255*t.color[3],this.selection&&(this.vertex_template[r++]=255*t.selection_color[0],this.vertex_template[r++]=255*t.selection_color[1],this.vertex_template[r++]=255*t.selection_color[2],this.vertex_template[r++]=255*t.selection_color[3]),this.vertex_template},buildLines:function(t,e,r,n,i){var o;this.feature_style=this.outline_feature_style,!e.outline||null==e.outline.color||null==e.outline.width.value||(o=this.styles[e.outline.style])&&o.addFeature(n.feature,e.outline,n),this.feature_style=this.inline_feature_style;var a=r.vertex_data,s=a.vertex_layout,l=this.makeVertexTemplate(e,r);return function(t,e,r,n,i){var o,a,s=i.texcoord_index,l=i.texcoord_width,u=i.texcoord_ratio,c=i.texcoord_normalize,h=i.join,f=i.cap,p=i.miter_limit,A=h?Qu[h]:Qu.miter;A===Qu.miter&&(o=(p=p||zu)*p),s&&(c=c||Vu,a=1/(l*(u=u||Gu)*Ku));for(var d={closed_polygon:i.closed_polygon,remove_tile_edges:i.remove_tile_edges,tile_edge_tolerance:i.tile_edge_tolerance,miter_len_sq:o,join_type:A,cap_type:f?Hu[f]:Hu.butt,vertex_data:r,vertex_template:n,half_width:e/2,extrude_index:i.extrude_index,offset_index:i.offset_index,v_scale:a,texcoord_index:s,texcoord_width:l,texcoord_normalize:c,offset:i.offset,geom_count:0,crop_by_tile:i.crop_by_tile},g=0;g<t.length;g++)Ju(t[g],d);if(d.extra_lines)for(var y=0;y<d.extra_lines.length;y++)Ju(d.extra_lines[y],d);return d.geom_count}(t,e.width,a,l,{cap:e.cap,join:e.join,miter_limit:e.miter_limit,extrude_index:s.index.a_extrude,offset_index:s.index.a_offset,texcoord_index:s.index.a_texcoord,texcoord_width:e.texcoord_width,texcoord_normalize:65535,closed_polygon:i&&i.closed_polygon,remove_tile_edges:!e.tile_edges&&i&&i.remove_tile_edges,tile_edge_tolerance:$n.tile_scale*n.tile.pad_scale*2,offset:e.offset,crop_by_tile:this.crop_by_tile})},buildPolygons:function(t,e,r,n){for(var i=0,o=0;o<t.length;o++)i+=this.buildLines(t[o],e,r,n,{closed_polygon:!0,remove_tile_edges:!this.crop_by_tile});return i}});var fc=[[1,1],[1,-1],[-1,1],[-1,-1]];function pc(t,e,r,n,i,o,a){var s,l=e.vertex_template,u=e.vertex_data;Ac(e,"a_position",t),Ac(e,"a_width",e.half_width),e.vertex_layout_index.a_barycentric&&((s=[0,0,0])[r%3]=1,Ac(e,"a_barycentric",s)),Ac(e,"a_tangents",a[0].concat(a[1])),Ac(e,"a_segment",n),Ac(e,"a_texcoord",fc[r%4]),Ac(e,"a_length",i),Ac(e,"a_closed",e.closed?1:0),Ac(e,"a_angles",o),u.addVertex(l)}function Ac(t,e,r){var n=r.length,i=t.vertex_template,o=t.vertex_layout_index[e],a=0;if(n)for(;a!==n;)i[o+a]=r[a],a++;else i[o+a]=r}function dc(t,e){for(var r=t.reduce((function(t,e){return t+e})),n=0,i=[],o=0,a=t.length;o<=a;o+=2){var s=Math.max(1e-4,t[o%a]),l=Math.max(1e-4,t[(o+1)%a]);i.push(n,n+s),n+=s+l}for(var u=new Uint8Array(4*e),c=0,h=0;h<e;h++)!function(t){var n=r*t/(e-1),o=function(t){for(var e=t[0],r=0,n=1,i=t.length;n<i;n++)t[n]<e&&(e=t[r=n]);return r}(i.map((function(t){return Math.abs(t-n)}))),a=void 0,s=void 0,l=o%2==0?(a=n<=i[o]?1:0,s=i[o],i[o+1]):(a=n>i[o]?2:0,s=i[o-1],i[o]);u[c++]=i[o],u[c++]=a,u[c++]=s,u[c++]=l}(h);return u}var gc=Object.create(ma),yc={round:1,"arrow-tail":2,"arrow-head":3,square:4,butt:5},vc={miter:0,round:1,bevel:2},mc=yc.round,bc=vc.miter,_c=[0,0],wc="antialias join linecaps miter_limit dash_index dash dash_caps dash_phase".split(" ");Object.assign(gc,{name:"pattern-lines",built_in:!0,vertex_shader_src:"uniform vec2 u_resolution;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform sampler2D u_uniforms;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform vec3 u_map_position;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_index;uniform vec2 u_dash_caps;uniform float u_dash_phase;uniform float u_dash_period;attribute vec4 a_position;attribute vec4 a_color;attribute float a_width;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nattribute vec3 a_barycentric;\n#endif\nattribute vec2 a_normal;attribute float a_length;attribute vec2 a_segment;attribute vec2 a_texcoord;attribute vec2 a_angles;attribute vec4 a_tangents;attribute float a_closed;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nvarying vec3 v_barycentric;\n#endif\nvarying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#ifndef TANGRAM_HEIGHT_SCALE\nfloat TANGRAM_HEIGHT_SCALE=16.0;\n#endif\n#define UNPACK_SCALING(x) (x / 1024.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: global\nconst float PI=3.141592653589793;const float THETA=15.0*PI/180.0;float cross(in vec2 v1,in vec2 v2){return v1.x*v2.y-v1.y*v2.x;}float signed_distance(in vec2 v1,in vec2 v2,in vec2 v3){return cross(v2-v1,v1-v3)/length(v2-v1);}void rotate(in vec2 v,in float angle,out vec2 result){float cosine=cos(angle);float sine=sin(angle);result=vec2(cosine*v.x-sine*v.y,sine*v.x+cosine*v.y);}void main(){\n#pragma tangram: setup\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nv_modelpos_base_zoom=modelPositionBaseZoom();\n#endif\nfloat linewidth=a_width*2.0;v_angles=a_angles;v_segment=a_segment;v_color=a_color;v_length=a_length;v_texcoord=a_texcoord;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nv_barycentric=a_barycentric;\n#endif\nv_color.a=min(linewidth,v_color.a);linewidth=max(linewidth,1.0);linewidth/=exp2(u_map_position.z-u_tile_origin.w);v_linewidth_and_closed=linewidth*(a_closed>0.0 ?-1.0 : 1.0);if(v_color.a<=0.0){gl_Position=vec4(0.0,0.0,0.0,1.0);return;}float width=ceil(1.25*u_antialias+linewidth)/2.0;vec2 t1=normalize(a_tangents.xy);vec2 t2=normalize(a_tangents.zw);float u=a_texcoord.x;u*=-1.0;float v=a_texcoord.y;vec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.0);if(t1!=t2){float angle=a_texcoord.x==1.0 ? a_angles.x : a_angles.y;vec2 t=normalize(t1+t2);vec2 o=vec2(+t.y,-t.x);float segmentLength=a_segment.y-a_segment.x;float magnitude=width/cos(angle/2.0);float sqMagnitude=magnitude*magnitude;float seg1SqMagnitude=dot(a_tangents.xy,a_tangents.xy);float seg2SqMagnitude=dot(a_tangents.zw,a_tangents.zw);if((abs(magnitude)>linewidth)&&(sqMagnitude>=min(seg1SqMagnitude,seg2SqMagnitude))){if(u==1.0){o=vec2(-t2.y,+t2.x);}else{o=vec2(-t1.y,+t1.x);}magnitude=width;angle=0.0;v_angles.x=0.0;v_angles.y=0.0;}if(u_dash_index>0.0){if((abs(angle)>THETA)){position.xy+=v*width*o/cos(angle/2.0);float s=sign(angle);if(angle<0.0){if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==1.0){position.xy-=2.0*width*t1/sin(angle);u-=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==1.0){position.xy+=2.0*width*t2/sin(angle);u+=2.0*width/sin(angle);}}}else{if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==-1.0){position.xy+=2.0*width*t1/sin(angle);u+=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==-1.0){position.xy-=2.0*width*t2/sin(angle);u-=2.0*width/sin(angle);}}}}else{position.xy+=v*width*o/cos(angle/2.0);if(u==+1.0){u=v_segment.y;}else{u=v_segment.x;}}}else{position.xy+=v*o*magnitude;if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);}else{u=v_segment.x-v*width*tan(angle/2.0);}}v_joinIndicator=(segmentLength+v*width*tan(angle/2.0))/segmentLength;}else{v_joinIndicator=-1.0;vec2 o=vec2(+t1.y,-t1.x);position.xy+=v*width*o;if(u==-1.0){u=v_segment.x-width;position.xy-=width*t1;}else{u=v_segment.y+width;position.xy+=width*t2;}}vec2 t;vec2 curr=a_position.xy;if(a_texcoord.x>=0.0){vec2 next=curr+t2*(v_segment.y-v_segment.x);rotate(t1,+a_angles.x/2.0,t);v_miter.x=signed_distance(curr,curr+t,position.xy);rotate(t2,+a_angles.y/2.0,t);v_miter.y=signed_distance(next,next+t,position.xy);}else{vec2 prev=curr-t1*(v_segment.y-v_segment.x);rotate(t1,-a_angles.x/2.0,t);v_miter.x=signed_distance(prev,prev+t,position.xy);rotate(t2,-a_angles.y/2.0,t);v_miter.y=signed_distance(curr,curr+t,position.xy);}v_distances=vec2(u,v*width);v_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;\n#pragma tangram: position\nv_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvec3 normal=v_normal;\n#pragma tangram: normal\nv_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));\n#endif\ncameraProjection(position);\n#ifdef TANGRAM_LAYER_ORDER\napplyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);\n#endif\ngl_Position=position;}",fragment_shader_src:"uniform vec2 u_resolution;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_dash_atlas;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_phase;uniform float u_dash_period;uniform float u_dash_index;uniform vec2 u_dash_caps;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nvarying vec3 v_barycentric;\n#endif\nvarying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;\n#define TANGRAM_NORMAL v_normal\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: global\n#pragma tangram: utils\nconst float PI=3.141592653589793;const float HALF_PI=PI/2.0;const float THETA=15.0*PI/180.0;/***Compute distance to cap.*@param{int}type The Type of the cap(see CAP_TYPE in pattern_lines)*@param{float}dx The distance of the pixel from the beginning of the line(not straight distance,but along the legs)*@param{float}dy The distance of the pixel from the midline(see v_distances in vertex shader,aka \xb11*half_line_width)*@param{float}aa_radius The distance from the mid-line from where antialiasing starts.*For example for a linewidth 10px width and 2px filter radius it is 10px/2-2px=3px.*@return{float}distance*/float cap(int type,float dx,float dy,float aa_radius){float dist=0.0;dx=abs(dx);dy=abs(dy);if(type==1)dist=sqrt(dx*dx+dy*dy);else if(type==3)dist=(dx+abs(dy));else if(type==2)dist=max(abs(dy),(aa_radius+dx-abs(dy)));else if(type==4)dist=max(dx,dy);else if(type==5)dist=max(dx+aa_radius,dy);return dist;}/***Compute distance to join.*@param{int}type The type of the join(see JOIN_TYPE in pattern_lines)*@param{vec2}segment Interpolated a_segment attribute from the vertex shader*@param{vec2}texcoord Pair of u/v coordinates to identify the 4 different extruded points of the segment.*@param{vec2}distances 2 component vector where:*x is the distance of the pixel from the beginning of the line(along the legs)*y is the  distance of the pixel from the midline(see v_distances in vertex shader,\xb11*half_line_width)*@param{vec2}miter Miter point coordiante*@param{float}miter_limit The miter limit*@param{float}linewidth The width of the line*@return{float}computed distance*/float join(in int type,in vec2 segment,in vec2 texcoord,in vec2 distances,in vec2 miter,in float miter_limit,in float linewidth){float dx=distances.x;float result=abs(distances.y);if((dx<segment.x)||(dx>segment.y)){if(type==1){float s=dx<segment.x ? segment.x : segment.y;result=max(result,length(distances-vec2(s,0.0)));}else{float m=abs(texcoord.x>=0.0 ? miter.x : miter.y);if(type==2){result=max(result,m);}else if(type==0){result=max(result,m-miter_limit*linewidth/2.0);}}}return result;}void main(void){\n#pragma tangram: setup\nvec4 color=v_color;vec3 normal=TANGRAM_NORMAL;\n#ifdef TANGRAM_CROP_BY_TILE\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}\n#endif\n#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)\ncalculateNormal(normal);\n#endif\n#if !defined(TANGRAM_LIGHTING_VERTEX)\n#pragma tangram: normal\n#endif\n#pragma tangram: color\n#if defined(TANGRAM_LIGHTING_FRAGMENT)\ncolor=calculateLighting(v_position.xyz-u_eye,normal,color);\n#elif defined(TANGRAM_LIGHTING_VERTEX)\ncolor*=v_lighting;\n#endif\n#pragma tangram: filter\nif(v_color.a<=0.0){discard;}bool solid=(u_dash_index==0.0);bool closed=v_linewidth_and_closed<0.0;float dx=v_distances.x;float dy=v_distances.y;float linewidth=abs(v_linewidth_and_closed);float aa_radius=linewidth/2.0-u_antialias;float dist=0.0;vec2 linecaps=u_linecaps;vec2 dash_caps=u_dash_caps;float line_start=0.0;float line_stop=v_length;if(solid){dist=abs(dy);bool potentialCap=!closed&&v_joinIndicator<0.0;if(potentialCap&&dx<line_start){dist=cap(int(u_linecaps.x),abs(dx),abs(dy),aa_radius);}else if(potentialCap&&dx>line_stop){dist=cap(int(u_linecaps.y),abs(dx)-line_stop,abs(dy),aa_radius);}else{dist=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);}}else{float segment_start=v_segment.x;float segment_stop=v_segment.y;float segment_center=(segment_start+segment_stop)/2.0;float freq=u_dash_period*linewidth;float dash_phase=u_dash_phase-1e-5;float u=mod(dx+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));float dash_center=float(tex.x)*255.0*linewidth;float dash_type=floor(float(tex.y)*255.0+0.5);float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;float dash_start=dx-u+_start;float dash_stop=dx-u+_stop;if((dash_stop<segment_start)&&(dash_caps.x!=5.0)){float u=mod(segment_start+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_start-u+_start;dash_stop=segment_start-u+_stop;}else if((dash_start>segment_stop)&&(dash_caps.y!=5.0)){float u=mod(segment_stop+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_stop-u+_start;dash_stop=segment_stop-u+_stop;}bool discontinuous=((dx<segment_center)&&abs(v_angles.x)>THETA)||((dx>=segment_center)&&abs(v_angles.y)>THETA);float d_join=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);if(closed){line_start+=linewidth/2.0;line_stop-=linewidth/2.0;}if(dash_stop<=line_start){discard;}if(dash_start>=line_stop){discard;}if(discontinuous){if((dash_start>segment_stop)){discard;}if((dash_stop<segment_start)){discard;}if(dash_caps.x==1.0){if((u>_stop)&&(dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){discard;}}if(dash_caps.y==1.0){if((u<_start)&&(dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){discard;}}if((dash_caps.x!=1.0)&&(dash_caps.x!=5.0)){if((dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){float a=v_angles.x/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(segment_start-dx)*cos_a-dy*sin_a;float y=(segment_start-dx)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.x=4.0;}}if((dash_caps.y!=1.0)&&(dash_caps.y!=5.0)){if((dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){float a=v_angles.y/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(dx-segment_stop)*cos_a-dy*sin_a;float y=(dx-segment_stop)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.y=4.0;}}}if((dx<line_start)&&(dash_start<=line_start)&&(dash_stop>line_start)){dist=cap(int(linecaps.x),dx-line_start,dy,aa_radius);}else if((dx>line_stop)&&(dash_stop>line_stop)&&(dash_start<line_stop)){dist=cap(int(linecaps.y),dx-line_stop,dy,aa_radius);}else if(dash_type==1.0){dist=cap(int(dash_caps.x),abs(dash_center-u),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}else if(dash_type==0.0){dist=abs(dy);}else if(dash_type==2.0){dist=cap(int(dash_caps.y),abs(u-dash_center),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}if((dx>line_start)&&(dx<line_stop)){if((dx<=segment_start)&&(dash_start<=segment_start)&&(dash_stop>=segment_start)){dist=d_join;float angle=HALF_PI+v_angles.x;float f=abs((segment_start-dx)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if((dx>segment_stop)&&(dash_start<=segment_stop)&&(dash_stop>=segment_stop)){dist=d_join;float angle=HALF_PI+v_angles.y;float f=abs((dx-segment_stop)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}dist=dist-aa_radius;if(dist>=0.0){if(u_antialias==0.0){discard;}else{color=vec4(color.rgb,exp(-dist*dist)*color.a);}}\n#ifdef TANGRAM_DEBUG_TRIANGLES\nif(any(lessThan(v_barycentric,vec3(0.0085)))){color=vec4(0.0,1.0,0.0,1.0);}\n#endif\ngl_FragColor=color;}",selection:!0,init:function(){ma.init.apply(this,arguments),this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_DEBUG_TRIANGLES=!1,this.defines.TANGRAM_DEBUG_NO_TEXTURE_FLOAT_SUPPORT=!1,this.styles=this.styles||{},gc.vertex_layouts=[]},calcDistance:function(t,e){return t&&vo.evalCachedDistanceProperty(t,e)||0},calcDash:function(t,e){var r=vo.evalProperty(t.dash,e),n=0;return r&&((r=Array.isArray(r)&&r.length?r:_c).length%2==1&&(r=r.concat(r)),n=+(n=r.reduce((function(t,e){return t+e})))||0),{dash:r,dash_period:n}},calcWidth:function(t,e,r){var n=this.calcDistance(t.width,r);return!(n<0)&&(e.width=n*r.units_per_meter_overzoom,!0)},getCapType:function(t,e,r){var n=vo.evalProperty(t,e);return void 0!==yc[n]?yc[n]:r},_parseFeature:function(t,e,r){if(!1!==this.calcWidth(e,this.feature_style,r)){var n=this.parseColor(e.color,r);if(n&&0!==n[3]){var i=this.getCapType(e.cap,r,mc),o=vo.evalProperty(e.join,r),a=+vo.evalProperty(e.miter_limit,r),s=this.calcDash(e,r),l=s.dash,u=s.dash_period,c=Object.assign({color:n,antialias:e.antialias,linecaps:[this.getCapType(e.tail_cap,r,i),this.getCapType(e.head_cap,r,i)],join:void 0!==vc[o]?vc[o]:bc,miter_limit:0<=a?a:3,dash_index:0===u?0:1,dash:l,dash_caps:[this.getCapType(e.tail_cap,r,i),this.getCapType(e.head_cap,r,i)],dash_phase:+vo.evalProperty(e.dash_phase,r)||0,dash_period:u},this.feature_style);return c.z=e.z&&vo.evalCachedDistanceProperty(e.z||0,r)||vo.defaults.z,c.z*=$n.height_scale,c.extrude=vo.evalProperty(e.extrude,r),c.extrude&&(!0===c.extrude?(c.height=void 0!==t.properties.height?t.properties.height:vo.defaults.height,c.min_height=void 0!==t.properties.min_height?t.properties.min_height:vo.defaults.min_height):"number"==typeof c.extrude?(c.height=c.extrude,c.min_height=0):Array.isArray(c.extrude)&&(c.min_height=c.extrude[0],c.height=c.extrude[1]),c.height*=$n.height_scale,c.min_height*=$n.height_scale),this.addMeshVariantForDraw(this.base,c),c}}},_preprocess:function(t){t.color=vo.createColorPropertyCache(t.color),t.width=vo.createPropertyCache(t.width,vo.parseUnits),t.width&&t.width.type!==vo.CACHE_TYPE.STATIC&&(t.next_width=vo.createPropertyCache(t.width,vo.parseUnits)),t.z=vo.createPropertyCache(t.z,vo.parseUnits);var e=+t.antialias;return t.antialias=isNaN(e)?0:e,t},buildRasterTextures:function(t,e){var r=[];for(var n in e.meshes){var i,o=this.getMeshVariantTypeForDraw({variantKey:n}),a=o.uniforms,s=o.pattern;a.u_dash_index&&(i="__dash_"+s.join("_")+"_"+t.key+"_"+t.id,r.push({name:i,data:dc(s,1024)}),a.u_dash_atlas=i,e.meshes[n].textures=[i]),e.meshes[n].uniforms=a}return e.uniforms=e.uniforms||{},r.length?ui.postMessage(this.main_thread_target+".loadTextures",r).then((function(t){return e})):Promise.resolve(e)},loadTextures:function(t){for(var e=[],r=0;r<t.length;r++){var n=t[r],i=(i=this.textureManager.textures[n.name])||this.textureManager.create(this.gl,n.name,{filtering:"nearest",repeat:!0,width:1024,height:1,data:n.data});e.push(i.loading)}return Promise.all(e).then((function(t){return t.map((function(t){return t.retain(),t.name}))}))},computeVariantForDraw:function(t){var e=function(t){for(var e=[],r=0,n=wc.length;r<n;r++){var i=t[wc[r]];Array.isArray(i)?e.push(i.join("_")):"boolean"==typeof i?e.push(i?1:0):i&&e.push(i.toString())}return e.join("/")}(t);return{key:t.variantKey=e,order:t.variant_order,uniforms:{u_antialias:t.antialias,u_linecaps:t.linecaps,u_linejoin:t.join,u_miter_limit:t.miter_limit,u_dash_index:t.dash_index,u_dash_caps:t.dash_caps,u_dash_phase:t.dash_phase,u_dash_period:t.dash_period},pattern:t.dash}},vertexLayoutForMeshVariant:function(t){var e;return null==gc.vertex_layouts[t.key]&&(e=[{name:"a_position",size:4,type:au.SHORT,normalized:!1},{name:"a_color",size:4,type:au.UNSIGNED_BYTE,normalized:!0},{name:"a_width",size:1,type:au.FLOAT,normalized:!1},{name:"a_tangents",size:4,type:au.FLOAT,normalized:!1},{name:"a_segment",size:2,type:au.FLOAT,normalized:!1},{name:"a_angles",size:2,type:au.FLOAT,normalized:!1},{name:"a_texcoord",size:2,type:au.FLOAT,normalized:!0},{name:"a_length",size:1,type:au.FLOAT,normalized:!1},{name:"a_closed",size:1,type:au.FLOAT,normalized:!1},{name:"a_selection_color",size:4,type:au.UNSIGNED_BYTE,normalized:!0}],this.defines.TANGRAM_DEBUG_TRIANGLES&&e.push({name:"a_barycentric",size:3,type:au.SHORT,normalized:!1}),gc.vertex_layouts[t.key]=new pu(e)),gc.vertex_layouts[t.key]},makeVertexTemplate:function(t){var e=0;return this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=t.z+t.height||0,this.vertex_template[e++]=this.scaleOrder(t.order),this.vertex_template[e++]=255*t.color[0],this.vertex_template[e++]=255*t.color[1],this.vertex_template[e++]=255*t.color[2],this.vertex_template[e++]=255*t.color[3],this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.selection&&(this.vertex_template[e++]=255*t.selection_color[0],this.vertex_template[e++]=255*t.selection_color[1],this.vertex_template[e++]=255*t.selection_color[2],this.vertex_template[e++]=255*t.selection_color[3]),this.defines.TANGRAM_DEBUG_TRIANGLES&&(this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0),this.vertex_template},buildLines:function(t,e,r,n,i){var o=4<arguments.length&&void 0!==i&&i,a=r.vertex_data,s=a.vertex_layout,l=this.makeVertexTemplate(e,r);return cc(t,e.width,a,l,s.index,o)},buildPolygons:function(t,e,r,n){for(var i=0,o=0,a=t.length;o<a;o++)i+=this.buildLines(t[o],e,r,n,!0);return i}});var xc=0,Ec={id_prefix:"",nextLabelId:function(){return"".concat(Ec.id_prefix,"/").concat(xc++)}};function Bc(t){return{priority:t.priority,collide:t.collide,repeat_distance:t.repeat_distance,repeat_group:t.repeat_group,buffer:t.buffer,italic:t.italic}}var Cc=["left","top-left","bottom-left"],Sc=["right","top-right","bottom-right"],kc=["top","top-left","top-right"],Tc=["bottom","bottom-left","bottom-right"],Nc={computeOffset:function(t,e,r,n){var i=3<arguments.length&&void 0!==n?n:null;if(!r||"center"===r)return t;var o=[t[0],t[1]];return i=i||this.default_buffer,this.isLeftAnchor(r)?(o[0]-=e[0]/2,"left"===r&&(o[0]-=i[0])):this.isRightAnchor(r)&&(o[0]+=e[0]/2,"right"===r&&(o[0]+=i[1])),this.isTopAnchor(r)?(o[1]-=e[1]/2,"top"===r&&(o[1]-=i[2])):this.isBottomAnchor(r)&&(o[1]+=e[1]/2,"bottom"===r&&(o[1]+=i[3])),o},alignForAnchor:function(t){if(t&&"center"!==t){if(this.isLeftAnchor(t))return"right";if(this.isRightAnchor(t))return"left"}return"center"},isLeftAnchor:function(t){return-1<Cc.indexOf(t)},isRightAnchor:function(t){return-1<Sc.indexOf(t)},isTopAnchor:function(t){return-1<kc.indexOf(t)},isBottomAnchor:function(t){return-1<Tc.indexOf(t)},default_buffer:[2.5,2.5,1.5,.75],zero_buffer:[0,0,0,0]};function Lc(t,e,r,n,i){var o=[],a=r-t,s=n-e,l=Jn.getLineLength(t,e,r,n),u=2*i;if((c=l/u)<=1)o.push(t+a/2,e+s/2,i);else{var c,h=u/l,f=a*h,p=s*h;(c=l/i/2)%1&&o.push(r-f/2,n-p/2,i),c|=0;for(var A=t+f/2,d=e+p/2;c--;)o.push(A,d,i),A+=f,d+=p}return o}var Ic=function(){function t(e,r,n,i){vn(this,t),this.id=Ec.nextLabelId(),this.position=[e[0],e[1]],void 0!==e[2]&&this.position.push(e[2]),this.size=r,this.layout=i,this.anchor=Array.isArray(this.layout.anchor)?this.layout.anchor[0]:this.layout.anchor,this.placed=null,this.type="point",this.parent=this.layout.parent,this.offset=this.computeOffset(),this.align=this.layout.align||Nc.alignForAnchor(this.anchor),this._is_flat=n}return bn(t,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,align:this.align,sides:this.getSides(),breach:!this.inTileBounds(),layout:Bc(this.layout)}}},{key:"inTileBounds",value:function(){var t=this.getAABB(),e=t.left,r=t.top,n=t.right,i=t.bottom;return Bi.pointInTile([e,r])&&Bi.pointInTile([n,i])}},{key:"isFlat",value:function(){return this._is_flat}},{key:"setAnchor",value:function(t){this._circles=void 0,this._aabb=void 0,this.anchor=t,this.offset=this.computeOffset()}},{key:"computeOffset",value:function(){var t,e=[this.layout.offset[0],this.layout.offset[1]];return this.parent&&(t=this.parent,e=Nc.computeOffset(e,t.size,t.anchor,Nc.zero_buffer),e=Nc.computeOffset(e,t.size,this.anchor,Nc.zero_buffer),t.offset!==vo.zeroPair&&(e===vo.zeroPair?e=t.offset:(e[0]+=t.offset[0],e[1]+=t.offset[1]))),Nc.computeOffset(e,this.size,this.anchor)}},{key:"getBoundingCircles",value:function(){return this.angle?(this._circles||(t=this.layout.units_per_pixel,i=-(r=(e=this.size[0]/2*t)*Math.cos(this.angle)),o=-(n=e*Math.sin(this.angle)),s=(a=Ln(this.position,2))[0],l=a[1],r+=s,n+=l*=-1,i+=s,o+=l,u=this.size[1]/2*t,this._circles=Lc(r,n,i,o,u)),this._circles):[];var t,e,r,n,i,o,a,s,l,u}},{key:"getAABB",value:function(){var t,e,r,n,i;return this._aabb||(t=this.layout.units_per_pixel,e=(this.size[0]/2+this.layout.buffer[0])*t,r=(this.size[1]/2+this.layout.buffer[1])*t,n=this.position[0]+this.offset[0]*t,i=this.position[1]-this.offset[1]*t,this._aabb={left:n-e,top:i+r,right:n+e,bottom:i-r}),this._aabb}},{key:"getSides",value:function(){var t=this.getAABB(),e=t.left,r=t.top,n=t.right,i=(r+t.bottom)/2;return[e,i,n,i]}}]),t}();Ic.PLACEMENT={VERTEX:0,MIDPOINT:1,SPACED:2,CENTROID:3};var Mc=Ic.PLACEMENT;function Oc(t,e,r,n){var i=[],o=n.placement,a=Math.max(e[0],e[1])*n.placement_min_length_ratio*n.units_per_pixel;switch(o){case Mc.SPACED:var s=function(t,e,r){var n=r.units_per_pixel,i=(r.placement_spacing||80)*n,o=function(t){for(var e=0,r=0;r<t.length-1;r++)e+=Fc(t[r],t[r+1]);return e}(t);if(o<=e)return!1;for(var a=Math.max(Math.floor(o/i),1),s=[],l=[],u=.5*(o-(a-1)*i),c=0;c<a;c++){var h=function(t,e,r,n){for(var i,o,a=0,s=0;s<t.length-1;s++){var l=t[s],u=t[s+1],c=Fc(l,u);if(!(c<=r)&&e<(a+=c)){i=function(t,e,r){var n=r/Fc(t,e);return[n*t[0]+(1-n)*e[0],n*t[1]+(1-n)*e[1]]}(l,u,a-e),o=Pc(l,u,n.angle);break}}return{position:i,angle:o}}(t,u,e,r),f=h.position,p=h.angle;null!=f&&null!=p&&(s.push(f),l.push(p)),u+=i}return{positions:s,angles:l}}(t,a,n);if(!s)return[];for(var l=s.positions,u=s.angles,c=0;c<l.length;c++){var h,f=l[c],p=u[c];!0!==n.tile_edges&&yu(f)||((h=new Ic(f,e,r,n)).angle=p,i.push(h))}break;case Mc.VERTEX:for(var A,d,g,y=0;y<t.length-1;y++)A=t[y],d=t[y+1],!0!==n.tile_edges&&yu(A)||((g=new Ic(A,e,r,n)).angle=Pc(A,d,n.angle),i.push(g));(g=new Ic(d,e,r,n)).angle=Pc(A,d,n.angle),i.push(g);break;case Mc.MIDPOINT:for(var v=0;v<t.length-1;v++){var m,b=t[v],_=t[v+1],w=[.5*(b[0]+_[0]),.5*(b[1]+_[1])];!0!==n.tile_edges&&yu(w)||(!a||Fc(b,_)>a)&&((m=new Ic(w,e,r,n)).angle=Pc(b,_,n.angle),i.push(m))}}return i}function Pc(t,e,r){var n=2<arguments.length&&void 0!==r?r:0;return"auto"===n?Math.atan2(e[0]-t[0],e[1]-t[1]):n}function Fc(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}var Uc={key:function(t){return[t.style,t.weight,t.family,t.px_size,t.fill,t.stroke,t.stroke_width,t.transform,t.text_wrap,t.max_lines,t.supersample,t.background_color,t.outline_color,t.outline_width,t.padding,Bi.device_pixel_ratio].join("/")},defaults:{style:"normal",weight:null,size:"12px",px_size:12,family:"Helvetica",fill:"white",text_wrap:15,max_lines:5,align:"center",stroke:null,stroke_width:0,background_color:null,outline_color:null,outline_width:0,padding:[0,0,0,0]},compute:function(t,e,r){var n={};if(e.font=e.font||this.defaults,n.can_articulate=e.can_articulate,n.fill=e.font.fill&&Bi.toCSSColor(vo.evalCachedColorProperty(e.font.fill,r))||this.defaults.fill,n.style=e.font.style||this.defaults.style,n.weight=e.font.weight||this.defaults.weight,e.font.family?(n.family=e.font.family,n.family!==this.defaults.family&&(n.family+=", "+this.defaults.family)):n.family=this.defaults.family,n.transform=e.font.transform,n.size=e.font.size||this.defaults.size,n.supersample=e.supersample_text?1.5:1,n.px_size=vo.evalCachedProperty(e.font.px_size,r)*n.supersample,0!==n.px_size){e.font.stroke&&e.font.stroke.color&&(n.stroke=Bi.toCSSColor(vo.evalCachedColorProperty(e.font.stroke.color,r)||this.defaults.stroke),n.stroke_width=vo.evalCachedProperty(e.font.stroke.width,r)||this.defaults.stroke_width),n.font_css=this.fontCSS(n);var i=e.text_wrap;return null==i&&"line"!==$n.geometryType(t.geometry.type)&&(i=!0),!0===i&&(i=this.defaults.text_wrap),n.text_wrap=i,n.max_lines=e.max_lines||this.defaults.max_lines,n.background_color=e.background&&e.background.color&&!e.can_articulate?Bi.toCSSColor(vo.evalCachedColorProperty(e.background.color,r)):this.defaults.background_color,n.outline_color=e.outline&&e.outline.color&&!e.can_articulate?Bi.toCSSColor(vo.evalCachedColorProperty(e.outline.color,r)):this.defaults.outline_color,n.outline_width=e.outline&&e.outline.width&&!e.can_articulate?vo.evalCachedProperty(e.outline.width,r):this.defaults.outline_width,n.padding=e.padding&&!e.can_articulate?vo.evalCachedProperty(e.padding,r):this.defaults.padding,n}},fontCSS:function(t){return[t.style,t.weight,t.px_size+"px",t.family].filter((function(t){return t})).join(" ")}},Rc=a((function(t){function e(t,e){document.addEventListener?t.addEventListener("scroll",e,!1):t.attachEvent("scroll",e)}function r(t){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(t)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function n(t,e){t.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+e+";"}function i(t){var e=t.a.offsetWidth,r=e+100;return t.f.style.width=r+"px",t.c.scrollLeft=r,t.b.scrollLeft=t.b.scrollWidth+100,t.g!==e&&(t.g=e,1)}function o(t,r){function n(){var t=o;i(t)&&t.a.parentNode&&r(t.g)}var o=t;e(t.b,n),e(t.c,n),i(t)}function a(t,e){var r=e||{};this.family=t,this.style=r.style||"normal",this.weight=r.weight||"normal",this.stretch=r.stretch||"normal"}function s(t,e){return[t.style,t.weight,function(){if(null===c){var t=document.createElement("div");try{t.style.font="condensed 100px sans-serif"}catch(t){}c=""!==t.style.font}return c}()?t.stretch:"","100px",e].join(" ")}var l,u,c,h;h=c=u=l=null,a.prototype.load=function(t,e){var i=this,a=t||"BESbswy",c=0,f=e||3e3,p=(new Date).getTime();return new Promise((function(t,e){var A,d,g;null===h&&(h=!!document.fonts),(A=h)&&(null===u&&(u=/OS X.*Version\/10\..*Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),A=!u),A?(A=new Promise((function(t,e){!function r(){(new Date).getTime()-p>=f?e():document.fonts.load(s(i,'"'+i.family+'"'),a).then((function(e){1<=e.length?t():setTimeout(r,25)}),(function(){e()}))}()})),d=new Promise((function(t,e){c=setTimeout(e,f)})),Promise.race([d,A]).then((function(){clearTimeout(c),t(i)}),(function(){e(i)}))):(g=function(){function u(){var e;(e=-1!=g&&-1!=y||-1!=g&&-1!=v||-1!=y&&-1!=v)&&((e=g!=y&&g!=v&&y!=v)||(null===l&&(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),l=!!e&&(parseInt(e[1],10)<536||536===parseInt(e[1],10)&&parseInt(e[2],10)<=11)),e=l&&(g==m&&y==m&&v==m||g==b&&y==b&&v==b||g==_&&y==_&&v==_)),e=!e),e&&(w.parentNode&&w.parentNode.removeChild(w),clearTimeout(c),t(i))}var h=new r(a),A=new r(a),d=new r(a),g=-1,y=-1,v=-1,m=-1,b=-1,_=-1,w=document.createElement("div");w.dir="ltr",n(h,s(i,"sans-serif")),n(A,s(i,"serif")),n(d,s(i,"monospace")),w.appendChild(h.a),w.appendChild(A.a),w.appendChild(d.a),document.body.appendChild(w),m=h.a.offsetWidth,b=A.a.offsetWidth,_=d.a.offsetWidth,function t(){var r;(new Date).getTime()-p>=f?(w.parentNode&&w.parentNode.removeChild(w),e(i)):(!0!==(r=document.hidden)&&void 0!==r||(g=h.a.offsetWidth,y=A.a.offsetWidth,v=d.a.offsetWidth,u()),c=setTimeout(t,50))}(),o(h,(function(t){g=t,u()})),n(h,s(i,'"'+i.family+'",sans-serif')),o(A,(function(t){y=t,u()})),n(A,s(i,'"'+i.family+'",serif')),o(d,(function(t){v=t,u()})),n(d,s(i,'"'+i.family+'",monospace'))},document.body?g():document.addEventListener?document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),g()})):document.attachEvent("onreadystatechange",(function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),g())})))}))},t.exports=a})),Dc={fonts_loaded:Promise.resolve(),last_loaded:null,loadFonts:function(t){var e=this,r=JSON.stringify(t)===this.last_loaded;return t&&!r&&function(){var r=[];for(var n in t)!function(n){Array.isArray(t[n])?t[n].forEach((function(t){return r.push(e.loadFontFace(n,t))})):r.push(e.loadFontFace(n,t[n]))}(n);e.last_loaded=JSON.stringify(t),e.fonts_loaded=Promise.all(r.filter((function(t){return t})))}(),this.fonts_loaded},loadFontFace:function(t,e){if(null!=e&&("object"===yn(e)||"external"===e)){var r={family:t},n=Promise.resolve();"object"===yn(e)&&(Object.assign(r,e),"string"==typeof e.url&&(n=this.injectFontFace(r)));var i=new Rc(t,r);return n.then((function(){return i.load()})).then((function(){xi("debug","Font face '".concat(t,"' is available"),r)}),(function(){xi("debug","Font face '".concat(t,"' is NOT available"),r)}))}},injectFontFace:function(t){var e=this,r=t.family,n=t.url,i=t.weight,o=t.style;void 0===this.supports_native_font_loading&&(this.supports_native_font_loading=void 0!==window.FontFace);var a=Promise.resolve(n);return"blob:"===n.slice(0,5)&&(a=Bi.io(n,6e4,"arraybuffer").then((function(t){var r=new Uint8Array(t);if(e.supports_native_font_loading)return r;for(var n="",i=0;i<r.length;i++)n+=String.fromCharCode(r[i]);return"data:font/opentype;base64,"+btoa(n)}))),a.then((function(t){var n,a,s;e.supports_native_font_loading?("string"==typeof t?n=new FontFace(r,"url(".concat(encodeURI(t),")"),{weight:i,style:o}):t instanceof Uint8Array&&(n=new FontFace(r,t,{weight:i,style:o})),document.fonts.add(n),xi("trace","Adding FontFace to document.fonts:",n)):(a="\n                    @font-face {\n                        font-family: '".concat(r,"';\n                        font-weight: ").concat(i||"normal",";\n                        font-style: ").concat(o||"normal",";\n                        src: url(").concat(encodeURI(t),");\n                    }\n                "),(s=document.createElement("style")).appendChild(document.createTextNode("")),document.head.appendChild(s),s.sheet.insertRule(a,0),xi("trace","Injecting CSS font face:",a))}))}},jc=function(){function t(){vn(this,t),this.vertical_text_buffer=1,this.horizontal_text_buffer=1,this.layout=Rl("binary-tree")}return bn(t,[{key:"createCanvas",value:function(t,e){var r=document.createElement("canvas");return t&&e&&(r.width=t,r.height=e),r.style.backgroundColor="transparent",r}},{key:"setFont",value:function(t,e){var r=e.font_css,n=e.fill,i=e.stroke,o=e.stroke_width,a=e.px_size,s=e.supersample;this.px_size=a;var l=Bi.device_pixel_ratio*s;i&&0<o&&(t.strokeStyle=i,t.lineWidth=o*l),t.fillStyle=n,t.textBaseline="bottom",t.font=r,t.miterLimit=2}},{key:"textSizes",value:function(t,e,r){var n=this;return Dc.loadFonts().then((function(){return ko.add({type:"textSizes",run:n.processTextSizesTask.bind(n),texts:e,tile_id:t,cursor:{ctx:r,styles:Object.keys(e),texts:null,style_idx:null,text_idx:null}})}))}},{key:"processTextSizesTask",value:function(t){var e,r=t.cursor,n=t.texts,i=r.ctx;for(r.style_idx=r.style_idx||0;r.style_idx<r.styles.length;){var o=r.styles[r.style_idx];null==r.text_idx&&(r.text_idx=0,r.texts=Object.keys(n[o]));for(var a=n[o],s=!0;r.text_idx<r.texts.length;){var l=r.texts[r.text_idx],u=a[l],c=u.text_settings;if(s&&(this.setFont(i,c),s=!1),u.size=this.textSize(i,o,l,c).size,c.can_articulate){var h=!1,f=!1;if(Qc(l)&&(Gc(l)?h=!0:f=!0),u.isRTL=h,u.no_curving=f||(e=l,$c.test(e)),u.vertical_buffer=this.vertical_text_buffer+c.outline_width+(c.padding[0]+c.padding[2])/2,u.segment_sizes=[],!u.no_curving){var p=function(t,e){var r=e?1:th;if(t.length<r)return[t];var n=t;if(jc.cache.segment[n])return jc.cache.stats.segment_hits++,jc.cache.segment[n];var i=[];if(qc.exec(t)){i=t.split(Kc);for(var o,a=-1,s=0;s<i.length-1;s++)0<s&&(o=Yc.exec(i[s]))&&(i[s]=i[s].substring(o[0].length),i[s-1]+=o[0],a+=o[0].length),a+=1+i[s].length,i[s]+=t.slice(a,a+1);t=""}for(;t.length;){for(var l="",u=t,c=0;c<r&&u.length;c++){var h=(Xc.exec(u)||u)[0];l+=h,u=u.substring(h.length)}i.push(l),t=t.substring(l.length)}return e&&i.reverse(),jc.cache.stats.segment_misses++,jc.cache.segment[n]=i}(l,h);u.segments=p;for(var A=0;A<p.length;A++)u.segment_sizes.push(this.textSize(i,o,p[A],c).size)}}if(r.text_idx++,!ko.shouldContinue(t))return!1}r.text_idx=null,r.style_idx++}return ko.finish(t,{texts:n}),!0}},{key:"textSize",value:function(e,r,n,i){var o=i.transform,a=i.text_wrap,s=i.max_lines,l=i.stroke_width,u=void 0===l?0:l,c=i.supersample,h=i.padding,f=i.outline_width,p=i.can_articulate;if(t.cache.text[r]=t.cache.text[r]||{},t.cache.text[r][n])return t.cache.stats.text_hits++,t.cache.text[r][n];t.cache.stats.text_misses++,t.cache.text_count++;var A=Bi.device_pixel_ratio*c,d=this.applyTextTransform(n,o),g=A*(this.vertical_text_buffer+f+(h[0]+h[2])/2),y=A*(this.horizontal_text_buffer+f+u+(h[1]+h[3])/2),v=2*A,m=this.px_size+v,b=eh.parse(d,a,s,m,e),_=b.height,w=b.width,x=b.lines,E=[w/A,_/A];p||(E[0]+=2*y/A,E[1]+=2*g/A);var B=[w+2*y,_+2*g],C=[B[0]/A,B[1]/A];return t.cache.text[r][n]={lines:x,size:{collision_size:E,texture_size:B,logical_size:C,line_height:m}},t.cache.text[r][n]}},{key:"drawTextMultiLine",value:function(t,e,r,n,i,o){var a=Ln(r,2),s=a[0],l=a[1],u=Bi.device_pixel_ratio*i.supersample,c=i.stroke_width||0,h=i.stroke;i.background_color&&(t.fillStyle=i.background_color,t.fillRect(s,l,n.texture_size[0],n.texture_size[1]));var f=i.outline_width*u,p=i.outline_color;f&&p&&(t.strokeStyle=p,t.lineWidth=f,t.strokeRect(s+f/2,l+f/2,n.texture_size[0]-f,n.texture_size[1]-f)),(i.background_color||f&&p)&&this.setFont(t,i);for(var A,d,g,y,v=n.line_height,m=l,b=0;b<e.length;b++){var _=e[b];this.drawTextLine(t,_,[s,m],n,i,o),m+=v}eu.draw_label_collision_boxes&&(t.save(),A=u*(this.horizontal_text_buffer+i.outline_width+c+(i.padding[1]+i.padding[3])/2),d=u*(this.vertical_text_buffer+i.outline_width+(i.padding[0]+i.padding[2])/2),g=n.collision_size,t.strokeStyle="blue",t.lineWidth=2,t.strokeRect(s+A,l+d,u*g[0],u*g[1]),"curved"===o&&h&&0<c&&t.strokeRect(s+n.texture_size[0]+A,l+d,u*g[0],u*g[1]),t.restore()),eu.draw_label_texture_boxes&&(t.save(),y=n.texture_size,t.strokeStyle="green",t.lineWidth=2,t.strokeRect(s+2,l+2,y[0]-4,y[1]-4),"curved"===o&&h&&0<c&&t.strokeRect(s+2+n.texture_size[0],l+2,y[0]-4,y[1]-4),t.restore())}},{key:"drawTextLine",value:function(t,e,r,n,i,o){var a,s=Ln(r,2),l=s[0],u=s[1],c=i.stroke,h=i.stroke_width,f=void 0===h?0:h,p=i.transform,A=i.align,d=i.supersample,g=i.padding,y=i.outline_width,v=Bi.device_pixel_ratio*d,m=(A=A||"center",n.texture_size),b=n.line_height,_=v*(this.vertical_text_buffer+y),w=v*(this.horizontal_text_buffer+y+f),x=this.applyTextTransform(e.text,p);"left"===A?a=l+w+g[3]*v:"center"===A?a=l+m[0]/2-e.width/2-(g[1]-g[3])*v/2:"right"===A&&(a=l+m[0]-e.width-w-g[1]*v);var E,B=u+_+b+g[0]*v;c&&0<f&&(E="curved"===o?m[0]:0,t.strokeText(x,a+E,B)),t.fillText(x,a,B)}},{key:"rasterize",value:function(e,r,n,i,o,a){return ko.removeForTile(n),ko.add({type:"rasterizeLabels",run:this.processRasterizeTask.bind(this),cancel:t.returnNoTextures,pause_factor:2,user_moving_view:!1,texts:e,textures:r,texture_prefix:i,gl:o,tile_id:n,texture_manager:a,cursor:{styles:Object.keys(e),texts:null,style_idx:0,text_idx:null,texture_idx:0,texture_names:[]}})}},{key:"processRasterizeTask",value:function(t){if(!ko.shouldContinue(t))return!1;for(var e=t.cursor,r=t.texts,n=t.textures;e.texture_idx<t.textures.length;){for(var i=!1,o=n[e.texture_idx],a=this.createCanvas.apply(this,In(o.texture_size)),s=a.getContext("2d");e.style_idx<e.styles.length;){var l=e.styles[e.style_idx];null==e.text_idx&&(e.text_idx=0,e.texts=Object.keys(r[l]));for(var u=r[l],c=!0;e.text_idx<e.texts.length;){var h=e.texts[e.text_idx],f=u[h],p=f.text_settings;if(c&&(this.setFont(s,p),c=!1),p.can_articulate){f.texcoords=f.texcoords||{};for(var A=0;A<f.type.length;A++){var d=f.type[A];switch(d){case"straight":if(f.textures[A]!==e.texture_idx)continue;var g,y,v,m,b=f.isRTL?h.split().reverse().join():h,_=o.texcoord_cache[l][b],w=void 0;_.texcoord?w=_.texcoord:(g=_.texture_position,v=(y=this.textSize(s,l,b,p)).size,m=y.lines,this.drawTextMultiLine(s,m,g,v,p,d),w=t.texture_manager.getTexcoordsForSprite(g,v.texture_size,o.texture_size),_.texcoord=w),f.texcoords[d]={texcoord:w,texture_id:_.texture_id};break;case"curved":var x=f.segments;f.texcoords.curved=[],f.texcoords_stroke=[];for(var E,B,C,S,k,T,N,L,I=0;I<x.length;I++)f.textures[A][I]===e.texture_idx&&(E=x[I],S=C=void 0,(B=o.texcoord_cache[l][E]).texcoord&&B.texcoord_stroke?(C=B.texcoord,S=B.texcoord_stroke):(k=B.texture_position,N=(T=this.textSize(s,l,E,p)).size,L=T.lines,this.drawTextMultiLine(s,L,k,N,p,d),C=t.texture_manager.getTexcoordsForSprite(k,N.texture_size,o.texture_size),S=p.stroke&&0<p.stroke_width?t.texture_manager.getTexcoordsForSprite([k[0]+N.texture_size[0],k[1]],N.texture_size,o.texture_size):(i=!0,t.texture_manager.getTexcoordsForSprite([o.texture_size[0],o.texture_size[1]],[0,0],o.texture_size)),B.texcoord=C,B.texcoord_stroke=S),f.texcoords_stroke.push(S),f.texcoords.curved.push({texcoord:C,texture_id:B.texture_id}))}}}else{var M=this.textSize(s,l,h,p).lines;for(var O in f.align)f.align[O].texture_id===e.texture_idx&&(this.drawTextMultiLine(s,M,f.align[O].texture_position,f.size,{stroke:p.stroke,stroke_width:p.stroke_width,transform:p.transform,supersample:p.supersample,align:O,background_color:p.background_color,outline_width:p.outline_width,outline_color:p.outline_color,padding:p.padding,fill:p.fill,font_css:p.font_css,px_size:p.px_size}),f.align[O].texcoords=t.texture_manager.getTexcoordsForSprite(f.align[O].texture_position,f.size.texture_size,o.texture_size))}e.text_idx++}e.text_idx=null,e.style_idx++}!0===i&&(s.fillStyle="rgba(0, 0, 0, 0)",s.fillRect(a.width-1,a.height-1,1,1));var P=t.texture_prefix+e.texture_idx;t.texture_manager.create(t.gl,P,{element:a,filtering:"linear",UNPACK_PREMULTIPLY_ALPHA_WEBGL:!0}),e.texture_names.push(P),e.texture_idx++,e.style_idx=0,a.width=0,a.height=0}return ko.finish(t,e.texture_names),!0}},{key:"setTextureTextPositions",value:function(t){var e={texture_id:0,texcoord_cache:{}},r=[];for(var n in t){var i=t[n];for(var o in i){var a=i[o],s=a.text_settings,l=s.can_articulate,u=s.stroke,c=s.stroke_width;if(l){a.textures=[],e.texcoord_cache[n]=e.texcoord_cache[n]||{};for(var h=0;h<a.type.length;h++)switch(a.type[h]){case"straight":var f,p=a.isRTL?o.split().reverse().join():o;e.texcoord_cache[n][p]||(f=a.size.texture_size,e.texcoord_cache[n][p]={},this.placeText(f[0],f[1],{can_articulate:l,style:n,word:p})),a.textures[h]=e.texture_id;break;case"curved":a.textures[h]=[];for(var A=0;A<a.segment_sizes.length;A++){var d,g,y=a.segments[A];e.texcoord_cache[n][y]||(g=(d=a.segment_sizes[A].texture_size)[0],u&&0<c&&(g*=2),e.texcoord_cache[n][y]={},this.placeText(g,d[1],{can_articulate:l,style:n,word:y})),a.textures[h].push(e.texture_id)}}}else{var v=a.size.texture_size;this.placeText(v[0],v[1],{can_articulate:l,text_info:a})}}}var m=this.layout.export(),b=m.items,_=m.width,w=m.height;e.texcoord_cache={};for(var x=0,E=b.length;x<E;x++){var B=b[x],C=B.x,S=B.y;if(B.meta.can_articulate){var k=B.meta,T=k.style,N=k.word;e.texcoord_cache[T]=e.texcoord_cache[T]||{},e.texcoord_cache[T][N]||(e.texcoord_cache[T][N]={texture_id:e.texture_id,texture_position:[C,S]})}else{var L=B.meta.text_info;for(var I in L.align)L.align[I].texture_id=e.texture_id,L.align[I].texture_position=[C,S]}}return 0<_&&0<w&&(r[e.texture_id]={texture_size:[_,w],texcoord_cache:e.texcoord_cache}),r}},{key:"placeText",value:function(t,e,r){this.layout.addItem({width:t+this.vertical_text_buffer,height:e+this.vertical_text_buffer,meta:r})}},{key:"applyTextTransform",value:function(t,e){return"capitalize"===e?t.replace(/\w\S*/g,(function(t){return t.charAt(0).toUpperCase()+t.substr(1)})):"uppercase"===e?t.toUpperCase():"lowercase"===e?t.toLowerCase():t}}],[{key:"fontPixelSize",value:function(e){if(null!=e){var r=Ln((e="string"==typeof e?e:String(e)).match(t.font_size_re)||[],3),n=r[1],i=r[2];return"em"===(i=i||"px")?n*=16:"pt"===i?n/=.75:"%"===i&&(n/=6.25),(n=vo.parsePositiveNumber(n))*Bi.device_pixel_ratio}}},{key:"pruneTextCache",value:function(){t.cache.text_count>t.cache.text_count_max&&(t.cache.text={},t.cache.text_count=0,xi("debug","CanvasText: pruning text cache")),Object.keys(t.cache.segment).length>t.cache.segment_count_max&&(t.cache.segment={},xi("debug","CanvasText: pruning segment cache"))}}]),t}();jc.font_size_re=/((?:[0-9]*\.)?[0-9]+)\s*(px|pt|em|%)?/,jc.cache={text:{},text_count:0,text_count_max:2e3,segment:{},segment_count_max:2e3,stats:{text_hits:0,text_misses:0,segment_hits:0,segment_misses:0}},jc.EMPTY_TEXTURES_ARR=[],jc.returnNoTextures=function(){return jc.EMPTY_TEXTURES_ARR};var Hc=new RegExp("[\u0591-\u07ff\u200f\u202b\u202e\ufb1d-\ufdfd\ufe70-\ufefc]");function Qc(t){return Hc.test(t)}var zc="\0-/:-@[-`{-\xbf\xd7\xf7\u02b9-\u02ff\u2000-\u2bff\u2010-\u2029\u202c\u202f-\u2bff",Vc=new RegExp("["+zc+"]+");function Gc(t){return Vc.test(t)}var qc=new RegExp("^["+zc+"\u0600-\u06ff]+"),Kc=new RegExp("["+zc+"\u0622-\u0625\u0627\u062f-\u0632\u0648\u0671-\u0677\u0688-\u0699\u06c4-\u06cb\u06cf\u06d2\u06d3\u06ee\u06ef]"),Yc=new RegExp("^[\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed]+"),Wc="[\u0300-\u036f\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u07a6-\u07b0\u0900-\u0903\u093a-\u094c\u094e\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09cc\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c-\u0a4c\u0a51\u0a81-\u0a83\u0abc\u0abe-\u0acc\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b4c\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bcd\u0bd7\u0c00-\u0c03\u0c3e-\u0c4c\u0c55\u0c56\u0c62\u0c63\u0c81-\u0c83\u0cbc\u0cbe-\u0ccc\u0cd5\u0cd6\u0ce2\u0ce3\u0d01-\u0d03\u0d3e-\u0d4c\u0d4e\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f83\u0f86\u0f87\u0f8d-\u0fbc\u0fc6\u102b-\u1038\u103a-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u17b4-\u17d1\u17d3\u1a55-\u1a5e\u1a61-\u1a7c\u1dc0-\u1dff\u20d0-\u20ff]",Xc=new RegExp("^.(?:"+Wc+"+)?([\u094d\u09cd\u0a4d\u0acd\u0b4d\u0c4d\u0ccd\u0d4d\u0f84\u1039\u17d2\u1a60\u1a7f]\\W(?:"+Wc+"+)?)*"),Jc={Mongolian:"\u1800-\u18af"},Zc=Object.keys(Jc).map((function(t){return Jc[t]})).join(""),$c=new RegExp("["+Zc+"]"),th=2,eh=function(){function t(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1/0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1/0;vn(this,t),this.width=0,this.height=0,this.lines=[],this.max_lines=r,this.text_wrap=n,this.context=e}return bn(t,[{key:"createLine",value:function(t){return this.lines.length<this.max_lines&&new rh(t,this.text_wrap)}},{key:"push",value:function(t){if(this.lines.length<this.max_lines){var e=this.context.measureText(t.text).width;return(t.width=e)>this.width&&(this.width=Math.ceil(e)),this.lines.push(t),this.height+=t.height,!0}return this.addEllipsis(),!1}},{key:"advance",value:function(t,e){return!!this.push(t)&&this.createLine(e)}},{key:"addEllipsis",value:function(){var e=this.lines[this.lines.length-1],r=Math.ceil(this.context.measureText(t.ellipsis).width);e.append(t.ellipsis),e.width+=r,e.width>this.width&&(this.width=e.width)}},{key:"finish",value:function(t){t?this.push(t):this.addEllipsis()}}],[{key:"parse",value:function(e,r,n,i,o){for(var a="number"==typeof r?e.split(" "):[e],s=new t(o,n,r),l=s.createLine(i),u=0;u<a.length;u++){for(var c=a[u].split("\n"),h=0===u,f=0;f<c.length&&l;f++){var p=c[f];Qc(p)&&Gc(p[p.length-1])&&(p+="\u200f");var A=h?p:" "+p;if(r&&0<u&&l.exceedsTextwrap(A)){if(!(l=s.advance(l,i)))break;l.append(p),h=!0}else l.append(A);f<c.length-1&&(l=s.advance(l,i),h=!0)}u===a.length-1&&s.finish(l)}return s}}]),t}();eh.ellipsis="...";var rh=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;vn(this,t),this.chars=0,this.text="",this.height=Math.ceil(e),this.text_wrap=r}return bn(t,[{key:"append",value:function(t){this.chars+=t.length,this.text+=t}},{key:"exceedsTextwrap",value:function(t){return t.length+this.chars>this.text_wrap}}]),t}(),nh={resetText:function(){this.texts={}},freeText:function(t){delete this.texts[t.id]},parseTextFeature:function(t,e,r,n){var i=this.parseTextSource(t,e,r);if(null!=i&&""!==i){var o=Uc.compute(t,e,r);if(o){var a=Uc.key(o);this.texts[n.id]=this.texts[n.id]||{};var s=this.texts[n.id][a]=this.texts[n.id][a]||{};if(i instanceof Object){var l=[],u=i.left+"-"+i.right;for(var c in i){var h,f=i[c];f&&(h=this.computeTextLayout({},t,e,r,n,f,o,u,c),s[f]||(s[f]={text_settings:o,ref:0}),l.push({draw:e,text:f,text_settings_key:a,layout:h}))}return 0<l.length&&l}var p=this.computeTextLayout({},t,e,r,n,i,o);return s[i]||(s[i]={text_settings:o,ref:0}),{draw:e,text:i,text_settings_key:a,layout:p}}}},parseTextSource:function(t,e,r){var n,i=e.text_source||"name";if(null!=i&&"object"===yn(i))for(var o in n={},i)n[o]=this.parseTextSourceValue(i[o],t,r);else n=this.parseTextSourceValue(i,t,r);return n},parseTextSourceValue:function(t,e,r){var n;if(Array.isArray(t)){for(var i=0;i<t.length;i++)if("string"==typeof t[i]?n=e.properties[t[i]]:"function"==typeof t[i]&&(n=t[i](r)),n)return n}else"string"==typeof t?n=e.properties[t]:t instanceof Function&&(n=t(r));return n},prepareTextLabels:function(t,e,r){var n=this;return 0===Object.keys(this.texts[t.id]||{}).length?Promise.resolve([]):ui.postMessage(this.main_thread_target+".calcTextSizes",t.id,this.texts[t.id]).then((function(e){var i=e.texts;return t.canceled?(xi("trace","Style ".concat(n.name,": stop tile build because tile was canceled: ").concat(t.key,", post-calcTextSizes()")),[]):(n.texts[t.id]=i||[],i?n.buildTextLabels(t,r):(So.abortTile(t.id),[]))}))},collideAndRenderTextLabels:function(t,e,r){var n=this;return this.prepareTextLabels(t,e,r).then((function(r){return 0===r.length?(So.collide([],e,t.id),Promise.resolve({})):So.collide(r,e,t.id).then((function(e){if(t.canceled)return xi("trace","stop tile build because tile was canceled: ".concat(t.key,", post-collide()")),{};var r=n.texts[t.id];return null==r||0===e.length?{}:(n.cullTextStyles(r,e),e.forEach((function(t){var e=t.text_settings_key,n=r[e]&&r[e][t.text];n.text_settings.can_articulate?(n.type||(n.type=[]),-1===n.type.indexOf(t.label.type)&&n.type.push(t.label.type)):(n.align=n.align||{},n.align[t.label.align]={})})),{labels:e,texts:r,textures:[]})}))}))},cullTextStyles:function(t,e){for(var r=0;r<e.length;r++){var n=e[r];t[n.text_settings_key][n.text].ref++}for(var i in t)for(var o in t[i])t[i][o].ref<1&&delete t[i][o];for(var a in t)0===Object.keys(t[a]).length&&delete t[a]},calcTextSizes:function(t,e){return this._canvas_text||(this._canvas_text=new jc,this._canvas_ctx_for_sizes=this._canvas_text.createCanvas().getContext("2d")),this._canvas_text.textSizes(t,e,this._canvas_ctx_for_sizes)},preprocessText:function(t){if(t&&t.font&&"object"===yn(t.font))return t.font.fill=vo.createPropertyCache(t.font.fill),t.font.stroke&&(t.font.stroke.color=vo.createPropertyCache(t.font.stroke.color)),t.background&&t.background.color&&(t.background.color=vo.createPropertyCache(t.background.color)),t.outline&&(t.outline.color&&(t.outline.color=vo.createPropertyCache(t.outline.color)),t.outline.width&&(t.outline.width=vo.createPropertyCache(t.outline.width,vo.parsePositiveNumber))),t.padding&&(Array.isArray(t.padding)?2===t.padding.length&&(t.padding=[t.padding[0],t.padding[1],t.padding[0],t.padding[1]]):t.padding=Array(4).fill(t.padding),t.padding=vo.createPropertyCache(t.padding,(function(t){return t.map(vo.parsePositiveNumber)}))),t.font.px_size=vo.createPropertyCache(t.font.size||Uc.defaults.size,jc.fontPixelSize),t.font.stroke&&null!=t.font.stroke.width&&(t.font.stroke.width=vo.createPropertyCache(t.font.stroke.width,vo.parsePositiveNumber)),t.offset=vo.createPropertyCache(t.offset,(function(t){return Array.isArray(t)&&t.map(vo.parseNumber)})),t.buffer=vo.createPropertyCache(t.buffer,(function(t){return(Array.isArray(t)?t:[t,t]).map(vo.parsePositiveNumber)})),t.repeat_distance=vo.createPropertyCache(t.repeat_distance||$n.tile_size,vo.parsePositiveNumber),t},computeTextLayout:function(t,e,r,n,i,o,a,s,l){var u=t||{};return(u=this.computeLayout(u,e,r,n,i)).repeat_distance&&(s&&(u.repeat_group+="/"+s),u.repeat_group+="/"+o),u.subdiv=i.overzoom2,u.align=r.align,u.italic="normal"!==a.style,"right"===l?u.orientation=1:"left"===l&&(u.orientation=-1),u}},ih=Math.PI/180,oh=function(){function t(e,r){vn(this,t),this._min_zoom=H.util.constants.DEFAULT_MIN_ZOOM_LEVEL,this._max_zoom=H.util.constants.DEFAULT_MAX_ZOOM_LEVEL,this._viewport=e,this._center_offset=[],this._center_offset_normalized=[],this._viewport_aspect_ratio=1,this._focal_length=[[16,2],[17,2.5],[18,3],[19,4],[20,6]],this._view_matrix=new Float64Array(16),this._projection_matrix=new Float64Array(16),this._heading_matrix=new Float64Array(16),this._tilt_matrix=new Float64Array(16),this._transformation_matrix=new Float64Array(16),this._camera_matrix=new Float64Array(16),this._lookAtData={position:[0,0,0],zoom:0,tile_level:0,tetragon:void 0,bounds:void 0,unpadded_bounds:void 0,distance:void 0,tilt:0,incline:0,heading:180},this._zoom_direction=0,this._horizon=0,this.handleViewportUpdate(!0),r?this.setLookAtData(r):this._updateMatrices(),oa.replaceBlock("camera","\n            uniform mat4 u_projection;\n            uniform vec3 u_eye;\n            uniform vec2 u_center_offset;\n\n            void cameraProjection (inout vec4 position) {\n                position = u_projection * position;\n            }")}return bn(t,[{key:"getZoomForBounds",value:function(t,e,r,n){var i,o=this.clone(),a=this._max_zoom,s=this._min_zoom,l=(a-s)/2,u=a-l,c=e,h=Jn.getBBoxCenter(Jn.getBBox(t));for(void 0===c?c=h:(i=h[0]-c[0],Math.abs(i)>$n.half_circumference_meters+1e-8&&(c[0]+=Math.round(i/$n.circumference_meters)*$n.circumference_meters));.001<l;)!function(){o.setLookAtData({zoom:u,position:c,tilt:r,heading:n});var e,i,h,f,p,A=o.getLookAtData().bounds;t.every((function(t){return Jn.isPointInsidePolygon(t,A)}))?s=u:(i=(e=Ln(Jn.getBBox(A),4))[0],h=e[1],f=e[2],p=e[3],f-i+1e-8>=$n.circumference_meters&&p-h+1e-8>=$n.circumference_meters?s=u:a=u),u=a-(l=(a-s)/2)}();return s}},{key:"setZoomConstraints",value:function(t,e){this._min_zoom=t,this._max_zoom=e,this.setLookAtData(this.getLookAtData())}},{key:"setLookAtData",value:function(t,e){var r,n,i,o,a,s=t.position,l=t.zoom;s===r&&t.bounds!==r&&(s=Jn.getBBoxCenter(Jn.getBBox(t.bounds))),l===r&&t.bounds!==r&&(l=this.getZoomForBounds(t.bounds,s,t.tilt,t.heading)),e!==r&&(n=s||this.screenToWorld(e)),l!==r&&(l=Jn.clamp(l,this._min_zoom,this._max_zoom),(i=Bi.zoomToTileLevel(l))!==(o=this._lookAtData.tile_level)&&(this._zoom_direction=o<i?1:-1),this._lookAtData.zoom=l,this._lookAtData.tile_level=i),t.tilt!==r&&(this._lookAtData.tilt=t.tilt),t.heading!==r&&(this._lookAtData.heading=t.heading),e!==r?(this._updateMatrices(),a=this.screenToWorld(e),this._lookAtData.position[0]-=a[0]-n[0],this._lookAtData.position[1]-=a[1]-n[1]):s&&(this._lookAtData.position=s),this._lookAtData.position[2]=0,this._lookAtData.position[1]=Jn.clamp(this._lookAtData.position[1],-$n.half_circumference_meters,$n.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"getZoomDirection",value:function(){return this._zoom_direction}},{key:"resetZoomDirection",value:function(){this._zoom_direction=0}},{key:"getLookAtData",value:function(){return this._lookAtData}},{key:"handleViewportUpdate",value:function(t){var e=0<arguments.length&&void 0!==t&&t,r=this._viewport,n=r.width,i=r.height;this._viewport_aspect_ratio=n/i;var o=this._viewport.center.x-(n/2<<0),a=this._viewport.center.y-(i/2<<0);this._center_offset[0]=o,this._center_offset[1]=a,this._center_offset_normalized[0]=o/n,this._center_offset_normalized[1]=a/-i,e||(this._updateMatrices(),this._updateVisibleBounds())}},{key:"setupMatrices",value:function(t,e){jo(t.model_view32,this._view_matrix,t.model),e.uniform("Matrix4fv","u_modelView",t.model_view32),Ro(t.normal32,t.model_view32),Do(t.inverse_normal32,t.normal32),e.uniform("Matrix3fv","u_normalMatrix",t.normal32),e.uniform("Matrix3fv","u_inverseNormalMatrix",t.inverse_normal32)}},{key:"_updateMatrices",value:function(){var t=this._viewport.height*$n.metersPerPixel(this._lookAtData.zoom),e=Bi.interpolate(this._lookAtData.zoom,this._focal_length);this._lookAtData.distance=t/2*e;var r=this._lookAtData.position[0],n=this._lookAtData.position[1];Vo(this._view_matrix,Fo(r,n,0),Fo(r,n,-1),Fo(0,1,0)),this._heading_matrix=Go(this._heading_matrix);var i=180-this._lookAtData.heading;i*=ih,this._heading_matrix[0]=Math.cos(i),this._heading_matrix[1]=-Math.sin(i),this._heading_matrix[4]=Math.sin(i),this._heading_matrix[5]=Math.cos(i),this._tilt_matrix=Go(this._tilt_matrix),i=0<(i=this._lookAtData.tilt?this._lookAtData.tilt*ih:0)?-i:i,this._tilt_matrix[5]=Math.cos(i),this._tilt_matrix[6]=Math.sin(i),this._tilt_matrix[9]=-Math.sin(i),this._tilt_matrix[10]=Math.cos(i),jo(this._transformation_matrix,this._tilt_matrix,this._heading_matrix),jo(this._view_matrix,this._transformation_matrix,this._view_matrix);var o=2*Math.atan(1/e),a=2*this._lookAtData.distance;this._depth_buffer_adjustment=2/Math.log(a),zo(this._projection_matrix,o,this._viewport_aspect_ratio,1,a),this._projection_matrix[8]=2*-this._center_offset_normalized[0],this._projection_matrix[9]=2*-this._center_offset_normalized[1],Ho(this._projection_matrix,this._projection_matrix,Fo(0,0,-this._lookAtData.distance)),this._camera_matrix=jo(this._camera_matrix,this._projection_matrix,this._view_matrix)}},{key:"_updateVisibleBounds",value:function(){var t,e,r,n,i,o=this._viewport,a=o.width,s=o.height,l=o.padding,u=this._lookAtData.tilt*Math.PI/180;this._horizon=Math.max((l.top+s)/2-Math.cos(u)*(l.top*(1-Math.sin(u))+.75*s),0),this._lookAtData.tetragon=[this.screenToWorld([0,this._horizon]),this.screenToWorld([a,this._horizon]),this.screenToWorld([a,s]),this.screenToWorld([0,s])],this._lookAtData.unpadded_bounds=this._clipAgainstGeoBounds(this._lookAtData.tetragon),0===l.left&&0===l.top&&0===l.right&&0===l.bottom?this._lookAtData.bounds=this._lookAtData.unpadded_bounds:(t=l.left,e=Math.max(this._horizon,l.top),r=a-l.right,n=s-l.bottom,i=[this.screenToWorld([t,e]),this.screenToWorld([r,e]),this.screenToWorld([r,n]),this.screenToWorld([t,n])],this._lookAtData.bounds=this._clipAgainstGeoBounds(i))}},{key:"_clipAgainstGeoBounds",value:function(t){var e,r=Ln(Jn.getBBox(t),4),n=r[0],i=r[1],o=r[2],a=r[3],s=$n.half_circumference_meters,l=[[n-1,+s],[o+1,+s],[o+1,-s],[n-1,-s]],u=Jn.clipPolygon(l,t)[0],c=Ln(Jn.getBBox(u),4);n=c[0],i=c[1],o=c[2],a=c[3],o-n>=$n.circumference_meters&&(u=[[(e=(o-n)/2)-s,a],[e+s,a],[e+s,i],[e-s,i]]);var h=[];return u&&(h=Jn.splitLegs(u,s)),h}},{key:"applyPxOffset",value:function(t){var e=Ln(t,2),r=e[0],n=e[1],i=Math.PI-this._lookAtData.heading*ih,o=$n.metersPerPixel(this._lookAtData.zoom);this._lookAtData.position[0]+=(r*Math.cos(i)+n*Math.sin(i))*o,this._lookAtData.position[1]-=(n*Math.cos(i)-r*Math.sin(i))*o,this._lookAtData.position[1]=Jn.clamp(this._lookAtData.position[1],-$n.half_circumference_meters,$n.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"screenToWorld",value:function(t){var e=Ln(t,2),r=e[0],n=e[1],i=this._viewport,o=i.width,a=i.height;return 0===o||0===a?[0,0]:(r-=o/2,n-=a/2,this._clipCoordsToWorldPlaneCoords([2*(r+o/2)/o-1,1-2*(n+a/2)/a,-1,1]))}},{key:"_clipToScreenCoords",value:function(t){var e=this._viewport,r=e.width,n=e.height;return[(.5*t[0]+.5)*r,n-(.5*t[1]+.5)*n]}},{key:"_isScreenPointInViewPort",value:function(t){var e=this._viewport,r=e.width,n=e.height;return 0<=t[0]&&t[0]<=r&&0<=t[1]&&t[1]<=n}},{key:"worldToScreen",value:function(t,e){var r,n,i,o,a,s,l=1<arguments.length&&void 0!==e&&e;return t[2]||(t[2]=0),l?(r=this._worldToClipCoords(t),a=this._clipToScreenCoords(r)):(n=Math.sign(this._lookAtData.position[0]),i=Math.trunc(this._lookAtData.position[0]/$n.circumference_meters+n/2),t[0]+=$n.circumference_meters*i,o=this._worldToClipCoords(t),s=a=this._clipToScreenCoords(o),this._isScreenPointInViewPort(a)||(o=this._worldToClipCoords([t[0]+$n.circumference_meters,t[1],t[2]]),a=this._clipToScreenCoords(o),this._isScreenPointInViewPort(a)||(o=this._worldToClipCoords([t[0]-$n.circumference_meters,t[1],t[2]]),a=this._clipToScreenCoords(o)),this._isScreenPointInViewPort(a)||(a=s))),a}},{key:"getHorizon",value:function(){return this._horizon}},{key:"_clipCoordsToWorldPlaneCoords",value:function(t){var e=[],r=this._lookAtData.distance,n=this._lookAtData.position,i=[0,0,r,0],o=0,a=r*Math.sin(ih*this._lookAtData.tilt)*Math.cos(ih*this._lookAtData.heading),s=r*Math.sin(ih*this._lookAtData.tilt)*Math.sin(ih*this._lookAtData.heading),l=new Float64Array(16),u=new Float64Array(16);return Ko(l,this._projection_matrix),Yo(e,t,l),e[2]=-1,e[3]=0,Ko(u,this._view_matrix),Yo(e,e,u),Wo(e,e),Yo(i,i,this._transformation_matrix),0!==e[2]&&(o=-i[2]/e[2]),Xo(e,e,o),[n[0]+(e[0]+s),n[1]+(e[1]+a)]}},{key:"_worldToClipCoords",value:function(t){var e=[t[0],t[1],t[2],1];return Yo(e,e,this._view_matrix),Yo(e,e,this._projection_matrix),Xo(e,e,1/e[3]),e}},{key:"setupProgram",value:function(t){t.uniform("Matrix4fv","u_projection",this._projection_matrix),t.uniform("3f","u_eye",[0,0,this._lookAtData.distance]),t.uniform("2fv","u_center_offset",this._center_offset_normalized),t.uniform("1f","u_tilt",this._lookAtData.tilt*ih),t.uniform("1f","u_heading",this._lookAtData.heading*ih),t.uniform("1f","u_near_plane",1),t.uniform("1f","u_depth_buffer_adjustment",this._depth_buffer_adjustment)}},{key:"getTransformationMatrix",value:function(){return this._transformation_matrix}},{key:"getCameraMatrix",value:function(){return this._camera_matrix}},{key:"clone",value:function(){var e=new t(this._viewport,this._lookAtData);return e.setZoomConstraints(this._min_zoom,this._max_zoom),e}},{key:"getViewport",value:function(){return this._viewport}}]),t}();function ah(t){return void 0===t.x?t[0]:t.x}function sh(t){return void 0===t.y?t[1]:t.y}function lh(t,e){return ah(t)-ah(e)}function uh(t,e){return sh(t)-sh(e)}function ch(t){return t.sort(lh)}function hh(t,e){for(var r,n=t[0],i=n,o=0;o<t.length;o+=1)e(r=t[o],n)<0?n=r:0<e(r,i)&&(i=r);return[n,i]}function fh(t,e){return Object.values(e.reduce((function(e,r){var n=r[+t];return e[n]||(e[n]=[]),e[n].push(r),e}),{}))}function ph(t,e,r){var n=+t,i=e[n],o=r[n];if(o<i)return[];var a=[e];if(o<i)return a;for(var s=e[(1+n)%2],l=t?function(t){return a.push([s,t])}:function(t){return a.push([t,s])},u=i+1;u<o;u+=1)l(u);return a.push(r),a}function Ah(t,e){return ph(!1,t,e)}function dh(t,e){return ph(!0,t,e)}function gh(t){var e={},r=[];return t.forEach((function(t){var n=t.key||(Array.isArray(t)?"".concat(t[0],"/").concat(t[1]):"".concat(t.x,"/").concat(t.y));e[n]||(e[n]=!0,r.push(t))})),r}function yh(t){return t.reduce((function(t,e){return t.concat(e)}))}function vh(t,e,r){function n(e){return Object.values($n.metersToExactTileCoords(e,t.tile_level))}var i,o,a,s,l,u,c,h,f;return gh((i=function(t,e){return e<=0?t:gh((r=yh(fh(!1,t).map((function(t){var r=Ln(hh(t,uh),2),n=r[0],i=r[1],o=[n[0],n[1]-e],a=[i[0],i[1]+e];return t.concat(dh(o,n),dh(i,a))}))),yh(fh(!0,r).map((function(t){var r=Ln(hh(t,lh),2),n=r[0],i=r[1],o=[n[0]-e,n[1]],a=[i[0]+e,i[1]];return t.concat(Ah(o,n),Ah(i,a))})))));var r}((s=n(t.tetragon[0]),l=n(t.tetragon[1]),u=n(t.tetragon[3]),c=n(t.tetragon[2]),h=mh(l,s,u),f=mh(u,c,l),gh(h.concat(f))),e),o=t.tile_level,a=r,i.map((function(t){var e=Ln(t,2),r=e[0],n=e[1];return wa.coord($n.wrapTile({x:r,y:n,z:o},{x:!a,y:!0}))}))))}function mh(t,e,r){var n=function(t,e,r){var n=Ln(t,2),i=n[0],o=n[1],a=Ln(e,2),s=a[0],l=a[1],u=Ln(r,2),c=u[0],h=u[1],f=i+(l-o)/(h-o)*(c-i);return[[[i,o]].concat(In(ch([[s,l],[f,l]]))),[].concat(In(ch([[s,l],[f,l]])),[[c,h]])]}.apply(void 0,In([t,e,r].sort(uh))),i=Ln(n,2),o=i[0],a=i[1];return gh(function(t,e,r){var n=Ln(t,2),i=n[0],o=n[1],a=Ln(e,2),s=a[0],l=a[1];return bh(i,s,Ln(r,1)[0],o,l)}.apply(void 0,In(o)).concat(function(t,e,r){var n=Ln(t,2),i=n[0],o=n[1],a=Ln(e,1)[0],s=Ln(r,2);return bh(s[0],i,a,s[1],o)}.apply(void 0,In(a))))}function bh(t,e,r,n,i){var o,a,s,l,u,c,h,f,p,A,d=Math.min(t,e),g=Math.max(t,r),y=Math.min(n,i),v=Math.max(n,i);if(Math.floor(n)===Math.floor(i))return xh(d,g,n);if(v-y<.125)return o=[g,v],s=(a=Ln([d,y],2))[0],l=a[1],c=(u=Ln(o,2))[0],h=u[1],p=_h(f=wh(s,c),l),A=_h(f,h),p.concat(A);function m(t){C=C.concat(xh(S,k,Math.floor(t))),S+=E,k+=B}var b,_,w=.125*((_=v)-(b=y))/(Math.ceil(_)-Math.floor(b)),x=(v-y)/w,E=(e-t)/x,B=(r-t)/x,C=[],S=t,k=t;if(n<i)for(var T=y;T<=v;T+=w)m(T);else for(var N=v;y<=N;N-=w)m(N);return gh(C)}function _h(t,e){return t.map((function(t){return[t,e]}))}function wh(t,e){var r=Math.floor(t),n=Math.floor(e);if(n<r)return[];if(r===n)return[r];for(var i=[],o=r;o<=n;o+=1)i.push(o);return i}function xh(t,e,r){return _h(wh(t,e),r)}var Eh=function(){function t(e,r){vn(this,t),Lo(this),this.scene=e,this.createMatrices(),this.bounds=null,this.center_tile=null,this.panning=!1,this.panning_stop_at=0,this.pan_snap_timer=0,this.user_input_at=0,this.user_input_timeout=50,this.user_input_active=!1,this.size={},this.buffer=0,this.wrap=!1!==r.wrapView,this.preserve_tiles_within_zoom=1,this.lookAtManipulator=new oh(r.viewport),this._viewport=r.viewport,this._offset_buffer=[0,0],this.handleViewportUpdate(!0)}return bn(t,[{key:"update",value:function(){this.pan_snap_timer=(new Date-this.panning_stop_at)/1e3,this.user_input_active=new Date-this.user_input_at<this.user_input_timeout,this.scene.tile_manager.updateTilesVisibilityCounters()}},{key:"handleViewportUpdate",value:function(t){var e=0<arguments.length&&void 0!==t&&t,r=this._viewport,n=r.width,i=r.height;this.size.css={width:n,height:i},this.size.device={width:Math.round(n*Bi.device_pixel_ratio),height:Math.round(i*Bi.device_pixel_ratio)},this.lookAtManipulator.handleViewportUpdate(),e||this.updateBounds()}},{key:"setLookAtData",value:function(e,r){t._setLookAtDataForManipulator(this.lookAtManipulator,e,r),this.updateBounds()}},{key:"getLookAtData",value:function(e){var r=0<arguments.length&&void 0!==e&&e;return t._getLookAtDataFromManipulator(this.lookAtManipulator,r)}},{key:"getBestLookAtData",value:function(e,r,n){var i=2<arguments.length&&void 0!==n&&n,o=this.lookAtManipulator.clone();return t._setLookAtDataForManipulator(o,e,r),t._getLookAtDataFromManipulator(o,i)}},{key:"getTileLevel",value:function(){return this.lookAtManipulator.getLookAtData().tile_level}},{key:"applyPxOffset",value:function(t){var e=this._offset_buffer;e[0]+=t[0],e[1]+=t[1];var r,n,i=Math.abs(e[0]),o=Math.abs(e[1]);(1<=i||1<=o)&&(r=~~e[0],n=~~e[1],this.lookAtManipulator.applyPxOffset([i<1?0:r,o<1?0:n]),1<=i&&(e[0]-=r),1<=o&&(e[1]-=n),this.updateBounds())}},{key:"setPanning",value:function(t){this.panning=t,this.panning||(this.panning_stop_at=+new Date)}},{key:"markUserInput",value:function(){this.user_input_at=+new Date}},{key:"ready",value:function(){return"number"==typeof this.size.css.width&&"number"==typeof this.size.css.height}},{key:"updateBounds",value:function(){var t,e;this.markUserInput(),this.ready()&&(this.center_tile=$n.tileForMeters(this.lookAtManipulator.getLookAtData().position,this.lookAtManipulator.getLookAtData().tile_level),t=this.lookAtManipulator.screenToWorld([0,this.size.css.height]),e=this.lookAtManipulator.screenToWorld([this.size.css.width,0]),this.bounds={sw:{x:t[0],y:t[1]},ne:{x:e[0],y:e[1]}},this.scene.tile_manager.updateTilesForView(!0),this.trigger("move"),this.scene.requestRedraw())}},{key:"getTileGridFlatForBBox",value:function(t,e,r,n,i,o){var a,s=4<arguments.length&&void 0!==i?i:0,l=!(5<arguments.length&&void 0!==o)||o,u=this.lookAtManipulator.getLookAtData().tile_level,c=$n.tileForMeters([e,t],u),h=$n.tileForMeters([n,r],u);c.x-=s,c.y-=s,h.x+=s,h.y+=s,!1===l&&(a=(1<<u)-1,c.x=Math.min(Math.max(0,c.x),a),c.y=Math.min(Math.max(0,c.y),a),h.x=Math.min(Math.max(0,h.x),a),h.y=Math.min(Math.max(0,h.y),a));for(var f=[],p={},A=c.x;A<=h.x;A++)for(var d=c.y;d<=h.y;d++){var g=wa.coord($n.wrapTile({x:A,y:d,z:u},{x:!l,y:!0}));p[g.key]||(p[g.key]=!0,f.push(g))}return f}},{key:"getTileGridFlat",value:function(){return this.getTileGridFlatForBBox(this.bounds.ne.y,this.bounds.sw.x,this.bounds.sw.y,this.bounds.ne.x,this.buffer,this.wrap)}},{key:"getTileGridDistorted",value:function(){return vh(this.lookAtManipulator.getLookAtData(),this.buffer,this.wrap)}},{key:"findVisibleTileCoordinates",value:function(){if(!this.bounds)return[];var t=this.lookAtManipulator.getLookAtData(),e=t.tilt,r=t.heading;return 0===e&&180===r?this.getTileGridFlat():this.getTileGridDistorted()}},{key:"createMatrices",value:function(){this.matrices={},this.matrices.model=new Float64Array(16),this.matrices.model32=new Float32Array(16),this.matrices.model_view=new Float64Array(16),this.matrices.model_view32=new Float32Array(16),this.matrices.normal=new Float64Array(9),this.matrices.normal32=new Float32Array(9),this.matrices.inverse_normal32=new Float32Array(9)}},{key:"setupTile",value:function(t,e){t.setupProgram(this.matrices,e),this.lookAtManipulator.setupMatrices(this.matrices,e)}},{key:"setupProgram",value:function(t){var e=this.lookAtManipulator.getLookAtData();t.uniform("2fv","u_resolution",[this.size.device.width,this.size.device.height]),t.uniform("3fv","u_map_position",[e.position[0],e.position[1],Math.trunc(1e5*e.zoom)/1e5]),t.uniform("1f","u_meters_per_pixel",$n.metersPerPixel(e.zoom)),t.uniform("1f","u_device_pixel_ratio",Bi.device_pixel_ratio),t.uniform("1f","u_view_pan_snap_timer",this.pan_snap_timer),t.uniform("1i","u_view_panning",this.panning),t.uniform("1f","u_horizon",this.lookAtManipulator.getHorizon()/(this.size.css.height/2)),this.lookAtManipulator.setupProgram(t)}},{key:"isAnimating",value:function(){return this.pan_snap_timer<=.5}},{key:"xyToGeo",value:function(t,e){var r=this.lookAtManipulator.screenToWorld([t,e]),n=Ln($n.metersToLatLng(r),2),i=n[0];return{lat:n[1],lng:i}}},{key:"geoToPixel",value:function(t){var e=$n.latLngToMeters([t.lng,t.lat]);e.push(t.alt||0);var r=this.lookAtManipulator.worldToScreen(e);return{x:Math.floor(r[0]),y:Math.floor(r[1])}}},{key:"geoToMeters",value:function(t){var e=Ln($n.latLngToMeters([t.lng,t.lat]),2);return{x:e[0],y:e[1],z:t.alt||0}}},{key:"metersToGeo",value:function(t){var e=Ln($n.metersToLatLng([t.x,t.y]),2),r=e[0];return{lat:e[1],lng:r,alt:t.z||0}}},{key:"setZoomConstraints",value:function(t,e){this.lookAtManipulator.setZoomConstraints(t,e)}}],[{key:"_setLookAtDataForManipulator",value:function(t,e,r){var n=e.position,i=e.zoom,o=e.tilt,a=e.heading,s=e.bounds,l={zoom:i,tilt:o,heading:a};if(n&&"number"==typeof n.lng&&"number"==typeof n.lat&&(l.position=$n.latLngToMeters([n.lng,n.lat])),s){var u=s.getExterior().getLatLngAltArray(),c=u.length/3,h=Array(c);if(s.getBoundingBox().isCDB())for(var f=u[1],p=0,A=0;A<c;A++){var d,g=u[3*A+1];0<A&&(d=g-f,180<Math.abs(d)&&(p+=f<g?-360:360)),f=g,h[A]=$n.latLngToMeters([g+p,u[3*A]])}else for(var y=0;y<c;y++)h[y]=$n.latLngToMeters([u[3*y+1],u[3*y]]);l.bounds=h}t.setLookAtData(l,r)}},{key:"_getLookAtDataFromManipulator",value:function(t,e){var r=1<arguments.length&&void 0!==e&&e,n=t.getLookAtData(),i=n.heading,o=n.incline,a=n.tilt,s=n.zoom,l=n.position,u=n.bounds,c=n.unpadded_bounds,h=Ln($n.metersToLatLng(l),2),f=h[0],p=h[1],A=new H.geo.LineString;return(r?c:u).forEach((function(t){var e=$n.metersToLatLng(t);A.pushLatLngAlt(e[1],e[0],0)})),{heading:i,incline:o,tilt:a,zoom:s,bounds:new H.geo.Polygon(A),position:{lat:p,lng:f,alt:l[2]}}}}]),t}(),Bh=Ic.PLACEMENT,Ch=128/Math.PI,Sh=16384/Math.PI,kh=Object.create(ma);Object.assign(kh,nh),Object.assign(kh,{name:"points",built_in:!0,vertex_shader_src:"uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform bool u_tile_fade_in;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform bool u_view_panning;uniform float u_tilt;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform float u_heading;uniform float u_near_plane;uniform float u_depth_buffer_adjustment;attribute vec4 a_position;attribute vec4 a_shape;attribute vec4 a_color;attribute vec2 a_texcoord;attribute vec2 a_offset;uniform float u_point_type;attribute float a_is_flat;\n#ifdef TANGRAM_IS_TEXT_STYLE\nattribute vec4 a_offsets_alt;attribute vec4 a_pre_angles_alt;attribute vec4 a_angles_alt;attribute vec4 a_offsets;attribute vec4 a_pre_angles;attribute vec4 a_angles;\n#endif\n#ifdef TANGRAM_POINT_DRAW_STICK\nattribute float a_is_stick;attribute float a_stick_height;varying float v_is_stick;\n#endif\nvarying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nattribute float a_outline_edge;attribute vec4 a_outline_color;varying float v_outline_edge;varying vec4 v_outline_color;varying float v_aa_offset;\n#endif\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nvarying float v_label_hidden;\n#endif\n#define PI 3.14159265359\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\nvec2 rotate2D(vec2 _st,float _angle){return mat2(cos(_angle),-sin(_angle),sin(_angle),cos(_angle))*_st;}vec3 rotateX3D(vec3 _st,float _angle){return mat3(1.,0.,0.,0.,cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle))*_st;}vec3 rotateZ3D(vec3 _st,float _angle){return mat3(cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle),0.,0.,0.,1.)*_st;}\n#ifdef TANGRAM_IS_TEXT_STYLE\nfloat mix4linear(float a,float b,float c,float d,float x){return mix(mix(a,b,3.*x),mix(b,mix(c,d,3.*(max(x,.66)-.66)),3.*(clamp(x,.33,.66)-.33)),step(0.33,x));}\n#endif\nvoid main(){\n#pragma tangram: setup\n#ifndef TANGRAM_SHOW_HIDDEN_LABELS\nif(a_shape.w==0.){gl_Position=vec4(0.,0.,0.,1.);return;}\n#else\nif(a_shape.w==0.){v_label_hidden=1.;}else{v_label_hidden=0.;}\n#endif\nv_alpha_factor=1.0;v_color=a_color;v_texcoord=a_texcoord;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nv_outline_color=a_outline_color;v_outline_edge=a_outline_edge;if(u_point_type==TANGRAM_POINT_TYPE_SHADER){v_outline_color=a_outline_color;v_outline_edge=a_outline_edge;float size=abs(a_shape.x/128.);v_texcoord=sign(a_shape.xy)*(size+1.0)/size;size+=2.0;v_aa_offset=2.0/size;}\n#endif\nvec4 position=u_modelView*vec4(a_position.xyz,1.);vec4 shape=vec4(a_shape.xy,0.,0.);vec2 offset=vec2(a_offset.x,-a_offset.y);\n#ifdef TANGRAM_POINT_DRAW_STICK\nv_is_stick=a_is_stick;float scaled_stick_height=(sin(u_tilt+(1.5*PI))+1.0)*a_stick_height;offset.y+=(1.0-a_is_stick)*scaled_stick_height;\n#endif\nfloat zoom=clamp(u_map_position.z-u_tile_origin.z,0.,1.);float theta=a_shape.z/4096.;float heading=u_heading;float delta=(heading-PI);float new_theta=theta-delta;float reversed=abs(new_theta)>PI/2. ? 1. : 0.;if(a_is_flat==1.0){\n#ifdef TANGRAM_IS_TEXT_STYLE\nif(a_offsets[0]!=0.){vec4 angles_scaled;vec4 pre_angles_scaled;vec4 offsets_scaled;if(reversed==1.){offsets_scaled=a_offsets_alt*4.;angles_scaled=(PI/16384.)*a_angles_alt;pre_angles_scaled=(PI/128.)*a_pre_angles_alt;}else{offsets_scaled=a_offsets*4.;angles_scaled=(PI/16384.)*a_angles;pre_angles_scaled=(PI/128.)*a_pre_angles;}float pre_angle=mix4linear(pre_angles_scaled[0],pre_angles_scaled[1],pre_angles_scaled[2],pre_angles_scaled[3],zoom);float angle=mix4linear(angles_scaled[0],angles_scaled[1],angles_scaled[2],angles_scaled[3],zoom);float offset_curve=mix4linear(offsets_scaled[0],offsets_scaled[1],offsets_scaled[2],offsets_scaled[3],zoom);shape.xy=rotate2D(shape.xy,pre_angle+PI*reversed);shape.x+=offset_curve;shape.xy=rotate2D(shape.xy,angle);shape.xy+=rotate2D(offset,theta);}else{shape.xy=rotate2D(shape.xy+offset*256.,theta+(PI*reversed));}\n#else\nshape.xy=rotate2D(shape.xy+offset*256.,theta);\n#endif\nshape.xy/=pow(2.,4.+(u_map_position.z-u_tile_origin.w));shape=u_modelView*shape;position+=shape;}else{shape.xy/=256.;\n#ifdef TANGRAM_POINT_DRAW_STICK\nshape.y*=1.0+(scaled_stick_height-1.0)*a_is_stick;\n#endif\nshape.xy=rotate2D(shape.xy+offset,theta);}\n#ifdef TANGRAM_FADE_IN_RATE\nif(u_tile_fade_in){v_alpha_factor*=clamp(u_visible_time*TANGRAM_FADE_IN_RATE,0.,1.);}\n#endif\n#ifdef TANGRAM_FADE_ON_ZOOM_OUT\nv_alpha_factor*=clamp(1.+TANGRAM_FADE_ON_ZOOM_OUT_RATE*(u_map_position.z-u_tile_origin.z),0.,1.);\n#endif\nv_world_position=u_model*position;v_world_position.xy+=shape.xy*u_meters_per_pixel;v_world_position=wrapWorldPosition(v_world_position);\n#pragma tangram: position\ncameraProjection(position);\n#ifdef TANGRAM_LAYER_ORDER\napplyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);/***Due to the precision loss on depth buffer,we had a z-fighting of translucent points when the distance to the camera was big.*For more information about the problem see: https:*For more information about the fix see: https:*position.z=(2.0*log(position.w/u_near_plane)/log(u_far_plane/u_near_plane)-1.0)*position.w;*/position.z=(log(position.w/u_near_plane)*u_depth_buffer_adjustment-1.0)*position.w;\n#endif\nif(a_is_flat!=1.){position.xy+=shape.xy*position.w*2.*u_device_pixel_ratio/u_resolution;}\n#ifdef TANGRAM_HAS_SHADER_POINTS\nif(u_point_type==TANGRAM_POINT_TYPE_SHADER){position.xy+=sign(shape.xy)*position.w*u_device_pixel_ratio/u_resolution;}\n#endif\nif(!u_view_panning){snapToPixelGrid(position);}gl_Position=position;}",fragment_shader_src:"uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_texture;uniform float u_point_type;uniform bool u_apply_color_blocks;varying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nvarying vec4 v_outline_color;varying float v_outline_edge;varying float v_aa_offset;\n#endif\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nvarying float v_label_hidden;\n#endif\n#ifdef TANGRAM_POINT_DRAW_STICK\nvarying float v_is_stick;\n#endif\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n#ifdef TANGRAM_HAS_SHADER_POINTS\nfloat _tangram_antialias(float l,float R){float low=R-v_aa_offset;float high=R+v_aa_offset;return 1.-smoothstep(low,high,l);}\n#endif\nvoid mixTextureColor(inout vec4 color){\n#ifdef TANGRAM_HAS_SHADER_POINTS\nif(u_point_type==TANGRAM_POINT_TYPE_TEXTURE){color*=texture2D(u_texture,v_texcoord);}else if(u_point_type==TANGRAM_POINT_TYPE_LABEL){color=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);}else if(u_point_type==TANGRAM_POINT_TYPE_SHADER){float outline_edge=v_outline_edge;vec4 outlineColor=v_outline_color;float l=length(v_texcoord);float outer_alpha=_tangram_antialias(l,1.);float fill_alpha=_tangram_antialias(l,1.-v_outline_edge*0.5)*color.a;float stroke_alpha=(outer_alpha-_tangram_antialias(l,1.-v_outline_edge))*outlineColor.a;\n#ifdef TANGRAM_BLEND_ADD\ncolor.a=stroke_alpha+fill_alpha;color.rgb=color.rgb*fill_alpha+outlineColor.rgb*stroke_alpha;\n#else\ncolor.a=stroke_alpha+fill_alpha*(1.-stroke_alpha);color.rgb=mix(color.rgb*fill_alpha,outlineColor.rgb,stroke_alpha)/max(color.a,0.001);\n#endif\n}\n#else\ncolor=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);\n#endif\nif(u_apply_color_blocks){\n#pragma tangram: color\n#pragma tangram: filter\n}color.a*=v_alpha_factor;\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nif(v_label_hidden>0.){color.a*=0.5;color.rgb=vec3(1.,0.,0.);}\n#endif\n#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY) && !defined(TANGRAM_BLEND_ADD)\nif(color.a<TANGRAM_ALPHA_TEST){discard;}\n#endif\n}void main(void){\n#pragma tangram: setup\nvec4 color=v_color;\n#ifdef TANGRAM_POINT_DRAW_STICK\nif(v_is_stick==0.0){mixTextureColor(color);}\n#else\nmixTextureColor(color);\n#endif\ngl_FragColor=color;}",selection:!0,collision:!0,blend:"overlay",init:function(t){var e=0<arguments.length&&void 0!==t?t:{};ma.init.call(this,e),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!0,this.defines.TANGRAM_POINT_TYPE_TEXTURE=1,this.defines.TANGRAM_POINT_TYPE_LABEL=2,this.defines.TANGRAM_POINT_TYPE_SHADER=3,this.defines.TANGRAM_POINT_DRAW_STICK=!!this.stick,this.collision_group_points=this.name+"-points",this.collision_group_text=this.name+"-text",this.reset()},setupDefines:function(){"overlay"!==this.blend&&(this.defines.TANGRAM_LAYER_ORDER=!0),this.defines.TANGRAM_FADE_ON_ZOOM_OUT=!0,this.defines.TANGRAM_FADE_ON_ZOOM_OUT_RATE=2,eu.suppress_label_fade_in||this.suppress_fade?(this.fade_in_time=0,this.defines.TANGRAM_FADE_IN_RATE=null):(this.fade_in_time=.15,this.defines.TANGRAM_FADE_IN_RATE=1/this.fade_in_time),eu.suppress_snap_animation||(this.defines.TANGRAM_VIEW_PAN_SNAP_RATE=2),eu.show_hidden_labels&&(this.defines.TANGRAM_SHOW_HIDDEN_LABELS=!0)},reset:function(){this.queues={},this.resetText(),this.texture_missing_sprites={}},addFeature:function(t,e,r){var n,i,o,a=r.tile,s={};if(s.color=this.parseColor(e.color,r),s.texture=e.texture,s.label_texture=null,s.color||s.texture){if(this.hasSprites(s)){if(!(n=this.parseSprite(s,e,r)))return;s.texcoords=n.texcoords}if(s.size=e.size,s.size){if(s.size=vo.evalCachedPointSizeProperty(e.size,n,r),null==s.size)return void xi({level:"warn",once:!0},"Layer '".concat(e.layers[e.layers.length-1],"': ")+"'size' includes % and/or ratio-based scaling (".concat(JSON.stringify(e.size.value),"); ")+"these can only applied to sprites, but no sprite was specified, skipping features in layer");"number"==typeof s.size&&(s.size=[s.size,s.size])}else s.size=n&&n.css_size||[16,16];e.outline&&(s.outline_width=vo.evalCachedProperty(e.outline.width,r)||vo.defaults.outline.width,s.outline_color=this.parseColor(e.outline.color,r)),s.outline_edge_pct=0,s.outline_width&&s.outline_color&&(i=s.outline_width,s.size[0]+=i,s.size[1]+=i,s.outline_edge_pct=i/Math.min(s.size[0],s.size[1])*2),s.size[0]=Math.min(s.size[0],256),s.size[1]=Math.min(s.size[1],256),s.placement=e.placement,s.placement_min_length_ratio=vo.evalCachedProperty(e.placement_min_length_ratio,r),s.placement===Bh.SPACED&&e.placement_spacing&&(s.placement_spacing=vo.evalCachedProperty(e.placement_spacing,r)),s.angle=vo.evalProperty(e.angle,r)||0,s.elevate_by_altitude=!!e.elevate_by_altitude,s.z=e.z?Jn.clamp(vo.evalCachedDistanceProperty(e.z,r),0,32767):vo.defaults.z,s.flat=e.flat,s.tile_edges=e.tile_edges,this.computeLayout(s,t,e,r,a),e.stick&&!s.flat&&(o=vo.parseNumber(vo.evalProperty(e.stick.height,r)),s.stick={color:this.parseColor(e.stick.color,r)||vo.defaults.color,height:o?Math.max(o,0):0});var l=e.text&&!1!==vo.evalProperty(e.text.visible,r)&&this.parseTextFeature(t,e.text,r,a);Array.isArray(l)&&xi({level:"warn",once:!(l=null)},"Layer '".concat(e.layers[e.layers.length-1],"': ")+"cannot use boundary labels (e.g. 'text_source: { left: ..., right: ... }') for 'text' labels attached to 'points'; "+"provided 'text_source' value was ".concat(JSON.stringify(e.text.text_source))),l&&(l.layout.parent=s,l.layout.priority=e.text.priority?Math.max(l.layout.priority,s.priority+.5):s.priority+.5,l.layout.move_into_tile=!1,So.addStyle(this.collision_group_text,a.id)),this.queueFeature({feature:t,draw:e,context:r,style:s,text_feature:l},a),So.addStyle(this.collision_group_points,a.id)}},hasSprites:function(t){return t.texture&&this.textureManager.textures[t.texture]&&this.textureManager.textures[t.texture].sprites},getSpriteInfo:function(t,e){var r=this.textureManager.textures[t.texture].sprites[e]&&this.textureManager.getSpriteInfo(t.texture,e);return e&&!r?(this.texture_missing_sprites[t.texture]=this.texture_missing_sprites[t.texture]||{},this.texture_missing_sprites[t.texture][e]||(xi("debug","Style: in style '".concat(this.name,"', could not find sprite '").concat(e,"' for texture '").concat(t.texture,"'")),this.texture_missing_sprites[t.texture][e]=!0)):r&&(r.sprite=e),r},parseSprite:function(t,e,r){var n=vo.evalProperty(e.sprite,r);return this.getSpriteInfo(t,n)||this.getSpriteInfo(t,e.sprite_default)},queueFeature:function(t,e){this.tile_data[e.id]&&this.queues[e.id]||this.startData(e),this.queues[e.id]=this.queues[e.id]||[],this.queues[e.id].push(t)},endData:function(t){var e=this;if(t.canceled)return xi("trace","Style ".concat(this.name,": stop tile build because tile was canceled: ").concat(t.key)),Promise.resolve();var r=this.queues[t.id];delete this.queues[t.id];var n=[],i=[];return r.forEach((function(t){for(var r=t.style,o=t.feature,a=o.geometry,s=e.buildLabels(r.size,a,r),l=0;l<s.length;l++){var u,c=s[l],h={feature:o,draw:t.draw,context:t.context,style:r,label:c};i.push(h),t.text_feature&&(u={feature:o,draw:t.text_feature.draw,context:t.context,text:t.text_feature.text,text_settings_key:t.text_feature.text_settings_key,layout:t.text_feature.layout,point_label:c,linked:h},n.push(u),t.draw.text.optional||(h.linked=u))}})),Promise.all([So.collide(i,this.collision_group_points,t.id).then((function(t){t.forEach((function(t){e.feature_style=t.style,e.feature_style.label=t.label,e.feature_style.linked=t.linked,ma.addFeature.call(e,t.feature,t.draw,t.context)}))})),this.collideAndRenderTextLabels(t,this.collision_group_text,n)]).then((function(r){var n=Ln(r,2)[1],i=n.labels,o=n.texts;return i&&o&&i.forEach((function(t){var r=t.text_settings_key,n=o[r]&&o[r][t.text],i=e.feature_style;i.label=t.label,i.linked=t.linked,i.size=n.size.logical_size,i.angle=0,t.label.text_data={text_info:n,text_settings_key:r,text:t.text},i.label_texture=e.textureManager.default,ma.addFeature.call(e,t.feature,t.draw,t.context)})),e.freeText(t),ma.endData.call(e,t)}))},_preprocess:function(t){t.color=vo.createColorPropertyCache(t.color),t.texture=void 0!==t.texture?t.texture:this.texture,t.outline&&(t.outline.color=vo.createColorPropertyCache(t.outline.color),t.outline.width=vo.createPropertyCache(t.outline.width,vo.parsePositiveNumber)),t.z=vo.createPropertyCache(t.z,vo.parseUnits);try{t.size=vo.createPointSizePropertyCache(t.size)}catch(o){return xi({level:"warn",once:!0},"Layer '".concat(t.layers[t.layers.length-1],"': ")+"".concat(o," (").concat(JSON.stringify(t.size),"), skipping features in layer")),null}return t.offset=vo.createPropertyCache(t.offset,(function(t){return Array.isArray(t)&&t.map(vo.parseNumber)})),t.buffer=vo.createPropertyCache(t.buffer,(function(t){return(Array.isArray(t)?t:[t,t]).map(vo.parsePositiveNumber)})),t.repeat_distance=vo.createPropertyCache(t.repeat_distance,vo.parseNumber),null==t.repeat_group&&(t.repeat_group=t.layers.join("-")),t.placement=Bh[t.placement&&t.placement.toUpperCase()],null==t.placement&&(t.placement=Bh.VERTEX),t.placement_spacing=null!=t.placement_spacing?t.placement_spacing:80,t.placement_spacing=vo.createPropertyCache(t.placement_spacing,vo.parsePositiveNumber),t.placement_min_length_ratio=null!=t.placement_min_length_ratio?t.placement_min_length_ratio:1,t.placement_min_length_ratio=vo.createPropertyCache(t.placement_min_length_ratio,vo.parsePositiveNumber),"number"==typeof t.angle?t.angle=t.angle*Math.PI/180:t.angle=t.angle||0,t.text=this.preprocessText(t.text),t.text&&(t.text.variantKey=t.variantKey,t.text.group=t.group,t.text.layers=t.layers,t.text.order=t.order,t.text.repeat_group=t.text.repeat_group||t.repeat_group,t.text.anchor=t.text.anchor||this.default_anchor,t.text.optional="boolean"==typeof t.text.optional&&t.text.optional,t.text.interactive=t.text.interactive||t.interactive),t.stick&&(t.stick.color=vo.createColorPropertyCache(t.stick.color)),t},default_anchor:["bottom","top","right","left"],computeLayout:function(t,e,r,n,i){var o=t||{};o.id=e,o.units_per_pixel=i.units_per_pixel||1,o.collide=!1!==r.collide,o.anchor=r.anchor,o.offset=vo.evalCachedProperty(r.offset,n)||vo.zeroPair,o.buffer=vo.evalCachedProperty(r.buffer,n)||vo.zeroPair,o.repeat_distance=vo.evalCachedProperty(r.repeat_distance,n),o.repeat_distance&&(o.repeat_distance*=o.units_per_pixel,o.repeat_scale=1,"function"==typeof r.repeat_group?o.repeat_group=r.repeat_group(n):o.repeat_group=r.repeat_group);var a=r.priority;return null!=a?"function"==typeof a&&(a=a(n)):a=-1>>>0,o.priority=a,o},buildTextLabels:function(t,e){for(var r=[],n=0;n<e.length;n++){var i=e[n],o=this.texts[t.id][i.text_settings_key][i.text].size.collision_size;i.label=new Ic(i.point_label.position,o,i.point_label.isFlat(),i.layout),r.push(i)}return r},buildLabels:function(t,e,r){var n=!!r.flat,i=[];if("Point"===e.type)i.push(new Ic(e.coordinates,t,n,r));else if("MultiPoint"===e.type)for(var o=e.coordinates,a=0;a<o.length;++a){var s=o[a];i.push(new Ic(s,t,n,r))}else if("LineString"===e.type)for(var l=Oc(e.coordinates,t,n,r),u=0;u<l.length;++u)i.push(l[u]);else if("MultiLineString"===e.type)for(var c=e.coordinates,h=0;h<c.length;h++)for(var f=Oc(c[h],t,n,r),p=0;p<f.length;++p)i.push(f[p]);else if("Polygon"===e.type)if(r.placement===Bh.CENTROID){var A=$n.centroid(e.coordinates);i.push(new Ic(A,t,n,r))}else for(var d=e.coordinates,g=0;g<d.length;g++)for(var y=Oc(d[g],t,n,r),v=0;v<y.length;++v)i.push(y[v]);else if("MultiPolygon"===e.type)if(r.placement===Bh.CENTROID){var m=$n.multiCentroid(e.coordinates);i.push(new Ic(m,t,n,r))}else for(var b=e.coordinates,_=0;_<b.length;_++)for(var w=b[_],x=0;x<w.length;x++)for(var E=Oc(w[x],t,n,r),B=0;B<E.length;++B)i.push(E[B]);return i},makeVertexTemplate:function(t,e){var r,n=t.color||vo.defaults.color,i=e.vertex_data.vertex_layout;return this.fillVertexTemplate(i,"a_position",0,{size:2}),this.fillVertexTemplate(i,"a_position",t.z||0,{size:1,offset:2}),this.fillVertexTemplate(i,"a_position",this.scaleOrder(t.order),{size:1,offset:3}),this.fillVertexTemplate(i,"a_shape",0,{size:4}),this.fillVertexTemplate(i,"a_shape",t.label.layout.collide?0:1,{size:1,offset:3}),this.fillVertexTemplate(i,"a_texcoord",0,{size:2}),this.fillVertexTemplate(i,"a_offset",0,{size:2}),this.fillVertexTemplate(i,"a_color",ha.mult(n,255),{size:4}),this.defines.TANGRAM_HAS_SHADER_POINTS&&e.variant.shader_point&&(r=t.outline_color||vo.defaults.outline.color,this.fillVertexTemplate(i,"a_outline_color",ha.mult(r,255),{size:4}),this.fillVertexTemplate(i,"a_outline_edge",t.outline_edge_pct||vo.defaults.outline.width,{size:1})),this.selection&&this.fillVertexTemplate(i,"a_selection_color",ha.mult(t.selection_color,255),{size:4}),this.fillVertexTemplate(i,"a_is_flat",0,{size:1}),this.defines.TANGRAM_POINT_DRAW_STICK&&t.stick&&(this.fillVertexTemplate(i,"a_is_stick",0,{size:1}),this.fillVertexTemplate(i,"a_stick_height",t.stick.height,{size:1})),this.vertex_template},buildQuad:function(t,e,r,n,i,o,a,s,l,u,c,h,f,p,A,d,g,y,v){return e[0]<=0||e[1]<=0?0:function(t,e,r,n){var i,o,a,s,l,u,c=n.quad,h=n.offset,f=n.offsets,p=n.offsets_alt,A=n.pre_angles,d=n.pre_angles_alt,g=n.angle,y=n.angles,v=n.angles_alt,m=n.is_flat,b=n.elevate_by_altitude,_=n.build_stick_points,w=n.color,x=n.stick_color,E=n.curve,B=n.texcoord_scale,C=n.texcoord_normalize,S=n.pre_angles_normalize,k=n.angles_normalize,T=n.offsets_normalize,N=(N=n.quad_normalize)||1,L=c[0]/2*N,I=c[1]/2*N,M=[[-L,-I],[L,-I],[L,I],[-L,I]],O=e.vertex_elements,P=e.vertex_count,F=e.vertex_layout.index,U=F.a_texcoord,R=F.a_position,D=F.a_shape,j=F.a_offset,H=F.a_offsets,Q=F.a_offsets_alt,z=F.a_pre_angles,V=F.a_pre_angles_alt,G=F.a_angles,q=F.a_angles_alt,K=F.a_is_flat,Y=F.a_is_stick,W=F.a_color;U&&(C=C||1,u=[[o=(i=Ln(B||du,4))[0],a=i[1]],[s=i[2],a],[s,l=i[3]],[o,l]]);for(var X=0,J=t.length,Z=0;Z<J;Z++){var $=t[Z];if(_){for(var tt=.5*N,et=+N,rt=[[-tt,0],[+tt,0],[+tt,et],[-tt,et]],nt=0;nt<4;nt++)U&&(r[U+0]=u[nt][0]*C,r[U+1]=u[nt][1]*C),r[R+0]=$[0],r[R+1]=$[1],b&&(r[R+2]=Jn.clamp($[2],0,32767)),r[D+0]=rt[nt][0],r[D+1]=rt[nt][1],r[D+2]=0,r[W+0]=x[0],r[W+1]=x[1],r[W+2]=x[2],r[W+3]=x[3],r[Y+0]=255,e.addVertex(r);O.push(P+0),O.push(P+1),O.push(P+2),O.push(P+2),O.push(P+3),O.push(P+0),P+=4,X+=2}for(var it=0;it<4;it++)U&&(r[U+0]=u[it][0]*C,r[U+1]=u[it][1]*C),r[R+0]=$[0],r[R+1]=$[1],b&&(r[R+2]=Jn.clamp($[2],0,32767)),r[D+0]=M[it][0],r[D+1]=M[it][1],r[D+2]=g,r[W+0]=w[0],r[W+1]=w[1],r[W+2]=w[2],r[W+3]=w[3],r[j+0]=h[0],r[j+1]=h[1],r[K+0]=m?255:0,_&&(r[Y+0]=0),E&&(r[z+0]=S*A[0],r[z+1]=S*A[1],r[z+2]=S*A[2],r[z+3]=S*A[3],r[G+0]=k*y[0],r[G+1]=k*y[1],r[G+2]=k*y[2],r[G+3]=k*y[3],r[H+0]=T*f[0],r[H+1]=T*f[1],r[H+2]=T*f[2],r[H+3]=T*f[3],p&&(r[Q+0]=T*p[0],r[Q+1]=T*p[1],r[Q+2]=T*p[2],r[Q+3]=T*p[3],r[V+0]=S*d[0],r[V+1]=S*d[1],r[V+2]=S*d[2],r[V+3]=S*d[3],r[q+0]=k*v[0],r[q+1]=k*v[1],r[q+2]=k*v[2],r[q+3]=k*v[3])),e.addVertex(r);O.push(P+0),O.push(P+1),O.push(P+2),O.push(P+2),O.push(P+3),O.push(P+0),P+=4,X+=2}return X}(t,A,d,{quad:e,quad_normalize:256,offset:s,offsets:l,offsets_alt:u,pre_angles:o,pre_angles_alt:a,angle:4096*r,angles:n,angles_alt:i,is_flat:f,elevate_by_altitude:p,build_stick_points:g,stick_color:g&&ha.mult(y,255),color:ha.mult(v||vo.defaults.color,255),curve:h,texcoord_scale:c,texcoord_normalize:65535,pre_angles_normalize:Ch,angles_normalize:Sh,offsets_normalize:64})},build:function(t,e,r){var n=t.label;return"curved"===n.type?this.buildCurvedLabel(n,t,e,r):this.buildStraightLabel(n,t,e,r)},buildStraightLabel:function(t,e,r,n){var i,o=this.makeVertexTemplate(e,r),a=t.angle||e.angle,s="point"!==t.type?(i=e.size[t.type],du):(i=e.size,e.texcoords||du);r.uniforms=r.uniforms||{},e.label_texture?(r.uniforms.u_texture=e.label_texture,r.uniforms.u_point_type=2,r.uniforms.u_apply_color_blocks=!1):(e.texture?(r.uniforms.u_texture=e.texture,r.uniforms.u_point_type=1):(r.uniforms.u_texture=this.textureManager.default,r.uniforms.u_point_type=3),r.uniforms.u_apply_color_blocks=!0);var l=t.offset,u=this.defines.TANGRAM_POINT_DRAW_STICK&&!e.label_texture&&e.stick&&0<e.stick.height,c=this.buildQuad([t.position],i,a,null,null,null,null,l,null,null,s,!1,t.isFlat(),e.elevate_by_altitude,r.vertex_data,o,u,u&&e.stick.color,e.color),h=e.linked&&e.linked.label.id;return this.trackLabel(t,h,r,c,n,u),c},buildCurvedLabel:function(t,e,r,n){for(var i=this.makeVertexTemplate(e,r),o=t.angle,a=0,s=0;s<2;s++)for(var l=0;l<t.num_segments;l++){var u=e.size[t.type][l],c=du,h=this.getTileMesh(n.tile,this.getMeshVariantTypeForDraw(e));h.uniforms=h.uniforms||{},h.uniforms.u_texture=e.label_texture,h.uniforms.u_point_type=2,h.uniforms.u_apply_color_blocks=!1;var f=t.offset||[0,0],p=t.position,A=t.angles[l],d=t.offsets[l],g=t.pre_angles[l],y=t.num_segments-l-1,v=t.alt_angles[y],m=t.alt_pre_angles[y],b=t.alt_offsets[y],_=this.buildQuad([p],u,o,A,v,g,m,f,d,b,c,!0,t.isFlat(),e.elevate_by_altitude,h.vertex_data,i,!1,!1,e.color);a+=_;var w=e.linked&&e.linked.label.id;this.trackLabel(t,w,r,_,n,!1)}return a},trackLabel:function(t,e,r,n,i,o){var a=5<arguments.length&&void 0!==o&&o;r.labels=r.labels||{},r.labels.collision=r.labels.collision||{},r.labels["non-collision"]=r.labels["non-collision"]||{};var s=t.layout.collide?r.labels.collision:r.labels["non-collision"];s[t.id]=s[t.id]||{container:{label:t.text_data?Object.assign(t.toJSON(),{text_data:t.text_data}):t.toJSON(),linked:e},ranges:[]};var l=2*n,u=r.vertex_data.offset-r.vertex_data.stride*l;s[t.id].ranges.push([u,l,a])},buildLines:function(t,e,r,n){return this.build(e,r,n)},buildPoints:function(t,e,r,n){return this.build(e,r,n)},buildPolygons:function(t,e,r,n){return this.build(e,r,n)},vertexLayoutForMeshVariant:function(t){var e;return this.vertex_layout||(e=[{name:"a_position",size:4,type:au.SHORT,normalized:!1},{name:"a_shape",size:4,type:au.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:au.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:au.SHORT,normalized:!1},{name:"a_color",size:4,type:au.UNSIGNED_BYTE,normalized:!0},{name:"a_outline_color",size:4,type:au.UNSIGNED_BYTE,normalized:!0,static:[0,0,0,0]},{name:"a_outline_edge",size:1,type:au.FLOAT,normalized:!1,static:0},{name:"a_selection_color",size:4,type:au.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:au.UNSIGNED_BYTE,normalized:!0}],this.defines&&this.defines.TANGRAM_POINT_DRAW_STICK&&e.push({name:"a_is_stick",size:1,type:au.UNSIGNED_BYTE,normalized:!0},{name:"a_stick_height",size:1,type:au.FLOAT,normalized:!1}),this.vertex_layout=new pu(e),(e=e.map((function(t){return Object.assign({},t)}))).forEach((function(t){"a_outline_color"!==t.name&&"a_outline_edge"!==t.name||(t.static=null)})),this.vertex_layout_shader_point=new pu(e)),t.shader_point?this.vertex_layout_shader_point:this.vertex_layout},computeVariantForDraw:function(t){var e=t.label_texture||t.texture||this.default_mesh_variant.key;return{key:e,shader_point:e===this.default_mesh_variant.key,order:t.label_texture?1:0}},makeMesh:function(t,e,r){var n=2<arguments.length&&void 0!==r?r:{};return n=Object.assign({},n,{fade_in_time:this.fade_in_time}),ma.makeMesh.call(this,t,e,n)}});var Th=[0,.33,.66,.99],Nh=function(t,e,r,n,i){for(var o=[{type:"straight",tolerance:i.no_curving?1.8:1.5},{type:"curved"},{type:"straight",tolerance:2.3}],a=0;a<o.length;a++){var s=o[a],l=void 0;if("straight"===s.type?l=new Ih(e,r,n,i,s.tolerance):"curved"===s.type&&!i.no_curving&&2<r.length&&(l=new Mh(t,r,n,i)),l&&!l.throw_away)return l}return!1},Lh=function(){function t(e,r){vn(this,t),this.id=Ec.nextLabelId(),this.layout=r,this.position=[],this.angle=0,this.offset=r.offset.slice(),this.unit_scale=this.layout.units_per_pixel,this.type="",this.throw_away=!1,this._is_flat=e,this._circles=void 0,this.placed=null}return bn(t,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,angle:this.angle,breach:this.breach,layout:Bc(this.layout),circles:this.getBoundingCircles()}}},{key:"inTileBounds",value:function(){var t=this.getAABB(),e=t.left,r=t.top,n=t.right,i=t.bottom;return Bi.pointInTile([e,r])&&Bi.pointInTile([n,i])}},{key:"getAABBForSegment",value:function(t,e,r,n){var i,o=this.unit_scale,a=e/2,s=r/2,l=Ln(t,2),u=l[0],c=l[1];0===this.offset[0]&&0===this.offset[1]||(u+=(i=ha.rot(this.offset,this.angle))[0]*o,c-=i[1]*o);var h=[[Math.cos(n),-Math.sin(n)],[Math.sin(n),Math.cos(n)]],f=ha.multMatrix(h,[-a,-s]),p=ha.multMatrix(h,[a,-s]),A=ha.multMatrix(h,[a,s]),d=ha.multMatrix(h,[-a,s]);return{left:u+Math.min(f[0],p[0],A[0],d[0]),top:c+Math.max(f[1],p[1],A[1],d[1]),right:u+Math.max(f[0],p[0],A[0],d[0]),bottom:c+Math.min(f[1],p[1],A[1],d[1])}}},{key:"isFlat",value:function(){return this._is_flat}},{key:"getBoundingCircles",value:function(){}},{key:"getAABB",value:function(){}}],[{key:"splitLineByOrientation",value:function(t){for(var e=[t[0]],r=0,n=0,i=0,o=e,a=!1,s=1;s<t.length;s++){var l=t[s],u=t[s-1],c=ha.length(ha.sub(l,u));l[0]>u[0]?1===i?(e.push(l),n<(r+=c)&&(o=e,n=r,a=!1)):(e=[u,l],n<(r=c)&&(o=e,n=r,a=!1),i=1):l[0]<u[0]?-1===i?(e.unshift(l),n<(r+=c)&&(o=e,n=r,a=!0)):(e=[l,u],n<(r=c)&&(o=e,n=r,a=!0),i=-1):(-1===i?e.unshift(l):(e.push(l),i=1),n<(r+=c)&&(o=e,n=r,a=-1===i))}return[o,a]}}]),t}(),Ih=function(){wn(e,Lh);var t=Tn(e);function e(r,n,i,o,a){var s;return vn(this,e),(s=t.call(this,i,o)).type="straight",s.size=r,s.throw_away=!s.fit(r,n,o,a),s}return bn(e,[{key:"fit",value:function(t,e,r,n){var i,o=this.unit_scale,a=Ln(Lh.splitLineByOrientation(e),2);e=a[0],i=a[1],"number"==typeof r.orientation&&(this.offset[1]+=1.2*(t[1]-r.vertical_buffer),i&&(this.offset[1]*=-1),-1===r.orientation&&(this.offset[1]*=-1));for(var s=Ph(e),l=t[0]*o,u=0;u<e.length-1;u++)for(var c=e[u],h=0,f=0,p=u+1,A=void 0;p<e.length;){var d=e[p-1],g=e[p],y=Oh(d,g);if(p!==u+1&&(h+=function(t,e){var r,n;for(n=e<t?(r=e,t):(r=t,e);n-r>Math.PI;)r+=2*Math.PI;return Math.abs(n-r)}(y,A)),.1<Math.abs(h))break;if(l/(f+=s[p-1])<n){var v=ha.mult(ha.add(c,g),.5);return this.angle=-y,Math.abs(this.angle-Math.PI/2)<.01&&(this.angle=-Math.PI/2,"number"==typeof r.orientation&&(this.offset[1]*=-1)),this.position=v,this.breach=!this.inTileBounds(),!0}A=y,p++}return!1}},{key:"getBoundingCircles",value:function(){var t,e,r,n,i,o,a,s,l,u,c,h,f,p;return this._circles||(t=this.unit_scale,i=-(r=(e=this.size[0]/2*t)*Math.cos(this.angle)),o=-(n=e*Math.sin(this.angle)),a=this.offset[0]*t,s=this.offset[1]*t,u=(l=Ln(this.position,2))[0],c=l[1],c*=-1,a&&(h=[r,n],ha.normalize(h),h[0]*=a,h[1]*=a,u+=h[0],c+=h[1]),s&&(f=[n,-r],ha.normalize(f),f[0]*=s,f[1]*=s,u-=f[0],c-=f[1]),r+=u,n+=c,i+=u,o+=c,p=this.size[1]/2*t,this._circles=Lc(r,n,i,o,p)),this._circles}},{key:"getAABB",value:function(){var t,e,r,n,i;return this._aabb||(t=this.unit_scale,e=this.size,r=this.layout.buffer,n=(e[0]+2*r[0])*t,i=(e[1]+2*r[1])*t,this._aabb=this.getAABBForSegment(this.position,n,i,this.angle)),this._aabb}}]),e}(),Mh=function(){wn(e,Lh);var t=Tn(e);function e(r,n,i,o){var a;return vn(this,e),(a=t.call(this,i,o)).type="curved",a.positions=[],a.angles=[],a._aabbs=[],a.pre_angles=[],a.offsets=[],a.num_segments=r.length,a.sizes=r,a.alt_angles=[],a.alt_pre_angles=[],a.alt_offsets=[],a.throw_away=!a.fit(a.sizes,n,o),a}return bn(e,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,breach:this.breach,layout:Bc(this.layout),circles:this.getBoundingCircles()}}},{key:"fit",value:function(t,r,n){var i,o=this.unit_scale,a=Math.max.apply(Math,In(t.map((function(t){return t[1]})))),s=a*o,l=Ln(Lh.splitLineByOrientation(r),2);r=l[0],i=l[1],"number"==typeof n.orientation&&(this.offset[1]+=1.2*(a-n.vertical_buffer),i&&(this.offset[1]*=-1),-1===n.orientation&&(this.offset[1]*=-1));var u=Ph(r),c=t.map((function(t){return t[0]*o})),h=u.reduce((function(t,e){return t+e}),0),f=c.reduce((function(t,e){return t+e}),0);if(h<f)return!1;var p=r.length-1;if(p<2)return!1;var A=e.curvaturePlacement(r,h,u,f,0,p),d=r[A];if(-1===A||p-A<2)return!1;this.position=d;for(var g=0;g<c.length;g++){this.positions[g]=[],this.offsets[g]=[],this.angles[g]=[],this.pre_angles[g]=[];for(var y=0;y<Th.length;y++){var v=Th[y],m=Ln(e.scaleLine(v,r),2),b=m[0],_=m[1],w=(d=b[A],e.placeAtIndex(A,b,_,c)),x=w.positions,E=w.offsets,B=w.angles,C=w.pre_angles,S=E.map((function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])/o}));if(0===v){this.angle=1/B.length*B.reduce((function(t,e){return t+e}));for(var k=0;k<x.length;k++){var T=x[k],N=C[k],L=c[k],I=N+B[k];this._aabbs.push(this.getAABBForSegment(T,L,s,I))}}this.positions[g].push(x[g]),this.offsets[g].push(S[g]),this.angles[g].push(B[g]),this.pre_angles[g].push(C[g])}}c=t.slice().reverse().map((function(t){return t[0]*o}));for(var M=0;M<c.length;M++){this.alt_offsets[M]=[],this.alt_angles[M]=[],this.alt_pre_angles[M]=[];for(var O=0;O<Th.length;O++){var P=Th[O],F=Ln(e.scaleLine(P,r),2),U=F[0],R=F[1];d=U[A];var D=e.placeAtIndex(A,U,R,c),j=D.offsets,H=D.angles,Q=D.pre_angles,z=j.map((function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])/o}));0===P&&(this.alt_angle=1/H.length*H.reduce((function(t,e){return t+e}))),this.alt_offsets[M].push(z[M]),this.alt_angles[M].push(H[M]),this.alt_pre_angles[M].push(Q[M])}}return!0}},{key:"getBoundingCircles",value:function(){if(!this._circles){for(var t=[],e=this.unit_scale,r=0;r<this.positions.length;r++){var n=this.sizes[r],i=this.angles[r][0],o=this.positions[r][0],a=n[0]/2*e,s=a*Math.cos(i),l=a*Math.sin(i),u=-s,c=-l,h=Ln(o,2),f=h[0],p=h[1],A=Lc(s+=f,l+=p*=-1,u+=f,c+=p,n[1]/2*e);Array.prototype.push.apply(t,A)}this._circles=t}return this._circles}},{key:"getAABB",value:function(){if(!this._aabb){for(var t=1/0,e=-1/0,r=-1/0,n=1/0,i=0;i<this._aabbs.length;i++){var o=this._aabbs[i];t=Math.min(t,o.left),e=Math.max(e,o.top),r=Math.max(r,o.right),n=Math.min(n,o.bottom)}this._aabb={left:t,top:e,right:r,bottom:n}}return this._aabb}}],[{key:"curvaturePlacement",value:function(t,e,r,n,i,o){i=i||0,o=o||t.length-1;for(var a=[],s=i+1;s<o;s++){var l=t[s-1],u=t[s],c=t[s+1],h=ha.perp(u,l),f=ha.perp(c,u),p=ha.angleBetween(h,f);1<p&&(p=1/0),a.push(p)}a.push(1/0);for(var A=[],d=[],g=i,y=0,v=0;v<i;v++)y+=r[v];for(;y+n<e;){for(var m=y+n,b=y,_=g,w=0;_<o&&b+r[_]<m&&(w+=a[_])!==1/0;)b+=r[_],_++;if(0===w)return g;var x=w/(_-g);A.push(w),d.push(x),y+=r[g],g++}if(0===A.length)return-1;var E=Math.min.apply(null,A),B=d[A.indexOf(E)];return E<1.3&&B<.4?A.indexOf(E):-1}},{key:"scaleLine",value:function(t,e){var r=[e[0]],n=[];return e.forEach((function(i,o){var a,s;o!==e.length-1&&(a=ha.sub(e[o+1],e[o]),s=ha.mult(a,1+t),r.push(ha.add(r[o],s)),n.push(ha.length(s)))})),[r,n]}},{key:"placeAtIndex",value:function(t,r,n,i){var o=r[t],a=Ln(e.getIndicesAndOffsets(t,n,i),2),s=a[0],l=a[1],u=e.getPositionsFromIndicesAndOffsets(r,s,l),c=Ln(e.getAnglesFromIndicesAndOffsets(o,s,r,u),3);return{positions:u,offsets:c[0],angles:c[1],pre_angles:c[2]}}},{key:"getIndicesAndOffsets",value:function(t,e,r){for(var n=r.length,i=[],o=[],a=0,s=0,l=0;a<n;){for(var u=r[a];a<n&&s+.5*u<=l+e[t];){var c=s-l+.5*u;o.push(c),i.push(t),s+=u,u=r[++a]}l+=e[t],t++}return[i,o]}},{key:"getPositionsFromIndicesAndOffsets",value:function(t,e,r){for(var n=[],i=0;i<e.length;i++){var o=e[i],a=r[i],s=Oh(t[o],t[o+1]),l=ha.rot([a,0],s),u=ha.add(t[o],l);n.push(u)}return n}},{key:"getAnglesFromIndicesAndOffsets",value:function(t,e,r,n){for(var i=[],o=[],a=[],s=0;s<n.length;s++){var l,u,c=n[s],h=e[s],f=ha.sub(c,t),p=-ha.angle(f),A=-Oh(r[h],r[h+1])-p;0<s&&(l=i[s-1],u=o[s-1],Math.abs(p-l)>Math.PI&&(p+=l<p?-2*Math.PI:2*Math.PI),Math.abs(u-A)>Math.PI&&(A+=u<A?-2*Math.PI:2*Math.PI)),i.push(p),o.push(A),a.push(f)}return[a,i,o]}}]),e}();function Oh(t,e){var r=ha.sub(e,t);return ha.angle(r)}function Ph(t){for(var e=[],r=0;r<t.length-1;r++){var n=t[r],i=t[r+1],o=Math.hypot(n[0]-i[0],n[1]-i[1]);e.push(o)}return e}var Fh=Object.create(kh);Object.assign(Fh,{name:"text",super:kh,built_in:!0,init:function(t){var e=0<arguments.length&&void 0!==t?t:{};ma.init.call(this,e),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!1,this.defines.TANGRAM_IS_TEXT_STYLE=!0,this.reset()},makeVertexTemplate:function(t,e){this.super.makeVertexTemplate.apply(this,arguments);var r=e.vertex_data.vertex_layout;return this.fillVertexTemplate(r,"a_pre_angles",0,{size:4}),this.fillVertexTemplate(r,"a_offsets",0,{size:4}),this.fillVertexTemplate(r,"a_angles",0,{size:4}),this.fillVertexTemplate(r,"a_offsets_alt",0,{size:4}),this.fillVertexTemplate(r,"a_pre_angles_alt",0,{size:4}),this.fillVertexTemplate(r,"a_angles_alt",0,{size:4}),this.vertex_template},reset:function(){this.queues={},this.resetText()},addFeature:function(t,e,r){var n=this,i=r.tile,o=t.geometry.type;e.can_articulate="LineString"===o||"MultiLineString"===o,e.supersample_text="LineString"===o||"MultiLineString"===o;var a=this.parseTextFeature(t,e,r,i);a&&(a instanceof Array?a.forEach((function(e){e.feature=t,e.context=r,e.layout.vertex=!1,n.queueFeature(e,i)})):(a.feature=t,a.context=r,a.layout.vertex=!1,this.queueFeature(a,i)),So.addStyle(this.name,i.id))},endData:function(t){var e=this,r=this.queues[t.id];return delete this.queues[t.id],this.collideAndRenderTextLabels(t,this.name,r).then((function(r){var n=r.labels,i=r.texts;return n&&i&&(e.texts[t.id]=i,n.forEach((function(r){var n=r.text_settings_key,i=e.texts[t.id][n]&&e.texts[t.id][n][r.text],o=e.feature_style;o.label=r.label,r.label.text_data={text_info:i,text_settings_key:n,text:r.text},o.label_texture=e.textureManager.default,i.text_settings.can_articulate?(o.size={},"straight"===r.label.type?o.size.straight=i.size.logical_size:o.size.curved=i.segment_sizes.map((function(t){return t.logical_size}))):o.size=i.size.logical_size,ma.addFeature.call(e,r.feature,r.draw,r.context)}))),e.freeText(t),ma.endData.call(e,t).then((function(r){if(r){for(var n in r.meshes)r.meshes[n].uniforms.u_apply_color_blocks=!0;t.mesh_data[e.name]=r}return r}))}))},_preprocess:function(t){return this.preprocessText(t)},buildTextLabels:function(t,e){for(var r=[],n=0;n<e.length;n++){var i,o,a=e[n],s=this.texts[t.id][a.text_settings_key][a.text];a.layout.vertical_buffer=s.vertical_buffer,o=s.text_settings.can_articulate?(i=s.segment_sizes.map((function(t){return t.collision_size})),a.layout.no_curving=s.no_curving,this.buildLabels(i,a.feature.geometry,a.layout,s.size.collision_size)):this.buildLabels(s.size.collision_size,a.feature.geometry,a.layout);for(var l=0;l<o.length;l++){var u=Object.create(a);u.label=o[l],r.push(u)}}return r},buildLabels:function(t,e,r,n){var i,o,a="Point"!==e.type,s=[];if("LineString"===e.type)Array.prototype.push.apply(s,this.buildLineLabels(e.coordinates,t,a,r,n));else if("MultiLineString"===e.type)for(var l=e.coordinates,u=0;u<l.length;++u)Array.prototype.push.apply(s,this.buildLineLabels(l[u],t,a,r,n));else if("Point"===e.type)s.push(new Ic(e.coordinates,t,a,r));else if("MultiPoint"===e.type)for(var c=e.coordinates,h=0;h<c.length;++h)s.push(new Ic(c[h],t,a,r));else"Polygon"===e.type?(i=$n.centroid(e.coordinates),s.push(new Ic(i,t,a,r))):"MultiPolygon"===e.type&&(o=$n.multiCentroid(e.coordinates),s.push(new Ic(o,t,a,r)));return s},buildLineLabels:function(t,e,r,n,i){var o,a=[],s=Math.min(n.subdiv,t.length-1);if(1<s)for(var l=(t.length-1)/s,u=0;u<s;u++){var c=Math.floor(u*l),h=Math.floor((u+1)*l)+1,f=t.slice(c,h),p=Nh(e,i,f,r,n);p&&a.push(p)}return a.length<s&&(o=Nh(e,i,t,r,n))&&a.push(o),a},vertexLayoutForMeshVariant:function(){var t;return this.vertex_layout||(t=[{name:"a_position",size:4,type:au.SHORT,normalized:!1},{name:"a_shape",size:4,type:au.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:au.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:au.SHORT,normalized:!1},{name:"a_color",size:4,type:au.UNSIGNED_BYTE,normalized:!0},{name:"a_angles",size:4,type:au.SHORT,normalized:!1},{name:"a_offsets",size:4,type:au.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles",size:4,type:au.BYTE,normalized:!1},{name:"a_selection_color",size:4,type:au.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:au.UNSIGNED_BYTE,normalized:!0},{name:"a_offsets_alt",size:4,type:au.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles_alt",size:4,type:au.BYTE,normalized:!1},{name:"a_angles_alt",size:4,type:au.SHORT,normalized:!1}],this.vertex_layout=new pu(t)),this.vertex_layout},getMeshVariantTypeForDraw:kh.getMeshVariantTypeForDraw}),Fh.texture_id=0;var Uh=Object.create(Du);Object.assign(Uh,{name:"raster",super:Du,built_in:!0,init:function(){this.raster=this.raster||"color",this.super.init.apply(this,arguments),this.selection=!1,this.defines.SNAP_TO_PIXEL_GRID=!0},_preprocess:function(t){return t.color=t.color||vo.defaults.color,this.super._preprocess.apply(this,arguments)}});var Rh=Object.create(kh);Object.assign(Rh,{name:"custom_icons",collision:!1,init:function(t){var e=0<arguments.length&&void 0!==t?t:{};kh.init.call(this,e)},loadTexture:function(t,e,r){var n,i=t.width,o=t.height,a=t.items,s=document.createElement("canvas"),l=Bi.device_pixel_ratio,u=this.sources[e],c={sprites:{}};if(s.width=i*l,s.height=o*l,u){var h,f=a.length,p=s.getContext("2d");for(p.scale(l,l);h=a[--f];){var A,d=u.getIconBitmapByObjectId(h.meta.objectId,h.meta.id);d&&((A=Dl(d))?xi("error",A):(p.drawImage(d,h.x,h.y,h.width,h.height),c.sprites[h.meta.id]=[h.x,h.y,h.width,h.height]))}}return c.element=s,(n=this.textureManager.create(this.gl,r,c)).retain(),n.loading.then((function(t){return t.name}))},buildRasterTextures:function(t,e){return ui.postMessage(this.main_thread_target+".loadTexture",t.rasters,t.source,t.texture_name).then((function(t){return e.textures.push(t),e}))},addFeature:function(t,e,r){var n=r.tile.rasters,i={};n.items.forEach((function(t){i[t.meta.id]=[t.x,t.y,t.width,t.height]}));var o="".concat(r.tile.source,"_dyn_").concat(r.tile.coords.key,"_").concat(this.generation,"_").concat(r.tile.id);e.texture=r.tile.texture_name=o;var a=Object.assign({},Dh,{name:o,width:n.width,height:n.height,sprites:i,manager:this.textureManager});No.prototype.calculateSprites.apply(a),this.textureManager.textures[o]=a,kh.addFeature.apply(this,arguments),delete this.textureManager.textures[o]}});var Dh={filtering:"linear",density:1,valid:!0,power_of_2:!1,texcoords:{},sizes:{},css_sizes:{},aspects:{}},jh=Object.create(Du);Object.assign(jh,{name:"overlays",super:Du,init:function(t){var e=0<arguments.length&&void 0!==t?t:{};this.selection=e.selection||!0,this.raster=this.raster||"color",this.super.init.apply(this,arguments)},setupRasters:function(){if(!li.is_main)return!1;if(this.super.setupRasters.call(this))return!0;var t=!1;for(var e in this.sources)if(this.sources[e]instanceof zl){t=!0;break}return!!t&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",va,"Raster"),!0)},loadTextures:function(t,e){var r,n,i,o=this.sources[e],a=t.name;if(t.overlays_config.forEach((function(e){var a,s=e.texcoords,l=e.id,u=o.getMapObjectById(l),c=u.getBitmap();c&&((a=Dl(c=jl(c,c.width,c.height)))?xi("error",a):(r||((r=document.createElement("canvas")).width=t.width,r.height=t.height,n=r.getContext("2d")),n.save(),n.globalAlpha=u.getOpacity(),s.forEach((function(t){return n.drawImage(c,t[0],t[1],t[2],t[3])})),n.restore(),i=!0))})),i){t.element=r;var s={};return s[a]=t,this.super.loadTextures.call(this,s)}var l=this.textureManager.textures[this.textureManager.default];return Promise.resolve([{name:l.name,width:l.width,height:l.height,loaded:l.loaded}])},buildRasterTextures:function(t,e){var r=this.sources[t.source].tileTexture(t);return r?ui.postMessage(this.main_thread_target+".loadTextures",r,t.source).then((function(t){if(!t||t.length<1)return e;if(t.some((function(t){return!t.loaded})))return null;var r=t[0].name;return e.uniforms=e.uniforms||{},e.textures=e.textures||[],e.uniforms.u_raster=r,e.uniforms.u_raster_offset=[0,0,1],e.textures.push(r),e})):Promise.resolve(e)}});var Hh=Object.create(ma),Qh=[-1,0,1,0,-1,1,-1,1,1,0,1,1,-1,0,1,0,-1,1,-1,1,1,0,1,1];Object.assign(Hh,{name:"skybox",built_in:!0,vertex_shader_src:"uniform float u_horizon;uniform float u_tilt;uniform float u_zoom;attribute vec2 a_position;attribute float a_is_sky;attribute float a_is_top;attribute vec4 a_color;varying vec4 v_color;const float SIN_THRESHOLD_ANGLE=0.96126069082;void main(){v_color=a_color;float sin_tilt=sin(u_tilt);float sky_bottom_alpha=1.-max(sin_tilt-SIN_THRESHOLD_ANGLE,0.)*3.;if((a_position.y==1.&&a_is_sky==0.)||(a_position.y==0.&&a_is_sky==1.)){v_color.w=sky_bottom_alpha;}float fog_height=max((22.-u_zoom)*0.04,0.)*(sin_tilt-.7);float position_z=u_zoom<17. ? .942 : .9418;gl_Position=vec4(a_position.x,a_is_sky*(a_position.y+a_is_top)+1.0-u_horizon-(1.0-a_is_sky)*(1.0-a_position.y)*fog_height,position_z,1.0);}",fragment_shader_src:"varying vec4 v_color;void main(void){gl_FragColor=v_color;}",selection:!1,blend:"inlay",blend_order:1,init:function(){ma.init.apply(this,arguments),this.selection=!1},_preprocess:function(t){return t.color={top:vo.createColorPropertyCache(t.color.zenith),bottom:vo.createColorPropertyCache(t.color.horizon),fog:vo.createColorPropertyCache(t.color.fog)},t},vertexLayoutForMeshVariant:function(){var t;return this.vertex_layout||(t=[{name:"a_position",size:2,type:au.FLOAT,normalized:!1},{name:"a_is_sky",size:1,type:au.FLOAT,normalized:!0},{name:"a_color",size:4,type:au.UNSIGNED_BYTE,normalized:!0},{name:"a_is_top",size:1,type:au.FLOAT,normalized:!0}],this.vertex_layout=new pu(t)),this.vertex_layout},makeVertexTemplate:function(){var t=0;return this.vertex_template[t++]=0,this.vertex_template[1]=0,this.vertex_template},parseFeature:function(t,e,r){var n=this.feature_style;return e.color&&e.color.top&&e.color.bottom&&(n.color_top=this.parseColor(e.color.top,r),n.color_bottom=this.parseColor(e.color.bottom,r),n.color_fog=this.parseColor(e.color.fog||"white",r),Array.isArray(n.color_fog)&&(n.color_fog=n.color_fog.slice(),n.color_fog[3]=0)),n},buildGeometry:function(t,e,r){for(var n=this.makeVertexTemplate(e),i=r.vertex_data,o=r.vertex_data.vertex_layout,a=i.vertex_layout.index.a_position,s={top:e.color_top,bottom:e.color_bottom},l={top:e.color_bottom,bottom:e.color_fog},u=0,c=Qh.length-1;u<c;u+=2){n[a+0]=Qh[u],n[a+1]=Qh[u+1];var h=u<12,f=0<Qh[u+1],p=h?s:l;this.fillVertexTemplate(o,"a_is_sky",h?1:0,{size:1}),this.fillVertexTemplate(o,"a_is_top",f?1:0,{size:1}),this.fillVertexTemplate(o,"a_color",ha.mult(f?p.top:p.bottom,255),{size:4}),i.addVertex(n)}return 4}});var zh=function(){function t(){vn(this,t),this.styles={},this.base_styles={},this.register(Object.create(Du)),this.register(Object.create(uc)),this.register(Object.create(gc)),this.register(Object.create(kh)),this.register(Object.create(Fh)),this.register(Object.create(Uh)),this.register(Object.create(Rh)),this.register(Object.create(jh)),this.register(Object.create(Hh))}return bn(t,[{key:"init",value:function(){oa.removeBlock("global"),oa.removeBlock("setup"),oa.addBlock("global","#ifdef TANGRAM_VERTEX_SHADER\nvec4 modelPosition(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE*exp2(u_tile_origin.z-u_tile_origin.w),1.)+vec4(0.,1.,0.,0.);}vec4 modelPositionBaseZoom(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE,1.)+vec4(0.,1.,0.,0.);}\n#endif\nvec4 worldPosition(){return v_world_position;}\n#ifdef TANGRAM_VERTEX_SHADER\nvec4 wrapWorldPosition(vec4 world_position){\n#if defined(TANGRAM_WORLD_POSITION_WRAP)\nvec2 anchor=u_tile_origin.xy-mod(u_tile_origin.xy,TANGRAM_WORLD_POSITION_WRAP);world_position.xy-=anchor;\n#endif\nreturn world_position;}\n#endif\n#if defined(TANGRAM_VERTEX_SHADER)\nvec3 worldNormal(){return TANGRAM_NORMAL;}\n#elif defined(TANGRAM_FRAGMENT_SHADER)\nvec3 worldNormal(){return u_inverseNormalMatrix*TANGRAM_NORMAL;}\n#endif\n"),oa.addBlock("global","void applyLayerOrder(float layer,inout vec4 position){position.z-=layer*TANGRAM_LAYER_DELTA*position.w;}"),oa.addBlock("global","\n#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)\nattribute vec4 a_selection_color;varying vec4 v_selection_color;uniform vec4 u_selection_discard0;uniform vec4 u_selection_discard1;uniform vec4 u_selection_discard2;uniform vec4 u_selection_discard3;uniform vec4 u_selection_discard4;uniform vec4 u_selection_discard5;uniform vec4 u_selection_discard6;uniform vec4 u_selection_discard7;uniform vec4 u_selection_discard8;uniform vec4 u_selection_discard9;\n#endif\n"),oa.addBlock("global","uniform float u_view_pan_snap_timer;void snapToPixelGrid(inout vec4 position){vec2 position_fract=fract((((position.xy/position.w)+1.)*.5)*u_resolution);vec2 position_snap=position.xy+((step(0.5,position_fract)-position_fract)*position.w*2./u_resolution);\n#ifdef TANGRAM_VIEW_PAN_SNAP_RATE\nposition.xy=mix(position.xy,position_snap,clamp(u_view_pan_snap_timer*TANGRAM_VIEW_PAN_SNAP_RATE,0.,1.));\n#else\nposition.xy=position_snap;\n#endif\n}"),oa.replaceBlock("utils","#ifndef UTILS\n#define UTILS\nbool isLocalSpacePixelOutsideTile(vec4 pixel_local_space_position,float tile_scale){return pixel_local_space_position.x<0.||pixel_local_space_position.x>=tile_scale||pixel_local_space_position.y>0.||pixel_local_space_position.y<=-tile_scale;}\n#endif\n"),oa.replaceBlock("setup","\n#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)\nif(a_selection_color.rgb==vec3(0.)||a_selection_color==u_selection_discard0||a_selection_color==u_selection_discard1||a_selection_color==u_selection_discard2||a_selection_color==u_selection_discard3||a_selection_color==u_selection_discard4||a_selection_color==u_selection_discard5||a_selection_color==u_selection_discard6||a_selection_color==u_selection_discard7||a_selection_color==u_selection_discard8||a_selection_color==u_selection_discard9){gl_Position=vec4(0.,0.,0.,1.);return;}v_selection_color=a_selection_color;\n#endif\n"),oa.defines.TANGRAM_EPSILON=1e-5,oa.defines.TANGRAM_LAYER_DELTA=1/16384,oa.defines.TANGRAM_TILE_SCALE="vec3(".concat($n.tile_scale,"., ").concat($n.tile_scale,"., u_meters_per_pixel * ").concat($n.tile_size,".)"),oa.defines.TANGRAM_HEIGHT_SCALE=$n.height_scale,oa.defines.TANGRAM_ALPHA_TEST=.1,uc.dash_textures={}}},{key:"destroy",value:function(t){var e=this;Object.keys(this.styles).forEach((function(r){var n=e.styles[r];n.gl===t&&(xi("trace","StyleManager.destroy: destroying render style ".concat(n.name)),n.base&&e.remove(n.name),n.destroy())}))}},{key:"register",value:function(t){this.styles[t.name]=t,this.base_styles[t.name]=t}},{key:"remove",value:function(t){delete this.styles[t]}},{key:"mix",value:function(t,e){if(t.mixed)return t;t.mixed={};var r=[];t.mix&&(Array.isArray(t.mix)?r.push.apply(r,In(t.mix)):r.push(t.mix),(r=r.map((function(t){return e[t]})).filter((function(e){return e&&e!==t}))).forEach((function(e){return t.mixed[e.name]=!0}))),r.push(t),t.animated=r.some((function(t){return t&&t.animated})),t.texcoords=r.some((function(t){return t&&t.texcoords})),t.base=r.map((function(t){return t.base})).filter((function(t){return t})).pop(),t.lighting=r.map((function(t){return t.lighting})).filter((function(t){return null!=t})).pop(),t.texture=r.map((function(t){return t.texture})).filter((function(t){return t})).pop(),t.raster=r.map((function(t){return t.raster})).filter((function(t){return null!=t})).pop(),t.dash=r.map((function(t){return t.dash})).filter((function(t){return null!=t})).pop(),t.dash_background_color=r.map((function(t){return t.dash_background_color})).filter((function(t){return null!=t})).pop(),r.some((function(t){return t.hasOwnProperty("blend")&&t.blend}))&&(t.blend=r.map((function(t){return t.hasOwnProperty("blend")&&t.blend})).filter((function(t){return t})).pop()),t.blend_order=r.map((function(t){return t.blend_order})).filter((function(t){return null!=t})).pop(),t.defines=Object.assign.apply(Object,[{}].concat(In(r.map((function(t){return t.defines})).filter((function(t){return t}))))),t.material=Object.assign.apply(Object,[{}].concat(In(r.map((function(t){return t.material})).filter((function(t){return t})))));var n=r.map((function(t){return t.draw})).filter((function(t){return t}));return 0<n.length&&(t.draw=ya.apply(void 0,[{}].concat(In(n)))),this.mixShaders(t,e,r),t}},{key:"mixShaders",value:function(t,e,r){var n={},i=r.map((function(t){return t.shaders})).filter((function(t){return t}));if(n.defines=Object.assign.apply(Object,[{}].concat(In(i.map((function(t){return t.defines})).filter((function(t){return t}))))),n.uniforms={},n._uniforms=t.shaders&&t.shaders.uniforms||{},n._uniform_scopes={},r.filter((function(t){return t.shaders&&t.shaders.uniforms})).forEach((function(t){for(var r in t.shaders.uniforms)!function(r){n._uniform_scopes[r]=t.name,Object.defineProperty(n.uniforms,r,{enumerable:!0,configurable:!0,get:function(){return void 0!==n._uniforms[r]?n._uniforms[r]:e[n._uniform_scopes[r]].shaders.uniforms!==n.uniforms?e[n._uniform_scopes[r]].shaders.uniforms[r]:void 0},set:function(t){n._uniforms[r]=t}})}(r)})),n.extensions=Object.keys(i.map((function(t){return t.extensions})).filter((function(t){return t})).reduce((function(t,e){return"string"==typeof e?t[e]=!0:e.forEach((function(e){return t[e]=!0})),t}),{})||{}),t.shaders&&t.shaders.blocks)for(var o in t.shaders.block_scopes=t.shaders.block_scopes||{},t.shaders.blocks){var a,s=t.shaders.blocks[o];t.shaders.block_scopes[o]=t.shaders.block_scopes[o]||[],Array.isArray(s)?(a=t.shaders.block_scopes[o]).push.apply(a,In(s.map((function(){return t.name})))):t.shaders.block_scopes[o].push(t.name)}var l={};return i.forEach((function(t){if(t.blocks){n.blocks=n.blocks||{},n.block_scopes=n.block_scopes||{};var e={};for(var r in t.blocks){var i=t.blocks[r],o=t.block_scopes[r];n.blocks[r]=n.blocks[r]||[],n.block_scopes[r]=n.block_scopes[r]||[],i=Array.isArray(i)?i:[i],o=Array.isArray(o)?o:[o];for(var a=0;a<i.length;a++)l[o[a]]||(e[o[a]]=!0,n.blocks[r].push(i[a]),n.block_scopes[r].push(o[a]))}Object.assign(l,e)}})),Object.assign(t.mixed,l),t.shaders=n,t}},{key:"create",value:function(t,e,r){var n=2<arguments.length&&void 0!==r?r:{},i=ya({},e);return i.name=t,(i=this.mix(i,n)).base&&this.base_styles[i.base]?this.styles[t]=i=Object.assign(Object.create(this.base_styles[i.base]),i):i.base=null,i}},{key:"build",value:function(t){var e=this,r=Object.keys(t).sort((function(r,n){return e.inheritanceDepth(r,t)-e.inheritanceDepth(n,t)}));for(var n in this.styles)this.base_styles[n]?this.styles[n].reset():delete this.styles[n];var i={};return r.forEach((function(r){i[r]=e.create(r,t[r],i)})),this.styles}},{key:"initStyles",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};for(var r in this.styles)this.styles[r].init(e)}},{key:"inheritanceDepth",value:function(t,e){for(var r=this,n=0;;){var i=e[t];if(!i)break;if(!i.mix)break;if(n++,Array.isArray(i.mix)){n+=Math.max.apply(Math,In(i.mix.map((function(n){if(t!==n)return r.inheritanceDepth(n,e)}))));break}if(t===i.mix)break;t=i.mix}return n}}]),t}();function Vh(t){return null==t}var Gh={isNothing:Vh,isObject:function(t){return"object"==typeof t&&null!==t},toArray:function(t){return Array.isArray(t)?t:Vh(t)?[]:[t]},repeat:function(t,e){for(var r="",n=0;n<e;n+=1)r+=t;return r},isNegativeZero:function(t){return 0===t&&Number.NEGATIVE_INFINITY===1/t},extend:function(t,e){var r,n,i,o;if(e)for(r=0,n=(o=Object.keys(e)).length;r<n;r+=1)t[i=o[r]]=e[i];return t}};function qh(t,e){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name="YAMLException",this.reason=t,this.mark=e,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():"")}((qh.prototype=Object.create(Error.prototype)).constructor=qh).prototype.toString=function(t){var e=this.name+": ";return e+=this.reason||"(unknown reason)",!t&&this.mark&&(e+=" "+this.mark.toString()),e};var Kh=qh;function Yh(t,e,r,n,i){this.name=t,this.buffer=e,this.position=r,this.line=n,this.column=i}Yh.prototype.getSnippet=function(t,e){var r,n,i,o,a;if(!this.buffer)return null;for(t=t||4,e=e||75,r="",n=this.position;0<n&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(n-1));)if(--n,this.position-n>e/2-1){r=" ... ",n+=5;break}for(i="",o=this.position;o<this.buffer.length&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(o));)if((o+=1)-this.position>e/2-1){i=" ... ",o-=5;break}return a=this.buffer.slice(n,o),Gh.repeat(" ",t)+r+a+i+"\n"+Gh.repeat(" ",t+this.position-n+r.length)+"^"},Yh.prototype.toString=function(t){var e,r="";return this.name&&(r+='in "'+this.name+'" '),r+="at line "+(this.line+1)+", column "+(this.column+1),t||(e=this.getSnippet())&&(r+=":\n"+e),r};var Wh=Yh,Xh=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],Jh=["scalar","sequence","mapping"],Zh=function(t,e){var r,n;if(e=e||{},Object.keys(e).forEach((function(e){if(-1===Xh.indexOf(e))throw new Kh('Unknown option "'+e+'" is met in definition of "'+t+'" YAML type.')})),this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.defaultStyle=e.defaultStyle||null,this.styleAliases=(r=e.styleAliases||null,n={},null!==r&&Object.keys(r).forEach((function(t){r[t].forEach((function(e){n[String(e)]=t}))})),n),-1===Jh.indexOf(this.kind))throw new Kh('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')};function $h(t,e,r){var n=[];return t.include.forEach((function(t){r=$h(t,e,r)})),t[e].forEach((function(t){r.forEach((function(e,r){e.tag===t.tag&&n.push(r)})),r.push(t)})),r.filter((function(t,e){return-1===n.indexOf(e)}))}function tf(t){this.include=t.include||[],this.implicit=t.implicit||[],this.explicit=t.explicit||[],this.implicit.forEach((function(t){if(t.loadKind&&"scalar"!==t.loadKind)throw new Kh("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")})),this.compiledImplicit=$h(this,"implicit",[]),this.compiledExplicit=$h(this,"explicit",[]),this.compiledTypeMap=function(){var t,e,r={};function n(t){r[t.tag]=t}for(t=0,e=arguments.length;t<e;t+=1)arguments[t].forEach(n);return r}(this.compiledImplicit,this.compiledExplicit)}tf.DEFAULT=null,tf.create=function(t,e){var r,n;switch(arguments.length){case 1:r=tf.DEFAULT,n=t;break;case 2:r=t,n=e;break;default:throw new Kh("Wrong number of arguments for Schema.create function")}if(r=Gh.toArray(r),n=Gh.toArray(n),!r.every((function(t){return t instanceof tf})))throw new Kh("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!n.every((function(t){return t instanceof Zh})))throw new Kh("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new tf({include:r,explicit:n})};var ef=tf,rf=new ef({explicit:[new Zh("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return null!==t?t:""}}),new Zh("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return null!==t?t:[]}}),new Zh("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return null!==t?t:{}}})]}),nf=new Zh("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(t){if(null===t)return!0;var e=t.length;return 1===e&&"~"===t||4===e&&("null"===t||"Null"===t||"NULL"===t)},construct:function(){return null},predicate:function(t){return null===t},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"}),of=new Zh("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e=t.length;return 4===e&&("true"===t||"True"===t||"TRUE"===t)||5===e&&("false"===t||"False"===t||"FALSE"===t)},construct:function(t){return"true"===t||"True"===t||"TRUE"===t},predicate:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"}),af=new Zh("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,r,n,i,o=t.length,a=0,s=!1;if(!o)return!1;if("-"!==(e=t[a])&&"+"!==e||(e=t[++a]),"0"===e){if(a+1===o)return!0;if("b"===(e=t[++a])){for(a++;a<o;a++)if("_"!==(e=t[a])){if("0"!==e&&"1"!==e)return!1;s=!0}return s}if("x"===e){for(a++;a<o;a++)if("_"!==(e=t[a])){if(!(48<=(n=t.charCodeAt(a))&&n<=57||65<=n&&n<=70||97<=n&&n<=102))return!1;s=!0}return s}for(;a<o;a++)if("_"!==(e=t[a])){if(!(48<=(r=t.charCodeAt(a))&&r<=55))return!1;s=!0}return s}for(;a<o;a++)if("_"!==(e=t[a])){if(":"===e)break;if(!(48<=(i=t.charCodeAt(a))&&i<=57))return!1;s=!0}return!!s&&(":"!==e||/^(:[0-5]?[0-9])+$/.test(t.slice(a)))},construct:function(t){var e,r,n=t,i=1,o=[];return-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(e=n[0])&&"+"!==e||("-"===e&&(i=-1),e=(n=n.slice(1))[0]),"0"===n?0:"0"===e?"b"===n[1]?i*parseInt(n.slice(2),2):"x"===n[1]?i*parseInt(n,16):i*parseInt(n,8):-1!==n.indexOf(":")?(n.split(":").forEach((function(t){o.unshift(parseInt(t,10))})),n=0,r=1,o.forEach((function(t){n+=t*r,r*=60})),i*n):i*parseInt(n,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&t%1==0&&!Gh.isNegativeZero(t)},represent:{binary:function(t){return"0b"+t.toString(2)},octal:function(t){return"0"+t.toString(8)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return"0x"+t.toString(16).toUpperCase()}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),sf=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)\\.[0-9_]*(?:[eE][-+][0-9]+)?|\\.[0-9_]+(?:[eE][-+][0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),lf=/^[-+]?[0-9]+e/,uf=new ef({include:[rf],implicit:[nf,of,af,new Zh("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(t){return null!==t&&!!sf.test(t)},construct:function(t){var e,r=t.replace(/_/g,"").toLowerCase(),n="-"===r[0]?-1:1,i=[];return 0<="+-".indexOf(r[0])&&(r=r.slice(1)),".inf"===r?1==n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===r?NaN:0<=r.indexOf(":")?(r.split(":").forEach((function(t){i.unshift(parseFloat(t,10))})),r=0,e=1,i.forEach((function(t){r+=t*e,e*=60})),n*r):n*parseFloat(r,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&(t%1!=0||Gh.isNegativeZero(t))},represent:function(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Gh.isNegativeZero(t))return"-0.0";return r=t.toString(10),lf.test(r)?r.replace("e",".e"):r},defaultStyle:"lowercase"})]}),cf=new ef({include:[uf]}),hf=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?)?$"),ff=new Zh("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(t){return null!==t&&null!==hf.exec(t)},construct:function(t){var e,r,n,i,o,a,s,l=0,u=null,c=hf.exec(t);if(null===c)throw new Error("Date resolve error");if(e=+c[1],r=c[2]-1,n=+c[3],!c[4])return new Date(Date.UTC(e,r,n));if(i=+c[4],o=+c[5],a=+c[6],c[7]){for(l=c[7].slice(0,3);l.length<3;)l+="0";l=+l}return c[9]&&(u=6e4*(60*+c[10]+ +(c[11]||0)),"-"===c[9]&&(u=-u)),s=new Date(Date.UTC(e,r,n,i,o,a,l)),u&&s.setTime(s.getTime()-u),s},instanceOf:Date,represent:function(t){return t.toISOString()}}),pf=new Zh("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(t){return"<<"===t||null===t}}),Af=zs.Buffer,df="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",gf=new Zh("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(t){if(null===t)return!1;for(var e,r=0,n=t.length,i=df,o=0;o<n;o++)if(!(64<(e=i.indexOf(t.charAt(o))))){if(e<0)return!1;r+=6}return r%8==0},construct:function(t){for(var e,r=t.replace(/[\r\n=]/g,""),n=r.length,i=df,o=0,a=[],s=0;s<n;s++)s%4==0&&s&&(a.push(o>>16&255),a.push(o>>8&255),a.push(255&o)),o=o<<6|i.indexOf(r.charAt(s));return 0==(e=n%4*6)?(a.push(o>>16&255),a.push(o>>8&255),a.push(255&o)):18==e?(a.push(o>>10&255),a.push(o>>2&255)):12==e&&a.push(o>>4&255),Af?new Af(a):a},predicate:function(t){return Af&&Af.isBuffer(t)},represent:function(t){for(var e,r="",n=0,i=t.length,o=df,a=0;a<i;a++)a%3==0&&a&&(r+=o[n>>18&63],r+=o[n>>12&63],r+=o[n>>6&63],r+=o[63&n]),n=(n<<8)+t[a];return 0==(e=i%3)?(r+=o[n>>18&63],r+=o[n>>12&63],r+=o[n>>6&63],r+=o[63&n]):2==e?(r+=o[n>>10&63],r+=o[n>>4&63],r+=o[n<<2&63],r+=o[64]):1==e&&(r+=o[n>>2&63],r+=o[n<<4&63],r+=o[64],r+=o[64]),r}}),yf=Object.prototype.hasOwnProperty,vf=Object.prototype.toString,mf=new Zh("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(t){if(null===t)return!0;for(var e,r,n,i=[],o=t,a=0,s=o.length;a<s;a+=1){if(e=o[a],n=!1,"[object Object]"!==vf.call(e))return!1;for(r in e)if(yf.call(e,r)){if(n)return!1;n=!0}if(!n)return!1;if(-1!==i.indexOf(r))return!1;i.push(r)}return!0},construct:function(t){return null!==t?t:[]}}),bf=Object.prototype.toString,_f=new Zh("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(t){if(null===t)return!0;for(var e,r,n=t,i=new Array(n.length),o=0,a=n.length;o<a;o+=1){if(e=n[o],"[object Object]"!==bf.call(e))return!1;if(1!==(r=Object.keys(e)).length)return!1;i[o]=[r[0],e[r[0]]]}return!0},construct:function(t){if(null===t)return[];for(var e,r,n=t,i=new Array(n.length),o=0,a=n.length;o<a;o+=1)e=n[o],r=Object.keys(e),i[o]=[r[0],e[r[0]]];return i}}),wf=Object.prototype.hasOwnProperty,xf=new ef({include:[cf],implicit:[ff,pf],explicit:[gf,mf,_f,new Zh("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(t){if(null===t)return!0;var e,r=t;for(e in r)if(wf.call(r,e)&&null!==r[e])return!1;return!0},construct:function(t){return null!==t?t:{}}})]}),Ef=new Zh("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(t){return void 0===t},represent:function(){return""}}),Bf=new Zh("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(t){if(null===t)return!1;if(0===t.length)return!1;var e=t,r=/\/([gim]*)$/.exec(t),n="";if("/"===e[0]){if(r&&(n=r[1]),3<n.length)return!1;if("/"!==e[e.length-n.length-1])return!1}return!0},construct:function(t){var e=t,r=/\/([gim]*)$/.exec(t),n="";return"/"===e[0]&&(r&&(n=r[1]),e=e.slice(1,e.length-n.length-1)),new RegExp(e,n)},predicate:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},represent:function(t){var e="/"+t.source+"/";return t.global&&(e+="g"),t.multiline&&(e+="m"),t.ignoreCase&&(e+="i"),e}});try{var Cf=function(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}()}catch(o){"undefined"!=typeof window&&(Cf=window.esprima)}var Sf=new Zh("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(t){if(null===t)return!1;try{var e="("+t+")",r=Cf.parse(e,{range:!0});return"Program"===r.type&&1===r.body.length&&"ExpressionStatement"===r.body[0].type&&"FunctionExpression"===r.body[0].expression.type}catch(t){return!1}},construct:function(t){var e,r="("+t+")",n=Cf.parse(r,{range:!0}),i=[];if("Program"!==n.type||1!==n.body.length||"ExpressionStatement"!==n.body[0].type||"FunctionExpression"!==n.body[0].expression.type)throw new Error("Failed to resolve function");return n.body[0].expression.params.forEach((function(t){i.push(t.name)})),e=n.body[0].expression.body.range,new Function(i,r.slice(e[0]+1,e[1]-1))},predicate:function(t){return"[object Function]"===Object.prototype.toString.call(t)},represent:function(t){return t.toString()}}),kf=ef.DEFAULT=new ef({include:[xf],explicit:[Ef,Bf,Sf]}),Tf=Object.prototype.hasOwnProperty,Nf=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Lf=/[\x85\u2028\u2029]/,If=/[,\[\]\{\}]/,Mf=/^(?:!|!!|![a-z\-]+!)$/i,Of=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Pf(t){return 10===t||13===t}function Ff(t){return 9===t||32===t}function Uf(t){return 9===t||32===t||10===t||13===t}function Rf(t){return 44===t||91===t||93===t||123===t||125===t}function Df(t){return 48===t?"\0":97===t?"\x07":98===t?"\b":116===t||9===t?"\t":110===t?"\n":118===t?"\v":102===t?"\f":114===t?"\r":101===t?"\x1b":32===t?" ":34===t?'"':47===t?"/":92===t?"\\":78===t?"\x85":95===t?"\xa0":76===t?"\u2028":80===t?"\u2029":""}for(var jf=new Array(256),Hf=new Array(256),Qf=0;Qf<256;Qf++)jf[Qf]=Df(Qf)?1:0,Hf[Qf]=Df(Qf);function zf(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||kf,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function Vf(t,e){return new Kh(e,new Wh(t.filename,t.input,t.position,t.line,t.position-t.lineStart))}function Gf(t,e){throw Vf(t,e)}function qf(t,e){t.onWarning&&t.onWarning.call(null,Vf(t,e))}var Kf={YAML:function(t,e,r){var n,i,o;null!==t.version&&Gf(t,"duplication of %YAML directive"),1!==r.length&&Gf(t,"YAML directive accepts exactly one argument"),null===(n=/^([0-9]+)\.([0-9]+)$/.exec(r[0]))&&Gf(t,"ill-formed argument of the YAML directive"),i=parseInt(n[1],10),o=parseInt(n[2],10),1!==i&&Gf(t,"unacceptable YAML version of the document"),t.version=r[0],t.checkLineBreaks=o<2,1!==o&&2!==o&&qf(t,"unsupported YAML version of the document")},TAG:function(t,e,r){var n,i;2!==r.length&&Gf(t,"TAG directive accepts exactly two arguments"),n=r[0],i=r[1],Mf.test(n)||Gf(t,"ill-formed tag handle (first argument) of the TAG directive"),Tf.call(t.tagMap,n)&&Gf(t,'there is a previously declared suffix for "'+n+'" tag handle'),Of.test(i)||Gf(t,"ill-formed tag prefix (second argument) of the TAG directive"),t.tagMap[n]=i}};function Yf(t,e,r,n){var i,o,a,s;if(e<r){if(s=t.input.slice(e,r),n)for(i=0,o=s.length;i<o;i+=1)9===(a=s.charCodeAt(i))||32<=a&&a<=1114111||Gf(t,"expected valid JSON character");else Nf.test(s)&&Gf(t,"the stream contains non-printable characters");t.result+=s}}function Wf(t,e,r,n){var i,o,a,s;for(Gh.isObject(r)||Gf(t,"cannot merge mappings; the provided source object is unacceptable"),a=0,s=(i=Object.keys(r)).length;a<s;a+=1)o=i[a],Tf.call(e,o)||(e[o]=r[o],n[o]=!0)}function Xf(t,e,r,n,i,o){var a,s;if(i=String(i),null===e&&(e={}),"tag:yaml.org,2002:merge"===n)if(Array.isArray(o))for(a=0,s=o.length;a<s;a+=1)Wf(t,e,o[a],r);else Wf(t,e,o,r);else t.json||Tf.call(r,i)||!Tf.call(e,i)||Gf(t,"duplicated mapping key"),e[i]=o,delete r[i];return e}function Jf(t){var e=t.input.charCodeAt(t.position);10===e?t.position++:13===e?(t.position++,10===t.input.charCodeAt(t.position)&&t.position++):Gf(t,"a line break is expected"),t.line+=1,t.lineStart=t.position}function Zf(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);0!==i;){for(;Ff(i);)i=t.input.charCodeAt(++t.position);if(e&&35===i)for(;10!==(i=t.input.charCodeAt(++t.position))&&13!==i&&0!==i;);if(!Pf(i))break;for(Jf(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;32===i;)t.lineIndent++,i=t.input.charCodeAt(++t.position)}return-1!==r&&0!==n&&t.lineIndent<r&&qf(t,"deficient indentation"),n}function $f(t){var e=t.position,r=t.input.charCodeAt(e);return 45!==r&&46!==r||r!==t.input.charCodeAt(e+1)||r!==t.input.charCodeAt(e+2)||(e+=3,0!==(r=t.input.charCodeAt(e))&&!Uf(r))?void 0:1}function tp(t,e){1===e?t.result+=" ":1<e&&(t.result+=Gh.repeat("\n",e-1))}function ep(t,e){var r,n,i=t.tag,o=t.anchor,a=[],s=!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=a),n=t.input.charCodeAt(t.position);0!==n&&45===n&&Uf(t.input.charCodeAt(t.position+1));)if(s=!0,t.position++,Zf(t,!0,-1)&&t.lineIndent<=e)a.push(null),n=t.input.charCodeAt(t.position);else if(r=t.line,rp(t,e,3,!1,!0),a.push(t.result),Zf(t,!0,-1),n=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&0!==n)Gf(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break;return!!s&&(t.tag=i,t.anchor=o,t.kind="sequence",t.result=a,!0)}function rp(t,e,r,n,i){var o,a,s,l,u,c,h,f,p=1,A=!1,d=!1;if(null!==t.listener&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=s=4===r||3===r,n&&Zf(t,!0,-1)&&(A=!0,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)),1===p)for(;function(t){var e,r,n,i=!1,o=!1,a=t.input.charCodeAt(t.position);if(33===a){if(null!==t.tag&&Gf(t,"duplication of a tag property"),60===(a=t.input.charCodeAt(++t.position))?(i=!0,a=t.input.charCodeAt(++t.position)):33===a?(o=!0,r="!!",a=t.input.charCodeAt(++t.position)):r="!",e=t.position,i){for(;0!==(a=t.input.charCodeAt(++t.position))&&62!==a;);t.position<t.length?(n=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):Gf(t,"unexpected end of the stream within a verbatim tag")}else{for(;0!==a&&!Uf(a);)33===a&&(o?Gf(t,"tag suffix cannot contain exclamation marks"):(r=t.input.slice(e-1,t.position+1),Mf.test(r)||Gf(t,"named tag handle cannot contain such characters"),o=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);n=t.input.slice(e,t.position),If.test(n)&&Gf(t,"tag suffix cannot contain flow indicator characters")}return n&&!Of.test(n)&&Gf(t,"tag name cannot contain such characters: "+n),i?t.tag=n:Tf.call(t.tagMap,r)?t.tag=t.tagMap[r]+n:"!"===r?t.tag="!"+n:"!!"===r?t.tag="tag:yaml.org,2002:"+n:Gf(t,'undeclared tag handle "'+r+'"'),1}}(t)||function(t){var e,r=t.input.charCodeAt(t.position);if(38===r){for(null!==t.anchor&&Gf(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;0!==r&&!Uf(r)&&!Rf(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Gf(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),1}}(t);)Zf(t,!0,-1)?(A=!0,s=o,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)):s=!1;if(s=s&&(A||i),1!==p&&4!==r||(h=1===r||2===r?e:e+1,f=t.position-t.lineStart,1===p?s&&(ep(t,f)||function(t,e,r){var n,i,o,a,s=t.tag,l=t.anchor,u={},c={},h=null,f=null,p=null,A=!1,d=!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=u),a=t.input.charCodeAt(t.position);0!==a;){if(n=t.input.charCodeAt(t.position+1),o=t.line,63!==a&&58!==a||!Uf(n)){if(!rp(t,r,2,!1,!0))break;if(t.line===o){for(a=t.input.charCodeAt(t.position);Ff(a);)a=t.input.charCodeAt(++t.position);if(58===a)Uf(a=t.input.charCodeAt(++t.position))||Gf(t,"a whitespace character is expected after the key-value separator within a block mapping"),A&&(Xf(t,u,c,h,f,null),h=f=p=null),i=A=!(d=!0),h=t.tag,f=t.result;else{if(!d)return t.tag=s,t.anchor=l,1;Gf(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!d)return t.tag=s,t.anchor=l,1;Gf(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===a?(A&&(Xf(t,u,c,h,f,null),h=f=p=null),i=A=d=!0):A?i=!(A=!1):Gf(t,"incomplete explicit mapping pair; a key node is missed"),t.position+=1,a=n;if((t.line===o||t.lineIndent>e)&&(rp(t,e,4,!0,i)&&(A?f=t.result:p=t.result),A||(Xf(t,u,c,h,f,p),h=f=p=null),Zf(t,!0,-1),a=t.input.charCodeAt(t.position)),t.lineIndent>e&&0!==a)Gf(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return A&&Xf(t,u,c,h,f,null),d&&(t.tag=s,t.anchor=l,t.kind="mapping",t.result=u),d}(t,f,h))||function(t,e){var r,n,i,o,a,s,l,u,c,h=!0,f=t.tag,p=t.anchor,A={},d=t.input.charCodeAt(t.position);if(91===d)s=!(i=93),n=[];else{if(123!==d)return;i=125,s=!0,n={}}for(null!==t.anchor&&(t.anchorMap[t.anchor]=n),d=t.input.charCodeAt(++t.position);0!==d;){if(Zf(t,!0,e),(d=t.input.charCodeAt(t.position))===i)return t.position++,t.tag=f,t.anchor=p,t.kind=s?"mapping":"sequence",t.result=n,1;h||Gf(t,"missed comma between flow collection entries"),c=null,o=a=!1,63===d&&Uf(t.input.charCodeAt(t.position+1))&&(o=a=!0,t.position++,Zf(t,!0,e)),r=t.line,rp(t,e,1,!1,!0),u=t.tag,l=t.result,Zf(t,!0,e),d=t.input.charCodeAt(t.position),!a&&t.line!==r||58!==d||(o=!0,d=t.input.charCodeAt(++t.position),Zf(t,!0,e),rp(t,e,1,!1,!0),c=t.result),s?Xf(t,n,A,u,l,c):o?n.push(Xf(t,null,A,u,l,c)):n.push(l),Zf(t,!0,e),44===(d=t.input.charCodeAt(t.position))?(h=!0,d=t.input.charCodeAt(++t.position)):h=!1}Gf(t,"unexpected end of the stream within a flow collection")}(t,h)?d=!0:(a&&function(t,e){var r,n,i,o,a=1,s=!1,l=e,u=0,c=!1,h=t.input.charCodeAt(t.position);if(124===h)n=!1;else{if(62!==h)return;n=!0}for(t.kind="scalar",t.result="";0!==h;)if(43===(h=t.input.charCodeAt(++t.position))||45===h)1===a?a=43===h?3:2:Gf(t,"repeat of a chomping mode identifier");else{if(!(0<=(i=48<=(o=h)&&o<=57?o-48:-1)))break;0==i?Gf(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?Gf(t,"repeat of an indentation width identifier"):(l=e+i-1,s=!0)}if(Ff(h)){for(;Ff(h=t.input.charCodeAt(++t.position)););if(35===h)for(;!Pf(h=t.input.charCodeAt(++t.position))&&0!==h;);}for(;0!==h;){for(Jf(t),t.lineIndent=0,h=t.input.charCodeAt(t.position);(!s||t.lineIndent<l)&&32===h;)t.lineIndent++,h=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>l&&(l=t.lineIndent),Pf(h))u++;else{if(t.lineIndent<l){3===a?t.result+=Gh.repeat("\n",u):1===a&&s&&(t.result+="\n");break}for(n?Ff(h)?(c=!0,t.result+=Gh.repeat("\n",u+1)):c?(c=!1,t.result+=Gh.repeat("\n",u+1)):0===u?s&&(t.result+=" "):t.result+=Gh.repeat("\n",u):t.result+=s?Gh.repeat("\n",u+1):Gh.repeat("\n",u),s=!0,u=0,r=t.position;!Pf(h)&&0!==h;)h=t.input.charCodeAt(++t.position);Yf(t,r,t.position,!1)}}return 1}(t,h)||function(t,e){var r,n,i=t.input.charCodeAt(t.position);if(39===i){for(t.kind="scalar",t.result="",t.position++,r=n=t.position;0!==(i=t.input.charCodeAt(t.position));)if(39===i){if(Yf(t,r,t.position,!0),39!==(i=t.input.charCodeAt(++t.position)))return 1;r=n=t.position,t.position++}else Pf(i)?(Yf(t,r,n,!0),tp(t,Zf(t,!1,e)),r=n=t.position):t.position===t.lineStart&&$f(t)?Gf(t,"unexpected end of the document within a single quoted scalar"):(t.position++,n=t.position);Gf(t,"unexpected end of the stream within a single quoted scalar")}}(t,h)||function(t,e){var r,n,i,o,a,s,l,u,c,h=t.input.charCodeAt(t.position);if(34===h){for(t.kind="scalar",t.result="",t.position++,r=n=t.position;0!==(h=t.input.charCodeAt(t.position));){if(34===h)return Yf(t,r,t.position,!0),t.position++,1;if(92===h){if(Yf(t,r,t.position,!0),Pf(h=t.input.charCodeAt(++t.position)))Zf(t,!1,e);else if(h<256&&jf[h])t.result+=Hf[h],t.position++;else if(0<(a=120===(c=h)?2:117===c?4:85===c?8:0)){for(i=a,o=0;0<i;i--)u=void 0,0<=(a=48<=(l=h=t.input.charCodeAt(++t.position))&&l<=57?l-48:97<=(u=32|l)&&u<=102?u-97+10:-1)?o=(o<<4)+a:Gf(t,"expected hexadecimal character");t.result+=(s=o)<=65535?String.fromCharCode(s):String.fromCharCode(55296+(s-65536>>10),56320+(s-65536&1023)),t.position++}else Gf(t,"unknown escape sequence");r=n=t.position}else Pf(h)?(Yf(t,r,n,!0),tp(t,Zf(t,!1,e)),r=n=t.position):t.position===t.lineStart&&$f(t)?Gf(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}Gf(t,"unexpected end of the stream within a double quoted scalar")}}(t,h)?d=!0:function(t){var e,r,n=t.input.charCodeAt(t.position);if(42===n){for(n=t.input.charCodeAt(++t.position),e=t.position;0!==n&&!Uf(n)&&!Rf(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Gf(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),t.anchorMap.hasOwnProperty(r)||Gf(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],Zf(t,!0,-1),1}}(t)?(d=!0,null===t.tag&&null===t.anchor||Gf(t,"alias node should not have any properties")):function(t,e,r){var n,i,o,a,s,l,u,c=t.kind,h=t.result,f=t.input.charCodeAt(t.position);if(!Uf(f)&&!Rf(f)&&35!==f&&38!==f&&42!==f&&33!==f&&124!==f&&62!==f&&39!==f&&34!==f&&37!==f&&64!==f&&96!==f&&(63!==f&&45!==f||!(Uf(n=t.input.charCodeAt(t.position+1))||r&&Rf(n)))){for(t.kind="scalar",t.result="",i=o=t.position,a=!1;0!==f;){if(58===f){if(Uf(n=t.input.charCodeAt(t.position+1))||r&&Rf(n))break}else if(35===f){if(Uf(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&$f(t)||r&&Rf(f))break;if(Pf(f)){if(s=t.line,l=t.lineStart,u=t.lineIndent,Zf(t,!1,-1),t.lineIndent>=e){a=!0,f=t.input.charCodeAt(t.position);continue}t.position=o,t.line=s,t.lineStart=l,t.lineIndent=u;break}}a&&(Yf(t,i,o,!1),tp(t,t.line-s),i=o=t.position,a=!1),Ff(f)||(o=t.position+1),f=t.input.charCodeAt(++t.position)}if(Yf(t,i,o,!1),t.result)return 1;t.kind=c,t.result=h}}(t,h,1===r)&&(d=!0,null===t.tag&&(t.tag="?")),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):0===p&&(d=s&&ep(t,f))),null!==t.tag&&"!"!==t.tag)if("?"===t.tag){for(l=0,u=t.implicitTypes.length;l<u;l+=1)if((c=t.implicitTypes[l]).resolve(t.result)){t.result=c.construct(t.result),t.tag=c.tag,null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);break}}else Tf.call(t.typeMap,t.tag)?(c=t.typeMap[t.tag],null!==t.result&&c.kind!==t.kind&&Gf(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+c.kind+'", not "'+t.kind+'"'),c.resolve(t.result)?(t.result=c.construct(t.result),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):Gf(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")):Gf(t,"unknown tag !<"+t.tag+">");return null!==t.listener&&t.listener("close",t),null!==t.tag||null!==t.anchor||d}function np(t,e){e=e||{},0!==(t=String(t)).length&&(10!==t.charCodeAt(t.length-1)&&13!==t.charCodeAt(t.length-1)&&(t+="\n"),65279===t.charCodeAt(0)&&(t=t.slice(1)));var r=new zf(t,e);for(r.input+="\0";32===r.input.charCodeAt(r.position);)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)!function(t){var e,r,n,i,o=t.position,a=!1;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap={},t.anchorMap={};0!==(i=t.input.charCodeAt(t.position))&&(Zf(t,!0,-1),i=t.input.charCodeAt(t.position),!(0<t.lineIndent||37!==i));){for(a=!0,i=t.input.charCodeAt(++t.position),e=t.position;0!==i&&!Uf(i);)i=t.input.charCodeAt(++t.position);for(n=[],(r=t.input.slice(e,t.position)).length<1&&Gf(t,"directive name must not be less than one character in length");0!==i;){for(;Ff(i);)i=t.input.charCodeAt(++t.position);if(35===i){for(;0!==(i=t.input.charCodeAt(++t.position))&&!Pf(i););break}if(Pf(i))break;for(e=t.position;0!==i&&!Uf(i);)i=t.input.charCodeAt(++t.position);n.push(t.input.slice(e,t.position))}0!==i&&Jf(t),Tf.call(Kf,r)?Kf[r](t,r,n):qf(t,'unknown document directive "'+r+'"')}Zf(t,!0,-1),0===t.lineIndent&&45===t.input.charCodeAt(t.position)&&45===t.input.charCodeAt(t.position+1)&&45===t.input.charCodeAt(t.position+2)?(t.position+=3,Zf(t,!0,-1)):a&&Gf(t,"directives end mark is expected"),rp(t,t.lineIndent-1,4,!1,!0),Zf(t,!0,-1),t.checkLineBreaks&&Lf.test(t.input.slice(o,t.position))&&qf(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&$f(t)?46===t.input.charCodeAt(t.position)&&(t.position+=3,Zf(t,!0,-1)):t.position<t.length-1&&Gf(t,"end of the stream or a document separator is expected")}(r);return r.documents}function ip(t,e,r){for(var n=np(t,r),i=0,o=n.length;i<o;i+=1)e(n[i])}function op(t,e){var r=np(t,e);if(0!==r.length){if(1===r.length)return r[0];throw new Kh("expected a single document in the stream, but found more")}}var ap={loadAll:ip,load:op,safeLoadAll:function(t,e,r){ip(t,e,Gh.extend({schema:xf},r))},safeLoad:function(t,e){return op(t,Gh.extend({schema:xf},e))}},sp=Object.prototype.toString,lp=Object.prototype.hasOwnProperty,up=10,cp={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},hp=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function fp(t){this.schema=t.schema||kf,this.indent=Math.max(1,t.indent||2),this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Gh.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=function(t,e){var r,n,i,o,a,s,l;if(null===e)return{};for(r={},i=0,o=(n=Object.keys(e)).length;i<o;i+=1)a=n[i],s=String(e[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),(l=t.compiledTypeMap[a])&&lp.call(l.styleAliases,s)&&(s=l.styleAliases[s]),r[a]=s;return r}(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function pp(t,e){for(var r,n=Gh.repeat(" ",e),i=0,o=-1,a="",s=t.length;i<s;)i=-1===(o=t.indexOf("\n",i))?(r=t.slice(i),s):(r=t.slice(i,o+1),o+1),r.length&&"\n"!==r&&(a+=n),a+=r;return a}function Ap(t,e){return"\n"+Gh.repeat(" ",t.indent*e)}function dp(t){this.source=t,this.result="",this.checkpoint=0}function gp(t,e){if(""===t)return t;for(var r,n,i=/[^\s] [^\s]/g,o="",a=0,s=0,l=i.exec(t);l;)e<(r=l.index)-s&&(n=a!==s?a:r,o&&(o+="\n"),o+=t.slice(s,n),s=n+1),a=r+1,l=i.exec(t);return o&&(o+="\n"),s!==a&&t.length-s>e?o+=t.slice(s,a)+"\n"+t.slice(a+1):o+=t.slice(s),o}function yp(t){return!(32<=t&&t<=126||133===t||160<=t&&t<=55295||57344<=t&&t<=65533||65536<=t&&t<=1114111)}function vp(t,e,r){for(var n,i,o,a=r?t.explicitTypes:t.implicitTypes,s=0,l=a.length;s<l;s+=1)if(((i=a[s]).instanceOf||i.predicate)&&(!i.instanceOf||"object"==typeof e&&e instanceof i.instanceOf)&&(!i.predicate||i.predicate(e))){if(t.tag=r?i.tag:"?",i.represent){if(o=t.styleMap[i.tag]||i.defaultStyle,"[object Function]"===sp.call(i.represent))n=i.represent(e,o);else{if(!lp.call(i.represent,o))throw new Kh("!<"+i.tag+'> tag resolver accepts not "'+o+'" style');n=i.represent[o](e,o)}t.dump=n}return 1}}function mp(t,e,r,n,i,o){t.tag=null,t.dump=r,vp(t,r,!1)||vp(t,r,!0);var a=sp.call(t.dump);n=n&&(t.flowLevel<0||t.flowLevel>e);var s,l,u="[object Object]"===a||"[object Array]"===a;if(u&&(l=-1!==(s=t.duplicates.indexOf(r))),(null!==t.tag&&"?"!==t.tag||l||2!==t.indent&&0<e)&&(i=!1),l&&t.usedDuplicates[s])t.dump="*ref_"+s;else{if(u&&l&&!t.usedDuplicates[s]&&(t.usedDuplicates[s]=!0),"[object Object]"===a)n&&0!==Object.keys(t.dump).length?(function(t,e,r,n){var i,o,a,s,l,u,c="",h=t.tag,f=Object.keys(r);if(!0===t.sortKeys)f.sort();else if("function"==typeof t.sortKeys)f.sort(t.sortKeys);else if(t.sortKeys)throw new Kh("sortKeys must be a boolean or a function");for(i=0,o=f.length;i<o;i+=1)u="",n&&0===i||(u+=Ap(t,e)),s=r[a=f[i]],mp(t,e+1,a,!0,!0,!0)&&((l=null!==t.tag&&"?"!==t.tag||t.dump&&1024<t.dump.length)&&(t.dump&&up===t.dump.charCodeAt(0)?u+="?":u+="? "),u+=t.dump,l&&(u+=Ap(t,e)),mp(t,e+1,s,!0,l)&&(t.dump&&up===t.dump.charCodeAt(0)?u+=":":u+=": ",c+=u+=t.dump));t.tag=h,t.dump=c||"{}"}(t,e,t.dump,i),l&&(t.dump="&ref_"+s+t.dump)):(function(t,e,r){for(var n,i,o,a="",s=t.tag,l=Object.keys(r),u=0,c=l.length;u<c;u+=1)o="",0!==u&&(o+=", "),i=r[n=l[u]],mp(t,e,n,!1,!1)&&(1024<t.dump.length&&(o+="? "),o+=t.dump+": ",mp(t,e,i,!1,!1)&&(a+=o+=t.dump));t.tag=s,t.dump="{"+a+"}"}(t,e,t.dump),l&&(t.dump="&ref_"+s+" "+t.dump));else if("[object Array]"===a)n&&0!==t.dump.length?(function(t,e,r,n){for(var i="",o=t.tag,a=0,s=r.length;a<s;a+=1)mp(t,e+1,r[a],!0,!0)&&(n&&0===a||(i+=Ap(t,e)),i+="- "+t.dump);t.tag=o,t.dump=i||"[]"}(t,e,t.dump,i),l&&(t.dump="&ref_"+s+t.dump)):(function(t,e,r){for(var n="",i=t.tag,o=0,a=r.length;o<a;o+=1)mp(t,e,r[o],!1,!1)&&(0!==o&&(n+=", "),n+=t.dump);t.tag=i,t.dump="["+n+"]"}(t,e,t.dump),l&&(t.dump="&ref_"+s+" "+t.dump));else{if("[object String]"!==a){if(t.skipInvalid)return;throw new Kh("unacceptable kind of an object to dump "+a)}"?"!==t.tag&&function(t,e,r,n){var i,o,a,s,l,u,c,h,f,p,A,d,g,y,v,m,b,_,w,x,E;if(0!==e.length)if(-1===hp.indexOf(e)){for(i=!0,45!==(o=e.length?e.charCodeAt(0):0)&&63!==o&&64!==o&&96!==o||(i=!1),l=s=(a=32===o||32===e.charCodeAt(e.length-1))||-1<t.flowLevel&&t.flowLevel<=r?(a&&(i=!1),!1):!n,u=!0,c=new dp(e),h=!1,p=f=0,A=t.indent*r,-1===(d=t.lineWidth)&&(d=9007199254740991),A<40?d-=A:d=40,y=0;y<e.length;y++){if(g=e.charCodeAt(y),i){if(9!==(E=g)&&up!==E&&13!==E&&44!==E&&91!==E&&93!==E&&123!==E&&125!==E&&35!==E&&38!==E&&42!==E&&33!==E&&124!==E&&62!==E&&39!==E&&34!==E&&37!==E&&58!==E&&!cp[E]&&!yp(E))continue;i=!1}u&&39===g&&(u=!1),v=cp[g],m=yp(g),(v||m)&&(g!==up&&34!==g&&39!==g?l=s=!1:g===up&&(u=!(h=!0),0<y&&32===e.charCodeAt(y-1)&&(s=l=!1),s&&(b=y-f,f=y,p<b&&(p=b))),34!==g&&(u=!1),c.takeUpTo(y),c.escapeChar())}if(i&&function(t,e){for(var r=0,n=t.implicitTypes.length;r<n;r+=1)if(t.implicitTypes[r].resolve(e))return 1}(t,e)&&(i=!1),_="",(s||l)&&(w=0,e.charCodeAt(e.length-1)===up&&(w+=1,e.charCodeAt(e.length-2)===up&&(w+=1)),0===w?_="-":2===w&&(_="+")),(l&&p<d||null!==t.tag)&&(s=!1),h||(l=!1),i)t.dump=e;else if(u)t.dump="'"+e+"'";else if(s)x=function(t,e){var r,n="",i=0,o=t.length,a=/\n+$/.exec(t);for(a&&(o=a.index+1);i<o;)i=o<(r=t.indexOf("\n",i))||-1===r?(n&&(n+="\n\n"),n+=gp(t.slice(i,o),e),o):(n&&(n+="\n\n"),n+=gp(t.slice(i,r),e),r+1);return a&&"\n"!==a[0]&&(n+=a[0]),n}(e,d),t.dump=">"+_+"\n"+pp(x,A);else if(l)_||(e=e.replace(/\n$/,"")),t.dump="|"+_+"\n"+pp(e,A);else{if(!c)throw new Error("Failed to dump scalar value");c.finish(),t.dump='"'+c.result+'"'}}else t.dump="'"+e+"'";else t.dump="''"}(t,t.dump,e,o)}null!==t.tag&&"?"!==t.tag&&(t.dump="!<"+t.tag+"> "+t.dump)}return 1}function bp(t,e){var r=new fp(e=e||{});return r.noRefs||function(t,e){var r,n,i=[],o=[];for(function t(e,r,n){var i,o,a;if(null!==e&&"object"==typeof e)if(-1!==(o=r.indexOf(e)))-1===n.indexOf(o)&&n.push(o);else if(r.push(e),Array.isArray(e))for(o=0,a=e.length;o<a;o+=1)t(e[o],r,n);else for(o=0,a=(i=Object.keys(e)).length;o<a;o+=1)t(e[i[o]],r,n)}(t,i,o),r=0,n=o.length;r<n;r+=1)e.duplicates.push(i[o[r]]);e.usedDuplicates=new Array(n)}(t,r),mp(r,0,t,!0,!0)?r.dump+"\n":""}dp.prototype.takeUpTo=function(t){var e;if(t<this.checkpoint)throw(e=new Error("position should be > checkpoint")).position=t,e.checkpoint=this.checkpoint,e;return this.result+=this.source.slice(this.checkpoint,t),this.checkpoint=t,this},dp.prototype.escapeChar=function(){var t=this.source.charCodeAt(this.checkpoint),e=cp[t]||function(t){var e,r,n=t.toString(16).toUpperCase();if(t<=255)e="x",r=2;else if(t<=65535)e="u",r=4;else{if(!(t<=4294967295))throw new Kh("code point within a string may not be greater than 0xFFFFFFFF");e="U",r=8}return"\\"+e+Gh.repeat("0",r-n.length)+n}(t);return this.result+=e,this.checkpoint+=1,this},dp.prototype.finish=function(){this.source.length>this.checkpoint&&this.takeUpTo(this.source.length)};var _p={dump:bp,safeDump:function(t,e){return bp(t,Gh.extend({schema:xf},e))}};function wp(t){return function(){throw new Error("Function "+t+" is deprecated and cannot be used.")}}var xp={Type:Zh,Schema:ef,FAILSAFE_SCHEMA:rf,JSON_SCHEMA:uf,CORE_SCHEMA:cf,DEFAULT_SAFE_SCHEMA:xf,DEFAULT_FULL_SCHEMA:kf,load:ap.load,loadAll:ap.loadAll,safeLoad:ap.safeLoad,safeLoadAll:ap.safeLoadAll,dump:_p.dump,safeDump:_p.safeDump,YAMLException:Kh,MINIMAL_SCHEMA:rf,SAFE_SCHEMA:xf,DEFAULT_SCHEMA:kf,scan:wp("scan"),parse:wp("parse"),compose:wp("compose"),addConstructor:wp("addConstructor")},Ep=function(){function t(e,r){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;vn(this,t),this.url=e,!r||Li(r)&&!Li(this.url)?this.path=Ni(this.url):this.path=r,this.path_for_parent=r||this.path,this.parent=n,this.container=null,this.parent&&(this.parent.container?this.container=this.parent.container:this.parent.isContainer()&&(this.container=this.parent))}return bn(t,[{key:"load",value:function(){return t=this.url,new Promise((function(e,r){"string"==typeof t?Bi.io(t).then((function(t){try{var n=function(t){var e;try{e=xp.safeLoad(t,{json:!0})}catch(t){throw t}return e}(t);e(n)}catch(t){r(t)}}),r):(t=Object.assign({},t),e(t))}));var t}},{key:"resourceFor",value:function(t){return{url:this.urlFor(t),path:this.pathFor(t),type:this.typeFor(t)}}},{key:"urlFor",value:function(t){return Bp(t)?t:Li(t)&&this.container?this.parent.urlFor(this.path_for_parent+t):function(t,e){if(!t||!Li(t))return t;var r,n="/"!==t[0];return e?(r=document.createElement("a")).href=e:r=window.location,n?Ni(r.href)+t:(r.origin||r.protocol+"//"+r.host)+t}(t,this.path)}},{key:"pathFor",value:Ni},{key:"typeFor",value:function(t){var e=(t=t.split("/").pop()).lastIndexOf(".");if(-1<e)return t.substring(e+1)}},{key:"isContainer",value:function(){return!1}}]),t}();function Bp(t){return!(!t||"global."!==t.slice(0,7))}function Cp(t){return null!=t}function Sp(t){return"("+t+")"}function kp(t){return"$"===t[0]?"context['"+t.substring(1)+"']":"context.feature.properties['"+t+"']"}function Tp(t,e){return Sp(("string"==typeof(r=e)?'"'+r+'"':r)+" === "+kp(t));var r}function Np(t,e){return Sp(t.filter(Cp).map((function(t){return Sp(t.join(" && "))})).join(" "+e+" "))}function Lp(t,e,r){return e&&0<e.length?Np(e.map((function(t){return Ip(t,r)})),"||"):"true"}function Ip(t,e){var r=[];if("function"==typeof t)return[Sp(t.toString()+"(context)")];if(Array.isArray(t))return[Lp(0,t,e)];if(null==t)return["true"];for(var n,i,o,a,s,l,u,c,h=Object.keys(t),f=0;f<h.length;f++){var p=h[f],A=t[p],d=yn(A);if("string"===d||"number"===d)r.push(Tp(p,A));else if("boolean"===d)r.push((c=A,Sp(kp(p)+(c?" != ":" == ")+"null")));else if("not"===p)r.push("!"+Sp(Ip(A,e).join(" && ")));else if("any"===p)r.push(Lp(0,A,e));else if("all"===p)r.push(function(t,e){return t&&0<t.length?Np(t.map((function(t){return Ip(t,e)})),"&&"):"true"}(A,e));else if("none"===p)r.push("!"+Sp(Lp(0,A,e)));else if(Array.isArray(A))r.push(function(t,e){return Sp(e.map((function(e){return Tp(t,e)})).join(" || "))}(p,A));else if("object"===d&&null!=A)(A.max||A.min)&&r.push((n=p,i=A,u=l=s=a=void 0,l=[],u=(o=e)&&"function"==typeof o.rangeTransform&&o.rangeTransform,i.max&&(a=u?u(i.max):i.max,l.push(kp(n)+" < "+a)),i.min&&(s=u?s=u(i.min):i.min,l.push(kp(n)+" >= "+s)),Sp(l.join(" && "))));else{if(null!=A)throw new Error("Unknown Query syntax: "+A);r.push(" true ")}}return 0===h.length?["true"]:r}function Mp(t,e){return null==t?function(){return!0}:new Function("context","return "+Sp(Ip(t,e).join(" && "))+";")}var Op=["filter","draw","visible","enabled","data"],Pp={},Fp=["any","all","not","none"],Up=function(){function t(e){var r,n=e.layer,i=e.name,o=e.parent,a=e.draw,s=e.visible,l=e.enabled,u=e.filter,c=e.styles;if(vn(this,t),this.id=t.id++,this.config_data=n.data,this.parent=o,this.name=i,this.full_name=this.parent?this.parent.full_name+":"+this.name:this.name,this.draw=a,this.filter=u,this.styles=c,this.is_built=!1,l=void 0===l?s:l,this.parent&&!1===this.parent.visible?this.enabled=!1:this.enabled=!1!==l,this.draw)for(var h in this.draw)this.draw[h]=null==this.draw[h]?{}:this.draw[h],"object"!==yn(this.draw[h])?(r="Draw group '".concat(h,"' for layer ").concat(this.full_name," is invalid, must be an object, "),xi("warn",r+="but was set to `".concat(h,": ").concat(this.draw[h],"` instead")),delete this.draw[h]):this.draw[h].layer_name=this.full_name}return bn(t,[{key:"build",value:function(){xi("trace","Building layer '".concat(this.full_name,"'")),this.buildFilter(),this.buildDraw(),this.is_built=!0}},{key:"buildDraw",value:function(){this.draw=Bi.stringsToFunctions(this.draw,vo.wrapFunction),this.calculatedDraw=function(t){var e,r=[];return t.parent&&(e=t.parent.calculatedDraw||[],r.push.apply(r,In(e))),r.push(t.draw),r}(this)}},{key:"buildFilter",value:function(){this.filter_original=this.filter,this.filter=Bi.stringsToFunctions(this.filter,vo.wrapFunction);var t=yn(this.filter);if(null==this.filter||"object"===t||"function"===t)try{this.buildZooms(),this.buildPropMatches(),null!=this.filter&&("function"==typeof this.filter||0<Object.keys(this.filter).length)?this.filter=Mp(this.filter,Hp):this.filter=null}catch(t){var e="Filter for layer ".concat(this.full_name," is invalid, `filter: ").concat(JSON.stringify(this.filter),"` ");xi("warn",e+="failed with error '".concat(t.message,"', stack trace: ").concat(t.stack))}else{var r="Filter for layer ".concat(this.full_name," is invalid, filter value must be an object or function, ");xi("warn",r+="but was set to `filter: ".concat(this.filter,"` instead"))}}},{key:"buildZooms",value:function(){var t=this.filter&&this.filter.$zoom,e=yn(t);if(null!=t&&"function"!==e){if(this.zooms={},"number"===e)this.zooms[t]=!0;else if(Array.isArray(t))for(var r=0;r<t.length;r++)this.zooms[t[r]]=!0;else if("object"===e&&(null!=t.min||null!=t.max))for(var n=t.min||0,i=t.max||25,o=n;o<i;o++)this.zooms[o]=!0;delete this.filter.$zoom}}},{key:"buildPropMatches",value:function(){var t=this;this.filter&&!Array.isArray(this.filter)&&"function"!=typeof this.filter&&Object.keys(this.filter).forEach((function(e){if(-1===Fp.indexOf(e)){var r=t.filter[e],n=yn(r),i=Array.isArray(r);if(!i&&"string"!==n&&"number"!==n)return;"$"===e[0]?(t.context_prop_matches=t.context_prop_matches||[],t.context_prop_matches.push([e.substring(1),i?r:[r]])):(t.feature_prop_matches=t.feature_prop_matches||[],t.feature_prop_matches.push([e,i?r:[r]])),delete t.filter[e]}}))}},{key:"doPropMatches",value:function(t){if(this.feature_prop_matches)for(var e=0;e<this.feature_prop_matches.length;e++){var r=this.feature_prop_matches[e],n=t.feature.properties[r[0]];if(null==n||-1===r[1].indexOf(n))return!1}if(this.context_prop_matches)for(var i=0;i<this.context_prop_matches.length;i++){var o=this.context_prop_matches[i],a=t[o[0]];if(null==a||-1===o[1].indexOf(a))return!1}return!0}},{key:"doesMatch",value:function(t){if(!this.enabled)return!1;if(this.is_built||this.build(),null!=this.zooms&&!this.zooms[t.zoom])return!1;if(!this.doPropMatches(t))return!1;var e;if(this.filter instanceof Function)try{e=this.filter(t)}catch(e){var r="Filter for this ".concat(this.full_name,": `filter: ").concat(this.filter_original,"` ");xi("error",r+="failed with error '".concat(e.message,"', stack trace: ").concat(e.stack),t.feature)}else e=null==this.filter;return!!e&&(this.children_to_parse&&(function(t,e,r){for(var n in e){var i,o=e[n];"object"!==yn(o)||Array.isArray(o)?(i="Layer value must be an object: cannot create layer '".concat(n,": ").concat(JSON.stringify(o),"'"),i+=", under parent layer '".concat(t.full_name,"'."),r[t.name]&&(i+=" The parent name '".concat(t.name,"' is also the name of a style, did you mean to create a 'draw' group"),t.parent&&(i+=" under '".concat(t.parent.name,"'")),i+=" instead?"),xi("warn",i)):zp(n,o,t,r)}}(this,this.children_to_parse,this.styles),delete this.children_to_parse),!0)}}]),t}();Up.id=0;var Rp,Dp=function(){wn(e,Up);var t=Tn(e);function e(r){var n;return vn(this,e),(n=t.call(this,r)).is_leaf=!0,n}return e}(),jp=function(){wn(e,Up);var t=Tn(e);function e(r){var n;return vn(this,e),(n=t.call(this,r)).is_tree=!0,n.layers=r.layers||[],n}return bn(e,[{key:"addLayer",value:function(t){this.layers.push(t)}},{key:"buildDrawGroups",value:function(t){var e=[],r=[];if(function t(e,r,n,i){var o=!1;if(0!==r.length){for(var a=0;a<r.length;a++){var s=r[a];s.is_leaf?s.doesMatch(e)&&(o=!0,n.push(s),i.push(s.id)):s.is_tree&&s.doesMatch(e)&&(o=!0,t(e,s.layers,n,i)||(n.push(s),i.push(s.id)))}return o}}(t,[this],e,r),0<e.length){var n=function(t){if(1<t.length){for(var e=t[0],r=1;r<t.length;r++)e+="/"+t[r];return e}return t[0]}(r);if(void 0===Pp[n]){for(var i=e.map((function(t){return t&&!1!==t.visible&&t.calculatedDraw})),o={},a=0;a<i.length;a++){var s=i[a];if(s)for(var l=0;l<s.length;l++){var u=s[l];for(var c in u)o[c]=!0}}for(var h in o)Pp[n]=Pp[n]||{},Pp[n][h]=function(t,e){for(var r,n=0,i=0;i<t.length;i++)t[i].length>n&&(n=t[i].length);if(0===n)return null;for(var o={visible:!0},a=0;a<n;a++)!function(n){r=[],t.forEach((function(t){t[n]&&t[n][e]&&-1===r.indexOf(t[n][e])&&r.push(t[n][e])})),0!==r.length&&(r.sort((function(t,e){return(t&&t.layer_name)>(e&&e.layer_name)?1:-1})),ya.apply(void 0,[o].concat(In(r))),delete o.layer_name)}(a);return!1===o.visible?null:o}(i,h),Pp[n][h]?(Pp[n][h].key=n+"/"+h,Pp[n][h].layers=e.map((function(t){return t&&t.full_name})),Pp[n][h].group=h):delete Pp[n][h];Pp[n]&&0===Object.keys(Pp[n]).length&&(Pp[n]=null)}return Pp[n]}}}]),e}(),Hp={rangeTransform:function(t){return"string"==typeof t&&"px2"===t.trim().slice(-3)?"".concat(parseFloat(t)," * context.meters_per_pixel_sq"):t}};function Qp(t){return-1<Op.indexOf(t)}function zp(t,e,r,n){var i,o={name:t,layer:e=null==e?{}:e,parent:r,styles:n},a=Ln(function(t){var e={},r={};for(var n in t)Qp(n)?e[n]=t[n]:r[n]=t[n];return[e,r]}(e),2),s=a[0],l=a[1],u=(i=l,0===Object.keys(i).length),c=new(u&&null!=r?Dp:jp)(Object.assign(o,s));return c.enabled&&(r&&r.addLayer(c),c.children_to_parse=u?null:l),c}var Vp=/^global\.(.+)$/,Gp=Rp={loadScene:function(t,e){var r=this,n=1<arguments.length&&void 0!==e?e:{},i=n.path,o=n.type,a=[];return this.loadSceneRecursive({url:t,path:i,type:o},null,a).then((function(t){return r.finalize(t)})).then((function(t){var e=t.config,n=t.bundle;return e?(0<a.length&&a.forEach((function(t){var e="Failed to import scene: ".concat(t.url);xi("error",e,t),r.trigger("error",{type:"scene_import",message:e,error:t,url:t.url})})),{config:e,bundle:n}):Promise.reject(a[0])}))},loadSceneRecursive:function(t,e,r){var n=this,i=t.url,o=t.path,a=(t.type,2<arguments.length&&void 0!==r?r:[]);if(!i)return Promise.resolve({});var s=new Ep(i,o,e);return s.load().then((function(t){if(null==t.import)return n.normalize(t,s),{config:t,bundle:s};Array.isArray(t.import)||(t.import=[t.import]);var e=[];return t.import.forEach((function(t){"object"===yn(t)&&(t=Ii(new Blob([JSON.stringify(t)]))),e.push(s.resourceFor(t))})),delete t.import,Promise.all(e.map((function(t){return n.loadSceneRecursive(t,s,a)}))).then((function(e){e.forEach((function(t){return n.normalize(t.config,t.bundle)}));var r=e.map((function(t){return t.config}));return t=ya.apply(void 0,In(r).concat([t])),n.normalize(t,s),{config:t,bundle:s}}))})).catch((function(t){return t.url=i,a.push(t),{}}))},normalize:function(t,e){return this.normalizeDataSources(t,e),this.normalizeFonts(t,e),this.normalizeTextures(t,e),this.hoistTextures(t,e),{config:t,bundle:e}},normalizeDataSources:function(t,e){for(var r in t.sources=t.sources||{},t.sources)this.normalizeDataSource(t.sources[r],e);return t},normalizeDataSource:function(t,e){if(t.url&&(t.url=e.urlFor(t.url)),t.scripts)for(var r in Array.isArray(t.scripts)&&(t.scripts=t.scripts.reduce((function(t,e){return t[e]=e,t}),{})),t.scripts)t.scripts[r]=e.urlFor(t.scripts[r]);return t},normalizeFonts:function(t,e){for(var r in t.fonts=t.fonts||{},t.fonts){var n;Array.isArray(t.fonts[r])?t.fonts[r].forEach((function(t){t.url=t.url&&e.urlFor(t.url)})):(n=t.fonts[r]).url=n.url&&e.urlFor(n.url)}return t},normalizeTextures:function(t,e){if(t.textures=t.textures||{},t.textures)for(var r in t.textures){var n=t.textures[r];n.url&&(n.url=e.urlFor(n.url))}},hoistTextures:function(t,e){var r=this;if(t.styles)for(var n in t.styles)!function(n){var i=t.styles[n],o=i.texture;"string"!=typeof o||t.textures[o]||(i.texture=r.hoistTexture(o,t,e)),i.material&&["emission","ambient","diffuse","specular","normal"].forEach((function(n){var o=null!=i.material[n]&&i.material[n].texture;"string"!=typeof o||t.textures[o]||(i.material[n].texture=r.hoistTexture(o,t,e))}))}(n);if(this.hoistStyleShaderUniformTextures(t,e,{include_globals:!1}),t.layers)for(var i=[t.layers];0<i.length;){var o=i.pop();if("object"===yn(o)&&!Array.isArray(o))for(var a in o)if("draw"===a){var s,l,u=o[a];for(var c in u)u[c].texture&&("string"!=typeof(s=u[c].texture)||t.textures[s]||(u[c].texture=this.hoistTexture(s,t,e))),u[c].outline&&u[c].outline.texture&&("string"!=typeof(l=u[c].outline.texture)||t.textures[l]||(u[c].outline.texture=this.hoistTexture(l,t,e)))}else{if(Qp(a))continue;i.push(o[a])}}},hoistStyleShaderUniformTextures:function(t,e,r){var n=this,i=r.include_globals;if(t.styles)for(var o in t.styles){var a=t.styles[o];a.shaders&&a.shaders.uniforms&&Zo.parseUniforms(a.shaders.uniforms).forEach((function(r){var o=r.type,a=r.value,s=r.key,l=r.uniforms;"sampler2D"!==o||"string"!=typeof a||t.textures[a]||!i&&Bp(a)||(l[s]=n.hoistTexture(a,t,e))}))}},hoistTexture:function(t,e,r){var n=Bp(t),i=n?t:r.urlFor(t),o=n?"texture-".concat(i):i;return e.textures[o]={url:i},o},applyGlobalProperties:function(t){if(!t.global||0===Object.keys(t.global).length)return t;var e=function t(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:".",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};for(var o in n=n?n+r:"",e){var a=n+o,s=e[o];"object"!==yn(i[a]=s)||Array.isArray(s)||t(s,r,a,i)}return i}(t.global);return function t(r){if("string"==typeof r){var n=function t(e,r,n){var i=2<arguments.length&&void 0!==n?n:[];if(-1<i.indexOf(e))xi({level:"warn",once:!0},"Global properties: cyclical reference detected",i);else{i.push(e);var o=Vp.exec(e);if(o){var a=o[1];if(a){var s=r[a];if(void 0!==s)return"string"==typeof s&&Vp.exec(s)?t(s,r,i):s;xi({level:"warn",once:!0},"Global property not found: "+e)}else xi({level:"warn",once:!0},"Invalid global property reference: "+e)}}}(r,e);void 0!==n&&(r=n)}else if(Array.isArray(r))for(var i=0;i<r.length;i++)r[i]=t(r[i]);else if("object"===yn(r))for(var o in r)r[o]=t(r[o]);return r}(t)},finalize:function(t){var e=t.config,r=t.bundle;return e?(e.global=e.global||{},e.scene=e.scene||{},e.cameras=e.cameras||{},e.lights=e.lights||{},e.styles=e.styles||{},e.layers=e.layers||{},e.camera&&(e.cameras.default=e.camera),0===Object.keys(e.cameras).length&&(e.cameras.default={}),0!==Object.keys(e.lights).length&&!Object.keys(e.lights).every((function(t){return!1===e.lights[t].visible}))||(e.lights.default_light={type:"directional"}),{config:e,bundle:r}):{}}};Lo(Rp);var qp=function(){function t(){vn(this,t),this.coords={},this.max_proxy_descendant_depth=6,this.max_proxy_ancestor_depth=10}return bn(t,[{key:"sourceTiles",value:function(t,e){return this.coords[t.key]&&this.coords[t.key].sources&&this.coords[t.key].sources[e.name]}},{key:"addTile",value:function(t){var e=t.coords.key,r=this.coords[e];(r=r||(this.coords[e]={descendants:0})).sources||(r.sources={}),r.sources[t.source.name]||(r.sources[t.source.name]={});for(var n=(r.sources[t.source.name][t.style_zoom]=t).coords.z-1;0<=n;n--){var i=wa.coordinateAtZoom(t.coords,n);this.coords[i.key]||(this.coords[i.key]={descendants:0}),this.coords[i.key].descendants++}}},{key:"removeTile",value:function(t){var e=this.sourceTiles(t.coords,t.source),r=t.coords.key;e&&(delete e[t.style_zoom],0===Object.keys(e).length&&(delete this.coords[r].sources[t.source.name],0===Object.keys(this.coords[r].sources).length&&(delete this.coords[r].sources,0===this.coords[r].descendants&&delete this.coords[r])));for(var n=t.coords.z-1;0<=n;n--){var i=wa.coordinateAtZoom(t.coords,n);this.coords[i.key]&&0<this.coords[i.key].descendants&&(this.coords[i.key].descendants--,0!==this.coords[i.key].descendants||this.coords[i.key].sources||delete this.coords[i.key])}}},{key:"getAncestor",value:function(t,e){var r=t.coords,n=t.style_zoom,i=t.source,o=1<arguments.length&&void 0!==e?e:1;if(!(o>this.max_proxy_ancestor_depth)){if(n>i.max_coord_zoom){var a=this.sourceTiles(r,i);if(a)for(var s=n-1;s>=i.max_coord_zoom;s--)if(a[s]&&a[s].loaded)return a[s];n=i.max_coord_zoom}n--;var l=wa.coordinateAtZoom(r,r.z-1),u=this.sourceTiles(l,i);return u&&u[n]&&u[n].loaded?u[n]:0<l.z?this.getAncestor({coords:l,style_zoom:n,source:i},o+1):void 0}}},{key:"getDescendants",value:function(t,e){var r=t.coords,n=t.style_zoom,i=t.source,o=1<arguments.length&&void 0!==e?e:1,a=[];if(n>=i.max_coord_zoom){var s=this.sourceTiles(r,i);if(s)for(var l=Math.max($n.default_view_max_zoom,n+this.max_proxy_descendant_depth),u=n+1;u<=l;u++)if(s[u]&&s[u].loaded)return a.push(s[u]),a;return a}if(this.coords[r.key]&&0<this.coords[r.key].descendants){n++;for(var c=wa.childrenForCoordinate(r),h=0;h<c.length;h++){var f=c[h],p=this.sourceTiles(f,i);p&&p[n]&&p[n].loaded?a.push(p[n]):o<=this.max_proxy_descendant_depth&&f.z<=i.max_coord_zoom&&a.push.apply(a,In(this.getDescendants({coords:f,source:i,style_zoom:n},o+1)))}}return a}}]),t}(),Kp=function(){function t(e,r,n,i){vn(this,t),Object.assign(this,e),this.placed=null,this._tile=i;var o=$n.unitsPerMeter(i.coords.z)*Math.pow(2,n-i.style_zoom);this.layout=Object.assign({},e.layout),this.layout.repeat_scale=.75,this.layout.repeat_distance=this.layout.repeat_distance||0,this.layout.repeat_distance/=o,this.position=$n.tileSpaceToMeters(this.position,i.coords.z,i.min),this._worldToScreen=r,this._screenSpaceBoundingBox=void 0,this._boundingCircles=void 0}return bn(t,[{key:"getTile",value:function(){return this._tile}},{key:"isFlat",value:function(){return this.is_flat}},{key:"getScreenSpaceBoundingBox",value:function(){var t,e,r,n,i,o,a;return this._screenSpaceBoundingBox||((t=this._worldToScreen(this.position,!0))[0]+=this.offset[0],t[1]+=this.offset[1],e=this.size[0]/2+this.layout.buffer[0],r=this.size[1]/2+this.layout.buffer[1],n=t[0]-e,i=t[0]+e,o=t[1]-r,a=t[1]+r,this._screenSpaceBoundingBox={left:n,bottom:a,right:i,top:o}),this._screenSpaceBoundingBox}},{key:"getBoundingCircles",value:function(){return this._boundingCircles||(this._boundingCircles="point"===this.type?this._convertSidesToScreenSpaceCircles():this._convertCirclesToScreenSpace()),this._boundingCircles}},{key:"_convertSidesToScreenSpaceCircles",value:function(){var t=this._tile.coords.z,e=this._tile.min,r=$n.tileSpaceToMeters([this.sides[0],this.sides[1]],t,e),n=$n.tileSpaceToMeters([this.sides[2],this.sides[3]],t,e),i=Ln(this._worldToScreen(r,!0),2),o=i[0],a=i[1],s=Ln(this._worldToScreen(n,!0),2);return Lc(o,a,s[0],s[1],this.size[1]/2+this.layout.buffer[1])}},{key:"_convertCirclesToScreenSpace",value:function(){for(var t=[],e=this.circles,r=this._tile.coords.z,n=this._tile.min,i=0;i<e.length-2;i+=3){var o=$n.tileSpaceToMeters([e[i],-e[i+1]],r,n),a=e[i+2]/$n.unitsPerMeter(r),s=[o[0]+a,o[1]],l=this._worldToScreen(o,!0),u=this._worldToScreen(s,!0),c=Jn.getLineLength(l[0],l[1],u[0],u[1]);t.push(l[0],l[1],c)}return t}}]),t}(),Yp=function(t,e,r,n,i,o){Xp=Wp,Wp={};var a={},s={},l=[],u=r.worldToScreen.bind(r),c=new $p(o);for(var h in t.forEach((function(t){for(var r in t.meshes)t.meshes[r].forEach((function(r){if(r.labels){for(var n in c.trackMesh(r),r.labels["non-collision"]){var i=Zp(r.labels["non-collision"][n],r,u,e,t);i.label.text_data&&c.insertLabel(i,t)}for(var o in r.labels.collision){var l;a[o]||(l=Zp(r.labels.collision[o],r,u,e,t),a[o]=l.label,s[o]=l)}}}))})),s){var f=s[h];f.linked&&(f.linked=s[f.linked]),l.push(f)}var p=r.getViewport(),A=p.width,d=p.height;return So.startTile("main",{apply_repeat_groups:!0,return_hidden:!0,grid_index:new Bo(A,d,30)}),So.addStyle("main","main"),So.collide(l,"main","main").then((function(t){return t.forEach((function(t){var e,r,i,o,a,s,l=t.mesh,u=t.label.getTile();l.valid&&(!(e=0)!==t.show||n&&t.label.breach&&!Xp[t.label.id]||(e=1),e&&(Wp[t.label.id]=!0),t.label.text_data&&c.insertLabel(t,u),r=l.vertex_layout.offset.a_shape,i=l.vertex_layout.stride,a=(o=l.vertex_layout.attribs.find((function(t){return"a_shape"===t.name}))).byte_size/o.size,r+=3*a,s=!0,t.ranges.forEach((function(t){if(s){for(var n=0;n<t[1];n++){if(l.vertex_data[t[0]+n*i+r]===e)return void(s=!1);l.vertex_data[t[0]+n*i+r]=e}c.trackMesh(l)}})))})),c.createTextures(i).then((function(){return c.updateMeshes()}))})).then((function(e){e.forEach((function(t){return t.valid&&t.upload()})),t.forEach((function(t){t.labeled=!0})),l=[],s={},a={}}))},Wp={},Xp={},Jp=120===new Uint8Array(new Uint32Array([305419896]).buffer)[0];function Zp(t,e,r,n,i){var o=t.container,a=o.label,s=o.linked,l=t.ranges;return{label:new Kp(a,r,n,i),linked:s,ranges:l,mesh:e}}var $p=function(){function t(e){vn(this,t),this.textureManager=Oo(e),this.tiles={},this.meshes=[],this.containers=[]}return bn(t,[{key:"insertLabel",value:function(t,e){var r=t.label.text_data,n=r.text_settings_key,i=r.text,o=r.text_info;this.containers.push(t);var a=this._ensureTextSection(e,n);a[i]?t.label.text_data.text_info=a[i]:a[i]=o}},{key:"trackMesh",value:function(t){-1===this.meshes.indexOf(t)&&this.meshes.push(t)}},{key:"updateMeshes",value:function(){var t=this;return this.containers.forEach((function(e){var r,n,i,o,a,s,l,u,c,h;e.label.text_data&&(r=e.label.getTile(),(n=e.mesh).valid?(i=e.label.type,o=e.label.text_data.text_info,t.tiles[r.id]&&t.tiles[r.id].textures&&(a=t.tiles[r.id].textures[0],n.uniforms.u_texture=a,-1===n.textures.indexOf(a)&&n.textures.push(a),"point"===i||"straight"===i?(s="point"===i?o.align[e.label.align].texcoords:o.texcoords[i].texcoord,t.setTexCoords(n,e,s)):"curved"===i&&(l=o.segments.length,u=o.texcoords_stroke,c=o.texcoords.curved,t.setTexCoords(n,e,(function(t){return t<l?u[t]:c[t-l].texcoord}))))):t.tiles[r.id]&&t.tiles[r.id].textures&&(h=t.tiles[r.id].textures[0],t.textureManager.release(h)))})),this.meshes}},{key:"setTexCoords",value:function(t,e,r){var n,i,o,a,s,l,u=r instanceof Function;u||(i=(n=Ln(r,4))[0],o=n[1],a=n[2],s=n[3],l=[[i,o],[a,o],[a,s],[i,s]]);var c=t.vertex_layout.stride,h=new DataView(t.vertex_data.buffer),f=t.vertex_layout.offset.a_texcoord;e.ranges.forEach((function(t,e){var n,i,o,a,s,p=Ln(t,3),A=p[0],d=p[1],g=p[2];u&&(i=(n=Ln(r(e),4))[0],o=n[1],a=n[2],s=n[3],l=[[i,o],[a,o],[a,s],[i,s]]);for(var y=g?d/2:0;y<d;y++){var v=l[y%4],m=A+y*c;h.setUint16(m+f,65535*v[0],Jp),h.setUint16(m+f+2,65535*v[1],Jp)}}))}},{key:"createTextures",value:function(t){var e=this;return Promise.all(Object.values(this.tiles).map((function(r){var n=r.id,i=r.key,o=r.texts;return e._createTexturesForTile(t,o,"labels-".concat(i,"-").concat(n),n,e.textureManager).then((function(t){t.length&&(t.forEach((function(t){e.textureManager.retain(t),1<e.textureManager.getRetainCount(t)&&e.textureManager.release(t)})),e.tiles[n].textures=t)}))})))}},{key:"_createTexturesForTile",value:function(t,e,r,n,i){var o=new jc,a=o.setTextureTextPositions(e);return o.rasterize(e,a,n,r,t,i)}},{key:"_ensureTile",value:function(t){var e=t.id,r=t.key;return this.tiles[e]||(this.tiles[e]={id:e,key:r,texts:{}}),this.tiles[e]}},{key:"_ensureTextSection",value:function(t,e){var r=this._ensureTile(t).texts;return r[e]||(r[e]={}),r[e]}}]),t}(),tA=function(){function t(e){var r=this,n=e.scene,i=e.view;vn(this,t),this._scene=n,this._view=i,this._visible_tiles={},this._pyramid=new qp,this._visible_coords={},this._building_tiles=null,this._renderable_tiles=[],this._active_styles=[],this._tile_visibility_counters={},this._update_labels_on_queue_check=!1,this._all_visible_tiles_are_cached=!1,this._debouncedUpdateLabels=Ei(this._updateLabels.bind(this),100,200),this._main_thread_target=["TileManager",this._scene.id].join("_"),ui.addTarget(this._main_thread_target,this),this._keepCoordinate=this._keepCoordinate.bind(this),this._removeTilesFilter=this._removeTilesFilter.bind(this),this._removeCachedTilesFilter=this._removeCachedTilesFilter.bind(this),this._is_labeled=!1,this._tile_cache=new H.util.Cache(function(){var t=.1;return navigator&&navigator.deviceMemory?t=5*navigator.deviceMemory/100:window&&window.screen&&(t=window.screen.width/512*window.screen.height/512*.03*3,t=Math.min(t,1)),1024*t*1024*1024}(),(function(t,e,n){r._visible_tiles[t]&&r._visible_tiles[t]===e||e.destroy()}))}return bn(t,[{key:"destroy",value:function(){this._tile_cache.removeAll(),this.forEachVisibleTile((function(t){return t.destroy()})),this._visible_tiles={},this._pyramid=null,this._visible_coords={},this._scene=null,this._view=null}},{key:"keepTile",value:function(t){this._visible_tiles[t.key]=t,this._pyramid.addTile(t)}},{key:"hasTile",value:function(t){return void 0!==this._visible_tiles[t]}},{key:"_forgetTile",value:function(t){var e,r;this.hasTile(t)&&(e=this._visible_tiles[t],this._pyramid.removeTile(e),delete this._visible_tiles[t],e.loaded?this._tile_cache.add(e.key,e,function(t){var e=0;for(var r in t.meshes)for(var n=t.meshes[r],i=0;i<n.length;i++){var o=n[i];e+=o.buffer_size;for(var a=0;a<o.textures.length;a++)e+=t.textureManager.getByteLength(o.textures[a])}return e}(e)):(r=this._tile_cache.get(e.key))?this._tile_cache.drop(r.key):e.destroy(),this._tileBuildStop(e))}},{key:"removeTile",value:function(t){this._forgetTile(t),this._scene.requestRedraw()}},{key:"forEachVisibleTile",value:function(t){for(var e in this._visible_tiles)t(this._visible_tiles[e])}},{key:"removeTiles",value:function(t){for(var e in this._visible_tiles)t(this._visible_tiles[e])&&this.removeTile(e)}},{key:"removeCachedTiles",value:function(t){var e=this;this._tile_cache.forEach((function(r,n){t(n)&&e._tile_cache.drop(r)}))}},{key:"updateTilesForView",value:function(t){var e=0<arguments.length&&void 0!==t&&t;this._visible_coords={};for(var r=this._view.findVisibleTileCoordinates(),n=0;n<r.length;n++){var i=r[n];this._visible_coords[i.key]=i}this.updateTileStates(e)}},{key:"updateTileStates",value:function(t){var e=0<arguments.length&&void 0!==t&&t;for(var r in this._all_visible_tiles_are_cached=!0,this._visible_coords)this._keepCoordinate(r,e);this._all_visible_tiles_are_cached&&(this._is_labeled=!1,this._debouncedUpdateLabels()),this._tile_cache.removeAll(this._removeCachedTilesFilter),this._updateProxyTiles(),this.removeTiles(this._removeTilesFilter),this._updateRenderableTiles(),this._updateActiveStyles()}},{key:"_removeTilesFilter",value:function(t){if(t.style_zoom===this._view.lookAtManipulator.getLookAtData().tile_level){if(this._visible_coords[t.coords.key])return!1;for(var e in this._visible_coords)if(wa.isDescendant(t.coords,this._visible_coords[e]))return!1}return!t.isProxy()}},{key:"_updateLabels",value:function(){var t,e=this;this._building_tiles&&0!==Object.keys(this._building_tiles).length||(jc.pruneTextCache(),t=this._renderable_tiles.sort(eA),Yp(t,function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2,n=Math.pow(10,r);return Math.round(Math.floor(t*e)/e*n)/n}(this._view.lookAtManipulator.getLookAtData().zoom,2),this._view.lookAtManipulator,this.isLoadingVisibleTiles(),this._scene.gl,this._scene.id).then((function(){e._is_labeled=!ko.hasPendingTasks(),e._scene.immediateRedraw(),e._update_labels_on_queue_check=!1})))}},{key:"_updateProxyTiles",value:function(){var t,e=this,r=this._view.lookAtManipulator.getZoomDirection();0!==r&&(t=!1,this.forEachVisibleTile((function(n){var i;if(n.setProxyFor(null),1===r)n.built||(i=e._pyramid.getAncestor(n))&&(i.setProxyFor(n),t=!0);else if(-1===r&&!n.built)for(var o=e._pyramid.getDescendants(n),a=0;a<o.length;a++)o[a].setProxyFor(n),t=!0})),t||this._view.lookAtManipulator.resetZoomDirection())}},{key:"getRenderableTiles",value:function(){return this._renderable_tiles}},{key:"_updateRenderableTiles",value:function(){for(var t in this._renderable_tiles=[],this._visible_tiles){var e=this._visible_tiles[t],r=this._tile_cache.get(t);e.loaded?(this._renderable_tiles.push(e),r&&r!==e&&this._tile_cache.drop(t)):r&&(r.generation===this._scene.generation?this._renderable_tiles.push(r):this._tile_cache.drop(t))}return this._renderable_tiles}},{key:"getWorkerForTile",value:function(t,e){return e.has_volatile_data?this._scene.getWorkers(1)[0]:e.tiled?this._scene.getWorkers(0)[Math.abs(t.x+t.y+t.z)%this._scene.num_workers]:this._scene.getWorkers(0)[e.id%this._scene.num_workers]}},{key:"getActiveStyles",value:function(){return this._active_styles}},{key:"_updateActiveStyles",value:function(){for(var t=this._renderable_tiles,e={},r=0;r<t.length;r++){var n=t[r];Object.keys(n.meshes).forEach((function(t){return e[t]=!0}))}return this._active_styles=Object.keys(e),this._active_styles}},{key:"isLoadingVisibleTiles",value:function(){var t=!1;for(var e in this._visible_tiles)if(!this._visible_tiles[e].built){t=!0;break}return t}},{key:"updateTilesVisibilityCounters",value:function(){var t=this;Object.keys(this._visible_coords).forEach((function(e){e in t._tile_visibility_counters||(t._tile_visibility_counters[e]=0)}));var e=Object.keys(this._tile_visibility_counters),r=[];e.forEach((function(e){e in t._visible_coords?(t._tile_visibility_counters[e]++,30<=t._tile_visibility_counters[e]&&r.push(t._visible_coords[e])):(t._tile_visibility_counters[e]--,t._tile_visibility_counters[e]<=0&&delete t._tile_visibility_counters[e])})),r.length&&this.loadCoordinates(r)}},{key:"loadCoordinates",value:function(t){var e=this;t.sort((function(t,r){var n=e._view.lookAtManipulator.getLookAtData().position,i=$n.metersPerTile(t.z)/2,o=$n.metersForTile(t);o.x+=i,o.y-=i;var a=$n.metersForTile(r);a.x+=i,a.y-=i;var s=Math.abs(n[0]-o.x)+Math.abs(n[1]-o.y),l=Math.abs(n[0]-a.x)+Math.abs(n[1]-a.y);return(t.center_dist=s)<(r.center_dist=l)?-1:l===s?0:1})),t.forEach((function(t){return e.loadCoordinate(t)}))}},{key:"_keepCoordinate",value:function(t,e){var r=1<arguments.length&&void 0!==e&&e,n=this._visible_coords[t];if(n.z===this._view.center_tile.z)for(var i in this._scene.sources){var o,a,s,l=this._scene.sources[i];l.builds_geometry_tiles&&l.includesTile(n,this._view.lookAtManipulator.getLookAtData().tile_level)&&(o=wa.normalizedKey(n,l,this._view.lookAtManipulator.getLookAtData().tile_level))&&!this.hasTile(o)&&((a=r&&this._tile_cache.get(o))||(this._all_visible_tiles_are_cached=!1),s=a||new wa({source:l,coords:n,worker:this.getWorkerForTile(n,l),style_zoom:Bi.zoomToTileLevel(n.z),view:this._view,sceneId:this._scene.id}),"ObjectSource"===l.config.type&&(s.syncedAt=l.getSyncedAt()),this.keepTile(s))}}},{key:"loadCoordinate",value:function(t){if(t.z===this._view.center_tile.z)for(var e in this._scene.sources){var r,n=this._scene.sources[e];n.builds_geometry_tiles&&n.includesTile(t,this._view.lookAtManipulator.getLookAtData().tile_level)&&(r=wa.normalizedKey(t,n,this._view.lookAtManipulator.getLookAtData().tile_level),this.hasTile(r)&&this.buildTile(this._visible_tiles[r]))}}},{key:"buildTile",value:function(t,e){this._building_tiles&&this._building_tiles[t.key]||t.built&&t.generation===this._scene.generation||(this._tileBuildStart(t.key),t.build(this._scene.generation,e))}},{key:"buildTileStylesCompleted",value:function(t){var e=t.tile,r=t.progress;if(null==this._visible_tiles[e.key])wa.abortBuild(e,this._scene.id);else if(e.generation!==this._scene.generation)wa.abortBuild(e,this._scene.id);else{if(e.id<this._visible_tiles[e.key].id)return void wa.abortBuild(e,this._scene.id);e=this._visible_tiles[e.key].merge(e),r.done&&(e.built=!0),e.buildMeshes(this._scene.styles,r),this.updateTileStates(),this._scene.requestRedraw()}r.done&&this._tileBuildStop(e)}},{key:"buildTileError",value:function(t){this._forgetTile(t.key),wa.abortBuild(t,this._scene.id)}},{key:"_tileBuildStart",value:function(t){this._is_labeled=!1,this._building_tiles=this._building_tiles||{},this._building_tiles[t]=!0}},{key:"_tileBuildStop",value:function(t){this._building_tiles&&(t.source&&t.source.hasLabeledData()&&(this._update_labels_on_queue_check=!0),delete this._building_tiles[t.key],ko.removeForTile(t.id),this.checkBuildQueue())}},{key:"isReady",value:function(){return this._is_labeled&&!this.isLoadingVisibleTiles()}},{key:"checkBuildQueue",value:function(){this._building_tiles&&0!==Object.keys(this._building_tiles).length||(this._building_tiles=null,this._update_labels_on_queue_check?this._updateLabels():(this._is_labeled=!ko.hasPendingTasks(),this._scene.immediateRedraw()))}},{key:"_removeCachedTilesFilter",value:function(t,e){var r=e.source;return!this._visible_tiles[t]&&(e.generation!==this._scene.generation||"ObjectSource"===r.config.type&&r.getSyncedAt()>e.syncedAt)}}]),t}();function eA(t,e){var r=t.coords,n=e.coords;return r.z-n.z||r.x-n.x||r.y-n.y}function rA(t){vn(this,rA),this.defaults={},this.defaults.culling=!0,this.defaults.culling_face=t.BACK,this.defaults.blending=!1,this.defaults.blending_src=t.ONE_MINUS_SRC_ALPHA,this.defaults.blending_dst=t.ONE_MINUS_SRC_ALPHA,this.defaults.blending_src_alpha=t.ONE,this.defaults.blending_dst_alpha=t.ONE_MINUS_SRC_ALPHA,this.defaults.depth_write=!0,this.defaults.depth_test=!0,t.depthFunc(t.LESS),this.culling=new nA({cull:this.defaults.culling,face:this.defaults.culling_face},(function(e){e.cull?(t.enable(t.CULL_FACE),t.cullFace(e.face)):t.disable(t.CULL_FACE)})),this.blending=new nA({blend:this.defaults.blending,src:this.defaults.blending_src,dst:this.defaults.blending_dst,src_alpha:this.defaults.blending_src_alpha,dst_alpha:this.defaults.blending_dst_alpha},(function(e){e.blend?(t.enable(t.BLEND),e.src_alpha&&e.dst_alpha?t.blendFuncSeparate(e.src,e.dst,e.src_alpha,e.dst_alpha):t.blendFunc(e.src,e.dst)):t.disable(t.BLEND)})),this.depth_write=new nA({depth_write:this.defaults.depth_write},(function(e){t.depthMask(e.depth_write)})),this.depth_test=new nA({depth_test:this.defaults.depth_test},(function(e){e.depth_test?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST)}))}var nA=function(){function t(e,r){vn(this,t),r(e),this.value=e,this.setup=r}return bn(t,[{key:"get",value:function(){return this.value}},{key:"set",value:function(t){JSON.stringify(this.value)!==JSON.stringify(t)&&(this.setup(t),this.value=t)}}]),t}(),iA=function(){function t(){vn(this,t),this.canvas=null,this.gl=null,this.screenshot_canvas=null,this.screenshot_context=null,this.queue_screenshot=null,this.video_capture=null}return bn(t,[{key:"setCanvas",value:function(t,e){this.canvas=t,this.gl=e}},{key:"screenshot",value:function(t){var e=this,r=(0<arguments.length&&void 0!==t?t:{}).background;return null!=this.queue_screenshot||(this.queue_screenshot={background:r},this.queue_screenshot.promise=new Promise((function(t,r){e.queue_screenshot.resolve=t,e.queue_screenshot.reject=r}))),this.queue_screenshot.promise}},{key:"completeScreenshot",value:function(){if(null!=this.queue_screenshot){var t=this.canvas.width,e=this.canvas.height,r=new Uint8Array(t*e*4);this.gl.readPixels(0,0,t,e,this.gl.RGBA,this.gl.UNSIGNED_BYTE,r);for(var n=(n=this.queue_screenshot.background)&&"transparent"!==n?vo.parseColor(n).slice(0,3).map((function(t){return 255*t})):null,i=new Uint8ClampedArray(t*e*4),o=0;o<e;o++)for(var a=0;a<t;a++){var s=4*((e-o-1)*t+a),l=4*(o*t+a),u=r[3+s];i[0+l]=255*r[0+s]/u,i[1+l]=255*r[1+s]/u,i[2+l]=255*r[2+s]/u,i[3+l]=u,n&&(u/=255,i[0+l]=i[0+l]*u+n[0]*(1-u),i[1+l]=i[1+l]*u+n[1]*(1-u),i[2+l]=i[2+l]*u+n[2]*(1-u),i[3+l]=255)}this.screenshot_canvas=this.screenshot_canvas||document.createElement("canvas");var c=this.screenshot_canvas;c.width=t,c.height=e,this.screenshot_context=this.screenshot_context||c.getContext("2d");var h=this.screenshot_context,f=new ImageData(i,t,e);h.putImageData(f,0,0);for(var p=c.toDataURL("image/png"),A=atob(p.slice(22)),d=new Uint8Array(A.length),g=0;g<A.length;++g)d[g]=A.charCodeAt(g);var y=new Blob([d],{type:"image/png"});this.queue_screenshot.resolve({url:p,blob:y,type:"png"}),this.queue_screenshot=null}}},{key:"startVideoCapture",value:function(){var e=this;if("function"!=typeof window.MediaRecorder||!this.canvas||"function"!=typeof this.canvas.captureStream)return xi("warn","Video capture (Canvas.captureStream and/or MediaRecorder APIs) not supported by browser"),!1;if(this.video_capture)return xi("warn","Video capture already in progress, call Scene.stopVideoCapture() first"),!1;try{var r=this.video_capture={};r.chunks=[],r.stream=this.canvas.captureStream(),r.options={mimeType:"video/webm"},r.media_recorder=new MediaRecorder(r.stream,r.options),r.media_recorder.ondataavailable=function(t){var n,i;0<t.data.size&&r.chunks.push(t.data),r.resolve&&(i=Ii(n=new Blob(r.chunks,{type:r.options.mimeType})),r.stream&&(r.stream.getTracks()||[]).forEach((function(t){t.stop(),r.stream.removeTrack(t)})),r.stream=null,r.media_recorder=null,e.video_capture=null,r.resolve({url:i,blob:n,type:"webm"}))},r.media_recorder.start()}catch(t){return this.video_capture=null,xi("error","Scene video capture failed",t),!1}return!0}},{key:"stopVideoCapture",value:function(){var t=this;return this.video_capture?(this.video_capture.promise=new Promise((function(e,r){t.video_capture.resolve=e,t.video_capture.reject=r})),this.video_capture.media_recorder.stop(),this.video_capture.promise):(xi("warn","No scene video capture in progress, call Scene.startVideoCapture() first"),Promise.resolve({}))}}]),t}(),oA=function(){function t(){vn(this,t),this.sources={},this.styles={},this.layers={},this.tiles={},this._isConfigured=!1}return bn(t,[{key:"init",value:function(t,e,r,n,i,o,a){return this.setMeshVariantMaxLife(a),this.scene_id=t,this.textureManager=Oo(t),this._worker_id=e,xi.setLevel(r),Bi.device_pixel_ratio=n,cu.setElementIndexUint(i),Jo.setPrefix(this._worker_id),this._style_manager=new zh,this._importExternalScripts(o),Ec.id_prefix=e,this._isConfigured=!1,e}},{key:"dispose",value:function(){this._last_config_sources=null,this._config_sources=null,this.sources=null,this._style_manager=null,this.styles=null,this.layers=null,this.tiles=null}},{key:"_importExternalScripts",value:function(t){var e;0!==t.length&&(xi("debug","loading custom data source scripts in worker:",t),e=Object.getOwnPropertyNames(window),importScripts.apply(void 0,In(t)),Object.getOwnPropertyNames(window).forEach((function(t){-1===e.indexOf(t)&&(self[t]=window[t])})))}},{key:"updateConfig",value:function(t,e){var r,n=t.config,i=t.generation,o=t.introspection;for(var a in n=JSON.parse(n),r=e,Object.assign(Jl,r),this._generation=i,this._isConfigured=!1,n.layers)n.layers[a]&&(n.layers[a].data=Bi.stringsToFunctions(n.layers[a].data));this.global=Bi.stringsToFunctions(n.global),this._createDataSources(n),n.styles=Bi.stringsToFunctions(n.styles,vo.wrapFunction),this.styles=this._style_manager.build(n.styles),self.is_fake_worker=li.is_main,this._style_manager.initStyles({generation:this._generation,styles:this.styles,sources:this.sources,introspection:o,id:this.scene_id}),delete self.is_fake_worker,this.layers=function(t,e){Pp={};var r={};for(var n in t){var i=t[n];i&&(r[n]=zp(n,i,null,e))}return r}(n.layers,this._style_manager.styles),this._configuring=this._syncTextures(n.textures)}},{key:"setMeshVariantMaxLife",value:function(t){this.meshVariantMaxLife=t}},{key:"_createDataSources",value:function(t){var e=this;this._last_config_sources=this._config_sources||{},this._config_sources=t.sources;var r=this.sources,n=[];for(var i in t.sources=Bi.stringsToFunctions(t.sources),this.sources={},self.is_fake_worker=li.is_main,t.sources)if(JSON.stringify(this._last_config_sources[i])!==JSON.stringify(t.sources[i])){var o=void 0;try{o=Mi.create(Object.assign({},t.sources[i],{name:i}),this.sources)}catch(r){xi("error","Error creating source.",r.message,t.sources[i]);continue}o&&(this.sources[i]=o,n.push(i))}else this.sources[i]=r[i];delete self.is_fake_worker,n.forEach((function(t){for(var r in e.tiles)e.tiles[r].source===t&&delete e.tiles[r]}))}},{key:"awaitConfiguration",value:function(){return this._configuring}},{key:"_onConfig",value:function(e){var r=this;if((this._isConfigured=!0)!==e.loaded)e.loading=!0,e.loaded=!1,e.error=null,this._loadTileSourceData(e).then((function(){if(r.getTile(e.id)){e.loading=!1,e.loaded=!0;try{wa.buildGeometry(e,r)}catch(t){e.error=t.toString(),ui.postMessage("TileManager_".concat(r.scene_id,".buildTileError"),wa.slice(e))}}else xi("trace","stop tile build after data source load because tile was removed. Key: ".concat(e.key,", id: ").concat(e.id))}),(function(t){e.loading=!1,e.loaded=!1,e.error=t.stack,xi("error","tile load error for tile with key ".concat(e.key," and id ").concat(e.id,": ").concat(e.error)),ui.postMessage("TileManager_".concat(r.scene_id,".buildTileError"),wa.slice(e))}));else{xi("trace","used worker cache for tile with key ".concat(e.key," and id ").concat(e.id));try{wa.buildGeometry(e,this)}catch(t){e.error=t.toString(),ui.postMessage("TileManager_".concat(this.scene_id,".buildTileError"),wa.slice(e))}}}},{key:"buildTile",value:function(t){var e,r=t.tile,n=this.getTile(r.id);n&&n.loading||(r=this.tiles[r.id]=Object.assign(n||{},r),this._isConfigured?this._onConfig(r):(e=this).awaitConfiguration().then((function(){return e._onConfig(r)})))}},{key:"_loadTileSourceData",value:function(t){return this.sources[t.source]?this.sources[t.source].load(t):(t.source_data={},Promise.resolve(t))}},{key:"getTile",value:function(t){return this.tiles[t]}},{key:"removeTile",value:function(t){var e=this.tiles[t];null!=e&&(!0===e.loading&&(xi("trace","cancel tile load for tile id ".concat(t)),e.loading=!1,wa.cancel(e)),delete this.tiles[t],xi("trace","remove tile from cache, tile id: ".concat(t)))}},{key:"queryFeatures",value:function(t){var e=this,r=t.filter,n=t.visible,i=t.geometry,o=t.tile_ids,a=[],s=o.map((function(t){return e.tiles[t]})).filter((function(t){return t}));return null!=r&&(r=-1<["{","["].indexOf(r[0])?JSON.parse(r):r,r=Bi.stringsToFunctions(r,vo.wrapFunction)),r=Mp(r,Hp),s.forEach((function(t){for(var o in t.source_data.layers)!function(o){t.source_data.layers[o].features.forEach((function(s){var l,u;!0===n&&s.generation!==e._generation||!1===n&&s.generation===e._generation||((l=vo.getFeatureParseContext(s,t,e.global)).source=t.source,l.layer=o,r(l)&&(u={type:s.type,properties:s.properties},!0===i&&(u.geometry=$n.copyGeometry(s.geometry),$n.tileSpaceToLatlng(u.geometry,t.coords.z,t.min)),a.push(u)))}))}(o)})),a}},{key:"resetFeatureSelection",value:function(){Jo.reset()}},{key:"_syncTextures",value:function(t){var e=[];return t&&e.push.apply(e,In(Object.keys(t))),xi("trace","sync textures to worker:",e),0<e.length?this.textureManager.syncTexturesToWorker(e):Promise.resolve()}},{key:"profile",value:function(t){console.profile("worker ".concat(this._worker_id,": ").concat(t))}},{key:"profileEnd",value:function(t){console.profileEnd("worker ".concat(this._worker_id,": ").concat(t))}},{key:"terminate",value:function(){this.dispose()}}]),t}();(li.is_worker||self.H&&self.H.DEBUG)&&ui.addTarget("self",new oA);var aA=function(){function t(e,r){vn(this,t),r=r||{},Lo(this),this.id=t.id++,this.textureManager=Oo(this.id),this.initialized=!1,this.initializing=null,this.sources={},this.view=new Eh(this,r),this.tile_manager=new tA({scene:this,view:this.view}),this.num_workers=r.numWorkers||2,!0===r.disableVertexArrayObjects&&(sa.disabled=!0),Bi.device_pixel_ratio=r.devicePixelRatio,this.config=null,this.config_source=e,this.config_bundle=null,this.last_valid_config_source=null,this.styles=null,this.style_manager=new zh,this.building=null,this.dirty=!0,r.preUpdate&&this.subscribe({pre_update:r.preUpdate}),r.postUpdate&&this.subscribe({post_update:r.postUpdate}),this.render_loop=!r.disableRenderLoop,this.render_loop_active=!1,this.render_loop_stop=!1,this.render_count=0,this.last_render_count=0,this.render_count_changed=!1,this.frame=0,this.last_main_render=-1,this.last_selection_render=-1,this.media_capture=new iA,this.selection=null,this.introspection=!0===r.introspection,this.viewport=r.viewport,this.adjustMeshVariantMaxLife(),this.container=r.container,this.canvas=null,this.contextOptions=r.webGLContextOptions,this.lights=null,this.background=null,this.createListeners(),this.updating=0,this.generation=t.generation,this.last_complete_generation=t.generation,this.log_level=r.logLevel||"warn",xi.setLevel(this.log_level),xi.reset()}return bn(t,[{key:"load",value:function(t,e){var r=this,n=0<arguments.length&&void 0!==t?t:null,i=1<arguments.length&&void 0!==e?e:{};return this.initializing||(xi.reset(),this.updating++,this.initialized=!1,this.initial_build_time=null,(i="string"==typeof i?{base_path:i}:i).blocking=void 0===i.blocking||i.blocking,!1!==this.render_loop&&this.setupRenderLoop(),this.createCanvas(),this.textureManager.destroy(this.gl),this.initializing=this.loadScene(n,i).then((function(){return r.createWorkers()})).then((function(){r.resetFeatureSelection();var t="object"===yn(r.config_source)||r.hasSubscribersFor("load"),e=r.updateConfig({serialize_funcs:t,normalize:!1,load_event:!0,fade_in:!0});if(!0===i.blocking)return e})).then((function(){r.updating--,r.initializing=null,r.initialized=!0,r.last_valid_config_source=r.config_source,r.last_valid_options={base_path:i.base_path,file_type:i.file_type},r.requestRedraw()})).catch((function(t){var e,n;if(r.initializing=null,r.updating=0,n="YAMLException"===t.name?(e="yaml","Error parsing scene YAML"):"Error initializing scene",r.trigger("error",{type:e,message:n,error:t,url:r.config_source}),n="Scene.load() failed to load ".concat(r.config_source,": ").concat(t.message),r.last_valid_config_source)return xi("warn",n,t),xi("info","Scene.load() reverting to last valid configuration"),r.load(r.last_valid_config_source,r.last_valid_base_path);throw xi("error",n,t),t}))),this.initializing}},{key:"destroy",value:function(){var t;this.initialized=!1,this.render_loop_stop=!0,this.destroyListeners(),this.canvas&&this.canvas.parentNode&&(this.canvas.parentNode.removeChild(this.canvas),this.canvas=null),this.container=null,this.selection&&this.selection.destroy(),this.gl&&(this.textureManager.destroy(this.gl),this.style_manager.destroy(this.gl),this.styles={},oa.reset(),(t=this.gl.getExtension("WEBGL_lose_context"))&&t.loseContext(),this.gl=null),this.sources={},this.tile_manager.destroy(),this.tile_manager=null,this.destroyWorkers(),xi.reset()}},{key:"createCanvas",value:function(){if(!this.canvas){this.container=this.container||document.body,this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top=0,this.canvas.style.left=0,this.container.style.backgroundColor="transparent",this.container.appendChild(this.canvas);try{this.gl=iu.getContext(this.canvas,Object.assign({alpha:!0,premultipliedAlpha:!1,stencil:!0,device_pixel_ratio:Bi.device_pixel_ratio},this.contextOptions)),navigator.appVersion.includes("iPhone")&&this.gl.depthRange(.994,1)}catch(o){throw new Error("Couldn't create WebGL context. Your browser may not support WebGL, or it's turned off? Visit http://webglreport.com/ for more info.")}this.handleViewportUpdate(),sa.init(this.gl),this.render_states=new rA(this.gl),this.media_capture.setCanvas(this.canvas,this.gl)}}},{key:"getWorkerUrl",value:function(){var t,i;if(void 0!==e&&(i="("+e+")()",n&&""!==r&&(i+="\n//# sourceMappingURL="+n.slice(0,n.lastIndexOf("/")+1)+r),t=Ii(new Blob([i],{type:"application/javascript"}))),!t)throw new Error("Couldn't find internal Tangram source variable (may indicate the library did not build correctly)");return t}},{key:"updateExternalScripts",value:function(){var t=In(this.external_scripts||[]),e=[];if(this.config.scene.scripts)for(var r in this.config.scene.scripts)-1===e.indexOf(this.config.scene.scripts[r])&&e.push(this.config.scene.scripts[r]);for(var n in this.config.sources){var i=this.config.sources[n];if(i.scripts)for(var o in i.scripts)-1===e.indexOf(i.scripts[o])&&e.push(i.scripts[o])}return this.external_scripts=e,!(this.external_scripts.length===t.length&&this.external_scripts.every((function(e,r){return e===t[r]})))}},{key:"createWorkers",value:function(){return this.updateExternalScripts()&&this.destroyWorkers(),this._workers?Promise.resolve():this.makeWorkers(this.getWorkerUrl())}},{key:"makeWorkers",value:function(t){var e=this,r=!!this.gl.getExtension("OES_element_index_uint"),n=[];this._workers=[];for(var i=0;i<this.num_workers;i++)!function(){var o=new Worker(t);e._workers[i]=o,ui.addWorker(o),xi("debug","Scene.makeWorkers: initializing worker ".concat(i));var a=i;n.push(ui.postMessage(o,"self.init",e.id,i,e.log_level,Bi.device_pixel_ratio,r,e.external_scripts,e.meshVariantMaxLife).then((function(t){return xi("debug","Scene.makeWorkers: initialized worker ".concat(t)),t}),(function(t){return xi("error","Scene.makeWorkers: failed to initialize worker ".concat(a,":"),t),Promise.reject(t)})))}();var o=new oA;return this._workers.push(o),n.push(o.init(this.id,i,this.log_level,Bi.device_pixel_ratio,r,[],this.meshVariantMaxLife)),this.next_worker=0,Promise.all(n).then((function(){var r;xi.setWorkers(e._workers.slice(0,e.num_workers)),r=t,void 0===Si&&"function"!=typeof(Si=window.URL&&window.URL.revokeObjectURL||window.webkitURL&&window.webkitURL.revokeObjectURL)&&(Si=null,xi("warn","window.URL.revokeObjectURL (or vendor prefix) not found, unable to create local blob URLs")),Si&&Si(r)}))}},{key:"getWorkers",value:function(t){return this._workers.filter((function(e){switch(t){case 0:return e instanceof Worker;case 1:return e instanceof oA;default:return!0}}))}},{key:"destroyWorkers",value:function(){this.selection=null,Array.isArray(this._workers)&&(xi.setWorkers(null),this._workers.forEach((function(t){t.terminate()})),this._workers=null)}},{key:"ready",value:function(){return!(!this.view.ready()||0===Object.keys(this.sources).length)}},{key:"handleViewportUpdate",value:function(){var t=this.viewport,e=t.width,r=t.height;0<e&&0<r&&(this.dirty=!0,this.view.handleViewportUpdate(),this.gl&&iu.resize(this.gl,e,r,Bi.device_pixel_ratio)),this.adjustMeshVariantMaxLife()&&this.syncMeshVariantMaxLife()}},{key:"adjustMeshVariantMaxLife",value:function(){var t=this.viewport,e=t.width,r=t.height,n=Bi.device_pixel_ratio,i=e/n/256*(r/n/256),o=Math.max(Math.ceil(2*i),8);if(this.meshVariantMaxLife!==o)return this.meshVariantMaxLife=o,!0}},{key:"syncMeshVariantMaxLife",value:function(){this._workers&&ui.postMessage(this._workers,"self.setMeshVariantMaxLife",this.meshVariantMaxLife)}},{key:"requestRedraw",value:function(){this.dirty=!0}},{key:"immediateRedraw",value:function(){this.dirty=!0,this.update()}},{key:"renderLoop",value:function(){this.render_loop_active=!0,this.initialized&&this.update(),ko.setState({user_moving_view:this.view.user_input_active}),ko.processAll(),this.render_loop_stop?(this.render_loop_stop=!1,this.render_loop_active=!1):window.requestAnimationFrame(this.renderLoop.bind(this))}},{key:"setupRenderLoop",value:function(){var t=this;this.render_loop_active||setTimeout((function(){t.renderLoop()}),0)}},{key:"update",value:function(){var t=this.dirty,e=!!this.selection&&this.selection.hasPendingRequests(),r=!(!1===t&&!1===e||!1===this.initialized||0<this.updating||!1===this.ready());return this.trigger("pre_update",r),this.view.update(),r&&(this.dirty=!1,this.render({main:t,selection:e}),this.updateViewComplete(),this.media_capture.completeScreenshot(),this.trigger("post_update",r),!0!==this.animated&&!this.view.isAnimating()||(this.dirty=!0),this.frame++,xi("trace","Scene.render()"),!0)}},{key:"render",value:function(t){var e=this,r=t.main,n=t.selection,i=this.gl;if(Object.keys(this.lights).forEach((function(t){return e.lights[t].update()})),r&&(this.render_count=this.renderPass(),this.last_main_render=this.frame),n){if(this.view.panning||this.view.user_input_active)return void this.selection.clearPendingRequests();(this.last_selection_render<this.last_main_render||this.selection.has_dirty_buffer)&&(this.selection.bind(),this.renderPass("selection_program",{allow_blend:!1}),i.bindFramebuffer(i.FRAMEBUFFER,null),i.viewport(0,0,this.canvas.width,this.canvas.height),i.clearColor.apply(i,In(this.background.color)),this.last_selection_render=this.frame,this.selection.has_dirty_buffer=!1),this.selection.read(this.tile_manager.getRenderableTiles()),this.selection.has_dirty_buffer&&this.render({main:!1,selection:n})}return this.render_count_changed=!1,this.render_count!==this.last_render_count&&(this.render_count_changed=!0),this.last_render_count=this.render_count,!0}},{key:"renderPass",value:function(t,e){var r=this,n=0<arguments.length&&void 0!==t?t:"program",i=(1<arguments.length&&void 0!==e?e:{}).allow_blend,o=this.gl;i=null==i||i,this.clearFrame();for(var a,s=ma.sortByBlendOrderWithinLayers(this.tile_manager.getActiveStyles().map((function(t){return r.styles[t]})).filter((function(t){return t}))),l=0,u=0,c=0;c<s.length;c++){var h,f,p=s[c],A=u-(h=parseInt(p.name));(p.clean_depth||A)&&(this.render_states.depth_write.value.depth_write?o.clear(o.DEPTH_BUFFER_BIT):(o.depthMask(!0),o.clear(o.DEPTH_BUFFER_BIT),o.depthMask(!1)),A&&(u=h)),p.blend!==a&&(f=Object.assign({},ma.render_states[p.blend],{blend:i&&p.blend}),this.setRenderState(f));var d="translucent"===p.blend&&"program"===n;d&&(this.gl.colorMask(!1,!1,!1,!1),this.renderStyle(p.name,n),this.gl.colorMask(!0,!0,!0,!0),this.gl.depthFunc(this.gl.EQUAL),this.gl.enable(this.gl.STENCIL_TEST),this.gl.clear(this.gl.STENCIL_BUFFER_BIT),this.gl.stencilFunc(this.gl.EQUAL,this.gl.ZERO,255),this.gl.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.INCR)),l+=this.renderStyle(p.name,n),d&&(this.gl.disable(this.gl.STENCIL_TEST),this.gl.depthFunc(this.gl.LESS)),a=p.blend}return l}},{key:"renderStyle",value:function(t,e){for(var r,n=this,i=this.styles[t],o=!0,a=0,s=this.tile_manager.getRenderableTiles(),l=Math.max.apply(Math,In(s.map((function(e){return e.meshes[t]?Math.max.apply(Math,In(e.meshes[t].map((function(t){return t.variant.order})))):-1})))),u=0;u<l+1;u++){var c=function(l){for(var u=0;u<s.length;u++){var c=s[u];if(null!=c.meshes[t]&&c.shouldProxyForStyle(t))for(var h=c.meshes[t].filter((function(t){return t.variant.order===l})),f=0,p=h.length;f<p;f+=1){var A=h[f];if(!0===o&&(o=!1,!(r=n.setupStyle(i,e))))return{v:0};n.view.setupTile(c,r),n.selection.setupDiscards(r),i.render(A)&&n.requestRedraw(),a+=A.geometry_count}}}(u);if("object"===yn(c))return c.v}return a}},{key:"setupStyle",value:function(t,e){var r;try{if(!(r=t.getProgram(e)))return}catch(e){return void this.trigger("warning",{type:"styles",message:"Error compiling style ".concat(t.name),style:t,shader_errors:t.program&&t.program.shader_errors})}for(var n in r.use(),t.setup(),this.view.setupProgram(r),this.lights)this.lights[n].setupProgram(r);return r}},{key:"clearFrame",value:function(){this.initialized&&(this.render_states.depth_write.set({depth_write:!0}),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT))}},{key:"setRenderState",value:function(t){var e,r,n=0<arguments.length&&void 0!==t?t:{},i=n.depth_test,o=n.depth_write,a=n.cull_face,s=n.blend;this.initialized&&(e=this.render_states,i=!1!==i&&e.defaults.depth_test,o=!1!==o&&e.defaults.depth_write,a=!1!==a&&e.defaults.culling,s=null!=s?s:e.defaults.blending,r=this.gl,e.depth_test.set({depth_test:i}),e.depth_write.set({depth_write:o}),e.culling.set({cull:a,face:e.defaults.culling_face}),s&&"opaque"!==s?"overlay"===s||"inlay"===s||"translucent"===s?e.blending.set({blend:!0,src:r.SRC_ALPHA,dst:r.ONE_MINUS_SRC_ALPHA,src_alpha:r.ONE,dst_alpha:r.ONE_MINUS_SRC_ALPHA}):"add"===s?e.blending.set({blend:!0,src:r.ONE,dst:r.ONE}):"multiply"===s&&e.blending.set({blend:!0,src:r.ZERO,dst:r.SRC_COLOR}):e.blending.set({blend:!1}))}},{key:"getFeatureAt",value:function(t,e,r){var n,i=e.radius,o=e.top_most_only;this.initialized?(n={x:t.x/this.view.size.css.width,y:t.y/this.view.size.css.height},i=0<i?{x:i/this.view.size.css.width,y:i/this.view.size.css.height}:null,this.selection.getFeatureAt(n,{radius:i,top_most_only:o},r)):xi("debug","Scene.getFeatureAt() called before scene was initialized")}},{key:"queryFeatures",value:function(t){var e=0<arguments.length&&void 0!==t?t:{},r=e.filter,n=e.unique,i=void 0===n||n,o=e.group_by,a=void 0===o?null:o,s=e.visible,l=void 0===s?null:s,u=e.geometry,c=void 0!==u&&u,h=(r=Bi.serializeWithFunctions(r),this.tile_manager.getRenderableTiles().map((function(t){return t.id})));return ui.postMessage(this._workers,"self.queryFeatures",{filter:r,visible:l,geometry:c,tile_ids:h}).then((function(t){var e=[],r={},n={},o=(i="string"==typeof i?[i]:i)&&function(t){return JSON.stringify(Array.isArray(i)?ru(t,i):t)},s=(a=("string"==typeof a||Array.isArray(a))&&a)&&function(t){return Array.isArray(a)?JSON.stringify(ru(t,a)):t[a]};return t.forEach((function(t){return t.forEach((function(t){if(o){var i=o(t);if(r[i])return;r[i]=!0}var a;s?(a=s(t.properties),n[a]=n[a]||[],n[a].push(t)):e.push(t)}))})),s?n:e}))}},{key:"loadScene",value:function(t,e){var r=this,n=0<arguments.length&&void 0!==t?t:null,i=1<arguments.length&&void 0!==e?e:{},o=i.base_path,a=i.file_type;return this.config_source=n||this.config_source,"string"==typeof this.config_source?this.base_path=Ni(o||this.config_source):this.base_path=Ni(o),this.config_path=this.base_path,Gp.loadScene(this.config_source,{path:this.base_path,type:a}).then((function(t){var e=t.config,n=t.bundle;return r.config=e,r.config_bundle=n,r.config}))}},{key:"createDataSources",value:function(){var t=this,e=[],r=Object.keys(this.sources),n=0;for(var i in this.config.sources){var o=this.config.sources[i],a=this.sources[i];try{var s=Object.assign({},o,{name:i,id:n++});if(this.sources[i]=Mi.create(s,this.sources),!this.sources[i])throw{}}catch(r){delete this.sources[i];var l="Could not create data source: ".concat(r.message);xi("warn","Scene: ".concat(l),o),this.trigger("warning",{type:"sources",source:o,message:l})}Mi.sameConfig(this.sources[i],a)||e.push(i)}for(var u in r.forEach((function(r){t.config.sources[r]||(delete t.sources[r],e.push(r))})),0<e.length&&this.tile_manager.removeTiles((function(t){return-1<e.indexOf(t.source.name)})),this.config.layers){var c=this.config.layers[u];!1!==c.enabled&&c.data&&this.sources[c.data.source]&&(this.sources[c.data.source].builds_geometry_tiles=!0)}}},{key:"loadTextures",value:function(){var t=this;return this.textureManager.createFromObject(this.gl,this.config.textures).then((function(){return t.textureManager.createDefault(t.gl)}))}},{key:"updateStyles",value:function(){if(!this.initialized&&!this.initializing)throw new Error("Scene.updateStyles() called before scene was initialized");for(var t in this.styles=this.style_manager.build(this.config.styles),this.style_manager.initStyles(this),this.styles)this.styles[t].setGL(this.gl);this.dirty=!0}},{key:"createLights",value:function(){for(var t in this.lights={},this.config.lights){var e;this.config.lights[t]&&"object"===yn(this.config.lights[t])&&((e=this.config.lights[t]).name=t.replace("-","_"),e.visible=!1!==e.visible,e.visible&&(this.lights[e.name]=fa.create(this.view,e)))}fa.inject(this.lights)}},{key:"setBackground",value:function(){var t,e=this.config.scene.background;this.background={},e&&e.color&&(this.background.color=vo.parseColor(e.color)),this.background.color||(this.background.color=[0,0,0,0]),1===this.background.color[3]?this.canvas.style.backgroundColor="rgba(".concat(this.background.color.map((function(t){return Math.floor(255*t)})).join(", "),")"):this.canvas.style.backgroundColor="transparent",(t=this.gl).clearColor.apply(t,In(this.background.color))}},{key:"setIntrospection",value:function(t){var e=this;return t!==this.introspection?(this.introspection=t||!1,this.updating++,this.updateConfig({normalize:!1}).then((function(){return e.updating--}))):Promise.resolve()}},{key:"updateConfig",value:function(e){var r=0<arguments.length&&void 0!==e?e:{},n=r.load_event,i=void 0!==n&&n,o=r.serialize_funcs,a=r.normalize,s=void 0===a||a;r.fade_in,this.generation=++t.generation,this.updating++,this.config=Gp.applyGlobalProperties(this.config),s?Gp.normalize(this.config,this.config_bundle):(Gp.hoistStyleShaderUniformTextures(this.config,this.config_bundle,{include_globals:!0}),Gp.normalizeTextures(this.config,this.config_bundle)),this.trigger(i?"load":"update",{config:this.config}),this.style_manager.init(),this.createLights(),this.createDataSources(),this.loadTextures(),this.setBackground(),Dc.loadFonts(this.config.fonts),this.updateStyles();var l=this.syncConfigToWorker({serialize_funcs:o});return this.updating--,this.view.updateBounds(),this.requestRedraw(),l}},{key:"syncConfigToWorker",value:function(t){var e=(0<arguments.length&&void 0!==t?t:{}).serialize_funcs,r=void 0===e||e?Bi.serializeWithFunctions(this.config):JSON.stringify(this.config);return ui.postMessage(this._workers,"self.updateConfig",{config:r,generation:this.generation,introspection:this.introspection},eu)}},{key:"createListeners",value:function(){var t=this;this.listeners={},this.listeners.view={move:function(){return t.trigger("move")}},this.view.subscribe(this.listeners.view),this.listeners.texture={update:function(){return t.dirty=!0},warning:function(e){return t.trigger("warning",Object.assign({type:"textures"},e))}},this.textureManager.subscribe(this.listeners.texture),this.listeners.scene_loader={error:function(e){return t.trigger("error",Object.assign({type:"scene"},e))}},Gp.subscribe(this.listeners.scene_loader)}},{key:"destroyListeners",value:function(){this.unsubscribeAll(),this.view.unsubscribe(this.listeners.view),this.textureManager.unsubscribe(this.listeners.texture),Gp.unsubscribe(this.listeners.scene_loader),this.listeners=null}},{key:"resetFeatureSelection",value:function(){this.selection?this._workers&&ui.postMessage(this._workers,"self.resetFeatureSelection"):this.selection=new Jo(this.gl,this.id)}},{key:"updateViewComplete",value:function(){(this.render_count_changed||this.generation!==this.last_complete_generation)&&this.tile_manager.isReady()&&(this.last_complete_generation=this.generation,this.trigger("view_complete"))}},{key:"resetViewComplete",value:function(){this.last_complete_generation=null}},{key:"screenshot",value:function(t){var e=(0<arguments.length&&void 0!==t?t:{}).background,r=void 0===e?"white":e;return this.requestRedraw(),this.media_capture.screenshot({background:r})}},{key:"pixelRatio",value:function(){return Bi.device_pixel_ratio}},{key:"startVideoCapture",value:function(){return this.requestRedraw(),this.media_capture.startVideoCapture()}},{key:"stopVideoCapture",value:function(){return this.media_capture.stopVideoCapture()}},{key:"_profile",value:function(t){console.profile("main thread: ".concat(t)),ui.postMessage(this._workers,"self.profile",t)}},{key:"_profileEnd",value:function(t){console.profileEnd("main thread: ".concat(t)),ui.postMessage(this._workers,"self.profileEnd",t)}},{key:"getCameraMatrix",value:function(){return this.view.lookAtManipulator.getCameraMatrix()}},{key:"animated",get:function(){var t=this;return void 0!==this.config.scene.animated?this.config.scene.animated:this.tile_manager.getActiveStyles().some((function(e){return t.styles[e]&&t.styles[e].animated}))}}],[{key:"create",value:function(e,r){return new t(e,1<arguments.length&&void 0!==r?r:{})}}]),t}();aA.id=0,aA.generation=0;var sA=function(){wn(e,No);var t=Tn(e);function e(r,n,i){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};vn(this,e);var a=Math.pow(2,o.coords.z),s=Math.abs(Math.floor(o.coords.x/a)),l=Math.abs(a*s-Math.abs(o.coords.x)),u=o.coords;return o.coords={x:l,y:u.y,z:u.z},t.call(this,r,n,i,o)}return bn(e,[{key:"load",value:function(t){var r=this;if(!t||!t.uid)return Nn(xn(e.prototype),"load",this).call(this,t);var n=t.coords,i=new Uint8Array([0,0,0,0]);return this.loading=new Promise((function(e,o){var a=H.map.DataModel.invoke(t.uid,"requestTileAsPromise",[n.x,n.y,n.z])||null;a?a.then((function(e){var n=e.data;r.loaded=!0,!n||n instanceof ArrayBuffer||"IMG"!==n.tagName.toUpperCase()&&"CANVAS"!==n.tagName.toUpperCase()?r.setData(1,1,i,{filtering:"nearest"}):r.setElement(n,t)}),(function(){r.loaded=!1})).then(e,(function(t){return o(t)})):o(new Error("Unable to invoke on target "+t.uid))})),this.loading}}]),e}();Io.register(sA,(function(t){return t&&t.uid})),self.H=self.H||{},self.H.gl={DataSource:Mi,Geo:$n,MathUtils:Jn,Scene:aA,Task:ko,Tile:wa,WorkerBroker:ui,log:xi,SceneLoader:Gp,yaml:xp}}()}(),this.H=this.H||{},this.H.venues=function(t){function e(t,e){void 0===e&&(e={});var r,n=e.insertAt;t&&"undefined"!=typeof document&&(r=document.head||document.getElementsByTagName("head")[0],(e=document.createElement("style")).type="text/css","top"===n&&r.firstChild?r.insertBefore(e,r.firstChild):r.appendChild(e),e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)))}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function p(t,e,r){return(p=f()?Reflect.construct:function(t,e,r){var n=[null];return n.push.apply(n,e),n=new(Function.bind.apply(t,n)),r&&h(n,r.prototype),n}).apply(null,arguments)}function A(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){var e=f();return function(){var r,n=c(t);return r=e?(r=c(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this,!r||"object"!=typeof r&&"function"!=typeof r?A(n):r}}function g(t,e,r){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e),t)return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(r):e.value})(t,e,r||t)}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}(t,e)||m(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||m(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){if(t){if("string"==typeof t)return b(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(t,e):void 0}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e(".H_l_right .venues-ui__drawings .trigger.button--active .arrow {\n  transform: rotate(90deg); }\n\n.H_l_right .venues-ui__drawings .drawings {\n  right: 45px;\n  left: initial; }\n");var _=function(){u(e,H.map.Feature);var t=d(e);function e(r){var i;return n(this,e),(i=t.call(this)).id=r.id,i.model=r,i}return o(e,[{key:"getData",value:function(){return this.model}},{key:"getAddress",value:function(){return this.model.getInternalAddress()}},{key:"getCenter",value:function(){var t=(e=y(this.model.getCenter(),2))[0],e=e[1];return new H.geo.Point(e,t)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"toGeoJSON",value:function(){return this.model.toJSON()}},{key:"getLevel",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getLevel().getDrawing().getParentEventTarget()}}]),e}(),w=function(){u(e,H.map.Feature);var t=d(e);function e(r){var i;return n(this,e),(i=t.call(this)).id=r.id,i.model=r,i}return o(e,[{key:"getData",value:function(){return this.model}},{key:"getBoundingBox",value:function(){return p(H.geo.Rect,v(this.model.getBoundingBox()))}},{key:"getCenter",value:function(){var t=(e=y(this.model.getCenter(),2))[0],e=e[1];return new H.geo.Point(e,t)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getLevel",value:function(t){return this.getLevels().find((function(e){return e.id===t}))}},{key:"getLevels",value:function(){var t=this.getData().getLevels().map((function(t){return t.getId()}));return this.getVenue().getLevels().filter((function(e){return-1!==t.indexOf(e.id)}))}},{key:"getMainLevel",value:function(){return this.getLevel(this.model.getMainLevel().getId())}},{key:"getVenue",value:function(){return this.getParentEventTarget()}}]),e}(),x=function(){u(e,H.map.Feature);var t=d(e);function e(r){var i;return n(this,e),(i=t.call(this)).id=r.id,i.model=r,i}return o(e,[{key:"getGeometry",value:function(t){return this.getGeometries().find((function(e){return e.id===t}))}},{key:"getGeometries",value:function(){var t=this.getData().getGeometries().map((function(t){return t.getId()}));return this.getDrawing().getVenue().getGeometries().filter((function(e){return-1!==t.indexOf(e.id)}))}},{key:"getData",value:function(){return this.model}},{key:"getId",value:function(){return this.model.getId()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getShortName",value:function(){return this.model.getShortName()}},{key:"getZIndex",value:function(){return this.model.getZIndex()}},{key:"isMain",value:function(){return this.model.isMain()}},{key:"getDrawing",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getDrawing().getParentEventTarget()}}]),e}();function E(t,e,r,n){for(var i,o=n,a=r-e>>1,s=r-e,l=t[e],u=t[e+1],c=t[r],h=t[r+1],f=e+3;f<r;f+=3){var p=function(t,e,r,n,i,o){var a,s=i-r,l=o-n;return 0===s&&0===l||(1<(a=((t-r)*s+(e-n)*l)/(s*s+l*l))?(r=i,n=o):0<a&&(r+=s*a,n+=l*a)),(s=t-r)*s+(l=e-n)*l}(t[f],t[f+1],l,u,c,h);o<p?(i=f,o=p):p!==o||(p=Math.abs(f-a))<s&&(i=f,s=p)}n<o&&(3<i-e&&E(t,e,i,n),t[i+2]=o,3<r-i&&E(t,i,r,n))}function B(t,e,r,n){return function(t){var e=t.geometry,r=t.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)C(t,e);else if("Polygon"===r||"MultiLineString"===r)for(var n=0;n<e.length;n++)C(t,e[n]);else if("MultiPolygon"===r)for(n=0;n<e.length;n++)for(var i=0;i<e[n].length;i++)C(t,e[n][i])}(n={id:void 0===t?null:t,type:e,geometry:r,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}),n}function C(t,e){for(var r=0;r<e.length;r+=3)t.minX=Math.min(t.minX,e[r]),t.minY=Math.min(t.minY,e[r+1]),t.maxX=Math.max(t.maxX,e[r]),t.maxY=Math.max(t.maxY,e[r+1])}function S(t,e,r,n){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),s=[],l=e.id;if(r.promoteId?l=e.properties[r.promoteId]:r.generateId&&(l=n||0),"Point"===o)k(i,s);else if("MultiPoint"===o)for(var u=0;u<i.length;u++)k(i[u],s);else if("LineString"===o)T(i,s,a,!1);else if("MultiLineString"===o){if(r.lineMetrics){for(u=0;u<i.length;u++)s=[],T(i[u],s,a,!1),t.push(B(l,"LineString",s,e.properties));return}N(i,s,a,!1)}else if("Polygon"===o)N(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"!==o)throw new Error("Input data is not a valid GeoJSON object.");for(u=0;u<e.geometry.geometries.length;u++)S(t,{id:l,geometry:e.geometry.geometries[u],properties:e.properties},r,n);return}for(u=0;u<i.length;u++){var c=[];N(i[u],c,a,!0),s.push(c)}}t.push(B(l,o,s,e.properties))}}function k(t,e){e.push(L(t[0])),e.push(I(t[1])),e.push(0)}function T(t,e,r,n){for(var i,o,a=0,s=0;s<t.length;s++){var l=L(t[s][0]),u=I(t[s][1]);e.push(l),e.push(u),e.push(0),0<s&&(a+=n?(i*u-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(u-o,2))),i=l,o=u}var c=e.length-3;e[2]=1,E(e,0,c,r),e[2+c]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function N(t,e,r,n){for(var i=0;i<t.length;i++){var o=[];T(t[i],o,r,n),e.push(o)}}function L(t){return t/360+.5}function I(t){return t=Math.sin(t*Math.PI/180),(t=.5-.25*Math.log((1+t)/(1-t))/Math.PI)<0?0:1<t?1:t}function M(t,e,r,n,i,o,a,s){if(n/=e,(r/=e)<=o&&a<n)return t;if(a<r||n<=o)return null;for(var l=[],u=0;u<t.length;u++){var c=t[u],h=c.geometry,f=c.type,p=0===i?c.minX:c.minY,A=0===i?c.maxX:c.maxY;if(r<=p&&A<n)l.push(c);else if(!(A<r||n<=p)){var d=[];if("Point"===f||"MultiPoint"===f)!function(t,e,r,n,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];r<=a&&a<=n&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}(h,d,r,n,i);else if("LineString"===f)O(h,d,r,n,i,!1,s.lineMetrics);else if("MultiLineString"===f)F(h,d,r,n,i,!1);else if("Polygon"===f)F(h,d,r,n,i,!0);else if("MultiPolygon"===f)for(var g=0;g<h.length;g++){var y=[];F(h[g],y,r,n,i,!0),y.length&&d.push(y)}if(d.length)if(s.lineMetrics&&"LineString"===f)for(g=0;g<d.length;g++)l.push(B(c.id,f,d[g],c.tags));else"LineString"!==f&&"MultiLineString"!==f||(1===d.length?(f="LineString",d=d[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===d.length?"Point":"MultiPoint"),l.push(B(c.id,f,d,c.tags))}}return l.length?l:null}function O(t,e,r,n,i,o,a){for(var s,l,u=P(t),c=0===i?R:D,h=t.start,f=0;f<t.length-3;f+=3){var p=t[f],A=t[f+1],d=t[f+2],g=t[f+3],y=t[f+4],v=0===i?p:A,m=0===i?g:y,b=!1;a&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(A-y,2))),v<r?r<m&&(l=c(u,p,A,g,y,r),a&&(u.start=h+s*l)):n<v?m<n&&(l=c(u,p,A,g,y,n),a&&(u.start=h+s*l)):U(u,p,A,d),m<r&&r<=v&&(l=c(u,p,A,g,y,r),b=!0),n<m&&v<=n&&(l=c(u,p,A,g,y,n),b=!0),!o&&b&&(a&&(u.end=h+s*l),e.push(u),u=P(t)),a&&(h+=s)}var _=t.length-3;p=t[_],A=t[1+_],d=t[2+_];r<=(v=0===i?p:A)&&v<=n&&U(u,p,A,d),_=u.length-3,o&&3<=_&&(u[_]!==u[0]||u[1+_]!==u[1])&&U(u,u[0],u[1],u[2]),u.length&&e.push(u)}function P(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function F(t,e,r,n,i,o){for(var a=0;a<t.length;a++)O(t[a],e,r,n,i,o,!1)}function U(t,e,r,n){t.push(e),t.push(r),t.push(n)}function R(t,e,r,n,i,o){return e=(o-e)/(n-e),t.push(o),t.push(r+(i-r)*e),t.push(1),e}function D(t,e,r,n,i,o){return r=(o-r)/(i-r),t.push(e+(n-e)*r),t.push(o),t.push(1),r}function j(t,e){for(var r=[],n=0;n<t.length;n++){var i,o=t[n],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=Q(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(Q(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],u=0;u<o.geometry[s].length;u++)l.push(Q(o.geometry[s][u],e));i.push(l)}r.push(B(o.id,a,i,o.tags))}return r}function Q(t,e){var r=[];r.size=t.size,void 0!==t.start&&(r.start=t.start,r.end=t.end);for(var n=0;n<t.length;n+=3)r.push(t[n]+e,t[n+1],t[n+2]);return r}function z(t,e){if(t.transformed)return t;for(var r,n=1<<t.z,i=t.x,o=t.y,a=0;a<t.features.length;a++){var s=t.features[a],l=s.geometry,u=s.type;if(s.geometry=[],1===u)for(r=0;r<l.length;r+=2)s.geometry.push(V(l[r],l[r+1],e,n,i,o));else for(r=0;r<l.length;r++){for(var c=[],h=0;h<l[r].length;h+=2)c.push(V(l[r][h],l[r][h+1],e,n,i,o));s.geometry.push(c)}}return t.transformed=!0,t}function V(t,e,r,n,i,o){return[Math.round(r*(t*n-i)),Math.round(r*(e*n-o))]}function G(t,e,r,n,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,function(t,e,r,n){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)q(a,i,t,r,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)q(a,i[s],t,r,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var u=i[l];for(s=0;s<u.length;s++)q(a,u[s],t,r,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&n.lineMetrics){for(var h in c={},e.tags)c[h]=e.tags[h];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}n={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c},null!==e.id&&(n.id=e.id),t.features.push(n)}}(a,t[s],o,i);var l=t[s].minX,u=t[s].minY,c=t[s].maxX,h=t[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),c>a.maxX&&(a.maxX=c),h>a.maxY&&(a.maxY=h)}return a}function q(t,e,r,n,i,o){var a=n*n;if(0<n&&e.size<(i?a:n))r.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===n||e[l+2]>a)&&(r.numSimplified++,s.push(e[l]),s.push(e[l+1])),r.numPoints++;i&&function(t,e){for(var r=0,n=0,i=t.length,o=i-2;n<i;o=n,n+=2)r+=(t[n]-t[o])*(t[n+1]+t[o+1]);if(0<r===e)for(n=0,i=t.length;n<i/2;n+=2){var a=t[n],s=t[n+1];t[n]=t[i-2-n],t[n+1]=t[i-1-n],t[i-2-n]=a,t[i-1-n]=s}}(s,o),t.push(s)}}function K(t,e){var r=(e=this.options=function(t,e){for(var r in e)t[r]=e[r];return t}(Object.create(this.options),e)).debug;if(r&&console.time("preprocess data"),e.maxZoom<0||24<e.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var n,i,o,a,s=function(t,e){var r=[];if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)S(r,t.features[n],e,n);else"Feature"===t.type?S(r,t,e):S(r,{geometry:t},e);return r}(t,e);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),t=M(a=n=s,1,-1-(o=(i=e).buffer/i.extent),o,0,-1,2,i),e=M(n,1,1-o,2+o,0,-1,2,i),(t||e)&&(a=M(n,1,-o,1+o,0,-1,2,i)||[],t&&(a=j(t,1).concat(a)),e&&(a=a.concat(j(e,-1)))),(s=a).length&&this.splitTile(s,0,0,0),r&&(s.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Y(t,e,r){return 32*((1<<t)*r+e)+t}function W(t){for(var e,r=[],n=[],i=0,o=t.coordinates.length;i<o;i+=1){var a=t.coordinates[i],s=function(t){return t=function(t){for(var e=0,r=t.length,n=0;n<r-1;n+=1){var i=t[n],o=t[n+1];e+=i[0]*o[1]-o[0]*i[1]}return e+(t[r-1][0]*t[0][1]-t[0][0]*t[r-1][1])}(t),0<t?st:t<0?lt:void 0}(a);null!==s&&(s===(e=e||s)&&n.length&&(r.push(n),n=[]),n.push(a))}return 0<n.length&&r.push(n),1===r.length?(t.type=Z,t.coordinates=r[0]):1<r.length?(t.type=tt,t.coordinates=r):t=null,t}function X(t,e,r,n,i){var o;return i=(o=r,r=n,n=i,e=1<<(i=e),(i=[])[0]=(t[0]/n+o)/e,i[1]=(t[1]/n+r)/e,e=r={x:i[0],y:i[1]}).x,r=e.y,e=360*(i-.5),i=Math.exp(Math.PI*(.5-r)/.25)-1,r=Math.exp(Math.PI*(.5-r)/.25)+1,[e,180*Math.asin(i/r)/Math.PI]}K.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},K.prototype.splitTile=function(t,e,r,n,i,o,a){for(var s=[t,e,r,n],l=this.options,u=l.debug;s.length;){n=s.pop(),r=s.pop(),e=s.pop(),t=s.pop();var c,h,f,p,A,d,g,y,v=1<<e,m=Y(e,r,n),b=this.tiles[m];if(b||(1<u&&console.time("creation"),b=this.tiles[m]=G(t,e,r,n,l),this.tileCoords.push({z:e,x:r,y:n}),u&&(1<u&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,r,n,b.numFeatures,b.numPoints,b.numSimplified),console.timeEnd("creation")),y="z"+e,this.stats[y]=(this.stats[y]||0)+1,this.total++)),b.source=t,i){if(e===l.maxZoom||e===i)continue;var _=1<<i-e;if(r!==Math.floor(o/_)||n!==Math.floor(a/_))continue}else if(e===l.indexMaxZoom||b.numPoints<=l.indexMaxPoints)continue;b.source=null,0!==t.length&&(1<u&&console.time("clipping"),h=.5-(c=.5*l.buffer/l.extent),f=1+c,g=p=A=d=null,y=M(t,v,r-c,r+(m=.5+c),0,b.minX,b.maxX,l),_=M(t,v,r+h,r+f,0,b.minX,b.maxX,l),t=null,y&&(g=M(y,v,n-c,n+m,1,b.minY,b.maxY,l),p=M(y,v,n+h,n+f,1,b.minY,b.maxY,l),y=null),_&&(A=M(_,v,n-c,n+m,1,b.minY,b.maxY,l),d=M(_,v,n+h,n+f,1,b.minY,b.maxY,l),_=null),1<u&&console.timeEnd("clipping"),s.push(g||[],e+1,2*r,2*n),s.push(p||[],e+1,2*r,2*n+1),s.push(A||[],e+1,2*r+1,2*n),s.push(d||[],e+1,2*r+1,2*n+1))}},K.prototype.getTile=function(t,e,r){var n=this.options,i=n.extent,o=n.debug;if(t<0||24<t)return null;if(n=Y(t,e=(e%(n=1<<t)+n)%n,r),this.tiles[n])return z(this.tiles[n],i);1<o&&console.log("drilling down to z%d-%d-%d",t,e,r);for(var a,s=t,l=e,u=r;!a&&0<s;)s--,l=Math.floor(l/2),u=Math.floor(u/2),a=this.tiles[Y(s,l,u)];return a&&a.source?(1<o&&console.log("found parent tile z%d-%d-%d",s,l,u),1<o&&console.time("drilling down"),this.splitTile(a.source,s,l,u,t,e,r),1<o&&console.timeEnd("drilling down"),this.tiles[n]?z(this.tiles[n],i):null):null};var J="Point",Z="Polygon",$="MultiLineString",tt="MultiPolygon",et="#e0e0e0",rt="#829DB4",nt=1,it=13,ot={fillColor:"#F2F285",outlineColor:"#0088BF",outlineWidth:1.2},at={FOOTPRINT:"FOOTPRINT",ICON:"ICON",TEXT:"TEXT",VECTOR:"VECTOR"},st="CW",lt="CCW";function ut(t){var e=void 0===(o=t.addressList)?[]:o,r=void 0===(i=t.geometries)?[]:i,i=void 0===(o=t.entity)?null:o,o=void 0===(o=t.name)?"":o;t=void 0===(t=t.icon)?"":t;n(this,ut),this.addressList=e,this.geometries=r,this.icon=t,this.entity=i,this.name=o}var ct,ht,ft=(function(t){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==r(t)&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)})(t)}var o=n(1),a=(n=n(7)).get,s=(n.deepValue,n.isArray);(function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}})(l.prototype,[{key:"setCollection",value:function(t){return this.list=t}},{key:"_processKeys",value:function(t){if(this._keyWeights={},this._keyNames=[],t.length&&"string"==typeof t[0])for(var e=0,r=t.length;e<r;e+=1){var n=t[e];this._keyWeights[n]=1,this._keyNames.push(n)}else{for(var i=0,o=0,a=t.length;o<a;o+=1){var s=t[o];if(!s.hasOwnProperty("name"))throw new Error('Missing "name" property in key object');var l=s.name;if(this._keyNames.push(l),!s.hasOwnProperty("weight"))throw new Error('Missing "weight" property in key object');if((s=s.weight)<0||1<s)throw new Error('"weight" property in key must bein the range of [0, 1)');i+=this._keyWeights[l]=s}if(1<i)throw new Error("Total of weights cannot exceed 1")}}},{key:"search",value:function(t,e){var r=1<arguments.length&&void 0!==e?e:{limit:!1};return this._log('---------\nSearch pattern: "'.concat(t,'"')),t=(e=this._prepareSearchers(t)).tokenSearchers,e=e.fullSearcher,e=this._search(t,e),this._computeScore(e),this.options.shouldSort&&this._sort(e),r.limit&&"number"==typeof r.limit&&(e=e.slice(0,r.limit)),this._format(e)}},{key:"_prepareSearchers",value:function(t){t=0<arguments.length&&void 0!==t?t:"";var e=[];if(this.options.tokenize)for(var r=t.split(this.options.tokenSeparator),n=0,i=r.length;n<i;n+=1)e.push(new o(r[n],this.options));return{tokenSearchers:e,fullSearcher:new o(t,this.options)}}},{key:"_search",value:function(t,e){var r=0<arguments.length&&void 0!==t?t:[],n=1<arguments.length?e:void 0,i=this.list,o={},a=[];if("string"==typeof i[0]){for(var s=0,l=i.length;s<l;s+=1)this._analyze({key:"",value:i[s],record:s,index:s},{resultMap:o,results:a,tokenSearchers:r,fullSearcher:n});return a}for(var u=0,c=i.length;u<c;u+=1)for(var h=i[u],f=0,p=this._keyNames.length;f<p;f+=1){var A=this._keyNames[f];this._analyze({key:A,value:this.options.getFn(h,A),record:h,index:u},{resultMap:o,results:a,tokenSearchers:r,fullSearcher:n})}return a}},{key:"_analyze",value:function(t,e){var r=this,n=t.key,i=void 0===(l=t.arrayIndex)?-1:l,o=t.value,a=t.record,l=t.index,u=void 0===(t=e.tokenSearchers)?[]:t,c=e.fullSearcher,h=void 0===(t=e.resultMap)?{}:t,f=void 0===(e=e.results)?[]:e;!function t(e,i,o,a){if(null!=i)if("string"==typeof i){var l=!1,p=-1,A=0;r._log("\nKey: ".concat(""===n?"--":n));var d=c.search(i);if(r._log('Full text: "'.concat(i,'", score: ').concat(d.score)),r.options.tokenize){for(var g=i.split(r.options.tokenSeparator),y=g.length,v=[],m=0,b=u.length;m<b;m+=1){var _=u[m];r._log('\nPattern: "'.concat(_.pattern,'"'));for(var w=!1,x=0;x<y;x+=1){var E=g[x],B=_.search(E),C={};B.isMatch?(C[E]=B.score,w=l=!0,v.push(B.score)):(C[E]=1,r.options.matchAllTokens||v.push(1)),r._log('Token: "'.concat(E,'", score: ').concat(C[E]))}w&&(A+=1)}p=v[0];for(var S=v.length,k=1;k<S;k+=1)p+=v[k];p/=S,r._log("Token score average:",p)}var T=d.score;-1<p&&(T=(T+p)/2),r._log("Score average:",T);var N=!r.options.tokenize||!r.options.matchAllTokens||A>=u.length;r._log("\nCheck Matches: ".concat(N)),(l||d.isMatch)&&N&&(T={key:n,arrayIndex:e,value:i,score:T},r.options.includeMatches&&(T.matchedIndices=d.matchedIndices),(d=h[a])?d.output.push(T):(h[a]={item:o,output:[T]},f.push(h[a])))}else if(s(i))for(var L=0,I=i.length;L<I;L+=1)t(L,i[L],o,a)}(i,o,a,l)}},{key:"_computeScore",value:function(t){this._log("\n\nComputing score:\n");for(var e=this._keyWeights,r=!!Object.keys(e).length,n=0,i=t.length;n<i;n+=1){for(var o=t[n],a=o.output,s=a.length,l=1,u=0;u<s;u+=1){var c=(f=a[u]).key,h=r?e[c]:1,f=0===f.score&&e&&0<e[c]?Number.EPSILON:f.score;l*=Math.pow(f,h)}o.score=l,this._log(o)}}},{key:"_sort",value:function(t){this._log("\n\nSorting...."),t.sort(this.options.sortFn)}},{key:"_format",value:function(t){var e,r=[];this.options.verbose&&(e=[],this._log("\n\nOutput:\n\n",JSON.stringify(t,(function(t,r){if("object"===i(r)&&null!==r){if(-1!==e.indexOf(r))return;e.push(r)}return r}),2)),e=null);var n=[];this.options.includeMatches&&n.push((function(t,e){var r=t.output;e.matches=[];for(var n=0,i=r.length;n<i;n+=1){var o,a=r[n];0!==a.matchedIndices.length&&(o={indices:a.matchedIndices,value:a.value},a.key&&(o.key=a.key),a.hasOwnProperty("arrayIndex")&&-1<a.arrayIndex&&(o.arrayIndex=a.arrayIndex),e.matches.push(o))}})),this.options.includeScore&&n.push((function(t,e){e.score=t.score}));for(var o=0,a=t.length;o<a;o+=1){var s=t[o];if(this.options.id&&(s.item=this.options.getFn(s.item,this.options.id)[0]),n.length){for(var l={item:s.item},u=0,c=n.length;u<c;u+=1)n[u](s,l);r.push(l)}else r.push(s.item)}return r}},{key:"_log",value:function(){var t;this.options.verbose&&(t=console).log.apply(t,arguments)}}]),n=l;function l(t,e){var r=void 0===(f=e.location)?0:f,n=void 0===(b=e.distance)?100:b,i=void 0===(p=e.threshold)?.6:p,o=void 0===(y=e.maxPatternLength)?32:y,s=void 0!==(A=e.caseSensitive)&&A,u=void 0===(m=e.tokenSeparator)?/ +/g:m,c=void 0!==(d=e.findAllMatches)&&d,h=void 0===(v=e.minMatchCharLength)?1:v,f=void 0===(g=e.id)?null:g,p=void 0===(b=e.keys)?[]:b,A=void 0===(y=e.shouldSort)||y,d=void 0===(m=e.getFn)?a:m,g=void 0===(v=e.sortFn)?function(t,e){return t.score-e.score}:v,y=void 0!==(b=e.tokenize)&&b,v=void 0!==(m=e.matchAllTokens)&&m,m=void 0!==(b=e.includeMatches)&&b,b=void 0!==(b=e.includeScore)&&b;e=void 0!==(e=e.verbose)&&e;!function(t){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this),this.options={location:r,distance:n,threshold:i,maxPatternLength:o,isCaseSensitive:s,tokenSeparator:u,findAllMatches:c,minMatchCharLength:h,id:f,keys:p,includeMatches:m,includeScore:b,shouldSort:A,getFn:d,sortFn:g,verbose:e,tokenize:y,matchAllTokens:v},this.setCollection(t),this._processKeys(p)}t.exports=n},function(t,e,r){var n=r(2),i=r(3),o=r(6);(function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}})(a.prototype,[{key:"search",value:function(t){var e=(l=this.options).isCaseSensitive,r=l.includeMatches;if(e||(t=t.toLowerCase()),this.pattern===t){var o={isMatch:!0,score:0};return r&&(o.matchedIndices=[[0,t.length-1]]),o}var a=this.options,s=a.maxPatternLength,l=a.tokenSeparator;return this.pattern.length>s?n(t,this.pattern,l):(o=(e=this.options).location,a=e.distance,s=e.threshold,l=e.findAllMatches,e=e.minMatchCharLength,i(t,this.pattern,this.patternAlphabet,{location:o,distance:a,threshold:s,findAllMatches:l,minMatchCharLength:e,includeMatches:r}))}}]),r=a;function a(t,e){var r=void 0===(h=e.location)?0:h,n=void 0===(l=e.distance)?100:l,i=void 0===(c=e.threshold)?.6:c,s=void 0===(u=e.maxPatternLength)?32:u,l=void 0!==(h=e.isCaseSensitive)&&h,u=void 0===(c=e.tokenSeparator)?/ +/g:c,c=void 0!==(h=e.findAllMatches)&&h,h=void 0===(h=e.minMatchCharLength)?1:h;e=void 0!==(e=e.includeMatches)&&e;!function(t){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.options={location:r,distance:n,threshold:i,maxPatternLength:s,isCaseSensitive:l,tokenSeparator:u,findAllMatches:c,includeMatches:e,minMatchCharLength:h},this.pattern=l?t:t.toLowerCase(),this.pattern.length<=s&&(this.patternAlphabet=o(this.pattern))}t.exports=r},function(t,e){var r=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;t.exports=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:/ +/g,i=(n=new RegExp(e.replace(r,"\\$&").replace(n,"|")),t.match(n)),o=[];if(n=!!i)for(var a=0,s=i.length;a<s;a+=1){var l=i[a];o.push([t.indexOf(l),l.length-1])}return{score:n?.5:1,isMatch:n,matchedIndices:o}}},function(t,e,r){var n=r(4),i=r(5);t.exports=function(t,e,r,o){for(var a=void 0===(c=o.location)?0:c,s=void 0===(l=o.distance)?100:l,l=void 0===(c=o.threshold)?.6:c,u=void 0!==(c=o.findAllMatches)&&c,c=void 0===(c=o.minMatchCharLength)?1:c,h=(o=void 0!==(o=o.includeMatches)&&o,a),f=t.length,p=l,A=t.indexOf(e,h),d=e.length,g=[],y=0;y<f;y+=1)g[y]=0;-1!==A&&(l=n(e,{errors:0,currentLocation:A,expectedLocation:h,distance:s}),p=Math.min(l,p),-1!==(A=t.lastIndexOf(e,h+d))&&(L=n(e,{errors:0,currentLocation:A,expectedLocation:h,distance:s}),p=Math.min(L,p))),A=-1;for(var v=[],m=1,b=d+f,_=1<<(d<=31?d-1:30),w=0;w<d;w+=1){for(var x=0,E=b;x<E;)n(e,{errors:w,currentLocation:h+E,expectedLocation:h,distance:s})<=p?x=E:b=E,E=Math.floor((b-x)/2+x);b=E;var B=Math.max(1,h-E+1),C=u?f:Math.min(h+E,f)+d,S=Array(C+2);S[C+1]=(1<<w)-1;for(var k=C;B<=k;--k){var T=k-1,N=r[t.charAt(T)];if(N&&(g[T]=1),S[k]=(S[k+1]<<1|1)&N,0!==w&&(S[k]|=(v[k+1]|v[k])<<1|1|v[k+1]),S[k]&_&&(m=n(e,{errors:w,currentLocation:T,expectedLocation:h,distance:s}))<=p){if(p=m,(A=T)<=h)break;B=Math.max(1,2*h-A)}}if(n(e,{errors:w+1,currentLocation:h,expectedLocation:h,distance:s})>p)break;v=S}var L={isMatch:0<=A,score:0===m?.001:m};return o&&(L.matchedIndices=i(g,c)),L}},function(t,e){t.exports=function(t,e){var r=void 0===(n=e.errors)?0:n,n=void 0===(i=e.currentLocation)?0:i,i=void 0===(i=e.expectedLocation)?0:i;e=void 0===(e=e.distance)?100:e,t=r/t.length,n=Math.abs(i-n);return e?t+n/e:n?1:t}},function(t,e){t.exports=function(){for(var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=[],i=-1,o=0,a=e.length;o<a;o+=1){var s=e[o];s&&-1===i?i=o:s||-1===i||((t=o-1)-i+1>=r&&n.push([i,t]),i=-1)}return e[o-1]&&r<=o-i&&n.push([i,o-1]),n}},function(t,e){t.exports=function(t){for(var e={},r=t.length,n=0;n<r;n+=1)e[t.charAt(n)]=0;for(var i=0;i<r;i+=1)e[t.charAt(i)]|=1<<r-i-1;return e}},function(t,e){function r(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function n(t){return null==t?"":function(){if("string"==typeof t)return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}()}function i(t){return"string"==typeof t}function o(t){return"number"==typeof t}t.exports={get:function(t,e){var a=[];return function t(e,s){if(s){var l=s.indexOf("."),u=s,c=null;-1!==l&&(u=s.slice(0,l),c=s.slice(l+1));var h=e[u];if(null!=h)if(c||!i(h)&&!o(h))if(r(h))for(var f=0,p=h.length;f<p;f+=1)t(h[f],c);else c&&t(h,c);else a.push(n(h))}else a.push(e)}(t,e),a},isArray:r,isString:i,isNum:o,toString:n}}])}(ct={exports:{}}),ct.exports),pt=(ht=ft)&&ht.__esModule&&Object.prototype.hasOwnProperty.call(ht,"default")?ht.default:ht,At=(ft.Fuse,{keys:[{name:"name",weight:.6},{name:"addressList",weight:.4}],threshold:.2}),dt=function(){function t(e){n(this,t),this.fuseSearch=null,this.levels_=null,this.searchListEntities_=[],this.searchListIcons_=[],this.searchList_=[],this.venueModel=e,this.init()}return o(t,[{key:"init",value:function(){var t=this.venueModel.getGeometries().reduce((function(t,e){return t[e.getId()]=e,t}),{});this.initEntityList(this.venueModel.entities),this.initIconList(t),this.levels_=this.venueModel.getLevels().map((function(t){return{levelId:t.getId(),levelName:t.getName(),drawingId:t.getDrawing().getId(),drawingName:t.getDrawing().getName()}})),t=[].concat(v(this.searchListEntities_),v(this.searchListIcons_)),this.searchList_=t.sort((function(t,e){return t.name.localeCompare(e.name)})),this.fuseSearch_=new pt(this.searchList_,At)}},{key:"initEntityList",value:function(t){t=(0<arguments.length&&void 0!==t?t:[]).map((function(t){return new ut({geometries:t.getGeometries(),addressList:t.getInternalAddress()||[],name:t.getName()||"",entity:t})})),this.searchListEntities_=t}},{key:"initIconList",value:function(t){t=0<arguments.length&&void 0!==t?t:{},this.searchListIcons_=Object.values(t).filter((function(t){return t.getIcon()})).map((function(t){var e=t.getIcon();return new ut({geometries:[t],icon:e.getSVG(),name:e.ar||""})}))}},{key:"all",value:function(){return this.searchList_}},{key:"allIconTypes",value:function(){var t=this.searchListIcons_.reduce((function(t,e){return t[e.name]=e.name,t}),{});return Object.keys(t)}},{key:"find",value:function(t){return""===(t=0<arguments.length&&void 0!==t?t:"")?this.searchList_:this.fuseSearch_.search(t)}},{key:"groupByLevel",value:function(t){var e=0<arguments.length&&void 0!==t?t:this.searchList_;return this.levels_?v(this.levels_.flatMap((function(t){return l(l({},t),{},{results:e.filter((function(e){return r=t,0<e.geometries.length&&e.geometries.find((function(t){return Number(t.getLevel().getId())===Number(r.levelId)}));var r}))})}))):[]}}]),t}(),gt="Point",yt="LineString",vt="Polygon",mt="MultiPoint",bt="MultiLineString",_t="MultiPolygon",wt=Object.freeze({STANDARD:"STANDARD",FLATTEN:"FLATTEN",OUTDOOR_MAIN:"OUTDOOR_MAIN",INDOOR_MAIN:"INDOOR_MAIN",NO_OUTDOORS:"NO_OUTDOORS",FLATTEN_INDOOR_MAIN:"FLATTEN_INDOOR_MAIN",FLATTEN_OUTDOOR_COPY:"FLATTEN_OUTDOOR_COPY"}),xt=Object.freeze({THEME:"THEME",THEME_MAP:"THEME_MAP",PRESETS:"PRESETS",SDK_STRINGS:"SDK_STRINGS",ICON_FILE:"ICON_FILE",INPUT_COLORS:"INPUT_COLORS",BASE_MAP_INFO:"BASE_MAP_INFO",CONFIG_PROFILE:"CONFIG_PROFILE",NAV_THEME:"NAV_THEME",NAV_NAME_THEME:"NAV_NAME_THEME",NAV_PROP_MAP:"NAV_PROP_MAP",NAV_STRINGS:"NAV_STRINGS",NAV_THEME_MAP:"NAV_THEME_MAP",NAV_NAME_THEME_MAP:"NAV_NAME_THEME_MAP",V4_THEME_FAMILY:"V4_THEME_FAMILY",V4_MAPTYPE_THEME:"V4_MAPTYPE_THEME",ICON:"ICON",MARKER:"MARKER",PERMISSIONS:"PERMISSIONS",NAICS_ARRAY:"NAICS_ARRAY",NAICS_MAP:"NAICS_MAP"}),Et=Object.freeze((a(xe={},xt.THEME,"themeUrls"),a(xe,xt.THEME_MAP,"themeMapUrl"),a(xe,xt.PRESETS,"presetsUrl"),a(xe,xt.SDK_STRINGS,"stringsUrl"),xe)),Bt=Object.freeze((a(Oe={},xt.THEME,"themeOverrides"),a(Oe,xt.THEME_MAP,"themeMapOverrides"),a(Oe,xt.PRESETS,"presetOverrides"),a(Oe,xt.SDK_STRINGS,"stringsOverrides"),a(Oe,xt.INPUT_COLORS,"inputColorOverrides"),Oe)),Ct=(Object.freeze((a(kt={},xt.THEME,["Modern","Standard","Factory","Navteq","TheBase","Westfield_noLabels","Westfield","TDM_noLabel"]),a(kt,xt.SDK_STRINGS,["Standard","SDK","sdk/standard"]),a(kt,xt.V4_THEME_FAMILY,["modern","standard"]),a(kt,xt.V4_MAPTYPE_THEME,["Airport Terminal","Airport","Casino","College Building","College Campus","Convention","General","Hospital","Outdoor","Retail","School Building","School Campus","Shopping Mall","Traffic","Train Station"]),a(kt,xt.NAV_THEME,["Factory","MapEditor"]),a(kt,xt.ICON,["Multicolor","Standard","TheBase","Factory"]),kt)),Object.freeze((a(xe={},xt.THEME,"Modern"),a(xe,xt.THEME_MAP,"Standard"),a(xe,xt.PRESETS,"Standard"),a(xe,xt.SDK_STRINGS,"Standard"),a(xe,xt.ICON_FILE,"Standard"),a(xe,xt.INPUT_COLORS,"Standard"),a(xe,xt.BASE_MAP_INFO,"Standard"),a(xe,xt.CONFIG_PROFILE,"factory"),a(xe,xt.NAV_THEME,"Factory"),a(xe,xt.NAV_NAME_THEME,"FactoryName"),a(xe,xt.NAV_PROP_MAP,"Standard"),a(xe,xt.NAV_STRINGS,"Standard"),a(xe,xt.NAV_THEME_MAP,"Standard"),a(xe,xt.NAV_NAME_THEME_MAP,"StandardName"),a(xe,xt.V4_THEME_FAMILY,"Standard"),a(xe,xt.V4_MAPTYPE_THEME,"Standard"),a(xe,xt.ICON,"Multicolor"),a(xe,xt.MARKER,"Standard"),xe))),St=Object.freeze({GEO_JSON:"GEO_JSON",V5_MAP:"V5_MAP",V5_NAV:"V5_NAV",V5_INFO:"V5_INFO",KML:"KML",SVG:"SVG",PNG:"PNG"}),kt=Object.freeze((a(Oe={},St.V5_MAP,{COMMUNITY_MAP:"COMMUNITY_MAP",COMMUNITY_DIRECTORY:"COMMUNITY_DIRECTORY",COMMUNITY_DETAIL:"COMMUNITY_DETAIL",LEVEL_GEOMETRY:"LEVEL_GEOMETRY",DRAWING_ENTITY:"DRAWING_ENTITY"}),a(Oe,St.GEO_JSON,{COMMUNITY_MAP:"COMMUNITY_MAP",COMMUNITY_ENTITY:"COMMUNITY_ENTITY",PATH_LEVEL_GEOMETRY:"PATH_LEVEL_GEOMETRY",GEOJSON_LEVEL_GEOMETRY:"GEOJSON_LEVEL_GEOMETRY"}),a(Oe,St.V5_NAV,{JSON_NAV:"JSON_NAV",BINARY_NAV:"BINARY_NAV",JSON_ENHANCED_NAV:"JSON_ENHANCED_NAV",BINARY_ENHANCED_NAV:"BINARY_ENHANCED_NAV"}),a(Oe,St.V5_INFO,{GEOMETRY_INFO:"GEOMETRY_INFO"}),a(Oe,St.SVG,{PLAIN:"PLAIN",PRETTY:"PRETTY",PRETTY_HORIZONTAL_LABEL:"PRETTY_HORIZONTAL_LABEL"}),a(Oe,St.KML,{RASTER:"RASTER",VECTOR:"VECTOR",RASTER_HORIZONTAL:"RASTER_HORIZONTAL",VECTOR_HORIZONTAL:"VECTOR_HORIZONTAL"}),a(Oe,St.PNG,{LOW_RESOLUTION:"LOW_RESOLUTION",HIGH_RESOLUTION:"HIGH_RESOLUTION",LOW_RESOLUTION_GEO:"LOW_RESOLUTION_GEO",HIGH_RESOLUTION_GEO:"HIGH_RESOLUTION_GEO",LOW_RESOLUTION_HORIZONTAL:"LOW_RESOLUTION_HORIZONTAL",HIGH_RESOLUTION_HORIZONTAL:"HIGH_RESOLUTION_HORIZONTAL",LOW_RESOLUTION_HORIZONTAL_GEO:"LOW_RESOLUTION_HORIZONTAL_GEO",HIGH_RESOLUTION_HORIZONTAL_GEO:"HIGH_RESOLUTION_HORIZONTAL_GEO"}),Oe));function Tt(){}function Nt(){Nt.init.call(this)}function Lt(t){return void 0===t._maxListeners?Nt.defaultMaxListeners:t._maxListeners}function It(t,e,r,n){var i,o;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');return(i=t._events)?(i.newListener&&(t.emit("newListener",e,r.listener||r),i=t._events),o=i[e]):(i=t._events=new Tt,t._eventsCount=0),o?("function"==typeof o?o=i[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),o.warned||(n=Lt(t))&&0<n&&o.length>n&&(o.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=t,n.type=e,n.count=o.length,"function"==typeof console.warn?console.warn(n):console.log(n))):(o=i[e]=r,++t._eventsCount),t}function Mt(t,e,r){var n=!1;function i(){t.removeListener(e,i),n||(n=!0,r.apply(t,arguments))}return i.listener=r,i}function Ot(t){var e=this._events;if(e){if("function"==typeof(t=e[t]))return 1;if(t)return t.length}return 0}function Pt(t,e){for(var r=new Array(e);e--;)r[e]=t[e];return r}Tt.prototype=Object.create(null),(Nt.EventEmitter=Nt).usingDomains=!1,Nt.prototype.domain=void 0,Nt.prototype._events=void 0,Nt.prototype._maxListeners=void 0,Nt.defaultMaxListeners=10,Nt.init=function(){this.domain=null,Nt.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Tt,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Nt.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},Nt.prototype.getMaxListeners=function(){return Lt(this)},Nt.prototype.emit=function(t,e,r,n){var i,o,a,s="error"===t,l=this._events;if(l)s=s&&null==l.error;else if(!s)return!1;if(u=this.domain,s){if(s=e,u)return(s=s||new Error('Uncaught, unspecified "error" event')).domainEmitter=this,s.domain=u,s.domainThrown=!1,u.emit("error",s),!1;if(s instanceof Error)throw s;var u=new Error('Uncaught, unspecified "error" event. ('+s+")");throw u.context=s,u}if(!(i=l[t]))return!1;var c,h="function"==typeof i;switch(c=arguments.length){case 1:!function(t,e,r){if(e)t.call(r);else for(var n=t.length,i=Pt(t,n),o=0;o<n;++o)i[o].call(r)}(i,h,this);break;case 2:!function(t,e,r,n){if(e)t.call(r,n);else for(var i=t.length,o=Pt(t,i),a=0;a<i;++a)o[a].call(r,n)}(i,h,this,e);break;case 3:!function(t,e,r,n,i){if(e)t.call(r,n,i);else for(var o=t.length,a=Pt(t,o),s=0;s<o;++s)a[s].call(r,n,i)}(i,h,this,e,r);break;case 4:!function(t,e,r,n,i,o){if(e)t.call(r,n,i,o);else for(var a=t.length,s=Pt(t,a),l=0;l<a;++l)s[l].call(r,n,i,o)}(i,h,this,e,r,n);break;default:for(o=new Array(c-1),a=1;a<c;a++)o[a-1]=arguments[a];!function(t,e,r,n){if(e)t.apply(r,n);else for(var i=t.length,o=Pt(t,i),a=0;a<i;++a)o[a].apply(r,n)}(i,h,this,o)}return!0},Nt.prototype.addListener=function(t,e){return It(this,t,e,!1)},Nt.prototype.on=Nt.prototype.addListener,Nt.prototype.prependListener=function(t,e){return It(this,t,e,!0)},Nt.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,Mt(this,t,e)),this},Nt.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,Mt(this,t,e)),this},Nt.prototype.removeListener=function(t,e){var r,n,i,o,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[t]))return this;if(r===e||r.listener&&r.listener===e)0==--this._eventsCount?this._events=new Tt:(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,o=r.length;0<o--;)if(r[o]===e||r[o].listener&&r[o].listener===e){a=r[o].listener,i=o;break}if(i<0)return this;if(1===r.length){if(r[0]=void 0,0==--this._eventsCount)return this._events=new Tt,this;delete n[t]}else!function(t,e){for(var r=e,n=r+1,i=t.length;n<i;r+=1,n+=1)t[r]=t[n];t.pop()}(r,i);n.removeListener&&this.emit("removeListener",t,a||e)}return this},Nt.prototype.removeAllListeners=function(t){var e,r=this._events;if(!r)return this;if(!r.removeListener)return 0===arguments.length?(this._events=new Tt,this._eventsCount=0):r[t]&&(0==--this._eventsCount?this._events=new Tt:delete r[t]),this;if(0===arguments.length){for(var n,i=Object.keys(r),o=0;o<i.length;++o)"removeListener"!==(n=i[o])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new Tt,this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(e)for(;this.removeListener(t,e[e.length-1]),e[0];);return this},Nt.prototype.listeners=function(t){var e=this._events,r=e&&(r=e[t])?"function"==typeof r?[r.listener||r]:function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(r):[];return r},Nt.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):Ot.call(t,e)},Nt.prototype.listenerCount=Ot,Nt.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var Ft="venues-ui-button--active",Ut="venues-ui-button",Rt="venues-ui__drawings",Dt="data-drawing",jt=function(){function t(e,r,i){var o=this;n(this,t),this.clickHandler=i,this.containerDiv=document.createElement("div"),this.containerDiv.setAttribute("class",Rt);var a=document.createElement("div");a.setAttribute("class","trigger ".concat(Ut)),(i=document.createElement("div")).setAttribute("class","arrow arrow--down"),a.appendChild(i),a.addEventListener("click",(function(){a.classList.toggle(Ft),o.containerButtons.classList.toggle("drawings--open")})),this.containerDiv.appendChild(a),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class","drawings"),this.containerDiv.appendChild(this.containerButtons),r&&this.update(r),e.appendChild(this.containerDiv)}return o(t,[{key:"drawButton",value:function(t,e,r){var n=this,i=document.createElement("div");r=Number(r)===Number(t);i.setAttribute("class",r?"".concat(Ut," ").concat(Ft):Ut),i.innerHTML=e,i.setAttribute(Dt,t),i.addEventListener("click",(function(){n.switch(t),n.clickHandler(t)})),this.containerButtons.appendChild(i)}},{key:"switch",value:function(t){this.containerButtons.querySelectorAll(".".concat(Rt," .").concat(Ft)).forEach((function(t){return t.setAttribute("class",Ut)})),(t=this.containerButtons.querySelector("[".concat(Dt,"='").concat(t,"']")))&&t.setAttribute("class","".concat(Ut," ").concat(Ft))}},{key:"update",value:function(t){var e=this;this.containerButtons.innerHTML="";var r=function(t){return t=t.getDrawings(),new Map(t.map((function(t){var e=t.getDisplayName()||t.getName();return[t.getId(),e]})))}(t);0<r.size&&r.forEach((function(r,n){return e.drawButton(n,r,t.getRootDrawing().getId())}))}}]),t}(),Ht="venues-ui-button--active",Qt="venues-ui-button",zt="levels",Vt="data-level",Gt="venues-ui__levels",qt=function(){function t(e,r,i,o){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:4;n(this,t),this.clickHandler=o,this.levelButtonCount=a,this.currentScrollIndex=0,this.containerUI=document.createElement("div"),this.containerUI.setAttribute("class","".concat(Gt)),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class",zt),this.containerUI.appendChild(this.containerButtons),r&&this.update(r,i),e.appendChild(this.containerUI)}return o(t,[{key:"clear",value:function(){this.containerButtons.innerHTML="",this.buttonScrollUp&&(this.containerUI.removeChild(this.buttonScrollUp),this.buttonScrollUp=null),this.buttonScrollDown&&(this.containerUI.removeChild(this.buttonScrollDown),this.buttonScrollDown=null)}},{key:"drawLevelButton",value:function(t,e){var r=this,n=document.createElement("div");n.innerHTML=e,n.style.fontSize="".concat(Math.max(Math.min(28.8/e.length,11.52),10),"px"),n.style.display="block",n.setAttribute("class",Qt),n.setAttribute(Vt,t),n.addEventListener("click",(function(){r.switch(t),r.clickHandler(t)})),this.containerButtons.appendChild(n)}},{key:"drawScrollButtons",value:function(){var t=this;this.buttonScrollUp=document.createElement("div"),this.buttonScrollUp.setAttribute("class","".concat(Qt," ").concat(Qt,"--up"));var e=document.createElement("div");e.setAttribute("class","arrow arrow--up"),this.buttonScrollUp.appendChild(e),this.buttonScrollUp.addEventListener("click",(function(){return t.scroll(1)})),this.containerUI.insertBefore(this.buttonScrollUp,this.containerButtons),this.buttonScrollDown=document.createElement("div"),this.buttonScrollDown.setAttribute("class","".concat(Qt," ").concat(Qt,"--down")),(e=document.createElement("div")).setAttribute("class","arrow arrow--down"),this.buttonScrollDown.appendChild(e),this.buttonScrollDown.addEventListener("click",(function(){return t.scroll(-1)})),this.containerUI.appendChild(this.buttonScrollDown)}},{key:"scroll",value:function(t){var e,r=0<arguments.length&&void 0!==t?t:0,n=Array.from(this.containerButtons.querySelectorAll(".".concat(Qt))).reverse(),i=[];0<=r?(this.currentScrollIndex=Math.min(this.currentScrollIndex+r,n.length-this.levelButtonCount),t=Math.min(this.currentScrollIndex,n.length-this.levelButtonCount),e=Math.min(this.currentScrollIndex+this.levelButtonCount,n.length),i=n.slice(t,e)):r<0&&(this.currentScrollIndex=Math.max(this.currentScrollIndex+r,0),e=Math.max(0,this.currentScrollIndex),r=Math.min(n.length,this.currentScrollIndex+this.levelButtonCount),i=n.slice(e,r)),n.forEach((function(t){-1!==i.indexOf(t)?t.style.display="block":t.style.display="none"})),this.buttonScrollDown&&(0===this.currentScrollIndex?this.buttonScrollDown.setAttribute("disabled","disabled"):this.buttonScrollDown.removeAttribute("disabled")),this.buttonScrollUp&&(this.currentScrollIndex===n.length-this.levelButtonCount?this.buttonScrollUp.setAttribute("disabled","disabled"):this.buttonScrollUp.removeAttribute("disabled"))}},{key:"switch",value:function(t){this.containerButtons.querySelectorAll(".".concat(Ht)).forEach((function(t){return t.setAttribute("class",Qt)}));var e=this.containerButtons.querySelector(".".concat(Gt," [").concat(Vt,"='").concat(t,"']"));e&&(t=Array.from(this.containerButtons.querySelectorAll(".".concat(Qt))).reverse(),e.setAttribute("class","".concat(Qt," ").concat(Ht)),((e=t.indexOf(e))<this.currentScrollIndex||e>=this.currentScrollIndex+4)&&this.scroll(e-this.currentScrollIndex))}},{key:"update",value:function(t,e){var r=this,n=(e=function(t){return new Map((0<arguments.length&&void 0!==t?t:[]).map((function(t){return[t.getZIndex(),t.getShortName()||t.getDisplayName()||t.getName()]})))}(function(t,e){return e!==wt.FLATTEN?t.getLevels():(t=t.getVenueModel().getLevelMapFlattenedByZIndex_(),Object.values(t).map((function(t){return t[0]})))}(t,e).sort((function(t,e){return e.getZIndex()-t.getZIndex()}))),t.getMainLevel().getZIndex());this.clear(),e.forEach((function(t,e){return r.drawLevelButton(e,t)})),e.size>this.levelButtonCount&&(e.size>this.levelButtonCount+1?this.currentScrollIndex=Math.min(Array.from(e).reverse().findIndex((function(t){return t[0]===n})),e.size-this.levelButtonCount):this.currentScrollIndex=0,this.drawScrollButtons(),this.scroll(0)),this.switch(n)}}]),t}(),Kt={VENUE_DATA_LOADED:"VENUE_DATA_LOADED",VENUE_MAP_DATA_LOADED:"VENUE_MAP_DATA_LOADED",VENUE_ENTITY_DATA_LOADED:"VENUE_ENTITY_DATA_LOADED",VENUE_DATA_MODEL_LOADED:"VENUE_DATA_MODEL_LOADED",VENUE_NAV_DATA_LOADED:"VENUE_NAV_DATA_LOADED",META_DATA_LOADED:"META_DATA_LOADED",META_DATA_MODEL_LOADED:"META_DATA_MODEL_LOADED",META_DATA_MODEL_UPDATED:"META_DATA_MODEL_UPDATED",VENUE_ICONS_LOADED:"VENUE_ICONS_LOADED"},Yt=(Object.freeze((a(xe={},Kt.VENUE_DATA_LOADED,{description:"event fired when all requested files along with metadata & overrides are loaded",emitTemplate:{}}),a(xe,Kt.VENUE_MAP_DATA_LOADED,{description:"event fired when requested levels, drawings & community files are loaded",emitTemplate:{}}),a(xe,Kt.VENUE_ENTITY_DATA_LOADED,{description:"event fired when requested entity data is loaded",emitTemplate:{}}),a(xe,Kt.VENUE_DATA_MODEL_LOADED,{description:"event fired when a map file is loaded",emitTemplate:{}}),a(xe,Kt.VENUE_NAV_DATA_LOADED,{description:"event fired when requested navigation product is loaded",emitTemplate:{}}),a(xe,Kt.META_DATA_LOADED,{description:"event fired when all requested meta files are loaded except icon & marker",emitTemplate:{}}),a(xe,Kt.META_DATA_MODEL_LOADED,{description:"event fired when a specific model is loaded except icon & marker",emitTemplate:{}}),a(xe,Kt.META_DATA_MODEL_UPDATED,{description:"event fired when a specific meta override is added or removed",emitTemplate:{}}),a(xe,Kt.VENUE_ICONS_LOADED,{description:"event fired when all icons of venue are loaded",emitTemplate:{}}),xe)),new Nt);function Wt(t,e){var r,n,i,o,a=0;Object.keys(e).forEach((function(s){for(r=e[s],null==(i=r.priority)&&(i=0),o=!1;!o;)a<t.length?null==(n=(n=t[a]).priority)&&(n=0):n=Number.MAX_VALUE,i<=n&&(t.splice(a,0,r),o=!0),a+=1}))}Yt.EVENT_NAME=Kt,Yt.on("newListener",(function(t){Kt[t]||console.warn("subscribing for un-registered/documented event")}));var Xt=Math.PI/180,Jt=180/Math.PI,Zt=function(){function t(){n(this,t)}return o(t,null,[{key:"toRadians",value:function(t){return t*Xt}},{key:"toDegrees",value:function(t){return t*Jt}},{key:"getInverseTransform",value:function(t){var e=t[0]*t[3]-t[1]*t[2];return(e=[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,0,0])[4]=-(e[0]*t[4]+e[2]*t[5]),e[5]=-(e[1]*t[4]+e[3]*t[5]),e}},{key:"applyTransformToPoint",value:function(t,e){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}},{key:"transformProduct",value:function(t,e){var r=[0,0,0,0,0,0];return r[0]=e[0]*t[0]+e[2]*t[1],r[1]=e[1]*t[0]+e[3]*t[1],r[2]=e[0]*t[2]+e[2]*t[3],r[3]=e[1]*t[2]+e[3]*t[3],r[4]=e[0]*t[4]+e[2]*t[5]+e[4],r[5]=e[1]*t[4]+e[3]*t[5]+e[5],r}},{key:"convertLonLatToMerc",value:function(t){var e=t[0]*Xt;t=t[1]*Xt,t=Math.sin(t);return[.5+e/(2*Math.PI),.5-Math.log((1+t)/(1-t))/(4*Math.PI)]}},{key:"convertMercToLatLon",value:function(t){var e=2*Math.PI*(t[0]-.5);t=Math.atan(Math.sinh(2*Math.PI*(.5-t[1])));return[e/Xt,t/Xt]}},{key:"getTransformScale",value:function(t){return Math.sqrt(t[0]*t[3]-t[1]*t[2])}},{key:"getLonLatToMercTransform",value:function(e){var r=[1/360,0,0,-1/(360*Math.cos(e[1]*Xt)),0,0],n=t.applyTransformToPoint(r,e);e=t.convertLonLatToMerc(e);return r[4]=e[0]-n[0],r[5]=e[1]-n[1],r}},{key:"getNatToMercTransform",value:function(e){var r=[e[4],e[5]];r=t.getLonLatToMercTransform(r);return t.transformProduct(e,r)}},{key:"convertMxMy2LonLat",value:function(e,r){return e.length&&r.length?t.applyTransformToPoint(e,r):[]}},{key:"convertLonLat2MxMy",value:function(e,r){return e.length&&r.length?(e=t.getInverseTransform(e),t.applyTransformToPoint(e,r)):[]}},{key:"getFlattenedQuadraticBezierCurve",value:function(t,e,r,n){var i=[],o=3<arguments.length&&void 0!==n?n:10;o<1&&(o=6);for(var a=0;a<=o;a+=1){var s=(1-(c=a/o))*(1-c),l=2*c*(1-c),u=c*c,c=s*t[0]+l*e[0]+u*r[0];u=s*t[1]+l*e[1]+u*r[1];i.push([c,u])}return i}},{key:"getFlattenedCubicBezierCurve",value:function(t,e,r,n,i){var o=[],a=4<arguments.length&&void 0!==i?i:10;a<1&&(a=6);for(var s=0;s<=a;s+=1){var l=(1-(f=s/a))*(1-f)*(1-f),u=3*f*(1-f)*(1-f),c=3*f*f*(1-f),h=f*f*f,f=l*t[0]+u*e[0]+c*r[0]+h*n[0];h=l*t[1]+u*e[1]+c*r[1]+h*n[1];o.push([f,h])}return o}},{key:"getRectangularCoordinatesOfLabelArea",value:function(e,r,n){var i=!(2<arguments.length&&void 0!==n)||n,o=(u=y(e,6))[0],a=u[1],s=u[2],l=u[3],u=(n=u[5],t.getDeltaLonLatForMeterAtGivenLonLat(o,a));e=e[4];return i?(n&&(e*=-1),null!=r&&(e=(e+=r<0?2*Math.PI+r:r)<0?2*Math.PI+e:e)):e=0,t.getRectVerticesFromSignatureRectRepresentation([o,a],{xLength:s,yLength:l},e,u)}},{key:"getRotatedPoint",value:function(t,e,r,n){var i=!(2<arguments.length&&void 0!==r)||r,o=3<arguments.length&&void 0!==n?n:[0,0],a=Math.cos(e);r=Math.sin(e),n=t[0]-o[0],e=t[1]-o[1],t=[];return[(t=i?[n*a+e*r,e*a-n*r]:[n*a-e*r,e*a+n*r])[0]+o[0],t[1]+o[1]]}},{key:"getRectVerticesFromSignatureRectRepresentation",value:function(e,r,n,i,o){var a=r.xLength,s=(r=r.yLength,!(4<arguments.length&&void 0!==o)||o),l=(e=y(e,2))[0],u=e[1],c=a/2,h=r/2,f=(i=y(i,2))[0],p=i[1];return[[1,1],[-1,1],[-1,-1],[1,-1]].map((function(t){return[t[0]*c,t[1]*h]})).map((function(e){return t.getRotatedPoint(e,n,s)})).map((function(t){return[t[0]*f,t[1]*p]})).map((function(t){return[t[0]+l,t[1]+u]}))}},{key:"getScaleFactorForRectInSpace",value:function(t,e,r,n){return(n=e/n)<(r=t/r)?n:r}},{key:"getDeltaLonLatForMeterAtGivenLonLat",value:function(t,e){return[1/6371e3*(180/Math.PI)/Math.cos(e*Math.PI/180),1/6371e3*(180/Math.PI)]}},{key:"getBoundingBoxVertices",value:function(t){var e=0<arguments.length&&void 0!==t?t:[];t=[[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY]];return e.reduce((function(t,e){return[[Math.min(e[0],t[0][0]),Math.min(e[1],t[0][1])],[Math.max(e[0],t[1][0]),Math.max(e[1],t[1][1])]]}),t)}},{key:"isPointInBoundingBox",value:function(t,e){if(t&&e){var r=(o=y(t,2))[0],n=o[1],i=y(e,2),o=(t=y(i[0],2))[0];e=t[1],i=(t=y(i[1],2))[0],t=t[1];return r<=i&&o<=r&&n<=t&&e<=n}}},{key:"isPointOnLineSegment",value:function(t,e,r){var n=(o=y(t,2))[0],i=o[1],o=(t=(a=y(e,2))[0],a[1]),a=(e=y(r,2))[0];e=(o-i)*((r=e[1])-i)<=0;return t===a?t===n&&e:i-r==(r-o)/(a-t)*(n-a)&&e}},{key:"rayIntersectLineSegment",value:function(t,e,r){var n=(o=y(t,2))[0],i=o[1],o=(t=y(e,2))[0];e=t[1],r=(t=y(r,2))[0],t=t[1];return o!==r&&(0<=(o=(n-o)/(r-o))&&o<1&&i<(t-e)*o+e)}},{key:"isPointInPolygon",value:function(e,r){var n=(e=y(e,2))[0],i=e[1];if((e=r.length)<3)return!1;var o=0,a=r[e-1];return r.forEach((function(e){t.rayIntersectLineSegment([n,i],a,e)&&(o+=1),a=e})),o%2!=0}},{key:"isPointOnLineString",value:function(e,r){var n=(e=y(e,2))[0],i=e[1],o=r.length;if(o<2)return!1;for(var a=r[o-1],s=0;s<o;s+=1){var l=r[s];if(t.isPointOnLineSegment([n,i],a,l))return!0;a=r[s]}return!1}},{key:"getAreaOfPolygon",value:function(t){var e=t.length;if(e<3)return null;var r=0,n=t[e-1];return t.forEach((function(t){var e,i,o,a;r+=.5*(i=t,a=(o=y(n,2))[0],e=o[1],i=(o=y(i,2))[0],a*o[1]-e*i),n=t})),r}},{key:"getDistanceBetweenPoints",value:function(t,e){t=(r=y(t,2))[0];var r=r[1];t-=(e=y(e,2))[0],e=r-e[1];return Math.sqrt(t*t+e*e)}}]),t}(),$t=function(){function t(){n(this,t)}return o(t,null,[{key:"get",value:function(t,e){return fetch(t,1<arguments.length&&void 0!==e?e:{method:"GET"}).then((function(e){return e.ok?e.json():Promise.reject(new Error("Call failed for ".concat(t," : ").concat(e.status," ").concat(e.statusText)))}))}}]),t}(),te=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length&&void 0!==arguments[1]&&arguments[1];n(this,t),e&&Object.assign(this,e),this.splitIconGeomBasisGeomType_=r,this.splitIconGeomBasisGeomType_&&this.splitMultiGeom()}return o(t,[{key:"flattenIconShape",value:function(t){var e,r=this,n=0<arguments.length&&void 0!==t&&t;this.isFlattened||(e=[],(t=this.g)&&t.forEach((function(t){var n,i=[];t.shp&&t.shp.forEach((function(t){var e,o=y(t,7),a=o[0],s=o[1],l=o[2],u=o[3],c=o[4],h=o[5],f=o[6];switch(a){case 0:case 1:i.push(t),n=[s,l];break;case 2:void 0===n&&console.warn("In correct shape encountered in ".concat(r.nm)),e=Zt.getFlattenedQuadraticBezierCurve(n,[s,l],[u,c]),n=[u,c];break;case 3:void 0===n&&console.warn("In correct shape encountered in ".concat(r.nm)),e=Zt.getFlattenedCubicBezierCurve(n,[s,l],[u,c],[h,f]),n=[h,f];break;case 4:i.push(t),n=void 0}e&&(e.splice(0,2),e.forEach((function(t){i.push([1].concat(v(t)))})))})),e.push(l(l({},t),{shp:i}))})),n&&(this.g_original=t),this.g=e,this.isFlattened=!0)}},{key:"splitMultiGeom",value:function(){var e=this;if(this.isIconGeomSplittedBasisGeomType)return this.isIconWithHole;this.splitIconGeomBasisGeomType_||(this.splitIconGeomBasisGeomType_=!0);var r=this.g,n=[],i=[],o=!1,a=!0,s=-1;return!!r&&(r.forEach((function(r){var u,c=[],h=[];3===r.gt?console.debug("LINEAR_AREA Feature in icon is not supported yet, ignoring for now"):(r.shp.forEach((function(t){var e=y(t,7),o=e[0],f=e[1],p=e[2],A=e[3],d=e[4],g=e[5],m=e[6],b=null;switch(o){case 0:c.push([f,p]),u=[f,p],a||1!==s&&0!==s||n.push(l(l({},r),{},{st:2},{gt:s,shp:i})),s=0,a=!(i=[]),i.push(t);break;case 1:c.push([f,p]),u=[f,p],2===s?console.debug("after closing a polygon, without move-to instruction line-to instruction is invalid",r):0!==s&&1!==s||(s=1,i.push(t));break;case 2:(b=Zt.getFlattenedQuadraticBezierCurve(u,[f,p],[A,d],15)).splice(0,2),c.push.apply(c,v(b)),u=[A,d],2===s?console.debug("after closing a polygon, without move-to instruction quad-to instruction is invalid",r):0!==s&&1!==s||(s=1,i.push(t));break;case 3:(b=Zt.getFlattenedCubicBezierCurve(u,[f,p],[A,d],[g,m],15)).splice(0,2),c.push.apply(c,v(b)),u=[g,m],2===s?console.debug("after closing a polygon, without move-to instruction cube-to instruction is invalid",r):0!==s&&1!==s||(s=1,i.push(t));break;case 4:1!==s&&console.debug("invalid geom formation"),i.push(t),s=2,a=!0,2<c.length&&h.push({shp:i,area:Zt.getAreaOfPolygon(c),points:c,children:[]}),u=void 0,c=[]}}),e),t.getLinkedParentChildPolygonArray(h).forEach((function(t){var e=[];e.push.apply(e,v(t.shp)),t.children.forEach((function(t){o=!0,e.push.apply(e,v(t.shp))})),n.push(l(l({},r),{},{st:2},{gt:2,shp:e}))})))}),this),this.g=n,this.isIconGeomSplittedBasisGeomType=!0,this.isIconWithHole=o,this.isIconWithHole)}},{key:"getIconWithOriginTranslatedToIconCenter",value:function(){var e=new t(this,this.splitIconGeomBasisGeomType_),r=Number.parseInt(e.w,10)/2*1,n=Number.parseInt(e.h,10)/2*1;return e.g=[],this.g&&this.g.forEach((function(t){var i=[];t.shp&&t.shp.forEach((function(t){var e=y(t,7),o=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],h=e[6];switch(o){case 0:case 1:i.push([o,a-r,s-n]);break;case 2:i.push([o,a-r,s-n,l-r,u-n]);break;case 3:i.push([o,a-r,s-n,l-r,u-n,c-r,h-n]);break;case 4:i.push(t)}})),e.g.push(l(l({},t),{shp:i}))})),e}},{key:"getTransformedIconThatFitsInLabelArea",value:function(e,r,n){var i=1<arguments.length&&void 0!==r?r:0,o=(r=!(2<arguments.length&&void 0!==n)||n,n=new t(this,this.splitIconGeomBasisGeomType_),t.getParamForTransformedIconThatFitsInLabelArea(n,e,i,r));r=o.scaleFactor;n.w=r,n.h=r;var a=[];return n.g&&n.g.forEach((function(e){var r=[];e.shp&&e.shp.forEach((function(e){var n=(c=y(e,7))[0],i=c[1],a=c[2],s=c[3],l=c[4],u=c[5],c=c[6],h=(a=y(t.getTransformedIconPointThatFitsInLabelArea([i,a],o),2))[0],f=a[1],p=(l=y(t.getTransformedIconPointThatFitsInLabelArea([s,l],o),2))[0],A=l[1],d=(c=y(t.getTransformedIconPointThatFitsInLabelArea([u,c],o),2))[0],g=c[1];switch(n){case 0:case 1:r.push([n,h,f]);break;case 2:r.push([n,h,f,p,A]);break;case 3:r.push([n,h,f,p,A,d,g]);break;case 4:r.push(e)}})),a.push(l(l({},e),{shp:r}))})),n.g=a,n}},{key:"getSVG",value:function(t){var e,r,n='<?xml version="1.0" encoding="utf-8"?>',i=this.w||50,o=this.h||50,s=this.g;if(n+='<svg viewBox="0 0 '.concat(i," ").concat(o,'" xmlns="http://www.w3.org/2000/svg" width="').concat(i,'" height="').concat(o,'">'),n+="<g>",s&&0<s.length)for(var l=0;l<s.length;l+=1){n+="<path ",s[l].gw&&(n+=' stroke-width="'.concat(s[l].gw,'"')),t?n+=' fill="'.concat(t,'"'):s[l].os&&s[l].os.m?n+=' fill="'.concat(s[l].os.m,'"'):n+=0===l?' fill="#006BB7"':' fill="#ffffff"',n+=' d="';for(var u=0;u<s[l].shp.length;u+=1)for(var c=0;c<s[l].shp[u].length;c+=1)n+=0===c?(e=s[l].shp[u][c],void 0,(a(r={},0,"M"),a(r,1,"L"),a(r,2,"Q"),a(r,3,"C"),a(r,4,"Z"),r)[e]):s[l].shp[u][c],0===c||c+1===s[l].shp[u][c].length?n+="":n+=" ";n+='" ></path>'}return(n+="</g>")+"</svg>"}}],[{key:"getParamForTransformedIconThatFitsInLabelArea",value:function(t,e,r,n){var i=2<arguments.length&&void 0!==r?r:0,o=!(3<arguments.length&&void 0!==n)||n,a=(l=y(e,5))[0],s=l[1],l=(r=l[2],n=l[3],e=l[4],(o?0:e)+i);e=(o=y(Zt.getDeltaLonLatForMeterAtGivenLonLat(a,s),2))[0],i=o[1];return{labelCenterX:a,labelCenterY:s,iconWidth:t=(o=[Number.parseInt(t.w,10),Number.parseInt(t.h,10)])[0],iconHeight:o=o[1],deltaLonPerMeter:e,deltaLatPerMeter:i,scaleFactor:Zt.getScaleFactorForRectInSpace(r,n,t,o),effectiveRotation:l}}},{key:"getTransformedIconPointThatFitsInLabelArea",value:function(t,e){var r=(u=y(t,2))[0],n=u[1];if(void 0===r||void 0===n||null===r||null===n)return[];var i=e.labelCenterX,o=e.labelCenterY,a=e.iconWidth,s=e.iconHeight,l=e.deltaLonPerMeter,u=(t=e.deltaLatPerMeter,e.scaleFactor);e=e.effectiveRotation;return r-=+a/2,n-=+s/2,n*=-1,l=r*=u*l,t=n*=u*t,r=l*Math.cos(e)+t*Math.sin(e),n=t*Math.cos(e)-l*Math.sin(e),[r+=i,n+=o]}},{key:"getWebGLSuitableCoordinatesOfIconSubGeom",value:function(t){var e,r=t.st,n=t.gt,i=t.shp,o=[];if(2!==r||!i||!n)return o;switch(n){case 2:i.forEach((function(t){var r=y(t,3),n=(t=r[0],r[1]),i=r[2];switch(t){case 0:(e=[]).push([n,i]);break;case 1:e.push([n,i]);break;case 4:o.push(e)}}));break;case 1:i.forEach((function(t){t=(e=y(t,3))[1];var e=e[2];o.push([t,e])}));break;default:console.debug(" TODO: other cases not yet supported")}return o}},{key:"getLinkedParentChildPolygonArray",value:function(t){var e=[];t.sort((function(t,e){return Math.abs(e.area)-Math.abs(t.area)}));for(var r=0;r<t.length;r+=1){for(var n=null,i=t[r],o=i.points[0],a=r-1;0<=a;--a){var s=t[a];if(i.area*s.area<0&&(Zt.isPointInPolygon(o,s.points)||Zt.isPointOnLineString(o,s.points))){n=s;break}}(n?n.children:e).push(i)}return e}}]),t}(),ee=Object.freeze({TEXT:"",ICON:"icon:",IMAGE:"icon:"}),re=Object.freeze({VALUE:"<value>",SHORT:"<short>",LONG:"<long>",FULL:"<full>"}),ne=Object.freeze({NONE:0,TEXT:1,ICON:2,IMAGE:3}),ie=Yt.EVENT_NAME,oe=["resetBaseMetaFileRules_","updateOverridableComponents"],ae=function(){function t(e,r,i){if(n(this,t),!e)throw new Error("one should not instantiate object of this class without apt payload");var o=function(t){var e=[];return oe.forEach((function(r){t[r]||e.push(r)})),0<e.length?e:null}(this);if(o)throw new Error("function definition missing in the implementation ".concat(o.join()));this.metaFileIdentifier=r,this.metaInformation_=i,this.basedata_=l({},e),this.baseOverrides_=[],this.customOverrides_=[],this.resetBaseMetaFileRules_()}return o(t,[{key:"applyOverride",value:function(t,e,r){var n=!(1<arguments.length&&void 0!==e)||e;e=2<arguments.length&&void 0!==r&&r;t&&(e||(n?this.customOverrides_:this.baseOverrides_).push(t),this.updateOverridableComponents(t),r=this.getMetaInformation(),!e&&r&&r.config.emitEventOnOverrideUpdate&&(t={applyOverride:!0,metaFileIdentifier:this.metaFileIdentifier,isCustomOverride:n,metaInformation:r,overrideJson:t},Yt.emit(ie.META_DATA_MODEL_UPDATED,t)))}},{key:"undoOverride",value:function(){var t,e,r=this;0!==this.customOverrides_.length&&(e=this.customOverrides_.pop(),this.resetBaseMetaFileRules_(),this.baseOverrides_.forEach((function(t){return r.applyOverride(t,!1,!0)})),this.customOverrides_.forEach((function(t){return r.applyOverride(t,!0,!0)})),(t=this.getMetaInformation())&&t.config.emitEventOnOverrideUpdate&&(e={metaFileIdentifier:this.metaFileIdentifier,undoOverride:!0,metaInformation:t,overrideJson:e},Yt.emit(ie.META_DATA_MODEL_UPDATED,e)))}},{key:"getMetaInformation",value:function(){return this.metaInformation_}},{key:"basedata_",get:function(){return this.basedata__},set:function(t){this.basedata__||(this.basedata__=t)}}]),t}(),se=xt.PRESETS,le=function(){u(e,ae);var t=d(e);function e(r,i){return n(this,e),t.call(this,r,se,i)}return o(e,[{key:"resetBaseMetaFileRules_",value:function(){this.property_trees=null,this.named_groups=null,this.named_keys=null,this.updateOverridableComponents(this.basedata_)}},{key:"updateOverridableComponents",value:function(t){this.property_trees=t.property_trees,this.named_groups=t.named_groups,this.named_keys=t.named_keys}},{key:"getPropertyTree",value:function(t){var e,r=this,n=(t=this.property_trees[t],[]);return t.forEach((function(t){switch(t.input){case"named_group":e=r.getNamedGroup(r.getKeyKey(t)),n=[].concat(v(n),v(e));break;case"named_key":var i;(e=r.getKeyName(t))?((i=r.getNamedKey(e)).k=r.getKeyKey(t),i.name=e,n.push(i)):n.push(r.getNamedKey(r.getKeyKey(t)));break;default:n.push(t)}}),this),n}},{key:"getNamedGroup",value:function(t){return this.named_groups[t]}},{key:"getNamedKey",value:function(t){return this.named_keys[t]}}],[{key:"getMetaFileIdentifier",value:function(){return se}}]),e}(),ue=xt.SDK_STRINGS,ce=function(){u(e,ae);var t=d(e);function e(r,i){return n(this,e),t.call(this,r,ue,i)}return o(e,[{key:"resetBaseMetaFileRules_",value:function(){this.stringsTable={},this.updateOverridableComponents(this.basedata_)}},{key:"updateOverridableComponents",value:function(t){t&&this.updateTranslationsStringMap(t.translations)}},{key:"updateTranslationsStringMap",value:function(t){var e=this;t&&Object.keys(t).forEach((function(r){e.addToStringsTable(r,t[r])}),this)}},{key:"addToStringsTable",value:function(t,e){this.stringsTable[t]=e}},{key:"translate",value:function(t,e){var r,n,i=e;return!this.stringsTable||(r=this.stringsTable[t])&&(i=r.en||r.en||(0<(n=Object.keys(r)).length?r[n.pop()]:(console.warn("report error - empty translations map found for key ".concat(t)),e))),i}}],[{key:"getMetaFileIdentifier",value:function(){return ue}}]),e}(),he=xt.THEME,fe=function(){u(e,ae);var t=d(e);function e(r,i){return n(this,e),t.call(this,r,he,i)}return o(e,[{key:"resetBaseMetaFileRules_",value:function(){var t=this.basedata_;this.ft=t.ft,this.name=t.nm,this.iurl=t.iurl,this.styleMap={},this.iconInfoMap={},this.labelStyleMap={},this.markerMap={},this.updateOverridableComponents(t)}},{key:"updateOverridableComponents",value:function(t){t&&(this.updateStyleMap(t.s),this.updateIconInfoMap(t.i,t.iurl),this.updateLabelStyleMap(t.l),this.updateMarkerMap(t.m))}},{key:"updateStyleMap",value:function(t){this.styleMap=l(l({},this.styleMap),t)}},{key:"updateIconInfoMap",value:function(t,e){var r=this;t&&Object.keys(t).forEach((function(n){var i=t[n],o=e||r.iurl;o&&i.rurl&&(i.url=o+i.rurl),r.iconInfoMap[n]=i}),this)}},{key:"updateLabelStyleMap",value:function(t){this.labelStyleMap=l(l({},this.labelStyleMap),t)}},{key:"updateMarkerMap",value:function(t){this.markerMap=l(l({},this.markerMap),t)}},{key:"getStyleMap",value:function(){return this.styleMap}},{key:"getGeometryStyle",value:function(t){return this.styleMap?this.styleMap[t]:null}},{key:"getGeometryDefaultStyle",value:function(){return this.styleMap?this.styleMap.Object:null}},{key:"getLabelStyle",value:function(t){return this.labelStyleMap?this.labelStyleMap[t]:null}},{key:"getLabelDefaultStyle",value:function(){return this.labelStyleMap?this.labelStyleMap.default:null}},{key:"getMarker",value:function(t){return this.markerMap&&t?this.markerMap[t]:null}},{key:"getIconInfo",value:function(t){return this.iconInfoMap&&t?this.iconInfoMap[t]:null}}],[{key:"getMetaFileIdentifier",value:function(){return he}}]),e}(),pe=function(){function t(){n(this,t)}return o(t,null,[{key:"createShortAddress",value:function(t){return t&&Array.isArray(t)?t[1]:null}},{key:"createLongAddress",value:function(t){return t&&Array.isArray(t)?t[0]+" "+t[1]:null}},{key:"createFullAddress",value:function(t){return t&&Array.isArray(t)?(3===t.length?t[2]+" ":"")+(t[0]+" ")+t[1]:null}}]),t}(),Ae=xt.THEME_MAP,de=function(){u(e,ae);var t=d(e);function e(r,i){return n(this,e),t.call(this,r,Ae,i)}return o(e,[{key:"resetBaseMetaFileRules_",value:function(){var t=this.basedata_;this.ft=t.ft,this.styleTreeList=[],this.labelTreeList=[],this.updateOverridableComponents(t)}},{key:"updateOverridableComponents",value:function(t){this.updateLabelTreeList(t.label),this.updateStyleTreeList(t.style)}},{key:"updateLabelTreeList",value:function(t){t&&Wt(this.labelTreeList,t)}},{key:"updateStyleTreeList",value:function(t){t&&Wt(this.styleTreeList,t)}}],[{key:"getMetaFileIdentifier",value:function(){return Ae}},{key:"extractThemeMapPayload",value:function(t){return{labelType:t.lt,labelRef:t.r,styleName:t.n}}},{key:"getGeomStyleLookupTag",value:function(t,e){return(t=t?t.styleName:null)===re.VALUE?e:t}},{key:"getLabelRefConstructed",value:function(t,e,r){var n=t;switch(t){case re.VALUE:n=r;break;case re.SHORT:n=pe.createShortAddress(e);break;case re.LONG:n=pe.createLongAddress(e);break;case re.FULL:n=pe.createFullAddress(e)}return n}},{key:"getLabelInfoConstructed",value:function(t,e,r,n){var i={lt:t,entry:r};switch(t){case ne.NONE:break;case ne.TEXT:r.trans?i.ar=e:i.r=e;break;case ne.ICON:i.iconIdentifier=e,n?i=l(l({},n),i):i.error=!0;break;case ne.IMAGE:i.url=e;break;default:i=null}return i}}]),e}(),ge=xt.THEME,ye=xt.THEME_MAP,ve=xt.PRESETS,me=xt.SDK_STRINGS,be=function(){function t(){n(this,t),this.config=Object.seal({emitEventOnOverrideUpdate:!0}),this.iconCache={},this.imageCache={},this.releaseSettings_={}}return o(t,[{key:"instantiateMetaFileAccessor_",value:function(t){for(var e=arguments.length,r=new Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];switch(t){case ge:this[ge]=p(fe,r.concat([this]));break;case ye:this[ye]=p(de,r.concat([this]));break;case ve:this[ve]=p(le,r.concat([this]));break;case me:this[me]=p(ce,r.concat([this]));break;default:return console.warn("The requested meta file identifier is not yet implemented - ".concat(t)),null}return this[t]}},{key:"applyOverride",value:function(t,e){this[t]&&this[t].applyOverride(e)}},{key:"undoOverride",value:function(t){this[t]&&this[t].undoOverride()}},{key:"getTheme",value:function(){return this[ge]||{}}},{key:"getThemeMap",value:function(){return this[ye]||{}}},{key:"getPresets",value:function(){return this[ve]||{}}},{key:"getStrings",value:function(){return this[me]||{}}},{key:"getIcon",value:function(t){return t&&t.iconIdentifier?this.iconCache[t.iconIdentifier]:null}},{key:"getImage",value:function(t){return this.imageCache[t]}},{key:"extractGeomStyle",value:function(t){var e=t.valueEntry;t=t.value,e=de.extractThemeMapPayload(e),t=de.getGeomStyleLookupTag(e,t);return this.getTheme()?this.getTheme().getGeometryStyle(t):null}},{key:"getStyle",value:function(t,e){var r=this,n=1<arguments.length&&void 0!==e&&e,i=this.getThemeMap().styleTreeList,o=this.processValueEntry_.bind(this);if(null===i||0===i.length||!this.getTheme())return null;e=this.getTheme().getGeometryDefaultStyle();var a=this.extractGeomStyle.bind(this),s=t.getAddress(),l=t.getEntities(),u=null,c=null,h={};return l&&0<l.length?i.find((function(e){return c=l.find((function(r){return u=o({geometry:t,entity:r,address:s,valueEntry:e,value:void 0,returnValueFunction:a,valueEntryIdentified:h})}),r)}),this):i.find((function(e){return u=o({geometry:t,entity:c,address:s,valueEntry:e,value:void 0,returnValueFunction:a,valueEntryIdentified:h})}),this),u||n||(u=e),u?JSON.parse(JSON.stringify(u)):void 0}},{key:"getLabelValue",value:function(t){var e=t.address,r=t.valueEntry,n=t.value,i=(t=(i=de.extractThemeMapPayload(r)).labelType,i.labelRef);e=de.getLabelRefConstructed(i,e,n),n=t===ne.ICON?this.getTheme().getIconInfo(e):null;return(n=de.getLabelInfoConstructed(t,e,r,n))?JSON.parse(JSON.stringify(n)):void 0}},{key:"convertLabelToText",value:function(t){if(t){var e,r=t.r,n=t.ar;t=t.lt;if(r)return r;if(n){switch(t){case ne.TEXT:e=ee.TEXT+n;break;case ne.ICON:e=ee.ICON+n;break;case ne.IMAGE:e=ee.IMAGE+n;break;default:return null}return this.getStrings().translate(e,n)}}return null}},{key:"getLabelStyle",value:function(t,e){var r,n=1<arguments.length&&void 0!==e&&e,i=this.getTheme(),o=i.getLabelDefaultStyle(),a={};return t&&(r=t.t,e=t.zmin,t=t.l,r&&(a.t=r),e&&(a.zmin=e),(t=i.getLabelStyle(t))&&(a=l(l({},a),t))),a||n||(a=o),a}},{key:"getLabelConstantsSet_",value:function(){var t=this.getThemeMap().labelTreeList,e=this.processValueEntry_.bind(this);return null==t||0===t.length?{isInsufficientInput:!0}:{labelTreeList:t,returnValueFunction:this.getLabelValue.bind(this),processValueEntry:e}}},{key:"getGeometryLabelInfo",value:function(t){var e=this,r=this.getLabelConstantsSet_(),n=r.isInsufficientInput,i=r.labelTreeList,o=r.returnValueFunction,a=r.processValueEntry;if(n)return null;var s=t.getAddress(),l=null;return i.find((function(r){return(l=a({geometry:t,address:s,valueEntry:r,returnValueFunction:o}))&&(l.r=e.convertLabelToText(l)),l})),l?JSON.parse(JSON.stringify(l)):void 0}},{key:"getEntityLabelInfo",value:function(t){var e=this.getLabelConstantsSet_(),r=e.isInsufficientInput,n=e.labelTreeList,i=e.returnValueFunction,o=e.processValueEntry;if(r)return null;var a=null;return n.find((function(e){return a=o({entity:t,valueEntry:e,returnValueFunction:i})})),a?JSON.parse(JSON.stringify(a)):void 0}},{key:"getLabelInfo",value:function(t){var e=this,r=this.getLabelConstantsSet_(),n=r.isInsufficientInput,i=r.labelTreeList,o=r.returnValueFunction,a=r.processValueEntry;if(n)return null;var s,l,u=t.getAddress(),c=t.getEntities(),h=null;return c&&1<c.length?(s=null,i.find((function(r){var n,i=null,l=!1;return c.forEach((function(t){n=a({entity:t,valueEntry:r,returnValueFunction:o}),(i=e.convertLabelToText(n))&&0<i.length&&(s?s+=", "+i:(s=i,l=!0))}),e),l||(n=a({geometry:t,address:u,valueEntry:r,returnValueFunction:o}),(i=e.convertLabelToText(n))&&0<i.length&&(s?s+=", "+i:s=i,l=!0)),l&&(h={lt:e.TEXT_LABEL_TYPE,r:s}),l}),this)):(l=c?c[0]:null,i.find((function(r){return(h=a({geometry:t,entity:l,address:u,valueEntry:r,returnValueFunction:o}))&&(h.r=e.convertLabelToText(h)),h}),this)),h?JSON.parse(JSON.stringify(h)):void 0}},{key:"processValueEntry_",value:function(t){var e=this,r=t.geometry,n=t.entity,i=t.address,o=t.valueEntry,a=t.value,s=t.returnValueFunction,l=null;return void 0!==(t=o.ks)&&t.find((function(t){var o;if(t.gk&&r?(a=t.gk,o=r.properties[a]):t.ek&&n?(a=t.ek,o=n.properties[a]):t.ak&&i&&(a=t.ak)===i[0]&&(o=y(i,2)[1]),void 0!==o){if(t.v){var a=t.v[o];if(void 0!==a&&void 0!==(l=e.processValueEntry_({geometry:r,entity:n,address:i,valueEntry:a,value:o,returnValueFunction:s})))return!0}if(void 0!==(l=s({geometry:r,entity:n,address:i,valueEntry:t,value:o})))return!0}return!1}),this)?l:s?s({geometry:r,entity:n,address:i,valueEntry:o,value:a}):l}},{key:"setIcon",value:function(t,e){t&&e&&(this.iconCache[t]=e)}},{key:"setReleaseSettings_",value:function(t){this.releaseSettings_=t}}]),t}(),_e=(Oe={NODES_LB:"mfs.micello.com",US_1:"mfs-us-1.micello.com",US_2:"mfs-us-2.micello.com",AU_1:"mfs-au-1.micello.com",AU_2:"mfs-au-2.micello.com",EU_1:"mfs-eu-1.micello.com",SG_1:"mfs-sg-1.micello.com",HUB:"mfs-hub-master.micello.com",PREVIEW:"preview.micello.com/mfs",FACTORY:"factory-mfs.micello.com",CIT:"integration.mfs.hub.venues.ext.here.com",STG:"alpha.mfs.hub.venues.ext.here.com"}).HUB,we=Object.freeze({MFILE:"MFILE",MVAR:"MVAR",MPATH:"MPATH",MKEY:"MKEY",MPATTERN:"MPATTERN",MPACKAGE:"MPACKAGE"}),xe=(Object.freeze((a(xe={},we.MFILE,"/mfile"),a(xe,we.MVAR,"/mvar"),a(xe,we.MPATH,"/mpath"),a(xe,we.MKEY,"/mkey"),a(xe,we.MPATTERN,"/mpattern"),a(xe,we.MPACKAGE,"/mpackage"),xe)),Object.freeze(Object.values(Oe).reduce((function(t,e){return l(l({},t),{},a({},e,{key:null}))}),{}))),Ee=Object.freeze({apiKey:null,dataApiType:"MFS",fileHost:_e,queryParamMap:xe}),Be=St.GEO_JSON,Ce=(Oe=kt[Be]).COMMUNITY_MAP,Se=Oe.COMMUNITY_ENTITY,ke=Oe.GEOJSON_LEVEL_GEOMETRY,Te=function(){function t(e){n(this,t),this.baseApi=e}return o(t,[{key:"getBaseAPI",value:function(){return this.baseApi}},{key:"getCommunityMap",value:function(t,e,r){return this.baseApi.fetch(this.baseApi.getMapProductFileUrl(t,Be,Ce,null,e,r))}},{key:"getCommunityEntity",value:function(t,e,r){return this.baseApi.fetch(this.baseApi.getMapProductFileUrl(t,Be,Se,null,e,r))}},{key:"getGeoJsonLevelGeometry",value:function(t,e,r,n){return e="/".concat(e),this.baseApi.fetch(this.baseApi.getMapProductFileUrl(t,Be,ke,e,r,n))}}]),t}(),Ne=Object.freeze({MAP:"MAP",META:"META",CUSTOMER:"CUSTOMER"}),Le=Object.freeze((a(xe={},Ne.MAP,"/map"),a(xe,Ne.META,"/meta"),a(xe,Ne.CUSTOMER,"/customer"),xe)),Ie=Object.freeze({METACONFIG:"METACONFIG",OVERRIDES:"OVERRIDES",DATAHOSTS:"DATAHOSTS"}),Me=Object.freeze((a(kt={},Ie.METACONFIG,"/metaConfig"),a(kt,Ie.OVERRIDES,"/overrides"),a(kt,Ie.DATAHOSTS,"/map/dataHosts"),kt)),Oe=Object.freeze({V4:"V4",V5:"V5"}),Pe=(Object.freeze((a(xe={},Oe.V4,"/v4"),a(xe,Oe.V5,"/v5"),xe)),Object.freeze((a(kt={},xt.THEME,"/theme/v5"),a(kt,xt.THEME_MAP,"/thememap/v5"),a(kt,xt.PRESETS,"/presets/v5"),a(kt,xt.SDK_STRINGS,"/strings/v5"),a(kt,xt.ICON_FILE,"/iconfile/v5"),a(kt,xt.INPUT_COLORS,"/miceditor/inputcolors"),a(kt,xt.BASE_MAP_INFO,"/miceditor/basemapinfo"),a(kt,xt.CONFIG_PROFILE,"/miceditor/configprofile"),a(kt,xt.NAV_THEME,"/navtheme/v5"),a(kt,xt.NAV_NAME_THEME,"/navtheme/v5"),a(kt,xt.NAV_PROP_MAP,"/navpropmap/v5"),a(kt,xt.NAV_STRINGS,"/strings/v5/nav"),a(kt,xt.NAV_THEME_MAP,"/navthememap/v5"),a(kt,xt.NAV_NAME_THEME_MAP,"/navthememap/v5"),a(kt,xt.V4_THEME_FAMILY,"/theme/v4"),a(kt,xt.V4_MAPTYPE_THEME,"/theme/v4"),a(kt,xt.ICON,"/theme/icon/v5"),a(kt,xt.MARKER,"/theme/marker"),a(kt,xt.PERMISSIONS,"/auth/stringroles"),a(kt,xt.NAICS_ARRAY,"/naics/2012/array"),a(kt,xt.NAICS_MAP,"/naics/2012/map"),kt))),Fe=Object.freeze((a(Oe={},St.GEO_JSON,"/geojson"),a(Oe,St.V5_MAP,"/v5_map"),a(Oe,St.V5_NAV,"/v5_nav"),a(Oe,St.V5_INFO,"/v5_info"),a(Oe,St.KML,"/kml"),a(Oe,St.SVG,"/svg"),a(Oe,St.PNG,"/png"),Oe)),Ue=Object.freeze((a(xe={},St.V5_MAP,{COMMUNITY_MAP:"/com-map",COMMUNITY_DIRECTORY:"/com-dir",COMMUNITY_DETAIL:"/com-detail",LEVEL_GEOMETRY:"/level-geom",DRAWING_ENTITY:"/drawing-entity"}),a(xe,St.GEO_JSON,{COMMUNITY_MAP:"/com-map",COMMUNITY_ENTITY:"/com-entity",PATH_LEVEL_GEOMETRY:"/path-level-geom",GEOJSON_LEVEL_GEOMETRY:"/geojson-level-geom"}),a(xe,St.V5_NAV,{JSON_NAV:"/json",BINARY_NAV:"/bin",JSON_ENHANCED_NAV:"/json-enh",BINARY_ENHANCED_NAV:"/bin-enh"}),a(xe,St.V5_NAV,{JSON_NAV:"/json",BINARY_NAV:"/bin",JSON_ENHANCED_NAV:"/json-enh",BINARY_ENHANCED_NAV:"/bin-enh"}),a(xe,St.V5_INFO,{GEOMETRY_INFO:"/geom-info"}),a(xe,St.SVG,{PLAIN:"/plain",PRETTY:"/pretty",PRETTY_HORIZONTAL_LABEL:"/pretty"}),a(xe,St.KML,{RASTER:"/raster",RASTER_HORIZONTAL:"/raster",VECTOR:"/vector",VECTOR_HORIZONTAL:"/vector"}),a(xe,St.PNG,{LOW_RESOLUTION:"/lo-res",HIGH_RESOLUTION:"/high-res",LOW_RESOLUTION_GEO:"/lo-res-geo",HIGH_RESOLUTION_GEO:"/high-res-geo",LOW_RESOLUTION_HORIZONTAL:"/lo-res",HIGH_RESOLUTION_HORIZONTAL:"/high-res",LOW_RESOLUTION_HORIZONTAL_GEO:"/lo-res-geo",HIGH_RESOLUTION_HORIZONTAL_GEO:"/high-res-geo"}),xe)),Re=Object.freeze({venueId:null,language:"-",mapVersion:"-",entityVersion:"-",fileVersion:null,themeName:Ct[xt.THEME]}),De=Object.freeze({MFILE:"MFILE",MPATH:"MPATH",MVAR:"MVAR"}),je=Object.freeze((a(kt={},De.MFILE,"/mfile"),a(kt,De.MPATH,"/mpath"),a(kt,De.MVAR,"/mvar"),kt)),He=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};n(this,t),this.productAPI={},this.hostConfig_=e,this.isHostCustom=!1}return o(t,[{key:"getBaseUrl",value:function(t){return t=!(0<arguments.length&&void 0!==t)||t,(t="".concat(this.hostConfig_.fileHost).concat(t?"/ms/v1":"")).startsWith("https://")||t.startsWith("http://")||(t="https://".concat(t)),t}},{key:"getFileServiceBaseUrl",value:function(t){if(t=0<arguments.length&&void 0!==t?t:De.MFILE,De[t])return"".concat(this.getBaseUrl()).concat(je[t]);console.warn("requested unrecognized file service base url - ".concat(t))}},{key:"getGlobalMetaBaseUrl",value:function(t){var e=Le[Ne.META];t=this.getFileServiceBaseUrl(t);return"".concat(t).concat(e)}},{key:"getVenueMapBaseUrl",value:function(t){var e=this.getFileServiceBaseUrl(t);t=Le[Ne.MAP];return"".concat(e).concat(t)}},{key:"getGlobalMetaFileUrl",value:function(t,e,r,n){var i=1<arguments.length&&void 0!==e?e:Ct[t],o=2<arguments.length?r:void 0,a=(n=3<arguments.length?n:void 0,this.getGlobalMetaBaseUrl(n)),s=Pe[t],l=null===i||""===i?"":"/".concat(i);switch(t){case xt.THEME:case xt.THEME_MAP:case xt.PRESETS:case xt.SDK_STRINGS:case xt.ICON_FILE:case xt.INPUT_COLORS:case xt.BASE_MAP_INFO:case xt.CONFIG_PROFILE:case xt.NAV_THEME:case xt.NAV_NAME_THEME:case xt.NAV_PROP_MAP:case xt.NAV_STRINGS:case xt.NAV_THEME_MAP:case xt.NAV_NAME_THEME_MAP:case xt.V4_THEME_FAMILY:a+="".concat(s).concat(l);break;case xt.ICON:case xt.MARKER:case xt.V4_MAPTYPE_THEME:a+=0<l.length&&o&&0<o.length?"".concat(s).concat(l,"/").concat(o):"".concat(s);break;case xt.PERMISSIONS:case xt.NAICS_ARRAY:case xt.NAICS_MAP:a+="".concat(s);break;default:console.warn("unrecognized metaFileIdentifier requested",{metaFileIdentifier:t,type:i,subType:o})}return a}},{key:"getGeoJsonApi",value:function(){return this.productAPI[St.GEO_JSON]||(this.productAPI[St.GEO_JSON]=new Te(this)),this.productAPI[St.GEO_JSON]}},{key:"getMapProductUrlPath",value:function(t,e,r,n){return e=!(1<arguments.length&&void 0!==e)||e,r=2<arguments.length?r:void 0,n=3<arguments.length?n:void 0,n=this.getVersionedVenueUrl(t,e,n),r&&(n+="".concat(Fe[r])),n}},{key:"getMapProductFileUrl",value:function(t,e,r,n,i,o){var a=Ue[St[e]][r];i=this.getMapProductUrlPath(t,!0,e,i);return r&&(i+="".concat(a)),n&&(i+="".concat(n)),!o&&0!==o||(i+="/fv/".concat(o)),i}},{key:"getMetaConfigUrl",value:function(t,e){var r=Me[Ie.METACONFIG];return(e=this.getVersionedVenueUrl(t,!0,e))+"".concat(r)}},{key:"getMetaFileUrl",value:function(t,e,n){var i;if(n=2<arguments.length&&void 0!==n?n:Ct[e],t)return"object"===r(t[e=Et[e]])&&t[e][n]?i=new URL(t[e][n]):"string"==typeof t[e]&&(i=new URL(t[e])),i?this.isHostCustom?"".concat(this.getBaseUrl(!1)).concat(i.pathname):i.toString():null}},{key:"getMetaOverrideFileUrls",value:function(t,e,r,n){return n=3<arguments.length&&void 0!==n?n:Ct[r],e&&e.communityOverrides&&e.communityOverrides[t]?(r=Bt[r],r=e.communityOverrides[t][r]||{},Array.isArray(r)?r:r[n]||[]):[]}},{key:"getVersionedVenueUrl",value:function(e,r,n){return n=2<arguments.length?n:void 0,(n=1<arguments.length&&void 0!==r&&!r?"":this.getFileServiceBaseUrl(n))+t.getVersionedVenuePathSegment(e)}},{key:"getNormalizedUrl",value:function(t){if(this.isHostCustom){var e=new URL(t);return"".concat(this.getBaseUrl(!1)).concat(e.pathname)}return t}},{key:"getMetaConfig",value:function(t){var e=this;if(!t)return null;var n={venueId:t.cid};Object.values(Et).forEach((function(e){t[e]?"string"==typeof t[e]?n[e]=t[e]:(n[e]={},Object.keys(t[e]).forEach((function(r){n[e][r]=t[e][r]}))):console.warn("This key-'".concat(e,"' is not part of metaconfigJson"))}));var i={},o=t.communityOverrides[n.venueId];return Object.keys(o).forEach((function(t){var n;Array.isArray(o[t])?i[t]=o[t].map((function(t){return"".concat(e.getFileServiceBaseUrl()).concat(t)})):"object"===r(o[t])?(n={},Object.keys(o[t]).forEach((function(r){Array.isArray(o[t][r])?n[r]=o[t][r].map((function(t){return"".concat(e.getFileServiceBaseUrl()).concat(t)})):console.warn("un-recognized json structure of metaconfig json")})),i[t]=n):console.warn("un-recognized json structure of metaconfig json")})),n.communityOverrides=a({},n.venueId,i),l(l({},t),n)}}],[{key:"getVersionedVenuePathSegment",value:function(t,e,r){var n=1<arguments.length&&void 0!==e?e:"-";e=2<arguments.length&&void 0!==r?r:"-",r=Le[Ne.MAP];return"".concat(r,"/").concat(t,"/mv/").concat(n,"/ev/").concat(e)}},{key:"getVenueConfig",value:function(t){return(t=l(l({},Re),t)).mapVersion=Number(t.mapVersion)||"-",t.entityVersion=Number(t.entityVersion)||"-",t.fileVersion=Number(t.fileVersion)||null,t.venueId=Number(t.venueId),t}}]),t}(),Qe=function(){u(e,He);var t=d(e);function e(r){var i;return n(this,e),(i=t.call(this,r)).setAndUpdateHostConfig_(r),r.fileHost&&(i.isHostCustom=!0),i}return o(e,[{key:"setAndUpdateHostConfig_",value:function(t){var e=t.apiKey,r=(t=t.fileHost,{});Object.keys(Ee.queryParamMap).forEach((function(t){r[t]={key:e}})),t&&(r[t]={key:e}),this.hostConfig_={apiKey:e,dataApiType:"MFS",fileHost:t||_e,queryParamMap:l(l({},r),Ee.QUERY_PARAM_MAP_DEFAULT)}}},{key:"addServer",value:function(t,e){t=-1<t.indexOf("://")?t.split("://")[1]:t;var r=this.hostConfig_.queryParamMap[t]?l(l({},this.hostConfig_.queryParamMap[t]),e):e;Object.keys(r).forEach((function(t){null!==r[t]&&void 0!==r[t]&&""!==r[t]||delete r[t]})),this.hostConfig_.queryParamMap[t]=r}},{key:"appendQueryParams",value:function(t){var r=this.hostConfig_.queryParamMap,n=-1<t.indexOf("://")?t.split("://")[1]:t;r=r[y(Object.keys(r).filter((function(t){return n.startsWith(t)})).sort((function(t,e){return e.length-t.length})),1)[0]];return e.appendParamList(t,r)}},{key:"fetch",value:function(t,e,r,n){return n=3<arguments.length&&void 0!==n&&n,t.startsWith("http://")&&(t=t.replace(/http:\/\//gm,"https://")),n||(t=this.appendQueryParams(t)),$t.get(t,e,r)}},{key:"getMapProductFileUrl",value:function(t,r,n,i,o,a){return g(c(e.prototype),"getMapProductFileUrl",this).call(this,t,r,n,i,o,a)}},{key:"getGlobalMetaFileUrl",value:function(t,r,n,i,o){return o=4<arguments.length&&void 0!==o?o:0,n=g(c(e.prototype),"getGlobalMetaFileUrl",this).call(this,t,r,n,i),i&&i===we.MPATH&&(n=e.appendParamList(n,{fvhistory:o})),n}}],[{key:"appendParamList",value:function(t,e){if(!e||"object"!==r(e))return t;var n=t.split("?"),i=y(n,2)[1],o=void 0===i?"":i;return Object.keys(e).filter((function(t){return-1===o.indexOf("".concat(t,"="))})).forEach((function(t){o+="&".concat(t,"=").concat(e[t])})),0<(o=o.startsWith("&")?o.substr(1):o).length?"".concat(n[0],"?").concat(o):t}}]),e}(),ze=function(){function t(){n(this,t)}return o(t,null,[{key:"isPointOnGeoJSONLineString",value:function(t,e){var r=!1;if(e&&1<e.length)for(var n,i,o=1;o<e.length;o+=1)if(n=e[o-1],i=e[o],Zt.isPointOnLineSegment(t,n,i)){r=!0;break}return r}},{key:"isPointOnGeoJSONMultiLineString",value:function(e,r){for(var n=!1,i=0;i<r.length;i+=1)if(t.isPointOnGeoJSONLineString(e,r[i])){n=!0;break}return n}},{key:"isPointInsideGeoJSONPolygon",value:function(t,e){var r=!1;if(Zt.isPointInPolygon(t,e[0])&&(r=!0),r)for(var n=1;n<e.length;n+=1)if(Zt.isPointInPolygon(t,e[n])){r=!1;break}return r}},{key:"isPointInsideGeoJSONMultiPolygon",value:function(e,r){for(var n=r.length,i=0;i<n;i+=1)if(t.isPointInsideGeoJSONPolygon(e,r[i]))return!0;return!1}},{key:"convertIntAddressToGeometryAddressListFormat",value:function(t){if(t&&"string"==typeof t){var e=[];return t.split(" ").forEach((function(t){e.push.apply(e,v(t.split(" ")))})),e}return null}},{key:"getGeometriesByLonLat",value:function(t,e,r){for(var n=2<arguments.length&&void 0!==r&&r,i=[],o=e.filter((function(e){return Zt.isPointInBoundingBox(t,e.getBoundingBox())})),a=0;a<o.length;a+=1){var s=o[a];if(s.isPointInsideGeometry(t,!0)&&(i.push(s),!n))break}return i.sort((function(t,e){return e.getZIndex()-t.getZIndex()}))}}]),t}(),Ve=function(){function t(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length?arguments[2]:void 0;n(this,t),this.venueModel=i,this.id=e,this.properties=l({geometry:[],int_address:[]},r)}return o(t,[{key:"getId",value:function(){return this.id}},{key:"getGeometries",value:function(){var t=this;return this.properties.geometry.filter((function(t){return y(t,2)[1]})).map((function(e){return e=y(e,1)[0],t.venueModel.getGeometryById(e)}))}},{key:"getInternalAddress",value:function(){return this.properties.int_address||[]}},{key:"getName",value:function(){return(Array.isArray(this.properties.name)?this.properties.name[0]:this.properties.name)||""}},{key:"getProperties",value:function(){return this.properties}},{key:"getLabelInfo",value:function(){return this.venueModel.metaInformation_.getEntityLabelInfo(this)}}]),t}(),Ge=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length?arguments[1]:void 0,i=2<arguments.length?arguments[2]:void 0;n(this,t),this.id=e.id,this.properties=e.properties||{},this.labelArea=e.label_area||[],this.geometry=e.geometry||{},this.location=e.location||{},this.level=r,this.zIndex=i,this.state_={isHighlighted:!1,highlightedStyle:{}}}return o(t,[{key:"getId",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"getAddress",value:function(){return ze.convertIntAddressToGeometryAddressListFormat(this.getInternalAddress())}},{key:"getInternalAddress",value:function(){return this.properties.int_address||""}},{key:"getCenter",value:function(){return this.location.coordinates||[]}},{key:"getCoordinates",value:function(){return this.geometry.coordinates||[]}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getStyle",value:function(){return this.getMetaInformation_().getStyle(this)}},{key:"getIcon",value:function(){return this.getMetaInformation_().getIcon(this.getLabelInfo())}},{key:"getLabelArea",value:function(){return this.labelArea||[]}},{key:"getLabelInfo",value:function(){return this.getMetaInformation_().getLabelInfo(this)}},{key:"getLabelStyle",value:function(){return l({fill:"#333333"},this.getMetaInformation_().getLabelStyle(this.getStyle()))}},{key:"getGeometryLabelInfo",value:function(){return this.getMetaInformation_().getGeometryLabelInfo(this)}},{key:"getEntities",value:function(){var t=this;return(this.properties.entities||[]).map((function(e){return t.level.getDrawing().getVenueModel().getEntityById(e)}))}},{key:"getLevel",value:function(){return this.level}},{key:"getType",value:function(){return this.geometry.type}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"getBoundingBox",value:function(){var t=this.getType(),e=this.getCoordinates(),r=[];switch(t){case gt:r=[e,e];break;case mt:case yt:r=e;break;case bt:case vt:r=e.reduce((function(t,e){return t.concat(e)}),[]);break;case _t:r=e.reduce((function(t,e){return t.concat(e)}),[]).reduce((function(t,e){return t.concat(e)}),[])}return Zt.getBoundingBoxVertices(r)}},{key:"isIcon",value:function(){var t=this.getLabelInfo();return t&&t.lt===ne.ICON}},{key:"isPointInsideGeometry",value:function(t,e){var r,n=1<arguments.length&&void 0!==e&&e,i=!1;switch(this.getType()){case gt:r=this.getLabelArea()&&Zt.getRectangularCoordinatesOfLabelArea(this.getLabelArea()),i=Zt.isPointInPolygon(t,r);break;case mt:break;case yt:i=n&&ze.isPointOnGeoJSONLineString(t,this.getCoordinates());break;case bt:i=n&&ze.isPointOnGeoJSONMultiLineString(t,this.getCoordinates());break;case vt:i=ze.isPointInsideGeoJSONPolygon(t,this.getCoordinates());break;case _t:i=ze.isPointInsideGeoJSONMultiPolygon(t,this.getCoordinates())}return i}},{key:"highlight",value:function(t,e){t=!(0<arguments.length&&void 0!==t)||t,e=1<arguments.length?e:void 0,this.state_.isHighlighted=t,this.state_.highlightedStyle=t?e:{}}},{key:"isHighlighted",value:function(){return Boolean(this.state_.isHighlighted)}},{key:"getHighlightedStyle",value:function(){return this.state_.highlightedStyle||{}}},{key:"toJSON",value:function(){return l({},this.geometry)}},{key:"getMetaInformation_",value:function(){return this.getLevel()?this.getLevel().getDrawing().getVenueModel().metaInformation_:null}}]),t}(),qe=function(){function t(e){var r=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],a=3<arguments.length?arguments[3]:void 0;n(this,t),this.id=e,this.properties=l({},i),this.zIndexCount=0,this.geometries=o.map((function(t){return r.zIndexCount+=1,new Ge(t,r,r.zIndexCount)})),this.drawing=a}return o(t,[{key:"getId",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getDrawing",value:function(){return this.drawing}},{key:"getShortName",value:function(){return this.properties["short name"]||""}},{key:"getZIndex",value:function(){return Number(this.properties.zlevel)}},{key:"getFeatureCollectionArray",value:function(){return this.getGeometries().map((function(t){return t.toJSON()}))}},{key:"getGeometryById",value:function(t){return this.geometries.find((function(e){return e.getId()===t}))}},{key:"getGeometries",value:function(t){return 0<arguments.length&&void 0!==t&&t?this.geometries.sort((function(t,e){return e.getZIndex()-t.getZIndex()})):this.geometries.sort((function(t,e){return t.getZIndex()-e.getZIndex()}))}},{key:"getGeometriesByAddress",value:function(t){return this.geometries.filter((function(e){return e.getInternalAddress()===t}))}},{key:"isMain",value:function(){return Boolean(this.properties.main)}}]),t}(),Ke=function(){function t(e){var r=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],s=4<arguments.length?arguments[4]:void 0;n(this,t),this.venueModel=s,this.levels=a.map((function(t){return new qe(t.id,t.properties,t.features,r)})),this.id=e,this.properties=i,this.frame_=o}return o(t,[{key:"getId",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"isRoot",value:function(){return Boolean(this.properties.is_root)}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getBoundingBox",value:function(){var t=(r=this.frame_).height,e=r.width,r=r.transform;t=(e=y(Zt.getBoundingBoxVertices([Zt.convertMxMy2LonLat(r,[0,0]),Zt.convertMxMy2LonLat(r,[0,t]),Zt.convertMxMy2LonLat(r,[e,0]),Zt.convertMxMy2LonLat(r,[e,t])]),2))[0];return[(e=e[1])[1],t[0],t[1],e[0]]}},{key:"getCenter",value:function(){var t=this.frame_;if(t)return Zt.convertMxMy2LonLat(t.transform,[t.width/2,t.height/2])}},{key:"getGeometryById",value:function(t,e){return e?e.getGeometryById(t):this.getGeometries().find((function(e){return e.getId()===t}))}},{key:"getGeometries",value:function(){return this.levels.flatMap((function(t){return t.getGeometries()}))}},{key:"getLevelById",value:function(t){return this.levels.find((function(e){return e.getId()===t}))}},{key:"getLevelByZIndex",value:function(t){return this.levels.find((function(e){return e.getZIndex()===t}))}},{key:"getLevels",value:function(){return this.levels}},{key:"getMainLevel",value:function(){return this.levels.find((function(t){return t.isMain()}))}},{key:"getVenueModel",value:function(){return this.venueModel}}]),t}(),Ye=wt.STANDARD,We=function(){function t(){var e=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:new be;n(this,t),this.metaInformation_=a,this.id=r.id,this.location=r.location||{},this.properties=l({},r.properties),this.drawings=(r.drawings||[]).map((function(t){var r=t.levels.map((function(t){var e=t.id;return o.find((function(t){return t.id===e}))}));return new Ke(t.id,t.properties,t.ref_frame,r,e)})),this.entities=(i.entities||[]).map((function(t){return new Ve(t.id,t.properties,e)}))}return o(t,[{key:"getDisplaySettings",value:function(){return this.metaInformation_.releaseSettings_.displayOptions.display||Ye}},{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.properties.name}},{key:"getBoundingBox",value:function(){var t,e=Zt.getBoundingBoxVertices(this.getDrawings().flatMap((function(t){var e=y(t.getBoundingBox(),4);t=e[0];return[[e[1],e[2]],[e[3],t]]})));e=(t=y(e,2))[0];return[(t=t[1])[1],e[0],e[1],t[0]]}},{key:"getCenter",value:function(){return this.location.coordinates}},{key:"getEntityById",value:function(t){return this.entities.find((function(e){return e.id===t}))}},{key:"getGeometryById",value:function(t){return this.getGeometries().find((function(e){return e.getId()===t}))}},{key:"getGeometries",value:function(){return this.getLevels().sort((function(t,e){return t.getZIndex()-e.getZIndex()})).flatMap((function(t){return t.getGeometries()}))}},{key:"getGeometriesByLonLat",value:function(t,e,r){var n=this;r=!(2<arguments.length&&void 0!==r)||r;return 0===(e=(1<arguments.length&&void 0!==e?e:[]).map((function(t){return n.getLevelById(t)}))).length&&(e=this.drawings.filter((function(e){return e=e.getBoundingBox(),Zt.isPointInBoundingBox(t,e)})).flatMap((function(t){return t.getLevels()}))),ze.getGeometriesByLonLat(t,e.flatMap((function(t){return t.getGeometries(!0)})),r)}},{key:"getDrawingById",value:function(t){return this.drawings.find((function(e){return e.getId()===t}))}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getRootDrawing",value:function(){return this.drawings.find((function(t){return t.isRoot()}))}},{key:"getLevelById",value:function(t){return this.getLevels().find((function(e){return e.getId()===t}))}},{key:"getLevelsByZIndex",value:function(t){var e=0<arguments.length&&void 0!==t?t:0;return this.getLevels().filter((function(t){return Number(t.getZIndex())===Number(e)}))}},{key:"getLevels",value:function(){return this.drawings.flatMap((function(t){return t.getLevels()}))}},{key:"getLevelMapFlattenedByZIndex_",value:function(){return this.getLevels().reduce((function(t,e){var r=e.getZIndex();return(t=t)[r]||(t[r]=[]),t[r].push(e),t}),{})}},{key:"getIconsInformation",value:function(){var t=new Map;return this.getGeometries().filter((function(t){return t.isIcon()})).forEach((function(e){e=e.getLabelInfo(),t.set(e.iconIdentifier,e)})),Array.from(t.values())}}]),t}(),Xe="vfs.venue.maps.api.here.com",Je=function(){u(e,He);var t=d(e);function e(r){var i=r.apiKey,o=r.fileHost;r=r.token;return n(this,e),r=t.call(this,{apiKey:i,fileHost:o||Xe,token:r}),o&&(r.isHostCustom=!0),r}return o(e,[{key:"fetch",value:function(t,e,r){var n=(o=this.hostConfig_).apiKey,i=o.token,o=l({method:"GET",headers:{}},e);return(e=t).startsWith("http://")&&(e=e.replace(/http:\/\//gm,"https://")),i?(t="Bearer ",i=i.startsWith(t)?i:"".concat(t).concat(i),o.headers instanceof Headers?o.headers.append("Authorization",i):o.headers.Authorization=i):n&&(e="".concat(e,"?apiKey=").concat(n)),$t.get(e,o,r)}}]),e}(),Ze={isIconsEnabled:!0,isMetaEnabled:!0,metaOptions:{},iconOptions:{}},$e=Object.keys(Et).map((function(t){return{identifier:t,name:void 0,url:void 0}})),tr=function(){function t(e){var r=e.apiKey,i=e.baseUrl,o=e.token;e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];n(this,t),o={apiKey:r,fileHost:i,token:o},this.dataApi_=new(e?Qe:Je)(o)}return o(t,[{key:"load",value:function(t,e){var r=this,n=(e=1<arguments.length&&void 0!==e?e:{},(e=l(l({},Ze),e)).isIconsEnabled),i=e.isMetaEnabled,o=e.iconOptions,a=e.metaOptions;return Promise.resolve().then((function(){return i?r.getMeta_(t,a).catch((function(t){return console.warn(t),Promise.resolve()})):new be})).then((function(e){return r.getVenue_(t,e)})).then((function(e){if(Yt.emit(Kt.VENUE_MAP_DATA_LOADED,{data:e}),n){var i=e.getIconsInformation();return r.getIcons_(t,e.metaInformation_,i,o).then((function(){return e}))}return e}))}},{key:"getVenue_",value:function(t,e){var r=this;return this.getCommunityMap_(t).then((function(e){return Promise.all([Promise.resolve(e),r.getCommunityEntity_(t),r.getLevels_(t,e.drawings.flatMap((function(t){return t.levels.map((function(t){return t.id}))})))])})).then((function(t){var r=(n=y(t,3))[0],n=(t=n[1],n[2]);return new We(r,t,void 0===n?[]:n,e)}))}},{key:"getCommunityMap_",value:function(t){return this.dataApi_.getGeoJsonApi().getCommunityMap(t).catch((function(e){return Promise.reject(new Error("Community map load failed for venue id ".concat(t,' with error "\n ').concat(e.message,'"')))}))}},{key:"getCommunityEntity_",value:function(t){return this.dataApi_.getGeoJsonApi().getCommunityEntity(t).catch((function(e){return Promise.reject(new Error("Community Entity failed for venue id ".concat(t,' with error "').concat(e.message,'"')))}))}},{key:"getLevels_",value:function(t,e){var r=this;e=1<arguments.length&&void 0!==e?e:[];return Promise.all(e.map((function(e){return r.dataApi_.getGeoJsonApi().getGeoJsonLevelGeometry(t,e).catch((function(t){return Promise.reject(new Error("Level load failed for level id ".concat(e,' with error: "').concat(t.message,'"')))}))})))}},{key:"getIcon_",value:function(t,e,r,n){var i=2<arguments.length&&void 0!==r?r:{},o=3<arguments.length&&void 0!==n&&n,a=i.iconIdentifier;n=i.url;return a&&n?this.dataApi_.fetch(this.dataApi_.getNormalizedUrl(n)).then((function(t){return t=new te(l(l({},i),t),o),e.setIcon(a,t),t})):Promise.reject(new Error("Issue with icon data, iconIdentifier and url should be available: ".concat(i)))}},{key:"getIcons_",value:function(t,e,r,n){var i=this,o=(r=2<arguments.length&&void 0!==r?r:[],(3<arguments.length&&void 0!==n?n:{}).isMultiObjectToSplit);return Promise.all(r.map((function(r){return i.getIcon_(t,e,r,o).catch((function(t){return console.warn("Icon load failed: ".concat(t.message)),Promise.resolve(r)}))}))).catch((function(t){return console.warn(t.stack),Promise.resolve()}))}},{key:"getMeta_",value:function(t,e,r){var n=this,i=1<arguments.length&&void 0!==e?e:{},o=2<arguments.length&&void 0!==r?r:$e,a=new be;return Promise.resolve().then((function(){return n.getMetaConfig_(t,i).then((function(t){return a.releaseSettings_=t.settings,n.dataApi_.getMetaConfig(t)}))})).then((function(e){return n.getMetaFiles_(e,a,o).then((function(){return n.getMetaOverrides_(t,e,a,o)}))})).then((function(){return a}))}},{key:"getMetaConfig_",value:function(t){return t=this.dataApi_.getMetaConfigUrl(t),this.dataApi_.fetch(t).catch((function(t){return console.warn("Meta config failed to load: ".concat(t)),Promise.reject(t)}))}},{key:"getMetaFiles_",value:function(t,e,r,n){var i=this,o=(r=2<arguments.length&&void 0!==r?r:[],!(3<arguments.length&&void 0!==n)||n);return Promise.all(r.map((function(r){var n=r.identifier,a=r.name;return!(r=r.url)&&o&&(r=i.dataApi_.getMetaFileUrl(t,n,a)),r=r||i.dataApi_.getGlobalMetaFileUrl(n,a),i.dataApi_.fetch(r).then((function(t){return e.instantiateMetaFileAccessor_(n,t),t})).catch((function(t){return console.warn("Meta file load failed at getMetaFiles: ".concat(t)),Promise.resolve()}))})))}},{key:"getMetaOverrides_",value:function(t,e,r,n){var i=this;n=3<arguments.length&&void 0!==n?n:[];return Promise.all(n.map((function(n){var o=n.identifier,a=n.name;n=o,a=t&&e&&i.dataApi_.getMetaOverrideFileUrls(t,e,n,a)||[];return Promise.all(a.map((function(t){return i.dataApi_.fetch(t).then((function(t){return r[o]?r[o].applyOverride(t,!1):console.warn("Meta file for identifier: ".concat(o," is not available for override")),Promise.resolve()})).catch((function(t){return console.warn("Meta override load failed: ".concat(t)),Promise.resolve()}))})))})))}}]),t}(),er="https://meta-indoor-routing.api-gateway.ls.hereapi.com",rr=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(n(this,t),!e.apiKey&&!e.token)throw new Error("API key or Token is missing");this.config_=l({baseUrl:er},e)}return o(t,[{key:"calculateRoute",value:function(t){var e=void 0===(i=t.origin)?{}:i,n=void 0===(o=t.destination)?{}:o,i=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};for(var r,n={},i=Object.keys(t),o=0;o<i.length;o++)r=i[o],0<=e.indexOf(r)||(n[r]=t[r]);return n}(t,e);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(t),o=0;o<i.length;o++)r=i[o],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,["origin","destination"]);if(!e.coordinates||!n.coordinates)throw new Error("Waypoint coordinates are missing");var o=function(t){var e=t.coordinates,r=t.venueId;t=t.levelId,e=e.join(",");return r&&t?e.concat(";indoorMapId=",r,";levelId=",t):e},a=(t=new URL("".concat(this.config_.baseUrl,"/v1/routes")),new URLSearchParams({origin:o(e),destination:o(n),apiKey:this.config_.apiKey}));return Object.entries(i).forEach((function(t){t=(e=y(t,2))[0];var e=e[1];a.append(t,"object"===r(e)?JSON.stringify(e):e)})),t.search=a,fetch(t,{headers:{"X-Api-Key":this.config_.apiKey}}).then((function(t){return t.json()}))}}]),t}(),nr=function(){u(e,H.map.Feature);var t=d(e);function e(r){var i;if(n(this,e),i=t.call(this),!(r instanceof We))throw new Error("It is mandatory to provide valid instance of venueModel");return i.venueModel=r,i.search_=new dt(r),i.status_={activeDrawingId:r.getRootDrawing().getId(),activeLevelIndex:r.getRootDrawing().getMainLevel().getZIndex()},i.mapObjectStore_=i.getDefaultMapObjectsStore_(),i.drawings=r.getDrawings().map((function(t){return(t=new w(t)).setParentEventTarget(A(i)),t})),i.levels=r.getLevels().map((function(t){var e=new x(t);return e.setParentEventTarget(i.drawings.find((function(t){return t.getId()===e.getData().getDrawing().getId()}))),e})),i.geometries=r.getGeometries().map((function(t){var e=new _(t);return e.setParentEventTarget(i.levels.find((function(t){return t.getId()===e.getData().getLevel().getId()}))),e})),i}return o(e,[{key:"getData",value:function(){return this.venueModel}},{key:"getBoundingBox",value:function(){return p(H.geo.Rect,v(this.venueModel.getBoundingBox()))}},{key:"getCenter",value:function(){var t=(e=y(this.venueModel.getCenter(),2))[0],e=e[1];return new H.geo.Point(e,t)}},{key:"getId",value:function(){return this.venueModel.getId()}},{key:"getName",value:function(){return this.venueModel.getName()}},{key:"getDrawing",value:function(t){return this.drawings.find((function(e){return e.getId()===t}))}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getLevel",value:function(t){return this.levels.find((function(e){return e.getId()===t}))}},{key:"getLevels",value:function(){return this.levels}},{key:"getGeometry",value:function(t){return this.geometries.find((function(e){return e.getId()===t}))}},{key:"getGeometries",value:function(){return this.geometries}},{key:"getActiveLevels",value:function(){var t=this;return this.getData().getDisplaySettings()===wt.FLATTEN?this.venueModel.getLevelsByZIndex(this.status_.activeLevelIndex).map((function(e){return t.getLevel(e.getId())})):[this.venueModel.getDrawingById(this.status_.activeDrawingId).getLevelByZIndex(this.status_.activeLevelIndex)].map((function(e){return t.getLevel(e.getId())}))}},{key:"getActiveDrawing",value:function(){return this.getDrawing(this.status_.activeDrawingId)}},{key:"setActiveDrawing",value:function(t){if(this.status_.activeDrawingId!==t){var r=this.venueModel.getDrawingById(t);if(!r)throw new Error("Drawing ".concat(t," was not found"));var n=this.status_.activeDrawingId;this.status_.activeDrawingId=t,this.setActiveLevelIndex(r.getMainLevel().getZIndex()),this.dispatchEvent(new H.util.ChangeEvent(e.EVENTS.DRAWING_CHANGE,t,n))}}},{key:"getActiveLevelIndex",value:function(){return this.status_.activeLevelIndex}},{key:"setActiveLevelIndex",value:function(t){var r;this.venueModel.getLevelsByZIndex(t)&&(r=this.status_.activeLevelIndex,this.status_.activeLevelIndex=t,this.dispatchEvent(new H.util.ChangeEvent(e.EVENTS.LEVEL_CHANGE,t,r)))}},{key:"isActive",value:function(){var t=this.getParentEventTarget();return!!t&&this===t.activeVenue}},{key:"getHighlightedGeometries",value:function(){var t=this;return this.venueModel.getGeometries().filter((function(t){return t.isHighlighted()})).map((function(e){return t.getGeometry(e.getId())}))}},{key:"setHighlightedGeometries",value:function(t,r,n){var i=!(0<arguments.length&&void 0!==t)||t,o=(r=1<arguments.length&&void 0!==r?r:[],n=2<arguments.length&&void 0!==n?n:{},(n=l(l({},ot),n)).fillColor),a=n.outlineColor,s=n.outlineWidth;r.forEach((function(t){t.getData().highlight(i,{m:o,o:a,w:s})})),this.dispatchEvent(e.EVENTS.GEOMETRY_HIGHLIGHT)}},{key:"getMapObjects",value:function(t,e){return t=0<arguments.length&&void 0!==t?t:this.getActiveLevelIndex(),e=1<arguments.length&&void 0!==e?e:this.getActiveDrawing(),this.mapObjectStore_[t][e.getId()]}},{key:"setMapObjects",value:function(t,e,r){t=0<arguments.length&&void 0!==t?t:[],e=1<arguments.length&&void 0!==e?e:this.getActiveLevelIndex(),r=2<arguments.length&&void 0!==r?r:this.getActiveDrawing(),this.mapObjectStore_[e]&&this.mapObjectStore_[e][r.getId()]&&(this.mapObjectStore_[e][r.getId()]=v(t)),this.updateMapObjectsVisibility_()}},{key:"search",value:function(t){var e=this;t=0<arguments.length&&void 0!==t?t:"";return this.search_.find(t).flatMap((function(t){return t.geometries.map((function(t){return e.getGeometry(t.getId())}))}))}},{key:"updateMapObjectsVisibility_",value:function(){Object.values(this.mapObjectStore_).forEach((function(t){Object.values(t).forEach((function(t){return t.forEach((function(t){return t.setVisibility(!1)}))}))})),this.isActive()&&this.mapObjectStore_[this.getActiveLevelIndex()][this.getActiveDrawing().getId()].forEach((function(t){return t.setVisibility(!0)}))}},{key:"getDefaultMapObjectsStore_",value:function(){var t=this,e=this.getData().getDisplaySettings()===wt.FLATTEN;return this.venueModel.getLevels().reduce((function(r,n){var i=n.getZIndex();return(r=l({},r))[i]||(r[i]={}),r[i][n.getDrawing().getId()]=[],e&&(r[i][t.venueModel.getRootDrawing().getId()]=[]),r}),{})}}]),e}();function ir(t,e,r){return r===gr.ObjectType.SEGMENT_START_MARKER?0===t?fr:Ar:r===gr.ObjectType.SEGMENT_FINISH_MARKER?1===e.length||t===e.length-1?pr:dr:"indoor"===e[t].departure.place.type?cr:hr}nr.EVENTS={ACTIVE_VENUE_CHANGE:"activevenuechange",DRAWING_CHANGE:"drawingchange",LEVEL_CHANGE:"levelchange",GEOMETRY_HIGHLIGHT:"geometryhighlight"};var or=function(){function t(){n(this,t)}return o(t,null,[{key:"getIconLayer",value:function(t){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==t?t:[]).flatMap((function(t){return t.getData().getGeometries()})).filter((function(t){return t.isIcon()&&t.getIcon()})).map((function(t){var e=(i=y(t.getLabelArea(),2))[0],r=i[1],n=t.getLevel(),i=t.getIcon().getSVG();return{type:"Feature",properties:{id:t.getId(),geometryId:t.getId(),levelId:n.getId(),name:t.getDisplayName(),venueId:n.getDrawing().getVenueModel().getId(),url:i?"data:image/svg+xml;utf8,".concat(encodeURIComponent(i)):""},geometry:{type:J,coordinates:[e,r]}}}))}}},{key:"getLabelLayer",value:function(t){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==t?t:[]).flatMap((function(t){return t.getData().getGeometries()})).filter((function(t){return t.getDisplayName()&&!t.isIcon()})).map((function(t){var e=(i=y(t.getLabelArea(),2))[0],r=i[1],n=(o=t.getLabelStyle()).fill,i=o.zmin,o=t.getLevel();return{type:"Feature",properties:{id:t.getId(),geometryId:t.getId(),levelId:o.getId(),venueId:o.getDrawing().getVenueModel().getId(),name:t.getDisplayName(),minZoom:i||15,textFillColor:n.toLowerCase()},geometry:{type:J,coordinates:[e,r]}}}))}}},{key:"getGeometryLayer",value:function(t){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==t?t:[]).flatMap((function(t){return t.getData().getGeometries()})).filter((function(t){return t.getType()!==J})).map((function(t){var e=(c=t.getHighlightedStyle()||{}).m,r=c.o,n=c.w,i=(h=l({},t.getStyle())).m,o=h.o,a=h.w,s=et,u=rt,c=nt,h=t.getLevel();return{type:"Feature",properties:{id:t.getId(),fillColor:(e||i||s).toLowerCase(),geometryId:t.getId(),levelId:h.getId(),venueId:h.getDrawing().getVenueModel().getId(),outlineColor:(r||o||u).toLowerCase(),outlineWidth:Number(((n||a||c)/3).toFixed(2)),zIndex:t.getZIndex()},geometry:{type:t.getType(),coordinates:t.getCoordinates()}}}))}}},{key:"getFootprintLayer",value:function(t){return{type:"FeatureCollection",features:t.flatMap((function(t){var e=t.getData().getRootDrawing().getMainLevel().getId(),r=t.getLevel(e).getData().getGeometries().filter((function(t){return t.getType()===Z}));return[{type:"Feature",properties:{isFootprint:!0,levelId:e,venueId:t.getId(),zIndex:1},geometry:{type:"MultiPolygon",coordinates:r.map((function(t){return t.getCoordinates()}))}},{type:"Feature",properties:{isFootprint:!0,levelId:e,venueId:t.getId(),zIndex:2,venueName:t.getName()},geometry:{type:"Point",coordinates:t.getCenter().toGeoJSON().coordinates.slice(0,2)}}]}))}}}]),t}(),ar=function(){function t(){n(this,t)}return o(t,null,[{key:"getStyle",value:function(t){var e={styles:[{layer:at.FOOTPRINT,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#613F8E",lineWidth:"2px",renderOrder:1},{layer:at.FOOTPRINT,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#AF91B4",renderOrder:2},{layer:at.FOOTPRINT,when:["==",["geometry-type"],"Point"],technique:"text",color:"black",size:16,text:["get","venueName"],priority:61},{layer:at.VECTOR,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:["get","fillColor"],renderOrder:["get","zIndex"]},{layer:at.VECTOR,technique:"solid-line",color:["get","outlineColor"],lineWidth:["get","outlineWidth"],renderOrder:["get","zIndex"]},{layer:at.TEXT,minZoomLevel:["get","minZoom"],technique:"text",color:["get","textFillColor"],size:it,text:["get","name"],priority:60},{layer:at.ICON,minZoomLevel:18,when:["==",["geometry-type"],"Point"],technique:"labeled-icon",textIsOptional:!0,size:0,imageTexture:["concat","texture",["get","name"]],screenWidth:["interpolate",["linear"],["zoom"],15,3,21,25],screenHeight:["interpolate",["linear"],["zoom"],15,3,21,25],priority:61}],images:{},imageTextures:[]};return(t=0<arguments.length&&void 0!==t?t:[]).forEach((function(t){var r="texture"+t.properties.name;e.images[r]||(e.images[r]={url:t.properties.url,preload:!0},e.imageTextures.push({name:r,image:r}))})),new H.map.render.harp.Style(e)}}]),t}(),sr=function(){function t(){n(this,t)}return o(t,null,[{key:"getIconsTextures",value:function(t){var e={},r={},n=(0<arguments.length&&void 0!==t?t:[]).reduce((function(t,e){var r=e.properties.name;return t[r]||(t[r]=[]),t[r].push(e),t}),{});return Object.keys(n).forEach((function(t){var i="texture".concat(t),o="sprite".concat(t),s=n[t][0].properties.url;e[i]={url:s,sprites:a({},o,[0,0,50,50])},n[t].forEach((function(t){t=t.properties,r["icon".concat(t.name)]={filter:{name:t.name,$zoom:{min:18}},draw:{points:{interactive:!0,priority:1,size:[[15,"5%"],[16,"10%"],[17,"15%"],[18,"25%"],[19,"35%"],[20,"40%"],[21,"50%"]],texture:i,sprite:o}}}}))})),{textures:e,iconLayers:r}}},{key:"getFootprintLayer",value:function(){return{data:{source:"venues",layer:at.FOOTPRINT},draw:{polygons:{interactive:!0,color:"#AF91B4",order:2},lines:{color:"#613F8E",width:"2px",order:1},points:{color:"[0, 0, 0, 0]",size:"0px",order:3,priority:1,text:{anchor:"center",collide:!1,font:{fill:"black",size:"16px"},text_source:"function() { return feature.venueName }"}}}}}},{key:"getGeometryLayer",value:function(){return{data:{source:"venues",layer:at.VECTOR},draw:{polygons:{interactive:!0,color:"function() { return feature.fillColor }",order:"function() { return feature.zIndex }"},lines:{color:"function() { return feature.outlineColor }",order:"function() { return feature.zIndex }",width:"function() { return feature.outlineWidth }"}}}}},{key:"getTextLayer",value:function(){return{filter:{$zoom:{min:18}},data:{source:"venues",layer:at.TEXT},draw:{points:{filter:"function() { return $zoom > feature.minZoom }",color:"[0, 0, 0, 0]",size:"0px",offset:["0px","-10px"],priority:2,text:{font:{fill:"function() { return feature.textFillColor }",size:it},text_source:"function() { return feature.name }"}}}}}},{key:"getIconLayer",value:function(t){return l({data:{source:"venues",layer:at.ICON}},t)}},{key:"getStyle",value:function(e){e=(r=t.getIconsTextures(0<arguments.length&&void 0!==e?e:[])).textures;var r=r.iconLayers;r={venue_footprints:t.getFootprintLayer(),venue_geometries:t.getGeometryLayer(),venue_labels:t.getTextLayer(),venue_icons:t.getIconLayer(r)},e=H.gl.yaml.safeDump({sources:{venues:{max_zoom:24,type:"GeoJSONTileSource"}},layers:r,textures:e});return new H.map.render.webgl.Style(e)}}]),t}(),lr={type:"FeatureCollection",features:[]},ur={extent:4096,indexMaxZoom:0,maxZoom:24,tolerance:3},cr=(Oe=function(){u(e,H.map.provider.RemoteTileProvider);var t=d(e);function e(r){return n(this,e),(r=t.call(this,r)).venues=[],r.activeVenue=null,r.dataLayers_={},r.tileIndexes_={},r.addEventListener(nr.EVENTS.ACTIVE_VENUE_CHANGE,r.activeVenueChangeHandler_,void 0,A(r)),r}return o(e,[{key:"setStyle",value:function(t){return this.setStyleInternal(t)}},{key:"getStyle",value:function(){return this.getStyleInternal()}},{key:"isFeatureVisible_",value:function(t,e){var r=t.properties;return this.activeVenue&&r.venueId===this.activeVenue.getId()?e!==at.FOOTPRINT&&this.activeVenue.getActiveLevels().some((function(t){return t.id===r.levelId})):!0===r.isFootprint&&e===at.FOOTPRINT}},{key:"requestInternal",value:function(t,e,r,n){function i(n){for(var i=0;i<n.length;i+=1)n[i]=n[i].map((function(n){return X(n,r,t,e,ur.extent)}))}var o=this,a={};return Object.keys(this.tileIndexes_).forEach((function(n){var s=o.tileIndexes_[n].getTile(r,t,e);a[n]=s?function(t){var e=[],r=t&&t.features;if(r)for(var n=0,i=r.length;n<i;n+=1){var o=r[n],a=o.type,s=void 0,l=!1;switch(a){case 1:s={type:"MultiPoint",coordinates:o.geometry.map((function(t){return t.slice()}))};break;case 2:case 3:s={type:$,coordinates:o.geometry.map((function(t){return t.map((function(t){return t.slice()}))}))},3===a&&null==(s=W(s))&&(l=!0);break;default:l=!0}l||e.push({geometry:s,id:o.id,properties:o.tags,type:"Feature"})}return{type:"FeatureCollection",features:e}}(s):lr,a[n].features=a[n].features.filter((function(t){return o.isFeatureVisible_(t,n)}));for(var l=0;l<a[n].features.length;l+=1){var u=a[n].features[l],c=u.geometry.type;if(c===Z||c===$)i(u.geometry.coordinates);else if(c===tt)u.geometry.coordinates.map(i);else for(var h=u.geometry.coordinates,f=0;f<h.length;f+=1)h[f]=X(h[f],r,t,e,ur.extent)}})),n(a),{cancel:function(){}}}},{key:"getActiveVenue",value:function(){return this.activeVenue}},{key:"getVenue",value:function(t){return t?this.venues.find((function(e){return e.getId()===Number(t)})):this.activeVenue}},{key:"setActiveVenue",value:function(t){var e=this.activeVenue;this.activeVenue=t,this.dispatchEvent(new H.util.ChangeEvent(nr.EVENTS.ACTIVE_VENUE_CHANGE,t,e)),this.reload()}},{key:"addVenue",value:function(t,e){var r=1<arguments.length&&void 0!==e&&e;if(!(t instanceof nr))throw new Error("Invalid argument");if(e=t.getId(),this.getVenue(e))throw new Error("Please invoke provider.removeVenue to remove old instance of venue ".concat(e," before adding new"));t.setParentEventTarget(this),this.venues.push(t),r||(this.reloadData_(),this.reloadStyle_())}},{key:"addVenues",value:function(t){var e=this;0<(t=0<arguments.length&&void 0!==t?t:[]).length&&(t.forEach((function(t){t instanceof nr&&e.addVenue(t,!0)})),this.reloadData_(),this.reloadStyle_())}},{key:"removeVenue",value:function(t){var e;t instanceof nr&&-1<this.venues.indexOf(t)&&(e=t.getId(),this.activeVenue&&this.activeVenue.getId()===e&&this.setActiveVenue(null),this.venues.splice(this.venues.indexOf(t),1),this.reloadData_(),this.reloadStyle_(),this.reload())}},{key:"getFeatureProxy",value:function(t,e,r){var n=t.geometryId;t=t.venueId,t=this.getVenue(t);return n?r(t.getGeometries().find((function(t){return t.id===n}))):t&&r(t),!0}},{key:"addVenueEventListeners_",value:function(t){t&&(t.addEventListener(nr.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),t.addEventListener(nr.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),t.addEventListener(nr.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"removeVenueEventListeners_",value:function(t){t&&(t.removeEventListener(nr.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),t.removeEventListener(nr.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),t.removeEventListener(nr.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"activeVenueChangeHandler_",value:function(t){var e=t.oldValue;t=t.newValue;e&&(this.removeVenueEventListeners_(e),e.updateMapObjectsVisibility_()),t&&(this.addVenueEventListeners_(t),t.updateMapObjectsVisibility_())}},{key:"drawingChangeHandler_",value:function(){this.reload()}},{key:"levelChangeHandler_",value:function(){this.activeVenue&&(this.activeVenue.updateMapObjectsVisibility_(),this.reload())}},{key:"geometryHighlightHandler_",value:function(){this.reloadData_([at.VECTOR]),this.reload()}},{key:"createDataLayers_",value:function(t){var e=this,r=(t=0<arguments.length&&void 0!==t?t:Object.keys(at),at.FOOTPRINT),n=at.ICON,i=at.TEXT,o=at.VECTOR;t.forEach((function(t){switch(t){case o:e.dataLayers_[o]=or.getGeometryLayer(e.venues);break;case r:e.dataLayers_[r]=or.getFootprintLayer(e.venues);break;case n:e.dataLayers_[n]=or.getIconLayer(e.venues);break;case i:e.dataLayers_[i]=or.getLabelLayer(e.venues);break;default:throw new Error("Unsupported Layer ".concat(t))}}))}},{key:"createTileIndexes_",value:function(t){var e=this;(0<arguments.length&&void 0!==t?t:Object.keys(at)).forEach((function(t){e.tileIndexes_[t]=new K(e.dataLayers_[t],ur)}))}},{key:"reloadData_",value:function(t){t=0<arguments.length&&void 0!==t?t:Object.keys(at),this.createDataLayers_(t),this.createTileIndexes_(t)}},{key:"reloadStyle_",value:function(){var t=this.dataLayers_[at.ICON]?this.dataLayers_[at.ICON].features:[];this.getEngineType()===H.Map.EngineType.WEBGL?this.setStyle(sr.getStyle(t)):this.getEngineType()===H.Map.EngineType.HARP&&this.setStyle(ar.getStyle(t))}},{key:"providesGeoJSON",value:function(){return!0}}]),e}(),new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3})),hr=new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3}),fr=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImIiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PG1hc2sgaWQ9ImMiIHdpZHRoPSIzOCIgaGVpZ2h0PSI0NiIgeD0iMCIgeT0iMCIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZWxsaXBzZSBjeD0iMjAiIGN5PSI0NS4xNiIgZmlsbD0iI0ZGRiIgc3Ryb2tlPSIjOTc5Nzk3IiBzdHJva2Utd2lkdGg9Ii4yNSIgcng9IjMuNSIgcnk9IjMuNSIvPjx1c2UgZmlsbD0iIzAxQjZCMiIgeGxpbms6aHJlZj0iI2IiLz48cGF0aCBmaWxsPSIjMzIzMjMyIiBmaWxsLW9wYWNpdHk9Ii41IiBkPSJNMTEuODEgMzcuNjZoMTYuMzhsLTguMiA4eiIvPjx1c2Ugc3Ryb2tlPSIjNDE2QTg2IiBzdHJva2Utd2lkdGg9Ii41IiBtYXNrPSJ1cmwoI2MpIiB4bGluazpocmVmPSIjYSIvPjxlbGxpcHNlIGN4PSIxOS44MSIgY3k9IjE5LjE5IiBmaWxsPSIjRkZGIiByeD0iNC44MSIgcnk9IjQuODEiLz48L2c+PC9zdmc+"),pr=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzMi44MyAzMy4xMDRjLjQwNy0uMzc0IDEuNDE5LTEuNDUyIDEuNDE5LTEuNDUyeiIvPjxtYXNrIGlkPSJjIiB3aWR0aD0iMzgiIGhlaWdodD0iNDYiIHg9IjAiIHk9IjAiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PGVsbGlwc2UgaWQ9ImIiIGN4PSIxOS44MDciIGN5PSIxOS4xNjgiIHJ4PSIxMi4zNjMiIHJ5PSIxMi4xOTciLz48bWFzayBpZD0iZCIgd2lkdGg9IjI1LjcyNSIgaGVpZ2h0PSIyNS4zOTQiIHg9Ii0uNSIgeT0iLS41Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNi45NDQgNi40NzFoMjUuNzI1djI1LjM5NEg2Ljk0NHoiLz48dXNlIHhsaW5rOmhyZWY9IiNiIi8+PC9tYXNrPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxlbGxpcHNlIGN4PSIyMCIgY3k9IjQ1LjE2IiBmaWxsPSIjRkZGIiBzdHJva2U9IiM5Nzk3OTciIHN0cm9rZS13aWR0aD0iLjI1IiByeD0iMy41IiByeT0iMy41Ii8+PHVzZSBmaWxsPSIjMzIzMjMyIiB4bGluazpocmVmPSIjYSIvPjxwYXRoIGZpbGw9IiM3RDdEN0QiIGQ9Ik0xMi4wMTEgMzcuODA1aDE1Ljk3OGwtNy45MTYgOHoiLz48dXNlIHN0cm9rZT0iIzdDN0M3QyIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNlKSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIHN0cm9rZT0iI0ZGRiIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNjKSIgeGxpbms6aHJlZj0iI2EiLz48ZWxsaXBzZSBmaWxsPSIjRkZGIiBjeD0iMTkuODA3IiBjeT0iMTkuMTY4IiByeD0iMTIuMzYzIiByeT0iMTIuMTk3Ii8+PHBhdGggZmlsbD0iIzMyMzIzMiIgZD0iTTYuODEyIDYuOTQ4aDYuNDV2Ni4zNjRoLTYuNDV6bTAgMTIuNzI3aDYuNDV2Ni4zNjRoLTYuNDV6bTYuNDUtNi4zNjNoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS0xOS4wOTFoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS02LjM2M2g2LjQ1djYuMzY0aC02LjQ1em0wIDEyLjcyN2g2LjQ1djYuMzY0aC02LjQ1eiIvPjx1c2Ugc3Ryb2tlPSIjRkZGIiBtYXNrPSJ1cmwoI2QpIiB4bGluazpocmVmPSIjYiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIvPjwvZz48L3N2Zz4="),Ar=null,dr=null,gr=function(){function t(e,r){n(this,t),this.indoorMapObjects_=null,this.outdoorMapObjects_=null,this.createRouteObjects_(e,r)}return o(t,[{key:"createRouteObjects_",value:function(e,r){var n=this,i=void 0===(e=e.sections)?[]:e,o=1<arguments.length&&void 0!==r?r:ir;this.indoorMapObjects_={},this.outdoorMapObjects_=new H.map.Group;for(var a=function(e){var r=i[e],a=(f=r.departure.place,f.id),s=f.type,u=H.util.flexiblePolyline.decode(r.polyline).polyline,c=void 0,h=void 0,f=o(e,i,t.ObjectType.SEGMENT_START_MARKER);f&&(c=new H.map.Marker(r.departure.place.location,{icon:f})),f=o(e,i,t.ObjectType.SEGMENT_FINISH_MARKER),f&&(h=new H.map.Marker(r.arrival.place.location,{icon:f}));var p,A=o(e,i,t.ObjectType.SEGMENT_POLYLINE);"indoor"===s?(s=function(t){t=0<arguments.length&&void 0!==t?t:[];var e=new Map,r=new H.geo.LineString,n=y(t[0],3)[2];return e.set(n,[r]),t.forEach((function(t){t[2]!==n&&(n=t[2],r=new H.geo.LineString,e.has(n)?e.get(n).push(r):e.set(n,[r])),r.pushLatLngAlt.apply(r,v(t))})),e}(u),p=Array.from(s.keys()).reduce((function(t,e){return t[e]||(t[e]=new H.map.Group),t}),{}),A&&s.forEach((function(t,e){t.forEach((function(t){1<t.getPointCount()&&(t=new H.map.Polyline(t,{style:A}),p[e].addObject(t))}))})),c&&p[r.departure.place.location.lvl].addObject(c),h&&p[r.arrival.place.location.lvl].addObject(h),n.indoorMapObjects_[a]=l(l({},n.indoorMapObjects_[a]||{}),p)):(A&&(u=new H.geo.LineString(u.flatMap((function(t){return[t[0],t[1],0]}))),u=new H.map.Polyline(u,{style:A}),n.outdoorMapObjects_.addObject(u)),c&&n.outdoorMapObjects_.addObject(c),h&&n.outdoorMapObjects_.addObject(h))},s=0;s<i.length;s++)a(s)}},{key:"getIndoorObjects",value:function(){return this.indoorMapObjects_}},{key:"getOutdoorObjects",value:function(){return this.outdoorMapObjects_}}]),t}();gr.ObjectType={SEGMENT_START_MARKER:1,SEGMENT_FINISH_MARKER:2,SEGMENT_POLYLINE:3};var yr=function(){u(e,H.service.Service);var t=d(e);function e(r){var i;n(this,e),i=t.call(this,e,r);var o={apiKey:r.apikey,baseUrl:r.baseUrl&&r.baseUrl.getHost(),token:r.token},a={apiKey:o.apiKey,token:o.token};o.apiKey||(o.apiKey=i.getUrl().getQuery().apikey);var s=r.useLegacy||!1;return i.venueService_=new tr(o,s),a.apiKey||(a.apiKey=i.getUrl().getQuery().apikey),r.routingBaseUrl&&(a.baseUrl=r.routingBaseUrl),i.routingService_=new rr(a),i}return o(e,[{key:"loadVenue",value:function(t,e){return e=1<arguments.length&&void 0!==e?e:{},this.venueService_.load(t,e).then((function(t){return new nr(t)}))}},{key:"calculateRoute",value:function(t){return console.warn("HERE Indoor Routing is deprecated and will be removed soon."),this.routingService_.calculateRoute(t)}}]),e}();return yr.CONFIG_KEY="venues",H.service.Platform.prototype.getVenuesService=function(t){return this.createService(yr,t)},xe=function(){u(e,H.ui.Control);var t=d(e);function e(r){var i,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return n(this,e),(i=t.call(this)).provider_=null,i.levelSelectorUI_=null,i.setAlignment(o&&o.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),i.addClass("venues-ui"),r instanceof nr&&i.setVenue(r),i}return o(e,[{key:"renderInternal",value:function(t,r){g(c(e.prototype),"renderInternal",this).call(this,t,r),this.createLevelSelectorUI_(t),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(t){t instanceof nr&&(this.removeEventListeners_(),this.venue=t,this.provider_=t.getParentEventTarget(),this.update_(),this.addEventListeners_())}},{key:"createLevelSelectorUI_",value:function(t){var e=this;t.innerHTML="",this.levelSelectorUI_=null,this.levelSelectorUI_=new qt(t,null,null,(function(t){return e.venue.setActiveLevelIndex(t)}))}},{key:"update_",value:function(){var t,e;this.levelSelectorUI_&&(t=this.venue.getActiveDrawing().getData(),e=this.venue.getData().getDisplaySettings(),this.levelSelectorUI_.update(t,e),this.levelChangeHandler_())}},{key:"addEventListeners_",value:function(){this.venue&&(this.venue.addEventListener(nr.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.addEventListener(nr.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.addEventListener(nr.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&(this.venue.removeEventListener(nr.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.removeEventListener(nr.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.removeEventListener(nr.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"levelChangeHandler_",value:function(){this.levelSelectorUI_.switch(this.venue.getActiveLevelIndex())}},{key:"drawingChangeHandler_",value:function(){this.update_()}},{key:"activeVenueChangeHandler_",value:function(t){this.setVenue(t.newValue)}}]),e}(),kt=function(){u(e,H.ui.Control);var t=d(e);function e(r){var i,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return n(this,e),(i=t.call(this)).provider_=null,i.drawingSelectorUI_=null,i.addClass("venues-ui"),i.setAlignment(o&&o.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),r instanceof nr&&i.setVenue(r),i}return o(e,[{key:"renderInternal",value:function(t,r){g(c(e.prototype),"renderInternal",this).call(this,t,r),this.createDrawingSelectorUI_(t),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(t){t instanceof nr&&(this.removeEventListeners_(),this.venue=t,this.provider_=t.getParentEventTarget(),this.drawingSelectorUI_&&this.drawingSelectorUI_.update(t.getData()),this.addEventListeners_())}},{key:"createDrawingSelectorUI_",value:function(t){var e=this;t.innerHTML="",this.drawingSelectorUI_=null,this.drawingSelectorUI_=new jt(t,null,(function(t){return e.venue.setActiveDrawing(t)}))}},{key:"addEventListeners_",value:function(){this.venue&&this.venue.addEventListener(nr.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.addEventListener(nr.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&this.venue.removeEventListener(nr.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.removeEventListener(nr.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"drawingChangeHandler_",value:function(){this.drawingSelectorUI_.switch(this.venue.getActiveDrawing().id)}},{key:"activeVenueChangeHandler_",value:function(t){this.setVenue(t.newValue)}}]),e}(),xe=Object.freeze({__proto__:null,DrawingControl:kt,LevelControl:xe}),e(".venues-ui * {\n  font-family: 'Fira Sans', 'Helvetica Neue', Helvetica, sans-serif;\n  color: #0F1621; }\n\n.venues-ui .arrow {\n  display: block;\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center; }\n  .venues-ui .arrow--up {\n    background-image: url(\"data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-426.000000, -584.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls-Copy' transform='translate(417.753906, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(15.000000, 16.499023) rotate(-180.000000) translate(-15.000000, -16.499023) translate(9.000000, 12.749023)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\"); }\n  .venues-ui .arrow--down {\n    background-image: url(\"data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-347.000000, -704.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls' transform='translate(338.251953, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(9.000000, 132.746094)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\"); }\n\n.venues-ui .venues-ui-button {\n  display: block;\n  width: 40px;\n  height: 40px;\n  line-height: 40px;\n  font-size: 16px;\n  font-weight: 600;\n  background-color: #fff;\n  border: none;\n  border-bottom: 1px solid #9FA2A6;\n  cursor: pointer;\n  overflow: hidden;\n  color: #6e737a;\n  text-align: center;\n  text-overflow: ellipsis;\n  white-space: nowrap; }\n  .venues-ui .venues-ui-button:hover, .venues-ui .venues-ui-button--active {\n    background-color: #f0f0f0;\n    color: #0F1621; }\n\n@keyframes fade {\n  0% {\n    opacity: 0; }\n  100% {\n    opacity: 1; } }\n\n.venues-ui__drawings .drawings {\n  position: absolute;\n  top: 0;\n  right: 45px;\n  display: none;\n  opacity: 0;\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6); }\n  .venues-ui__drawings .drawings--open {\n    display: block;\n    opacity: 1;\n    animation: fade 1s; }\n  .venues-ui__drawings .drawings .venues-ui-button {\n    width: auto;\n    padding: 0 10px; }\n    .venues-ui__drawings .drawings .venues-ui-button:first-of-type {\n      border-top-left-radius: 5px;\n      border-top-right-radius: 5px; }\n    .venues-ui__drawings .drawings .venues-ui-button:last-of-type {\n      border-bottom-left-radius: 5px;\n      border-bottom-right-radius: 5px; }\n\n.venues-ui__drawings .trigger {\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6); }\n  .venues-ui__drawings .trigger .arrow {\n    transform: rotate(0);\n    transition: 0.4s; }\n  .venues-ui__drawings .trigger.venues-ui-button--active .arrow {\n    transform: rotate(90deg);\n    transition: 0.4s; }\n\n.venues-ui__levels {\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6); }\n  .venues-ui__levels .levels {\n    overflow: hidden; }\n  .venues-ui__levels .venues-ui-button--up + .levels .venues-ui-button {\n    border-radius: 0; }\n  .venues-ui__levels .venues-ui-button:first-of-type {\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px; }\n  .venues-ui__levels .venues-ui-button:last-of-type {\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px; }\n  .venues-ui__levels .venues-ui-button[disabled=disabled] .arrow {\n    opacity: 0.5; }\n\n.venues-ui__directory {\n  position: absolute;\n  top: 10px;\n  right: 60px;\n  bottom: calc(100% - 45px);\n  width: 350px;\n  overflow: hidden;\n  background: white;\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6); }\n  .venues-ui__directory.active {\n    bottom: 10px; }\n  .venues-ui__directory .directory__list {\n    top: 80px;\n    bottom: 20px;\n    position: absolute;\n    overflow-y: scroll;\n    right: 10px;\n    left: 10px;\n    font-size: 12px; }\n    .venues-ui__directory .directory__list svg {\n      width: 25px;\n      height: 25px; }\n  .venues-ui__directory .directory__heading {\n    margin: 8px;\n    font-size: 15px;\n    font-weight: normal;\n    cursor: pointer; }\n  .venues-ui__directory .directory__input {\n    margin: 10px; }\n    .venues-ui__directory .directory__input input {\n      width: 100%;\n      padding: 5px 0; }\n  .venues-ui__directory .directory__trigger {\n    position: absolute;\n    right: 10px;\n    top: 15px;\n    width: 10px;\n    height: 10px; }\n    .venues-ui__directory .directory__trigger .arrow {\n      transform: rotate(0);\n      transition: 0.4s; }\n    .venues-ui__directory .directory__trigger--active .arrow {\n      transform: rotate(-180deg);\n      transition: 0.4s; }\n"),t.Drawing=w,t.Geometry=_,t.Level=x,t.Provider=Oe,t.Route=gr,t.Service=yr,t.Venue=nr,t.ui=xe,Object.defineProperty(t,"__esModule",{value:!0}),t}({})}.call(self),__webpack_exports__.Z=H},4259:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LineBreaker=e.inlineBreakOpportunities=e.lineBreakAtIndex=e.codePointsToCharacterClasses=e.UnicodeTrie=e.BREAK_ALLOWED=e.BREAK_NOT_ALLOWED=e.BREAK_MANDATORY=e.classes=e.LETTER_NUMBER_MODIFIER=void 0;var n,i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=r(5092),s=r(72),l=(n=s)&&n.__esModule?n:{default:n},u=r(4905);var c=e.LETTER_NUMBER_MODIFIER=50,h=10,f=13,p=15,A=17,d=18,g=19,y=20,v=21,m=22,b=24,_=25,w=26,x=27,E=28,B=30,C=32,S=33,k=34,T=35,N=37,L=38,I=39,M=40,O=42,P=(e.classes={BK:1,CR:2,LF:3,CM:4,NL:5,SG:6,WJ:7,ZW:8,GL:9,SP:h,ZWJ:11,B2:12,BA:f,BB:14,HY:p,CB:16,CL:A,CP:d,EX:g,IN:y,NS:v,OP:m,QU:23,IS:b,NU:_,PO:w,PR:x,SY:E,AI:29,AL:B,CJ:31,EB:C,EM:S,H2:k,H3:T,HL:36,ID:N,JL:L,JV:I,JT:M,RI:41,SA:O,XX:43},e.BREAK_MANDATORY="!"),F=e.BREAK_NOT_ALLOWED="\xd7",U=e.BREAK_ALLOWED="\xf7",R=e.UnicodeTrie=(0,a.createTrieFromBase64)(l.default),D=[B,36],j=[1,2,3,5],H=[h,8],Q=[x,w],z=j.concat(H),V=[L,I,M,k,T],G=[p,f],q=e.codePointsToCharacterClasses=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"strict",r=[],n=[],i=[];return t.forEach((function(t,o){var a=R.get(t);if(a>c?(i.push(!0),a-=c):i.push(!1),-1!==["normal","auto","loose"].indexOf(e)&&-1!==[8208,8211,12316,12448].indexOf(t))return n.push(o),r.push(16);if(4===a||11===a){if(0===o)return n.push(o),r.push(B);var s=r[o-1];return-1===z.indexOf(s)?(n.push(n[o-1]),r.push(s)):(n.push(o),r.push(B))}return n.push(o),31===a?r.push("strict"===e?v:N):a===O||29===a?r.push(B):43===a?t>=131072&&t<=196605||t>=196608&&t<=262141?r.push(N):r.push(B):void r.push(a)})),[n,r,i]},K=function(t,e,r,n){var i=n[r];if(Array.isArray(t)?-1!==t.indexOf(i):t===i)for(var o=r;o<=n.length;){var a=n[++o];if(a===e)return!0;if(a!==h)break}if(i===h)for(var s=r;s>0;){var l=n[--s];if(Array.isArray(t)?-1!==t.indexOf(l):t===l)for(var u=r;u<=n.length;){var c=n[++u];if(c===e)return!0;if(c!==h)break}if(l!==h)break}return!1},Y=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n!==h)return n;r--}return 0},W=function(t,e,r,n,i){if(0===r[n])return F;var o=n-1;if(Array.isArray(i)&&!0===i[o])return F;var a=o-1,s=o+1,l=e[o],u=a>=0?e[a]:0,c=e[s];if(2===l&&3===c)return F;if(-1!==j.indexOf(l))return P;if(-1!==j.indexOf(c))return F;if(-1!==H.indexOf(c))return F;if(8===Y(o,e))return U;if(11===R.get(t[o])&&(c===N||c===C||c===S))return F;if(7===l||7===c)return F;if(9===l)return F;if(-1===[h,f,p].indexOf(l)&&9===c)return F;if(-1!==[A,d,g,b,E].indexOf(c))return F;if(Y(o,e)===m)return F;if(K(23,m,o,e))return F;if(K([A,d],v,o,e))return F;if(K(12,12,o,e))return F;if(l===h)return U;if(23===l||23===c)return F;if(16===c||16===l)return U;if(-1!==[f,p,v].indexOf(c)||14===l)return F;if(36===u&&-1!==G.indexOf(l))return F;if(l===E&&36===c)return F;if(c===y&&-1!==D.concat(y,g,_,N,C,S).indexOf(l))return F;if(-1!==D.indexOf(c)&&l===_||-1!==D.indexOf(l)&&c===_)return F;if(l===x&&-1!==[N,C,S].indexOf(c)||-1!==[N,C,S].indexOf(l)&&c===w)return F;if(-1!==D.indexOf(l)&&-1!==Q.indexOf(c)||-1!==Q.indexOf(l)&&-1!==D.indexOf(c))return F;if(-1!==[x,w].indexOf(l)&&(c===_||-1!==[m,p].indexOf(c)&&e[s+1]===_)||-1!==[m,p].indexOf(l)&&c===_||l===_&&-1!==[_,E,b].indexOf(c))return F;if(-1!==[_,E,b,A,d].indexOf(c))for(var B=o;B>=0;){var O=e[B];if(O===_)return F;if(-1===[E,b].indexOf(O))break;B--}if(-1!==[x,w].indexOf(c))for(var z=-1!==[A,d].indexOf(l)?a:o;z>=0;){var q=e[z];if(q===_)return F;if(-1===[E,b].indexOf(q))break;z--}if(L===l&&-1!==[L,I,k,T].indexOf(c)||-1!==[I,k].indexOf(l)&&-1!==[I,M].indexOf(c)||-1!==[M,T].indexOf(l)&&c===M)return F;if(-1!==V.indexOf(l)&&-1!==[y,w].indexOf(c)||-1!==V.indexOf(c)&&l===x)return F;if(-1!==D.indexOf(l)&&-1!==D.indexOf(c))return F;if(l===b&&-1!==D.indexOf(c))return F;if(-1!==D.concat(_).indexOf(l)&&c===m||-1!==D.concat(_).indexOf(c)&&l===d)return F;if(41===l&&41===c){for(var W=r[o],X=1;W>0&&41===e[--W];)X++;if(X%2!==0)return F}return l===C&&c===S?F:U},X=(e.lineBreakAtIndex=function(t,e){if(0===e)return F;if(e>=t.length)return P;var r=q(t),n=o(r,2),i=n[0],a=n[1];return W(t,a,i,e)},function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=q(t,e.lineBreak),n=o(r,3),i=n[0],a=n[1],s=n[2];return"break-all"!==e.wordBreak&&"break-word"!==e.wordBreak||(a=a.map((function(t){return-1!==[_,B,O].indexOf(t)?N:t}))),[i,a,"keep-all"===e.wordBreak?s.map((function(e,r){return e&&t[r]>=19968&&t[r]<=40959})):null]}),J=(e.inlineBreakOpportunities=function(t,e){var r=(0,u.toCodePoints)(t),n=F,i=X(r,e),a=o(i,3),s=a[0],l=a[1],c=a[2];return r.forEach((function(t,e){n+=(0,u.fromCodePoint)(t)+(e>=r.length-1?P:W(r,l,s,e+1,c))})),n},function(){function t(e,r,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._codePoints=e,this.required=r===P,this.start=n,this.end=i}return i(t,[{key:"slice",value:function(){return u.fromCodePoint.apply(void 0,function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}(this._codePoints.slice(this.start,this.end)))}}]),t}());e.LineBreaker=function(t,e){var r=(0,u.toCodePoints)(t),n=X(r,e),i=o(n,3),a=i[0],s=i[1],l=i[2],c=r.length,h=0,f=0;return{next:function(){if(f>=c)return{done:!0};for(var t=F;f<c&&(t=W(r,s,a,++f,l))===F;);if(t!==F||f===c){var e=new J(r,t,h,f);return h=f,{value:e,done:!1}}return{done:!0}}}}},5092:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Trie=e.createTrieFromBase64=e.UTRIE2_INDEX_2_MASK=e.UTRIE2_INDEX_2_BLOCK_LENGTH=e.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=e.UTRIE2_INDEX_1_OFFSET=e.UTRIE2_UTF8_2B_INDEX_2_LENGTH=e.UTRIE2_UTF8_2B_INDEX_2_OFFSET=e.UTRIE2_INDEX_2_BMP_LENGTH=e.UTRIE2_LSCP_INDEX_2_LENGTH=e.UTRIE2_DATA_MASK=e.UTRIE2_DATA_BLOCK_LENGTH=e.UTRIE2_LSCP_INDEX_2_OFFSET=e.UTRIE2_SHIFT_1_2=e.UTRIE2_INDEX_SHIFT=e.UTRIE2_SHIFT_1=e.UTRIE2_SHIFT_2=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(4905);var o=e.UTRIE2_SHIFT_2=5,a=e.UTRIE2_SHIFT_1=11,s=e.UTRIE2_INDEX_SHIFT=2,l=e.UTRIE2_SHIFT_1_2=a-o,u=e.UTRIE2_LSCP_INDEX_2_OFFSET=65536>>o,c=e.UTRIE2_DATA_BLOCK_LENGTH=1<<o,h=e.UTRIE2_DATA_MASK=c-1,f=e.UTRIE2_LSCP_INDEX_2_LENGTH=1024>>o,p=e.UTRIE2_INDEX_2_BMP_LENGTH=u+f,A=e.UTRIE2_UTF8_2B_INDEX_2_OFFSET=p,d=e.UTRIE2_UTF8_2B_INDEX_2_LENGTH=32,g=e.UTRIE2_INDEX_1_OFFSET=A+d,y=e.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=65536>>a,v=e.UTRIE2_INDEX_2_BLOCK_LENGTH=1<<l,m=e.UTRIE2_INDEX_2_MASK=v-1,b=(e.createTrieFromBase64=function(t){var e=(0,i.decode)(t),r=Array.isArray(e)?(0,i.polyUint32Array)(e):new Uint32Array(e),n=Array.isArray(e)?(0,i.polyUint16Array)(e):new Uint16Array(e),o=n.slice(12,r[4]/2),a=2===r[5]?n.slice((24+r[4])/2):r.slice(Math.ceil((24+r[4])/4));return new b(r[0],r[1],r[2],r[3],o,a)},e.Trie=function(){function t(e,r,n,i,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=i,this.index=o,this.data=a}return n(t,[{key:"get",value:function(t){var e=void 0;if(t>=0){if(t<55296||t>56319&&t<=65535)return e=((e=this.index[t>>o])<<s)+(t&h),this.data[e];if(t<=65535)return e=((e=this.index[u+(t-55296>>o)])<<s)+(t&h),this.data[e];if(t<this.highStart)return e=g-y+(t>>a),e=this.index[e],e+=t>>o&m,e=((e=this.index[e])<<s)+(t&h),this.data[e];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue}}]),t}())},4905:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.toCodePoints=function(t){for(var e=[],r=0,n=t.length;r<n;){var i=t.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var o=t.charCodeAt(r++);56320===(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),r--)}else e.push(i)}return e},e.fromCodePoint=function(){if(String.fromCodePoint)return String.fromCodePoint.apply(String,arguments);var t=arguments.length;if(!t)return"";for(var e=[],r=-1,n="";++r<t;){var i=arguments.length<=r?void 0:arguments[r];i<=65535?e.push(i):(i-=65536,e.push(55296+(i>>10),i%1024+56320)),(r+1===t||e.length>16384)&&(n+=String.fromCharCode.apply(String,e),e.length=0)}return n};for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="undefined"===typeof Uint8Array?[]:new Uint8Array(256),i=0;i<r.length;i++)n[r.charCodeAt(i)]=i;e.decode=function(t){var e=.75*t.length,r=t.length,i=void 0,o=0,a=void 0,s=void 0,l=void 0,u=void 0;"="===t[t.length-1]&&(e--,"="===t[t.length-2]&&e--);var c="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(e):new Array(e),h=Array.isArray(c)?c:new Uint8Array(c);for(i=0;i<r;i+=4)a=n[t.charCodeAt(i)],s=n[t.charCodeAt(i+1)],l=n[t.charCodeAt(i+2)],u=n[t.charCodeAt(i+3)],h[o++]=a<<2|s>>4,h[o++]=(15&s)<<4|l>>2,h[o++]=(3&l)<<6|63&u;return c},e.polyUint16Array=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},e.polyUint32Array=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r}},3424:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4905);Object.defineProperty(e,"toCodePoints",{enumerable:!0,get:function(){return n.toCodePoints}}),Object.defineProperty(e,"fromCodePoint",{enumerable:!0,get:function(){return n.fromCodePoint}});var i=r(4259);Object.defineProperty(e,"LineBreaker",{enumerable:!0,get:function(){return i.LineBreaker}})},72:function(t){"use strict";t.exports="KwAAAAAAAAAACA4AIDoAAPAfAAACAAAAAAAIABAAGABAAEgAUABYAF4AZgBeAGYAYABoAHAAeABeAGYAfACEAIAAiACQAJgAoACoAK0AtQC9AMUAXgBmAF4AZgBeAGYAzQDVAF4AZgDRANkA3gDmAOwA9AD8AAQBDAEUARoBIgGAAIgAJwEvATcBPwFFAU0BTAFUAVwBZAFsAXMBewGDATAAiwGTAZsBogGkAawBtAG8AcIBygHSAdoB4AHoAfAB+AH+AQYCDgIWAv4BHgImAi4CNgI+AkUCTQJTAlsCYwJrAnECeQKBAk0CiQKRApkCoQKoArACuALAAsQCzAIwANQC3ALkAjAA7AL0AvwCAQMJAxADGAMwACADJgMuAzYDPgOAAEYDSgNSA1IDUgNaA1oDYANiA2IDgACAAGoDgAByA3YDfgOAAIQDgACKA5IDmgOAAIAAogOqA4AAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAK8DtwOAAIAAvwPHA88D1wPfAyAD5wPsA/QD/AOAAIAABAQMBBIEgAAWBB4EJgQuBDMEIAM7BEEEXgBJBCADUQRZBGEEaQQwADAAcQQ+AXkEgQSJBJEEgACYBIAAoASoBK8EtwQwAL8ExQSAAIAAgACAAIAAgACgAM0EXgBeAF4AXgBeAF4AXgBeANUEXgDZBOEEXgDpBPEE+QQBBQkFEQUZBSEFKQUxBTUFPQVFBUwFVAVcBV4AYwVeAGsFcwV7BYMFiwWSBV4AmgWgBacFXgBeAF4AXgBeAKsFXgCyBbEFugW7BcIFwgXIBcIFwgXQBdQF3AXkBesF8wX7BQMGCwYTBhsGIwYrBjMGOwZeAD8GRwZNBl4AVAZbBl4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAGMGXgBqBnEGXgBeAF4AXgBeAF4AXgBeAF4AXgB5BoAG4wSGBo4GkwaAAIADHgR5AF4AXgBeAJsGgABGA4AAowarBrMGswagALsGwwbLBjAA0wbaBtoG3QbaBtoG2gbaBtoG2gblBusG8wb7BgMHCwcTBxsHCwcjBysHMAc1BzUHOgdCB9oGSgdSB1oHYAfaBloHaAfaBlIH2gbaBtoG2gbaBtoG2gbaBjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHbQdeAF4ANQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQd1B30HNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B4MH2gaKB68EgACAAIAAgACAAIAAgACAAI8HlwdeAJ8HpweAAIAArwe3B14AXgC/B8UHygcwANAH2AfgB4AA6AfwBz4B+AcACFwBCAgPCBcIogEYAR8IJwiAAC8INwg/CCADRwhPCFcIXwhnCEoDGgSAAIAAgABvCHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIhAiLCI4IMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAANQc1BzUHNQc1BzUHNQc1BzUHNQc1B54INQc1B6II2gaqCLIIugiAAIAAvgjGCIAAgACAAIAAgACAAIAAgACAAIAAywiHAYAA0wiAANkI3QjlCO0I9Aj8CIAAgACAAAIJCgkSCRoJIgknCTYHLwk3CZYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiAAIAAAAFAAXgBeAGAAcABeAHwAQACQAKAArQC9AJ4AXgBeAE0A3gBRAN4A7AD8AMwBGgEAAKcBNwEFAUwBXAF4QkhCmEKnArcCgAHHAsABz4LAAcABwAHAAd+C6ABoAG+C/4LAAcABwAHAAc+DF4MAAcAB54M3gweDV4Nng3eDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEeDqABVg6WDqABoQ6gAaABoAHXDvcONw/3DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DncPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB7cPPwlGCU4JMACAAIAAgABWCV4JYQmAAGkJcAl4CXwJgAkwADAAMAAwAIgJgACLCZMJgACZCZ8JowmrCYAAswkwAF4AXgB8AIAAuwkABMMJyQmAAM4JgADVCTAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAqwYWBNkIMAAwADAAMADdCeAJ6AnuCR4E9gkwAP4JBQoNCjAAMACAABUK0wiAAB0KJAosCjQKgAAwADwKQwqAAEsKvQmdCVMKWwowADAAgACAALcEMACAAGMKgABrCjAAMAAwADAAMAAwADAAMAAwADAAMAAeBDAAMAAwADAAMAAwADAAMAAwADAAMAAwAIkEPQFzCnoKiQSCCooKkAqJBJgKoAqkCokEGAGsCrQKvArBCjAAMADJCtEKFQHZCuEK/gHpCvEKMAAwADAAMACAAIwE+QowAIAAPwEBCzAAMAAwADAAMACAAAkLEQswAIAAPwEZCyELgAAOCCkLMAAxCzkLMAAwADAAMAAwADAAXgBeAEELMAAwADAAMAAwADAAMAAwAEkLTQtVC4AAXAtkC4AAiQkwADAAMAAwADAAMAAwADAAbAtxC3kLgAuFC4sLMAAwAJMLlwufCzAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAApwswADAAMACAAIAAgACvC4AAgACAAIAAgACAALcLMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAvwuAAMcLgACAAIAAgACAAIAAyguAAIAAgACAAIAA0QswADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAANkLgACAAIAA4AswADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACJCR4E6AswADAAhwHwC4AA+AsADAgMEAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMACAAIAAGAwdDCUMMAAwAC0MNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQw1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHPQwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADUHNQc1BzUHNQc1BzUHNQc2BzAAMAA5DDUHNQc1BzUHNQc1BzUHNQc1BzUHNQdFDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAATQxSDFoMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAF4AXgBeAF4AXgBeAF4AYgxeAGoMXgBxDHkMfwxeAIUMXgBeAI0MMAAwADAAMAAwAF4AXgCVDJ0MMAAwADAAMABeAF4ApQxeAKsMswy7DF4Awgy9DMoMXgBeAF4AXgBeAF4AXgBeAF4AXgDRDNkMeQBqCeAM3Ax8AOYM7Az0DPgMXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgCgAAANoAAHDQ4NFg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAeDSYNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAC4NMABeAF4ANg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAD4NRg1ODVYNXg1mDTAAbQ0wADAAMAAwADAAMAAwADAA2gbaBtoG2gbaBtoG2gbaBnUNeg3CBYANwgWFDdoGjA3aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gaUDZwNpA2oDdoG2gawDbcNvw3HDdoG2gbPDdYN3A3fDeYN2gbsDfMN2gbaBvoN/g3aBgYODg7aBl4AXgBeABYOXgBeACUG2gYeDl4AJA5eACwO2w3aBtoGMQ45DtoG2gbaBtoGQQ7aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B1EO2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQdZDjUHNQc1BzUHNQc1B2EONQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHaA41BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B3AO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B2EO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBkkOeA6gAKAAoAAwADAAMAAwAKAAoACgAKAAoACgAKAAgA4wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAD//wQABAAEAAQABAAEAAQABAAEAA0AAwABAAEAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAKABMAFwAeABsAGgAeABcAFgASAB4AGwAYAA8AGAAcAEsASwBLAEsASwBLAEsASwBLAEsAGAAYAB4AHgAeABMAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAFgAbABIAHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYADQARAB4ABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkAFgAaABsAGwAbAB4AHQAdAB4ATwAXAB4ADQAeAB4AGgAbAE8ATwAOAFAAHQAdAB0ATwBPABcATwBPAE8AFgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwArAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAAQABAANAA0ASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAUAArACsAKwArACsAKwArACsABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAGgAaAFAAUABQAFAAUABMAB4AGwBQAB4AKwArACsABAAEAAQAKwBQAFAAUABQAFAAUAArACsAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUAArAFAAUAArACsABAArAAQABAAEAAQABAArACsAKwArAAQABAArACsABAAEAAQAKwArACsABAArACsAKwArACsAKwArAFAAUABQAFAAKwBQACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwAEAAQAUABQAFAABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQAKwArAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeABsAKwArACsAKwArACsAKwBQAAQABAAEAAQABAAEACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAKwArACsAKwArACsAKwArAAQABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwAEAFAAKwBQAFAAUABQAFAAUAArACsAKwBQAFAAUAArAFAAUABQAFAAKwArACsAUABQACsAUAArAFAAUAArACsAKwBQAFAAKwArACsAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQAKwArACsABAAEAAQAKwAEAAQABAAEACsAKwBQACsAKwArACsAKwArAAQAKwArACsAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAB4AHgAeAB4AHgAeABsAHgArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArAFAAUABQACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAB4AUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArACsAKwArACsAKwArAFAAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwArAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAKwBcAFwAKwBcACsAKwBcACsAKwArACsAKwArAFwAXABcAFwAKwBcAFwAXABcAFwAXABcACsAXABcAFwAKwBcACsAXAArACsAXABcACsAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgArACoAKgBcACsAKwBcAFwAXABcAFwAKwBcACsAKgAqACoAKgAqACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAFwAXABcAFwAUAAOAA4ADgAOAB4ADgAOAAkADgAOAA0ACQATABMAEwATABMACQAeABMAHgAeAB4ABAAEAB4AHgAeAB4AHgAeAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUAANAAQAHgAEAB4ABAAWABEAFgARAAQABABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAAQABAAEAAQABAANAAQABABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsADQANAB4AHgAeAB4AHgAeAAQAHgAeAB4AHgAeAB4AKwAeAB4ADgAOAA0ADgAeAB4AHgAeAB4ACQAJACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgAeAB4AHgBcAFwAXABcAFwAXAAqACoAKgAqAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAKgAqACoAKgAqACoAKgBcAFwAXAAqACoAKgAqAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAXAAqAEsASwBLAEsASwBLAEsASwBLAEsAKgAqACoAKgAqACoAUABQAFAAUABQAFAAKwBQACsAKwArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQACsAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwAEAAQABAAeAA0AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAEQArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAADQANAA0AUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAA0ADQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoADQANABUAXAANAB4ADQAbAFwAKgArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAB4AHgATABMADQANAA4AHgATABMAHgAEAAQABAAJACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAUABQAFAAUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwAeACsAKwArABMAEwBLAEsASwBLAEsASwBLAEsASwBLAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwBcAFwAXABcAFwAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcACsAKwArACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwAeAB4AXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsABABLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKgAqACoAKgAqACoAKgBcACoAKgAqACoAKgAqACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAUABQAFAAUABQAFAAUAArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4ADQANAA0ADQAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAHgAeAB4AHgBQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwANAA0ADQANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwBQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsABAAEAAQAHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAABABQAFAAUABQAAQABAAEAFAAUAAEAAQABAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAKwBQACsAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAKwArAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAKwAeAB4AHgAeAB4AHgAeAA4AHgArAA0ADQANAA0ADQANAA0ACQANAA0ADQAIAAQACwAEAAQADQAJAA0ADQAMAB0AHQAeABcAFwAWABcAFwAXABYAFwAdAB0AHgAeABQAFAAUAA0AAQABAAQABAAEAAQABAAJABoAGgAaABoAGgAaABoAGgAeABcAFwAdABUAFQAeAB4AHgAeAB4AHgAYABYAEQAVABUAFQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgANAB4ADQANAA0ADQAeAA0ADQANAAcAHgAeAB4AHgArAAQABAAEAAQABAAEAAQABAAEAAQAUABQACsAKwBPAFAAUABQAFAAUAAeAB4AHgAWABEATwBQAE8ATwBPAE8AUABQAFAAUABQAB4AHgAeABYAEQArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGgAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgBQABoAHgAdAB4AUAAeABoAHgAeAB4AHgAeAB4AHgAeAB4ATwAeAFAAGwAeAB4AUABQAFAAUABQAB4AHgAeAB0AHQAeAFAAHgBQAB4AUAAeAFAATwBQAFAAHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AUABQAFAAUABPAE8AUABQAFAAUABQAE8AUABQAE8AUABPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAE8ATwBPAE8ATwBPAE8ATwBPAE8AUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAATwAeAB4AKwArACsAKwAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB0AHQAeAB4AHgAdAB0AHgAeAB0AHgAeAB4AHQAeAB0AGwAbAB4AHQAeAB4AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB0AHgAdAB4AHQAdAB0AHQAdAB0AHgAdAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAdAB0AHQAdAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAlACUAHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB0AHQAeAB4AHgAeAB0AHQAdAB4AHgAdAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB0AHQAeAB4AHQAeAB4AHgAeAB0AHQAeAB4AHgAeACUAJQAdAB0AJQAeACUAJQAlACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHQAdAB0AHgAdACUAHQAdAB4AHQAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHQAdAB0AHQAlAB4AJQAlACUAHQAlACUAHQAdAB0AJQAlAB0AHQAlAB0AHQAlACUAJQAeAB0AHgAeAB4AHgAdAB0AJQAdAB0AHQAdAB0AHQAlACUAJQAlACUAHQAlACUAIAAlAB0AHQAlACUAJQAlACUAJQAlACUAHgAeAB4AJQAlACAAIAAgACAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeABcAFwAXABcAFwAXAB4AEwATACUAHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACUAJQBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwArACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAE8ATwBPAE8ATwBPAE8ATwAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeACsAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUAArACsAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQBQAFAAUABQACsAKwArACsAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAABAAEAAQAKwAEAAQAKwArACsAKwArAAQABAAEAAQAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsABAAEAAQAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsADQANAA0ADQANAA0ADQANAB4AKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAUABQAFAAUABQAA0ADQANAA0ADQANABQAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwANAA0ADQANAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAeAAQABAAEAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLACsADQArAB4AKwArAAQABAAEAAQAUABQAB4AUAArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwAEAAQABAAEAAQABAAEAAQABAAOAA0ADQATABMAHgAeAB4ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0AUABQAFAAUAAEAAQAKwArAAQADQANAB4AUAArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXABcAA0ADQANACoASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUAArACsAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANACsADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEcARwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwAeAAQABAANAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAEAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUAArACsAUAArACsAUABQACsAKwBQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAeAB4ADQANAA0ADQAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAArAAQABAArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAEAAQABAAEAAQABAAEACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAFgAWAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAKwBQACsAKwArACsAKwArAFAAKwArACsAKwBQACsAUAArAFAAKwBQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQACsAUAArAFAAKwBQACsAUABQACsAUAArACsAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAUABQAFAAUAArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUAArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAlACUAJQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeACUAJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeACUAJQAlACUAJQAeACUAJQAlACUAJQAgACAAIAAlACUAIAAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIQAhACEAIQAhACUAJQAgACAAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAIAAlACUAJQAlACAAJQAgACAAIAAgACAAIAAgACAAIAAlACUAJQAgACUAJQAlACUAIAAgACAAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeACUAHgAlAB4AJQAlACUAJQAlACAAJQAlACUAJQAeACUAHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAIAAgACAAIAAgAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFwAXABcAFQAVABUAHgAeAB4AHgAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAlACAAIAAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsA"},2110:function(t,e,r){"use strict";var n=r(8309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(t){return n.isMemo(t)?a:s[t.$$typeof]||i}s[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[n.Memo]=a;var u=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,A=Object.prototype;t.exports=function t(e,r,n){if("string"!==typeof r){if(A){var i=p(r);i&&i!==A&&t(e,i,n)}var a=c(r);h&&(a=a.concat(h(r)));for(var s=l(e),d=l(r),g=0;g<a.length;++g){var y=a[g];if(!o[y]&&(!n||!n[y])&&(!d||!d[y])&&(!s||!s[y])){var v=f(r,y);try{u(e,y,v)}catch(m){}}}}return e}},746:function(t,e){"use strict";var r="function"===typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,c=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,f=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,A=r?Symbol.for("react.suspense_list"):60120,d=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,v=r?Symbol.for("react.fundamental"):60117,m=r?Symbol.for("react.responder"):60118,b=r?Symbol.for("react.scope"):60119;function _(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case n:switch(t=t.type){case c:case h:case o:case s:case a:case p:return t;default:switch(t=t&&t.$$typeof){case u:case f:case g:case d:case l:return t;default:return e}}case i:return e}}}function w(t){return _(t)===h}e.AsyncMode=c,e.ConcurrentMode=h,e.ContextConsumer=u,e.ContextProvider=l,e.Element=n,e.ForwardRef=f,e.Fragment=o,e.Lazy=g,e.Memo=d,e.Portal=i,e.Profiler=s,e.StrictMode=a,e.Suspense=p,e.isAsyncMode=function(t){return w(t)||_(t)===c},e.isConcurrentMode=w,e.isContextConsumer=function(t){return _(t)===u},e.isContextProvider=function(t){return _(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===n},e.isForwardRef=function(t){return _(t)===f},e.isFragment=function(t){return _(t)===o},e.isLazy=function(t){return _(t)===g},e.isMemo=function(t){return _(t)===d},e.isPortal=function(t){return _(t)===i},e.isProfiler=function(t){return _(t)===s},e.isStrictMode=function(t){return _(t)===a},e.isSuspense=function(t){return _(t)===p},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===o||t===h||t===s||t===a||t===p||t===A||"object"===typeof t&&null!==t&&(t.$$typeof===g||t.$$typeof===d||t.$$typeof===l||t.$$typeof===u||t.$$typeof===f||t.$$typeof===v||t.$$typeof===m||t.$$typeof===b||t.$$typeof===y)},e.typeOf=_},8309:function(t,e,r){"use strict";t.exports=r(746)},8577:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=/([+-]?\d*\.?\d+)(deg|grad|rad|turn)/i;e.parseAngle=function(t){var e=t.match(r);if(e){var n=parseFloat(e[1]);switch(e[2].toLowerCase()){case"deg":return Math.PI*n/180;case"grad":return Math.PI/200*n;case"rad":return n;case"turn":return 2*Math.PI*n}}return null}},3997:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseBoundCurves=e.calculatePaddingBoxPath=e.calculateBorderBoxPath=e.parsePathForBorder=e.parseDocumentSize=e.calculateContentBox=e.calculatePaddingBox=e.parseBounds=e.Bounds=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=a(r(5941)),o=a(r(7412));function a(t){return t&&t.__esModule?t:{default:t}}var s=e.Bounds=function(){function t(e,r,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.left=e,this.top=r,this.width=n,this.height=i}return n(t,null,[{key:"fromClientRect",value:function(e,r,n){return new t(e.left+r,e.top+n,e.width,e.height)}}]),t}(),l=(e.parseBounds=function(t,e,r){return s.fromClientRect(t.getBoundingClientRect(),e,r)},e.calculatePaddingBox=function(t,e){return new s(t.left+e[3].borderWidth,t.top+e[0].borderWidth,t.width-(e[1].borderWidth+e[3].borderWidth),t.height-(e[0].borderWidth+e[2].borderWidth))},e.calculateContentBox=function(t,e,r){var n=e[0].value,i=e[1].value,o=e[2].value,a=e[3].value;return new s(t.left+a+r[3].borderWidth,t.top+n+r[0].borderWidth,t.width-(r[1].borderWidth+r[3].borderWidth+a+i),t.height-(r[0].borderWidth+r[2].borderWidth+n+o))},e.parseDocumentSize=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),i=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new s(0,0,n,i)},e.parsePathForBorder=function(t,e){switch(e){case 0:return l(t.topLeftOuter,t.topLeftInner,t.topRightOuter,t.topRightInner);case 1:return l(t.topRightOuter,t.topRightInner,t.bottomRightOuter,t.bottomRightInner);case 2:return l(t.bottomRightOuter,t.bottomRightInner,t.bottomLeftOuter,t.bottomLeftInner);default:return l(t.bottomLeftOuter,t.bottomLeftInner,t.topLeftOuter,t.topLeftInner)}},function(t,e,r,n){var i=[];return t instanceof o.default?i.push(t.subdivide(.5,!1)):i.push(t),r instanceof o.default?i.push(r.subdivide(.5,!0)):i.push(r),n instanceof o.default?i.push(n.subdivide(.5,!0).reverse()):i.push(n),e instanceof o.default?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i}),u=(e.calculateBorderBoxPath=function(t){return[t.topLeftOuter,t.topRightOuter,t.bottomRightOuter,t.bottomLeftOuter]},e.calculatePaddingBoxPath=function(t){return[t.topLeftInner,t.topRightInner,t.bottomRightInner,t.bottomLeftInner]},e.parseBoundCurves=function(t,e,r){var n=r[u.TOP_LEFT][0].getAbsoluteValue(t.width),o=r[u.TOP_LEFT][1].getAbsoluteValue(t.height),a=r[u.TOP_RIGHT][0].getAbsoluteValue(t.width),s=r[u.TOP_RIGHT][1].getAbsoluteValue(t.height),l=r[u.BOTTOM_RIGHT][0].getAbsoluteValue(t.width),h=r[u.BOTTOM_RIGHT][1].getAbsoluteValue(t.height),f=r[u.BOTTOM_LEFT][0].getAbsoluteValue(t.width),p=r[u.BOTTOM_LEFT][1].getAbsoluteValue(t.height),A=[];A.push((n+a)/t.width),A.push((f+l)/t.width),A.push((o+p)/t.height),A.push((s+h)/t.height);var d=Math.max.apply(Math,A);d>1&&(n/=d,o/=d,a/=d,s/=d,l/=d,h/=d,f/=d,p/=d);var g=t.width-a,y=t.height-h,v=t.width-l,m=t.height-p;return{topLeftOuter:n>0||o>0?c(t.left,t.top,n,o,u.TOP_LEFT):new i.default(t.left,t.top),topLeftInner:n>0||o>0?c(t.left+e[3].borderWidth,t.top+e[0].borderWidth,Math.max(0,n-e[3].borderWidth),Math.max(0,o-e[0].borderWidth),u.TOP_LEFT):new i.default(t.left+e[3].borderWidth,t.top+e[0].borderWidth),topRightOuter:a>0||s>0?c(t.left+g,t.top,a,s,u.TOP_RIGHT):new i.default(t.left+t.width,t.top),topRightInner:a>0||s>0?c(t.left+Math.min(g,t.width+e[3].borderWidth),t.top+e[0].borderWidth,g>t.width+e[3].borderWidth?0:a-e[3].borderWidth,s-e[0].borderWidth,u.TOP_RIGHT):new i.default(t.left+t.width-e[1].borderWidth,t.top+e[0].borderWidth),bottomRightOuter:l>0||h>0?c(t.left+v,t.top+y,l,h,u.BOTTOM_RIGHT):new i.default(t.left+t.width,t.top+t.height),bottomRightInner:l>0||h>0?c(t.left+Math.min(v,t.width-e[3].borderWidth),t.top+Math.min(y,t.height+e[0].borderWidth),Math.max(0,l-e[1].borderWidth),h-e[2].borderWidth,u.BOTTOM_RIGHT):new i.default(t.left+t.width-e[1].borderWidth,t.top+t.height-e[2].borderWidth),bottomLeftOuter:f>0||p>0?c(t.left,t.top+m,f,p,u.BOTTOM_LEFT):new i.default(t.left,t.top+t.height),bottomLeftInner:f>0||p>0?c(t.left+e[3].borderWidth,t.top+m,Math.max(0,f-e[3].borderWidth),p-e[2].borderWidth,u.BOTTOM_LEFT):new i.default(t.left+e[3].borderWidth,t.top+t.height-e[2].borderWidth)}},{TOP_LEFT:0,TOP_RIGHT:1,BOTTOM_RIGHT:2,BOTTOM_LEFT:3}),c=function(t,e,r,n,a){var s=(Math.sqrt(2)-1)/3*4,l=r*s,c=n*s,h=t+r,f=e+n;switch(a){case u.TOP_LEFT:return new o.default(new i.default(t,f),new i.default(t,f-c),new i.default(h-l,e),new i.default(h,e));case u.TOP_RIGHT:return new o.default(new i.default(t,e),new i.default(t+l,e),new i.default(h,f-c),new i.default(h,f));case u.BOTTOM_RIGHT:return new o.default(new i.default(h,e),new i.default(h,e+c),new i.default(t+l,f),new i.default(t,f));case u.BOTTOM_LEFT:default:return new o.default(new i.default(h,f),new i.default(h-l,f),new i.default(t,e+c),new i.default(t,e))}}},4326:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cloneWindow=e.DocumentCloner=void 0;var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(3997),a=r(7122),s=f(r(3557)),l=r(7989),u=r(6250),c=f(r(3374)),h=r(1523);function f(t){return t&&t.__esModule?t:{default:t}}var p="data-html2canvas-ignore",A=e.DocumentCloner=function(){function t(e,r,n,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.referenceElement=e,this.scrolledElements=[],this.copyStyles=i,this.inlineImages=i,this.logger=n,this.options=r,this.renderer=o,this.resourceLoader=new s.default(r,n,window),this.pseudoContentData={counters:{},quoteDepth:0},this.documentElement=this.cloneNode(e.ownerDocument.documentElement)}return i(t,[{key:"inlineAllImages",value:function(t){var e=this;if(this.inlineImages&&t){var r=t.style;Promise.all((0,u.parseBackgroundImage)(r.backgroundImage).map((function(t){return"url"===t.method?e.resourceLoader.inlineImage(t.args[0]).then((function(t){return t&&"string"===typeof t.src?'url("'+t.src+'")':"none"})).catch((function(t){0})):Promise.resolve(""+t.prefix+t.method+"("+t.args.join(",")+")")}))).then((function(t){t.length>1&&(r.backgroundColor=""),r.backgroundImage=t.join(",")})),t instanceof HTMLImageElement&&this.resourceLoader.inlineImage(t.src).then((function(e){if(e&&t instanceof HTMLImageElement&&t.parentNode){var r=t.parentNode,n=(0,l.copyCSSStyles)(t.style,e.cloneNode(!1));r.replaceChild(n,t)}})).catch((function(t){0}))}}},{key:"inlineFonts",value:function(t){var e=this;return Promise.all(Array.from(t.styleSheets).map((function(e){return e.href?fetch(e.href).then((function(t){return t.text()})).then((function(t){return g(t,e.href)})).catch((function(t){return[]})):d(e,t)}))).then((function(t){return t.reduce((function(t,e){return t.concat(e)}),[])})).then((function(t){return Promise.all(t.map((function(t){return fetch(t.formats[0].src).then((function(t){return t.blob()})).then((function(t){return new Promise((function(e,r){var n=new FileReader;n.onerror=r,n.onload=function(){var t=n.result;e(t)},n.readAsDataURL(t)}))})).then((function(e){return t.fontFace.setProperty("src",'url("'+e+'")'),"@font-face {"+t.fontFace.cssText+" "}))})))})).then((function(r){var n=t.createElement("style");n.textContent=r.join("\n"),e.documentElement.appendChild(n)}))}},{key:"createElementClone",value:function(t){var e=this;if(this.copyStyles&&t instanceof HTMLCanvasElement){var r=t.ownerDocument.createElement("img");try{return r.src=t.toDataURL(),r}catch(p){0}}if(t instanceof HTMLIFrameElement){var n=t.cloneNode(!1),i=S();n.setAttribute("data-html2canvas-internal-iframe-key",i);var a=(0,o.parseBounds)(t,0,0),s=a.width,u=a.height;return this.resourceLoader.cache[i]=T(t,this.options).then((function(t){return e.renderer(t,{async:e.options.async,allowTaint:e.options.allowTaint,backgroundColor:"#ffffff",canvas:null,imageTimeout:e.options.imageTimeout,logging:e.options.logging,proxy:e.options.proxy,removeContainer:e.options.removeContainer,scale:e.options.scale,foreignObjectRendering:e.options.foreignObjectRendering,useCORS:e.options.useCORS,target:new c.default,width:s,height:u,x:0,y:0,windowWidth:t.ownerDocument.defaultView.innerWidth,windowHeight:t.ownerDocument.defaultView.innerHeight,scrollX:t.ownerDocument.defaultView.pageXOffset,scrollY:t.ownerDocument.defaultView.pageYOffset},e.logger.child(i))})).then((function(e){return new Promise((function(r,i){var o=document.createElement("img");o.onload=function(){return r(e)},o.onerror=i,o.src=e.toDataURL(),n.parentNode&&n.parentNode.replaceChild((0,l.copyCSSStyles)(t.ownerDocument.defaultView.getComputedStyle(t),o),n)}))})),n}if(t instanceof HTMLStyleElement&&t.sheet&&t.sheet.cssRules){var h=[].slice.call(t.sheet.cssRules,0).reduce((function(t,r){try{return r&&r.cssText?t+r.cssText:t}catch(n){return e.logger.log("Unable to access cssText property",r.name),t}}),""),f=t.cloneNode(!1);return f.textContent=h,f}return t.cloneNode(!1)}},{key:"cloneNode",value:function(t){var e=t.nodeType===Node.TEXT_NODE?document.createTextNode(t.nodeValue):this.createElementClone(t),r=t.ownerDocument.defaultView,n=t instanceof r.HTMLElement?r.getComputedStyle(t):null,i=t instanceof r.HTMLElement?r.getComputedStyle(t,":before"):null,o=t instanceof r.HTMLElement?r.getComputedStyle(t,":after"):null;this.referenceElement===t&&e instanceof r.HTMLElement&&(this.clonedReferenceElement=e),e instanceof r.HTMLBodyElement&&E(e);for(var a=(0,h.parseCounterReset)(n,this.pseudoContentData),s=(0,h.resolvePseudoContent)(t,i,this.pseudoContentData),u=t.firstChild;u;u=u.nextSibling)u.nodeType===Node.ELEMENT_NODE&&("SCRIPT"===u.nodeName||u.hasAttribute(p)||"function"===typeof this.options.ignoreElements&&this.options.ignoreElements(u))||this.copyStyles&&"STYLE"===u.nodeName||e.appendChild(this.cloneNode(u));var c=(0,h.resolvePseudoContent)(t,o,this.pseudoContentData);if((0,h.popCounters)(a,this.pseudoContentData),t instanceof r.HTMLElement&&e instanceof r.HTMLElement)switch(i&&this.inlineAllImages(v(t,e,i,s,m)),o&&this.inlineAllImages(v(t,e,o,c,b)),!n||!this.copyStyles||t instanceof HTMLIFrameElement||(0,l.copyCSSStyles)(n,e),this.inlineAllImages(e),0===t.scrollTop&&0===t.scrollLeft||this.scrolledElements.push([e,t.scrollLeft,t.scrollTop]),t.nodeName){case"CANVAS":this.copyStyles||y(t,e);break;case"TEXTAREA":case"SELECT":e.value=t.value}return e}}]),t}(),d=function(t,e){return(t.cssRules?Array.from(t.cssRules):[]).filter((function(t){return t.type===CSSRule.FONT_FACE_RULE})).map((function(t){for(var r=(0,u.parseBackgroundImage)(t.style.getPropertyValue("src")),n=[],i=0;i<r.length;i++)if("url"===r[i].method&&r[i+1]&&"format"===r[i+1].method){var o=e.createElement("a");o.href=r[i].args[0],e.body&&e.body.appendChild(o);var a={src:o.href,format:r[i+1].args[0]};n.push(a)}return{formats:n.filter((function(t){return/^woff/i.test(t.format)})),fontFace:t.style}})).filter((function(t){return t.formats.length}))},g=function(t,e){var r=document.implementation.createHTMLDocument(""),n=document.createElement("base");n.href=e;var i=document.createElement("style");return i.textContent=t,r.head&&r.head.appendChild(n),r.body&&r.body.appendChild(i),i.sheet?d(i.sheet,r):[]},y=function(t,e){try{if(e){e.width=t.width,e.height=t.height;var r=t.getContext("2d"),n=e.getContext("2d");r?n.putImageData(r.getImageData(0,0,t.width,t.height),0,0):n.drawImage(t,0,0)}}catch(i){}},v=function(t,e,r,n,i){if(r&&r.content&&"none"!==r.content&&"-moz-alt-content"!==r.content&&"none"!==r.display){var o=e.ownerDocument.createElement("html2canvaspseudoelement");if((0,l.copyCSSStyles)(r,o),n)for(var a=n.length,s=0;s<a;s++){var c=n[s];switch(c.type){case h.PSEUDO_CONTENT_ITEM_TYPE.IMAGE:var f=e.ownerDocument.createElement("img");f.src=(0,u.parseBackgroundImage)("url("+c.value+")")[0].args[0],f.style.opacity="1",o.appendChild(f);break;case h.PSEUDO_CONTENT_ITEM_TYPE.TEXT:o.appendChild(e.ownerDocument.createTextNode(c.value))}}return o.className=_+" "+w,e.className+=i===m?" "+_:" "+w,i===m?e.insertBefore(o,e.firstChild):e.appendChild(o),o}},m=":before",b=":after",_="___html2canvas___pseudoelement_before",w="___html2canvas___pseudoelement_after",x='{\n    content: "" !important;\n    display: none !important;\n}',E=function(t){B(t,"."+_+m+x+"\n         ."+w+b+x)},B=function(t,e){var r=t.ownerDocument.createElement("style");r.innerHTML=e,t.appendChild(r)},C=function(t){var e=n(t,3),r=e[0],i=e[1],o=e[2];r.scrollLeft=i,r.scrollTop=o},S=function(){return Math.ceil(Date.now()+1e7*Math.random()).toString(16)},k=/^data:text\/(.+);(base64)?,(.*)$/i,T=function(t,e){try{return Promise.resolve(t.contentWindow.document.documentElement)}catch(r){return e.proxy?(0,a.Proxy)(t.src,e).then((function(t){var e=t.match(k);return e?"base64"===e[2]?window.atob(decodeURIComponent(e[3])):decodeURIComponent(e[3]):Promise.reject()})).then((function(e){return N(t.ownerDocument,(0,o.parseBounds)(t,0,0)).then((function(t){var r=t.contentWindow.document;r.open(),r.write(e);var n=L(t).then((function(){return r.documentElement}));return r.close(),n}))})):Promise.reject()}},N=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(p,"true"),t.body?(t.body.appendChild(r),Promise.resolve(r)):Promise.reject("")},L=function(t){var e=t.contentWindow,r=e.document;return new Promise((function(n,i){e.onload=t.onload=r.onreadystatechange=function(){var e=setInterval((function(){r.body.childNodes.length>0&&"complete"===r.readyState&&(clearInterval(e),n(t))}),50)}}))},I=(e.cloneWindow=function(t,e,r,n,i,o){var a=new A(r,n,i,!1,o),s=t.defaultView.pageXOffset,l=t.defaultView.pageYOffset;return N(t,e).then((function(i){var o=i.contentWindow,u=o.document,c=L(i).then((function(){a.scrolledElements.forEach(C),o.scrollTo(e.left,e.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||o.scrollY===e.top&&o.scrollX===e.left||(u.documentElement.style.top=-e.top+"px",u.documentElement.style.left=-e.left+"px",u.documentElement.style.position="absolute");var r=Promise.resolve([i,a.clonedReferenceElement,a.resourceLoader]),s=n.onclone;return a.clonedReferenceElement instanceof o.HTMLElement||a.clonedReferenceElement instanceof t.defaultView.HTMLElement||a.clonedReferenceElement instanceof HTMLElement?"function"===typeof s?Promise.resolve().then((function(){return s(u)})).then((function(){return r})):r:Promise.reject("")}));return u.open(),u.write(I(document.doctype)+"<html></html>"),function(t,e,r){!t.defaultView||e===t.defaultView.pageXOffset&&r===t.defaultView.pageYOffset||t.defaultView.scrollTo(e,r)}(r.ownerDocument,s,l),u.replaceChild(u.adoptNode(a.documentElement),u.documentElement),u.close(),c}))},function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e})},9925:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();var i=/^#([a-f0-9]{3})$/i,o=/^#([a-f0-9]{6})$/i,a=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/,s=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/,l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n,l=Array.isArray(e)?(n=e,[Math.min(n[0],255),Math.min(n[1],255),Math.min(n[2],255),n.length>3?n[3]:null]):function(t){var e=t.match(i);return!!e&&[parseInt(e[1][0]+e[1][0],16),parseInt(e[1][1]+e[1][1],16),parseInt(e[1][2]+e[1][2],16),null]}(e)||function(t){var e=t.match(a);return!!e&&[Number(e[1]),Number(e[2]),Number(e[3]),null]}(e)||function(t){var e=t.match(s);return!!(e&&e.length>4)&&[Number(e[1]),Number(e[2]),Number(e[3]),Number(e[4])]}(e)||(u[e.toLowerCase()]||!1)||function(t){var e=t.match(o);return!!e&&[parseInt(e[1].substring(0,2),16),parseInt(e[1].substring(2,4),16),parseInt(e[1].substring(4,6),16),null]}(e)||[0,0,0,null],c=r(l,4),h=c[0],f=c[1],p=c[2],A=c[3];this.r=h,this.g=f,this.b=p,this.a=A}return n(t,[{key:"isTransparent",value:function(){return 0===this.a}},{key:"toString",value:function(){return null!==this.a&&1!==this.a?"rgba("+this.r+","+this.g+","+this.b+","+this.a+")":"rgb("+this.r+","+this.g+","+this.b+")"}}]),t}();e.default=l;var u={transparent:[0,0,0,0],aliceblue:[240,248,255,null],antiquewhite:[250,235,215,null],aqua:[0,255,255,null],aquamarine:[127,255,212,null],azure:[240,255,255,null],beige:[245,245,220,null],bisque:[255,228,196,null],black:[0,0,0,null],blanchedalmond:[255,235,205,null],blue:[0,0,255,null],blueviolet:[138,43,226,null],brown:[165,42,42,null],burlywood:[222,184,135,null],cadetblue:[95,158,160,null],chartreuse:[127,255,0,null],chocolate:[210,105,30,null],coral:[255,127,80,null],cornflowerblue:[100,149,237,null],cornsilk:[255,248,220,null],crimson:[220,20,60,null],cyan:[0,255,255,null],darkblue:[0,0,139,null],darkcyan:[0,139,139,null],darkgoldenrod:[184,134,11,null],darkgray:[169,169,169,null],darkgreen:[0,100,0,null],darkgrey:[169,169,169,null],darkkhaki:[189,183,107,null],darkmagenta:[139,0,139,null],darkolivegreen:[85,107,47,null],darkorange:[255,140,0,null],darkorchid:[153,50,204,null],darkred:[139,0,0,null],darksalmon:[233,150,122,null],darkseagreen:[143,188,143,null],darkslateblue:[72,61,139,null],darkslategray:[47,79,79,null],darkslategrey:[47,79,79,null],darkturquoise:[0,206,209,null],darkviolet:[148,0,211,null],deeppink:[255,20,147,null],deepskyblue:[0,191,255,null],dimgray:[105,105,105,null],dimgrey:[105,105,105,null],dodgerblue:[30,144,255,null],firebrick:[178,34,34,null],floralwhite:[255,250,240,null],forestgreen:[34,139,34,null],fuchsia:[255,0,255,null],gainsboro:[220,220,220,null],ghostwhite:[248,248,255,null],gold:[255,215,0,null],goldenrod:[218,165,32,null],gray:[128,128,128,null],green:[0,128,0,null],greenyellow:[173,255,47,null],grey:[128,128,128,null],honeydew:[240,255,240,null],hotpink:[255,105,180,null],indianred:[205,92,92,null],indigo:[75,0,130,null],ivory:[255,255,240,null],khaki:[240,230,140,null],lavender:[230,230,250,null],lavenderblush:[255,240,245,null],lawngreen:[124,252,0,null],lemonchiffon:[255,250,205,null],lightblue:[173,216,230,null],lightcoral:[240,128,128,null],lightcyan:[224,255,255,null],lightgoldenrodyellow:[250,250,210,null],lightgray:[211,211,211,null],lightgreen:[144,238,144,null],lightgrey:[211,211,211,null],lightpink:[255,182,193,null],lightsalmon:[255,160,122,null],lightseagreen:[32,178,170,null],lightskyblue:[135,206,250,null],lightslategray:[119,136,153,null],lightslategrey:[119,136,153,null],lightsteelblue:[176,196,222,null],lightyellow:[255,255,224,null],lime:[0,255,0,null],limegreen:[50,205,50,null],linen:[250,240,230,null],magenta:[255,0,255,null],maroon:[128,0,0,null],mediumaquamarine:[102,205,170,null],mediumblue:[0,0,205,null],mediumorchid:[186,85,211,null],mediumpurple:[147,112,219,null],mediumseagreen:[60,179,113,null],mediumslateblue:[123,104,238,null],mediumspringgreen:[0,250,154,null],mediumturquoise:[72,209,204,null],mediumvioletred:[199,21,133,null],midnightblue:[25,25,112,null],mintcream:[245,255,250,null],mistyrose:[255,228,225,null],moccasin:[255,228,181,null],navajowhite:[255,222,173,null],navy:[0,0,128,null],oldlace:[253,245,230,null],olive:[128,128,0,null],olivedrab:[107,142,35,null],orange:[255,165,0,null],orangered:[255,69,0,null],orchid:[218,112,214,null],palegoldenrod:[238,232,170,null],palegreen:[152,251,152,null],paleturquoise:[175,238,238,null],palevioletred:[219,112,147,null],papayawhip:[255,239,213,null],peachpuff:[255,218,185,null],peru:[205,133,63,null],pink:[255,192,203,null],plum:[221,160,221,null],powderblue:[176,224,230,null],purple:[128,0,128,null],rebeccapurple:[102,51,153,null],red:[255,0,0,null],rosybrown:[188,143,143,null],royalblue:[65,105,225,null],saddlebrown:[139,69,19,null],salmon:[250,128,114,null],sandybrown:[244,164,96,null],seagreen:[46,139,87,null],seashell:[255,245,238,null],sienna:[160,82,45,null],silver:[192,192,192,null],skyblue:[135,206,235,null],slateblue:[106,90,205,null],slategray:[112,128,144,null],slategrey:[112,128,144,null],snow:[255,250,250,null],springgreen:[0,255,127,null],steelblue:[70,130,180,null],tan:[210,180,140,null],teal:[0,128,128,null],thistle:[216,191,216,null],tomato:[255,99,71,null],turquoise:[64,224,208,null],violet:[238,130,238,null],wheat:[245,222,179,null],white:[255,255,255,null],whitesmoke:[245,245,245,null],yellow:[255,255,0,null],yellowgreen:[154,205,50,null]};e.TRANSPARENT=new l([0,0,0,0])},128:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3983),i=function(t){return 0===t[0]&&255===t[1]&&0===t[2]&&255===t[3]},o={get SUPPORT_RANGE_BOUNDS(){var t=function(t){if(t.createRange){var e=t.createRange();if(e.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height="123px",r.style.display="block",t.body.appendChild(r),e.selectNode(r);var n=e.getBoundingClientRect(),i=Math.round(n.height);if(t.body.removeChild(r),123===i)return!0}}return!1}(document);return Object.defineProperty(o,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch(i){return!1}return!0}(document);return Object.defineProperty(o,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_BASE64_DRAWING(){return function(t){var e=function(t,e){var r=new Image,n=t.createElement("canvas"),i=n.getContext("2d");return new Promise((function(t){r.src=e;var o=function(){try{i.drawImage(r,0,0),n.toDataURL()}catch(e){return t(!1)}return t(!0)};r.onload=o,r.onerror=function(){return t(!1)},!0===r.complete&&setTimeout((function(){o()}),500)}))}(document,t);return Object.defineProperty(o,"SUPPORT_BASE64_DRAWING",{value:function(){return e}}),e}},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t="function"===typeof Array.from&&"function"===typeof window.fetch?function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var o=e.getContext("2d");o.fillStyle="rgb(0, 255, 0)",o.fillRect(0,0,r,r);var a=new Image,s=e.toDataURL();a.src=s;var l=(0,n.createForeignObjectSVG)(r,r,0,0,a);return o.fillStyle="red",o.fillRect(0,0,r,r),(0,n.loadSerializedSVG)(l).then((function(e){o.drawImage(e,0,0);var a=o.getImageData(0,0,r,r).data;o.fillStyle="red",o.fillRect(0,0,r,r);var l=t.createElement("div");return l.style.backgroundImage="url("+s+")",l.style.height="100px",i(a)?(0,n.loadSerializedSVG)((0,n.createForeignObjectSVG)(r,r,0,0,l)):Promise.reject(!1)})).then((function(t){return o.drawImage(t,0,0),i(o.getImageData(0,0,r,r).data)})).catch((function(t){return!1}))}(document):Promise.resolve(!1);return Object.defineProperty(o,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t="undefined"!==typeof(new Image).crossOrigin;return Object.defineProperty(o,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t="string"===typeof(new XMLHttpRequest).responseType;return Object.defineProperty(o,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(o,"SUPPORT_CORS_XHR",{value:t}),t}};e.default=o},3093:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FontMetrics=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(7989);var o="Hidden Text";e.FontMetrics=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._data={},this._document=e}return n(t,[{key:"_parseMetrics",value:function(t){var e=this._document.createElement("div"),r=this._document.createElement("img"),n=this._document.createElement("span"),a=this._document.body;if(!a)throw new Error("");e.style.visibility="hidden",e.style.fontFamily=t.fontFamily,e.style.fontSize=t.fontSize,e.style.margin="0",e.style.padding="0",a.appendChild(e),r.src=i.SMALL_IMAGE,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",n.style.fontFamily=t.fontFamily,n.style.fontSize=t.fontSize,n.style.margin="0",n.style.padding="0",n.appendChild(this._document.createTextNode(o)),e.appendChild(n),e.appendChild(r);var s=r.offsetTop-n.offsetTop+2;e.removeChild(n),e.appendChild(this._document.createTextNode(o)),e.style.lineHeight="normal",r.style.verticalAlign="super";var l=r.offsetTop-e.offsetTop+2;return a.removeChild(e),{baseline:s,middle:l}}},{key:"getMetrics",value:function(t){var e=t.fontFamily+" "+t.fontSize;return void 0===this._data[e]&&(this._data[e]=this._parseMetrics(t)),this._data[e]}}]),t}()},6671:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.transformWebkitRadialGradientArgs=e.parseGradient=e.RadialGradient=e.LinearGradient=e.RADIAL_GRADIENT_SHAPE=e.GRADIENT_TYPE=void 0;var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=(u(r(1394)),r(8577)),o=u(r(9925)),a=r(4721),s=u(a),l=r(7989);function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var h=/^(to )?(left|top|right|bottom)( (left|top|right|bottom))?$/i,f=/^([+-]?\d*\.?\d+)% ([+-]?\d*\.?\d+)%$/i,p=/(px)|%|( 0)$/i,A=/^(from|to|color-stop)\((?:([\d.]+)(%)?,\s*)?(.+?)\)$/i,d=/^\s*(circle|ellipse)?\s*((?:([\d.]+)(px|r?em|%)\s*(?:([\d.]+)(px|r?em|%))?)|closest-side|closest-corner|farthest-side|farthest-corner)?\s*(?:at\s*(?:(left|center|right)|([\d.]+)(px|r?em|%))\s+(?:(top|center|bottom)|([\d.]+)(px|r?em|%)))?(?:\s|$)/i,g=e.GRADIENT_TYPE={LINEAR_GRADIENT:0,RADIAL_GRADIENT:1},y=e.RADIAL_GRADIENT_SHAPE={CIRCLE:0,ELLIPSE:1},v={left:new s.default("0%"),top:new s.default("0%"),center:new s.default("50%"),right:new s.default("100%"),bottom:new s.default("100%")},m=e.LinearGradient=function t(e,r){c(this,t),this.type=g.LINEAR_GRADIENT,this.colorStops=e,this.direction=r},b=e.RadialGradient=function t(e,r,n,i){c(this,t),this.type=g.RADIAL_GRADIENT,this.colorStops=e,this.shape=r,this.center=n,this.radius=i},_=(e.parseGradient=function(t,e,r){var n=e.args,i=e.method,o=e.prefix;return"linear-gradient"===i?w(n,r,!!o):"gradient"===i&&"linear"===n[0]?w(["to bottom"].concat(L(n.slice(3))),r,!!o):"radial-gradient"===i?x(t,"-webkit-"===o?N(n):n,r):"gradient"===i&&"radial"===n[0]?x(t,L(N(n.slice(1))),r):void 0},function(t,e,r){for(var n=[],i=e;i<t.length;i++){var a=t[i],l=p.test(a),u=a.lastIndexOf(" "),c=new o.default(l?a.substring(0,u):a),h=l?new s.default(a.substring(u+1)):i===e?new s.default("0%"):i===t.length-1?new s.default("100%"):null;n.push({color:c,stop:h})}for(var f=n.map((function(t){var e=t.color,n=t.stop;return{color:e,stop:0===r?0:n?n.getAbsoluteValue(r)/r:null}})),A=f[0].stop,d=0;d<f.length;d++)if(null!==A){var g=f[d].stop;if(null===g){for(var y=d;null===f[y].stop;)y++;for(var v=y-d+1,m=(f[y].stop-A)/v;d<y;d++)A=f[d].stop=A+m}else A=g}return f}),w=function(t,e,r){var n=(0,i.parseAngle)(t[0]),o=h.test(t[0]),a=o||null!==n||f.test(t[0]),s=a?null!==n?E(r?n-.5*Math.PI:n,e):o?C(t[0],e):S(t[0],e):E(Math.PI,e),u=a?1:0,c=Math.min((0,l.distance)(Math.abs(s.x0)+Math.abs(s.x1),Math.abs(s.y0)+Math.abs(s.y1)),2*e.width,2*e.height);return new m(_(t,u,c),s)},x=function(t,e,r){var n=e[0].match(d),i=n&&("circle"===n[1]||void 0!==n[3]&&void 0===n[5])?y.CIRCLE:y.ELLIPSE,o={},s={};n&&(void 0!==n[3]&&(o.x=(0,a.calculateLengthFromValueWithUnit)(t,n[3],n[4]).getAbsoluteValue(r.width)),void 0!==n[5]&&(o.y=(0,a.calculateLengthFromValueWithUnit)(t,n[5],n[6]).getAbsoluteValue(r.height)),n[7]?s.x=v[n[7].toLowerCase()]:void 0!==n[8]&&(s.x=(0,a.calculateLengthFromValueWithUnit)(t,n[8],n[9])),n[10]?s.y=v[n[10].toLowerCase()]:void 0!==n[11]&&(s.y=(0,a.calculateLengthFromValueWithUnit)(t,n[11],n[12])));var l={x:void 0===s.x?r.width/2:s.x.getAbsoluteValue(r.width),y:void 0===s.y?r.height/2:s.y.getAbsoluteValue(r.height)},u=T(n&&n[2]||"farthest-corner",i,l,o,r);return new b(_(e,n?1:0,Math.min(u.x,u.y)),i,l,u)},E=function(t,e){var r=e.width,n=e.height,i=.5*r,o=.5*n,a=(Math.abs(r*Math.sin(t))+Math.abs(n*Math.cos(t)))/2,s=i+Math.sin(t)*a,l=o-Math.cos(t)*a;return{x0:s,x1:r-s,y0:l,y1:n-l}},B=function(t){return Math.acos(t.width/2/((0,l.distance)(t.width,t.height)/2))},C=function(t,e){switch(t){case"bottom":case"to top":return E(0,e);case"left":case"to right":return E(Math.PI/2,e);case"right":case"to left":return E(3*Math.PI/2,e);case"top right":case"right top":case"to bottom left":case"to left bottom":return E(Math.PI+B(e),e);case"top left":case"left top":case"to bottom right":case"to right bottom":return E(Math.PI-B(e),e);case"bottom left":case"left bottom":case"to top right":case"to right top":return E(B(e),e);case"bottom right":case"right bottom":case"to top left":case"to left top":return E(2*Math.PI-B(e),e);default:return E(Math.PI,e)}},S=function(t,e){var r=t.split(" ").map(parseFloat),i=n(r,2),o=i[0],a=i[1],s=o/100*e.width/(a/100*e.height);return E(Math.atan(isNaN(s)?1:s)+Math.PI/2,e)},k=function(t,e,r,n){return[{x:0,y:0},{x:0,y:t.height},{x:t.width,y:0},{x:t.width,y:t.height}].reduce((function(t,i){var o=(0,l.distance)(e-i.x,r-i.y);return(n?o<t.optimumDistance:o>t.optimumDistance)?{optimumCorner:i,optimumDistance:o}:t}),{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner},T=function(t,e,r,n,i){var o=r.x,a=r.y,s=0,u=0;switch(t){case"closest-side":e===y.CIRCLE?s=u=Math.min(Math.abs(o),Math.abs(o-i.width),Math.abs(a),Math.abs(a-i.height)):e===y.ELLIPSE&&(s=Math.min(Math.abs(o),Math.abs(o-i.width)),u=Math.min(Math.abs(a),Math.abs(a-i.height)));break;case"closest-corner":if(e===y.CIRCLE)s=u=Math.min((0,l.distance)(o,a),(0,l.distance)(o,a-i.height),(0,l.distance)(o-i.width,a),(0,l.distance)(o-i.width,a-i.height));else if(e===y.ELLIPSE){var c=Math.min(Math.abs(a),Math.abs(a-i.height))/Math.min(Math.abs(o),Math.abs(o-i.width)),h=k(i,o,a,!0);u=c*(s=(0,l.distance)(h.x-o,(h.y-a)/c))}break;case"farthest-side":e===y.CIRCLE?s=u=Math.max(Math.abs(o),Math.abs(o-i.width),Math.abs(a),Math.abs(a-i.height)):e===y.ELLIPSE&&(s=Math.max(Math.abs(o),Math.abs(o-i.width)),u=Math.max(Math.abs(a),Math.abs(a-i.height)));break;case"farthest-corner":if(e===y.CIRCLE)s=u=Math.max((0,l.distance)(o,a),(0,l.distance)(o,a-i.height),(0,l.distance)(o-i.width,a),(0,l.distance)(o-i.width,a-i.height));else if(e===y.ELLIPSE){var f=Math.max(Math.abs(a),Math.abs(a-i.height))/Math.max(Math.abs(o),Math.abs(o-i.width)),p=k(i,o,a,!1);u=f*(s=(0,l.distance)(p.x-o,(p.y-a)/f))}break;default:s=n.x||0,u=void 0!==n.y?n.y:s}return{x:s,y:u}},N=e.transformWebkitRadialGradientArgs=function(t){var e="",r="",n="",i="",o=0,a=/^(left|center|right|\d+(?:px|r?em|%)?)(?:\s+(top|center|bottom|\d+(?:px|r?em|%)?))?$/i,s=/^\d+(px|r?em|%)?(?:\s+\d+(px|r?em|%)?)?$/i,l=t[o].match(a);l&&o++;var u=t[o].match(/^(circle|ellipse)?\s*(closest-side|closest-corner|farthest-side|farthest-corner|contain|cover)?$/i);u&&(e=u[1]||"","contain"===(n=u[2]||"")?n="closest-side":"cover"===n&&(n="farthest-corner"),o++);var c=t[o].match(s);c&&o++;var h=t[o].match(a);h&&o++;var f=t[o].match(s);f&&o++;var p=h||l;p&&p[1]&&(i=p[1]+(/^\d+$/.test(p[1])?"px":""),p[2]&&(i+=" "+p[2]+(/^\d+$/.test(p[2])?"px":"")));var A=f||c;return A&&(r=A[0],A[1]||(r+="px")),!i||e||r||n||(r=i,i=""),i&&(i="at "+i),[[e,n,r,i].filter((function(t){return!!t})).join(" ")].concat(t.slice(o))},L=function(t){return t.map((function(t){return t.match(A)})).map((function(e,r){if(!e)return t[r];switch(e[1]){case"from":return e[4]+" 0%";case"to":return e[4]+" 100%";case"color-stop":return"%"===e[3]?e[4]+" "+e[2]:e[4]+" "+100*parseFloat(e[2])+"%"}}))}},9901:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reformatInputBounds=e.inlineSelectElement=e.inlineTextAreaElement=e.inlineInputElement=e.getInputBorderRadius=e.INPUT_BACKGROUND=e.INPUT_BORDERS=e.INPUT_COLOR=void 0;var n=h(r(2214)),i=r(6250),o=r(2658),a=h(r(7628)),s=h(r(5941)),l=h(r(9925)),u=h(r(4721)),c=(r(3997),r(4323),r(7989));function h(t){return t&&t.__esModule?t:{default:t}}e.INPUT_COLOR=new l.default([42,42,42]);var f=new l.default([165,165,165]),p=new l.default([222,222,222]),A={borderWidth:1,borderColor:f,borderStyle:o.BORDER_STYLE.SOLID},d=(e.INPUT_BORDERS=[A,A,A,A],e.INPUT_BACKGROUND={backgroundColor:p,backgroundImage:[],backgroundClip:i.BACKGROUND_CLIP.PADDING_BOX,backgroundOrigin:i.BACKGROUND_ORIGIN.PADDING_BOX},new u.default("50%")),g=[d,d],y=[g,g,g,g],v=new u.default("3px"),m=[v,v],b=[m,m,m,m],_=(e.getInputBorderRadius=function(t){return"radio"===t.type?y:b},e.inlineInputElement=function(t,e){if("radio"===t.type||"checkbox"===t.type){if(t.checked){var r=Math.min(e.bounds.width,e.bounds.height);e.childNodes.push("checkbox"===t.type?[new s.default(e.bounds.left+.39363*r,e.bounds.top+.79*r),new s.default(e.bounds.left+.16*r,e.bounds.top+.5549*r),new s.default(e.bounds.left+.27347*r,e.bounds.top+.44071*r),new s.default(e.bounds.left+.39694*r,e.bounds.top+.5649*r),new s.default(e.bounds.left+.72983*r,e.bounds.top+.23*r),new s.default(e.bounds.left+.84*r,e.bounds.top+.34085*r),new s.default(e.bounds.left+.39363*r,e.bounds.top+.79*r)]:new a.default(e.bounds.left+r/4,e.bounds.top+r/4,r/4))}}else _(w(t),t,e,!1)},e.inlineTextAreaElement=function(t,e){_(t.value,t,e,!0)},e.inlineSelectElement=function(t,e){var r=t.options[t.selectedIndex||0];_(r&&r.text||"",t,e,!1)},e.reformatInputBounds=function(t){return t.width>t.height?(t.left+=(t.width-t.height)/2,t.width=t.height):t.width<t.height&&(t.top+=(t.height-t.width)/2,t.height=t.width),t},function(t,e,r,i){var o=e.ownerDocument.body;if(t.length>0&&o){var a=e.ownerDocument.createElement("html2canvaswrapper");(0,c.copyCSSStyles)(e.ownerDocument.defaultView.getComputedStyle(e,null),a),a.style.position="absolute",a.style.left=r.bounds.left+"px",a.style.top=r.bounds.top+"px",i||(a.style.whiteSpace="nowrap");var s=e.ownerDocument.createTextNode(t);a.appendChild(s),o.appendChild(a),r.childNodes.push(n.default.fromTextNode(s,r)),o.removeChild(a)}}),w=function(t){var e="password"===t.type?new Array(t.value.length+1).join("\u2022"):t.value;return 0===e.length?t.placeholder||"":e}},4721:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calculateLengthFromValueWithUnit=e.LENGTH_TYPE=void 0;var n,i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(1394);(n=o)&&n.__esModule;var a=e.LENGTH_TYPE={PX:0,PERCENTAGE:1},s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type="%"===e.substr(e.length-1)?a.PERCENTAGE:a.PX;var r=parseFloat(e);this.value=isNaN(r)?0:r}return i(t,[{key:"isPercentage",value:function(){return this.type===a.PERCENTAGE}},{key:"getAbsoluteValue",value:function(t){return this.isPercentage()?t*(this.value/100):this.value}}],[{key:"create",value:function(e){return new t(e)}}]),t}();e.default=s;var l=function t(e){var r=e.parent;return r?t(r):parseFloat(e.style.font.fontSize)};e.calculateLengthFromValueWithUnit=function(t,e,r){switch(r){case"px":case"%":return new s(e+r);case"em":case"rem":var n=new s(e);return n.value*="em"===r?parseFloat(t.style.font.fontSize):l(t),n;default:return new s("0")}}},2478:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCounterText=e.inlineListItemElement=e.getListOwner=void 0;var n=r(7989),i=l(r(1394)),o=l(r(2214)),a=r(7362),s=r(3075);function l(t){return t&&t.__esModule?t:{default:t}}var u=["OL","UL","MENU"],c=(e.getListOwner=function(t){var e=t.parent;if(!e)return null;do{if(-1!==u.indexOf(e.tagName))return e;e=e.parent}while(e);return t.parent},e.inlineListItemElement=function(t,e,r){var s=e.style.listStyle;if(s){var l=t.ownerDocument.defaultView.getComputedStyle(t,null),u=t.ownerDocument.createElement("html2canvaswrapper");switch((0,n.copyCSSStyles)(l,u),u.style.position="absolute",u.style.bottom="auto",u.style.display="block",u.style.letterSpacing="normal",s.listStylePosition){case a.LIST_STYLE_POSITION.OUTSIDE:u.style.left="auto",u.style.right=t.ownerDocument.defaultView.innerWidth-e.bounds.left-e.style.margin[1].getAbsoluteValue(e.bounds.width)+7+"px",u.style.textAlign="right";break;case a.LIST_STYLE_POSITION.INSIDE:u.style.left=e.bounds.left-e.style.margin[3].getAbsoluteValue(e.bounds.width)+"px",u.style.right="auto",u.style.textAlign="left"}var c=void 0,h=e.style.margin[0].getAbsoluteValue(e.bounds.width),f=s.listStyleImage;if(f)if("url"===f.method){var p=t.ownerDocument.createElement("img");p.src=f.args[0],u.style.top=e.bounds.top-h+"px",u.style.width="auto",u.style.height="auto",u.appendChild(p)}else{var A=.5*parseFloat(e.style.font.fontSize);u.style.top=e.bounds.top-h+e.bounds.height-1.5*A+"px",u.style.width=A+"px",u.style.height=A+"px",u.style.backgroundImage=l.listStyleImage}else"number"===typeof e.listIndex&&(c=t.ownerDocument.createTextNode(x(e.listIndex,s.listStyleType,!0)),u.appendChild(c),u.style.top=e.bounds.top-h+"px");var d=t.ownerDocument.body;d.appendChild(u),c?(e.childNodes.push(o.default.fromTextNode(c,e)),d.removeChild(u)):e.childNodes.push(new i.default(u,e,r,0))}},{integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]}),h={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054f","\u054e","\u054d","\u054c","\u054b","\u054a","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053f","\u053e","\u053d","\u053c","\u053b","\u053a","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},f={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05d9\u05f3","\u05d8\u05f3","\u05d7\u05f3","\u05d6\u05f3","\u05d5\u05f3","\u05d4\u05f3","\u05d3\u05f3","\u05d2\u05f3","\u05d1\u05f3","\u05d0\u05f3","\u05ea","\u05e9","\u05e8","\u05e7","\u05e6","\u05e4","\u05e2","\u05e1","\u05e0","\u05de","\u05dc","\u05db","\u05d9\u05d8","\u05d9\u05d7","\u05d9\u05d6","\u05d8\u05d6","\u05d8\u05d5","\u05d9","\u05d8","\u05d7","\u05d6","\u05d5","\u05d4","\u05d3","\u05d2","\u05d1","\u05d0"]},p={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10f5","\u10f0","\u10ef","\u10f4","\u10ee","\u10ed","\u10ec","\u10eb","\u10ea","\u10e9","\u10e8","\u10e7","\u10e6","\u10e5","\u10e4","\u10f3","\u10e2","\u10e1","\u10e0","\u10df","\u10de","\u10dd","\u10f2","\u10dc","\u10db","\u10da","\u10d9","\u10d8","\u10d7","\u10f1","\u10d6","\u10d5","\u10d4","\u10d3","\u10d2","\u10d1","\u10d0"]},A=function(t,e,r,n,i,o){return t<e||t>r?x(t,i,o.length>0):n.integers.reduce((function(e,r,i){for(;t>=r;)t-=r,e+=n.values[i];return e}),"")+o},d=function(t,e,r,n){var i="";do{r||t--,i=n(t)+i,t/=e}while(t*e>=e);return i},g=function(t,e,r,n,i){var o=r-e+1;return(t<0?"-":"")+(d(Math.abs(t),o,n,(function(t){return(0,s.fromCodePoint)(Math.floor(t%o)+e)}))+i)},y=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:". ",n=e.length;return d(Math.abs(t),n,!1,(function(t){return e[Math.floor(t%n)]}))+r},v=function(t,e,r,i,o,s){if(t<-9999||t>9999)return x(t,a.LIST_STYLE_TYPE.CJK_DECIMAL,o.length>0);var l=Math.abs(t),u=o;if(0===l)return e[0]+u;for(var c=0;l>0&&c<=4;c++){var h=l%10;0===h&&(0,n.contains)(s,1)&&""!==u?u=e[h]+u:h>1||1===h&&0===c||1===h&&1===c&&(0,n.contains)(s,2)||1===h&&1===c&&(0,n.contains)(s,4)&&t>100||1===h&&c>1&&(0,n.contains)(s,8)?u=e[h]+(c>0?r[c-1]:"")+u:1===h&&c>0&&(u=r[c-1]+u),l=Math.floor(l/10)}return(t<0?i:"")+u},m="\u5341\u767e\u5343\u842c",b="\u62fe\u4f70\u4edf\u842c",_="\u30de\u30a4\u30ca\u30b9",w="\ub9c8\uc774\ub108\uc2a4 ",x=e.createCounterText=function(t,e,r){var n=r?". ":"",i=r?"\u3001":"",o=r?", ":"";switch(e){case a.LIST_STYLE_TYPE.DISC:return"\u2022";case a.LIST_STYLE_TYPE.CIRCLE:return"\u25e6";case a.LIST_STYLE_TYPE.SQUARE:return"\u25fe";case a.LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO:var s=g(t,48,57,!0,n);return s.length<4?"0"+s:s;case a.LIST_STYLE_TYPE.CJK_DECIMAL:return y(t,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",i);case a.LIST_STYLE_TYPE.LOWER_ROMAN:return A(t,1,3999,c,a.LIST_STYLE_TYPE.DECIMAL,n).toLowerCase();case a.LIST_STYLE_TYPE.UPPER_ROMAN:return A(t,1,3999,c,a.LIST_STYLE_TYPE.DECIMAL,n);case a.LIST_STYLE_TYPE.LOWER_GREEK:return g(t,945,969,!1,n);case a.LIST_STYLE_TYPE.LOWER_ALPHA:return g(t,97,122,!1,n);case a.LIST_STYLE_TYPE.UPPER_ALPHA:return g(t,65,90,!1,n);case a.LIST_STYLE_TYPE.ARABIC_INDIC:return g(t,1632,1641,!0,n);case a.LIST_STYLE_TYPE.ARMENIAN:case a.LIST_STYLE_TYPE.UPPER_ARMENIAN:return A(t,1,9999,h,a.LIST_STYLE_TYPE.DECIMAL,n);case a.LIST_STYLE_TYPE.LOWER_ARMENIAN:return A(t,1,9999,h,a.LIST_STYLE_TYPE.DECIMAL,n).toLowerCase();case a.LIST_STYLE_TYPE.BENGALI:return g(t,2534,2543,!0,n);case a.LIST_STYLE_TYPE.CAMBODIAN:case a.LIST_STYLE_TYPE.KHMER:return g(t,6112,6121,!0,n);case a.LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH:return y(t,"\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5",i);case a.LIST_STYLE_TYPE.CJK_HEAVENLY_STEM:return y(t,"\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678",i);case a.LIST_STYLE_TYPE.CJK_IDEOGRAPHIC:case a.LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL:return v(t,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",m,"\u8ca0",i,14);case a.LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL:return v(t,"\u96f6\u58f9\u8cb3\u53c3\u8086\u4f0d\u9678\u67d2\u634c\u7396",b,"\u8ca0",i,15);case a.LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL:return v(t,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",m,"\u8d1f",i,14);case a.LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL:return v(t,"\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396",b,"\u8d1f",i,15);case a.LIST_STYLE_TYPE.JAPANESE_INFORMAL:return v(t,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u4e07",_,i,0);case a.LIST_STYLE_TYPE.JAPANESE_FORMAL:return v(t,"\u96f6\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343\u4e07",_,i,7);case a.LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL:return v(t,"\uc601\uc77c\uc774\uc0bc\uc0ac\uc624\uc721\uce60\ud314\uad6c","\uc2ed\ubc31\ucc9c\ub9cc",w,o,7);case a.LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL:return v(t,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c",w,o,0);case a.LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL:return v(t,"\u96f6\u58f9\u8cb3\u53c3\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343",w,o,7);case a.LIST_STYLE_TYPE.DEVANAGARI:return g(t,2406,2415,!0,n);case a.LIST_STYLE_TYPE.GEORGIAN:return A(t,1,19999,p,a.LIST_STYLE_TYPE.DECIMAL,n);case a.LIST_STYLE_TYPE.GUJARATI:return g(t,2790,2799,!0,n);case a.LIST_STYLE_TYPE.GURMUKHI:return g(t,2662,2671,!0,n);case a.LIST_STYLE_TYPE.HEBREW:return A(t,1,10999,f,a.LIST_STYLE_TYPE.DECIMAL,n);case a.LIST_STYLE_TYPE.HIRAGANA:return y(t,"\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u306a\u306b\u306c\u306d\u306e\u306f\u3072\u3075\u3078\u307b\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093");case a.LIST_STYLE_TYPE.HIRAGANA_IROHA:return y(t,"\u3044\u308d\u306f\u306b\u307b\u3078\u3068\u3061\u308a\u306c\u308b\u3092\u308f\u304b\u3088\u305f\u308c\u305d\u3064\u306d\u306a\u3089\u3080\u3046\u3090\u306e\u304a\u304f\u3084\u307e\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304d\u3086\u3081\u307f\u3057\u3091\u3072\u3082\u305b\u3059");case a.LIST_STYLE_TYPE.KANNADA:return g(t,3302,3311,!0,n);case a.LIST_STYLE_TYPE.KATAKANA:return y(t,"\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3",i);case a.LIST_STYLE_TYPE.KATAKANA_IROHA:return y(t,"\u30a4\u30ed\u30cf\u30cb\u30db\u30d8\u30c8\u30c1\u30ea\u30cc\u30eb\u30f2\u30ef\u30ab\u30e8\u30bf\u30ec\u30bd\u30c4\u30cd\u30ca\u30e9\u30e0\u30a6\u30f0\u30ce\u30aa\u30af\u30e4\u30de\u30b1\u30d5\u30b3\u30a8\u30c6\u30a2\u30b5\u30ad\u30e6\u30e1\u30df\u30b7\u30f1\u30d2\u30e2\u30bb\u30b9",i);case a.LIST_STYLE_TYPE.LAO:return g(t,3792,3801,!0,n);case a.LIST_STYLE_TYPE.MONGOLIAN:return g(t,6160,6169,!0,n);case a.LIST_STYLE_TYPE.MYANMAR:return g(t,4160,4169,!0,n);case a.LIST_STYLE_TYPE.ORIYA:return g(t,2918,2927,!0,n);case a.LIST_STYLE_TYPE.PERSIAN:return g(t,1776,1785,!0,n);case a.LIST_STYLE_TYPE.TAMIL:return g(t,3046,3055,!0,n);case a.LIST_STYLE_TYPE.TELUGU:return g(t,3174,3183,!0,n);case a.LIST_STYLE_TYPE.THAI:return g(t,3664,3673,!0,n);case a.LIST_STYLE_TYPE.TIBETAN:return g(t,3872,3881,!0,n);case a.LIST_STYLE_TYPE.DECIMAL:default:return g(t,48,57,!0,n)}}},4339:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();var n=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.enabled="undefined"!==typeof window&&e,this.start=n||Date.now(),this.id=r}return r(t,[{key:"child",value:function(e){return new t(this.enabled,e,this.start)}},{key:"log",value:function(){if(this.enabled&&window.console&&window.console.log){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(e,0)))}}},{key:"error",value:function(){if(this.enabled&&window.console&&window.console.error){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];Function.prototype.bind.call(window.console.error,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(e,0)))}}}]),t}();e.default=n},1394:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(9925),a=(n=o)&&n.__esModule?n:{default:n},s=r(7989),l=r(6250),u=r(2658),c=r(4747),h=r(6220),f=r(5403),p=r(4493),A=r(6814),d=r(1133),g=r(7362),y=r(3361),v=r(6819),m=r(7776),b=r(9145),_=r(546),w=r(987),x=r(1501),E=r(8088),B=r(2606),C=r(7538),S=r(8258),k=r(1996),T=r(3997),N=r(9901),L=r(2478);var I=["INPUT","TEXTAREA","SELECT"],M=function(){function t(e,r,n,i){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.parent=r,this.tagName=e.tagName,this.index=i,this.childNodes=[],this.listItems=[],"number"===typeof e.start&&(this.listStart=e.start);var s=e.ownerDocument.defaultView,M=s.pageXOffset,P=s.pageYOffset,F=s.getComputedStyle(e,null),U=(0,h.parseDisplay)(F.display),R="radio"===e.type||"checkbox"===e.type,D=(0,_.parsePosition)(F.position);if(this.style={background:R?N.INPUT_BACKGROUND:(0,l.parseBackground)(F,n),border:R?N.INPUT_BORDERS:(0,u.parseBorder)(F),borderRadius:(e instanceof s.HTMLInputElement||e instanceof HTMLInputElement)&&R?(0,N.getInputBorderRadius)(e):(0,c.parseBorderRadius)(F),color:R?N.INPUT_COLOR:new a.default(F.color),display:U,float:(0,f.parseCSSFloat)(F.float),font:(0,p.parseFont)(F),letterSpacing:(0,A.parseLetterSpacing)(F.letterSpacing),listStyle:U===h.DISPLAY.LIST_ITEM?(0,g.parseListStyle)(F):null,lineBreak:(0,d.parseLineBreak)(F.lineBreak),margin:(0,y.parseMargin)(F),opacity:parseFloat(F.opacity),overflow:-1===I.indexOf(e.tagName)?(0,v.parseOverflow)(F.overflow):v.OVERFLOW.HIDDEN,overflowWrap:(0,m.parseOverflowWrap)(F.overflowWrap?F.overflowWrap:F.wordWrap),padding:(0,b.parsePadding)(F),position:D,textDecoration:(0,w.parseTextDecoration)(F),textShadow:(0,x.parseTextShadow)(F.textShadow),textTransform:(0,E.parseTextTransform)(F.textTransform),transform:(0,B.parseTransform)(F),visibility:(0,C.parseVisibility)(F.visibility),wordBreak:(0,S.parseWordBreak)(F.wordBreak),zIndex:(0,k.parseZIndex)(D!==_.POSITION.STATIC?F.zIndex:"auto")},this.isTransformed()&&(e.style.transform="matrix(1,0,0,1,0,0)"),U===h.DISPLAY.LIST_ITEM){var j=(0,L.getListOwner)(this);if(j){var H=j.listItems.length;j.listItems.push(this),this.listIndex=e.hasAttribute("value")&&"number"===typeof e.value?e.value:0===H?"number"===typeof j.listStart?j.listStart:1:j.listItems[H-1].listIndex+1}}"IMG"===e.tagName&&e.addEventListener("load",(function(){o.bounds=(0,T.parseBounds)(e,M,P),o.curvedBounds=(0,T.parseBoundCurves)(o.bounds,o.style.border,o.style.borderRadius)})),this.image=O(e,n),this.bounds=R?(0,N.reformatInputBounds)((0,T.parseBounds)(e,M,P)):(0,T.parseBounds)(e,M,P),this.curvedBounds=(0,T.parseBoundCurves)(this.bounds,this.style.border,this.style.borderRadius)}return i(t,[{key:"getClipPaths",value:function(){var t=this.parent?this.parent.getClipPaths():[];return this.style.overflow!==v.OVERFLOW.VISIBLE?t.concat([(0,T.calculatePaddingBoxPath)(this.curvedBounds)]):t}},{key:"isInFlow",value:function(){return this.isRootElement()&&!this.isFloating()&&!this.isAbsolutelyPositioned()}},{key:"isVisible",value:function(){return!(0,s.contains)(this.style.display,h.DISPLAY.NONE)&&this.style.opacity>0&&this.style.visibility===C.VISIBILITY.VISIBLE}},{key:"isAbsolutelyPositioned",value:function(){return this.style.position!==_.POSITION.STATIC&&this.style.position!==_.POSITION.RELATIVE}},{key:"isPositioned",value:function(){return this.style.position!==_.POSITION.STATIC}},{key:"isFloating",value:function(){return this.style.float!==f.FLOAT.NONE}},{key:"isRootElement",value:function(){return null===this.parent}},{key:"isTransformed",value:function(){return null!==this.style.transform}},{key:"isPositionedWithZIndex",value:function(){return this.isPositioned()&&!this.style.zIndex.auto}},{key:"isInlineLevel",value:function(){return(0,s.contains)(this.style.display,h.DISPLAY.INLINE)||(0,s.contains)(this.style.display,h.DISPLAY.INLINE_BLOCK)||(0,s.contains)(this.style.display,h.DISPLAY.INLINE_FLEX)||(0,s.contains)(this.style.display,h.DISPLAY.INLINE_GRID)||(0,s.contains)(this.style.display,h.DISPLAY.INLINE_LIST_ITEM)||(0,s.contains)(this.style.display,h.DISPLAY.INLINE_TABLE)}},{key:"isInlineBlockOrInlineTable",value:function(){return(0,s.contains)(this.style.display,h.DISPLAY.INLINE_BLOCK)||(0,s.contains)(this.style.display,h.DISPLAY.INLINE_TABLE)}}]),t}();e.default=M;var O=function(t,e){if(t instanceof t.ownerDocument.defaultView.SVGSVGElement||t instanceof SVGSVGElement){var r=new XMLSerializer;return e.loadImage("data:image/svg+xml,"+encodeURIComponent(r.serializeToString(t)))}switch(t.tagName){case"IMG":var n=t;return e.loadImage(n.currentSrc||n.src);case"CANVAS":var i=t;return e.loadCanvas(i);case"IFRAME":var o=t.getAttribute("data-html2canvas-internal-iframe-key");if(o)return o}return null}},6589:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NodeParser=void 0;var n=u(r(6340)),i=u(r(1394)),o=u(r(2214)),a=r(9901),s=r(2478),l=r(7362);function u(t){return t&&t.__esModule?t:{default:t}}e.NodeParser=function(t,e,r){var o=0,a=new i.default(t,null,e,o++),s=new n.default(a,null,!0);return h(t,a,s,e,1),s};var c=["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"],h=function t(e,r,u,h,A){for(var d,g=e.firstChild;g;g=d){d=g.nextSibling;var y=g.ownerDocument.defaultView;if(g instanceof y.Text||g instanceof Text||y.parent&&g instanceof y.parent.Text)g.data.trim().length>0&&r.childNodes.push(o.default.fromTextNode(g,r));else if(g instanceof y.HTMLElement||g instanceof HTMLElement||y.parent&&g instanceof y.parent.HTMLElement){if(-1===c.indexOf(g.nodeName)){var v=new i.default(g,r,h,A++);if(v.isVisible()){"INPUT"===g.tagName?(0,a.inlineInputElement)(g,v):"TEXTAREA"===g.tagName?(0,a.inlineTextAreaElement)(g,v):"SELECT"===g.tagName?(0,a.inlineSelectElement)(g,v):v.style.listStyle&&v.style.listStyle.listStyleType!==l.LIST_STYLE_TYPE.NONE&&(0,s.inlineListItemElement)(g,v,h);var m="TEXTAREA"!==g.tagName,b=f(v,g);if(b||p(v)){var _=b||v.isPositioned()?u.getRealParentStackingContext():u,w=new n.default(v,_,b);_.contexts.push(w),m&&t(g,v,w,h,A)}else u.children.push(v),m&&t(g,v,u,h,A)}}}else if(g instanceof y.SVGSVGElement||g instanceof SVGSVGElement||y.parent&&g instanceof y.parent.SVGSVGElement){var x=new i.default(g,r,h,A++),E=f(x,g);if(E||p(x)){var B=E||x.isPositioned()?u.getRealParentStackingContext():u,C=new n.default(x,B,E);B.contexts.push(C)}else u.children.push(x)}}},f=function(t,e){return t.isRootElement()||t.isPositionedWithZIndex()||t.style.opacity<1||t.isTransformed()||A(t,e)},p=function(t){return t.isPositioned()||t.isFloating()},A=function(t,e){return"BODY"===e.nodeName&&t.parent instanceof i.default&&t.parent.style.background.backgroundColor.isTransparent()}},7122:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Proxy=void 0;var n,i=r(128),o=(n=i)&&n.__esModule?n:{default:n};e.Proxy=function(t,e){if(!e.proxy)return Promise.reject(null);var r=e.proxy;return new Promise((function(n,i){var a=o.default.SUPPORT_CORS_XHR&&o.default.SUPPORT_RESPONSE_TYPE?"blob":"text",s=o.default.SUPPORT_CORS_XHR?new XMLHttpRequest:new XDomainRequest;if(s.onload=function(){if(s instanceof XMLHttpRequest)if(200===s.status)if("text"===a)n(s.response);else{var t=new FileReader;t.addEventListener("load",(function(){return n(t.result)}),!1),t.addEventListener("error",(function(t){return i(t)}),!1),t.readAsDataURL(s.response)}else i("");else n(s.responseText)},s.onerror=i,s.open("GET",r+"?url="+encodeURIComponent(t)+"&responseType="+a),"text"!==a&&s instanceof XMLHttpRequest&&(s.responseType=a),e.imageTimeout){var l=e.imageTimeout;s.timeout=l,s.ontimeout=function(){return i("")}}s.send()}))}},1523:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseContent=e.resolvePseudoContent=e.popCounters=e.parseCounterReset=e.TOKEN_TYPE=e.PSEUDO_CONTENT_ITEM_TYPE=void 0;var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=r(2478),o=r(7362),a=e.PSEUDO_CONTENT_ITEM_TYPE={TEXT:0,IMAGE:1},s=e.TOKEN_TYPE={STRING:0,ATTRIBUTE:1,URL:2,COUNTER:3,COUNTERS:4,OPENQUOTE:5,CLOSEQUOTE:6},l=(e.parseCounterReset=function(t,e){if(!t||!t.counterReset||"none"===t.counterReset)return[];for(var r=[],i=t.counterReset.split(/\s*,\s*/),o=i.length,a=0;a<o;a++){var s=i[a].split(/\s+/),l=n(s,2),u=l[0],c=l[1];r.push(u);var h=e.counters[u];h||(h=e.counters[u]=[]),h.push(parseInt(c||0,10))}return r},e.popCounters=function(t,e){for(var r=t.length,n=0;n<r;n++)e.counters[t[n]].pop()},e.resolvePseudoContent=function(t,e,r){if(!e||!e.content||"none"===e.content||"-moz-alt-content"===e.content||"none"===e.display)return null;var i=l(e.content),o=i.length,u=[],f="",p=e.counterIncrement;if(p&&"none"!==p){var A=p.split(/\s+/),d=n(A,2),g=d[0],y=d[1],v=r.counters[g];v&&(v[v.length-1]+=void 0===y?1:parseInt(y,10))}for(var m=0;m<o;m++){var b=i[m];switch(b.type){case s.STRING:f+=b.value||"";break;case s.ATTRIBUTE:t instanceof HTMLElement&&b.value&&(f+=t.getAttribute(b.value)||"");break;case s.COUNTER:var _=r.counters[b.name||""];_&&(f+=h([_[_.length-1]],"",b.format));break;case s.COUNTERS:var w=r.counters[b.name||""];w&&(f+=h(w,b.glue,b.format));break;case s.OPENQUOTE:f+=c(e,!0,r.quoteDepth),r.quoteDepth++;break;case s.CLOSEQUOTE:r.quoteDepth--,f+=c(e,!1,r.quoteDepth);break;case s.URL:f&&(u.push({type:a.TEXT,value:f}),f=""),u.push({type:a.IMAGE,value:b.value||""})}}return f&&u.push({type:a.TEXT,value:f}),u},e.parseContent=function(t,e){if(e&&e[t])return e[t];for(var r=[],n=t.length,i=!1,o=!1,a=!1,l="",c="",h=[],f=0;f<n;f++){var p=t.charAt(f);switch(p){case"'":case'"':o?l+=p:(i=!i,a||i||(r.push({type:s.STRING,value:l}),l=""));break;case"\\":o?(l+=p,o=!1):o=!0;break;case"(":i?l+=p:(a=!0,c=l,l="",h=[]);break;case")":if(i)l+=p;else if(a){switch(l&&h.push(l),c){case"attr":h.length>0&&r.push({type:s.ATTRIBUTE,value:h[0]});break;case"counter":if(h.length>0){var A={type:s.COUNTER,name:h[0]};h.length>1&&(A.format=h[1]),r.push(A)}break;case"counters":if(h.length>0){var d={type:s.COUNTERS,name:h[0]};h.length>1&&(d.glue=h[1]),h.length>2&&(d.format=h[2]),r.push(d)}break;case"url":h.length>0&&r.push({type:s.URL,value:h[0]})}a=!1,l=""}break;case",":i?l+=p:a&&(h.push(l),l="");break;case" ":case"\t":i?l+=p:l&&(u(r,l),l="");break;default:l+=p}"\\"!==p&&(o=!1)}return l&&u(r,l),e&&(e[t]=r),r}),u=function(t,e){switch(e){case"open-quote":t.push({type:s.OPENQUOTE});break;case"close-quote":t.push({type:s.CLOSEQUOTE})}},c=function(t,e,r){var n=t.quotes?t.quotes.split(/\s+/):["'\"'","'\"'"],i=2*r;return i>=n.length&&(i=n.length-2),e||++i,n[i].replace(/^["']|["']$/g,"")},h=function(t,e,r){for(var n=t.length,a="",s=0;s<n;s++)s>0&&(a+=e||""),a+=(0,i.createCounterText)(t[s],(0,o.parseListStyleType)(r||"decimal"),!1);return a}},8152:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=r(3997),s=(r(3093),r(6671)),l=r(2214),u=(n=l)&&n.__esModule?n:{default:n},c=r(6250),h=r(2658);var f=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.target=e,this.options=r,e.render(r)}return o(t,[{key:"renderNode",value:function(t){t.isVisible()&&(this.renderNodeBackgroundAndBorders(t),this.renderNodeContent(t))}},{key:"renderNodeContent",value:function(t){var e=this,r=function(){if(t.childNodes.length&&t.childNodes.forEach((function(r){if(r instanceof u.default){var n=r.parent.style;e.target.renderTextNode(r.bounds,n.color,n.font,n.textDecoration,n.textShadow)}else e.target.drawShape(r,t.style.color)})),t.image){var r=e.options.imageStore.get(t.image);if(r){var n=(0,a.calculateContentBox)(t.bounds,t.style.padding,t.style.border),i="number"===typeof r.width&&r.width>0?r.width:n.width,o="number"===typeof r.height&&r.height>0?r.height:n.height;i>0&&o>0&&e.target.clip([(0,a.calculatePaddingBoxPath)(t.curvedBounds)],(function(){e.target.drawImage(r,new a.Bounds(0,0,i,o),n)}))}}},n=t.getClipPaths();n.length?this.target.clip(n,r):r()}},{key:"renderNodeBackgroundAndBorders",value:function(t){var e=this,r=!t.style.background.backgroundColor.isTransparent()||t.style.background.backgroundImage.length,n=t.style.border.some((function(t){return t.borderStyle!==h.BORDER_STYLE.NONE&&!t.borderColor.isTransparent()})),i=function(){var n=(0,c.calculateBackgroungPaintingArea)(t.curvedBounds,t.style.background.backgroundClip);r&&e.target.clip([n],(function(){t.style.background.backgroundColor.isTransparent()||e.target.fill(t.style.background.backgroundColor),e.renderBackgroundImage(t)})),t.style.border.forEach((function(r,n){r.borderStyle===h.BORDER_STYLE.NONE||r.borderColor.isTransparent()||e.renderBorder(r,n,t.curvedBounds)}))};if(r||n){var o=t.parent?t.parent.getClipPaths():[];o.length?this.target.clip(o,i):i()}}},{key:"renderBackgroundImage",value:function(t){var e=this;t.style.background.backgroundImage.slice(0).reverse().forEach((function(r){"url"===r.source.method&&r.source.args.length?e.renderBackgroundRepeat(t,r):/gradient/i.test(r.source.method)&&e.renderBackgroundGradient(t,r)}))}},{key:"renderBackgroundRepeat",value:function(t,e){var r=this.options.imageStore.get(e.source.args[0]);if(r){var n=(0,c.calculateBackgroungPositioningArea)(t.style.background.backgroundOrigin,t.bounds,t.style.padding,t.style.border),i=(0,c.calculateBackgroundSize)(e,r,n),o=(0,c.calculateBackgroundPosition)(e.position,i,n),a=(0,c.calculateBackgroundRepeatPath)(e,o,i,n,t.bounds),s=Math.round(n.left+o.x),l=Math.round(n.top+o.y);this.target.renderRepeat(a,r,i,s,l)}}},{key:"renderBackgroundGradient",value:function(t,e){var r=(0,c.calculateBackgroungPositioningArea)(t.style.background.backgroundOrigin,t.bounds,t.style.padding,t.style.border),n=(0,c.calculateGradientBackgroundSize)(e,r),i=(0,c.calculateBackgroundPosition)(e.position,n,r),o=new a.Bounds(Math.round(r.left+i.x),Math.round(r.top+i.y),n.width,n.height),l=(0,s.parseGradient)(t,e.source,o);if(l)switch(l.type){case s.GRADIENT_TYPE.LINEAR_GRADIENT:this.target.renderLinearGradient(o,l);break;case s.GRADIENT_TYPE.RADIAL_GRADIENT:this.target.renderRadialGradient(o,l)}}},{key:"renderBorder",value:function(t,e,r){this.target.drawShape((0,a.parsePathForBorder)(r,e),t.borderColor)}},{key:"renderStack",value:function(t){var e=this;if(t.container.isVisible()){var r=t.getOpacity();r!==this._opacity&&(this.target.setOpacity(t.getOpacity()),this._opacity=r);var n=t.container.style.transform;null!==n?this.target.transform(t.container.bounds.left+n.transformOrigin[0].value,t.container.bounds.top+n.transformOrigin[1].value,n.transform,(function(){return e.renderStackContent(t)})):this.renderStackContent(t)}}},{key:"renderStackContent",value:function(t){var e=A(t),r=i(e,5),n=r[0],o=r[1],a=r[2],s=r[3],l=r[4],u=p(t),c=i(u,2),h=c[0],f=c[1];this.renderNodeBackgroundAndBorders(t.container),n.sort(d).forEach(this.renderStack,this),this.renderNodeContent(t.container),f.forEach(this.renderNode,this),s.forEach(this.renderStack,this),l.forEach(this.renderStack,this),h.forEach(this.renderNode,this),o.forEach(this.renderStack,this),a.sort(d).forEach(this.renderStack,this)}},{key:"render",value:function(t){return this.options.backgroundColor&&this.target.rectangle(this.options.x,this.options.y,this.options.width,this.options.height,this.options.backgroundColor),this.renderStack(t),this.target.getTarget()}}]),t}();e.default=f;var p=function(t){for(var e=[],r=[],n=t.children.length,i=0;i<n;i++){var o=t.children[i];o.isInlineLevel()?e.push(o):r.push(o)}return[e,r]},A=function(t){for(var e=[],r=[],n=[],i=[],o=[],a=t.contexts.length,s=0;s<a;s++){var l=t.contexts[s];l.container.isPositioned()||l.container.style.opacity<1||l.container.isTransformed()?l.container.style.zIndex.order<0?e.push(l):l.container.style.zIndex.order>0?n.push(l):r.push(l):l.container.isFloating()?i.push(l):o.push(l)}return[e,r,n,i,o]},d=function(t,e){return t.container.style.zIndex.order>e.container.style.zIndex.order?1:t.container.style.zIndex.order<e.container.style.zIndex.order?-1:t.container.index>e.container.index?1:-1}},3557:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResourceStore=void 0;var n,i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(128),a=(n=o)&&n.__esModule?n:{default:n},s=r(7122);function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=function(){function t(e,r,n){l(this,t),this.options=e,this._window=n,this.origin=this.getOrigin(n.location.href),this.cache={},this.logger=r,this._index=0}return i(t,[{key:"loadImage",value:function(t){var e=this;if(this.hasResourceInCache(t))return t;if(g(t))return this.cache[t]=v(t,this.options.imageTimeout||0),t;if(!y(t)||a.default.SUPPORT_SVG_DRAWING){if(!0===this.options.allowTaint||A(t)||this.isSameOrigin(t))return this.addImage(t,t,!1);if(!this.isSameOrigin(t)){if("string"===typeof this.options.proxy)return this.cache[t]=(0,s.Proxy)(t,this.options).then((function(t){return v(t,e.options.imageTimeout||0)})),t;if(!0===this.options.useCORS&&a.default.SUPPORT_CORS_IMAGES)return this.addImage(t,t,!0)}}}},{key:"inlineImage",value:function(t){var e=this;return A(t)?v(t,this.options.imageTimeout||0):this.hasResourceInCache(t)?this.cache[t]:this.isSameOrigin(t)||"string"!==typeof this.options.proxy?this.xhrImage(t):this.cache[t]=(0,s.Proxy)(t,this.options).then((function(t){return v(t,e.options.imageTimeout||0)}))}},{key:"xhrImage",value:function(t){var e=this;return this.cache[t]=new Promise((function(r,n){var i=new XMLHttpRequest;if(i.onreadystatechange=function(){if(4===i.readyState)if(200!==i.status)n("Failed to fetch image "+t.substring(0,256)+" with status code "+i.status);else{var e=new FileReader;e.addEventListener("load",(function(){var t=e.result;r(t)}),!1),e.addEventListener("error",(function(t){return n(t)}),!1),e.readAsDataURL(i.response)}},i.responseType="blob",e.options.imageTimeout){var o=e.options.imageTimeout;i.timeout=o,i.ontimeout=function(){return n("")}}i.open("GET",t,!0),i.send()})).then((function(t){return v(t,e.options.imageTimeout||0)})),this.cache[t]}},{key:"loadCanvas",value:function(t){var e=String(this._index++);return this.cache[e]=Promise.resolve(t),e}},{key:"hasResourceInCache",value:function(t){return"undefined"!==typeof this.cache[t]}},{key:"addImage",value:function(t,e,r){var n=this;var i=function(t){return new Promise((function(i,o){var a=new Image;if(a.onload=function(){return i(a)},t&&!r||(a.crossOrigin="anonymous"),a.onerror=o,a.src=e,!0===a.complete&&setTimeout((function(){i(a)}),500),n.options.imageTimeout){var s=n.options.imageTimeout;setTimeout((function(){return o("")}),s)}}))};return this.cache[t]=d(e)&&!y(e)?a.default.SUPPORT_BASE64_DRAWING(e).then(i):i(!0),t}},{key:"isSameOrigin",value:function(t){return this.getOrigin(t)===this.origin}},{key:"getOrigin",value:function(t){var e=this._link||(this._link=this._window.document.createElement("a"));return e.href=t,e.href=e.href,e.protocol+e.hostname+e.port}},{key:"ready",value:function(){var t=this,e=Object.keys(this.cache),r=e.map((function(e){return t.cache[e].catch((function(t){return null}))}));return Promise.all(r).then((function(t){return new c(e,t)}))}}]),t}();e.default=u;var c=e.ResourceStore=function(){function t(e,r){l(this,t),this._keys=e,this._resources=r}return i(t,[{key:"get",value:function(t){var e=this._keys.indexOf(t);return-1===e?null:this._resources[e]}}]),t}(),h=/^data:image\/svg\+xml/i,f=/^data:image\/.*;base64,/i,p=/^data:image\/.*/i,A=function(t){return p.test(t)},d=function(t){return f.test(t)},g=function(t){return"blob"===t.substr(0,4)},y=function(t){return"svg"===t.substr(-3).toLowerCase()||h.test(t)},v=function(t,e){return new Promise((function(r,n){var i=new Image;i.onload=function(){return r(i)},i.onerror=n,i.src=t,!0===i.complete&&setTimeout((function(){r(i)}),500),e&&setTimeout((function(){return n("")}),e)}))}},6340:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(1394);(n=o)&&n.__esModule,r(546);var a=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.parent=r,this.contexts=[],this.children=[],this.treatAsRealStackingContext=n}return i(t,[{key:"getOpacity",value:function(){return this.parent?this.container.style.opacity*this.parent.getOpacity():this.container.style.opacity}},{key:"getRealParentStackingContext",value:function(){return!this.parent||this.treatAsRealStackingContext?this:this.parent.getRealParentStackingContext()}}]),t}();e.default=a},4323:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseTextBounds=e.TextBounds=void 0;var n,i=r(3997),o=r(987),a=r(128),s=(n=a)&&n.__esModule?n:{default:n},l=r(3075);var u=e.TextBounds=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text=e,this.bounds=r},c=(e.parseTextBounds=function(t,e,r){for(var n=0!==e.style.letterSpacing?(0,l.toCodePoints)(t).map((function(t){return(0,l.fromCodePoint)(t)})):(0,l.breakWords)(t,e),i=n.length,a=r.parentNode?r.parentNode.ownerDocument.defaultView:null,f=a?a.pageXOffset:0,p=a?a.pageYOffset:0,A=[],d=0,g=0;g<i;g++){var y=n[g];if(e.style.textDecoration!==o.TEXT_DECORATION.NONE||y.trim().length>0)if(s.default.SUPPORT_RANGE_BOUNDS)A.push(new u(y,h(r,d,y.length,f,p)));else{var v=r.splitText(y.length);A.push(new u(y,c(r,f,p))),r=v}else s.default.SUPPORT_RANGE_BOUNDS||(r=r.splitText(y.length));d+=y.length}return A},function(t,e,r){var n=t.ownerDocument.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var o=t.parentNode;if(o){o.replaceChild(n,t);var a=(0,i.parseBounds)(n,e,r);return n.firstChild&&o.replaceChild(n.firstChild,n),a}return new i.Bounds(0,0,0,0)}),h=function(t,e,r,n,o){var a=t.ownerDocument.createRange();return a.setStart(t,e),a.setEnd(t,e+r),i.Bounds.fromClientRect(a.getBoundingClientRect(),n,o)}},2214:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(8088),o=r(4323);var a=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text=e,this.parent=r,this.bounds=n}return n(t,null,[{key:"fromTextNode",value:function(e,r){var n=l(e.data,r.style.textTransform);return new t(n,r,(0,o.parseTextBounds)(n,r,e))}}]),t}();e.default=a;var s=/(^|\s|:|-|\(|\))([a-z])/g,l=function(t,e){switch(e){case i.TEXT_TRANSFORM.LOWERCASE:return t.toLowerCase();case i.TEXT_TRANSFORM.CAPITALIZE:return t.replace(s,u);case i.TEXT_TRANSFORM.UPPERCASE:return t.toUpperCase();default:return t}};function u(t,e,r){return t.length>0?e+r.toUpperCase():t}},3075:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.breakWords=e.fromCodePoint=e.toCodePoints=void 0;var n=r(3424);Object.defineProperty(e,"toCodePoints",{enumerable:!0,get:function(){return n.toCodePoints}}),Object.defineProperty(e,"fromCodePoint",{enumerable:!0,get:function(){return n.fromCodePoint}});var i,o=r(1394),a=((i=o)&&i.__esModule,r(7776));e.breakWords=function(t,e){for(var r=(0,n.LineBreaker)(t,{lineBreak:e.style.lineBreak,wordBreak:e.style.overflowWrap===a.OVERFLOW_WRAP.BREAK_WORD?"break-word":e.style.wordBreak}),i=[],o=void 0;!(o=r.next()).done;)i.push(o.value.slice());return i}},7989:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.contains=function(t,e){return 0!==(t&e)},e.distance=function(t,e){return Math.sqrt(t*t+e*e)},e.copyCSSStyles=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);"content"!==n&&e.style.setProperty(n,t.getPropertyValue(n))}return e},e.SMALL_IMAGE="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},5387:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.renderElement=void 0;var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=(p(r(4339)),r(6589)),o=p(r(8152)),a=p(r(3983)),s=p(r(128)),l=r(3997),u=r(4326),c=r(3093),h=r(9925),f=p(h);function p(t){return t&&t.__esModule?t:{default:t}}e.renderElement=function t(e,r,p){var A=e.ownerDocument,d=new l.Bounds(r.scrollX,r.scrollY,r.windowWidth,r.windowHeight),g=A.documentElement?new f.default(getComputedStyle(A.documentElement).backgroundColor):h.TRANSPARENT,y=A.body?new f.default(getComputedStyle(A.body).backgroundColor):h.TRANSPARENT,v=e===A.documentElement?g.isTransparent()?y.isTransparent()?r.backgroundColor?new f.default(r.backgroundColor):null:y:g:r.backgroundColor?new f.default(r.backgroundColor):null;return(r.foreignObjectRendering?s.default.SUPPORT_FOREIGNOBJECT_DRAWING:Promise.resolve(!1)).then((function(s){return s?(f=new u.DocumentCloner(e,r,p,!0,t)).inlineFonts(A).then((function(){return f.resourceLoader.ready()})).then((function(){var t=new a.default(f.documentElement),n=A.defaultView,i=n.pageXOffset,o=n.pageYOffset,s="HTML"===e.tagName||"BODY"===e.tagName?(0,l.parseDocumentSize)(A):(0,l.parseBounds)(e,i,o),u=s.width,c=s.height,h=s.left,d=s.top;return t.render({backgroundColor:v,logger:p,scale:r.scale,x:"number"===typeof r.x?r.x:h,y:"number"===typeof r.y?r.y:d,width:"number"===typeof r.width?r.width:Math.ceil(u),height:"number"===typeof r.height?r.height:Math.ceil(c),windowWidth:r.windowWidth,windowHeight:r.windowHeight,scrollX:r.scrollX,scrollY:r.scrollY})})):(0,u.cloneWindow)(A,d,e,r,p,t).then((function(t){var e=n(t,3),a=e[0],s=e[1],u=e[2];var f=(0,i.NodeParser)(s,u,p),d=s.ownerDocument;return v===f.container.style.background.backgroundColor&&(f.container.style.background.backgroundColor=h.TRANSPARENT),u.ready().then((function(t){var e=new c.FontMetrics(d);var n=d.defaultView,i=n.pageXOffset,u=n.pageYOffset,h="HTML"===s.tagName||"BODY"===s.tagName?(0,l.parseDocumentSize)(A):(0,l.parseBounds)(s,i,u),g=h.width,y=h.height,m=h.left,b=h.top,_={backgroundColor:v,fontMetrics:e,imageStore:t,logger:p,scale:r.scale,x:"number"===typeof r.x?r.x:m,y:"number"===typeof r.y?r.y:b,width:"number"===typeof r.width?r.width:Math.ceil(g),height:"number"===typeof r.height?r.height:Math.ceil(y)};if(Array.isArray(r.target))return Promise.all(r.target.map((function(t){return new o.default(t,_).render(f)})));var w=new o.default(r.target,_).render(f);return!0===r.removeContainer&&a.parentNode&&a.parentNode.removeChild(a),w}))}));var f}))}},7412:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(9286),a=r(5941),s=(n=a)&&n.__esModule?n:{default:n};var l=function(t,e,r){return new s.default(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},u=function(){function t(e,r,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=o.PATH.BEZIER_CURVE,this.start=e,this.startControl=r,this.endControl=n,this.end=i}return i(t,[{key:"subdivide",value:function(e,r){var n=l(this.start,this.startControl,e),i=l(this.startControl,this.endControl,e),o=l(this.endControl,this.end,e),a=l(n,i,e),s=l(i,o,e),u=l(a,s,e);return r?new t(this.start,n,a,u):new t(u,s,o,this.end)}},{key:"reverse",value:function(){return new t(this.end,this.endControl,this.startControl,this.start)}}]),t}();e.default=u},7628:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(9286);e.default=function t(e,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=n.PATH.CIRCLE,this.x=e,this.y=r,this.radius=i}},9286:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.PATH={VECTOR:0,BEZIER_CURVE:1,CIRCLE:2}},5577:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=e,this.height=r}},5941:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(9286);e.default=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=n.PATH.VECTOR,this.x=e,this.y=r}},9818:function(t,e,r){"use strict";var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i=s(r(3374)),o=s(r(4339)),a=r(5387);function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t,e){var r=e||{},s=new o.default("boolean"!==typeof r.logging||r.logging);s.log("html2canvas $npm_package_version");var l=t.ownerDocument;if(!l)return Promise.reject("Provided element is not within a Document");var u=l.defaultView,c={async:!0,allowTaint:!1,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,scale:u.devicePixelRatio||1,target:new i.default(r.canvas),useCORS:!1,windowWidth:u.innerWidth,windowHeight:u.innerHeight,scrollX:u.pageXOffset,scrollY:u.pageYOffset};return(0,a.renderElement)(t,n({},c,r),s)};l.CanvasRenderer=i.default,t.exports=l},6250:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseBackgroundImage=e.parseBackground=e.calculateBackgroundRepeatPath=e.calculateBackgroundPosition=e.calculateBackgroungPositioningArea=e.calculateBackgroungPaintingArea=e.calculateGradientBackgroundSize=e.calculateBackgroundSize=e.BACKGROUND_ORIGIN=e.BACKGROUND_CLIP=e.BACKGROUND_SIZE=e.BACKGROUND_REPEAT=void 0;var n=u(r(9925)),i=u(r(4721)),o=u(r(5577)),a=u(r(5941)),s=r(3997),l=r(9145);function u(t){return t&&t.__esModule?t:{default:t}}var c=e.BACKGROUND_REPEAT={REPEAT:0,NO_REPEAT:1,REPEAT_X:2,REPEAT_Y:3},h=e.BACKGROUND_SIZE={AUTO:0,CONTAIN:1,COVER:2,LENGTH:3},f=e.BACKGROUND_CLIP={BORDER_BOX:0,PADDING_BOX:1,CONTENT_BOX:2},p=e.BACKGROUND_ORIGIN=f,A="auto",d=function t(e){switch(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e){case"contain":this.size=h.CONTAIN;break;case"cover":this.size=h.COVER;break;case"auto":this.size=h.AUTO;break;default:this.value=new i.default(e)}},g=(e.calculateBackgroundSize=function(t,e,r){var n=0,i=0,a=t.size;if(a[0].size===h.CONTAIN||a[0].size===h.COVER){var s=r.width/r.height,l=e.width/e.height;return s<l!==(a[0].size===h.COVER)?new o.default(r.width,r.width/l):new o.default(r.height*l,r.height)}return a[0].value&&(n=a[0].value.getAbsoluteValue(r.width)),a[0].size===h.AUTO&&a[1].size===h.AUTO?i=e.height:a[1].size===h.AUTO?i=n/e.width*e.height:a[1].value&&(i=a[1].value.getAbsoluteValue(r.height)),a[0].size===h.AUTO&&(n=i/e.height*e.width),new o.default(n,i)},e.calculateGradientBackgroundSize=function(t,e){var r=t.size,n=r[0].value?r[0].value.getAbsoluteValue(e.width):e.width,i=r[1].value?r[1].value.getAbsoluteValue(e.height):r[0].value?n:e.height;return new o.default(n,i)},new d(A)),y=(e.calculateBackgroungPaintingArea=function(t,e){return e===f.BORDER_BOX?(0,s.calculateBorderBoxPath)(t):(0,s.calculatePaddingBoxPath)(t)},e.calculateBackgroungPositioningArea=function(t,e,r,n){var i=(0,s.calculatePaddingBox)(e,n);switch(t){case p.BORDER_BOX:return e;case p.CONTENT_BOX:var o=r[l.PADDING_SIDES.LEFT].getAbsoluteValue(e.width),a=r[l.PADDING_SIDES.RIGHT].getAbsoluteValue(e.width),u=r[l.PADDING_SIDES.TOP].getAbsoluteValue(e.width),c=r[l.PADDING_SIDES.BOTTOM].getAbsoluteValue(e.width);return new s.Bounds(i.left+o,i.top+u,i.width-o-a,i.height-u-c);default:return i}},e.calculateBackgroundPosition=function(t,e,r){return new a.default(t[0].getAbsoluteValue(r.width-e.width),t[1].getAbsoluteValue(r.height-e.height))},e.calculateBackgroundRepeatPath=function(t,e,r,n,i){switch(t.repeat){case c.REPEAT_X:return[new a.default(Math.round(i.left),Math.round(n.top+e.y)),new a.default(Math.round(i.left+i.width),Math.round(n.top+e.y)),new a.default(Math.round(i.left+i.width),Math.round(r.height+n.top+e.y)),new a.default(Math.round(i.left),Math.round(r.height+n.top+e.y))];case c.REPEAT_Y:return[new a.default(Math.round(n.left+e.x),Math.round(i.top)),new a.default(Math.round(n.left+e.x+r.width),Math.round(i.top)),new a.default(Math.round(n.left+e.x+r.width),Math.round(i.height+i.top)),new a.default(Math.round(n.left+e.x),Math.round(i.height+i.top))];case c.NO_REPEAT:return[new a.default(Math.round(n.left+e.x),Math.round(n.top+e.y)),new a.default(Math.round(n.left+e.x+r.width),Math.round(n.top+e.y)),new a.default(Math.round(n.left+e.x+r.width),Math.round(n.top+e.y+r.height)),new a.default(Math.round(n.left+e.x),Math.round(n.top+e.y+r.height))];default:return[new a.default(Math.round(i.left),Math.round(i.top)),new a.default(Math.round(i.left+i.width),Math.round(i.top)),new a.default(Math.round(i.left+i.width),Math.round(i.height+i.top)),new a.default(Math.round(i.left),Math.round(i.height+i.top))]}},e.parseBackground=function(t,e){return{backgroundColor:new n.default(t.backgroundColor),backgroundImage:b(t,e),backgroundClip:y(t.backgroundClip),backgroundOrigin:v(t.backgroundOrigin)}},function(t){switch(t){case"padding-box":return f.PADDING_BOX;case"content-box":return f.CONTENT_BOX}return f.BORDER_BOX}),v=function(t){switch(t){case"padding-box":return p.PADDING_BOX;case"content-box":return p.CONTENT_BOX}return p.BORDER_BOX},m=function(t){switch(t.trim()){case"no-repeat":return c.NO_REPEAT;case"repeat-x":case"repeat no-repeat":return c.REPEAT_X;case"repeat-y":case"no-repeat repeat":return c.REPEAT_Y;case"repeat":return c.REPEAT}return c.REPEAT},b=function(t,e){var r=x(t.backgroundImage).map((function(t){if("url"===t.method){var r=e.loadImage(t.args[0]);t.args=r?[r]:[]}return t})),n=t.backgroundPosition.split(","),i=t.backgroundRepeat.split(","),o=t.backgroundSize.split(",");return r.map((function(t,e){var r=(o[e]||A).trim().split(" ").map(_),a=(n[e]||A).trim().split(" ").map(w);return{source:t,repeat:m("string"===typeof i[e]?i[e]:i[0]),size:r.length<2?[r[0],g]:[r[0],r[1]],position:a.length<2?[a[0],a[0]]:[a[0],a[1]]}}))},_=function(t){return"auto"===t?g:new d(t)},w=function(t){switch(t){case"bottom":case"right":return new i.default("100%");case"left":case"top":return new i.default("0%");case"auto":return new i.default("0")}return new i.default(t)},x=e.parseBackgroundImage=function(t){var e=/^\s$/,r=[],n=[],i="",o=null,a="",s=0,l=0,u=function(){var t="";if(i){'"'===a.substr(0,1)&&(a=a.substr(1,a.length-2)),a&&n.push(a.trim());var e=i.indexOf("-",1)+1;"-"===i.substr(0,1)&&e>0&&(t=i.substr(0,e).toLowerCase(),i=i.substr(e)),"none"!==(i=i.toLowerCase())&&r.push({prefix:t,method:i,args:n})}n=[],i=a=""};return t.split("").forEach((function(t){if(0!==s||!e.test(t)){switch(t){case'"':o?o===t&&(o=null):o=t;break;case"(":if(o)break;if(0===s)return void(s=1);l++;break;case")":if(o)break;if(1===s){if(0===l)return s=0,void u();l--}break;case",":if(o)break;if(0===s)return void u();if(1===s&&0===l&&!i.match(/^url$/i))return n.push(a.trim()),void(a="")}0===s?i+=t:a+=t}})),u(),r}},2658:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseBorder=e.BORDER_SIDES=e.BORDER_STYLE=void 0;var n,i=r(9925),o=(n=i)&&n.__esModule?n:{default:n};var a=e.BORDER_STYLE={NONE:0,SOLID:1},s=e.BORDER_SIDES={TOP:0,RIGHT:1,BOTTOM:2,LEFT:3},l=Object.keys(s).map((function(t){return t.toLowerCase()}));e.parseBorder=function(t){return l.map((function(e){var r=new o.default(t.getPropertyValue("border-"+e+"-color")),n=function(t){return"none"===t?a.NONE:a.SOLID}(t.getPropertyValue("border-"+e+"-style")),i=parseFloat(t.getPropertyValue("border-"+e+"-width"));return{borderColor:r,borderStyle:n,borderWidth:isNaN(i)?0:i}}))}},4747:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseBorderRadius=void 0;var n,i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=r(4721),a=(n=o)&&n.__esModule?n:{default:n};var s=["top-left","top-right","bottom-right","bottom-left"];e.parseBorderRadius=function(t){return s.map((function(e){var r=t.getPropertyValue("border-"+e+"-radius").split(" ").map(a.default.create),n=i(r,2),o=n[0],s=n[1];return"undefined"===typeof s?[o,o]:[o,s]}))}},6220:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.DISPLAY={NONE:1,BLOCK:2,INLINE:4,RUN_IN:8,FLOW:16,FLOW_ROOT:32,TABLE:64,FLEX:128,GRID:256,RUBY:512,SUBGRID:1024,LIST_ITEM:2048,TABLE_ROW_GROUP:4096,TABLE_HEADER_GROUP:8192,TABLE_FOOTER_GROUP:16384,TABLE_ROW:32768,TABLE_CELL:65536,TABLE_COLUMN_GROUP:1<<17,TABLE_COLUMN:1<<18,TABLE_CAPTION:1<<19,RUBY_BASE:1<<20,RUBY_TEXT:1<<21,RUBY_BASE_CONTAINER:1<<22,RUBY_TEXT_CONTAINER:1<<23,CONTENTS:1<<24,INLINE_BLOCK:1<<25,INLINE_LIST_ITEM:1<<26,INLINE_TABLE:1<<27,INLINE_FLEX:1<<28,INLINE_GRID:1<<29},n=function(t,e){return t|function(t){switch(t){case"block":return r.BLOCK;case"inline":return r.INLINE;case"run-in":return r.RUN_IN;case"flow":return r.FLOW;case"flow-root":return r.FLOW_ROOT;case"table":return r.TABLE;case"flex":return r.FLEX;case"grid":return r.GRID;case"ruby":return r.RUBY;case"subgrid":return r.SUBGRID;case"list-item":return r.LIST_ITEM;case"table-row-group":return r.TABLE_ROW_GROUP;case"table-header-group":return r.TABLE_HEADER_GROUP;case"table-footer-group":return r.TABLE_FOOTER_GROUP;case"table-row":return r.TABLE_ROW;case"table-cell":return r.TABLE_CELL;case"table-column-group":return r.TABLE_COLUMN_GROUP;case"table-column":return r.TABLE_COLUMN;case"table-caption":return r.TABLE_CAPTION;case"ruby-base":return r.RUBY_BASE;case"ruby-text":return r.RUBY_TEXT;case"ruby-base-container":return r.RUBY_BASE_CONTAINER;case"ruby-text-container":return r.RUBY_TEXT_CONTAINER;case"contents":return r.CONTENTS;case"inline-block":return r.INLINE_BLOCK;case"inline-list-item":return r.INLINE_LIST_ITEM;case"inline-table":return r.INLINE_TABLE;case"inline-flex":return r.INLINE_FLEX;case"inline-grid":return r.INLINE_GRID}return r.NONE}(e)};e.parseDisplay=function(t){return t.split(" ").reduce(n,0)}},5403:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.FLOAT={NONE:0,LEFT:1,RIGHT:2,INLINE_START:3,INLINE_END:4};e.parseCSSFloat=function(t){switch(t){case"left":return r.LEFT;case"right":return r.RIGHT;case"inline-start":return r.INLINE_START;case"inline-end":return r.INLINE_END}return r.NONE}},4493:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.parseFont=function(t){return{fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontVariant:t.fontVariant,fontWeight:function(t){switch(t){case"normal":return 400;case"bold":return 700}var e=parseInt(t,10);return isNaN(e)?400:e}(t.fontWeight)}}},6814:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.parseLetterSpacing=function(t){if("normal"===t)return 0;var e=parseFloat(t);return isNaN(e)?0:e}},1133:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.LINE_BREAK={NORMAL:"normal",STRICT:"strict"};e.parseLineBreak=function(t){return"strict"===t?r.STRICT:r.NORMAL}},7362:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseListStyle=e.parseListStyleType=e.LIST_STYLE_TYPE=e.LIST_STYLE_POSITION=void 0;var n=r(6250),i=e.LIST_STYLE_POSITION={INSIDE:0,OUTSIDE:1},o=e.LIST_STYLE_TYPE={NONE:-1,DISC:0,CIRCLE:1,SQUARE:2,DECIMAL:3,CJK_DECIMAL:4,DECIMAL_LEADING_ZERO:5,LOWER_ROMAN:6,UPPER_ROMAN:7,LOWER_GREEK:8,LOWER_ALPHA:9,UPPER_ALPHA:10,ARABIC_INDIC:11,ARMENIAN:12,BENGALI:13,CAMBODIAN:14,CJK_EARTHLY_BRANCH:15,CJK_HEAVENLY_STEM:16,CJK_IDEOGRAPHIC:17,DEVANAGARI:18,ETHIOPIC_NUMERIC:19,GEORGIAN:20,GUJARATI:21,GURMUKHI:22,HEBREW:22,HIRAGANA:23,HIRAGANA_IROHA:24,JAPANESE_FORMAL:25,JAPANESE_INFORMAL:26,KANNADA:27,KATAKANA:28,KATAKANA_IROHA:29,KHMER:30,KOREAN_HANGUL_FORMAL:31,KOREAN_HANJA_FORMAL:32,KOREAN_HANJA_INFORMAL:33,LAO:34,LOWER_ARMENIAN:35,MALAYALAM:36,MONGOLIAN:37,MYANMAR:38,ORIYA:39,PERSIAN:40,SIMP_CHINESE_FORMAL:41,SIMP_CHINESE_INFORMAL:42,TAMIL:43,TELUGU:44,THAI:45,TIBETAN:46,TRAD_CHINESE_FORMAL:47,TRAD_CHINESE_INFORMAL:48,UPPER_ARMENIAN:49,DISCLOSURE_OPEN:50,DISCLOSURE_CLOSED:51},a=e.parseListStyleType=function(t){switch(t){case"disc":return o.DISC;case"circle":return o.CIRCLE;case"square":return o.SQUARE;case"decimal":return o.DECIMAL;case"cjk-decimal":return o.CJK_DECIMAL;case"decimal-leading-zero":return o.DECIMAL_LEADING_ZERO;case"lower-roman":return o.LOWER_ROMAN;case"upper-roman":return o.UPPER_ROMAN;case"lower-greek":return o.LOWER_GREEK;case"lower-alpha":return o.LOWER_ALPHA;case"upper-alpha":return o.UPPER_ALPHA;case"arabic-indic":return o.ARABIC_INDIC;case"armenian":return o.ARMENIAN;case"bengali":return o.BENGALI;case"cambodian":return o.CAMBODIAN;case"cjk-earthly-branch":return o.CJK_EARTHLY_BRANCH;case"cjk-heavenly-stem":return o.CJK_HEAVENLY_STEM;case"cjk-ideographic":return o.CJK_IDEOGRAPHIC;case"devanagari":return o.DEVANAGARI;case"ethiopic-numeric":return o.ETHIOPIC_NUMERIC;case"georgian":return o.GEORGIAN;case"gujarati":return o.GUJARATI;case"gurmukhi":return o.GURMUKHI;case"hebrew":return o.HEBREW;case"hiragana":return o.HIRAGANA;case"hiragana-iroha":return o.HIRAGANA_IROHA;case"japanese-formal":return o.JAPANESE_FORMAL;case"japanese-informal":return o.JAPANESE_INFORMAL;case"kannada":return o.KANNADA;case"katakana":return o.KATAKANA;case"katakana-iroha":return o.KATAKANA_IROHA;case"khmer":return o.KHMER;case"korean-hangul-formal":return o.KOREAN_HANGUL_FORMAL;case"korean-hanja-formal":return o.KOREAN_HANJA_FORMAL;case"korean-hanja-informal":return o.KOREAN_HANJA_INFORMAL;case"lao":return o.LAO;case"lower-armenian":return o.LOWER_ARMENIAN;case"malayalam":return o.MALAYALAM;case"mongolian":return o.MONGOLIAN;case"myanmar":return o.MYANMAR;case"oriya":return o.ORIYA;case"persian":return o.PERSIAN;case"simp-chinese-formal":return o.SIMP_CHINESE_FORMAL;case"simp-chinese-informal":return o.SIMP_CHINESE_INFORMAL;case"tamil":return o.TAMIL;case"telugu":return o.TELUGU;case"thai":return o.THAI;case"tibetan":return o.TIBETAN;case"trad-chinese-formal":return o.TRAD_CHINESE_FORMAL;case"trad-chinese-informal":return o.TRAD_CHINESE_INFORMAL;case"upper-armenian":return o.UPPER_ARMENIAN;case"disclosure-open":return o.DISCLOSURE_OPEN;case"disclosure-closed":return o.DISCLOSURE_CLOSED;default:return o.NONE}},s=(e.parseListStyle=function(t){var e=(0,n.parseBackgroundImage)(t.getPropertyValue("list-style-image"));return{listStyleType:a(t.getPropertyValue("list-style-type")),listStyleImage:e.length?e[0]:null,listStylePosition:s(t.getPropertyValue("list-style-position"))}},function(t){return"inside"===t?i.INSIDE:i.OUTSIDE})},3361:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseMargin=void 0;var n,i=r(4721),o=(n=i)&&n.__esModule?n:{default:n};var a=["top","right","bottom","left"];e.parseMargin=function(t){return a.map((function(e){return new o.default(t.getPropertyValue("margin-"+e))}))}},6819:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.OVERFLOW={VISIBLE:0,HIDDEN:1,SCROLL:2,AUTO:3};e.parseOverflow=function(t){switch(t){case"hidden":return r.HIDDEN;case"scroll":return r.SCROLL;case"auto":return r.AUTO;default:return r.VISIBLE}}},7776:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.OVERFLOW_WRAP={NORMAL:0,BREAK_WORD:1};e.parseOverflowWrap=function(t){return"break-word"===t?r.BREAK_WORD:r.NORMAL}},9145:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parsePadding=e.PADDING_SIDES=void 0;var n,i=r(4721),o=(n=i)&&n.__esModule?n:{default:n};e.PADDING_SIDES={TOP:0,RIGHT:1,BOTTOM:2,LEFT:3};var a=["top","right","bottom","left"];e.parsePadding=function(t){return a.map((function(e){return new o.default(t.getPropertyValue("padding-"+e))}))}},546:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.POSITION={STATIC:0,RELATIVE:1,ABSOLUTE:2,FIXED:3,STICKY:4};e.parsePosition=function(t){switch(t){case"relative":return r.RELATIVE;case"absolute":return r.ABSOLUTE;case"fixed":return r.FIXED;case"sticky":return r.STICKY}return r.STATIC}},987:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseTextDecoration=e.TEXT_DECORATION_LINE=e.TEXT_DECORATION=e.TEXT_DECORATION_STYLE=void 0;var n,i=r(9925),o=(n=i)&&n.__esModule?n:{default:n};var a=e.TEXT_DECORATION_STYLE={SOLID:0,DOUBLE:1,DOTTED:2,DASHED:3,WAVY:4},s=e.TEXT_DECORATION={NONE:null},l=e.TEXT_DECORATION_LINE={UNDERLINE:1,OVERLINE:2,LINE_THROUGH:3,BLINK:4},u=function(t){switch(t){case"underline":return l.UNDERLINE;case"overline":return l.OVERLINE;case"line-through":return l.LINE_THROUGH}return l.BLINK};e.parseTextDecoration=function(t){var e,r="none"===(e=t.textDecorationLine?t.textDecorationLine:t.textDecoration)?null:e.split(" ").map(u);if(null===r)return s.NONE;var n=t.textDecorationColor?new o.default(t.textDecorationColor):null,i=function(t){switch(t){case"double":return a.DOUBLE;case"dotted":return a.DOTTED;case"dashed":return a.DASHED;case"wavy":return a.WAVY}return a.SOLID}(t.textDecorationStyle);return{textDecorationLine:r,textDecorationColor:n,textDecorationStyle:i}}},1501:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseTextShadow=void 0;var n,i=r(9925),o=(n=i)&&n.__esModule?n:{default:n};var a=/^([+-]|\d|\.)$/i;e.parseTextShadow=function(t){if("none"===t||"string"!==typeof t)return null;for(var e="",r=!1,n=[],i=[],s=0,l=null,u=function(){e.length&&(r?n.push(parseFloat(e)):l=new o.default(e)),r=!1,e=""},c=function(){n.length&&null!==l&&i.push({color:l,offsetX:n[0]||0,offsetY:n[1]||0,blur:n[2]||0}),n.splice(0,n.length),l=null},h=0;h<t.length;h++){var f=t[h];switch(f){case"(":e+=f,s++;break;case")":e+=f,s--;break;case",":0===s?(u(),c()):e+=f;break;case" ":0===s?u():e+=f;break;default:0===e.length&&a.test(f)&&(r=!0),e+=f}}return u(),c(),0===i.length?null:i}},8088:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.TEXT_TRANSFORM={NONE:0,LOWERCASE:1,UPPERCASE:2,CAPITALIZE:3};e.parseTextTransform=function(t){switch(t){case"uppercase":return r.UPPERCASE;case"lowercase":return r.LOWERCASE;case"capitalize":return r.CAPITALIZE}return r.NONE}},2606:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseTransform=void 0;var n,i=r(4721),o=(n=i)&&n.__esModule?n:{default:n};var a=function(t){return parseFloat(t.trim())},s=/(matrix|matrix3d)\((.+)\)/,l=(e.parseTransform=function(t){var e=u(t.transform||t.webkitTransform||t.mozTransform||t.msTransform||t.oTransform);return null===e?null:{transform:e,transformOrigin:l(t.transformOrigin||t.webkitTransformOrigin||t.mozTransformOrigin||t.msTransformOrigin||t.oTransformOrigin)}},function(t){if("string"!==typeof t){var e=new o.default("0");return[e,e]}var r=t.split(" ").map(o.default.create);return[r[0],r[1]]}),u=function(t){if("none"===t||"string"!==typeof t)return null;var e=t.match(s);if(e){if("matrix"===e[1]){var r=e[2].split(",").map(a);return[r[0],r[1],r[2],r[3],r[4],r[5]]}var n=e[2].split(",").map(a);return[n[0],n[1],n[4],n[5],n[12],n[13]]}return null}},7538:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.VISIBILITY={VISIBLE:0,HIDDEN:1,COLLAPSE:2};e.parseVisibility=function(t){switch(t){case"hidden":return r.HIDDEN;case"collapse":return r.COLLAPSE;default:return r.VISIBLE}}},8258:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.WORD_BREAK={NORMAL:"normal",BREAK_ALL:"break-all",KEEP_ALL:"keep-all"};e.parseWordBreak=function(t){switch(t){case"break-all":return r.BREAK_ALL;case"keep-all":return r.KEEP_ALL;default:return r.NORMAL}}},1996:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.parseZIndex=function(t){var e="auto"===t;return{auto:e,order:e?0:parseInt(t,10)}}},3374:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(9286),o=r(987);var a=function(t,e){var r=Math.max.apply(null,t.colorStops.map((function(t){return t.stop}))),n=1/Math.max(1,r);t.colorStops.forEach((function(t){e.addColorStop(n*t.stop,t.color.toString())}))},s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e||document.createElement("canvas")}return n(t,[{key:"render",value:function(t){this.ctx=this.canvas.getContext("2d"),this.options=t,this.canvas.width=Math.floor(t.width*t.scale),this.canvas.height=Math.floor(t.height*t.scale),this.canvas.style.width=t.width+"px",this.canvas.style.height=t.height+"px",this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-t.x,-t.y),this.ctx.textBaseline="bottom",t.logger.log("Canvas renderer initialized ("+t.width+"x"+t.height+" at "+t.x+","+t.y+") with scale "+this.options.scale)}},{key:"clip",value:function(t,e){var r=this;t.length&&(this.ctx.save(),t.forEach((function(t){r.path(t),r.ctx.clip()}))),e(),t.length&&this.ctx.restore()}},{key:"drawImage",value:function(t,e,r){this.ctx.drawImage(t,e.left,e.top,e.width,e.height,r.left,r.top,r.width,r.height)}},{key:"drawShape",value:function(t,e){this.path(t),this.ctx.fillStyle=e.toString(),this.ctx.fill()}},{key:"fill",value:function(t){this.ctx.fillStyle=t.toString(),this.ctx.fill()}},{key:"getTarget",value:function(){return this.canvas.getContext("2d").setTransform(1,0,0,1,0,0),Promise.resolve(this.canvas)}},{key:"path",value:function(t){var e=this;this.ctx.beginPath(),Array.isArray(t)?t.forEach((function(t,r){var n=t.type===i.PATH.VECTOR?t:t.start;0===r?e.ctx.moveTo(n.x,n.y):e.ctx.lineTo(n.x,n.y),t.type===i.PATH.BEZIER_CURVE&&e.ctx.bezierCurveTo(t.startControl.x,t.startControl.y,t.endControl.x,t.endControl.y,t.end.x,t.end.y)})):this.ctx.arc(t.x+t.radius,t.y+t.radius,t.radius,0,2*Math.PI,!0),this.ctx.closePath()}},{key:"rectangle",value:function(t,e,r,n,i){this.ctx.fillStyle=i.toString(),this.ctx.fillRect(t,e,r,n)}},{key:"renderLinearGradient",value:function(t,e){var r=this.ctx.createLinearGradient(t.left+e.direction.x1,t.top+e.direction.y1,t.left+e.direction.x0,t.top+e.direction.y0);a(e,r),this.ctx.fillStyle=r,this.ctx.fillRect(t.left,t.top,t.width,t.height)}},{key:"renderRadialGradient",value:function(t,e){var r=this,n=t.left+e.center.x,i=t.top+e.center.y,o=this.ctx.createRadialGradient(n,i,0,n,i,e.radius.x);if(o)if(a(e,o),this.ctx.fillStyle=o,e.radius.x!==e.radius.y){var s=t.left+.5*t.width,l=t.top+.5*t.height,u=e.radius.y/e.radius.x,c=1/u;this.transform(s,l,[1,0,0,u,0,0],(function(){return r.ctx.fillRect(t.left,c*(t.top-l)+l,t.width,t.height*c)}))}else this.ctx.fillRect(t.left,t.top,t.width,t.height)}},{key:"renderRepeat",value:function(t,e,r,n,i){this.path(t),this.ctx.fillStyle=this.ctx.createPattern(this.resizeImage(e,r),"repeat"),this.ctx.translate(n,i),this.ctx.fill(),this.ctx.translate(-n,-i)}},{key:"renderTextNode",value:function(t,e,r,n,i){var a=this;this.ctx.font=[r.fontStyle,r.fontVariant,r.fontWeight,r.fontSize,r.fontFamily].join(" "),t.forEach((function(t){if(a.ctx.fillStyle=e.toString(),i&&t.text.trim().length?i.slice(0).reverse().forEach((function(e){a.ctx.shadowColor=e.color.toString(),a.ctx.shadowOffsetX=e.offsetX*a.options.scale,a.ctx.shadowOffsetY=e.offsetY*a.options.scale,a.ctx.shadowBlur=e.blur,a.ctx.fillText(t.text,t.bounds.left,t.bounds.top+t.bounds.height)})):a.ctx.fillText(t.text,t.bounds.left,t.bounds.top+t.bounds.height),null!==n){var s=n.textDecorationColor||e;n.textDecorationLine.forEach((function(e){switch(e){case o.TEXT_DECORATION_LINE.UNDERLINE:var n=a.options.fontMetrics.getMetrics(r).baseline;a.rectangle(t.bounds.left,Math.round(t.bounds.top+n),t.bounds.width,1,s);break;case o.TEXT_DECORATION_LINE.OVERLINE:a.rectangle(t.bounds.left,Math.round(t.bounds.top),t.bounds.width,1,s);break;case o.TEXT_DECORATION_LINE.LINE_THROUGH:var i=a.options.fontMetrics.getMetrics(r).middle;a.rectangle(t.bounds.left,Math.ceil(t.bounds.top+i),t.bounds.width,1,s)}}))}}))}},{key:"resizeImage",value:function(t,e){if(t.width===e.width&&t.height===e.height)return t;var r=this.canvas.ownerDocument.createElement("canvas");return r.width=e.width,r.height=e.height,r.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,e.width,e.height),r}},{key:"setOpacity",value:function(t){this.ctx.globalAlpha=t}},{key:"transform",value:function(t,e,r,n){this.ctx.save(),this.ctx.translate(t,e),this.ctx.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.ctx.translate(-t,-e),n(),this.ctx.restore()}}]),t}();e.default=s},3983:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e}return r(t,[{key:"render",value:function(t){var e=this;this.options=t,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=Math.floor(t.width)*t.scale,this.canvas.height=Math.floor(t.height)*t.scale,this.canvas.style.width=t.width+"px",this.canvas.style.height=t.height+"px",t.logger.log("ForeignObject renderer initialized ("+t.width+"x"+t.height+" at "+t.x+","+t.y+") with scale "+t.scale);var r=i(Math.max(t.windowWidth,t.width)*t.scale,Math.max(t.windowHeight,t.height)*t.scale,t.scrollX*t.scale,t.scrollY*t.scale,this.element);return o(r).then((function(r){return t.backgroundColor&&(e.ctx.fillStyle=t.backgroundColor.toString(),e.ctx.fillRect(0,0,t.width*t.scale,t.height*t.scale)),e.ctx.drawImage(r,-t.x*t.scale,-t.y*t.scale),e.canvas}))}}]),t}();e.default=n;var i=e.createForeignObjectSVG=function(t,e,r,n,i){var o="http://www.w3.org/2000/svg",a=document.createElementNS(o,"svg"),s=document.createElementNS(o,"foreignObject");return a.setAttributeNS(null,"width",t),a.setAttributeNS(null,"height",e),s.setAttributeNS(null,"width","100%"),s.setAttributeNS(null,"height","100%"),s.setAttributeNS(null,"x",r),s.setAttributeNS(null,"y",n),s.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(s),s.appendChild(i),a},o=e.loadSerializedSVG=function(t){return new Promise((function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))}))}},5125:function(t,e,r){"use strict";r.r(e),r.d(e,{AcroForm:function(){return ve},AcroFormAppearance:function(){return ge},AcroFormButton:function(){return ue},AcroFormCheckBox:function(){return pe},AcroFormChoiceField:function(){return oe},AcroFormComboBox:function(){return se},AcroFormEditBox:function(){return le},AcroFormListBox:function(){return ae},AcroFormPasswordField:function(){return de},AcroFormPushButton:function(){return ce},AcroFormRadioButton:function(){return he},AcroFormTextField:function(){return Ae},GState:function(){return Ct},ShadingPattern:function(){return kt},TilingPattern:function(){return Tt},default:function(){return gr},jsPDF:function(){return Nt}});var n=r(1002),i=Uint8Array,o=Uint16Array,a=Uint32Array,s=new i([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),l=new i([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),u=new i([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=function(t,e){for(var r=new o(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];var i=new a(r[30]);for(n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)i[s]=s-r[n]<<5|n;return[r,i]},h=c(s,2),f=h[0],p=h[1];f[28]=258,p[258]=28;for(var A=c(l,0),d=A[0],g=A[1],y=new o(32768),v=0;v<32768;++v){var m=(43690&v)>>>1|(21845&v)<<1;m=(61680&(m=(52428&m)>>>2|(13107&m)<<2))>>>4|(3855&m)<<4,y[v]=((65280&m)>>>8|(255&m)<<8)>>>1}var b=function(t,e,r){for(var n=t.length,i=0,a=new o(e);i<n;++i)++a[t[i]-1];var s,l=new o(e);for(i=0;i<e;++i)l[i]=l[i-1]+a[i-1]<<1;if(r){s=new o(1<<e);var u=15-e;for(i=0;i<n;++i)if(t[i])for(var c=i<<4|t[i],h=e-t[i],f=l[t[i]-1]++<<h,p=f|(1<<h)-1;f<=p;++f)s[y[f]>>>u]=c}else for(s=new o(n),i=0;i<n;++i)s[i]=y[l[t[i]-1]++]>>>15-t[i];return s},_=new i(288);for(v=0;v<144;++v)_[v]=8;for(v=144;v<256;++v)_[v]=9;for(v=256;v<280;++v)_[v]=7;for(v=280;v<288;++v)_[v]=8;var w=new i(32);for(v=0;v<32;++v)w[v]=5;var x=b(_,9,0),E=b(_,9,1),B=b(w,5,0),C=b(w,5,1),S=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},k=function(t,e,r){var n=e/8>>0;return(t[n]|t[n+1]<<8)>>>(7&e)&r},T=function(t,e){var r=e/8>>0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>>(7&e)},N=function(t){return(t/8>>0)+(7&t&&1)},L=function(t,e,r){(null==e||e<0)&&(e=0),(null==r||r>t.length)&&(r=t.length);var n=new(t instanceof o?o:t instanceof a?a:i)(r-e);return n.set(t.subarray(e,r)),n},I=function(t,e,r){var n=t.length,o=!e||r,a=!r||r.i;r||(r={}),e||(e=new i(3*n));var c=function(t){var r=e.length;if(t>r){var n=new i(Math.max(2*r,t));n.set(e),e=n}},h=r.f||0,p=r.p||0,A=r.b||0,g=r.l,y=r.d,v=r.m,m=r.n,_=8*n;do{if(!g){r.f=h=k(t,p,1);var w=k(t,p+1,3);if(p+=3,!w){var x=t[(H=N(p)+4)-4]|t[H-3]<<8,B=H+x;if(B>n){if(a)throw"unexpected EOF";break}o&&c(A+x),e.set(t.subarray(H,B),A),r.b=A+=x,r.p=p=8*B;continue}if(1==w)g=E,y=C,v=9,m=5;else{if(2!=w)throw"invalid block type";var I=k(t,p,31)+257,M=k(t,p+10,15)+4,O=I+k(t,p+5,31)+1;p+=14;for(var P=new i(O),F=new i(19),U=0;U<M;++U)F[u[U]]=k(t,p+3*U,7);p+=3*M;var R=S(F),D=(1<<R)-1;if(!a&&p+O*(R+7)>_)break;var j=b(F,R,1);for(U=0;U<O;){var H,Q=j[k(t,p,D)];if(p+=15&Q,(H=Q>>>4)<16)P[U++]=H;else{var z=0,V=0;for(16==H?(V=3+k(t,p,3),p+=2,z=P[U-1]):17==H?(V=3+k(t,p,7),p+=3):18==H&&(V=11+k(t,p,127),p+=7);V--;)P[U++]=z}}var G=P.subarray(0,I),q=P.subarray(I);v=S(G),m=S(q),g=b(G,v,1),y=b(q,m,1)}if(p>_)throw"unexpected EOF"}o&&c(A+131072);for(var K=(1<<v)-1,Y=(1<<m)-1,W=v+m+18;a||p+W<_;){var X=(z=g[T(t,p)&K])>>>4;if((p+=15&z)>_)throw"unexpected EOF";if(!z)throw"invalid length/literal";if(X<256)e[A++]=X;else{if(256==X){g=null;break}var J=X-254;if(X>264){var Z=s[U=X-257];J=k(t,p,(1<<Z)-1)+f[U],p+=Z}var $=y[T(t,p)&Y],tt=$>>>4;if(!$)throw"invalid distance";p+=15&$;q=d[tt];if(tt>3){Z=l[tt];q+=T(t,p)&(1<<Z)-1,p+=Z}if(p>_)throw"unexpected EOF";o&&c(A+131072);for(var et=A+J;A<et;A+=4)e[A]=e[A-q],e[A+1]=e[A+1-q],e[A+2]=e[A+2-q],e[A+3]=e[A+3-q];A=et}}r.l=g,r.p=p,r.b=A,g&&(h=1,r.m=v,r.d=y,r.n=m)}while(!h);return A==e.length?e:L(e,0,A)},M=function(t,e,r){r<<=7&e;var n=e/8>>0;t[n]|=r,t[n+1]|=r>>>8},O=function(t,e,r){r<<=7&e;var n=e/8>>0;t[n]|=r,t[n+1]|=r>>>8,t[n+2]|=r>>>16},P=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,s=r.slice();if(!a)return[new i(0),0];if(1==a){var l=new i(r[0].s+1);return l[r[0].s]=1,[l,1]}r.sort((function(t,e){return t.f-e.f})),r.push({s:-1,f:25001});var u=r[0],c=r[1],h=0,f=1,p=2;for(r[0]={s:-1,f:u.f+c.f,l:u,r:c};f!=a-1;)u=r[r[h].f<r[p].f?h++:p++],c=r[h!=f&&r[h].f<r[p].f?h++:p++],r[f++]={s:-1,f:u.f+c.f,l:u,r:c};var A=s[0].s;for(n=1;n<a;++n)s[n].s>A&&(A=s[n].s);var d=new o(A+1),g=F(r[f-1],d,0);if(g>e){n=0;var y=0,v=g-e,m=1<<v;for(s.sort((function(t,e){return d[e.s]-d[t.s]||t.f-e.f}));n<a;++n){var b=s[n].s;if(!(d[b]>e))break;y+=m-(1<<g-d[b]),d[b]=e}for(y>>>=v;y>0;){var _=s[n].s;d[_]<e?y-=1<<e-d[_]++-1:++n}for(;n>=0&&y;--n){var w=s[n].s;d[w]==e&&(--d[w],++y)}g=e}return[new i(d),g]},F=function t(e,r,n){return-1==e.s?Math.max(t(e.l,r,n+1),t(e.r,r,n+1)):r[e.s]=n},U=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new o(++e),n=0,i=t[0],a=1,s=function(t){r[n++]=t},l=1;l<=e;++l)if(t[l]==i&&l!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(i),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(i);a=1,i=t[l]}return[r.subarray(0,n),e]},R=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},D=function(t,e,r){var n=r.length,i=N(e+2);t[i]=255&n,t[i+1]=n>>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var o=0;o<n;++o)t[i+o+4]=r[o];return 8*(i+4+n)},j=function(t,e,r,n,i,a,c,h,f,p,A){M(e,A++,r),++i[256];for(var d=P(i,15),g=d[0],y=d[1],v=P(a,15),m=v[0],E=v[1],C=U(g),S=C[0],k=C[1],T=U(m),N=T[0],L=T[1],I=new o(19),F=0;F<S.length;++F)I[31&S[F]]++;for(F=0;F<N.length;++F)I[31&N[F]]++;for(var j=P(I,7),H=j[0],Q=j[1],z=19;z>4&&!H[u[z-1]];--z);var V,G,q,K,Y=p+5<<3,W=R(i,_)+R(a,w)+c,X=R(i,g)+R(a,m)+c+14+3*z+R(I,H)+(2*I[16]+3*I[17]+7*I[18]);if(Y<=W&&Y<=X)return D(e,A,t.subarray(f,f+p));if(M(e,A,1+(X<W)),A+=2,X<W){V=b(g,y,0),G=g,q=b(m,E,0),K=m;var J=b(H,Q,0);M(e,A,k-257),M(e,A+5,L-1),M(e,A+10,z-4),A+=14;for(F=0;F<z;++F)M(e,A+3*F,H[u[F]]);A+=3*z;for(var Z=[S,N],$=0;$<2;++$){var tt=Z[$];for(F=0;F<tt.length;++F){var et=31&tt[F];M(e,A,J[et]),A+=H[et],et>15&&(M(e,A,tt[F]>>>5&127),A+=tt[F]>>>12)}}}else V=x,G=_,q=B,K=w;for(F=0;F<h;++F)if(n[F]>255){et=n[F]>>>18&31;O(e,A,V[et+257]),A+=G[et+257],et>7&&(M(e,A,n[F]>>>23&31),A+=s[et]);var rt=31&n[F];O(e,A,q[rt]),A+=K[rt],rt>3&&(O(e,A,n[F]>>>5&8191),A+=l[rt])}else O(e,A,V[n[F]]),A+=G[n[F]];return O(e,A,V[256]),A+G[256]},H=new a([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Q=new i(0),z=function(t,e,r,n,u,c){var h=t.length,f=new i(n+h+5*(1+Math.floor(h/7e3))+u),A=f.subarray(n,f.length-u),d=0;if(!e||h<8)for(var y=0;y<=h;y+=65535){var v=y+65535;v<h?d=D(A,d,t.subarray(y,v)):(A[y]=c,d=D(A,d,t.subarray(y,h)))}else{for(var m=H[e-1],b=m>>>13,_=8191&m,w=(1<<r)-1,x=new o(32768),E=new o(w+1),B=Math.ceil(r/3),C=2*B,S=function(e){return(t[e]^t[e+1]<<B^t[e+2]<<C)&w},k=new a(25e3),T=new o(288),I=new o(32),M=0,O=0,P=(y=0,0),F=0,U=0;y<h;++y){var R=S(y),z=32767&y,V=E[R];if(x[z]=V,E[R]=z,F<=y){var G=h-y;if((M>7e3||P>24576)&&G>423){d=j(t,A,0,k,T,I,O,P,U,y-U,d),P=M=O=0,U=y;for(var q=0;q<286;++q)T[q]=0;for(q=0;q<30;++q)I[q]=0}var K=2,Y=0,W=_,X=z-V&32767;if(G>2&&R==S(y-X))for(var J=Math.min(b,G)-1,Z=Math.min(32767,y),$=Math.min(258,G);X<=Z&&--W&&z!=V;){if(t[y+K]==t[y+K-X]){for(var tt=0;tt<$&&t[y+tt]==t[y+tt-X];++tt);if(tt>K){if(K=tt,Y=X,tt>J)break;var et=Math.min(X,tt-2),rt=0;for(q=0;q<et;++q){var nt=y-X+q+32768&32767,it=nt-x[nt]+32768&32767;it>rt&&(rt=it,V=nt)}}}X+=(z=V)-(V=x[z])+32768&32767}if(Y){k[P++]=268435456|p[K]<<18|g[Y];var ot=31&p[K],at=31&g[Y];O+=s[ot]+l[at],++T[257+ot],++I[at],F=y+K,++M}else k[P++]=t[y],++T[t[y]]}}d=j(t,A,c,k,T,I,O,P,U,y-U,d),c||(d=D(A,d,Q))}return L(f,0,n+N(d)+u)},V=function(){var t=1,e=0;return{p:function(r){for(var n=t,i=e,o=r.length,a=0;a!=o;){for(var s=Math.min(a+5552,o);a<s;++a)i+=n+=r[a];n%=65521,i%=65521}t=n,e=i},d:function(){return(t>>>8<<16|(255&e)<<8|e>>>8)+2*((255&t)<<23)}}},G=function(t,e,r,n,i){return z(t,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,r,n,!i)},q=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},K=function(t,e){var r=e.level,n=0==r?0:r<6?1:9==r?3:2;t[0]=120,t[1]=n<<6|(n?32-2*n:1)},Y=function(t){if(8!=(15&t[0])||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(32&t[1])throw"invalid zlib data: preset dictionaries not supported"};function W(t,e){void 0===e&&(e={});var r=V();r.p(t);var n=G(t,e,2,4);return K(n,e),q(n,n.length-4,r.d()),n}function X(t,e){return I((Y(t),t.subarray(2,-4)),e)}var J=function(){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this}();function Z(){J.console&&"function"==typeof J.console.log&&J.console.log.apply(J.console,arguments)}var $={log:Z,warn:function(t){J.console&&("function"==typeof J.console.warn?J.console.warn.apply(J.console,arguments):Z.call(null,arguments))},error:function(t){J.console&&("function"==typeof J.console.error?J.console.error.apply(J.console,arguments):Z(t))}};function tt(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){ot(n.response,e,r)},n.onerror=function(){$.error("could not download file")},n.send()}function et(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return e.status>=200&&e.status<=299}function rt(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(r){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var nt,it,ot=J.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,n.Z)(window))||window!==J?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=J.URL||J.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener","string"==typeof t?(i.href=t,i.origin!==location.origin?et(i.href)?tt(t,e,r):rt(i,i.target="_blank"):rt(i)):(i.href=n.createObjectURL(t),setTimeout((function(){n.revokeObjectURL(i.href)}),4e4),setTimeout((function(){rt(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download","string"==typeof t)if(et(t))tt(t,e,r);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout((function(){rt(i)}))}else navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!==(0,n.Z)(e)&&($.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}(t,r),e)}:function(t,e,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return tt(t,e,r);var o="application/octet-stream"===t.type,a=/constructor/i.test(J.HTMLElement)||J.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||o&&a)&&"object"===("undefined"==typeof FileReader?"undefined":(0,n.Z)(FileReader))){var l=new FileReader;l.onloadend=function(){var t=l.result;t=s?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},l.readAsDataURL(t)}else{var u=J.URL||J.webkitURL,c=u.createObjectURL(t);i?i.location=c:location.href=c,i=null,setTimeout((function(){u.revokeObjectURL(c)}),4e4)}});function at(t){var e;t=t||"",this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,o=r[n].process,a=i.exec(t);a&&(e=o(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),r=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==r.length&&(r="0"+r),"#"+t+e+r}}function st(t,e){var r=t[0],n=t[1],i=t[2],o=t[3];r=ut(r,n,i,o,e[0],7,-680876936),o=ut(o,r,n,i,e[1],12,-389564586),i=ut(i,o,r,n,e[2],17,606105819),n=ut(n,i,o,r,e[3],22,-1044525330),r=ut(r,n,i,o,e[4],7,-176418897),o=ut(o,r,n,i,e[5],12,1200080426),i=ut(i,o,r,n,e[6],17,-1473231341),n=ut(n,i,o,r,e[7],22,-45705983),r=ut(r,n,i,o,e[8],7,1770035416),o=ut(o,r,n,i,e[9],12,-1958414417),i=ut(i,o,r,n,e[10],17,-42063),n=ut(n,i,o,r,e[11],22,-1990404162),r=ut(r,n,i,o,e[12],7,1804603682),o=ut(o,r,n,i,e[13],12,-40341101),i=ut(i,o,r,n,e[14],17,-1502002290),r=ct(r,n=ut(n,i,o,r,e[15],22,1236535329),i,o,e[1],5,-165796510),o=ct(o,r,n,i,e[6],9,-1069501632),i=ct(i,o,r,n,e[11],14,643717713),n=ct(n,i,o,r,e[0],20,-373897302),r=ct(r,n,i,o,e[5],5,-701558691),o=ct(o,r,n,i,e[10],9,38016083),i=ct(i,o,r,n,e[15],14,-660478335),n=ct(n,i,o,r,e[4],20,-405537848),r=ct(r,n,i,o,e[9],5,568446438),o=ct(o,r,n,i,e[14],9,-1019803690),i=ct(i,o,r,n,e[3],14,-187363961),n=ct(n,i,o,r,e[8],20,1163531501),r=ct(r,n,i,o,e[13],5,-1444681467),o=ct(o,r,n,i,e[2],9,-51403784),i=ct(i,o,r,n,e[7],14,1735328473),r=ht(r,n=ct(n,i,o,r,e[12],20,-1926607734),i,o,e[5],4,-378558),o=ht(o,r,n,i,e[8],11,-2022574463),i=ht(i,o,r,n,e[11],16,1839030562),n=ht(n,i,o,r,e[14],23,-35309556),r=ht(r,n,i,o,e[1],4,-1530992060),o=ht(o,r,n,i,e[4],11,1272893353),i=ht(i,o,r,n,e[7],16,-155497632),n=ht(n,i,o,r,e[10],23,-1094730640),r=ht(r,n,i,o,e[13],4,681279174),o=ht(o,r,n,i,e[0],11,-358537222),i=ht(i,o,r,n,e[3],16,-722521979),n=ht(n,i,o,r,e[6],23,76029189),r=ht(r,n,i,o,e[9],4,-640364487),o=ht(o,r,n,i,e[12],11,-421815835),i=ht(i,o,r,n,e[15],16,530742520),r=ft(r,n=ht(n,i,o,r,e[2],23,-995338651),i,o,e[0],6,-198630844),o=ft(o,r,n,i,e[7],10,1126891415),i=ft(i,o,r,n,e[14],15,-1416354905),n=ft(n,i,o,r,e[5],21,-57434055),r=ft(r,n,i,o,e[12],6,1700485571),o=ft(o,r,n,i,e[3],10,-1894986606),i=ft(i,o,r,n,e[10],15,-1051523),n=ft(n,i,o,r,e[1],21,-2054922799),r=ft(r,n,i,o,e[8],6,1873313359),o=ft(o,r,n,i,e[15],10,-30611744),i=ft(i,o,r,n,e[6],15,-1560198380),n=ft(n,i,o,r,e[13],21,1309151649),r=ft(r,n,i,o,e[4],6,-145523070),o=ft(o,r,n,i,e[11],10,-1120210379),i=ft(i,o,r,n,e[2],15,718787259),n=ft(n,i,o,r,e[9],21,-343485551),t[0]=bt(r,t[0]),t[1]=bt(n,t[1]),t[2]=bt(i,t[2]),t[3]=bt(o,t[3])}function lt(t,e,r,n,i,o){return e=bt(bt(e,t),bt(n,o)),bt(e<<i|e>>>32-i,r)}function ut(t,e,r,n,i,o,a){return lt(e&r|~e&n,t,e,i,o,a)}function ct(t,e,r,n,i,o,a){return lt(e&n|r&~n,t,e,i,o,a)}function ht(t,e,r,n,i,o,a){return lt(e^r^n,t,e,i,o,a)}function ft(t,e,r,n,i,o,a){return lt(r^(e|~n),t,e,i,o,a)}function pt(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)st(n,At(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(st(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*r,st(n,i),n}function At(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}nt=J.atob.bind(J),it=J.btoa.bind(J);var dt="0123456789abcdef".split("");function gt(t){for(var e="",r=0;r<4;r++)e+=dt[t>>8*r+4&15]+dt[t>>8*r&15];return e}function yt(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function vt(t){return pt(t).map(yt).join("")}var mt="5d41402abc4b2a76b9719d911017c592"!=function(t){for(var e=0;e<t.length;e++)t[e]=gt(t[e]);return t.join("")}(pt("hello"));function bt(t,e){if(mt){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}function _t(t,e){var r,n,i,o;if(t!==r){for(var a=(i=t,o=1+(256/t.length>>0),new Array(o+1).join(i)),s=[],l=0;l<256;l++)s[l]=l;var u=0;for(l=0;l<256;l++){var c=s[l];u=(u+c+a.charCodeAt(l))%256,s[l]=s[u],s[u]=c}r=t,n=s}else s=n;var h=e.length,f=0,p=0,A="";for(l=0;l<h;l++)p=(p+(c=s[f=(f+1)%256]))%256,s[f]=s[p],s[p]=c,a=s[(s[f]+s[p])%256],A+=String.fromCharCode(e.charCodeAt(l)^a);return A}var wt={print:4,modify:8,copy:16,"annot-forms":32};function xt(t,e,r,n){this.v=1,this.r=2;var i=192;t.forEach((function(t){if(void 0!==wt.perm)throw new Error("Invalid permission: "+t);i+=wt[t]})),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var o=(e+this.padding).substr(0,32),a=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,a),this.P=-(1+(255^i)),this.encryptionKey=vt(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=_t(this.encryptionKey,this.padding)}function Et(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var i=t.charCodeAt(n);e+=i<33||35===i||37===i||40===i||41===i||47===i||60===i||62===i||91===i||93===i||123===i||125===i||i>126?"#"+("0"+i.toString(16)).slice(-2):t[n]}return e}function Bt(t){if("object"!==(0,n.Z)(t))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,n){if(n=n||!1,"string"!=typeof t||"function"!=typeof r||"boolean"!=typeof n)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var i=Math.random().toString(35);return e[t][i]=[r,!!n],i},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],0===Object.keys(e[r]).length&&delete e[r],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[r]){var a=e[r][o];try{a[0].apply(t,n)}catch(r){J.console&&$.error("jsPDF PubSub Error",r.message,r)}a[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Ct(t){if(!(this instanceof Ct))return new Ct(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function St(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function kt(t,e,r,n,i){if(!(this instanceof kt))return new kt(t,e,r,n,i);this.type="axial"===t?2:3,this.coords=e,this.colors=r,St.call(this,n,i)}function Tt(t,e,r,n,i){if(!(this instanceof Tt))return new Tt(t,e,r,n,i);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,St.call(this,n,i)}function Nt(t){var e,r="string"==typeof arguments[0]?arguments[0]:"p",i=arguments[1],o=arguments[2],a=arguments[3],s=[],l=1,u=16,c="S",h=null;"object"===(0,n.Z)(t=t||{})&&(r=t.orientation,i=t.unit||i,o=t.format||o,a=t.compress||t.compressPdf||a,null!==(h=t.encryption||null)&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),l="number"==typeof t.userUnit?Math.abs(t.userUnit):1,void 0!==t.precision&&(e=t.precision),void 0!==t.floatPrecision&&(u=t.floatPrecision),c=t.defaultPathOperation||"S"),s=t.filters||(!0===a?["FlateEncode"]:s),i=i||"mm",r=(""+(r||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,p={},A={internal:{},__private__:{}};A.__private__.PubSub=Bt;var d="1.3",g=A.__private__.getPdfVersion=function(){return d};A.__private__.setPdfVersion=function(t){d=t};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};A.__private__.getPageFormats=function(){return y};var v=A.__private__.getPageFormat=function(t){return y[t]};o=o||"a4";var m={COMPAT:"compat",ADVANCED:"advanced"},b=m.COMPAT;function _(){this.saveGraphicsState(),et(new Gt(mt,0,0,-mt,0,Dr()*mt).toString()+" cm"),this.setFontSize(this.getFontSize()/mt),c="n",b=m.ADVANCED}function w(){this.restoreGraphicsState(),c="S",b=m.COMPAT}var x=A.__private__.combineFontStyleAndFontWeight=function(t,e){if("bold"==t&&"normal"==e||"bold"==t&&400==e||"normal"==t&&"italic"==e||"bold"==t&&"italic"==e)throw new Error("Invalid Combination of fontweight and fontstyle");return e&&(t=400==e||"normal"===e?"italic"===t?"italic":"normal":700!=e&&"bold"!==e||"normal"!==t?(700==e?"bold":e)+""+t:"bold"),t};A.advancedAPI=function(t){var e=b===m.COMPAT;return e&&_.call(this),"function"!=typeof t||(t(this),e&&w.call(this)),this},A.compatAPI=function(t){var e=b===m.ADVANCED;return e&&w.call(this),"function"!=typeof t||(t(this),e&&_.call(this)),this},A.isAdvancedAPI=function(){return b===m.ADVANCED};var E,B=function(t){if(b!==m.ADVANCED)throw new Error(t+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},C=A.roundToPrecision=A.__private__.roundToPrecision=function(t,r){var n=e||r;if(isNaN(t)||isNaN(n))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return t.toFixed(n).replace(/0+$/,"")};E=A.hpf=A.__private__.hpf="number"==typeof u?function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return C(t,u)}:"smart"===u?function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return C(t,t>-1&&t<1?16:5)}:function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return C(t,16)};var S=A.f2=A.__private__.f2=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f2");return C(t,2)},k=A.__private__.f3=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f3");return C(t,3)},T=A.scale=A.__private__.scale=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.scale");return b===m.COMPAT?t*mt:b===m.ADVANCED?t:void 0},N=function(t){return b===m.COMPAT?Dr()-t:b===m.ADVANCED?t:void 0},L=function(t){return T(N(t))};A.__private__.setPrecision=A.setPrecision=function(t){"number"==typeof parseInt(t,10)&&(e=parseInt(t,10))};var I,M="00000000000000000000000000000000",O=A.__private__.getFileId=function(){return M},P=A.__private__.setFileId=function(t){return M=void 0!==t&&/^[a-fA-F0-9]{32}$/.test(t)?t.toUpperCase():M.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),null!==h&&(Ke=new xt(h.userPermissions,h.userPassword,h.ownerPassword,M)),M};A.setFileId=function(t){return P(t),this},A.getFileId=function(){return O()};var F=A.__private__.convertDateToPDFDate=function(t){var e=t.getTimezoneOffset(),r=e<0?"+":"-",n=Math.floor(Math.abs(e/60)),i=Math.abs(e%60),o=[r,H(n),"'",H(i),"'"].join("");return["D:",t.getFullYear(),H(t.getMonth()+1),H(t.getDate()),H(t.getHours()),H(t.getMinutes()),H(t.getSeconds()),o].join("")},U=A.__private__.convertPDFDateToDate=function(t){var e=parseInt(t.substr(2,4),10),r=parseInt(t.substr(6,2),10)-1,n=parseInt(t.substr(8,2),10),i=parseInt(t.substr(10,2),10),o=parseInt(t.substr(12,2),10),a=parseInt(t.substr(14,2),10);return new Date(e,r,n,i,o,a,0)},R=A.__private__.setCreationDate=function(t){var e;if(void 0===t&&(t=new Date),t instanceof Date)e=F(t);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(t))throw new Error("Invalid argument passed to jsPDF.setCreationDate");e=t}return I=e},D=A.__private__.getCreationDate=function(t){var e=I;return"jsDate"===t&&(e=U(I)),e};A.setCreationDate=function(t){return R(t),this},A.getCreationDate=function(t){return D(t)};var j,H=A.__private__.padd2=function(t){return("0"+parseInt(t)).slice(-2)},Q=A.__private__.padd2Hex=function(t){return("00"+(t=t.toString())).substr(t.length)},z=0,V=[],G=[],q=0,K=[],Y=[],W=!1,X=G,Z=function(){z=0,q=0,G=[],V=[],K=[],$t=Xt(),te=Xt()};A.__private__.setCustomOutputDestination=function(t){W=!0,X=t};var tt=function(t){W||(X=t)};A.__private__.resetCustomOutputDestination=function(){W=!1,X=G};var et=A.__private__.out=function(t){return t=t.toString(),q+=t.length+1,X.push(t),X},rt=A.__private__.write=function(t){return et(1===arguments.length?t.toString():Array.prototype.join.call(arguments," "))},nt=A.__private__.getArrayBuffer=function(t){for(var e=t.length,r=new ArrayBuffer(e),n=new Uint8Array(r);e--;)n[e]=t.charCodeAt(e);return r},st=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];A.__private__.getStandardFonts=function(){return st};var lt=t.fontSize||16;A.__private__.setFontSize=A.setFontSize=function(t){return lt=b===m.ADVANCED?t/mt:t,this};var ut,ct=A.__private__.getFontSize=A.getFontSize=function(){return b===m.COMPAT?lt:lt*mt},ht=t.R2L||!1;A.__private__.setR2L=A.setR2L=function(t){return ht=t,this},A.__private__.getR2L=A.getR2L=function(){return ht};var ft,pt=A.__private__.setZoomMode=function(t){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(t))ut=t;else if(isNaN(t)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(t))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+t+'" is not recognized.');ut=t}else ut=parseInt(t,10)};A.__private__.getZoomMode=function(){return ut};var At,dt=A.__private__.setPageMode=function(t){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(t))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+t+'" is not recognized.');ft=t};A.__private__.getPageMode=function(){return ft};var gt=A.__private__.setLayoutMode=function(t){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(t))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+t+'" is not recognized.');At=t};A.__private__.getLayoutMode=function(){return At},A.__private__.setDisplayMode=A.setDisplayMode=function(t,e,r){return pt(t),gt(e),dt(r),this};var yt={title:"",subject:"",author:"",keywords:"",creator:""};A.__private__.getDocumentProperty=function(t){if(-1===Object.keys(yt).indexOf(t))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return yt[t]},A.__private__.getDocumentProperties=function(){return yt},A.__private__.setDocumentProperties=A.setProperties=A.setDocumentProperties=function(t){for(var e in yt)yt.hasOwnProperty(e)&&t[e]&&(yt[e]=t[e]);return this},A.__private__.setDocumentProperty=function(t,e){if(-1===Object.keys(yt).indexOf(t))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return yt[t]=e};var vt,mt,bt,_t,wt,St={},Lt={},It=[],Mt={},Ot={},Pt={},Ft={},Ut=null,Rt=0,Dt=[],jt=new Bt(A),Ht=t.hotfixes||[],Qt={},zt={},Vt=[],Gt=function t(e,r,n,i,o,a){if(!(this instanceof t))return new t(e,r,n,i,o,a);isNaN(e)&&(e=1),isNaN(r)&&(r=0),isNaN(n)&&(n=0),isNaN(i)&&(i=1),isNaN(o)&&(o=0),isNaN(a)&&(a=0),this._matrix=[e,r,n,i,o,a]};Object.defineProperty(Gt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(t){this._matrix[0]=t}}),Object.defineProperty(Gt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(t){this._matrix[1]=t}}),Object.defineProperty(Gt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(t){this._matrix[2]=t}}),Object.defineProperty(Gt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(t){this._matrix[3]=t}}),Object.defineProperty(Gt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(t){this._matrix[4]=t}}),Object.defineProperty(Gt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(t){this._matrix[5]=t}}),Object.defineProperty(Gt.prototype,"a",{get:function(){return this._matrix[0]},set:function(t){this._matrix[0]=t}}),Object.defineProperty(Gt.prototype,"b",{get:function(){return this._matrix[1]},set:function(t){this._matrix[1]=t}}),Object.defineProperty(Gt.prototype,"c",{get:function(){return this._matrix[2]},set:function(t){this._matrix[2]=t}}),Object.defineProperty(Gt.prototype,"d",{get:function(){return this._matrix[3]},set:function(t){this._matrix[3]=t}}),Object.defineProperty(Gt.prototype,"e",{get:function(){return this._matrix[4]},set:function(t){this._matrix[4]=t}}),Object.defineProperty(Gt.prototype,"f",{get:function(){return this._matrix[5]},set:function(t){this._matrix[5]=t}}),Object.defineProperty(Gt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Gt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Gt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Gt.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Gt.prototype.join=function(t){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(t)},Gt.prototype.multiply=function(t){var e=t.sx*this.sx+t.shy*this.shx,r=t.sx*this.shy+t.shy*this.sy,n=t.shx*this.sx+t.sy*this.shx,i=t.shx*this.shy+t.sy*this.sy,o=t.tx*this.sx+t.ty*this.shx+this.tx,a=t.tx*this.shy+t.ty*this.sy+this.ty;return new Gt(e,r,n,i,o,a)},Gt.prototype.decompose=function(){var t=this.sx,e=this.shy,r=this.shx,n=this.sy,i=this.tx,o=this.ty,a=Math.sqrt(t*t+e*e),s=(t/=a)*r+(e/=a)*n;r-=t*s,n-=e*s;var l=Math.sqrt(r*r+n*n);return s/=l,t*(n/=l)<e*(r/=l)&&(t=-t,e=-e,s=-s,a=-a),{scale:new Gt(a,0,0,l,0,0),translate:new Gt(1,0,0,1,i,o),rotate:new Gt(t,e,-e,t,0,0),skew:new Gt(1,0,s,1,0,0)}},Gt.prototype.toString=function(t){return this.join(" ")},Gt.prototype.inversed=function(){var t=this.sx,e=this.shy,r=this.shx,n=this.sy,i=this.tx,o=this.ty,a=1/(t*n-e*r),s=n*a,l=-e*a,u=-r*a,c=t*a;return new Gt(s,l,u,c,-s*i-u*o,-l*i-c*o)},Gt.prototype.applyToPoint=function(t){var e=t.x*this.sx+t.y*this.shx+this.tx,r=t.x*this.shy+t.y*this.sy+this.ty;return new Lr(e,r)},Gt.prototype.applyToRectangle=function(t){var e=this.applyToPoint(t),r=this.applyToPoint(new Lr(t.x+t.w,t.y+t.h));return new Ir(e.x,e.y,r.x-e.x,r.y-e.y)},Gt.prototype.clone=function(){var t=this.sx,e=this.shy,r=this.shx,n=this.sy,i=this.tx,o=this.ty;return new Gt(t,e,r,n,i,o)},A.Matrix=Gt;var qt=A.matrixMult=function(t,e){return e.multiply(t)},Kt=new Gt(1,0,0,1,0,0);A.unitMatrix=A.identityMatrix=Kt;var Yt=function(t,e){if(!Ot[t]){var r=(e instanceof kt?"Sh":"P")+(Object.keys(Mt).length+1).toString(10);e.id=r,Ot[t]=r,Mt[r]=e,jt.publish("addPattern",e)}};A.ShadingPattern=kt,A.TilingPattern=Tt,A.addShadingPattern=function(t,e){return B("addShadingPattern()"),Yt(t,e),this},A.beginTilingPattern=function(t){B("beginTilingPattern()"),Or(t.boundingBox[0],t.boundingBox[1],t.boundingBox[2]-t.boundingBox[0],t.boundingBox[3]-t.boundingBox[1],t.matrix)},A.endTilingPattern=function(t,e){B("endTilingPattern()"),e.stream=Y[j].join("\n"),Yt(t,e),jt.publish("endTilingPattern",e),Vt.pop().restore()};var Wt=A.__private__.newObject=function(){var t=Xt();return Jt(t,!0),t},Xt=A.__private__.newObjectDeferred=function(){return z++,V[z]=function(){return q},z},Jt=function(t,e){return e="boolean"==typeof e&&e,V[t]=q,e&&et(t+" 0 obj"),t},Zt=A.__private__.newAdditionalObject=function(){var t={objId:Xt(),content:""};return K.push(t),t},$t=Xt(),te=Xt(),ee=A.__private__.decodeColorString=function(t){var e=t.split(" ");if(2!==e.length||"g"!==e[1]&&"G"!==e[1])5!==e.length||"k"!==e[4]&&"K"!==e[4]||(e=[(1-e[0])*(1-e[3]),(1-e[1])*(1-e[3]),(1-e[2])*(1-e[3]),"r"]);else{var r=parseFloat(e[0]);e=[r,r,r,"r"]}for(var n="#",i=0;i<3;i++)n+=("0"+Math.floor(255*parseFloat(e[i])).toString(16)).slice(-2);return n},re=A.__private__.encodeColorString=function(t){var e;"string"==typeof t&&(t={ch1:t});var r=t.ch1,i=t.ch2,o=t.ch3,a=t.ch4,s="draw"===t.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof r&&"#"!==r.charAt(0)){var l=new at(r);if(l.ok)r=l.toHex();else if(!/^\d*\.?\d*$/.test(r))throw new Error('Invalid color "'+r+'" passed to jsPDF.encodeColorString.')}if("string"==typeof r&&/^#[0-9A-Fa-f]{3}$/.test(r)&&(r="#"+r[1]+r[1]+r[2]+r[2]+r[3]+r[3]),"string"==typeof r&&/^#[0-9A-Fa-f]{6}$/.test(r)){var u=parseInt(r.substr(1),16);r=u>>16&255,i=u>>8&255,o=255&u}if(void 0===i||void 0===a&&r===i&&i===o)if("string"==typeof r)e=r+" "+s[0];else if(2===t.precision)e=S(r/255)+" "+s[0];else e=k(r/255)+" "+s[0];else if(void 0===a||"object"===(0,n.Z)(a)){if(a&&!isNaN(a.a)&&0===a.a)return["1.","1.","1.",s[1]].join(" ");if("string"==typeof r)e=[r,i,o,s[1]].join(" ");else if(2===t.precision)e=[S(r/255),S(i/255),S(o/255),s[1]].join(" ");else e=[k(r/255),k(i/255),k(o/255),s[1]].join(" ")}else if("string"==typeof r)e=[r,i,o,a,s[2]].join(" ");else if(2===t.precision)e=[S(r),S(i),S(o),S(a),s[2]].join(" ");else e=[k(r),k(i),k(o),k(a),s[2]].join(" ");return e},ne=A.__private__.getFilters=function(){return s},ie=A.__private__.putStream=function(t){var e=(t=t||{}).data||"",r=t.filters||ne(),n=t.alreadyAppliedFilters||[],i=t.addLength1||!1,o=e.length,a=t.objectId,s=function(t){return t};if(null!==h&&void 0===a)throw new Error("ObjectId must be passed to putStream for file encryption");null!==h&&(s=Ke.encryptor(a,0));var l={};!0===r&&(r=["FlateEncode"]);var u=t.additionalKeyValues||[],c=(l=void 0!==Nt.API.processDataByFilters?Nt.API.processDataByFilters(e,r):{data:e,reverseChain:[]}).reverseChain+(Array.isArray(n)?n.join(" "):n.toString());if(0!==l.data.length&&(u.push({key:"Length",value:l.data.length}),!0===i&&u.push({key:"Length1",value:o})),0!=c.length)if(c.split("/").length-1==1)u.push({key:"Filter",value:c});else{u.push({key:"Filter",value:"["+c+"]"});for(var f=0;f<u.length;f+=1)if("DecodeParms"===u[f].key){for(var p=[],A=0;A<l.reverseChain.split("/").length-1;A+=1)p.push("null");p.push(u[f].value),u[f].value="["+p.join(" ")+"]"}}et("<<");for(var d=0;d<u.length;d++)et("/"+u[d].key+" "+u[d].value);et(">>"),0!==l.data.length&&(et("stream"),et(s(l.data)),et("endstream"))},oe=A.__private__.putPage=function(t){var e=t.number,r=t.data,n=t.objId,i=t.contentsObjId;Jt(n,!0),et("<</Type /Page"),et("/Parent "+t.rootDictionaryObjId+" 0 R"),et("/Resources "+t.resourceDictionaryObjId+" 0 R"),et("/MediaBox ["+parseFloat(E(t.mediaBox.bottomLeftX))+" "+parseFloat(E(t.mediaBox.bottomLeftY))+" "+E(t.mediaBox.topRightX)+" "+E(t.mediaBox.topRightY)+"]"),null!==t.cropBox&&et("/CropBox ["+E(t.cropBox.bottomLeftX)+" "+E(t.cropBox.bottomLeftY)+" "+E(t.cropBox.topRightX)+" "+E(t.cropBox.topRightY)+"]"),null!==t.bleedBox&&et("/BleedBox ["+E(t.bleedBox.bottomLeftX)+" "+E(t.bleedBox.bottomLeftY)+" "+E(t.bleedBox.topRightX)+" "+E(t.bleedBox.topRightY)+"]"),null!==t.trimBox&&et("/TrimBox ["+E(t.trimBox.bottomLeftX)+" "+E(t.trimBox.bottomLeftY)+" "+E(t.trimBox.topRightX)+" "+E(t.trimBox.topRightY)+"]"),null!==t.artBox&&et("/ArtBox ["+E(t.artBox.bottomLeftX)+" "+E(t.artBox.bottomLeftY)+" "+E(t.artBox.topRightX)+" "+E(t.artBox.topRightY)+"]"),"number"==typeof t.userUnit&&1!==t.userUnit&&et("/UserUnit "+t.userUnit),jt.publish("putPage",{objId:n,pageContext:Dt[e],pageNumber:e,page:r}),et("/Contents "+i+" 0 R"),et(">>"),et("endobj");var o=r.join("\n");return b===m.ADVANCED&&(o+="\nQ"),Jt(i,!0),ie({data:o,filters:ne(),objectId:i}),et("endobj"),n},ae=A.__private__.putPages=function(){var t,e,r=[];for(t=1;t<=Rt;t++)Dt[t].objId=Xt(),Dt[t].contentsObjId=Xt();for(t=1;t<=Rt;t++)r.push(oe({number:t,data:Y[t],objId:Dt[t].objId,contentsObjId:Dt[t].contentsObjId,mediaBox:Dt[t].mediaBox,cropBox:Dt[t].cropBox,bleedBox:Dt[t].bleedBox,trimBox:Dt[t].trimBox,artBox:Dt[t].artBox,userUnit:Dt[t].userUnit,rootDictionaryObjId:$t,resourceDictionaryObjId:te}));Jt($t,!0),et("<</Type /Pages");var n="/Kids [";for(e=0;e<Rt;e++)n+=r[e]+" 0 R ";et(n+"]"),et("/Count "+Rt),et(">>"),et("endobj"),jt.publish("postPutPages")},se=function(t){jt.publish("putFont",{font:t,out:et,newObject:Wt,putStream:ie}),!0!==t.isAlreadyPutted&&(t.objectNumber=Wt(),et("<<"),et("/Type /Font"),et("/BaseFont /"+Et(t.postScriptName)),et("/Subtype /Type1"),"string"==typeof t.encoding&&et("/Encoding /"+t.encoding),et("/FirstChar 32"),et("/LastChar 255"),et(">>"),et("endobj"))},le=function(){for(var t in St)St.hasOwnProperty(t)&&(!1===f||!0===f&&p.hasOwnProperty(t))&&se(St[t])},ue=function(t){t.objectNumber=Wt();var e=[];e.push({key:"Type",value:"/XObject"}),e.push({key:"Subtype",value:"/Form"}),e.push({key:"BBox",value:"["+[E(t.x),E(t.y),E(t.x+t.width),E(t.y+t.height)].join(" ")+"]"}),e.push({key:"Matrix",value:"["+t.matrix.toString()+"]"});var r=t.pages[1].join("\n");ie({data:r,additionalKeyValues:e,objectId:t.objectNumber}),et("endobj")},ce=function(){for(var t in Qt)Qt.hasOwnProperty(t)&&ue(Qt[t])},he=function(t,e){var r,n=[],i=1/(e-1);for(r=0;r<1;r+=i)n.push(r);if(n.push(1),0!=t[0].offset){var o={offset:0,color:t[0].color};t.unshift(o)}if(1!=t[t.length-1].offset){var a={offset:1,color:t[t.length-1].color};t.push(a)}for(var s="",l=0,u=0;u<n.length;u++){for(r=n[u];r>t[l+1].offset;)l++;var c=t[l].offset,h=(r-c)/(t[l+1].offset-c),f=t[l].color,p=t[l+1].color;s+=Q(Math.round((1-h)*f[0]+h*p[0]).toString(16))+Q(Math.round((1-h)*f[1]+h*p[1]).toString(16))+Q(Math.round((1-h)*f[2]+h*p[2]).toString(16))}return s.trim()},fe=function(t,e){e||(e=21);var r=Wt(),n=he(t.colors,e),i=[];i.push({key:"FunctionType",value:"0"}),i.push({key:"Domain",value:"[0.0 1.0]"}),i.push({key:"Size",value:"["+e+"]"}),i.push({key:"BitsPerSample",value:"8"}),i.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),i.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ie({data:n,additionalKeyValues:i,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:r}),et("endobj"),t.objectNumber=Wt(),et("<< /ShadingType "+t.type),et("/ColorSpace /DeviceRGB");var o="/Coords ["+E(parseFloat(t.coords[0]))+" "+E(parseFloat(t.coords[1]))+" ";2===t.type?o+=E(parseFloat(t.coords[2]))+" "+E(parseFloat(t.coords[3])):o+=E(parseFloat(t.coords[2]))+" "+E(parseFloat(t.coords[3]))+" "+E(parseFloat(t.coords[4]))+" "+E(parseFloat(t.coords[5])),et(o+="]"),t.matrix&&et("/Matrix ["+t.matrix.toString()+"]"),et("/Function "+r+" 0 R"),et("/Extend [true true]"),et(">>"),et("endobj")},pe=function(t,e){var r=Xt(),n=Wt();e.push({resourcesOid:r,objectOid:n}),t.objectNumber=n;var i=[];i.push({key:"Type",value:"/Pattern"}),i.push({key:"PatternType",value:"1"}),i.push({key:"PaintType",value:"1"}),i.push({key:"TilingType",value:"1"}),i.push({key:"BBox",value:"["+t.boundingBox.map(E).join(" ")+"]"}),i.push({key:"XStep",value:E(t.xStep)}),i.push({key:"YStep",value:E(t.yStep)}),i.push({key:"Resources",value:r+" 0 R"}),t.matrix&&i.push({key:"Matrix",value:"["+t.matrix.toString()+"]"}),ie({data:t.stream,additionalKeyValues:i,objectId:t.objectNumber}),et("endobj")},Ae=function(t){var e;for(e in Mt)Mt.hasOwnProperty(e)&&(Mt[e]instanceof kt?fe(Mt[e]):Mt[e]instanceof Tt&&pe(Mt[e],t))},de=function(t){for(var e in t.objectNumber=Wt(),et("<<"),t)switch(e){case"opacity":et("/ca "+S(t[e]));break;case"stroke-opacity":et("/CA "+S(t[e]))}et(">>"),et("endobj")},ge=function(){var t;for(t in Pt)Pt.hasOwnProperty(t)&&de(Pt[t])},ye=function(){for(var t in et("/XObject <<"),Qt)Qt.hasOwnProperty(t)&&Qt[t].objectNumber>=0&&et("/"+t+" "+Qt[t].objectNumber+" 0 R");jt.publish("putXobjectDict"),et(">>")},ve=function(){Ke.oid=Wt(),et("<<"),et("/Filter /Standard"),et("/V "+Ke.v),et("/R "+Ke.r),et("/U <"+Ke.toHexString(Ke.U)+">"),et("/O <"+Ke.toHexString(Ke.O)+">"),et("/P "+Ke.P),et(">>"),et("endobj")},me=function(){for(var t in et("/Font <<"),St)St.hasOwnProperty(t)&&(!1===f||!0===f&&p.hasOwnProperty(t))&&et("/"+t+" "+St[t].objectNumber+" 0 R");et(">>")},be=function(){if(Object.keys(Mt).length>0){for(var t in et("/Shading <<"),Mt)Mt.hasOwnProperty(t)&&Mt[t]instanceof kt&&Mt[t].objectNumber>=0&&et("/"+t+" "+Mt[t].objectNumber+" 0 R");jt.publish("putShadingPatternDict"),et(">>")}},_e=function(t){if(Object.keys(Mt).length>0){for(var e in et("/Pattern <<"),Mt)Mt.hasOwnProperty(e)&&Mt[e]instanceof A.TilingPattern&&Mt[e].objectNumber>=0&&Mt[e].objectNumber<t&&et("/"+e+" "+Mt[e].objectNumber+" 0 R");jt.publish("putTilingPatternDict"),et(">>")}},we=function(){if(Object.keys(Pt).length>0){var t;for(t in et("/ExtGState <<"),Pt)Pt.hasOwnProperty(t)&&Pt[t].objectNumber>=0&&et("/"+t+" "+Pt[t].objectNumber+" 0 R");jt.publish("putGStateDict"),et(">>")}},xe=function(t){Jt(t.resourcesOid,!0),et("<<"),et("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),me(),be(),_e(t.objectOid),we(),ye(),et(">>"),et("endobj")},Ee=function(){var t=[];le(),ge(),ce(),Ae(t),jt.publish("putResources"),t.forEach(xe),xe({resourcesOid:te,objectOid:Number.MAX_SAFE_INTEGER}),jt.publish("postPutResources")},Be=function(){jt.publish("putAdditionalObjects");for(var t=0;t<K.length;t++){var e=K[t];Jt(e.objId,!0),et(e.content),et("endobj")}jt.publish("postPutAdditionalObjects")},Ce=function(t){Lt[t.fontName]=Lt[t.fontName]||{},Lt[t.fontName][t.fontStyle]=t.id},Se=function(t,e,r,n,i){var o={id:"F"+(Object.keys(St).length+1).toString(10),postScriptName:t,fontName:e,fontStyle:r,encoding:n,isStandardFont:i||!1,metadata:{}};return jt.publish("addFont",{font:o,instance:this}),St[o.id]=o,Ce(o),o.id},ke=function(t){for(var e=0,r=st.length;e<r;e++){var n=Se.call(this,t[e][0],t[e][1],t[e][2],st[e][3],!0);!1===f&&(p[n]=!0);var i=t[e][0].split("-");Ce({id:n,fontName:i[0],fontStyle:i[1]||""})}jt.publish("addFonts",{fonts:St,dictionary:Lt})},Te=function(t){return t.foo=function(){try{return t.apply(this,arguments)}catch(t){var e=t.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var r="Error in function "+e.split("\n")[0].split("<")[0]+": "+t.message;if(!J.console)throw new Error(r);J.console.error(r,t),J.alert&&alert(r)}},t.foo.bar=t,t.foo},Ne=function(t,e){var r,n,i,o,a,s,l,u,c;if(i=(e=e||{}).sourceEncoding||"Unicode",a=e.outputEncoding,(e.autoencode||a)&&St[vt].metadata&&St[vt].metadata[i]&&St[vt].metadata[i].encoding&&(o=St[vt].metadata[i].encoding,!a&&St[vt].encoding&&(a=St[vt].encoding),!a&&o.codePages&&(a=o.codePages[0]),"string"==typeof a&&(a=o[a]),a)){for(l=!1,s=[],r=0,n=t.length;r<n;r++)(u=a[t.charCodeAt(r)])?s.push(String.fromCharCode(u)):s.push(t[r]),s[r].charCodeAt(0)>>8&&(l=!0);t=s.join("")}for(r=t.length;void 0===l&&0!==r;)t.charCodeAt(r-1)>>8&&(l=!0),r--;if(!l)return t;for(s=e.noBOM?[]:[254,255],r=0,n=t.length;r<n;r++){if((c=(u=t.charCodeAt(r))>>8)>>8)throw new Error("Character at position "+r+" of string '"+t+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");s.push(c),s.push(u-(c<<8))}return String.fromCharCode.apply(void 0,s)},Le=A.__private__.pdfEscape=A.pdfEscape=function(t,e){return Ne(t,e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ie=A.__private__.beginPage=function(t){Y[++Rt]=[],Dt[Rt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(t[0]),topRightY:Number(t[1])}},Pe(Rt),tt(Y[j])},Me=function(t,e){var n,i,a;switch(r=e||r,"string"==typeof t&&(n=v(t.toLowerCase()),Array.isArray(n)&&(i=n[0],a=n[1])),Array.isArray(t)&&(i=t[0]*mt,a=t[1]*mt),isNaN(i)&&(i=o[0],a=o[1]),(i>14400||a>14400)&&($.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),i=Math.min(14400,i),a=Math.min(14400,a)),o=[i,a],r.substr(0,1)){case"l":a>i&&(o=[a,i]);break;case"p":i>a&&(o=[a,i])}Ie(o),Ar(fr),et(wr),0!==kr&&et(kr+" J"),0!==Tr&&et(Tr+" j"),jt.publish("addPage",{pageNumber:Rt})},Oe=function(t){t>0&&t<=Rt&&(Y.splice(t,1),Dt.splice(t,1),Rt--,j>Rt&&(j=Rt),this.setPage(j))},Pe=function(t){t>0&&t<=Rt&&(j=t)},Fe=A.__private__.getNumberOfPages=A.getNumberOfPages=function(){return Y.length-1},Ue=function(t,e,r){var n,i=void 0;return r=r||{},t=void 0!==t?t:St[vt].fontName,e=void 0!==e?e:St[vt].fontStyle,n=t.toLowerCase(),void 0!==Lt[n]&&void 0!==Lt[n][e]?i=Lt[n][e]:void 0!==Lt[t]&&void 0!==Lt[t][e]?i=Lt[t][e]:!1===r.disableWarning&&$.warn("Unable to look up font label for font '"+t+"', '"+e+"'. Refer to getFontList() for available fonts."),i||r.noFallback||null==(i=Lt.times[e])&&(i=Lt.times.normal),i},Re=A.__private__.putInfo=function(){var t=Wt(),e=function(t){return t};for(var r in null!==h&&(e=Ke.encryptor(t,0)),et("<<"),et("/Producer ("+Le(e("jsPDF "+Nt.version))+")"),yt)yt.hasOwnProperty(r)&&yt[r]&&et("/"+r.substr(0,1).toUpperCase()+r.substr(1)+" ("+Le(e(yt[r]))+")");et("/CreationDate ("+Le(e(I))+")"),et(">>"),et("endobj")},De=A.__private__.putCatalog=function(t){var e=(t=t||{}).rootDictionaryObjId||$t;switch(Wt(),et("<<"),et("/Type /Catalog"),et("/Pages "+e+" 0 R"),ut||(ut="fullwidth"),ut){case"fullwidth":et("/OpenAction [3 0 R /FitH null]");break;case"fullheight":et("/OpenAction [3 0 R /FitV null]");break;case"fullpage":et("/OpenAction [3 0 R /Fit]");break;case"original":et("/OpenAction [3 0 R /XYZ null null 1]");break;default:var r=""+ut;"%"===r.substr(r.length-1)&&(ut=parseInt(ut)/100),"number"==typeof ut&&et("/OpenAction [3 0 R /XYZ null null "+S(ut)+"]")}switch(At||(At="continuous"),At){case"continuous":et("/PageLayout /OneColumn");break;case"single":et("/PageLayout /SinglePage");break;case"two":case"twoleft":et("/PageLayout /TwoColumnLeft");break;case"tworight":et("/PageLayout /TwoColumnRight")}ft&&et("/PageMode /"+ft),jt.publish("putCatalog"),et(">>"),et("endobj")},je=A.__private__.putTrailer=function(){et("trailer"),et("<<"),et("/Size "+(z+1)),et("/Root "+z+" 0 R"),et("/Info "+(z-1)+" 0 R"),null!==h&&et("/Encrypt "+Ke.oid+" 0 R"),et("/ID [ <"+M+"> <"+M+"> ]"),et(">>")},He=A.__private__.putHeader=function(){et("%PDF-"+d),et("%\xba\xdf\xac\xe0")},Qe=A.__private__.putXRef=function(){var t="0000000000";et("xref"),et("0 "+(z+1)),et("0000000000 65535 f ");for(var e=1;e<=z;e++)"function"==typeof V[e]?et((t+V[e]()).slice(-10)+" 00000 n "):void 0!==V[e]?et((t+V[e]).slice(-10)+" 00000 n "):et("0000000000 00000 n ")},ze=A.__private__.buildDocument=function(){Z(),tt(G),jt.publish("buildDocument"),He(),ae(),Be(),Ee(),null!==h&&ve(),Re(),De();var t=q;return Qe(),je(),et("startxref"),et(""+t),et("%%EOF"),tt(Y[j]),G.join("\n")},Ve=A.__private__.getBlob=function(t){return new Blob([nt(t)],{type:"application/pdf"})},Ge=A.output=A.__private__.output=Te((function(t,e){switch("string"==typeof(e=e||{})?e={filename:e}:e.filename=e.filename||"generated.pdf",t){case void 0:return ze();case"save":A.save(e.filename);break;case"arraybuffer":return nt(ze());case"blob":return Ve(ze());case"bloburi":case"bloburl":if(void 0!==J.URL&&"function"==typeof J.URL.createObjectURL)return J.URL&&J.URL.createObjectURL(Ve(ze()))||void 0;$.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var r="",n=ze();try{r=it(n)}catch(t){r=it(unescape(encodeURIComponent(n)))}return"data:application/pdf;filename="+e.filename+";base64,"+r;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(J)){var i="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",o=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';e.pdfObjectUrl&&(i=e.pdfObjectUrl,o="");var a='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+i+'"'+o+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(e)+");<\/script></body></html>",s=J.open();return null!==s&&s.document.write(a),s}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(J)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(e.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+e.filename+'" width="500px" height="400px" /></body></html>',u=J.open();if(null!==u){u.document.write(l);var c=this;u.document.documentElement.querySelector("#pdfViewer").onload=function(){u.document.title=e.filename,u.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(c.output("bloburl"))}}return u}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(J))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var h='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",e)+'"></iframe></body></html>',f=J.open();if(null!==f&&(f.document.write(h),f.document.title=e.filename),f||"undefined"==typeof safari)return f;break;case"datauri":case"dataurl":return J.document.location.href=this.output("datauristring",e);default:return null}})),qe=function(t){return!0===Array.isArray(Ht)&&Ht.indexOf(t)>-1};switch(i){case"pt":mt=1;break;case"mm":mt=72/25.4;break;case"cm":mt=72/2.54;break;case"in":mt=72;break;case"px":mt=1==qe("px_scaling")?.75:96/72;break;case"pc":case"em":mt=12;break;case"ex":mt=6;break;default:if("number"!=typeof i)throw new Error("Invalid unit: "+i);mt=i}var Ke=null;R(),P();var Ye=function(t){return null!==h?Ke.encryptor(t,0):function(t){return t}},We=A.__private__.getPageInfo=A.getPageInfo=function(t){if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Dt[t].objId,pageNumber:t,pageContext:Dt[t]}},Xe=A.__private__.getPageInfoByObjId=function(t){if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var e in Dt)if(Dt[e].objId===t)break;return We(e)},Je=A.__private__.getCurrentPageInfo=A.getCurrentPageInfo=function(){return{objId:Dt[j].objId,pageNumber:j,pageContext:Dt[j]}};A.addPage=function(){return Me.apply(this,arguments),this},A.setPage=function(){return Pe.apply(this,arguments),tt.call(this,Y[j]),this},A.insertPage=function(t){return this.addPage(),this.movePage(j,t),this},A.movePage=function(t,e){var r,n;if(t>e){r=Y[t],n=Dt[t];for(var i=t;i>e;i--)Y[i]=Y[i-1],Dt[i]=Dt[i-1];Y[e]=r,Dt[e]=n,this.setPage(e)}else if(t<e){r=Y[t],n=Dt[t];for(var o=t;o<e;o++)Y[o]=Y[o+1],Dt[o]=Dt[o+1];Y[e]=r,Dt[e]=n,this.setPage(e)}return this},A.deletePage=function(){return Oe.apply(this,arguments),this},A.__private__.text=A.text=function(t,e,r,i,o){var a,s,l,u,c,h,f,A,d,g=(i=i||{}).scope||this;if("number"==typeof t&&"number"==typeof e&&("string"==typeof r||Array.isArray(r))){var y=r;r=e,e=t,t=y}if(arguments[3]instanceof Gt==0?(l=arguments[4],u=arguments[5],"object"===(0,n.Z)(f=arguments[3])&&null!==f||("string"==typeof l&&(u=l,l=null),"string"==typeof f&&(u=f,f=null),"number"==typeof f&&(l=f,f=null),i={flags:f,angle:l,align:u})):(B("The transform parameter of text() with a Matrix value"),d=o),isNaN(e)||isNaN(r)||null==t)throw new Error("Invalid arguments passed to jsPDF.text");if(0===t.length)return g;var v="",_=!1,w="number"==typeof i.lineHeightFactor?i.lineHeightFactor:hr,x=g.internal.scaleFactor;function C(t){return t=t.split("\t").join(Array(i.TabLen||9).join(" ")),Le(t,f)}function S(t){for(var e,r=t.concat(),n=[],i=r.length;i--;)"string"==typeof(e=r.shift())?n.push(e):Array.isArray(t)&&(1===e.length||void 0===e[1]&&void 0===e[2])?n.push(e[0]):n.push([e[0],e[1],e[2]]);return n}function k(t,e){var r;if("string"==typeof t)r=e(t)[0];else if(Array.isArray(t)){for(var n,i,o=t.concat(),a=[],s=o.length;s--;)"string"==typeof(n=o.shift())?a.push(e(n)[0]):Array.isArray(n)&&"string"==typeof n[0]&&(i=e(n[0],n[1],n[2]),a.push([i[0],i[1],i[2]]));r=a}return r}var N=!1,L=!0;if("string"==typeof t)N=!0;else if(Array.isArray(t)){var I=t.concat();s=[];for(var M,O=I.length;O--;)("string"!=typeof(M=I.shift())||Array.isArray(M)&&"string"!=typeof M[0])&&(L=!1);N=L}if(!1===N)throw new Error('Type of text must be string or Array. "'+t+'" is not recognized.');"string"==typeof t&&(t=t.match(/[\r?\n]/)?t.split(/\r\n|\r|\n/g):[t]);var P=lt/g.internal.scaleFactor,F=P*(w-1);switch(i.baseline){case"bottom":r-=F;break;case"top":r+=P-F;break;case"hanging":r+=P-2*F;break;case"middle":r+=P/2-F}if((h=i.maxWidth||0)>0&&("string"==typeof t?t=g.splitTextToSize(t,h):"[object Array]"===Object.prototype.toString.call(t)&&(t=t.reduce((function(t,e){return t.concat(g.splitTextToSize(e,h))}),[]))),a={text:t,x:e,y:r,options:i,mutex:{pdfEscape:Le,activeFontKey:vt,fonts:St,activeFontSize:lt}},jt.publish("preProcessText",a),t=a.text,l=(i=a.options).angle,d instanceof Gt==0&&l&&"number"==typeof l){l*=Math.PI/180,0===i.rotationDirection&&(l=-l),b===m.ADVANCED&&(l=-l);var U=Math.cos(l),R=Math.sin(l);d=new Gt(U,R,-R,U,0,0)}else l&&l instanceof Gt&&(d=l);b!==m.ADVANCED||d||(d=Kt),void 0!==(c=i.charSpace||Cr)&&(v+=E(T(c))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(A=i.horizontalScale)&&(v+=E(100*A)+" Tz\n"),i.lang;var D=-1,j=void 0!==i.renderingMode?i.renderingMode:i.stroke,H=g.internal.getCurrentPageInfo().pageContext;switch(j){case 0:case!1:case"fill":D=0;break;case 1:case!0:case"stroke":D=1;break;case 2:case"fillThenStroke":D=2;break;case 3:case"invisible":D=3;break;case 4:case"fillAndAddForClipping":D=4;break;case 5:case"strokeAndAddPathForClipping":D=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":D=6;break;case 7:case"addToPathForClipping":D=7}var Q=void 0!==H.usedRenderingMode?H.usedRenderingMode:-1;-1!==D?v+=D+" Tr\n":-1!==Q&&(v+="0 Tr\n"),-1!==D&&(H.usedRenderingMode=D),u=i.align||"left";var z,V=lt*w,G=g.internal.pageSize.getWidth(),q=St[vt];c=i.charSpace||Cr,h=i.maxWidth||0,f=Object.assign({autoencode:!0,noBOM:!0},i.flags);var K=[];if("[object Array]"===Object.prototype.toString.call(t)){var Y;s=S(t),"left"!==u&&(z=s.map((function(t){return g.getStringUnitWidth(t,{font:q,charSpace:c,fontSize:lt,doKerning:!1})*lt/x})));var W,X=0;if("right"===u){e-=z[0],t=[],O=s.length;for(var J=0;J<O;J++)0===J?(W=vr(e),Y=mr(r)):(W=T(X-z[J]),Y=-V),t.push([s[J],W,Y]),X=z[J]}else if("center"===u){e-=z[0]/2,t=[],O=s.length;for(var Z=0;Z<O;Z++)0===Z?(W=vr(e),Y=mr(r)):(W=T((X-z[Z])/2),Y=-V),t.push([s[Z],W,Y]),X=z[Z]}else if("left"===u){t=[],O=s.length;for(var $=0;$<O;$++)t.push(s[$])}else{if("justify"!==u)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');t=[],O=s.length,h=0!==h?h:G;for(var tt=0;tt<O;tt++)Y=0===tt?mr(r):-V,W=0===tt?vr(e):0,tt<O-1?K.push(E(T((h-z[tt])/(s[tt].split(" ").length-1)))):K.push(0),t.push([s[tt],W,Y])}}var rt="boolean"==typeof i.R2L?i.R2L:ht;!0===rt&&(t=k(t,(function(t,e,r){return[t.split("").reverse().join(""),e,r]}))),a={text:t,x:e,y:r,options:i,mutex:{pdfEscape:Le,activeFontKey:vt,fonts:St,activeFontSize:lt}},jt.publish("postProcessText",a),t=a.text,_=a.mutex.isHex||!1;var nt=St[vt].encoding;"WinAnsiEncoding"!==nt&&"StandardEncoding"!==nt||(t=k(t,(function(t,e,r){return[C(t),e,r]}))),s=S(t),t=[];for(var it,ot,at,st=0,ut=1,ct=Array.isArray(s[0])?ut:st,ft="",pt=function(t,e,r){var n="";return r instanceof Gt?(r="number"==typeof i.angle?qt(r,new Gt(1,0,0,1,t,e)):qt(new Gt(1,0,0,1,t,e),r),b===m.ADVANCED&&(r=qt(new Gt(1,0,0,-1,0,0),r)),n=r.join(" ")+" Tm\n"):n=E(t)+" "+E(e)+" Td\n",n},At=0;At<s.length;At++){switch(ft="",ct){case ut:at=(_?"<":"(")+s[At][0]+(_?">":")"),it=parseFloat(s[At][1]),ot=parseFloat(s[At][2]);break;case st:at=(_?"<":"(")+s[At]+(_?">":")"),it=vr(e),ot=mr(r)}void 0!==K&&void 0!==K[At]&&(ft=K[At]+" Tw\n"),0===At?t.push(ft+pt(it,ot,d)+at):ct===st?t.push(ft+at):ct===ut&&t.push(ft+pt(it,ot,d)+at)}t=ct===st?t.join(" Tj\nT* "):t.join(" Tj\n"),t+=" Tj\n";var dt="BT\n/";return dt+=vt+" "+lt+" Tf\n",dt+=E(lt*w)+" TL\n",dt+=Er+"\n",dt+=v,dt+=t,et(dt+="ET"),p[vt]=!0,g};var Ze=A.__private__.clip=A.clip=function(t){return et("evenodd"===t?"W*":"W"),this};A.clipEvenOdd=function(){return Ze("evenodd")},A.__private__.discardPath=A.discardPath=function(){return et("n"),this};var $e=A.__private__.isValidStyle=function(t){var e=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(t)&&(e=!0),e};A.__private__.setDefaultPathOperation=A.setDefaultPathOperation=function(t){return $e(t)&&(c=t),this};var tr=A.__private__.getStyle=A.getStyle=function(t){var e=c;switch(t){case"D":case"S":e="S";break;case"F":e="f";break;case"FD":case"DF":e="B";break;case"f":case"f*":case"B":case"B*":e=t}return e},er=A.close=function(){return et("h"),this};A.stroke=function(){return et("S"),this},A.fill=function(t){return rr("f",t),this},A.fillEvenOdd=function(t){return rr("f*",t),this},A.fillStroke=function(t){return rr("B",t),this},A.fillStrokeEvenOdd=function(t){return rr("B*",t),this};var rr=function(t,e){"object"===(0,n.Z)(e)?or(e,t):et(t)},nr=function(t){null===t||b===m.ADVANCED&&void 0===t||(t=tr(t),et(t))};function ir(t,e,r,n,i){var o=new Tt(e||this.boundingBox,r||this.xStep,n||this.yStep,this.gState,i||this.matrix);o.stream=this.stream;var a=t+"$$"+this.cloneIndex+++"$$";return Yt(a,o),o}var or=function(t,e){var r=Ot[t.key],n=Mt[r];if(n instanceof kt)et("q"),et(ar(e)),n.gState&&A.setGState(n.gState),et(t.matrix.toString()+" cm"),et("/"+r+" sh"),et("Q");else if(n instanceof Tt){var i=new Gt(1,0,0,-1,0,Dr());t.matrix&&(i=i.multiply(t.matrix||Kt),r=ir.call(n,t.key,t.boundingBox,t.xStep,t.yStep,i).id),et("q"),et("/Pattern cs"),et("/"+r+" scn"),n.gState&&A.setGState(n.gState),et(e),et("Q")}},ar=function(t){switch(t){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},sr=A.moveTo=function(t,e){return et(E(T(t))+" "+E(L(e))+" m"),this},lr=A.lineTo=function(t,e){return et(E(T(t))+" "+E(L(e))+" l"),this},ur=A.curveTo=function(t,e,r,n,i,o){return et([E(T(t)),E(L(e)),E(T(r)),E(L(n)),E(T(i)),E(L(o)),"c"].join(" ")),this};A.__private__.line=A.line=function(t,e,r,n,i){if(isNaN(t)||isNaN(e)||isNaN(r)||isNaN(n)||!$e(i))throw new Error("Invalid arguments passed to jsPDF.line");return b===m.COMPAT?this.lines([[r-t,n-e]],t,e,[1,1],i||"S"):this.lines([[r-t,n-e]],t,e,[1,1]).stroke()},A.__private__.lines=A.lines=function(t,e,r,n,i,o){var a,s,l,u,c,h,f,p,A,d,g,y;if("number"==typeof t&&(y=r,r=e,e=t,t=y),n=n||[1,1],o=o||!1,isNaN(e)||isNaN(r)||!Array.isArray(t)||!Array.isArray(n)||!$e(i)||"boolean"!=typeof o)throw new Error("Invalid arguments passed to jsPDF.lines");for(sr(e,r),a=n[0],s=n[1],u=t.length,d=e,g=r,l=0;l<u;l++)2===(c=t[l]).length?(d=c[0]*a+d,g=c[1]*s+g,lr(d,g)):(h=c[0]*a+d,f=c[1]*s+g,p=c[2]*a+d,A=c[3]*s+g,d=c[4]*a+d,g=c[5]*s+g,ur(h,f,p,A,d,g));return o&&er(),nr(i),this},A.path=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=r.c;switch(r.op){case"m":sr(n[0],n[1]);break;case"l":lr(n[0],n[1]);break;case"c":ur.apply(this,n);break;case"h":er()}}return this},A.__private__.rect=A.rect=function(t,e,r,n,i){if(isNaN(t)||isNaN(e)||isNaN(r)||isNaN(n)||!$e(i))throw new Error("Invalid arguments passed to jsPDF.rect");return b===m.COMPAT&&(n=-n),et([E(T(t)),E(L(e)),E(T(r)),E(T(n)),"re"].join(" ")),nr(i),this},A.__private__.triangle=A.triangle=function(t,e,r,n,i,o,a){if(isNaN(t)||isNaN(e)||isNaN(r)||isNaN(n)||isNaN(i)||isNaN(o)||!$e(a))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[r-t,n-e],[i-r,o-n],[t-i,e-o]],t,e,[1,1],a,!0),this},A.__private__.roundedRect=A.roundedRect=function(t,e,r,n,i,o,a){if(isNaN(t)||isNaN(e)||isNaN(r)||isNaN(n)||isNaN(i)||isNaN(o)||!$e(a))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var s=4/3*(Math.SQRT2-1);return i=Math.min(i,.5*r),o=Math.min(o,.5*n),this.lines([[r-2*i,0],[i*s,0,i,o-o*s,i,o],[0,n-2*o],[0,o*s,-i*s,o,-i,o],[2*i-r,0],[-i*s,0,-i,-o*s,-i,-o],[0,2*o-n],[0,-o*s,i*s,-o,i,-o]],t+i,e,[1,1],a,!0),this},A.__private__.ellipse=A.ellipse=function(t,e,r,n,i){if(isNaN(t)||isNaN(e)||isNaN(r)||isNaN(n)||!$e(i))throw new Error("Invalid arguments passed to jsPDF.ellipse");var o=4/3*(Math.SQRT2-1)*r,a=4/3*(Math.SQRT2-1)*n;return sr(t+r,e),ur(t+r,e-a,t+o,e-n,t,e-n),ur(t-o,e-n,t-r,e-a,t-r,e),ur(t-r,e+a,t-o,e+n,t,e+n),ur(t+o,e+n,t+r,e+a,t+r,e),nr(i),this},A.__private__.circle=A.circle=function(t,e,r,n){if(isNaN(t)||isNaN(e)||isNaN(r)||!$e(n))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(t,e,r,r,n)},A.setFont=function(t,e,r){return r&&(e=x(e,r)),vt=Ue(t,e,{disableWarning:!1}),this};var cr=A.__private__.getFont=A.getFont=function(){return St[Ue.apply(A,arguments)]};A.__private__.getFontList=A.getFontList=function(){var t,e,r={};for(t in Lt)if(Lt.hasOwnProperty(t))for(e in r[t]=[],Lt[t])Lt[t].hasOwnProperty(e)&&r[t].push(e);return r},A.addFont=function(t,e,r,n,i){var o=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==o.indexOf(arguments[3])?i=arguments[3]:arguments[3]&&-1==o.indexOf(arguments[3])&&(r=x(r,n)),i=i||"Identity-H",Se.call(this,t,e,r,i)};var hr,fr=t.lineWidth||.200025,pr=A.__private__.getLineWidth=A.getLineWidth=function(){return fr},Ar=A.__private__.setLineWidth=A.setLineWidth=function(t){return fr=t,et(E(T(t))+" w"),this};A.__private__.setLineDash=Nt.API.setLineDash=Nt.API.setLineDashPattern=function(t,e){if(t=t||[],e=e||0,isNaN(e)||!Array.isArray(t))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return t=t.map((function(t){return E(T(t))})).join(" "),e=E(T(e)),et("["+t+"] "+e+" d"),this};var dr=A.__private__.getLineHeight=A.getLineHeight=function(){return lt*hr};A.__private__.getLineHeight=A.getLineHeight=function(){return lt*hr};var gr=A.__private__.setLineHeightFactor=A.setLineHeightFactor=function(t){return"number"==typeof(t=t||1.15)&&(hr=t),this},yr=A.__private__.getLineHeightFactor=A.getLineHeightFactor=function(){return hr};gr(t.lineHeight);var vr=A.__private__.getHorizontalCoordinate=function(t){return T(t)},mr=A.__private__.getVerticalCoordinate=function(t){return b===m.ADVANCED?t:Dt[j].mediaBox.topRightY-Dt[j].mediaBox.bottomLeftY-T(t)},br=A.__private__.getHorizontalCoordinateString=A.getHorizontalCoordinateString=function(t){return E(vr(t))},_r=A.__private__.getVerticalCoordinateString=A.getVerticalCoordinateString=function(t){return E(mr(t))},wr=t.strokeColor||"0 G";A.__private__.getStrokeColor=A.getDrawColor=function(){return ee(wr)},A.__private__.setStrokeColor=A.setDrawColor=function(t,e,r,n){return wr=re({ch1:t,ch2:e,ch3:r,ch4:n,pdfColorType:"draw",precision:2}),et(wr),this};var xr=t.fillColor||"0 g";A.__private__.getFillColor=A.getFillColor=function(){return ee(xr)},A.__private__.setFillColor=A.setFillColor=function(t,e,r,n){return xr=re({ch1:t,ch2:e,ch3:r,ch4:n,pdfColorType:"fill",precision:2}),et(xr),this};var Er=t.textColor||"0 g",Br=A.__private__.getTextColor=A.getTextColor=function(){return ee(Er)};A.__private__.setTextColor=A.setTextColor=function(t,e,r,n){return Er=re({ch1:t,ch2:e,ch3:r,ch4:n,pdfColorType:"text",precision:3}),this};var Cr=t.charSpace,Sr=A.__private__.getCharSpace=A.getCharSpace=function(){return parseFloat(Cr||0)};A.__private__.setCharSpace=A.setCharSpace=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Cr=t,this};var kr=0;A.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},A.__private__.setLineCap=A.setLineCap=function(t){var e=A.CapJoinStyles[t];if(void 0===e)throw new Error("Line cap style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return kr=e,et(e+" J"),this};var Tr=0;A.__private__.setLineJoin=A.setLineJoin=function(t){var e=A.CapJoinStyles[t];if(void 0===e)throw new Error("Line join style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Tr=e,et(e+" j"),this},A.__private__.setLineMiterLimit=A.__private__.setMiterLimit=A.setLineMiterLimit=A.setMiterLimit=function(t){if(t=t||0,isNaN(t))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return et(E(T(t))+" M"),this},A.GState=Ct,A.setGState=function(t){(t="string"==typeof t?Pt[Ft[t]]:Nr(null,t)).equals(Ut)||(et("/"+t.id+" gs"),Ut=t)};var Nr=function(t,e){if(!t||!Ft[t]){var r=!1;for(var n in Pt)if(Pt.hasOwnProperty(n)&&Pt[n].equals(e)){r=!0;break}if(r)e=Pt[n];else{var i="GS"+(Object.keys(Pt).length+1).toString(10);Pt[i]=e,e.id=i}return t&&(Ft[t]=e.id),jt.publish("addGState",e),e}};A.addGState=function(t,e){return Nr(t,e),this},A.saveGraphicsState=function(){return et("q"),It.push({key:vt,size:lt,color:Er}),this},A.restoreGraphicsState=function(){et("Q");var t=It.pop();return vt=t.key,lt=t.size,Er=t.color,Ut=null,this},A.setCurrentTransformationMatrix=function(t){return et(t.toString()+" cm"),this},A.comment=function(t){return et("#"+t),this};var Lr=function(t,e){var r=t||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return r},set:function(t){isNaN(t)||(r=parseFloat(t))}});var n=e||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return n},set:function(t){isNaN(t)||(n=parseFloat(t))}});var i="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return i},set:function(t){i=t.toString()}}),this},Ir=function(t,e,r,n){Lr.call(this,t,e),this.type="rect";var i=r||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return i},set:function(t){isNaN(t)||(i=parseFloat(t))}});var o=n||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return o},set:function(t){isNaN(t)||(o=parseFloat(t))}}),this},Mr=function(){this.page=Rt,this.currentPage=j,this.pages=Y.slice(0),this.pagesContext=Dt.slice(0),this.x=bt,this.y=_t,this.matrix=wt,this.width=Ur(j),this.height=Dr(j),this.outputDestination=X,this.id="",this.objectNumber=-1};Mr.prototype.restore=function(){Rt=this.page,j=this.currentPage,Dt=this.pagesContext,Y=this.pages,bt=this.x,_t=this.y,wt=this.matrix,Rr(j,this.width),jr(j,this.height),X=this.outputDestination};var Or=function(t,e,r,n,i){Vt.push(new Mr),Rt=j=0,Y=[],bt=t,_t=e,wt=i,Ie([r,n])},Pr=function(t){if(zt[t])Vt.pop().restore();else{var e=new Mr,r="Xo"+(Object.keys(Qt).length+1).toString(10);e.id=r,zt[t]=r,Qt[r]=e,jt.publish("addFormObject",e),Vt.pop().restore()}};for(var Fr in A.beginFormObject=function(t,e,r,n,i){return Or(t,e,r,n,i),this},A.endFormObject=function(t){return Pr(t),this},A.doFormObject=function(t,e){var r=Qt[zt[t]];return et("q"),et(e.toString()+" cm"),et("/"+r.id+" Do"),et("Q"),this},A.getFormObject=function(t){var e=Qt[zt[t]];return{x:e.x,y:e.y,width:e.width,height:e.height,matrix:e.matrix}},A.save=function(t,e){return t=t||"generated.pdf",(e=e||{}).returnPromise=e.returnPromise||!1,!1===e.returnPromise?(ot(Ve(ze()),t),"function"==typeof ot.unload&&J.setTimeout&&setTimeout(ot.unload,911),this):new Promise((function(e,r){try{var n=ot(Ve(ze()),t);"function"==typeof ot.unload&&J.setTimeout&&setTimeout(ot.unload,911),e(n)}catch(t){r(t.message)}}))},Nt.API)Nt.API.hasOwnProperty(Fr)&&("events"===Fr&&Nt.API.events.length?function(t,e){var r,n,i;for(i=e.length-1;-1!==i;i--)r=e[i][0],n=e[i][1],t.subscribe.apply(t,[r].concat("function"==typeof n?[n]:n))}(jt,Nt.API.events):A[Fr]=Nt.API[Fr]);var Ur=A.getPageWidth=function(t){return(Dt[t=t||j].mediaBox.topRightX-Dt[t].mediaBox.bottomLeftX)/mt},Rr=A.setPageWidth=function(t,e){Dt[t].mediaBox.topRightX=e*mt+Dt[t].mediaBox.bottomLeftX},Dr=A.getPageHeight=function(t){return(Dt[t=t||j].mediaBox.topRightY-Dt[t].mediaBox.bottomLeftY)/mt},jr=A.setPageHeight=function(t,e){Dt[t].mediaBox.topRightY=e*mt+Dt[t].mediaBox.bottomLeftY};return A.internal={pdfEscape:Le,getStyle:tr,getFont:cr,getFontSize:ct,getCharSpace:Sr,getTextColor:Br,getLineHeight:dr,getLineHeightFactor:yr,getLineWidth:pr,write:rt,getHorizontalCoordinate:vr,getVerticalCoordinate:mr,getCoordinateString:br,getVerticalCoordinateString:_r,collections:{},newObject:Wt,newAdditionalObject:Zt,newObjectDeferred:Xt,newObjectDeferredBegin:Jt,getFilters:ne,putStream:ie,events:jt,scaleFactor:mt,pageSize:{getWidth:function(){return Ur(j)},setWidth:function(t){Rr(j,t)},getHeight:function(){return Dr(j)},setHeight:function(t){jr(j,t)}},encryptionOptions:h,encryption:Ke,getEncryptor:Ye,output:Ge,getNumberOfPages:Fe,pages:Y,out:et,f2:S,f3:k,getPageInfo:We,getPageInfoByObjId:Xe,getCurrentPageInfo:Je,getPDFVersion:g,Point:Lr,Rectangle:Ir,Matrix:Gt,hasHotfix:qe},Object.defineProperty(A.internal.pageSize,"width",{get:function(){return Ur(j)},set:function(t){Rr(j,t)},enumerable:!0,configurable:!0}),Object.defineProperty(A.internal.pageSize,"height",{get:function(){return Dr(j)},set:function(t){jr(j,t)},enumerable:!0,configurable:!0}),ke.call(A,st),vt="F1",Me(o,r),jt.publish("initialized"),A}xt.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},xt.prototype.toHexString=function(t){return t.split("").map((function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)})).join("")},xt.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},xt.prototype.processOwnerPassword=function(t,e){return _t(vt(e).substr(0,5),t)},xt.prototype.encryptor=function(t,e){var r=vt(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(t){return _t(r,t)}},Ct.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||(0,n.Z)(t)!==(0,n.Z)(this))return!1;var i=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e))return!1;if(this[e]!==t[e])return!1;i++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&i--;return 0===i},Nt.API={events:[]},Nt.version="2.5.1";var Lt=Nt.API,It=1,Mt=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ot=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Pt=function(t){return t.toFixed(2)},Ft=function(t){return t.toFixed(5)};Lt.__acroform__={};var Ut=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Rt=function(t){return t*It},Dt=function(t){var e=new re,r=ge.internal.getHeight(t)||0,n=ge.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Pt(n)),Number(Pt(r))],e},jt=Lt.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},Ht=Lt.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},Qt=Lt.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(t&1<<e)?0:1},zt=Lt.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Qt(t,e-1)},Vt=Lt.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return jt(t,e-1)},Gt=Lt.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Ht(t,e-1)},qt=Lt.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=t[0],o=t[1],a=t[2],s=t[3],l={};return l.lowerLeft_X=r(i)||0,l.lowerLeft_Y=n(o+s)||0,l.upperRight_X=r(i+a)||0,l.upperRight_Y=n(o)||0,[Number(Pt(l.lowerLeft_X)),Number(Pt(l.lowerLeft_Y)),Number(Pt(l.upperRight_X)),Number(Pt(l.upperRight_Y))]},Kt=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=Yt(t,r),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Pt(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=Dt(t);return o.scope=t.scope,o.stream=e.join("\n"),o}},Yt=function(t,e){var r=0===t.fontSize?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},i=(e=")"==(e="("==e.substr(0,1)?e.substr(1):e).substr(e.length-1)?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map((function(t){return t.split("\n")})):i.map((function(t){return[t]}));var o=r,a=ge.internal.getHeight(t)||0;a=a<0?-a:a;var s=ge.internal.getWidth(t)||0;s=s<0?-s:s;var l=function(e,r,n){if(e+1<i.length){var o=r+" "+i[e+1][0];return Wt(o,t,n).width<=s-4}return!1};o++;t:for(;o>0;){e="",o--;var u,c,h=Wt("3",t,o).height,f=t.multiline?a-o:(a-h)/2,p=f+=2,A=0,d=0,g=0;if(o<=0){e="(...) Tj\n",e+="% Width of Text: "+Wt(e,t,o=12).width+", FieldWidth:"+s+"\n";break}for(var y="",v=0,m=0;m<i.length;m++)if(i.hasOwnProperty(m)){var b=!1;if(1!==i[m].length&&g!==i[m].length-1){if((h+2)*(v+2)+2>a)continue t;y+=i[m][g],b=!0,d=m,m--}else{y=" "==(y+=i[m][g]+" ").substr(y.length-1)?y.substr(0,y.length-1):y;var _=parseInt(m),w=l(_,y,o),x=m>=i.length-1;if(w&&!x){y+=" ",g=0;continue}if(w||x){if(x)d=_;else if(t.multiline&&(h+2)*(v+2)+2>a)continue t}else{if(!t.multiline)continue t;if((h+2)*(v+2)+2>a)continue t;d=_}}for(var E="",B=A;B<=d;B++){var C=i[B];if(t.multiline){if(B===d){E+=C[g]+" ",g=(g+1)%C.length;continue}if(B===A){E+=C[C.length-1]+" ";continue}}E+=C[0]+" "}switch(E=" "==E.substr(E.length-1)?E.substr(0,E.length-1):E,c=Wt(E,t,o).width,t.textAlign){case"right":u=s-c-2;break;case"center":u=(s-c)/2;break;default:u=2}e+=Pt(u)+" "+Pt(p)+" Td\n",e+="("+Mt(E)+") Tj\n",e+=-Pt(u)+" 0 Td\n",p=-(o+2),c=0,A=b?d:d+1,v++,y=""}break}return n.text=e,n.fontSize=o,n},Wt=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},Xt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Jt=function(t,e){var r={type:"reference",object:t};void 0===e.internal.getPageInfo(t.page).pageContext.annotations.find((function(t){return t.type===r.type&&t.object===r.object}))&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},Zt=function(t,e){if(e.scope=t,void 0!==t.internal&&(void 0===t.internal.acroformPlugin||!1===t.internal.acroformPlugin.isInitialized)){if(ie.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Xt)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");It=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new ne,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",(function(){var e;(e=t).internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})),t.internal.events.subscribe("buildDocument",(function(){!function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var e=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];n.objId=void 0,n.hasAnnotation&&Jt(n,t)}}(t)})),t.internal.events.subscribe("putCatalog",(function(){!function(t){if(void 0===t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(t)})),t.internal.events.subscribe("postPutPages",(function(e){!function(t,e){var r=!t;for(var i in t||(e.internal.newObjectDeferredBegin(e.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),e.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),t=t||e.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(t.hasOwnProperty(i)){var o=t[i],a=[],s=o.Rect;if(o.Rect&&(o.Rect=qt(o.Rect,e)),e.internal.newObjectDeferredBegin(o.objId,!0),o.DA=ge.createDefaultAppearanceStream(o),"object"===(0,n.Z)(o)&&"function"==typeof o.getKeyValueListForStream&&(a=o.getKeyValueListForStream()),o.Rect=s,o.hasAppearanceStream&&!o.appearanceStreamContent){var l=Kt(o);a.push({key:"AP",value:"<</N "+l+">>"}),e.internal.acroformPlugin.xForms.push(l)}if(o.appearanceStreamContent){var u="";for(var c in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(c)){var h=o.appearanceStreamContent[c];if(u+="/"+c+" ",u+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var i in h)if(h.hasOwnProperty(i)){var f=h[i];"function"==typeof f&&(f=f.call(e,o)),u+="/"+i+" "+f+" ",e.internal.acroformPlugin.xForms.indexOf(f)>=0||e.internal.acroformPlugin.xForms.push(f)}}else"function"==typeof(f=h)&&(f=f.call(e,o)),u+="/"+i+" "+f,e.internal.acroformPlugin.xForms.indexOf(f)>=0||e.internal.acroformPlugin.xForms.push(f);u+=">>"}a.push({key:"AP",value:"<<\n"+u+">>"})}e.internal.putStream({additionalKeyValues:a,objectId:o.objId}),e.internal.out("endobj")}r&&function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var i=r,o=t[r];e.internal.newObjectDeferredBegin(o.objId,!0),"object"===(0,n.Z)(o)&&"function"==typeof o.putStream&&o.putStream(),delete t[i]}}(e.internal.acroformPlugin.xForms,e)}(e,t)})),t.internal.acroformPlugin.isInitialized=!0}},$t=Lt.__acroform__.arrayToPdfArray=function(t,e,r){var i=function(t){return t};if(Array.isArray(t)){for(var o="[",a=0;a<t.length;a++)switch(0!==a&&(o+=" "),(0,n.Z)(t[a])){case"boolean":case"number":case"object":o+=t[a].toString();break;case"string":"/"!==t[a].substr(0,1)?(void 0!==e&&r&&(i=r.internal.getEncryptor(e)),o+="("+Mt(i(t[a].toString()))+")"):o+=t[a].toString()}return o+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},te=function(t,e,r){var n=function(t){return t};return void 0!==e&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+Mt(n(t))+")"},ee=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ee.prototype.toString=function(){return this.objId+" 0 R"},ee.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ee.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter((function(t){return"content"!=t&&"appearanceStreamContent"!=t&&"scope"!=t&&"objId"!=t&&"_"!=t.substring(0,1)}));for(var r in e)if(!1===Object.getOwnPropertyDescriptor(this,e[r]).configurable){var n=e[r],i=this[n];i&&(Array.isArray(i)?t.push({key:n,value:$t(i,this.objId,this.scope)}):i instanceof ee?(i.scope=this.scope,t.push({key:n,value:i.objId+" 0 R"})):"function"!=typeof i&&t.push({key:n,value:i}))}return t};var re=function(){ee.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){t=e.trim()},get:function(){return t||null}})};Ut(re,ee);var ne=function(){ee.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var e=function(t){return t};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+Mt(e(t))+")"}},set:function(e){t=e}})};Ut(ne,ee);var ie=function t(){ee.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute F supplied.');e=t}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(zt(e,3))},set:function(t){!0===Boolean(t)?this.F=Vt(e,3):this.F=Gt(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute Ff supplied.');r=t}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==n.length)return n},set:function(t){n=void 0!==t?t:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(t){n[0]=t}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(t){n[1]=t}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(t){n[2]=t}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(t){n[3]=t}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(t){switch(t){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=t;break;default:throw new Error('Invalid value "'+t+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof fe)return;o="FieldObject"+t.FieldNum++}var e=function(t){return t};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+Mt(e(o))+")"},set:function(t){o=t.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(t){o=t}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(t){a=t}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(t){s=t}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(t){l=t}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===u?50/It:u},set:function(t){u=t}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(t){c=t}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof fe||this instanceof Ae))return te(h,this.objId,this.scope)},set:function(t){t=t.toString(),h=t}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof ue==0?te(f,this.objId,this.scope):f},set:function(t){t=t.toString(),f=this instanceof ue==0?"("===t.substr(0,1)?Ot(t.substr(1,t.length-2)):Ot(t):t}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ue==1?Ot(f.substr(1,f.length-1)):f},set:function(t){t=t.toString(),f=this instanceof ue==1?"/"+t:t}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(t){this.V=t}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof ue==0?te(p,this.objId,this.scope):p},set:function(t){t=t.toString(),p=this instanceof ue==0?"("===t.substr(0,1)?Ot(t.substr(1,t.length-2)):Ot(t):t}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ue==1?Ot(p.substr(1,p.length-1)):p},set:function(t){t=t.toString(),p=this instanceof ue==1?"/"+t:t}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var A,d=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return d},set:function(t){t=Boolean(t),d=t}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(A)return A},set:function(t){A=t}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(zt(this.Ff,1))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,1):this.Ff=Gt(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(zt(this.Ff,2))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,2):this.Ff=Gt(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(zt(this.Ff,3))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,3):this.Ff=Gt(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==g)return g},set:function(t){if(-1===[0,1,2].indexOf(t))throw new Error('Invalid value "'+t+'" for attribute Q supplied.');g=t}}),Object.defineProperty(this,"textAlign",{get:function(){var t;switch(g){case 0:default:t="left";break;case 1:t="center";break;case 2:t="right"}return t},configurable:!0,enumerable:!0,set:function(t){switch(t){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};Ut(ie,ee);var oe=function(){ie.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){t=e}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return $t(e,this.objId,this.scope)},set:function(t){var r,n;n=[],"string"==typeof(r=t)&&(n=function(t,e,r){r||(r=1);for(var n,i=[];n=e.exec(t);)i.push(n[r]);return i}(r,/\((.*?)\)/g)),e=n}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();-1!==e.indexOf(t)&&(e.splice(e.indexOf(t),1),!1!==r););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(zt(this.Ff,18))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,18):this.Ff=Gt(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(zt(this.Ff,19))},set:function(t){!0===this.combo&&(!0===Boolean(t)?this.Ff=Vt(this.Ff,19):this.Ff=Gt(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(zt(this.Ff,20))},set:function(t){!0===Boolean(t)?(this.Ff=Vt(this.Ff,20),e.sort()):this.Ff=Gt(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(zt(this.Ff,22))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,22):this.Ff=Gt(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(zt(this.Ff,23))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,23):this.Ff=Gt(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(zt(this.Ff,27))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,27):this.Ff=Gt(this.Ff,27)}}),this.hasAppearanceStream=!1};Ut(oe,ie);var ae=function(){oe.call(this),this.fontName="helvetica",this.combo=!1};Ut(ae,oe);var se=function(){ae.call(this),this.combo=!0};Ut(se,ae);var le=function(){se.call(this),this.edit=!0};Ut(le,se);var ue=function(){ie.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(zt(this.Ff,15))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,15):this.Ff=Gt(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(zt(this.Ff,16))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,16):this.Ff=Gt(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(zt(this.Ff,17))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,17):this.Ff=Gt(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(zt(this.Ff,26))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,26):this.Ff=Gt(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(t){return t};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(e).length){var r,n=[];for(r in n.push("<<"),e)n.push("/"+r+" ("+Mt(t(e[r]))+")");return n.push(">>"),n.join("\n")}},set:function(t){"object"===(0,n.Z)(t)&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){"string"==typeof t&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(e){t="/"+e}})};Ut(ue,ie);var ce=function(){ue.call(this),this.pushButton=!0};Ut(ce,ue);var he=function(){ue.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=void 0!==e?e:[]}})};Ut(he,ue);var fe=function(){var t,e;ie.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(t){e=t}});var r,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(t){return t};this.scope&&(t=this.scope.internal.getEncryptor(this.objId));var e,r=[];for(e in r.push("<<"),i)r.push("/"+e+" ("+Mt(t(i[e]))+")");return r.push(">>"),r.join("\n")},set:function(t){"object"===(0,n.Z)(t)&&(i=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(t){"string"==typeof t&&(i.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ge.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ut(fe,ie),he.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},he.prototype.createOption=function(t){var e=new fe;return e.Parent=this,e.optionName=t,this.Kids.push(e),ye.call(this.scope,e),e};var pe=function(){ue.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ge.CheckBox.createAppearanceStream()};Ut(pe,ue);var Ae=function(){ie.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(zt(this.Ff,13))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,13):this.Ff=Gt(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(zt(this.Ff,21))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,21):this.Ff=Gt(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(zt(this.Ff,23))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,23):this.Ff=Gt(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(zt(this.Ff,24))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,24):this.Ff=Gt(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(zt(this.Ff,25))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,25):this.Ff=Gt(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(zt(this.Ff,26))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,26):this.Ff=Gt(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ut(Ae,ie);var de=function(){Ae.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(zt(this.Ff,14))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,14):this.Ff=Gt(this.Ff,14)}}),this.password=!0};Ut(de,Ae);var ge={CheckBox:{createAppearanceStream:function(){return{N:{On:ge.CheckBox.YesNormal},D:{On:ge.CheckBox.YesPushDown,Off:ge.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Dt(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),o=Yt(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Pt(ge.internal.getWidth(t))+" "+Pt(ge.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Pt(o.fontSize)+" Tf "+i),r.push("BT"),r.push(o.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join("\n"),e},YesNormal:function(t){var e=Dt(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),i=[],o=ge.internal.getHeight(t),a=ge.internal.getWidth(t),s=Yt(t,t.caption);return i.push("1 g"),i.push("0 0 "+Pt(a)+" "+Pt(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Pt(a-1)+" "+Pt(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+Pt(s.fontSize)+" Tf "+n),i.push(s.text),i.push("ET"),i.push("Q"),e.stream=i.join("\n"),e},OffPushDown:function(t){var e=Dt(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Pt(ge.internal.getWidth(t))+" "+Pt(ge.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join("\n"),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:ge.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=ge.RadioButton.Circle.YesNormal,e.D[t]=ge.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Dt(t);e.scope=t.scope;var r=[],n=ge.internal.getWidth(t)<=ge.internal.getHeight(t)?ge.internal.getWidth(t)/4:ge.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=ge.internal.Bezier_C,o=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Ft(ge.internal.getWidth(t)/2)+" "+Ft(ge.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join("\n"),e},YesPushDown:function(t){var e=Dt(t);e.scope=t.scope;var r=[],n=ge.internal.getWidth(t)<=ge.internal.getHeight(t)?ge.internal.getWidth(t)/4:ge.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*ge.internal.Bezier_C).toFixed(5)),a=Number((n*ge.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ft(ge.internal.getWidth(t)/2)+" "+Ft(ge.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),r.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),r.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),r.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Ft(ge.internal.getWidth(t)/2)+" "+Ft(ge.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join("\n"),e},OffPushDown:function(t){var e=Dt(t);e.scope=t.scope;var r=[],n=ge.internal.getWidth(t)<=ge.internal.getHeight(t)?ge.internal.getWidth(t)/4:ge.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*ge.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ft(ge.internal.getWidth(t)/2)+" "+Ft(ge.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),r.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),r.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),r.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join("\n"),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:ge.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=ge.RadioButton.Cross.YesNormal,e.D[t]=ge.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Dt(t);e.scope=t.scope;var r=[],n=ge.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Pt(ge.internal.getWidth(t)-2)+" "+Pt(ge.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Pt(n.x1.x)+" "+Pt(n.x1.y)+" m"),r.push(Pt(n.x2.x)+" "+Pt(n.x2.y)+" l"),r.push(Pt(n.x4.x)+" "+Pt(n.x4.y)+" m"),r.push(Pt(n.x3.x)+" "+Pt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join("\n"),e},YesPushDown:function(t){var e=Dt(t);e.scope=t.scope;var r=ge.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Pt(ge.internal.getWidth(t))+" "+Pt(ge.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Pt(ge.internal.getWidth(t)-2)+" "+Pt(ge.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Pt(r.x1.x)+" "+Pt(r.x1.y)+" m"),n.push(Pt(r.x2.x)+" "+Pt(r.x2.y)+" l"),n.push(Pt(r.x4.x)+" "+Pt(r.x4.y)+" m"),n.push(Pt(r.x3.x)+" "+Pt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join("\n"),e},OffPushDown:function(t){var e=Dt(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Pt(ge.internal.getWidth(t))+" "+Pt(ge.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join("\n"),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};ge.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=ge.internal.getWidth(t),r=ge.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},ge.internal.getWidth=function(t){var e=0;return"object"===(0,n.Z)(t)&&(e=Rt(t.Rect[2])),e},ge.internal.getHeight=function(t){var e=0;return"object"===(0,n.Z)(t)&&(e=Rt(t.Rect[3])),e};var ye=Lt.addField=function(t){if(Zt(this,t),!(t instanceof ie))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Lt.AcroFormChoiceField=oe,Lt.AcroFormListBox=ae,Lt.AcroFormComboBox=se,Lt.AcroFormEditBox=le,Lt.AcroFormButton=ue,Lt.AcroFormPushButton=ce,Lt.AcroFormRadioButton=he,Lt.AcroFormCheckBox=pe,Lt.AcroFormTextField=Ae,Lt.AcroFormPasswordField=de,Lt.AcroFormAppearance=ge,Lt.AcroForm={ChoiceField:oe,ListBox:ae,ComboBox:se,EditBox:le,Button:ue,PushButton:ce,RadioButton:he,CheckBox:pe,TextField:Ae,PasswordField:de,Appearance:ge},Nt.AcroForm={ChoiceField:oe,ListBox:ae,ComboBox:se,EditBox:le,Button:ue,PushButton:ce,RadioButton:he,CheckBox:pe,TextField:Ae,PasswordField:de,Appearance:ge};var ve=Nt.AcroForm;function me(t){return t.reduce((function(t,e,r){return t[e]=r,t}),{})}!function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(t,n){var i,o,a,s,l,u=e;if("RGBA"===(n=n||e)||void 0!==t.data&&t.data instanceof Uint8ClampedArray&&"height"in t&&"width"in t)return"RGBA";if(x(t))for(l in r)for(a=r[l],i=0;i<a.length;i+=1){for(s=!0,o=0;o<a[i].length;o+=1)if(void 0!==a[i][o]&&a[i][o]!==t[o]){s=!1;break}if(!0===s){u=l;break}}else for(l in r)for(a=r[l],i=0;i<a.length;i+=1){for(s=!0,o=0;o<a[i].length;o+=1)if(void 0!==a[i][o]&&a[i][o]!==t.charCodeAt(o)){s=!1;break}if(!0===s){u=l;break}}return u===e&&n!==e&&(u=n),u},o=function t(e){for(var r=this.internal.write,n=this.internal.putStream,i=(0,this.internal.getFilters)();-1!==i.indexOf("FlateEncode");)i.splice(i.indexOf("FlateEncode"),1);e.objectId=this.internal.newObject();var o=[];if(o.push({key:"Type",value:"/XObject"}),o.push({key:"Subtype",value:"/Image"}),o.push({key:"Width",value:e.width}),o.push({key:"Height",value:e.height}),e.colorSpace===y.INDEXED?o.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(e.palette.length/3-1)+" "+("sMask"in e&&void 0!==e.sMask?e.objectId+2:e.objectId+1)+" 0 R]"}):(o.push({key:"ColorSpace",value:"/"+e.colorSpace}),e.colorSpace===y.DEVICE_CMYK&&o.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),o.push({key:"BitsPerComponent",value:e.bitsPerComponent}),"decodeParameters"in e&&void 0!==e.decodeParameters&&o.push({key:"DecodeParms",value:"<<"+e.decodeParameters+">>"}),"transparency"in e&&Array.isArray(e.transparency)){for(var a="",s=0,l=e.transparency.length;s<l;s++)a+=e.transparency[s]+" "+e.transparency[s]+" ";o.push({key:"Mask",value:"["+a+"]"})}void 0!==e.sMask&&o.push({key:"SMask",value:e.objectId+1+" 0 R"});var u=void 0!==e.filter?["/"+e.filter]:void 0;if(n({data:e.data,additionalKeyValues:o,alreadyAppliedFilters:u,objectId:e.objectId}),r("endobj"),"sMask"in e&&void 0!==e.sMask){var c="/Predictor "+e.predictor+" /Colors 1 /BitsPerComponent "+e.bitsPerComponent+" /Columns "+e.width,h={width:e.width,height:e.height,colorSpace:"DeviceGray",bitsPerComponent:e.bitsPerComponent,decodeParameters:c,data:e.sMask};"filter"in e&&(h.filter=e.filter),t.call(this,h)}if(e.colorSpace===y.INDEXED){var f=this.internal.newObject();n({data:B(new Uint8Array(e.palette)),objectId:f}),r("endobj")}},a=function(){var t=this.internal.collections.addImage_images;for(var e in t)o.call(this,t[e])},s=function(){var t,e=this.internal.collections.addImage_images,r=this.internal.write;for(var n in e)r("/I"+(t=e[n]).index,t.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",s))},u=function(){var t=this.internal.collections.addImage_images;return l.call(this),t},c=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(e){return"function"==typeof t["process"+e.toUpperCase()]},f=function(t){return"object"===(0,n.Z)(t)&&1===t.nodeType},p=function(e,r){if("IMG"===e.nodeName&&e.hasAttribute("src")){var n=""+e.getAttribute("src");if(0===n.indexOf("data:image/"))return nt(unescape(n).split("base64,").pop());var i=t.loadFile(n,!0);if(void 0!==i)return i}if("CANVAS"===e.nodeName){if(0===e.width||0===e.height)throw new Error("Given canvas must have data. Canvas width: "+e.width+", height: "+e.height);var o;switch(r){case"PNG":o="image/png";break;case"WEBP":o="image/webp";break;default:o="image/jpeg"}return nt(e.toDataURL(o,1).split("base64,").pop())}},A=function(t){var e=this.internal.collections.addImage_images;if(e)for(var r in e)if(t===e[r].alias)return e[r]},d=function(t,e,r){return t||e||(t=-96,e=-96),t<0&&(t=-1*r.width*72/t/this.internal.scaleFactor),e<0&&(e=-1*r.height*72/e/this.internal.scaleFactor),0===t&&(t=e*r.width/r.height),0===e&&(e=t*r.height/r.width),[t,e]},g=function(t,e,r,n,i,o){var a=d.call(this,r,n,i),s=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=u.call(this);if(r=a[0],n=a[1],c[i.index]=i,o){o*=Math.PI/180;var h=Math.cos(o),f=Math.sin(o),p=function(t){return t.toFixed(4)},A=[p(h),p(f),p(-1*f),p(h),0,0,"cm"]}this.internal.write("q"),o?(this.internal.write([1,"0","0",1,s(t),l(e+n),"cm"].join(" ")),this.internal.write(A.join(" ")),this.internal.write([s(r),"0","0",s(n),"0","0","cm"].join(" "))):this.internal.write([s(r),"0","0",s(n),s(t),l(e+n),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+i.index+" Do"),this.internal.write("Q")},y=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},m=t.__addimage__.sHashCode=function(t){var e,r,n=0;if("string"==typeof t)for(r=t.length,e=0;e<r;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;else if(x(t))for(r=t.byteLength/2,e=0;e<r;e++)n=(n<<5)-n+t[e],n|=0;return n},b=t.__addimage__.validateStringAsBase64=function(t){(t=t||"").toString().trim();var e=!0;return 0===t.length&&(e=!1),t.length%4!=0&&(e=!1),!1===/^[A-Za-z0-9+/]+$/.test(t.substr(0,t.length-2))&&(e=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(t.substr(-2))&&(e=!1),e},_=t.__addimage__.extractImageFromDataUrl=function(t){var e=(t=t||"").split("base64,"),r=null;if(2===e.length){var n=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(e[0]);Array.isArray(n)&&(r={mimeType:n[1],charset:n[2],data:e[1]})}return r},w=t.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};t.__addimage__.isArrayBuffer=function(t){return w()&&t instanceof ArrayBuffer};var x=t.__addimage__.isArrayBufferView=function(t){return w()&&"undefined"!=typeof Uint32Array&&(t instanceof Int8Array||t instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)},E=t.__addimage__.binaryStringToUint8Array=function(t){for(var e=t.length,r=new Uint8Array(e),n=0;n<e;n++)r[n]=t.charCodeAt(n);return r},B=t.__addimage__.arrayBufferToBinaryString=function(t){for(var e="",r=x(t)?t:new Uint8Array(t),n=0;n<r.length;n+=8192)e+=String.fromCharCode.apply(null,r.subarray(n,n+8192));return e};t.addImage=function(){var t,r,i,o,a,s,u,c,h;if("number"==typeof arguments[1]?(r=e,i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=arguments[5],c=arguments[6],h=arguments[7]):(r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[4],s=arguments[5],u=arguments[6],c=arguments[7],h=arguments[8]),"object"===(0,n.Z)(t=arguments[0])&&!f(t)&&"imageData"in t){var p=t;t=p.imageData,r=p.format||r||e,i=p.x||i||0,o=p.y||o||0,a=p.w||p.width||a,s=p.h||p.height||s,u=p.alias||u,c=p.compression||c,h=p.rotation||p.angle||h}var A=this.internal.getFilters();if(void 0===c&&-1!==A.indexOf("FlateEncode")&&(c="SLOW"),isNaN(i)||isNaN(o))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var d=C.call(this,t,r,u,c);return g.call(this,i,o,a,s,d,h),this};var C=function(r,n,o,a){var s,l,u;if("string"==typeof r&&i(r)===e){r=unescape(r);var d=S(r,!1);(""!==d||void 0!==(d=t.loadFile(r,!0)))&&(r=d)}if(f(r)&&(r=p(r,n)),n=i(r,n),!h(n))throw new Error("addImage does not support files of type '"+n+"', please ensure that a plugin for '"+n+"' support is added.");if((null==(u=o)||0===u.length)&&(o=function(t){return"string"==typeof t||x(t)?m(t):x(t.data)?m(t.data):null}(r)),(s=A.call(this,o))||(w()&&(r instanceof Uint8Array||"RGBA"===n||(l=r,r=E(r))),s=this["process"+n.toUpperCase()](r,c.call(this),o,function(e){return e&&"string"==typeof e&&(e=e.toUpperCase()),e in t.image_compression?e:v.NONE}(a),l)),!s)throw new Error("An unknown error occurred whilst processing the image.");return s},S=t.__addimage__.convertBase64ToBinaryString=function(t,e){var r;e="boolean"!=typeof e||e;var n,i="";if("string"==typeof t){n=null!==(r=_(t))?r.data:t;try{i=nt(n)}catch(t){if(e)throw b(n)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+t.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return i};t.getImageProperties=function(r){var n,o,a="";if(f(r)&&(r=p(r)),"string"==typeof r&&i(r)===e&&(""===(a=S(r,!1))&&(a=t.loadFile(r)||""),r=a),o=i(r),!h(o))throw new Error("addImage does not support files of type '"+o+"', please ensure that a plugin for '"+o+"' support is added.");if(!w()||r instanceof Uint8Array||(r=E(r)),!(n=this["process"+o.toUpperCase()](r)))throw new Error("An unknown error occurred whilst processing the image");return n.fileType=o,n}}(Nt.API),function(t){var e=function(t){if(void 0!==t&&""!=t)return!0};Nt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(t){for(var r,n,i,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,s=this.internal.getPageInfoByObjId(t.objId),l=t.pageContext.annotations,u=!1,c=0;c<l.length&&!u;c++)switch((r=l[c]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(0!=u){this.internal.write("/Annots [");for(var h=0;h<l.length;h++){r=l[h];var f=this.internal.pdfEscape,p=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var A=this.internal.newAdditionalObject(),d=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(A.objId),y=r.title||"Note";i="<</Type /Annot /Subtype /Text "+(n="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+f(g(r.contents))+")",i+=" /Popup "+d.objId+" 0 R",i+=" /P "+s.objId+" 0 R",i+=" /T ("+f(g(y))+") >>",A.content=i;var v=A.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+v,r.open&&(i+=" /Open true"),i+=" >>",d.content=i,this.internal.write(A.objId,"0 R",d.objId,"0 R");break;case"freetext":n="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var m=r.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+f(p(r.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+m+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(r.options.name){var b=this.annotations._nameMap[r.options.name];r.options.pageNumber=b.page,r.options.top=b.y}else r.options.top||(r.options.top=0);if(n="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",i="",r.options.url)i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+f(p(r.options.url))+") >>";else if(r.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,i+=" /FitV "+r.options.left+"]";break;default:var _=a(r.options.top);r.options.left=r.options.left||0,void 0===r.options.zoom&&(r.options.zoom=0),i+=" /XYZ "+r.options.left+" "+_+" "+r.options.zoom+"]"}""!=i&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(t){var e=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":e.pageContext.annotations.push(t)}},t.link=function(t,e,r,n,i){var o=this.internal.getCurrentPageInfo(),a=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:a(t),y:s(e),w:a(t+r),h:s(e+n)},options:i,type:"link"})},t.textWithLink=function(t,e,r,n){var i,o,a=this.getTextWidth(t),s=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==n.maxWidth){o=n.maxWidth;var l=this.splitTextToSize(t,o).length;i=Math.ceil(s*l)}else o=a,i=s;return this.text(t,e,r,n),r+=.2*s,"center"===n.align&&(e-=a/2),"right"===n.align&&(e-=a),this.link(e,r-s,o,i,n),a},t.getTextWidth=function(t){var e=this.internal.getFontSize();return this.getStringUnitWidth(t)*e/this.internal.scaleFactor}}(Nt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(t){return void 0!==e[t.charCodeAt(0)]},a=t.__arabicParser__.isArabicLetter=function(t){return"string"==typeof t&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(t)},s=t.__arabicParser__.isArabicEndLetter=function(t){return a(t)&&o(t)&&e[t.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(t){return a(t)&&i.indexOf(t.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(t){return a(t)&&o(t)&&e[t.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(t){return a(t)&&o(t)&&e[t.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(t){return a(t)&&o(t)&&e[t.charCodeAt(0)].length>=3};var c=t.__arabicParser__.arabicLetterHasMedialForm=function(t){return a(t)&&o(t)&&4==e[t.charCodeAt(0)].length},h=t.__arabicParser__.resolveLigatures=function(t){var e=0,n=r,i="",o=0;for(e=0;e<t.length;e+=1)void 0!==n[t.charCodeAt(e)]?(o++,"number"==typeof(n=n[t.charCodeAt(e)])&&(i+=String.fromCharCode(n),n=r,o=0),e===t.length-1&&(n=r,i+=t.charAt(e-(o-1)),e-=o-1,o=0)):(n=r,i+=t.charAt(e-o),e-=o,o=0);return i};t.__arabicParser__.isArabicDiacritic=function(t){return void 0!==t&&void 0!==n[t.charCodeAt(0)]};var f=t.__arabicParser__.getCorrectForm=function(t,e,r){return a(t)?!1===o(t)?-1:!u(t)||!a(e)&&!a(r)||!a(r)&&s(e)||s(t)&&!a(e)||s(t)&&l(e)||s(t)&&s(e)?0:c(t)&&a(e)&&!s(e)&&a(r)&&u(r)?3:s(t)||!a(r)?1:2:-1},p=function(t){var r=0,n=0,i=0,o="",s="",l="",u=(t=t||"").split("\\s+"),c=[];for(r=0;r<u.length;r+=1){for(c.push(""),n=0;n<u[r].length;n+=1)o=u[r][n],s=u[r][n-1],l=u[r][n+1],a(o)?(i=f(o,s,l),c[r]+=-1!==i?String.fromCharCode(e[o.charCodeAt(0)][i]):o):c[r]+=o;c[r]=h(c[r])}return c.join(" ")},A=t.__arabicParser__.processArabic=t.processArabic=function(){var t,e="string"==typeof arguments[0]?arguments[0]:arguments[0].text,r=[];if(Array.isArray(e)){var n=0;for(r=[],n=0;n<e.length;n+=1)Array.isArray(e[n])?r.push([p(e[n][0]),e[n][1],e[n][2]]):r.push([p(e[n])]);t=r}else t=p(e);return"string"==typeof arguments[0]?t:(arguments[0].text=t,arguments[0])};t.events.push(["preProcessText",A])}(Nt.API),Nt.API.autoPrint=function(t){var e;if("javascript"===((t=t||{}).variant=t.variant||"non-conform",t.variant))this.addJS("print({});");else this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}));return this},function(t){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(e){t=e}});var e=150;Object.defineProperty(this,"width",{get:function(){return e},set:function(t){e=isNaN(t)||!1===Number.isInteger(t)||t<0?150:t,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=e+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(t){r=isNaN(t)||!1===Number.isInteger(t)||t<0?300:t,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var n=[];Object.defineProperty(this,"childNodes",{get:function(){return n},set:function(t){n=t}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,e){var r;if("2d"!==(t=t||"2d"))return null;for(r in e)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=e[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Nt.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,i=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var t=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var e=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var r=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return r},set:function(t){r=t}});var n=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return n},set:function(t){n=t}});var i=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return i},set:function(t){i=t}});var o=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return o},set:function(t){o=t}});var a=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return a},set:function(t){a=t}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(t){return i.call(this),this.internal.__cell__.headerFunction="function"==typeof t?t:void 0,this},t.getTextDimensions=function(t,e){i.call(this);var r=(e=e||{}).fontSize||this.getFontSize(),n=e.font||this.getFont(),o=e.scaleFactor||this.internal.scaleFactor,a=0,s=0,l=0,u=this;if(!Array.isArray(t)&&"string"!=typeof t){if("number"!=typeof t)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");t=String(t)}var c=e.maxWidth;c>0?"string"==typeof t?t=this.splitTextToSize(t,c):"[object Array]"===Object.prototype.toString.call(t)&&(t=t.reduce((function(t,e){return t.concat(u.splitTextToSize(e,c))}),[])):t=Array.isArray(t)?t:[t];for(var h=0;h<t.length;h++)a<(l=this.getStringUnitWidth(t[h],{font:n})*r)&&(a=l);return 0!==a&&(s=t.length),{w:a/=o,h:Math.max((s*r*this.getLineHeightFactor()-r*(this.getLineHeightFactor()-1))/o,0)}},t.cellAddPage=function(){i.call(this),this.addPage();var t=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(t.left,t.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=t.cell=function(){var t;t=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var n=this.internal.__cell__.lastCell,o=this.internal.__cell__.padding,s=this.internal.__cell__.margins||e,l=this.internal.__cell__.tableHeaderRow,u=this.internal.__cell__.printHeaders;return void 0!==n.lineNumber&&(n.lineNumber===t.lineNumber?(t.x=(n.x||0)+(n.width||0),t.y=n.y||0):n.y+n.height+t.height+s.bottom>this.getPageHeight()?(this.cellAddPage(),t.y=s.top,u&&l&&(this.printHeaderRow(t.lineNumber,!0),t.y+=l[0].height)):t.y=n.y+n.height||t.y),void 0!==t.text[0]&&(this.rect(t.x,t.y,t.width,t.height,!0===r?"FD":void 0),"right"===t.align?this.text(t.text,t.x+t.width-o,t.y+o,{align:"right",baseline:"top"}):"center"===t.align?this.text(t.text,t.x+t.width/2,t.y+o,{align:"center",baseline:"top",maxWidth:t.width-o-o}):this.text(t.text,t.x+o,t.y+o,{align:"left",baseline:"top",maxWidth:t.width-o-o})),this.internal.__cell__.lastCell=t,this};t.table=function(t,r,u,c,h){if(i.call(this),!u)throw new Error("No data for PDF table.");var f,p,A,d,g=[],y=[],v=[],m={},b={},_=[],w=[],x=(h=h||{}).autoSize||!1,E=!1!==h.printHeaders,B=h.css&&void 0!==h.css["font-size"]?16*h.css["font-size"]:h.fontSize||12,C=h.margins||Object.assign({width:this.getPageWidth()},e),S="number"==typeof h.padding?h.padding:3,k=h.headerBackgroundColor||"#c8c8c8",T=h.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=E,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=B,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=k,this.internal.__cell__.headerTextColor=T,this.setFontSize(B),null==c)y=g=Object.keys(u[0]),v=g.map((function(){return"left"}));else if(Array.isArray(c)&&"object"===(0,n.Z)(c[0]))for(g=c.map((function(t){return t.name})),y=c.map((function(t){return t.prompt||t.name||""})),v=c.map((function(t){return t.align||"left"})),f=0;f<c.length;f+=1)b[c[f].name]=c[f].width*(19.049976/25.4);else Array.isArray(c)&&"string"==typeof c[0]&&(y=g=c,v=g.map((function(){return"left"})));if(x||Array.isArray(c)&&"string"==typeof c[0])for(f=0;f<g.length;f+=1){for(m[d=g[f]]=u.map((function(t){return t[d]})),this.setFont(void 0,"bold"),_.push(this.getTextDimensions(y[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),p=m[d],this.setFont(void 0,"normal"),A=0;A<p.length;A+=1)_.push(this.getTextDimensions(p[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);b[d]=Math.max.apply(null,_)+S+S,_=[]}if(E){var N={};for(f=0;f<g.length;f+=1)N[g[f]]={},N[g[f]].text=y[f],N[g[f]].align=v[f];var L=l.call(this,N,b);w=g.map((function(e){return new a(t,r,b[e],L,N[e].text,void 0,N[e].align)})),this.setTableHeaderRow(w),this.printHeaderRow(1,!1)}var I=c.reduce((function(t,e){return t[e.name]=e.align,t}),{});for(f=0;f<u.length;f+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:f,data:u[f]},this);var M=l.call(this,u[f],b);for(A=0;A<g.length;A+=1){var O=u[f][g[A]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:f,col:A,data:O},this),s.call(this,new a(t,r,b[g[A]],M,O,f+2,I[g[A]]))}}return this.internal.__cell__.table_x=t,this.internal.__cell__.table_y=r,this};var l=function(t,e){var r=this.internal.__cell__.padding,n=this.internal.__cell__.table_font_size,i=this.internal.scaleFactor;return Object.keys(t).map((function(n){var i=t[n];return this.splitTextToSize(i.hasOwnProperty("text")?i.text:i,e[n]-r-r)}),this).map((function(t){return this.getLineHeightFactor()*t.length*n/i+r+r}),this).reduce((function(t,e){return Math.max(t,e)}),0)};t.setTableHeaderRow=function(t){i.call(this),this.internal.__cell__.tableHeaderRow=t},t.printHeaderRow=function(t,e){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var n;if(r=!0,"function"==typeof this.internal.__cell__.headerFunction){var o=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(o[0],o[1],o[2],o[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],u=0;u<this.internal.__cell__.tableHeaderRow.length;u+=1){n=this.internal.__cell__.tableHeaderRow[u].clone(),e&&(n.y=this.internal.__cell__.margins.top||0,l.push(n)),n.lineNumber=t;var c=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,n),this.setTextColor(c)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),r=!1}}(Nt.API);var be={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},_e=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],we=me(_e),xe=[100,200,300,400,500,600,700,800,900],Ee=me(xe);function Be(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(t){return be[t=t||"normal"]?t:"normal"}(t.style),n=function(t){return t?"number"==typeof t?t>=100&&t<=900&&t%100==0?t:400:/^\d00$/.test(t)?parseInt(t):"bold"===t?700:400:400}(t.weight),i=function(t){return"number"==typeof we[t=t||"normal"]?t:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,r,n].join(" ")}}}function Ce(t,e,r,n){var i;for(i=r;i>=0&&i<e.length;i+=n)if(t[e[i]])return t[e[i]];for(i=r;i>=0&&i<e.length;i-=n)if(t[e[i]])return t[e[i]]}var Se={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},ke={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Te(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Ne(t){return t.trimLeft()}function Le(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Ie(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===e?null:[e[0],t.substring(e[0].length)]}var Me,Oe,Pe,Fe,Ue=["times"];!function(t){var e,r,i,o,a,s,l,u,c,h=function(t){return t=t||{},this.isStrokeTransparent=t.isStrokeTransparent||!1,this.strokeOpacity=t.strokeOpacity||1,this.strokeStyle=t.strokeStyle||"#000000",this.fillStyle=t.fillStyle||"#000000",this.isFillTransparent=t.isFillTransparent||!1,this.fillOpacity=t.fillOpacity||1,this.font=t.font||"10px sans-serif",this.textBaseline=t.textBaseline||"alphabetic",this.textAlign=t.textAlign||"left",this.lineWidth=t.lineWidth||1,this.lineJoin=t.lineJoin||"miter",this.lineCap=t.lineCap||"butt",this.path=t.path||[],this.transform=void 0!==t.transform?t.transform.clone():new u,this.globalCompositeOperation=t.globalCompositeOperation||"normal",this.globalAlpha=t.globalAlpha||1,this.clip_path=t.clip_path||[],this.currentPoint=t.currentPoint||new s,this.miterLimit=t.miterLimit||10,this.lastPoint=t.lastPoint||new s,this.lineDashOffset=t.lineDashOffset||0,this.lineDash=t.lineDash||[],this.margin=t.margin||[0,0,0,0],this.prevPageLastElemOffset=t.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof t.ignoreClearRect||t.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,r=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,s=this.internal.Point,l=this.internal.Rectangle,u=this.internal.Matrix,c=new h}]);var f=function(t){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var e=t;Object.defineProperty(this,"pdf",{get:function(){return e}});var r=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return r},set:function(t){r=Boolean(t)}});var n=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return n},set:function(t){n=Boolean(t)}});var i=0;Object.defineProperty(this,"posX",{get:function(){return i},set:function(t){isNaN(t)||(i=t)}});var o=0;Object.defineProperty(this,"posY",{get:function(){return o},set:function(t){isNaN(t)||(o=t)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(t){var e;"number"==typeof t?e=[t,t,t,t]:((e=new Array(4))[0]=t[0],e[1]=t.length>=2?t[1]:e[0],e[2]=t.length>=3?t[2]:e[0],e[3]=t.length>=4?t[3]:e[1]),c.margin=e}});var a=!1;Object.defineProperty(this,"autoPaging",{get:function(){return a},set:function(t){a=t}});var s=0;Object.defineProperty(this,"lastBreak",{get:function(){return s},set:function(t){s=t}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(t){l=t}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(t){t instanceof h&&(c=t)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(t){c.path=t}});var u=[];Object.defineProperty(this,"ctxStack",{get:function(){return u},set:function(t){u=t}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(t){var e;e=p(t),this.ctx.fillStyle=e.style,this.ctx.isFillTransparent=0===e.a,this.ctx.fillOpacity=e.a,this.pdf.setFillColor(e.r,e.g,e.b,{a:e.a}),this.pdf.setTextColor(e.r,e.g,e.b,{a:e.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(t){var e=p(t);this.ctx.strokeStyle=e.style,this.ctx.isStrokeTransparent=0===e.a,this.ctx.strokeOpacity=e.a,0===e.a?this.pdf.setDrawColor(255,255,255):(e.a,this.pdf.setDrawColor(e.r,e.g,e.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(t){-1!==["butt","round","square"].indexOf(t)&&(this.ctx.lineCap=t,this.pdf.setLineCap(t))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(t){isNaN(t)||(this.ctx.lineWidth=t,this.pdf.setLineWidth(t))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(t){-1!==["bevel","round","miter"].indexOf(t)&&(this.ctx.lineJoin=t,this.pdf.setLineJoin(t))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(t){isNaN(t)||(this.ctx.miterLimit=t,this.pdf.setMiterLimit(t))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(t){this.ctx.textBaseline=t}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(t){-1!==["right","end","center","left","start"].indexOf(t)&&(this.ctx.textAlign=t)}});var f=null;function A(t,e){if(null===f){var r=function(t){var e=[];return Object.keys(t).forEach((function(r){t[r].forEach((function(t){var n=null;switch(t){case"bold":n={family:r,weight:"bold"};break;case"italic":n={family:r,style:"italic"};break;case"bolditalic":n={family:r,weight:"bold",style:"italic"};break;case"":case"normal":n={family:r}}null!==n&&(n.ref={name:r,style:t},e.push(n))}))})),e}(t.getFontList());f=function(t){for(var e={},r=0;r<t.length;++r){var n=Be(t[r]),i=n.family,o=n.stretch,a=n.style,s=n.weight;e[i]=e[i]||{},e[i][o]=e[i][o]||{},e[i][o][a]=e[i][o][a]||{},e[i][o][a][s]=n}return e}(r.concat(e))}return f}var d=null;Object.defineProperty(this,"fontFaces",{get:function(){return d},set:function(t){f=null,d=t}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(t){var e;if(this.ctx.font=t,null!==(e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(t))){var r=e[1],n=(e[2],e[3]),i=e[4],o=(e[5],e[6]),a=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(i)[2];i="px"===a?Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor):"em"===a?Math.floor(parseFloat(i)*this.pdf.getFontSize()):Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(i);var s=function(t){var e,r,n=[],i=t.trim();if(""===i)return Ue;if(i in ke)return[ke[i]];for(;""!==i;){switch(r=null,e=(i=Ne(i)).charAt(0)){case'"':case"'":r=Le(i.substring(1),e);break;default:r=Ie(i)}if(null===r)return Ue;if(n.push(r[0]),""!==(i=Ne(r[1]))&&","!==i.charAt(0))return Ue;i=i.replace(/^,/,"")}return n}(o);if(this.fontFaces){var l=function(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",i=Object.assign({},Se,r.genericFontFamilies||{}),o=null,a=null,s=0;s<e.length;++s)if(i[(o=Be(e[s])).family]&&(o.family=i[o.family]),t.hasOwnProperty(o.family)){a=t[o.family];break}if(!(a=a||t[n]))throw new Error("Could not find a font-family for the rule '"+Te(o)+"' and default family '"+n+"'.");if(a=function(t,e){if(e[t])return e[t];var r=we[t],n=r<=we.normal?-1:1,i=Ce(e,_e,r,n);if(!i)throw new Error("Could not find a matching font-stretch value for "+t);return i}(o.stretch,a),a=function(t,e){if(e[t])return e[t];for(var r=be[t],n=0;n<r.length;++n)if(e[r[n]])return e[r[n]];throw new Error("Could not find a matching font-style for "+t)}(o.style,a),!(a=function(t,e){if(e[t])return e[t];if(400===t&&e[500])return e[500];if(500===t&&e[400])return e[400];var r=Ee[t],n=Ce(e,xe,r,t<400?-1:1);if(!n)throw new Error("Could not find a matching font-weight for value "+t);return n}(o.weight,a)))throw new Error("Failed to resolve a font for the rule '"+Te(o)+"'.");return a}(A(this.pdf,this.fontFaces),s.map((function(t){return{family:t,stretch:"normal",weight:n,style:r}})));this.pdf.setFont(l.ref.name,l.ref.style)}else{var u="";("bold"===n||parseInt(n,10)>=700||"bold"===r)&&(u="bold"),"italic"===r&&(u+="italic"),0===u.length&&(u="normal");for(var c="",h={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},f=0;f<s.length;f++){if(void 0!==this.pdf.internal.getFont(s[f],u,{noFallback:!0,disableWarning:!0})){c=s[f];break}if("bolditalic"===u&&void 0!==this.pdf.internal.getFont(s[f],"bold",{noFallback:!0,disableWarning:!0}))c=s[f],u="bold";else if(void 0!==this.pdf.internal.getFont(s[f],"normal",{noFallback:!0,disableWarning:!0})){c=s[f],u="normal";break}}if(""===c)for(var p=0;p<s.length;p++)if(h[s[p]]){c=h[s[p]];break}c=""===c?"Times":c,this.pdf.setFont(c,u)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(t){this.ctx.globalCompositeOperation=t}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(t){this.ctx.globalAlpha=t}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(t){this.ctx.lineDashOffset=t,R.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(t){this.ctx.lineDash=t,R.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(t){this.ctx.ignoreClearRect=Boolean(t)}})};f.prototype.setLineDash=function(t){this.lineDash=t},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){_.call(this,"fill",!1)},f.prototype.stroke=function(){_.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(t,e){if(isNaN(t)||isNaN(e))throw $.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var r=this.ctx.transform.applyToPoint(new s(t,e));this.path.push({type:"mt",x:r.x,y:r.y}),this.ctx.lastPoint=new s(t,e)},f.prototype.closePath=function(){var t=new s(0,0),e=0;for(e=this.path.length-1;-1!==e;e--)if("begin"===this.path[e].type&&"object"===(0,n.Z)(this.path[e+1])&&"number"==typeof this.path[e+1].x){t=new s(this.path[e+1].x,this.path[e+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(t.x,t.y)},f.prototype.lineTo=function(t,e){if(isNaN(t)||isNaN(e))throw $.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var r=this.ctx.transform.applyToPoint(new s(t,e));this.path.push({type:"lt",x:r.x,y:r.y}),this.ctx.lastPoint=new s(r.x,r.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),_.call(this,null,!0)},f.prototype.quadraticCurveTo=function(t,e,r,n){if(isNaN(r)||isNaN(n)||isNaN(t)||isNaN(e))throw $.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var i=this.ctx.transform.applyToPoint(new s(r,n)),o=this.ctx.transform.applyToPoint(new s(t,e));this.path.push({type:"qct",x1:o.x,y1:o.y,x:i.x,y:i.y}),this.ctx.lastPoint=new s(i.x,i.y)},f.prototype.bezierCurveTo=function(t,e,r,n,i,o){if(isNaN(i)||isNaN(o)||isNaN(t)||isNaN(e)||isNaN(r)||isNaN(n))throw $.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var a=this.ctx.transform.applyToPoint(new s(i,o)),l=this.ctx.transform.applyToPoint(new s(t,e)),u=this.ctx.transform.applyToPoint(new s(r,n));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:u.x,y2:u.y,x:a.x,y:a.y}),this.ctx.lastPoint=new s(a.x,a.y)},f.prototype.arc=function(t,e,r,n,i,o){if(isNaN(t)||isNaN(e)||isNaN(r)||isNaN(n)||isNaN(i))throw $.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(o=Boolean(o),!this.ctx.transform.isIdentity){var a=this.ctx.transform.applyToPoint(new s(t,e));t=a.x,e=a.y;var l=this.ctx.transform.applyToPoint(new s(0,r)),u=this.ctx.transform.applyToPoint(new s(0,0));r=Math.sqrt(Math.pow(l.x-u.x,2)+Math.pow(l.y-u.y,2))}Math.abs(i-n)>=2*Math.PI&&(n=0,i=2*Math.PI),this.path.push({type:"arc",x:t,y:e,radius:r,startAngle:n,endAngle:i,counterclockwise:o})},f.prototype.arcTo=function(t,e,r,n,i){throw new Error("arcTo not implemented.")},f.prototype.rect=function(t,e,r,n){if(isNaN(t)||isNaN(e)||isNaN(r)||isNaN(n))throw $.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(t,e),this.lineTo(t+r,e),this.lineTo(t+r,e+n),this.lineTo(t,e+n),this.lineTo(t,e),this.lineTo(t+r,e),this.lineTo(t,e)},f.prototype.fillRect=function(t,e,r,n){if(isNaN(t)||isNaN(e)||isNaN(r)||isNaN(n))throw $.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!A.call(this)){var i={};"butt"!==this.lineCap&&(i.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(i.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(t,e,r,n),this.fill(),i.hasOwnProperty("lineCap")&&(this.lineCap=i.lineCap),i.hasOwnProperty("lineJoin")&&(this.lineJoin=i.lineJoin)}},f.prototype.strokeRect=function(t,e,r,n){if(isNaN(t)||isNaN(e)||isNaN(r)||isNaN(n))throw $.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");d.call(this)||(this.beginPath(),this.rect(t,e,r,n),this.stroke())},f.prototype.clearRect=function(t,e,r,n){if(isNaN(t)||isNaN(e)||isNaN(r)||isNaN(n))throw $.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(t,e,r,n))},f.prototype.save=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,r=0;r<this.pdf.internal.getNumberOfPages();r++)this.pdf.setPage(r+1),this.pdf.internal.out("q");if(this.pdf.setPage(e),t){this.ctx.fontSize=this.pdf.internal.getFontSize();var n=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=n}},f.prototype.restore=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,r=0;r<this.pdf.internal.getNumberOfPages();r++)this.pdf.setPage(r+1),this.pdf.internal.out("Q");this.pdf.setPage(e),t&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(t){var e,r,n,i;if(!0===t.isCanvasGradient&&(t=t.getColor()),!t)return{r:0,g:0,b:0,a:0,style:t};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(t))e=0,r=0,n=0,i=0;else{var o=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(t);if(null!==o)e=parseInt(o[1]),r=parseInt(o[2]),n=parseInt(o[3]),i=1;else if(null!==(o=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(t)))e=parseInt(o[1]),r=parseInt(o[2]),n=parseInt(o[3]),i=parseFloat(o[4]);else{if(i=1,"string"==typeof t&&"#"!==t.charAt(0)){var a=new at(t);t=a.ok?a.toHex():"#000000"}4===t.length?(e=t.substring(1,2),e+=e,r=t.substring(2,3),r+=r,n=t.substring(3,4),n+=n):(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7)),e=parseInt(e,16),r=parseInt(r,16),n=parseInt(n,16)}}return{r:e,g:r,b:n,a:i,style:t}},A=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},d=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};f.prototype.fillText=function(t,e,r,n){if(isNaN(e)||isNaN(r)||"string"!=typeof t)throw $.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(n=isNaN(n)?void 0:n,!A.call(this)){var i=P(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;T.call(this,{text:t,x:e,y:r,scale:o,angle:i,align:this.textAlign,maxWidth:n})}},f.prototype.strokeText=function(t,e,r,n){if(isNaN(e)||isNaN(r)||"string"!=typeof t)throw $.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!d.call(this)){n=isNaN(n)?void 0:n;var i=P(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;T.call(this,{text:t,x:e,y:r,scale:o,renderingMode:"stroke",angle:i,align:this.textAlign,maxWidth:n})}},f.prototype.measureText=function(t){if("string"!=typeof t)throw $.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var e=this.pdf,r=this.pdf.internal.scaleFactor,n=e.internal.getFontSize(),i=e.getStringUnitWidth(t)*n/e.internal.scaleFactor,o=function(t){var e=(t=t||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return e}}),this};return new o({width:i*=Math.round(96*r/72*1e4)/1e4})},f.prototype.scale=function(t,e){if(isNaN(t)||isNaN(e))throw $.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var r=new u(t,0,0,e,0,0);this.ctx.transform=this.ctx.transform.multiply(r)},f.prototype.rotate=function(t){if(isNaN(t))throw $.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var e=new u(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0);this.ctx.transform=this.ctx.transform.multiply(e)},f.prototype.translate=function(t,e){if(isNaN(t)||isNaN(e))throw $.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var r=new u(1,0,0,1,t,e);this.ctx.transform=this.ctx.transform.multiply(r)},f.prototype.transform=function(t,e,r,n,i,o){if(isNaN(t)||isNaN(e)||isNaN(r)||isNaN(n)||isNaN(i)||isNaN(o))throw $.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var a=new u(t,e,r,n,i,o);this.ctx.transform=this.ctx.transform.multiply(a)},f.prototype.setTransform=function(t,e,r,n,i,o){t=isNaN(t)?1:t,e=isNaN(e)?0:e,r=isNaN(r)?0:r,n=isNaN(n)?1:n,i=isNaN(i)?0:i,o=isNaN(o)?0:o,this.ctx.transform=new u(t,e,r,n,i,o)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(t,e,r,n,i,o,a,s,c){var h=this.pdf.getImageProperties(t),f=1,p=1,A=1,d=1;void 0!==n&&void 0!==s&&(A=s/n,d=c/i,f=h.width/n*s/n,p=h.height/i*c/i),void 0===o&&(o=e,a=r,e=0,r=0),void 0!==n&&void 0===s&&(s=n,c=i),void 0===n&&void 0===s&&(s=h.width,c=h.height);for(var v,_=this.ctx.transform.decompose(),x=P(_.rotate.shx),E=new u,B=(E=(E=(E=E.multiply(_.translate)).multiply(_.skew)).multiply(_.scale)).applyToRectangle(new l(o-e*A,a-r*d,n*f,i*p)),C=y.call(this,B),S=[],k=0;k<C.length;k+=1)-1===S.indexOf(C[k])&&S.push(C[k]);if(b(S),this.autoPaging)for(var T=S[0],N=S[S.length-1],L=T;L<N+1;L++){this.pdf.setPage(L);var I=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],M=1===L?this.posY+this.margin[0]:this.margin[0],O=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],F=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],U=1===L?0:O+(L-2)*F;if(0!==this.ctx.clip_path.length){var R=this.path;v=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=m(v,this.posX+this.margin[3],-U+M+this.ctx.prevPageLastElemOffset),w.call(this,"fill",!0),this.path=R}var D=JSON.parse(JSON.stringify(B));D=m([D],this.posX+this.margin[3],-U+M+this.ctx.prevPageLastElemOffset)[0];var j=(L>T||L<N)&&g.call(this);j&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],I,F,null).clip().discardPath()),this.pdf.addImage(t,"JPEG",D.x,D.y,D.w,D.h,null,null,x),j&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(t,"JPEG",B.x,B.y,B.w,B.h,null,null,x)};var y=function(t,e,r){var n=[];e=e||this.pdf.internal.pageSize.width,r=r||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var i=this.posY+this.ctx.prevPageLastElemOffset;switch(t.type){default:case"mt":case"lt":n.push(Math.floor((t.y+i)/r)+1);break;case"arc":n.push(Math.floor((t.y+i-t.radius)/r)+1),n.push(Math.floor((t.y+i+t.radius)/r)+1);break;case"qct":var o=F(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x,t.y);n.push(Math.floor((o.y+i)/r)+1),n.push(Math.floor((o.y+o.h+i)/r)+1);break;case"bct":var a=U(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x2,t.y2,t.x,t.y);n.push(Math.floor((a.y+i)/r)+1),n.push(Math.floor((a.y+a.h+i)/r)+1);break;case"rect":n.push(Math.floor((t.y+i)/r)+1),n.push(Math.floor((t.y+t.h+i)/r)+1)}for(var s=0;s<n.length;s+=1)for(;this.pdf.internal.getNumberOfPages()<n[s];)v.call(this);return n},v=function(){var t=this.fillStyle,e=this.strokeStyle,r=this.font,n=this.lineCap,i=this.lineWidth,o=this.lineJoin;this.pdf.addPage(),this.fillStyle=t,this.strokeStyle=e,this.font=r,this.lineCap=n,this.lineWidth=i,this.lineJoin=o},m=function(t,e,r){for(var n=0;n<t.length;n++)switch(t[n].type){case"bct":t[n].x2+=e,t[n].y2+=r;case"qct":t[n].x1+=e,t[n].y1+=r;default:t[n].x+=e,t[n].y+=r}return t},b=function(t){return t.sort((function(t,e){return t-e}))},_=function(t,e){for(var r,n,i=this.fillStyle,o=this.strokeStyle,a=this.lineCap,s=this.lineWidth,l=Math.abs(s*this.ctx.transform.scaleX),u=this.lineJoin,c=JSON.parse(JSON.stringify(this.path)),h=JSON.parse(JSON.stringify(this.path)),f=[],p=0;p<h.length;p++)if(void 0!==h[p].x)for(var A=y.call(this,h[p]),d=0;d<A.length;d+=1)-1===f.indexOf(A[d])&&f.push(A[d]);for(var _=0;_<f.length;_++)for(;this.pdf.internal.getNumberOfPages()<f[_];)v.call(this);if(b(f),this.autoPaging)for(var x=f[0],E=f[f.length-1],B=x;B<E+1;B++){this.pdf.setPage(B),this.fillStyle=i,this.strokeStyle=o,this.lineCap=a,this.lineWidth=l,this.lineJoin=u;var C=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],S=1===B?this.posY+this.margin[0]:this.margin[0],k=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],T=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],N=1===B?0:k+(B-2)*T;if(0!==this.ctx.clip_path.length){var L=this.path;r=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=m(r,this.posX+this.margin[3],-N+S+this.ctx.prevPageLastElemOffset),w.call(this,t,!0),this.path=L}if(n=JSON.parse(JSON.stringify(c)),this.path=m(n,this.posX+this.margin[3],-N+S+this.ctx.prevPageLastElemOffset),!1===e||0===B){var I=(B>x||B<E)&&g.call(this);I&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],C,T,null).clip().discardPath()),w.call(this,t,e),I&&this.pdf.restoreGraphicsState()}this.lineWidth=s}else this.lineWidth=l,w.call(this,t,e),this.lineWidth=s;this.path=c},w=function(t,e){if(("stroke"!==t||e||!d.call(this))&&("stroke"===t||e||!A.call(this))){for(var r,n,i=[],o=this.path,a=0;a<o.length;a++){var s=o[a];switch(s.type){case"begin":i.push({begin:!0});break;case"close":i.push({close:!0});break;case"mt":i.push({start:s,deltas:[],abs:[]});break;case"lt":var l=i.length;if(o[a-1]&&!isNaN(o[a-1].x)&&(r=[s.x-o[a-1].x,s.y-o[a-1].y],l>0))for(;l>=0;l--)if(!0!==i[l-1].close&&!0!==i[l-1].begin){i[l-1].deltas.push(r),i[l-1].abs.push(s);break}break;case"bct":r=[s.x1-o[a-1].x,s.y1-o[a-1].y,s.x2-o[a-1].x,s.y2-o[a-1].y,s.x-o[a-1].x,s.y-o[a-1].y],i[i.length-1].deltas.push(r);break;case"qct":var u=o[a-1].x+2/3*(s.x1-o[a-1].x),c=o[a-1].y+2/3*(s.y1-o[a-1].y),h=s.x+2/3*(s.x1-s.x),f=s.y+2/3*(s.y1-s.y),p=s.x,g=s.y;r=[u-o[a-1].x,c-o[a-1].y,h-o[a-1].x,f-o[a-1].y,p-o[a-1].x,g-o[a-1].y],i[i.length-1].deltas.push(r);break;case"arc":i.push({deltas:[],abs:[],arc:!0}),Array.isArray(i[i.length-1].abs)&&i[i.length-1].abs.push(s)}}n=e?null:"stroke"===t?"stroke":"fill";for(var y=!1,v=0;v<i.length;v++)if(i[v].arc)for(var m=i[v].abs,b=0;b<m.length;b++){var _=m[b];"arc"===_.type?B.call(this,_.x,_.y,_.radius,_.startAngle,_.endAngle,_.counterclockwise,void 0,e,!y):N.call(this,_.x,_.y),y=!0}else if(!0===i[v].close)this.pdf.internal.out("h"),y=!1;else if(!0!==i[v].begin){var w=i[v].start.x,x=i[v].start.y;L.call(this,i[v].deltas,w,x),y=!0}n&&C.call(this,n),e&&S.call(this)}},x=function(t){var e=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,r=e*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return t-r;case"top":return t+e-r;case"hanging":return t+e-2*r;case"middle":return t+e/2-r;default:return t}},E=function(t){return t+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var t=function(){};return t.colorStops=[],t.addColorStop=function(t,e){this.colorStops.push([t,e])},t.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},t.isCanvasGradient=!0,t},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var B=function(t,e,r,n,i,o,a,s,l){for(var u=M.call(this,r,n,i,o),c=0;c<u.length;c++){var h=u[c];0===c&&(l?k.call(this,h.x1+t,h.y1+e):N.call(this,h.x1+t,h.y1+e)),I.call(this,t,e,h.x2,h.y2,h.x3,h.y3,h.x4,h.y4)}s?S.call(this):C.call(this,a)},C=function(t){switch(t){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},S=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(t,e){this.pdf.internal.out(r(t)+" "+i(e)+" m")},T=function(t){var e;switch(t.align){case"right":case"end":e="right";break;case"center":e="center";break;default:e="left"}var r=this.pdf.getTextDimensions(t.text),n=x.call(this,t.y),i=E.call(this,n)-r.h,o=this.ctx.transform.applyToPoint(new s(t.x,n)),a=this.ctx.transform.decompose(),c=new u;c=(c=(c=c.multiply(a.translate)).multiply(a.skew)).multiply(a.scale);for(var h,f,p,A=this.ctx.transform.applyToRectangle(new l(t.x,n,r.w,r.h)),d=c.applyToRectangle(new l(t.x,i,r.w,r.h)),v=y.call(this,d),_=[],B=0;B<v.length;B+=1)-1===_.indexOf(v[B])&&_.push(v[B]);if(b(_),this.autoPaging)for(var C=_[0],S=_[_.length-1],k=C;k<S+1;k++){this.pdf.setPage(k);var T=1===k?this.posY+this.margin[0]:this.margin[0],N=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],L=this.pdf.internal.pageSize.height-this.margin[2],I=L-this.margin[0],M=this.pdf.internal.pageSize.width-this.margin[1],O=M-this.margin[3],P=1===k?0:N+(k-2)*I;if(0!==this.ctx.clip_path.length){var F=this.path;h=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=m(h,this.posX+this.margin[3],-1*P+T),w.call(this,"fill",!0),this.path=F}var U=m([JSON.parse(JSON.stringify(d))],this.posX+this.margin[3],-P+T+this.ctx.prevPageLastElemOffset)[0];t.scale>=.01&&(f=this.pdf.internal.getFontSize(),this.pdf.setFontSize(f*t.scale),p=this.lineWidth,this.lineWidth=p*t.scale);var R="text"!==this.autoPaging;if(R||U.y+U.h<=L){if(R||U.y>=T&&U.x<=M){var D=R?t.text:this.pdf.splitTextToSize(t.text,t.maxWidth||M-U.x)[0],j=m([JSON.parse(JSON.stringify(A))],this.posX+this.margin[3],-P+T+this.ctx.prevPageLastElemOffset)[0],H=R&&(k>C||k<S)&&g.call(this);H&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],O,I,null).clip().discardPath()),this.pdf.text(D,j.x,j.y,{angle:t.angle,align:e,renderingMode:t.renderingMode}),H&&this.pdf.restoreGraphicsState()}}else U.y<L&&(this.ctx.prevPageLastElemOffset+=L-U.y);t.scale>=.01&&(this.pdf.setFontSize(f),this.lineWidth=p)}else t.scale>=.01&&(f=this.pdf.internal.getFontSize(),this.pdf.setFontSize(f*t.scale),p=this.lineWidth,this.lineWidth=p*t.scale),this.pdf.text(t.text,o.x+this.posX,o.y+this.posY,{angle:t.angle,align:e,renderingMode:t.renderingMode,maxWidth:t.maxWidth}),t.scale>=.01&&(this.pdf.setFontSize(f),this.lineWidth=p)},N=function(t,e,n,o){n=n||0,o=o||0,this.pdf.internal.out(r(t+n)+" "+i(e+o)+" l")},L=function(t,e,r){return this.pdf.lines(t,e,r,null,null)},I=function(t,r,n,i,s,l,u,c){this.pdf.internal.out([e(o(n+t)),e(a(i+r)),e(o(s+t)),e(a(l+r)),e(o(u+t)),e(a(c+r)),"c"].join(" "))},M=function(t,e,r,n){for(var i=2*Math.PI,o=Math.PI/2;e>r;)e-=i;var a=Math.abs(r-e);a<i&&n&&(a=i-a);for(var s=[],l=n?-1:1,u=e;a>1e-5;){var c=u+l*Math.min(a,o);s.push(O.call(this,t,u,c)),a-=Math.abs(c-u),u=c}return s},O=function(t,e,r){var n=(r-e)/2,i=t*Math.cos(n),o=t*Math.sin(n),a=i,s=-o,l=a*a+s*s,u=l+a*i+s*o,c=4/3*(Math.sqrt(2*l*u)-u)/(a*o-s*i),h=a-c*s,f=s+c*a,p=h,A=-f,d=n+e,g=Math.cos(d),y=Math.sin(d);return{x1:t*Math.cos(e),y1:t*Math.sin(e),x2:h*g-f*y,y2:h*y+f*g,x3:p*g-A*y,y3:p*y+A*g,x4:t*Math.cos(r),y4:t*Math.sin(r)}},P=function(t){return 180*t/Math.PI},F=function(t,e,r,n,i,o){var a=t+.5*(r-t),s=e+.5*(n-e),u=i+.5*(r-i),c=o+.5*(n-o),h=Math.min(t,i,a,u),f=Math.max(t,i,a,u),p=Math.min(e,o,s,c),A=Math.max(e,o,s,c);return new l(h,p,f-h,A-p)},U=function(t,e,r,n,i,o,a,s){var u,c,h,f,p,A,d,g,y,v,m,b,_,w,x=r-t,E=n-e,B=i-r,C=o-n,S=a-i,k=s-o;for(c=0;c<41;c++)y=(d=(h=t+(u=c/40)*x)+u*((p=r+u*B)-h))+u*(p+u*(i+u*S-p)-d),v=(g=(f=e+u*E)+u*((A=n+u*C)-f))+u*(A+u*(o+u*k-A)-g),0==c?(m=y,b=v,_=y,w=v):(m=Math.min(m,y),b=Math.min(b,v),_=Math.max(_,y),w=Math.max(w,v));return new l(Math.round(m),Math.round(b),Math.round(_-m),Math.round(w-b))},R=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var t,e,r=(t=this.ctx.lineDash,e=this.ctx.lineDashOffset,JSON.stringify({lineDash:t,lineDashOffset:e}));this.prevLineDash!==r&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=r)}}}(Nt.API),function(t){var e=function(t){var e,r,n,i,o,a,s,l,u,c;for(/[^\x00-\xFF]/.test(t),r=[],n=0,i=(t+=e="\0\0\0\0".slice(t.length%4||4)).length;i>n;n+=4)0!==(o=(t.charCodeAt(n)<<24)+(t.charCodeAt(n+1)<<16)+(t.charCodeAt(n+2)<<8)+t.charCodeAt(n+3))?(a=(o=((o=((o=((o=(o-(c=o%85))/85)-(u=o%85))/85)-(l=o%85))/85)-(s=o%85))/85)%85,r.push(a+33,s+33,l+33,u+33,c+33)):r.push(122);return function(t,e){for(var r=e;r>0;r--)t.pop()}(r,e.length),String.fromCharCode.apply(String,r)+"~>"},r=function(t){var e,r,n,i,o,a=String,s="length",l=255,u="charCodeAt",c="slice",h="replace";for(t[c](-2),t=t[c](0,-2)[h](/\s/g,"")[h]("z","!!!!!"),n=[],i=0,o=(t+=e="uuuuu"[c](t[s]%5||5))[s];o>i;i+=5)r=52200625*(t[u](i)-33)+614125*(t[u](i+1)-33)+7225*(t[u](i+2)-33)+85*(t[u](i+3)-33)+(t[u](i+4)-33),n.push(l&r>>24,l&r>>16,l&r>>8,l&r);return function(t,e){for(var r=e;r>0;r--)t.pop()}(n,e[s]),a.fromCharCode.apply(a,n)},n=function(t){var e=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(t=t.replace(/\s/g,"")).indexOf(">")&&(t=t.substr(0,t.indexOf(">"))),t.length%2&&(t+="0"),!1===e.test(t))return"";for(var r="",n=0;n<t.length;n+=2)r+=String.fromCharCode("0x"+(t[n]+t[n+1]));return r},i=function(t){for(var e=new Uint8Array(t.length),r=t.length;r--;)e[r]=t.charCodeAt(r);return(e=W(e)).reduce((function(t,e){return t+String.fromCharCode(e)}),"")};t.processDataByFilters=function(t,o){var a=0,s=t||"",l=[];for("string"==typeof(o=o||[])&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":s=r(s),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":s=e(s),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":s=n(s),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":s=s.split("").map((function(t){return("0"+t.charCodeAt().toString(16)).slice(-2)})).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":s=i(s),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:s,reverseChain:l.reverse().join(" ")}}}(Nt.API),(Fe=Nt.API).loadFile=function(t,e,r){return function(t,e,r){e=!1!==e,r="function"==typeof r?r:function(){};var n=void 0;try{n=function(t,e,r){var n=new XMLHttpRequest,i=0,o=function(t){var e=t.length,r=[],n=String.fromCharCode;for(i=0;i<e;i+=1)r.push(n(255&t.charCodeAt(i)));return r.join("")};if(n.open("GET",t,!e),n.overrideMimeType("text/plain; charset=x-user-defined"),!1===e&&(n.onload=function(){200===n.status?r(o(this.responseText)):r(void 0)}),n.send(null),e&&200===n.status)return o(n.responseText)}(t,e,r)}catch(t){}return n}(t,e,r)},Fe.loadImageFile=Fe.loadFile,function(t){function e(){return(J.html2canvas?Promise.resolve(J.html2canvas):r.e(236).then(r.t.bind(r,4236,23))).catch((function(t){return Promise.reject(new Error("Could not load html2canvas: "+t))})).then((function(t){return t.default?t.default:t}))}function i(){return(J.DOMPurify?Promise.resolve(J.DOMPurify):r.e(703).then(r.t.bind(r,8703,23))).catch((function(t){return Promise.reject(new Error("Could not load dompurify: "+t))})).then((function(t){return t.default?t.default:t}))}var o=function(t){var e=(0,n.Z)(t);return"undefined"===e?"undefined":"string"===e||t instanceof String?"string":"number"===e||t instanceof Number?"number":"function"===e||t instanceof Function?"function":t&&t.constructor===Array?"array":t&&1===t.nodeType?"element":"object"===e?"object":"unknown"},a=function(t,e){var r=document.createElement(t);for(var n in e.className&&(r.className=e.className),e.innerHTML&&e.dompurify&&(r.innerHTML=e.dompurify.sanitize(e.innerHTML)),e.style)r.style[n]=e.style[n];return r},s=function t(e){var r=Object.assign(t.convert(Promise.resolve()),JSON.parse(JSON.stringify(t.template))),n=t.convert(Promise.resolve(),r);return(n=n.setProgress(1,t,1,[t])).set(e)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(t,e){return t.__proto__=e||s.prototype,t},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(t,e){return this.then((function(){switch(e=e||function(t){switch(o(t)){case"string":return"string";case"element":return"canvas"===t.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(t)){case"string":return this.then(i).then((function(e){return this.set({src:a("div",{innerHTML:t,dompurify:e})})}));case"element":return this.set({src:t});case"canvas":return this.set({canvas:t});case"img":return this.set({img:t});default:return this.error("Unknown source type.")}}))},s.prototype.to=function(t){switch(t){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var t={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},e=function t(e,r){for(var n=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),i=e.firstChild;i;i=i.nextSibling)!0!==r&&1===i.nodeType&&"SCRIPT"===i.nodeName||n.appendChild(t(i,r));return 1===e.nodeType&&("CANVAS"===e.nodeName?(n.width=e.width,n.height=e.height,n.getContext("2d").drawImage(e,0,0)):"TEXTAREA"!==e.nodeName&&"SELECT"!==e.nodeName||(n.value=e.value),n.addEventListener("load",(function(){n.scrollTop=e.scrollTop,n.scrollLeft=e.scrollLeft}),!0)),n}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===e.tagName&&(t.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:t}),this.prop.container.appendChild(e),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},s.prototype.toCanvas=function(){var t=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(t).then(e).then((function(t){var e=Object.assign({},this.opt.html2canvas);return delete e.onrendered,t(this.prop.container,e)})).then((function(t){(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},s.prototype.toContext2d=function(){var t=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(t).then(e).then((function(t){var e=this.opt.jsPDF,r=this.opt.fontFaces,n="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,i=Object.assign({async:!0,allowTaint:!0,scale:n,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete i.onrendered,e.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,e.context2d.posX=this.opt.x,e.context2d.posY=this.opt.y,e.context2d.margin=this.opt.margin,e.context2d.fontFaces=r,r)for(var o=0;o<r.length;++o){var a=r[o],s=a.src.find((function(t){return"truetype"===t.format}));s&&e.addFont(s.url,a.ref.name,a.ref.style)}return i.windowHeight=i.windowHeight||0,i.windowHeight=0==i.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):i.windowHeight,e.context2d.save(!0),t(this.prop.container,i)})).then((function(t){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var t=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=t}))},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},s.prototype.output=function(t,e,r){return"img"===(r=r||"pdf").toLowerCase()||"image"===r.toLowerCase()?this.outputImg(t,e):this.outputPdf(t,e)},s.prototype.outputPdf=function(t,e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(t,e)}))},s.prototype.outputImg=function(t){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(t){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+t+'" is not supported.'}}))},s.prototype.save=function(t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(t?{filename:t}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},s.prototype.set=function(t){if("object"!==o(t))return this;var e=Object.keys(t||{}).map((function(e){if(e in s.template.prop)return function(){this.prop[e]=t[e]};switch(e){case"margin":return this.setMargin.bind(this,t.margin);case"jsPDF":return function(){return this.opt.jsPDF=t.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,t.pageSize);default:return function(){this.opt[e]=t[e]}}}),this);return this.then((function(){return this.thenList(e)}))},s.prototype.get=function(t,e){return this.then((function(){var r=t in s.template.prop?this.prop[t]:this.opt[t];return e?e(r):r}))},s.prototype.setMargin=function(t){return this.then((function(){switch(o(t)){case"number":t=[t,t,t,t];case"array":if(2===t.length&&(t=[t[0],t[1],t[0],t[1]]),4===t.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=t})).then(this.setPageSize)},s.prototype.setPageSize=function(t){function e(t,e){return Math.floor(t*e/72*96)}return this.then((function(){(t=t||Nt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(t.inner={width:t.width-this.opt.margin[1]-this.opt.margin[3],height:t.height-this.opt.margin[0]-this.opt.margin[2]},t.inner.px={width:e(t.inner.width,t.k),height:e(t.inner.height,t.k)},t.inner.ratio=t.inner.height/t.inner.width),this.prop.pageSize=t}))},s.prototype.setProgress=function(t,e,r,n){return null!=t&&(this.progress.val=t),null!=e&&(this.progress.state=e),null!=r&&(this.progress.n=r),null!=n&&(this.progress.stack=n),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(t,e,r,n){return this.setProgress(t?this.progress.val+t:null,e||null,r?this.progress.n+r:null,n?this.progress.stack.concat(n):null)},s.prototype.then=function(t,e){var r=this;return this.thenCore(t,e,(function(t,e){return r.updateProgress(null,null,1,[t]),Promise.prototype.then.call(this,(function(e){return r.updateProgress(null,t),e})).then(t,e).then((function(t){return r.updateProgress(1),t}))}))},s.prototype.thenCore=function(t,e,r){r=r||Promise.prototype.then,t&&(t=t.bind(this)),e&&(e=e.bind(this));var n=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:s.convert(Object.assign({},this),Promise.prototype),i=r.call(n,t,e);return s.convert(i,this.__proto__)},s.prototype.thenExternal=function(t,e){return Promise.prototype.then.call(this,t,e)},s.prototype.thenList=function(t){var e=this;return t.forEach((function(t){e=e.thenCore(t)})),e},s.prototype.catch=function(t){t&&(t=t.bind(this));var e=Promise.prototype.catch.call(this,t);return s.convert(e,this)},s.prototype.catchExternal=function(t){return Promise.prototype.catch.call(this,t)},s.prototype.error=function(t){return this.then((function(){throw new Error(t)}))},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Nt.getPageSize=function(t,e,r){if("object"===(0,n.Z)(t)){var i=t;t=i.orientation,e=i.unit||e,r=i.format||r}e=e||"mm",r=r||"a4",t=(""+(t||"P")).toLowerCase();var o,a=(""+r).toLowerCase(),s={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(e){case"pt":o=1;break;case"mm":o=72/25.4;break;case"cm":o=72/2.54;break;case"in":o=72;break;case"px":o=.75;break;case"pc":case"em":o=12;break;case"ex":o=6;break;default:throw"Invalid unit: "+e}var l,u=0,c=0;if(s.hasOwnProperty(a))u=s[a][1]/o,c=s[a][0]/o;else try{u=r[1],c=r[0]}catch(Fe){throw new Error("Invalid format: "+r)}if("p"===t||"portrait"===t)t="p",c>u&&(l=c,c=u,u=l);else{if("l"!==t&&"landscape"!==t)throw"Invalid orientation: "+t;t="l",u>c&&(l=c,c=u,u=l)}return{width:c,height:u,unit:e,k:o,orientation:t}},t.html=function(t,e){(e=e||{}).callback=e.callback||function(){},e.html2canvas=e.html2canvas||{},e.html2canvas.canvas=e.html2canvas.canvas||this.canvas,e.jsPDF=e.jsPDF||this,e.fontFaces=e.fontFaces?e.fontFaces.map(Be):null;var r=new s(e);return e.worker?r:r.from(t).doCallback()}}(Nt.API),Nt.API.addJS=function(t){return Pe=t,this.internal.events.subscribe("postPutResources",(function(){Me=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Me+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Oe=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Pe+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==Me&&void 0!==Oe&&this.internal.out("/Names <</JavaScript "+Me+" 0 R>>")})),this},function(t){var e;t.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=t.outline.render().split(/\r\n/),i=0;i<n.length;i++){var o=n[i],a=r.exec(o);if(null!=a){var s=a[1];t.internal.newObjectDeferredBegin(s,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,u=[];for(i=0;i<l;i++){var c=t.internal.newObject();u.push(c);var h=t.internal.getPageInfo(i+1);t.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var f=t.internal.newObject();for(t.internal.write("<< /Names [ "),i=0;i<u.length;i++)t.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+f+" 0 R"),t.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(t,e,r){var n={title:e,options:r,children:[]};return null==t&&(t=this.root),t.children.push(n),n},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(e){e.id=t.internal.newObjectDeferred();for(var r=0;r<e.children.length;r++)this.genIds_r(e.children[r])},t.outline.renderRoot=function(t){this.objStart(t),this.line("/Type /Outlines"),t.children.length>0&&(this.line("/First "+this.makeRef(t.children[0])),this.line("/Last "+this.makeRef(t.children[t.children.length-1]))),this.line("/Count "+this.count_r({count:0},t)),this.objEnd()},t.outline.renderItems=function(e){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,n=0;n<e.children.length;n++){var i=e.children[n];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(e)),n>0&&this.line("/Prev "+this.makeRef(e.children[n-1])),n<e.children.length-1&&this.line("/Next "+this.makeRef(e.children[n+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var a=t.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+a.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var s=0;s<e.children.length;s++)this.renderItems(e.children[s])},t.outline.line=function(t){this.ctx.val+=t+"\r\n"},t.outline.makeRef=function(t){return t.id+" 0 R"},t.outline.makeString=function(e){return"("+t.internal.pdfEscape(e)+")"},t.outline.objStart=function(t){this.ctx.val+="\r\n"+t.id+" 0 obj\r\n<<\r\n"},t.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},t.outline.count_r=function(t,e){for(var r=0;r<e.children.length;r++)t.count++,this.count_r(t,e.children[r]);return t.count}}])}(Nt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(t,r,n,i,o,a){var s,l=this.decode.DCT_DECODE,u=null;if("string"==typeof t||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(s=function(t){for(var r,n=256*t.charCodeAt(4)+t.charCodeAt(5),i=t.length,o={width:0,height:0,numcomponents:1},a=4;a<i;a+=2){if(a+=n,-1!==e.indexOf(t.charCodeAt(a+1))){r=256*t.charCodeAt(a+5)+t.charCodeAt(a+6),o={width:256*t.charCodeAt(a+7)+t.charCodeAt(a+8),height:r,numcomponents:t.charCodeAt(a+9)};break}n=256*t.charCodeAt(a+2)+t.charCodeAt(a+3)}return o}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:t,width:s.width,height:s.height,colorSpace:a,bitsPerComponent:8,filter:l,index:r,alias:n}}return u}}(Nt.API);var Re,De,je,He,Qe,ze=function(){var t,e,r;function n(t){var e,r,n,i,o,a,s,l,u,c,h,f,p,A;for(this.data=t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},a=null;;){switch(e=this.readUInt32(),u=function(){var t,e;for(e=[],t=0;t<4;++t)e.push(String.fromCharCode(this.data[this.pos++]));return e}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(e);break;case"fcTL":a&&this.animation.frames.push(a),this.pos+=4,a={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},o=this.readUInt16(),i=this.readUInt16()||100,a.delay=1e3*o/i,a.disposeOp=this.data[this.pos++],a.blendOp=this.data[this.pos++],a.data=[];break;case"IDAT":case"fdAT":for("fdAT"===u&&(this.pos+=4,e-=4),t=(null!=a?a.data:void 0)||this.imgData,f=0;0<=e?f<e:f>e;0<=e?++f:--f)t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(n=this.palette.length/3,this.transparency.indexed=this.read(e),this.transparency.indexed.length>n)throw new Error("More transparent colors than palette size");if((c=n-this.transparency.indexed.length)>0)for(p=0;0<=c?p<c:p>c;0<=c?++p:--p)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case"tEXt":s=(h=this.read(e)).indexOf(0),l=String.fromCharCode.apply(String,h.slice(0,s)),this.text[l]=String.fromCharCode.apply(String,h.slice(s+1));break;case"IEND":return a&&this.animation.frames.push(a),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(A=this.colorType)||6===A,r=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*r,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=e}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(t){var e,r;for(r=[],e=0;0<=t?e<t:e>t;0<=t?++e:--e)r.push(this.data[this.pos++]);return r},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(t){var e=this.pixelBitlength/8,r=new Uint8Array(this.width*this.height*e),n=0,i=this;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);function o(o,a,s,l){var u,c,h,f,p,A,d,g,y,v,m,b,_,w,x,E,B,C,S,k,T,N=Math.ceil((i.width-o)/s),L=Math.ceil((i.height-a)/l),I=i.width==N&&i.height==L;for(w=e*N,b=I?r:new Uint8Array(w*L),A=t.length,_=0,c=0;_<L&&n<A;){switch(t[n++]){case 0:for(f=B=0;B<w;f=B+=1)b[c++]=t[n++];break;case 1:for(f=C=0;C<w;f=C+=1)u=t[n++],p=f<e?0:b[c-e],b[c++]=(u+p)%256;break;case 2:for(f=S=0;S<w;f=S+=1)u=t[n++],h=(f-f%e)/e,x=_&&b[(_-1)*w+h*e+f%e],b[c++]=(x+u)%256;break;case 3:for(f=k=0;k<w;f=k+=1)u=t[n++],h=(f-f%e)/e,p=f<e?0:b[c-e],x=_&&b[(_-1)*w+h*e+f%e],b[c++]=(u+Math.floor((p+x)/2))%256;break;case 4:for(f=T=0;T<w;f=T+=1)u=t[n++],h=(f-f%e)/e,p=f<e?0:b[c-e],0===_?x=E=0:(x=b[(_-1)*w+h*e+f%e],E=h&&b[(_-1)*w+(h-1)*e+f%e]),d=p+x-E,g=Math.abs(d-p),v=Math.abs(d-x),m=Math.abs(d-E),y=g<=v&&g<=m?p:v<=m?x:E,b[c++]=(u+y)%256;break;default:throw new Error("Invalid filter algorithm: "+t[n-1])}if(!I){var M=((a+_*l)*i.width+o)*e,O=_*w;for(f=0;f<N;f+=1){for(var P=0;P<e;P+=1)r[M++]=b[O++];M+=(s-1)*e}}_++}}return t=X(t),1==i.interlaceMethod?(o(0,0,8,8),o(4,0,8,8),o(0,4,4,8),o(2,0,4,4),o(0,2,2,4),o(1,0,2,2),o(0,1,1,2)):o(0,0,1,1),r},n.prototype.decodePalette=function(){var t,e,r,n,i,o,a,s,l;for(r=this.palette,o=this.transparency.indexed||[],i=new Uint8Array((o.length||0)+r.length),n=0,t=0,e=a=0,s=r.length;a<s;e=a+=3)i[n++]=r[e],i[n++]=r[e+1],i[n++]=r[e+2],i[n++]=null!=(l=o[t++])?l:255;return i},n.prototype.copyToImageData=function(t,e){var r,n,i,o,a,s,l,u,c,h,f;if(n=this.colors,c=null,r=this.hasAlphaChannel,this.palette.length&&(c=null!=(f=this._decodedPalette)?f:this._decodedPalette=this.decodePalette(),n=4,r=!0),u=(i=t.data||t).length,a=c||e,o=s=0,1===n)for(;o<u;)l=c?4*e[o/4]:s,h=a[l++],i[o++]=h,i[o++]=h,i[o++]=h,i[o++]=r?a[l++]:255,s=l;else for(;o<u;)l=c?4*e[o/4]:s,i[o++]=a[l++],i[o++]=a[l++],i[o++]=a[l++],i[o++]=r?a[l++]:255,s=l},n.prototype.decode=function(){var t;return t=new Uint8Array(this.width*this.height*4),this.copyToImageData(t,this.decodePixels()),t};var i=function(){if("[object Window]"===Object.prototype.toString.call(J)){try{e=J.document.createElement("canvas"),r=e.getContext("2d")}catch(t){return!1}return!0}return!1};return i(),t=function(t){var n;if(!0===i())return r.width=t.width,r.height=t.height,r.clearRect(0,0,t.width,t.height),r.putImageData(t,0,0),(n=new Image).src=e.toDataURL(),n;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(e){var r,n,i,o,a,s,l,u;if(this.animation){for(u=[],n=a=0,s=(l=this.animation.frames).length;a<s;n=++a)r=l[n],i=e.createImageData(r.width,r.height),o=this.decodePixels(new Uint8Array(r.data)),this.copyToImageData(i,o),r.imageData=i,u.push(r.image=t(i));return u}},n.prototype.renderFrame=function(t,e){var r,n,i;return r=(n=this.animation.frames)[e],i=n[e-1],0===e&&t.clearRect(0,0,this.width,this.height),1===(null!=i?i.disposeOp:void 0)?t.clearRect(i.xOffset,i.yOffset,i.width,i.height):2===(null!=i?i.disposeOp:void 0)&&t.putImageData(i.imageData,i.xOffset,i.yOffset),0===r.blendOp&&t.clearRect(r.xOffset,r.yOffset,r.width,r.height),t.drawImage(r.image,r.xOffset,r.yOffset)},n.prototype.animate=function(t){var e,r,n,i,o,a,s=this;return r=0,a=this.animation,i=a.numFrames,n=a.frames,o=a.numPlays,(e=function(){var a,l;if(a=r++%i,l=n[a],s.renderFrame(t,a),i>1&&r/i<o)return s.animation._timeout=setTimeout(e,l.delay)})()},n.prototype.stopAnimation=function(){var t;return clearTimeout(null!=(t=this.animation)?t._timeout:void 0)},n.prototype.render=function(t){var e,r;return t._png&&t._png.stopAnimation(),t._png=this,t.width=this.width,t.height=this.height,e=t.getContext("2d"),this.animation?(this.decodeFrames(e),this.animate(e)):(r=e.createImageData(this.width,this.height),this.copyToImageData(r,this.decodePixels()),e.putImageData(r,0,0))},n}();function Ve(t){var e=0;if(71!==t[e++]||73!==t[e++]||70!==t[e++]||56!==t[e++]||56!=(t[e++]+1&253)||97!==t[e++])throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,i=t[e++],o=i>>7,a=1<<1+(7&i);t[e++],t[e++];var s=null,l=null;o&&(s=e,l=a,e+=3*a);var u=!0,c=[],h=0,f=null,p=0,A=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(11!==t[e]||78==t[e+1]&&69==t[e+2]&&84==t[e+3]&&83==t[e+4]&&67==t[e+5]&&65==t[e+6]&&80==t[e+7]&&69==t[e+8]&&50==t[e+9]&&46==t[e+10]&&48==t[e+11]&&3==t[e+12]&&1==t[e+13]&&0==t[e+16])e+=14,A=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((S=t[e++])>=0))throw Error("Invalid block size");if(0===S)break;e+=S}break;case 249:if(4!==t[e++]||0!==t[e+4])throw new Error("Invalid graphics extension block.");var d=t[e++];h=t[e++]|t[e++]<<8,f=t[e++],0==(1&d)&&(f=null),p=d>>2&7,e++;break;case 254:for(;;){if(!((S=t[e++])>=0))throw Error("Invalid block size");if(0===S)break;e+=S}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var g=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,m=t[e++]|t[e++]<<8,b=t[e++],_=b>>6&1,w=1<<1+(7&b),x=s,E=l,B=!1;b>>7&&(B=!0,x=e,E=w,e+=3*w);var C=e;for(e++;;){var S;if(!((S=t[e++])>=0))throw Error("Invalid block size");if(0===S)break;e+=S}c.push({x:g,y:y,width:v,height:m,has_local_palette:B,palette_offset:x,palette_size:E,data_offset:C,data_length:e-C,transparent_index:f,interlaced:!!_,delay:h,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return A},this.frameInfo=function(t){if(t<0||t>=c.length)throw new Error("Frame index out of range.");return c[t]},this.decodeAndBlitFrameBGRA=function(e,n){var i=this.frameInfo(e),o=i.width*i.height,a=new Uint8Array(o);Ge(t,i.data_offset,a,o);var s=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var u=i.width,c=r-u,h=u,f=4*(i.y*r+i.x),p=4*((i.y+i.height)*r+i.x),A=f,d=4*c;!0===i.interlaced&&(d+=4*r*7);for(var g=8,y=0,v=a.length;y<v;++y){var m=a[y];if(0===h&&(h=u,(A+=d)>=p&&(d=4*c+4*r*(g-1),A=f+(u+c)*(g<<1),g>>=1)),m===l)A+=4;else{var b=t[s+3*m],_=t[s+3*m+1],w=t[s+3*m+2];n[A++]=w,n[A++]=_,n[A++]=b,n[A++]=255}--h}},this.decodeAndBlitFrameRGBA=function(e,n){var i=this.frameInfo(e),o=i.width*i.height,a=new Uint8Array(o);Ge(t,i.data_offset,a,o);var s=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var u=i.width,c=r-u,h=u,f=4*(i.y*r+i.x),p=4*((i.y+i.height)*r+i.x),A=f,d=4*c;!0===i.interlaced&&(d+=4*r*7);for(var g=8,y=0,v=a.length;y<v;++y){var m=a[y];if(0===h&&(h=u,(A+=d)>=p&&(d=4*c+4*r*(g-1),A=f+(u+c)*(g<<1),g>>=1)),m===l)A+=4;else{var b=t[s+3*m],_=t[s+3*m+1],w=t[s+3*m+2];n[A++]=b,n[A++]=_,n[A++]=w,n[A++]=255}--h}}}function Ge(t,e,r,n){for(var i=t[e++],o=1<<i,a=o+1,s=a+1,l=i+1,u=(1<<l)-1,c=0,h=0,f=0,p=t[e++],A=new Int32Array(4096),d=null;;){for(;c<16&&0!==p;)h|=t[e++]<<c,c+=8,1===p?p=t[e++]:--p;if(c<l)break;var g=h&u;if(h>>=l,c-=l,g!==o){if(g===a)break;for(var y=g<s?g:d,v=0,m=y;m>o;)m=A[m]>>8,++v;var b=m;if(f+v+(y!==g?1:0)>n)return void $.log("Warning, gif stream longer than expected.");r[f++]=b;var _=f+=v;for(y!==g&&(r[f++]=b),m=y;v--;)m=A[m],r[--_]=255&m,m>>=8;null!==d&&s<4096&&(A[s++]=d<<8|b,s>=u+1&&l<12&&(++l,u=u<<1|1)),d=g}else s=a+1,u=(1<<(l=i+1))-1,d=null}return f!==n&&$.log("Warning, gif stream shorter than expected."),r}function qe(t){var e,r,n,i,o,a=Math.floor,s=new Array(64),l=new Array(64),u=new Array(64),c=new Array(64),h=new Array(65535),f=new Array(65535),p=new Array(64),A=new Array(64),d=[],g=0,y=7,v=new Array(64),m=new Array(64),b=new Array(64),_=new Array(256),w=new Array(2048),x=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],C=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],S=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],N=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],L=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function I(t,e){for(var r=0,n=0,i=new Array,o=1;o<=16;o++){for(var a=1;a<=t[o];a++)i[e[n]]=[],i[e[n]][0]=r,i[e[n]][1]=o,n++,r++;r*=2}return i}function M(t){for(var e=t[0],r=t[1]-1;r>=0;)e&1<<r&&(g|=1<<y),r--,--y<0&&(255==g?(O(255),O(0)):O(g),y=7,g=0)}function O(t){d.push(t)}function P(t){O(t>>8&255),O(255&t)}function F(t,e,r,n,i){for(var o,a=i[0],s=i[240],l=function(t,e){var r,n,i,o,a,s,l,u,c,h,f=0;for(c=0;c<8;++c){r=t[f],n=t[f+1],i=t[f+2],o=t[f+3],a=t[f+4],s=t[f+5],l=t[f+6];var A=r+(u=t[f+7]),d=r-u,g=n+l,y=n-l,v=i+s,m=i-s,b=o+a,_=o-a,w=A+b,x=A-b,E=g+v,B=g-v;t[f]=w+E,t[f+4]=w-E;var C=.707106781*(B+x);t[f+2]=x+C,t[f+6]=x-C;var S=.382683433*((w=_+m)-(B=y+d)),k=.5411961*w+S,T=1.306562965*B+S,N=.707106781*(E=m+y),L=d+N,I=d-N;t[f+5]=I+k,t[f+3]=I-k,t[f+1]=L+T,t[f+7]=L-T,f+=8}for(f=0,c=0;c<8;++c){r=t[f],n=t[f+8],i=t[f+16],o=t[f+24],a=t[f+32],s=t[f+40],l=t[f+48];var M=r+(u=t[f+56]),O=r-u,P=n+l,F=n-l,U=i+s,R=i-s,D=o+a,j=o-a,H=M+D,Q=M-D,z=P+U,V=P-U;t[f]=H+z,t[f+32]=H-z;var G=.707106781*(V+Q);t[f+16]=Q+G,t[f+48]=Q-G;var q=.382683433*((H=j+R)-(V=F+O)),K=.5411961*H+q,Y=1.306562965*V+q,W=.707106781*(z=R+F),X=O+W,J=O-W;t[f+40]=J+K,t[f+24]=J-K,t[f+8]=X+Y,t[f+56]=X-Y,f++}for(c=0;c<64;++c)h=t[c]*e[c],p[c]=h>0?h+.5|0:h-.5|0;return p}(t,e),u=0;u<64;++u)A[x[u]]=l[u];var c=A[0]-r;r=A[0],0==c?M(n[0]):(M(n[f[o=32767+c]]),M(h[o]));for(var d=63;d>0&&0==A[d];)d--;if(0==d)return M(a),r;for(var g,y=1;y<=d;){for(var v=y;0==A[y]&&y<=d;)++y;var m=y-v;if(m>=16){g=m>>4;for(var b=1;b<=g;++b)M(s);m&=15}o=32767+A[y],M(i[(m<<4)+f[o]]),M(h[o]),y++}return 63!=d&&M(a),r}function U(t){t=Math.min(Math.max(t,1),100),o!=t&&(function(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],r=0;r<64;r++){var n=a((e[r]*t+50)/100);n=Math.min(Math.max(n,1),255),s[x[r]]=n}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;o<64;o++){var h=a((i[o]*t+50)/100);h=Math.min(Math.max(h,1),255),l[x[o]]=h}for(var f=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],p=0,A=0;A<8;A++)for(var d=0;d<8;d++)u[p]=1/(s[x[p]]*f[A]*f[d]*8),c[p]=1/(l[x[p]]*f[A]*f[d]*8),p++}(t<50?Math.floor(5e3/t):Math.floor(200-2*t)),o=t)}this.encode=function(t,o){o&&U(o),d=new Array,g=0,y=7,P(65496),P(65504),P(16),O(74),O(70),O(73),O(70),O(0),O(1),O(1),O(0),P(1),P(1),O(0),O(0),function(){P(65499),P(132),O(0);for(var t=0;t<64;t++)O(s[t]);O(1);for(var e=0;e<64;e++)O(l[e])}(),function(t,e){P(65472),P(17),O(8),P(e),P(t),O(3),O(1),O(17),O(0),O(2),O(17),O(1),O(3),O(17),O(1)}(t.width,t.height),function(){P(65476),P(418),O(0);for(var t=0;t<16;t++)O(E[t+1]);for(var e=0;e<=11;e++)O(B[e]);O(16);for(var r=0;r<16;r++)O(C[r+1]);for(var n=0;n<=161;n++)O(S[n]);O(1);for(var i=0;i<16;i++)O(k[i+1]);for(var o=0;o<=11;o++)O(T[o]);O(17);for(var a=0;a<16;a++)O(N[a+1]);for(var s=0;s<=161;s++)O(L[s])}(),P(65498),P(12),O(3),O(1),O(0),O(2),O(17),O(3),O(17),O(0),O(63),O(0);var a=0,h=0,f=0;g=0,y=7,this.encode.displayName="_encode_";for(var p,A,_,x,I,R,D,j,H,Q=t.data,z=t.width,V=t.height,G=4*z,q=0;q<V;){for(p=0;p<G;){for(I=G*q+p,D=-1,j=0,H=0;H<64;H++)R=I+(j=H>>3)*G+(D=4*(7&H)),q+j>=V&&(R-=G*(q+1+j-V)),p+D>=G&&(R-=p+D-G+4),A=Q[R++],_=Q[R++],x=Q[R++],v[H]=(w[A]+w[_+256>>0]+w[x+512>>0]>>16)-128,m[H]=(w[A+768>>0]+w[_+1024>>0]+w[x+1280>>0]>>16)-128,b[H]=(w[A+1280>>0]+w[_+1536>>0]+w[x+1792>>0]>>16)-128;a=F(v,u,a,e,n),h=F(m,c,h,r,i),f=F(b,c,f,r,i),p+=32}q+=8}if(y>=0){var K=[];K[1]=y+1,K[0]=(1<<y+1)-1,M(K)}return P(65497),new Uint8Array(d)},t=t||50,function(){for(var t=String.fromCharCode,e=0;e<256;e++)_[e]=t(e)}(),e=I(E,B),r=I(k,T),n=I(C,S),i=I(N,L),function(){for(var t=1,e=2,r=1;r<=15;r++){for(var n=t;n<e;n++)f[32767+n]=r,h[32767+n]=[],h[32767+n][1]=r,h[32767+n][0]=n;for(var i=-(e-1);i<=-t;i++)f[32767+i]=r,h[32767+i]=[],h[32767+i][1]=r,h[32767+i][0]=e-1+i;t<<=1,e<<=1}}(),function(){for(var t=0;t<256;t++)w[t]=19595*t,w[t+256>>0]=38470*t,w[t+512>>0]=7471*t+32768,w[t+768>>0]=-11059*t,w[t+1024>>0]=-21709*t,w[t+1280>>0]=32768*t+8421375,w[t+1536>>0]=-27439*t,w[t+1792>>0]=-5329*t}(),U(t)}function Ke(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Ye(t){function e(t){if(!t)throw Error("assert :P")}function r(t,e,r){for(var n=0;4>n;n++)if(t[e+n]!=r.charCodeAt(n))return!0;return!1}function n(t,e,r,n,i){for(var o=0;o<i;o++)t[e+o]=r[n+o]}function i(t,e,r,n){for(var i=0;i<n;i++)t[e+i]=r}function o(t){return new Int32Array(t)}function a(t,e){for(var r=[],n=0;n<t;n++)r.push(new e);return r}function s(t,e){var r=[];return function t(r,n,i){for(var o=i[n],a=0;a<o&&(r.push(i.length>n+1?[]:new e),!(i.length<n+1));a++)t(r[a],n+1,i)}(r,0,t),r}var l=function(){var t=this;function l(t,e){for(var r=1<<e-1>>>0;t&r;)r>>>=1;return r?(t&r-1)+r:t}function u(t,r,n,i,o){e(!(i%n));do{t[r+(i-=n)]=o}while(0<i)}function c(t,r,n,i,a){if(e(2328>=a),512>=a)var s=o(512);else if(null==(s=o(a)))return 0;return function(t,r,n,i,a,s){var c,f,p=r,A=1<<n,d=o(16),g=o(16);for(e(0!=a),e(null!=i),e(null!=t),e(0<n),f=0;f<a;++f){if(15<i[f])return 0;++d[i[f]]}if(d[0]==a)return 0;for(g[1]=0,c=1;15>c;++c){if(d[c]>1<<c)return 0;g[c+1]=g[c]+d[c]}for(f=0;f<a;++f)c=i[f],0<i[f]&&(s[g[c]++]=f);if(1==g[15])return(i=new h).g=0,i.value=s[0],u(t,p,1,A,i),A;var y,v=-1,m=A-1,b=0,_=1,w=1,x=1<<n;for(f=0,c=1,a=2;c<=n;++c,a<<=1){if(_+=w<<=1,0>(w-=d[c]))return 0;for(;0<d[c];--d[c])(i=new h).g=c,i.value=s[f++],u(t,p+b,a,x,i),b=l(b,c)}for(c=n+1,a=2;15>=c;++c,a<<=1){if(_+=w<<=1,0>(w-=d[c]))return 0;for(;0<d[c];--d[c]){if(i=new h,(b&m)!=v){for(p+=x,y=1<<(v=c)-n;15>v&&!(0>=(y-=d[v]));)++v,y<<=1;A+=x=1<<(y=v-n),t[r+(v=b&m)].g=y+n,t[r+v].value=p-r-v}i.g=c-n,i.value=s[f++],u(t,p+(b>>n),a,x,i),b=l(b,c)}}return _!=2*g[15]-1?0:A}(t,r,n,i,a,s)}function h(){this.value=this.g=0}function f(){this.value=this.g=0}function p(){this.G=a(5,h),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Rr,f)}function A(t,r,n,i){e(null!=t),e(null!=r),e(2147483648>i),t.Ca=254,t.I=0,t.b=-8,t.Ka=0,t.oa=r,t.pa=n,t.Jd=r,t.Yc=n+i,t.Zc=4<=i?n+i-4+1:n,C(t)}function d(t,e){for(var r=0;0<e--;)r|=k(t,128)<<e;return r}function g(t,e){var r=d(t,e);return S(t)?-r:r}function y(t,r,n,i){var o,a=0;for(e(null!=t),e(null!=r),e(4294967288>i),t.Sb=i,t.Ra=0,t.u=0,t.h=0,4<i&&(i=4),o=0;o<i;++o)a+=r[n+o]<<8*o;t.Ra=a,t.bb=i,t.oa=r,t.pa=n}function v(t){for(;8<=t.u&&t.bb<t.Sb;)t.Ra>>>=8,t.Ra+=t.oa[t.pa+t.bb]<<Hr-8>>>0,++t.bb,t.u-=8;x(t)&&(t.h=1,t.u=0)}function m(t,r){if(e(0<=r),!t.h&&r<=jr){var n=w(t)&Dr[r];return t.u+=r,v(t),n}return t.h=1,t.u=0}function b(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function _(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function w(t){return t.Ra>>>(t.u&Hr-1)>>>0}function x(t){return e(t.bb<=t.Sb),t.h||t.bb==t.Sb&&t.u>Hr}function E(t,e){t.u=e,t.h=x(t)}function B(t){t.u>=Qr&&(e(t.u>=Qr),v(t))}function C(t){e(null!=t&&null!=t.oa),t.pa<t.Zc?(t.I=(t.oa[t.pa++]|t.I<<8)>>>0,t.b+=8):(e(null!=t&&null!=t.oa),t.pa<t.Yc?(t.b+=8,t.I=t.oa[t.pa++]|t.I<<8):t.Ka?t.b=0:(t.I<<=8,t.b+=8,t.Ka=1))}function S(t){return d(t,1)}function k(t,e){var r=t.Ca;0>t.b&&C(t);var n=t.b,i=r*e>>>8,o=(t.I>>>n>i)+0;for(o?(r-=i,t.I-=i+1<<n>>>0):r=i+1,n=r,i=0;256<=n;)i+=8,n>>=8;return n=7^i+zr[n],t.b-=n,t.Ca=(r<<n)-1,o}function T(t,e,r){t[e+0]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=r>>0&255}function N(t,e){return t[e+0]<<0|t[e+1]<<8}function L(t,e){return N(t,e)|t[e+2]<<16}function I(t,e){return N(t,e)|N(t,e+2)<<16}function M(t,r){var n=1<<r;return e(null!=t),e(0<r),t.X=o(n),null==t.X?0:(t.Mb=32-r,t.Xa=r,1)}function O(t,r){e(null!=t),e(null!=r),e(t.Xa==r.Xa),n(r.X,0,t.X,0,1<<r.Xa)}function P(){this.X=[],this.Xa=this.Mb=0}function F(t,r,n,i){e(null!=n),e(null!=i);var o=n[0],a=i[0];return 0==o&&(o=(t*a+r/2)/r),0==a&&(a=(r*o+t/2)/t),0>=o||0>=a?0:(n[0]=o,i[0]=a,1)}function U(t,e){return t+(1<<e)-1>>>e}function R(t,e){return((4278255360&t)+(4278255360&e)>>>0&4278255360)+((16711935&t)+(16711935&e)>>>0&16711935)>>>0}function D(e,r){t[r]=function(r,n,i,o,a,s,l){var u;for(u=0;u<a;++u){var c=t[e](s[l+u-1],i,o+u);s[l+u]=R(r[n+u],c)}}}function j(){this.ud=this.hd=this.jd=0}function H(t,e){return((4278124286&(t^e))>>>1)+(t&e)>>>0}function Q(t){return 0<=t&&256>t?t:0>t?0:255<t?255:void 0}function z(t,e){return Q(t+(t-e+.5>>1))}function V(t,e,r){return Math.abs(e-r)-Math.abs(t-r)}function G(t,e,r,n,i,o,a){for(n=o[a-1],r=0;r<i;++r)o[a+r]=n=R(t[e+r],n)}function q(t,e,r,n,i){var o;for(o=0;o<r;++o){var a=t[e+o],s=a>>8&255,l=16711935&(l=(l=16711935&a)+((s<<16)+s));n[i+o]=(4278255360&a)+l>>>0}}function K(t,e){e.jd=t>>0&255,e.hd=t>>8&255,e.ud=t>>16&255}function Y(t,e,r,n,i,o){var a;for(a=0;a<n;++a){var s=e[r+a],l=s>>>8,u=s,c=255&(c=(c=s>>>16)+((t.jd<<24>>24)*(l<<24>>24)>>>5));u=255&(u=(u+=(t.hd<<24>>24)*(l<<24>>24)>>>5)+((t.ud<<24>>24)*(c<<24>>24)>>>5)),i[o+a]=(4278255360&s)+(c<<16)+u}}function W(e,r,n,i,o){t[r]=function(t,e,r,n,a,s,l,u,c){for(n=l;n<u;++n)for(l=0;l<c;++l)a[s++]=o(r[i(t[e++])])},t[e]=function(e,r,a,s,l,u,c){var h=8>>e.b,f=e.Ea,p=e.K[0],A=e.w;if(8>h)for(e=(1<<e.b)-1,A=(1<<h)-1;r<a;++r){var d,g=0;for(d=0;d<f;++d)d&e||(g=i(s[l++])),u[c++]=o(p[g&A]),g>>=h}else t["VP8LMapColor"+n](s,l,p,A,u,c,r,a,f)}}function X(t,e,r,n,i){for(r=e+r;e<r;){var o=t[e++];n[i++]=o>>16&255,n[i++]=o>>8&255,n[i++]=o>>0&255}}function J(t,e,r,n,i){for(r=e+r;e<r;){var o=t[e++];n[i++]=o>>16&255,n[i++]=o>>8&255,n[i++]=o>>0&255,n[i++]=o>>24&255}}function Z(t,e,r,n,i){for(r=e+r;e<r;){var o=(a=t[e++])>>16&240|a>>12&15,a=a>>0&240|a>>28&15;n[i++]=o,n[i++]=a}}function $(t,e,r,n,i){for(r=e+r;e<r;){var o=(a=t[e++])>>16&248|a>>13&7,a=a>>5&224|a>>3&31;n[i++]=o,n[i++]=a}}function tt(t,e,r,n,i){for(r=e+r;e<r;){var o=t[e++];n[i++]=o>>0&255,n[i++]=o>>8&255,n[i++]=o>>16&255}}function et(t,e,r,i,o,a){if(0==a)for(r=e+r;e<r;)T(i,((a=t[e++])[0]>>24|a[1]>>8&65280|a[2]<<8&16711680|a[3]<<24)>>>0),o+=32;else n(i,o,t,e,r)}function rt(e,r){t[r][0]=t[e+"0"],t[r][1]=t[e+"1"],t[r][2]=t[e+"2"],t[r][3]=t[e+"3"],t[r][4]=t[e+"4"],t[r][5]=t[e+"5"],t[r][6]=t[e+"6"],t[r][7]=t[e+"7"],t[r][8]=t[e+"8"],t[r][9]=t[e+"9"],t[r][10]=t[e+"10"],t[r][11]=t[e+"11"],t[r][12]=t[e+"12"],t[r][13]=t[e+"13"],t[r][14]=t[e+"0"],t[r][15]=t[e+"0"]}function nt(t){return t==zn||t==Vn||t==Gn||t==qn}function it(){this.eb=[],this.size=this.A=this.fb=0}function ot(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function at(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new it,this.f.kb=new ot,this.sd=null}function st(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function lt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ut(t){return alert("todo:WebPSamplerProcessPlane"),t.T}function ct(t,e){var r=t.T,i=e.ba.f.RGBA,o=i.eb,a=i.fb+t.ka*i.A,s=yi[e.ba.S],l=t.y,u=t.O,c=t.f,h=t.N,f=t.ea,p=t.W,A=e.cc,d=e.dc,g=e.Mc,y=e.Nc,v=t.ka,m=t.ka+t.T,b=t.U,_=b+1>>1;for(0==v?s(l,u,null,null,c,h,f,p,c,h,f,p,o,a,null,null,b):(s(e.ec,e.fc,l,u,A,d,g,y,c,h,f,p,o,a-i.A,o,a,b),++r);v+2<m;v+=2)A=c,d=h,g=f,y=p,h+=t.Rc,p+=t.Rc,a+=2*i.A,s(l,(u+=2*t.fa)-t.fa,l,u,A,d,g,y,c,h,f,p,o,a-i.A,o,a,b);return u+=t.fa,t.j+m<t.o?(n(e.ec,e.fc,l,u,b),n(e.cc,e.dc,c,h,_),n(e.Mc,e.Nc,f,p,_),r--):1&m||s(l,u,null,null,c,h,f,p,c,h,f,p,o,a+i.A,null,null,b),r}function ht(t,r,n){var i=t.F,o=[t.J];if(null!=i){var a=t.U,s=r.ba.S,l=s==jn||s==Gn;r=r.ba.f.RGBA;var u=[0],c=t.ka;u[0]=t.T,t.Kb&&(0==c?--u[0]:(--c,o[0]-=t.width),t.j+t.ka+t.T==t.o&&(u[0]=t.o-t.j-c));var h=r.eb;c=r.fb+c*r.A,t=Bn(i,o[0],t.width,a,u,h,c+(l?0:3),r.A),e(n==u),t&&nt(s)&&xn(h,c,l,a,u,r.A)}return 0}function ft(t){var e=t.ma,r=e.ba.S,n=11>r,i=r==Un||r==Dn||r==jn||r==Hn||12==r||nt(r);if(e.memory=null,e.Ib=null,e.Jb=null,e.Nd=null,!Pr(e.Oa,t,i?11:12))return 0;if(i&&nt(r)&&vr(),t.da)alert("todo:use_scaling");else{if(n){if(e.Ib=ut,t.Kb){if(r=t.U+1>>1,e.memory=o(t.U+2*r),null==e.memory)return 0;e.ec=e.memory,e.fc=0,e.cc=e.ec,e.dc=e.fc+t.U,e.Mc=e.cc,e.Nc=e.dc+r,e.Ib=ct,vr()}}else alert("todo:EmitYUV");i&&(e.Jb=ht,n&&gr())}if(n&&!Li){for(t=0;256>t;++t)Ii[t]=89858*(t-128)+Ci>>Bi,Pi[t]=-22014*(t-128)+Ci,Oi[t]=-45773*(t-128),Mi[t]=113618*(t-128)+Ci>>Bi;for(t=Si;t<ki;++t)e=76283*(t-16)+Ci>>Bi,Fi[t-Si]=Gt(e,255),Ui[t-Si]=Gt(e+8>>4,15);Li=1}return 1}function pt(t){var r=t.ma,n=t.U,i=t.T;return e(!(1&t.ka)),0>=n||0>=i?0:(n=r.Ib(t,r),null!=r.Jb&&r.Jb(t,r,n),r.Dc+=n,1)}function At(t){t.ma.memory=null}function dt(t,e,r,n){return 47!=m(t,8)?0:(e[0]=m(t,14)+1,r[0]=m(t,14)+1,n[0]=m(t,1),0!=m(t,3)?0:!t.h)}function gt(t,e){if(4>t)return t+1;var r=t-2>>1;return(2+(1&t)<<r)+m(e,r)+1}function yt(t,e){return 120<e?e-120:1<=(r=((r=Zn[e-1])>>4)*t+(8-(15&r)))?r:1;var r}function vt(t,e,r){var n=w(r),i=t[e+=255&n].g-8;return 0<i&&(E(r,r.u+8),n=w(r),e+=t[e].value,e+=n&(1<<i)-1),E(r,r.u+t[e].g),t[e].value}function mt(t,r,n){return n.g+=t.g,n.value+=t.value<<r>>>0,e(8>=n.g),t.g}function bt(t,r,n){var i=t.xc;return e((r=0==i?0:t.vc[t.md*(n>>i)+(r>>i)])<t.Wb),t.Ya[r]}function _t(t,r,i,o){var a=t.ab,s=t.c*r,l=t.C;r=l+r;var u=i,c=o;for(o=t.Ta,i=t.Ua;0<a--;){var h=t.gc[a],f=l,p=r,A=u,d=c,g=(c=o,u=i,h.Ea);switch(e(f<p),e(p<=h.nc),h.hc){case 2:qr(A,d,(p-f)*g,c,u);break;case 0:var y=f,v=p,m=c,b=u,_=(C=h).Ea;0==y&&(Vr(A,d,null,null,1,m,b),G(A,d+1,0,0,_-1,m,b+1),d+=_,b+=_,++y);for(var w=1<<C.b,x=w-1,E=U(_,C.b),B=C.K,C=C.w+(y>>C.b)*E;y<v;){var S=B,k=C,T=1;for(Gr(A,d,m,b-_,1,m,b);T<_;){var N=(T&~x)+w;N>_&&(N=_),(0,Jr[S[k++]>>8&15])(A,d+ +T,m,b+T-_,N-T,m,b+T),T=N}d+=_,b+=_,++y&x||(C+=E)}p!=h.nc&&n(c,u-g,c,u+(p-f-1)*g,g);break;case 1:for(g=A,v=d,_=(A=h.Ea)-(b=A&~(m=(d=1<<h.b)-1)),y=U(A,h.b),w=h.K,h=h.w+(f>>h.b)*y;f<p;){for(x=w,E=h,B=new j,C=v+b,S=v+A;v<C;)K(x[E++],B),Zr(B,g,v,d,c,u),v+=d,u+=d;v<S&&(K(x[E++],B),Zr(B,g,v,_,c,u),v+=_,u+=_),++f&m||(h+=y)}break;case 3:if(A==c&&d==u&&0<h.b){for(v=c,A=g=u+(p-f)*g-(b=(p-f)*U(h.Ea,h.b)),d=c,m=u,y=[],b=(_=b)-1;0<=b;--b)y[b]=d[m+b];for(b=_-1;0<=b;--b)v[A+b]=y[b];Kr(h,f,p,c,g,c,u)}else Kr(h,f,p,A,d,c,u)}u=o,c=i}c!=i&&n(o,i,u,c,s)}function wt(t,r){var n=t.V,i=t.Ba+t.c*t.C,o=r-t.C;if(e(r<=t.l.o),e(16>=o),0<o){var a=t.l,s=t.Ta,l=t.Ua,u=a.width;if(_t(t,o,n,i),o=l=[l],e((n=t.C)<(i=r)),e(a.v<a.va),i>a.o&&(i=a.o),n<a.j){var c=a.j-n;n=a.j,o[0]+=c*u}if(n>=i?n=0:(o[0]+=4*a.v,a.ka=n-a.j,a.U=a.va-a.v,a.T=i-n,n=1),n){if(l=l[0],11>(n=t.ca).S){var h=n.f.RGBA,f=(i=n.S,o=a.U,a=a.T,c=h.eb,h.A),p=a;for(h=h.fb+t.Ma*h.A;0<p--;){var A=s,d=l,g=o,y=c,v=h;switch(i){case Fn:$r(A,d,g,y,v);break;case Un:tn(A,d,g,y,v);break;case zn:tn(A,d,g,y,v),xn(y,v,0,g,1,0);break;case Rn:nn(A,d,g,y,v);break;case Dn:et(A,d,g,y,v,1);break;case Vn:et(A,d,g,y,v,1),xn(y,v,0,g,1,0);break;case jn:et(A,d,g,y,v,0);break;case Gn:et(A,d,g,y,v,0),xn(y,v,1,g,1,0);break;case Hn:en(A,d,g,y,v);break;case qn:en(A,d,g,y,v),En(y,v,g,1,0);break;case Qn:rn(A,d,g,y,v);break;default:e(0)}l+=u,h+=f}t.Ma+=a}else alert("todo:EmitRescaledRowsYUVA");e(t.Ma<=n.height)}}t.C=r,e(t.C<=t.i)}function xt(t){var e;if(0<t.ua)return 0;for(e=0;e<t.Wb;++e){var r=t.Ya[e].G,n=t.Ya[e].H;if(0<r[1][n[1]+0].g||0<r[2][n[2]+0].g||0<r[3][n[3]+0].g)return 0}return 1}function Et(t,r,n,i,o,a){if(0!=t.Z){var s=t.qd,l=t.rd;for(e(null!=gi[t.Z]);r<n;++r)gi[t.Z](s,l,i,o,i,o,a),s=i,l=o,o+=a;t.qd=s,t.rd=l}}function Bt(t,r){var n=t.l.ma,i=0==n.Z||1==n.Z?t.l.j:t.C;if(i=t.C<i?i:t.C,e(r<=t.l.o),r>i){var o=t.l.width,a=n.ca,s=n.tb+o*i,l=t.V,u=t.Ba+t.c*i,c=t.gc;e(1==t.ab),e(3==c[0].hc),Wr(c[0],i,r,l,u,a,s),Et(n,i,r,a,s,o)}t.C=t.Ma=r}function Ct(t,r,n,i,o,a,s){var l=t.$/i,u=t.$%i,c=t.m,h=t.s,f=n+t.$,p=f;o=n+i*o;var A=n+i*a,d=280+h.ua,g=t.Pb?l:16777216,y=0<h.ua?h.Wa:null,v=h.wc,m=f<A?bt(h,u,l):null;e(t.C<a),e(A<=o);var b=!1;t:for(;;){for(;b||f<A;){var _=0;if(l>=g){var C=f-n;e((g=t).Pb),g.wd=g.m,g.xd=C,0<g.s.ua&&O(g.s.Wa,g.s.vb),g=l+ti}if(u&v||(m=bt(h,u,l)),e(null!=m),m.Qb&&(r[f]=m.qb,b=!0),!b)if(B(c),m.jc){_=c,C=r;var S=f,k=m.pd[w(_)&Rr-1];e(m.jc),256>k.g?(E(_,_.u+k.g),C[S]=k.value,_=0):(E(_,_.u+k.g-256),e(256<=k.value),_=k.value),0==_&&(b=!0)}else _=vt(m.G[0],m.H[0],c);if(c.h)break;if(b||256>_){if(!b)if(m.nd)r[f]=(m.qb|_<<8)>>>0;else{if(B(c),b=vt(m.G[1],m.H[1],c),B(c),C=vt(m.G[2],m.H[2],c),S=vt(m.G[3],m.H[3],c),c.h)break;r[f]=(S<<24|b<<16|_<<8|C)>>>0}if(b=!1,++f,++u>=i&&(u=0,++l,null!=s&&l<=a&&!(l%16)&&s(t,l),null!=y))for(;p<f;)_=r[p++],y.X[(506832829*_&4294967295)>>>y.Mb]=_}else if(280>_){if(_=gt(_-256,c),C=vt(m.G[4],m.H[4],c),B(c),C=yt(i,C=gt(C,c)),c.h)break;if(f-n<C||o-f<_)break t;for(S=0;S<_;++S)r[f+S]=r[f+S-C];for(f+=_,u+=_;u>=i;)u-=i,++l,null!=s&&l<=a&&!(l%16)&&s(t,l);if(e(f<=o),u&v&&(m=bt(h,u,l)),null!=y)for(;p<f;)_=r[p++],y.X[(506832829*_&4294967295)>>>y.Mb]=_}else{if(!(_<d))break t;for(b=_-280,e(null!=y);p<f;)_=r[p++],y.X[(506832829*_&4294967295)>>>y.Mb]=_;_=f,e(!(b>>>(C=y).Xa)),r[_]=C.X[b],b=!0}b||e(c.h==x(c))}if(t.Pb&&c.h&&f<o)e(t.m.h),t.a=5,t.m=t.wd,t.$=t.xd,0<t.s.ua&&O(t.s.vb,t.s.Wa);else{if(c.h)break t;null!=s&&s(t,l>a?a:l),t.a=0,t.$=f-n}return 1}return t.a=3,0}function St(t){e(null!=t),t.vc=null,t.yc=null,t.Ya=null;var r=t.Wa;null!=r&&(r.X=null),t.vb=null,e(null!=t)}function kt(){var e=new ar;return null==e?null:(e.a=0,e.xb=di,rt("Predictor","VP8LPredictors"),rt("Predictor","VP8LPredictors_C"),rt("PredictorAdd","VP8LPredictorsAdd"),rt("PredictorAdd","VP8LPredictorsAdd_C"),qr=q,Zr=Y,$r=X,tn=J,en=Z,rn=$,nn=tt,t.VP8LMapColor32b=Yr,t.VP8LMapColor8b=Xr,e)}function Tt(t,r,n,s,l){var u=1,f=[t],A=[r],d=s.m,g=s.s,y=null,v=0;t:for(;;){if(n)for(;u&&m(d,1);){var b=f,_=A,x=s,C=1,S=x.m,k=x.gc[x.ab],T=m(S,2);if(x.Oc&1<<T)u=0;else{switch(x.Oc|=1<<T,k.hc=T,k.Ea=b[0],k.nc=_[0],k.K=[null],++x.ab,e(4>=x.ab),T){case 0:case 1:k.b=m(S,3)+2,C=Tt(U(k.Ea,k.b),U(k.nc,k.b),0,x,k.K),k.K=k.K[0];break;case 3:var N,L=m(S,8)+1,I=16<L?0:4<L?1:2<L?2:3;if(b[0]=U(k.Ea,I),k.b=I,N=C=Tt(L,1,0,x,k.K)){var O,P=L,F=k,D=1<<(8>>F.b),j=o(D);if(null==j)N=0;else{var H=F.K[0],Q=F.w;for(j[0]=F.K[0][0],O=1;O<1*P;++O)j[O]=R(H[Q+O],j[O-1]);for(;O<4*D;++O)j[O]=0;F.K[0]=null,F.K[0]=j,N=1}}C=N;break;case 2:break;default:e(0)}u=C}}if(f=f[0],A=A[0],u&&m(d,1)&&!(u=1<=(v=m(d,4))&&11>=v)){s.a=3;break t}var z;if(z=u)e:{var V,G,q,K=s,Y=f,W=A,X=v,J=n,Z=K.m,$=K.s,tt=[null],et=1,rt=0,nt=$n[X];r:for(;;){if(J&&m(Z,1)){var it=m(Z,3)+2,ot=U(Y,it),at=U(W,it),st=ot*at;if(!Tt(ot,at,0,K,tt))break r;for(tt=tt[0],$.xc=it,V=0;V<st;++V){var lt=tt[V]>>8&65535;tt[V]=lt,lt>=et&&(et=lt+1)}}if(Z.h)break r;for(G=0;5>G;++G){var ut=Wn[G];!G&&0<X&&(ut+=1<<X),rt<ut&&(rt=ut)}var ct=a(et*nt,h),ht=et,ft=a(ht,p);if(null==ft)var pt=null;else e(65536>=ht),pt=ft;var At=o(rt);if(null==pt||null==At||null==ct){K.a=1;break r}var dt=ct;for(V=q=0;V<et;++V){var gt=pt[V],yt=gt.G,vt=gt.H,bt=0,_t=1,wt=0;for(G=0;5>G;++G){ut=Wn[G],yt[G]=dt,vt[G]=q,!G&&0<X&&(ut+=1<<X);n:{var xt,Et=ut,Bt=K,kt=At,Nt=dt,Lt=q,It=0,Mt=Bt.m,Ot=m(Mt,1);if(i(kt,0,0,Et),Ot){var Pt=m(Mt,1)+1,Ft=m(Mt,1),Ut=m(Mt,0==Ft?1:8);kt[Ut]=1,2==Pt&&(kt[Ut=m(Mt,8)]=1);var Rt=1}else{var Dt=o(19),jt=m(Mt,4)+4;if(19<jt){Bt.a=3;var Ht=0;break n}for(xt=0;xt<jt;++xt)Dt[Jn[xt]]=m(Mt,3);var Qt=void 0,zt=void 0,Vt=Bt,Gt=Dt,qt=Et,Kt=kt,Yt=0,Wt=Vt.m,Xt=8,Jt=a(128,h);i:for(;c(Jt,0,7,Gt,19);){if(m(Wt,1)){var Zt=2+2*m(Wt,3);if((Qt=2+m(Wt,Zt))>qt)break i}else Qt=qt;for(zt=0;zt<qt&&Qt--;){B(Wt);var $t=Jt[0+(127&w(Wt))];E(Wt,Wt.u+$t.g);var te=$t.value;if(16>te)Kt[zt++]=te,0!=te&&(Xt=te);else{var ee=16==te,re=te-16,ne=Yn[re],ie=m(Wt,Kn[re])+ne;if(zt+ie>qt)break i;for(var oe=ee?Xt:0;0<ie--;)Kt[zt++]=oe}}Yt=1;break i}Yt||(Vt.a=3),Rt=Yt}(Rt=Rt&&!Mt.h)&&(It=c(Nt,Lt,8,kt,Et)),Rt&&0!=It?Ht=It:(Bt.a=3,Ht=0)}if(0==Ht)break r;if(_t&&1==Xn[G]&&(_t=0==dt[q].g),bt+=dt[q].g,q+=Ht,3>=G){var ae,se=At[0];for(ae=1;ae<ut;++ae)At[ae]>se&&(se=At[ae]);wt+=se}}if(gt.nd=_t,gt.Qb=0,_t&&(gt.qb=(yt[3][vt[3]+0].value<<24|yt[1][vt[1]+0].value<<16|yt[2][vt[2]+0].value)>>>0,0==bt&&256>yt[0][vt[0]+0].value&&(gt.Qb=1,gt.qb+=yt[0][vt[0]+0].value<<8)),gt.jc=!gt.Qb&&6>wt,gt.jc){var le,ue=gt;for(le=0;le<Rr;++le){var ce=le,he=ue.pd[ce],fe=ue.G[0][ue.H[0]+ce];256<=fe.value?(he.g=fe.g+256,he.value=fe.value):(he.g=0,he.value=0,ce>>=mt(fe,8,he),ce>>=mt(ue.G[1][ue.H[1]+ce],16,he),ce>>=mt(ue.G[2][ue.H[2]+ce],0,he),mt(ue.G[3][ue.H[3]+ce],24,he))}}}$.vc=tt,$.Wb=et,$.Ya=pt,$.yc=ct,z=1;break e}z=0}if(!(u=z)){s.a=3;break t}if(0<v){if(g.ua=1<<v,!M(g.Wa,v)){s.a=1,u=0;break t}}else g.ua=0;var pe=s,Ae=f,de=A,ge=pe.s,ye=ge.xc;if(pe.c=Ae,pe.i=de,ge.md=U(Ae,ye),ge.wc=0==ye?-1:(1<<ye)-1,n){s.xb=Ai;break t}if(null==(y=o(f*A))){s.a=1,u=0;break t}u=(u=Ct(s,y,0,f,A,A,null))&&!d.h;break t}return u?(null!=l?l[0]=y:(e(null==y),e(n)),s.$=0,n||St(g)):St(g),u}function Nt(t,r){var n=t.c*t.i,i=n+r+16*r;return e(t.c<=r),t.V=o(i),null==t.V?(t.Ta=null,t.Ua=0,t.a=1,0):(t.Ta=t.V,t.Ua=t.Ba+n+r,1)}function Lt(t,r){var n=t.C,i=r-n,o=t.V,a=t.Ba+t.c*n;for(e(r<=t.l.o);0<i;){var s=16<i?16:i,l=t.l.ma,u=t.l.width,c=u*s,h=l.ca,f=l.tb+u*n,p=t.Ta,A=t.Ua;_t(t,s,o,a),Cn(p,A,h,f,c),Et(l,n,n+s,h,f,u),i-=s,o+=s*t.c,n+=s}e(n==r),t.C=t.Ma=r}function It(){this.ub=this.yd=this.td=this.Rb=0}function Mt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ot(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Pt(){this.Yb=function(){var t=[];return function t(e,r,n){for(var i=n[r],o=0;o<i&&(e.push(n.length>r+1?[]:0),!(n.length<r+1));o++)t(e[o],r+1,n)}(t,0,[3,11]),t}()}function Ft(){this.jb=o(3),this.Wc=s([4,8],Pt),this.Xc=s([4,17],Pt)}function Ut(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Rt(){this.ld=this.La=this.dd=this.tc=0}function Dt(){this.Na=this.la=0}function jt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ht(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Qt(){this.uc=this.M=this.Nb=0,this.wa=Array(new Rt),this.Y=0,this.ya=Array(new Ht),this.aa=0,this.l=new qt}function zt(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Vt(){this.cb=this.a=0,this.sc="",this.m=new b,this.Od=new It,this.Kc=new Mt,this.ed=new Ut,this.Qa=new Ot,this.Ic=this.$c=this.Aa=0,this.D=new Qt,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,b),this.ia=0,this.pb=a(4,jt),this.Pa=new Ft,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new zt),this.Hd=0,this.rb=Array(new Dt),this.sb=0,this.wa=Array(new Rt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ht),this.L=this.aa=0,this.gd=s([4,2],Rt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Gt(t,e){return 0>t?0:t>e?e:t}function qt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Kt(){var t=new Vt;return null!=t&&(t.a=0,t.sc="OK",t.cb=0,t.Xb=0,ni||(ni=Jt)),t}function Yt(t,e,r){return 0==t.a&&(t.a=e,t.sc=r,t.cb=0),0}function Wt(t,e,r){return 3<=r&&157==t[e+0]&&1==t[e+1]&&42==t[e+2]}function Xt(t,r){if(null==t)return 0;if(t.a=0,t.sc="OK",null==r)return Yt(t,2,"null VP8Io passed to VP8GetHeaders()");var n=r.data,o=r.w,a=r.ha;if(4>a)return Yt(t,7,"Truncated header.");var s=n[o+0]|n[o+1]<<8|n[o+2]<<16,l=t.Od;if(l.Rb=!(1&s),l.td=s>>1&7,l.yd=s>>4&1,l.ub=s>>5,3<l.td)return Yt(t,3,"Incorrect keyframe parameters.");if(!l.yd)return Yt(t,4,"Frame not displayable.");o+=3,a-=3;var u=t.Kc;if(l.Rb){if(7>a)return Yt(t,7,"cannot parse picture header");if(!Wt(n,o,a))return Yt(t,3,"Bad code word");u.c=16383&(n[o+4]<<8|n[o+3]),u.Td=n[o+4]>>6,u.i=16383&(n[o+6]<<8|n[o+5]),u.Ud=n[o+6]>>6,o+=7,a-=7,t.za=u.c+15>>4,t.Ub=u.i+15>>4,r.width=u.c,r.height=u.i,r.Da=0,r.j=0,r.v=0,r.va=r.width,r.o=r.height,r.da=0,r.ib=r.width,r.hb=r.height,r.U=r.width,r.T=r.height,i((s=t.Pa).jb,0,255,s.jb.length),e(null!=(s=t.Qa)),s.Cb=0,s.Bb=0,s.Fb=1,i(s.Zb,0,0,s.Zb.length),i(s.Lb,0,0,s.Lb)}if(l.ub>a)return Yt(t,7,"bad partition length");A(s=t.m,n,o,l.ub),o+=l.ub,a-=l.ub,l.Rb&&(u.Ld=S(s),u.Kd=S(s)),u=t.Qa;var c,h=t.Pa;if(e(null!=s),e(null!=u),u.Cb=S(s),u.Cb){if(u.Bb=S(s),S(s)){for(u.Fb=S(s),c=0;4>c;++c)u.Zb[c]=S(s)?g(s,7):0;for(c=0;4>c;++c)u.Lb[c]=S(s)?g(s,6):0}if(u.Bb)for(c=0;3>c;++c)h.jb[c]=S(s)?d(s,8):255}else u.Bb=0;if(s.Ka)return Yt(t,3,"cannot parse segment header");if((u=t.ed).zd=S(s),u.Tb=d(s,6),u.wb=d(s,3),u.Pc=S(s),u.Pc&&S(s)){for(h=0;4>h;++h)S(s)&&(u.vd[h]=g(s,6));for(h=0;4>h;++h)S(s)&&(u.od[h]=g(s,6))}if(t.L=0==u.Tb?0:u.zd?1:2,s.Ka)return Yt(t,3,"cannot parse filter header");var f=a;if(a=c=o,o=c+f,u=f,t.Xb=(1<<d(t.m,2))-1,f<3*(h=t.Xb))n=7;else{for(c+=3*h,u-=3*h,f=0;f<h;++f){var p=n[a+0]|n[a+1]<<8|n[a+2]<<16;p>u&&(p=u),A(t.Jc[+f],n,c,p),c+=p,u-=p,a+=3}A(t.Jc[+h],n,c,u),n=c<o?0:5}if(0!=n)return Yt(t,n,"cannot parse partitions");for(n=d(c=t.m,7),a=S(c)?g(c,4):0,o=S(c)?g(c,4):0,u=S(c)?g(c,4):0,h=S(c)?g(c,4):0,c=S(c)?g(c,4):0,f=t.Qa,p=0;4>p;++p){if(f.Cb){var y=f.Zb[p];f.Fb||(y+=n)}else{if(0<p){t.pb[p]=t.pb[0];continue}y=n}var v=t.pb[p];v.Sc[0]=ei[Gt(y+a,127)],v.Sc[1]=ri[Gt(y+0,127)],v.Eb[0]=2*ei[Gt(y+o,127)],v.Eb[1]=101581*ri[Gt(y+u,127)]>>16,8>v.Eb[1]&&(v.Eb[1]=8),v.Qc[0]=ei[Gt(y+h,117)],v.Qc[1]=ri[Gt(y+c,127)],v.lc=y+c}if(!l.Rb)return Yt(t,4,"Not a key frame.");for(S(s),l=t.Pa,n=0;4>n;++n){for(a=0;8>a;++a)for(o=0;3>o;++o)for(u=0;11>u;++u)h=k(s,ui[n][a][o][u])?d(s,8):si[n][a][o][u],l.Wc[n][a].Yb[o][u]=h;for(a=0;17>a;++a)l.Xc[n][a]=l.Wc[n][ci[a]]}return t.kc=S(s),t.kc&&(t.Bd=d(s,8)),t.cb=1}function Jt(t,e,r,n,i,o,a){var s=e[i].Yb[r];for(r=0;16>i;++i){if(!k(t,s[r+0]))return i;for(;!k(t,s[r+1]);)if(s=e[++i].Yb[0],r=0,16==i)return 16;var l=e[i+1].Yb;if(k(t,s[r+2])){var u=t,c=0;if(k(u,(f=s)[(h=r)+3]))if(k(u,f[h+6])){for(s=0,h=2*(c=k(u,f[h+8]))+(f=k(u,f[h+9+c])),c=0,f=ii[h];f[s];++s)c+=c+k(u,f[s]);c+=3+(8<<h)}else k(u,f[h+7])?(c=7+2*k(u,165),c+=k(u,145)):c=5+k(u,159);else c=k(u,f[h+4])?3+k(u,f[h+5]):2;s=l[2]}else c=1,s=l[1];l=a+oi[i],0>(u=t).b&&C(u);var h,f=u.b,p=(h=u.Ca>>1)-(u.I>>f)>>31;--u.b,u.Ca+=p,u.Ca|=1,u.I-=(h+1&p)<<f,o[l]=((c^p)-p)*n[(0<i)+0]}return 16}function Zt(t){var e=t.rb[t.sb-1];e.la=0,e.Na=0,i(t.zc,0,0,t.zc.length),t.ja=0}function $t(t,r){if(null==t)return 0;if(null==r)return Yt(t,2,"NULL VP8Io parameter in VP8Decode().");if(!t.cb&&!Xt(t,r))return 0;if(e(t.cb),null==r.ac||r.ac(r)){r.ob&&(t.L=0);var s=Di[t.L];if(2==t.L?(t.yb=0,t.zb=0):(t.yb=r.v-s>>4,t.zb=r.j-s>>4,0>t.yb&&(t.yb=0),0>t.zb&&(t.zb=0)),t.Va=r.o+15+s>>4,t.Hb=r.va+15+s>>4,t.Hb>t.za&&(t.Hb=t.za),t.Va>t.Ub&&(t.Va=t.Ub),0<t.L){var l=t.ed;for(s=0;4>s;++s){var u;if(t.Qa.Cb){var c=t.Qa.Lb[s];t.Qa.Fb||(c+=l.Tb)}else c=l.Tb;for(u=0;1>=u;++u){var h=t.gd[s][u],f=c;if(l.Pc&&(f+=l.vd[0],u&&(f+=l.od[0])),0<(f=0>f?0:63<f?63:f)){var p=f;0<l.wb&&(p=4<l.wb?p>>2:p>>1)>9-l.wb&&(p=9-l.wb),1>p&&(p=1),h.dd=p,h.tc=2*f+p,h.ld=40<=f?2:15<=f?1:0}else h.tc=0;h.La=u}}}s=0}else Yt(t,6,"Frame setup failed"),s=t.a;if(s=0==s){if(s){t.$c=0,0<t.Aa||(t.Ic=Hi);t:{s=t.Ic,l=4*(p=t.za);var A=32*p,d=p+1,g=0<t.L?p*(0<t.Aa?2:1):0,y=(2==t.Aa?2:1)*p;if((h=l+832+(u=3*(16*s+Di[t.L])/2*A)+(c=null!=t.Fa&&0<t.Fa.length?t.Kc.c*t.Kc.i:0))!=h)s=0;else{if(h>t.Vb){if(t.Vb=0,t.Ec=o(h),t.Fc=0,null==t.Ec){s=Yt(t,1,"no memory during frame initialization.");break t}t.Vb=h}h=t.Ec,f=t.Fc,t.Ac=h,t.Bc=f,f+=l,t.Gd=a(A,zt),t.Hd=0,t.rb=a(d+1,Dt),t.sb=1,t.wa=g?a(g,Rt):null,t.Y=0,t.D.Nb=0,t.D.wa=t.wa,t.D.Y=t.Y,0<t.Aa&&(t.D.Y+=p),e(!0),t.oc=h,t.pc=f,f+=832,t.ya=a(y,Ht),t.aa=0,t.D.ya=t.ya,t.D.aa=t.aa,2==t.Aa&&(t.D.aa+=p),t.R=16*p,t.B=8*p,p=(A=Di[t.L])*t.R,A=A/2*t.B,t.sa=h,t.ta=f+p,t.qa=t.sa,t.ra=t.ta+16*s*t.R+A,t.Ha=t.qa,t.Ia=t.ra+8*s*t.B+A,t.$c=0,f+=u,t.mb=c?h:null,t.nb=c?f:null,e(f+c<=t.Fc+t.Vb),Zt(t),i(t.Ac,t.Bc,0,l),s=1}}if(s){if(r.ka=0,r.y=t.sa,r.O=t.ta,r.f=t.qa,r.N=t.ra,r.ea=t.Ha,r.Vd=t.Ia,r.fa=t.R,r.Rc=t.B,r.F=null,r.J=0,!Ln){for(s=-255;255>=s;++s)Sn[255+s]=0>s?-s:s;for(s=-1020;1020>=s;++s)kn[1020+s]=-128>s?-128:127<s?127:s;for(s=-112;112>=s;++s)Tn[112+s]=-16>s?-16:15<s?15:s;for(s=-255;510>=s;++s)Nn[255+s]=0>s?0:255<s?255:s;Ln=1}on=ue,an=oe,ln=ae,un=se,cn=le,sn=ie,hn=Ye,fn=We,pn=Ze,An=$e,dn=Xe,gn=Je,yn=tr,vn=er,mn=Qe,bn=ze,_n=Ve,wn=Ge,fi[0]=Ee,fi[1]=he,fi[2]=we,fi[3]=xe,fi[4]=Be,fi[5]=Se,fi[6]=Ce,fi[7]=ke,fi[8]=Ne,fi[9]=Te,hi[0]=ye,hi[1]=pe,hi[2]=Ae,hi[3]=de,hi[4]=ve,hi[5]=me,hi[6]=be,pi[0]=Oe,pi[1]=fe,pi[2]=Le,pi[3]=Ie,pi[4]=Fe,pi[5]=Pe,pi[6]=Ue,s=1}else s=0}s&&(s=function(t,r){for(t.M=0;t.M<t.Va;++t.M){var a,s=t.Jc[t.M&t.Xb],l=t.m,u=t;for(a=0;a<u.za;++a){var c=l,h=u,f=h.Ac,p=h.Bc+4*a,A=h.zc,d=h.ya[h.aa+a];if(h.Qa.Bb?d.$b=k(c,h.Pa.jb[0])?2+k(c,h.Pa.jb[2]):k(c,h.Pa.jb[1]):d.$b=0,h.kc&&(d.Ad=k(c,h.Bd)),d.Za=!k(c,145)+0,d.Za){var g=d.Ob,y=0;for(h=0;4>h;++h){var v,m=A[0+h];for(v=0;4>v;++v){m=li[f[p+v]][m];for(var b=ai[k(c,m[0])];0<b;)b=ai[2*b+k(c,m[b])];m=-b,f[p+v]=m}n(g,y,f,p,4),y+=4,A[0+h]=m}}else m=k(c,156)?k(c,128)?1:3:k(c,163)?2:0,d.Ob[0]=m,i(f,p,m,4),i(A,0,m,4);d.Dd=k(c,142)?k(c,114)?k(c,183)?1:3:2:0}if(u.m.Ka)return Yt(t,7,"Premature end-of-partition0 encountered.");for(;t.ja<t.za;++t.ja){if(u=s,c=(l=t).rb[l.sb-1],f=l.rb[l.sb+l.ja],a=l.ya[l.aa+l.ja],p=l.kc?a.Ad:0)c.la=f.la=0,a.Za||(c.Na=f.Na=0),a.Hc=0,a.Gc=0,a.ia=0;else{var _,w;if(c=f,f=u,p=l.Pa.Xc,A=l.ya[l.aa+l.ja],d=l.pb[A.$b],h=A.ad,g=0,y=l.rb[l.sb-1],m=v=0,i(h,g,0,384),A.Za)var x=0,E=p[3];else{b=o(16);var B=c.Na+y.Na;if(B=ni(f,p[1],B,d.Eb,0,b,0),c.Na=y.Na=(0<B)+0,1<B)on(b,0,h,g);else{var C=b[0]+3>>3;for(b=0;256>b;b+=16)h[g+b]=C}x=1,E=p[0]}var S=15&c.la,T=15&y.la;for(b=0;4>b;++b){var N=1&T;for(C=w=0;4>C;++C)S=S>>1|(N=(B=ni(f,E,B=N+(1&S),d.Sc,x,h,g))>x)<<7,w=w<<2|(3<B?3:1<B?2:0!=h[g+0]),g+=16;S>>=4,T=T>>1|N<<7,v=(v<<8|w)>>>0}for(E=S,x=T>>4,_=0;4>_;_+=2){for(w=0,S=c.la>>4+_,T=y.la>>4+_,b=0;2>b;++b){for(N=1&T,C=0;2>C;++C)B=N+(1&S),S=S>>1|(N=0<(B=ni(f,p[2],B,d.Qc,0,h,g)))<<3,w=w<<2|(3<B?3:1<B?2:0!=h[g+0]),g+=16;S>>=2,T=T>>1|N<<5}m|=w<<4*_,E|=S<<4<<_,x|=(240&T)<<_}c.la=E,y.la=x,A.Hc=v,A.Gc=m,A.ia=43690&m?0:d.ia,p=!(v|m)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[a.$b][a.Za],l.wa[l.Y+l.ja].La|=!p),u.Ka)return Yt(t,7,"Premature end-of-file encountered.")}if(Zt(t),l=r,u=1,a=(s=t).D,c=0<s.L&&s.M>=s.zb&&s.M<=s.Va,0==s.Aa)t:{if(a.M=s.M,a.uc=c,Mr(s,a),u=1,a=(w=s.D).Nb,c=(m=Di[s.L])*s.R,f=m/2*s.B,b=16*a*s.R,C=8*a*s.B,p=s.sa,A=s.ta-c+b,d=s.qa,h=s.ra-f+C,g=s.Ha,y=s.Ia-f+C,T=0==(S=w.M),v=S>=s.Va-1,2==s.Aa&&Mr(s,w),w.uc)for(N=(B=s).D.M,e(B.D.uc),w=B.yb;w<B.Hb;++w){x=w,E=N;var L=(I=(H=B).D).Nb;_=H.R;var I=I.wa[I.Y+x],M=H.sa,O=H.ta+16*L*_+16*x,P=I.dd,F=I.tc;if(0!=F)if(e(3<=F),1==H.L)0<x&&bn(M,O,_,F+4),I.La&&wn(M,O,_,F),0<E&&mn(M,O,_,F+4),I.La&&_n(M,O,_,F);else{var U=H.B,R=H.qa,D=H.ra+8*L*U+8*x,j=H.Ha,H=H.Ia+8*L*U+8*x;L=I.ld,0<x&&(fn(M,O,_,F+4,P,L),An(R,D,j,H,U,F+4,P,L)),I.La&&(gn(M,O,_,F,P,L),vn(R,D,j,H,U,F,P,L)),0<E&&(hn(M,O,_,F+4,P,L),pn(R,D,j,H,U,F+4,P,L)),I.La&&(dn(M,O,_,F,P,L),yn(R,D,j,H,U,F,P,L))}}if(s.ia&&alert("todo:DitherRow"),null!=l.put){if(w=16*S,S=16*(S+1),T?(l.y=s.sa,l.O=s.ta+b,l.f=s.qa,l.N=s.ra+C,l.ea=s.Ha,l.W=s.Ia+C):(w-=m,l.y=p,l.O=A,l.f=d,l.N=h,l.ea=g,l.W=y),v||(S-=m),S>l.o&&(S=l.o),l.F=null,l.J=null,null!=s.Fa&&0<s.Fa.length&&w<S&&(l.J=hr(s,l,w,S-w),l.F=s.mb,null==l.F&&0==l.F.length)){u=Yt(s,3,"Could not decode alpha data.");break t}w<l.j&&(m=l.j-w,w=l.j,e(!(1&m)),l.O+=s.R*m,l.N+=s.B*(m>>1),l.W+=s.B*(m>>1),null!=l.F&&(l.J+=l.width*m)),w<S&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=w-l.j,l.U=l.va-l.v,l.T=S-w,u=l.put(l))}a+1!=s.Ic||v||(n(s.sa,s.ta-c,p,A+16*s.R,c),n(s.qa,s.ra-f,d,h+8*s.B,f),n(s.Ha,s.Ia-f,g,y+8*s.B,f))}if(!u)return Yt(t,6,"Output aborted.")}return 1}(t,r)),null!=r.bc&&r.bc(r),s&=1}return s?(t.cb=0,s):0}function te(t,e,r,n,i){i=t[e+r+32*n]+(i>>3),t[e+r+32*n]=-256&i?0>i?0:255:i}function ee(t,e,r,n,i,o){te(t,e,0,r,n+i),te(t,e,1,r,n+o),te(t,e,2,r,n-o),te(t,e,3,r,n-i)}function re(t){return(20091*t>>16)+t}function ne(t,e,r,n){var i,a=0,s=o(16);for(i=0;4>i;++i){var l=t[e+0]+t[e+8],u=t[e+0]-t[e+8],c=(35468*t[e+4]>>16)-re(t[e+12]),h=re(t[e+4])+(35468*t[e+12]>>16);s[a+0]=l+h,s[a+1]=u+c,s[a+2]=u-c,s[a+3]=l-h,a+=4,e++}for(i=a=0;4>i;++i)l=(t=s[a+0]+4)+s[a+8],u=t-s[a+8],c=(35468*s[a+4]>>16)-re(s[a+12]),te(r,n,0,0,l+(h=re(s[a+4])+(35468*s[a+12]>>16))),te(r,n,1,0,u+c),te(r,n,2,0,u-c),te(r,n,3,0,l-h),a++,n+=32}function ie(t,e,r,n){var i=t[e+0]+4,o=35468*t[e+4]>>16,a=re(t[e+4]),s=35468*t[e+1]>>16;ee(r,n,0,i+a,t=re(t[e+1]),s),ee(r,n,1,i+o,t,s),ee(r,n,2,i-o,t,s),ee(r,n,3,i-a,t,s)}function oe(t,e,r,n,i){ne(t,e,r,n),i&&ne(t,e+16,r,n+4)}function ae(t,e,r,n){an(t,e+0,r,n,1),an(t,e+32,r,n+128,1)}function se(t,e,r,n){var i;for(t=t[e+0]+4,i=0;4>i;++i)for(e=0;4>e;++e)te(r,n,e,i,t)}function le(t,e,r,n){t[e+0]&&un(t,e+0,r,n),t[e+16]&&un(t,e+16,r,n+4),t[e+32]&&un(t,e+32,r,n+128),t[e+48]&&un(t,e+48,r,n+128+4)}function ue(t,e,r,n){var i,a=o(16);for(i=0;4>i;++i){var s=t[e+0+i]+t[e+12+i],l=t[e+4+i]+t[e+8+i],u=t[e+4+i]-t[e+8+i],c=t[e+0+i]-t[e+12+i];a[0+i]=s+l,a[8+i]=s-l,a[4+i]=c+u,a[12+i]=c-u}for(i=0;4>i;++i)s=(t=a[0+4*i]+3)+a[3+4*i],l=a[1+4*i]+a[2+4*i],u=a[1+4*i]-a[2+4*i],c=t-a[3+4*i],r[n+0]=s+l>>3,r[n+16]=c+u>>3,r[n+32]=s-l>>3,r[n+48]=c-u>>3,n+=64}function ce(t,e,r){var n,i=e-32,o=On,a=255-t[i-1];for(n=0;n<r;++n){var s,l=o,u=a+t[e-1];for(s=0;s<r;++s)t[e+s]=l[u+t[i+s]];e+=32}}function he(t,e){ce(t,e,4)}function fe(t,e){ce(t,e,8)}function pe(t,e){ce(t,e,16)}function Ae(t,e){var r;for(r=0;16>r;++r)n(t,e+32*r,t,e-32,16)}function de(t,e){var r;for(r=16;0<r;--r)i(t,e,t[e-1],16),e+=32}function ge(t,e,r){var n;for(n=0;16>n;++n)i(e,r+32*n,t,16)}function ye(t,e){var r,n=16;for(r=0;16>r;++r)n+=t[e-1+32*r]+t[e+r-32];ge(n>>5,t,e)}function ve(t,e){var r,n=8;for(r=0;16>r;++r)n+=t[e-1+32*r];ge(n>>4,t,e)}function me(t,e){var r,n=8;for(r=0;16>r;++r)n+=t[e+r-32];ge(n>>4,t,e)}function be(t,e){ge(128,t,e)}function _e(t,e,r){return t+2*e+r+2>>2}function we(t,e){var r,i=e-32;for(i=new Uint8Array([_e(t[i-1],t[i+0],t[i+1]),_e(t[i+0],t[i+1],t[i+2]),_e(t[i+1],t[i+2],t[i+3]),_e(t[i+2],t[i+3],t[i+4])]),r=0;4>r;++r)n(t,e+32*r,i,0,i.length)}function xe(t,e){var r=t[e-1],n=t[e-1+32],i=t[e-1+64],o=t[e-1+96];T(t,e+0,16843009*_e(t[e-1-32],r,n)),T(t,e+32,16843009*_e(r,n,i)),T(t,e+64,16843009*_e(n,i,o)),T(t,e+96,16843009*_e(i,o,o))}function Ee(t,e){var r,n=4;for(r=0;4>r;++r)n+=t[e+r-32]+t[e-1+32*r];for(n>>=3,r=0;4>r;++r)i(t,e+32*r,n,4)}function Be(t,e){var r=t[e-1+0],n=t[e-1+32],i=t[e-1+64],o=t[e-1-32],a=t[e+0-32],s=t[e+1-32],l=t[e+2-32],u=t[e+3-32];t[e+0+96]=_e(n,i,t[e-1+96]),t[e+1+96]=t[e+0+64]=_e(r,n,i),t[e+2+96]=t[e+1+64]=t[e+0+32]=_e(o,r,n),t[e+3+96]=t[e+2+64]=t[e+1+32]=t[e+0+0]=_e(a,o,r),t[e+3+64]=t[e+2+32]=t[e+1+0]=_e(s,a,o),t[e+3+32]=t[e+2+0]=_e(l,s,a),t[e+3+0]=_e(u,l,s)}function Ce(t,e){var r=t[e+1-32],n=t[e+2-32],i=t[e+3-32],o=t[e+4-32],a=t[e+5-32],s=t[e+6-32],l=t[e+7-32];t[e+0+0]=_e(t[e+0-32],r,n),t[e+1+0]=t[e+0+32]=_e(r,n,i),t[e+2+0]=t[e+1+32]=t[e+0+64]=_e(n,i,o),t[e+3+0]=t[e+2+32]=t[e+1+64]=t[e+0+96]=_e(i,o,a),t[e+3+32]=t[e+2+64]=t[e+1+96]=_e(o,a,s),t[e+3+64]=t[e+2+96]=_e(a,s,l),t[e+3+96]=_e(s,l,l)}function Se(t,e){var r=t[e-1+0],n=t[e-1+32],i=t[e-1+64],o=t[e-1-32],a=t[e+0-32],s=t[e+1-32],l=t[e+2-32],u=t[e+3-32];t[e+0+0]=t[e+1+64]=o+a+1>>1,t[e+1+0]=t[e+2+64]=a+s+1>>1,t[e+2+0]=t[e+3+64]=s+l+1>>1,t[e+3+0]=l+u+1>>1,t[e+0+96]=_e(i,n,r),t[e+0+64]=_e(n,r,o),t[e+0+32]=t[e+1+96]=_e(r,o,a),t[e+1+32]=t[e+2+96]=_e(o,a,s),t[e+2+32]=t[e+3+96]=_e(a,s,l),t[e+3+32]=_e(s,l,u)}function ke(t,e){var r=t[e+0-32],n=t[e+1-32],i=t[e+2-32],o=t[e+3-32],a=t[e+4-32],s=t[e+5-32],l=t[e+6-32],u=t[e+7-32];t[e+0+0]=r+n+1>>1,t[e+1+0]=t[e+0+64]=n+i+1>>1,t[e+2+0]=t[e+1+64]=i+o+1>>1,t[e+3+0]=t[e+2+64]=o+a+1>>1,t[e+0+32]=_e(r,n,i),t[e+1+32]=t[e+0+96]=_e(n,i,o),t[e+2+32]=t[e+1+96]=_e(i,o,a),t[e+3+32]=t[e+2+96]=_e(o,a,s),t[e+3+64]=_e(a,s,l),t[e+3+96]=_e(s,l,u)}function Te(t,e){var r=t[e-1+0],n=t[e-1+32],i=t[e-1+64],o=t[e-1+96];t[e+0+0]=r+n+1>>1,t[e+2+0]=t[e+0+32]=n+i+1>>1,t[e+2+32]=t[e+0+64]=i+o+1>>1,t[e+1+0]=_e(r,n,i),t[e+3+0]=t[e+1+32]=_e(n,i,o),t[e+3+32]=t[e+1+64]=_e(i,o,o),t[e+3+64]=t[e+2+64]=t[e+0+96]=t[e+1+96]=t[e+2+96]=t[e+3+96]=o}function Ne(t,e){var r=t[e-1+0],n=t[e-1+32],i=t[e-1+64],o=t[e-1+96],a=t[e-1-32],s=t[e+0-32],l=t[e+1-32],u=t[e+2-32];t[e+0+0]=t[e+2+32]=r+a+1>>1,t[e+0+32]=t[e+2+64]=n+r+1>>1,t[e+0+64]=t[e+2+96]=i+n+1>>1,t[e+0+96]=o+i+1>>1,t[e+3+0]=_e(s,l,u),t[e+2+0]=_e(a,s,l),t[e+1+0]=t[e+3+32]=_e(r,a,s),t[e+1+32]=t[e+3+64]=_e(n,r,a),t[e+1+64]=t[e+3+96]=_e(i,n,r),t[e+1+96]=_e(o,i,n)}function Le(t,e){var r;for(r=0;8>r;++r)n(t,e+32*r,t,e-32,8)}function Ie(t,e){var r;for(r=0;8>r;++r)i(t,e,t[e-1],8),e+=32}function Me(t,e,r){var n;for(n=0;8>n;++n)i(e,r+32*n,t,8)}function Oe(t,e){var r,n=8;for(r=0;8>r;++r)n+=t[e+r-32]+t[e-1+32*r];Me(n>>4,t,e)}function Pe(t,e){var r,n=4;for(r=0;8>r;++r)n+=t[e+r-32];Me(n>>3,t,e)}function Fe(t,e){var r,n=4;for(r=0;8>r;++r)n+=t[e-1+32*r];Me(n>>3,t,e)}function Ue(t,e){Me(128,t,e)}function Re(t,e,r){var n=t[e-r],i=t[e+0],o=3*(i-n)+In[1020+t[e-2*r]-t[e+r]],a=Mn[112+(o+4>>3)];t[e-r]=On[255+n+Mn[112+(o+3>>3)]],t[e+0]=On[255+i-a]}function De(t,e,r,n){var i=t[e+0],o=t[e+r];return Pn[255+t[e-2*r]-t[e-r]]>n||Pn[255+o-i]>n}function je(t,e,r,n){return 4*Pn[255+t[e-r]-t[e+0]]+Pn[255+t[e-2*r]-t[e+r]]<=n}function He(t,e,r,n,i){var o=t[e-3*r],a=t[e-2*r],s=t[e-r],l=t[e+0],u=t[e+r],c=t[e+2*r],h=t[e+3*r];return 4*Pn[255+s-l]+Pn[255+a-u]>n?0:Pn[255+t[e-4*r]-o]<=i&&Pn[255+o-a]<=i&&Pn[255+a-s]<=i&&Pn[255+h-c]<=i&&Pn[255+c-u]<=i&&Pn[255+u-l]<=i}function Qe(t,e,r,n){var i=2*n+1;for(n=0;16>n;++n)je(t,e+n,r,i)&&Re(t,e+n,r)}function ze(t,e,r,n){var i=2*n+1;for(n=0;16>n;++n)je(t,e+n*r,1,i)&&Re(t,e+n*r,1)}function Ve(t,e,r,n){var i;for(i=3;0<i;--i)Qe(t,e+=4*r,r,n)}function Ge(t,e,r,n){var i;for(i=3;0<i;--i)ze(t,e+=4,r,n)}function qe(t,e,r,n,i,o,a,s){for(o=2*o+1;0<i--;){if(He(t,e,r,o,a))if(De(t,e,r,s))Re(t,e,r);else{var l=t,u=e,c=r,h=l[u-2*c],f=l[u-c],p=l[u+0],A=l[u+c],d=l[u+2*c],g=27*(v=In[1020+3*(p-f)+In[1020+h-A]])+63>>7,y=18*v+63>>7,v=9*v+63>>7;l[u-3*c]=On[255+l[u-3*c]+v],l[u-2*c]=On[255+h+y],l[u-c]=On[255+f+g],l[u+0]=On[255+p-g],l[u+c]=On[255+A-y],l[u+2*c]=On[255+d-v]}e+=n}}function Ke(t,e,r,n,i,o,a,s){for(o=2*o+1;0<i--;){if(He(t,e,r,o,a))if(De(t,e,r,s))Re(t,e,r);else{var l=t,u=e,c=r,h=l[u-c],f=l[u+0],p=l[u+c],A=Mn[112+(4+(d=3*(f-h))>>3)],d=Mn[112+(d+3>>3)],g=A+1>>1;l[u-2*c]=On[255+l[u-2*c]+g],l[u-c]=On[255+h+d],l[u+0]=On[255+f-A],l[u+c]=On[255+p-g]}e+=n}}function Ye(t,e,r,n,i,o){qe(t,e,r,1,16,n,i,o)}function We(t,e,r,n,i,o){qe(t,e,1,r,16,n,i,o)}function Xe(t,e,r,n,i,o){var a;for(a=3;0<a;--a)Ke(t,e+=4*r,r,1,16,n,i,o)}function Je(t,e,r,n,i,o){var a;for(a=3;0<a;--a)Ke(t,e+=4,1,r,16,n,i,o)}function Ze(t,e,r,n,i,o,a,s){qe(t,e,i,1,8,o,a,s),qe(r,n,i,1,8,o,a,s)}function $e(t,e,r,n,i,o,a,s){qe(t,e,1,i,8,o,a,s),qe(r,n,1,i,8,o,a,s)}function tr(t,e,r,n,i,o,a,s){Ke(t,e+4*i,i,1,8,o,a,s),Ke(r,n+4*i,i,1,8,o,a,s)}function er(t,e,r,n,i,o,a,s){Ke(t,e+4,1,i,8,o,a,s),Ke(r,n+4,1,i,8,o,a,s)}function rr(){this.ba=new at,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new lt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function nr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ir(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function or(){this.ua=0,this.Wa=new P,this.vb=new P,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new p,this.yc=new h}function ar(){this.xb=this.a=0,this.l=new qt,this.ca=new at,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new _,this.Pb=0,this.wd=new _,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new or,this.ab=0,this.gc=a(4,ir),this.Oc=0}function sr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new qt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function lr(t,e,r,n,i,o,a){for(t=null==t?0:t[e+0],e=0;e<a;++e)i[o+e]=t+r[n+e]&255,t=i[o+e]}function ur(t,e,r,n,i,o,a){var s;if(null==t)lr(null,null,r,n,i,o,a);else for(s=0;s<a;++s)i[o+s]=t[e+s]+r[n+s]&255}function cr(t,e,r,n,i,o,a){if(null==t)lr(null,null,r,n,i,o,a);else{var s,l=t[e+0],u=l,c=l;for(s=0;s<a;++s)u=c+(l=t[e+s])-u,c=r[n+s]+(-256&u?0>u?0:255:u)&255,u=l,i[o+s]=c}}function hr(t,r,i,a){var s=r.width,l=r.o;if(e(null!=t&&null!=r),0>i||0>=a||i+a>l)return null;if(!t.Cc){if(null==t.ga){var u;if(t.ga=new sr,(u=null==t.ga)||(u=r.width*r.o,e(0==t.Gb.length),t.Gb=o(u),t.Uc=0,null==t.Gb?u=0:(t.mb=t.Gb,t.nb=t.Uc,t.rc=null,u=1),u=!u),!u){u=t.ga;var c=t.Fa,h=t.P,f=t.qc,p=t.mb,A=t.nb,d=h+1,g=f-1,v=u.l;if(e(null!=c&&null!=p&&null!=r),gi[0]=null,gi[1]=lr,gi[2]=ur,gi[3]=cr,u.ca=p,u.tb=A,u.c=r.width,u.i=r.height,e(0<u.c&&0<u.i),1>=f)r=0;else if(u.$a=c[h+0]>>0&3,u.Z=c[h+0]>>2&3,u.Lc=c[h+0]>>4&3,h=c[h+0]>>6&3,0>u.$a||1<u.$a||4<=u.Z||1<u.Lc||h)r=0;else if(v.put=pt,v.ac=ft,v.bc=At,v.ma=u,v.width=r.width,v.height=r.height,v.Da=r.Da,v.v=r.v,v.va=r.va,v.j=r.j,v.o=r.o,u.$a)t:{e(1==u.$a),r=kt();e:for(;;){if(null==r){r=0;break t}if(e(null!=u),u.mc=r,r.c=u.c,r.i=u.i,r.l=u.l,r.l.ma=u,r.l.width=u.c,r.l.height=u.i,r.a=0,y(r.m,c,d,g),!Tt(u.c,u.i,1,r,null))break e;if(1==r.ab&&3==r.gc[0].hc&&xt(r.s)?(u.ic=1,c=r.c*r.i,r.Ta=null,r.Ua=0,r.V=o(c),r.Ba=0,null==r.V?(r.a=1,r=0):r=1):(u.ic=0,r=Nt(r,u.c)),!r)break e;r=1;break t}u.mc=null,r=0}else r=g>=u.c*u.i;u=!r}if(u)return null;1!=t.ga.Lc?t.Ga=0:a=l-i}e(null!=t.ga),e(i+a<=l);t:{if(r=(c=t.ga).c,l=c.l.o,0==c.$a){if(d=t.rc,g=t.Vc,v=t.Fa,h=t.P+1+i*r,f=t.mb,p=t.nb+i*r,e(h<=t.P+t.qc),0!=c.Z)for(e(null!=gi[c.Z]),u=0;u<a;++u)gi[c.Z](d,g,v,h,f,p,r),d=f,g=p,p+=r,h+=r;else for(u=0;u<a;++u)n(f,p,v,h,r),d=f,g=p,p+=r,h+=r;t.rc=d,t.Vc=g}else{if(e(null!=c.mc),r=i+a,e(null!=(u=c.mc)),e(r<=u.i),u.C>=r)r=1;else if(c.ic||gr(),c.ic){c=u.V,d=u.Ba,g=u.c;var m=u.i,b=(v=1,h=u.$/g,f=u.$%g,p=u.m,A=u.s,u.$),_=g*m,w=g*r,E=A.wc,C=b<w?bt(A,f,h):null;e(b<=_),e(r<=m),e(xt(A));e:for(;;){for(;!p.h&&b<w;){if(f&E||(C=bt(A,f,h)),e(null!=C),B(p),256>(m=vt(C.G[0],C.H[0],p)))c[d+b]=m,++b,++f>=g&&(f=0,++h<=r&&!(h%16)&&Bt(u,h));else{if(!(280>m)){v=0;break e}m=gt(m-256,p);var S,k=vt(C.G[4],C.H[4],p);if(B(p),!(b>=(k=yt(g,k=gt(k,p)))&&_-b>=m)){v=0;break e}for(S=0;S<m;++S)c[d+b+S]=c[d+b+S-k];for(b+=m,f+=m;f>=g;)f-=g,++h<=r&&!(h%16)&&Bt(u,h);b<w&&f&E&&(C=bt(A,f,h))}e(p.h==x(p))}Bt(u,h>r?r:h);break e}!v||p.h&&b<_?(v=0,u.a=p.h?5:3):u.$=b,r=v}else r=Ct(u,u.V,u.Ba,u.c,u.i,r,Lt);if(!r){a=0;break t}}i+a>=l&&(t.Cc=1),a=1}if(!a)return null;if(t.Cc&&(null!=(a=t.ga)&&(a.mc=null),t.ga=null,0<t.Ga))return alert("todo:WebPDequantizeLevels"),null}return t.nb+i*s}function fr(t,e,r,n,i,o){for(;0<i--;){var a,s=t,l=e+(r?1:0),u=t,c=e+(r?0:3);for(a=0;a<n;++a){var h=u[c+4*a];255!=h&&(h*=32897,s[l+4*a+0]=s[l+4*a+0]*h>>23,s[l+4*a+1]=s[l+4*a+1]*h>>23,s[l+4*a+2]=s[l+4*a+2]*h>>23)}e+=o}}function pr(t,e,r,n,i){for(;0<n--;){var o;for(o=0;o<r;++o){var a=t[e+2*o+0],s=15&(u=t[e+2*o+1]),l=4369*s,u=(240&u|u>>4)*l>>16;t[e+2*o+0]=(240&a|a>>4)*l>>16&240|(15&a|a<<4)*l>>16>>4&15,t[e+2*o+1]=240&u|s}e+=i}}function Ar(t,e,r,n,i,o,a,s){var l,u,c=255;for(u=0;u<i;++u){for(l=0;l<n;++l){var h=t[e+l];o[a+4*l]=h,c&=h}e+=r,a+=s}return 255!=c}function dr(t,e,r,n,i){var o;for(o=0;o<i;++o)r[n+o]=t[e+o]>>8}function gr(){xn=fr,En=pr,Bn=Ar,Cn=dr}function yr(r,n,i){t[r]=function(t,r,o,a,s,l,u,c,h,f,p,A,d,g,y,v,m){var b,_=m-1>>1,w=s[l+0]|u[c+0]<<16,x=h[f+0]|p[A+0]<<16;e(null!=t);var E=3*w+x+131074>>2;for(n(t[r+0],255&E,E>>16,d,g),null!=o&&(E=3*x+w+131074>>2,n(o[a+0],255&E,E>>16,y,v)),b=1;b<=_;++b){var B=s[l+b]|u[c+b]<<16,C=h[f+b]|p[A+b]<<16,S=w+B+x+C+524296,k=S+2*(B+x)>>3;E=k+w>>1,w=(S=S+2*(w+C)>>3)+B>>1,n(t[r+2*b-1],255&E,E>>16,d,g+(2*b-1)*i),n(t[r+2*b-0],255&w,w>>16,d,g+(2*b-0)*i),null!=o&&(E=S+x>>1,w=k+C>>1,n(o[a+2*b-1],255&E,E>>16,y,v+(2*b-1)*i),n(o[a+2*b+0],255&w,w>>16,y,v+(2*b+0)*i)),w=B,x=C}1&m||(E=3*w+x+131074>>2,n(t[r+m-1],255&E,E>>16,d,g+(m-1)*i),null!=o&&(E=3*x+w+131074>>2,n(o[a+m-1],255&E,E>>16,y,v+(m-1)*i)))}}function vr(){yi[Fn]=vi,yi[Un]=bi,yi[Rn]=mi,yi[Dn]=_i,yi[jn]=wi,yi[Hn]=xi,yi[Qn]=Ei,yi[zn]=bi,yi[Vn]=_i,yi[Gn]=wi,yi[qn]=xi}function mr(t){return t&~Ni?0>t?0:255:t>>Ti}function br(t,e){return mr((19077*t>>8)+(26149*e>>8)-14234)}function _r(t,e,r){return mr((19077*t>>8)-(6419*e>>8)-(13320*r>>8)+8708)}function wr(t,e){return mr((19077*t>>8)+(33050*e>>8)-17685)}function xr(t,e,r,n,i){n[i+0]=br(t,r),n[i+1]=_r(t,e,r),n[i+2]=wr(t,e)}function Er(t,e,r,n,i){n[i+0]=wr(t,e),n[i+1]=_r(t,e,r),n[i+2]=br(t,r)}function Br(t,e,r,n,i){var o=_r(t,e,r);e=o<<3&224|wr(t,e)>>3,n[i+0]=248&br(t,r)|o>>5,n[i+1]=e}function Cr(t,e,r,n,i){var o=240&wr(t,e)|15;n[i+0]=240&br(t,r)|_r(t,e,r)>>4,n[i+1]=o}function Sr(t,e,r,n,i){n[i+0]=255,xr(t,e,r,n,i+1)}function kr(t,e,r,n,i){Er(t,e,r,n,i),n[i+3]=255}function Tr(t,e,r,n,i){xr(t,e,r,n,i),n[i+3]=255}function Gt(t,e){return 0>t?0:t>e?e:t}function Nr(e,r,n){t[e]=function(t,e,i,o,a,s,l,u,c){for(var h=u+(-2&c)*n;u!=h;)r(t[e+0],i[o+0],a[s+0],l,u),r(t[e+1],i[o+0],a[s+0],l,u+n),e+=2,++o,++s,u+=2*n;1&c&&r(t[e+0],i[o+0],a[s+0],l,u)}}function Lr(t,e,r){return 0==r?0==t?0==e?6:5:0==e?4:0:r}function Ir(t,e,r,n,i){switch(t>>>30){case 3:an(e,r,n,i,0);break;case 2:sn(e,r,n,i);break;case 1:un(e,r,n,i)}}function Mr(t,e){var r,o,a=e.M,s=e.Nb,l=t.oc,u=t.pc+40,c=t.oc,h=t.pc+584,f=t.oc,p=t.pc+600;for(r=0;16>r;++r)l[u+32*r-1]=129;for(r=0;8>r;++r)c[h+32*r-1]=129,f[p+32*r-1]=129;for(0<a?l[u-1-32]=c[h-1-32]=f[p-1-32]=129:(i(l,u-32-1,127,21),i(c,h-32-1,127,9),i(f,p-32-1,127,9)),o=0;o<t.za;++o){var A=e.ya[e.aa+o];if(0<o){for(r=-1;16>r;++r)n(l,u+32*r-4,l,u+32*r+12,4);for(r=-1;8>r;++r)n(c,h+32*r-4,c,h+32*r+4,4),n(f,p+32*r-4,f,p+32*r+4,4)}var d=t.Gd,g=t.Hd+o,y=A.ad,v=A.Hc;if(0<a&&(n(l,u-32,d[g].y,0,16),n(c,h-32,d[g].f,0,8),n(f,p-32,d[g].ea,0,8)),A.Za){var m=l,b=u-32+16;for(0<a&&(o>=t.za-1?i(m,b,d[g].y[15],4):n(m,b,d[g+1].y,0,4)),r=0;4>r;r++)m[b+128+r]=m[b+256+r]=m[b+384+r]=m[b+0+r];for(r=0;16>r;++r,v<<=2)m=l,b=u+Ri[r],fi[A.Ob[r]](m,b),Ir(v,y,16*+r,m,b)}else if(m=Lr(o,a,A.Ob[0]),hi[m](l,u),0!=v)for(r=0;16>r;++r,v<<=2)Ir(v,y,16*+r,l,u+Ri[r]);for(r=A.Gc,m=Lr(o,a,A.Dd),pi[m](c,h),pi[m](f,p),v=y,m=c,b=h,255&(A=r>>0)&&(170&A?ln(v,256,m,b):cn(v,256,m,b)),A=f,v=p,255&(r>>=8)&&(170&r?ln(y,320,A,v):cn(y,320,A,v)),a<t.Ub-1&&(n(d[g].y,0,l,u+480,16),n(d[g].f,0,c,h+224,8),n(d[g].ea,0,f,p+224,8)),r=8*s*t.B,d=t.sa,g=t.ta+16*o+16*s*t.R,y=t.qa,A=t.ra+8*o+r,v=t.Ha,m=t.Ia+8*o+r,r=0;16>r;++r)n(d,g+r*t.R,l,u+32*r,16);for(r=0;8>r;++r)n(y,A+r*t.B,c,h+32*r,8),n(v,m+r*t.B,f,p+32*r,8)}}function Or(t,n,i,o,a,s,l,u,c){var h=[0],f=[0],p=0,A=null!=c?c.kd:0,d=null!=c?c:new nr;if(null==t||12>i)return 7;d.data=t,d.w=n,d.ha=i,n=[n],i=[i],d.gb=[d.gb];t:{var g=n,v=i,m=d.gb;if(e(null!=t),e(null!=v),e(null!=m),m[0]=0,12<=v[0]&&!r(t,g[0],"RIFF")){if(r(t,g[0]+8,"WEBP")){m=3;break t}var b=I(t,g[0]+4);if(12>b||4294967286<b){m=3;break t}if(A&&b>v[0]-8){m=7;break t}m[0]=b,g[0]+=12,v[0]-=12}m=0}if(0!=m)return m;for(b=0<d.gb[0],i=i[0];;){t:{var w=t;v=n,m=i;var x=h,E=f,B=g=[0];if((k=p=[p])[0]=0,8>m[0])m=7;else{if(!r(w,v[0],"VP8X")){if(10!=I(w,v[0]+4)){m=3;break t}if(18>m[0]){m=7;break t}var C=I(w,v[0]+8),S=1+L(w,v[0]+12);if(2147483648<=S*(w=1+L(w,v[0]+15))){m=3;break t}null!=B&&(B[0]=C),null!=x&&(x[0]=S),null!=E&&(E[0]=w),v[0]+=18,m[0]-=18,k[0]=1}m=0}}if(p=p[0],g=g[0],0!=m)return m;if(v=!!(2&g),!b&&p)return 3;if(null!=s&&(s[0]=!!(16&g)),null!=l&&(l[0]=v),null!=u&&(u[0]=0),l=h[0],g=f[0],p&&v&&null==c){m=0;break}if(4>i){m=7;break}if(b&&p||!b&&!p&&!r(t,n[0],"ALPH")){i=[i],d.na=[d.na],d.P=[d.P],d.Sa=[d.Sa];t:{C=t,m=n,b=i;var k=d.gb;x=d.na,E=d.P,B=d.Sa,S=22,e(null!=C),e(null!=b),w=m[0];var T=b[0];for(e(null!=x),e(null!=B),x[0]=null,E[0]=null,B[0]=0;;){if(m[0]=w,b[0]=T,8>T){m=7;break t}var N=I(C,w+4);if(4294967286<N){m=3;break t}var M=8+N+1&-2;if(S+=M,0<k&&S>k){m=3;break t}if(!r(C,w,"VP8 ")||!r(C,w,"VP8L")){m=0;break t}if(T[0]<M){m=7;break t}r(C,w,"ALPH")||(x[0]=C,E[0]=w+8,B[0]=N),w+=M,T-=M}}if(i=i[0],d.na=d.na[0],d.P=d.P[0],d.Sa=d.Sa[0],0!=m)break}i=[i],d.Ja=[d.Ja],d.xa=[d.xa];t:if(k=t,m=n,b=i,x=d.gb[0],E=d.Ja,B=d.xa,C=m[0],w=!r(k,C,"VP8 "),S=!r(k,C,"VP8L"),e(null!=k),e(null!=b),e(null!=E),e(null!=B),8>b[0])m=7;else{if(w||S){if(k=I(k,C+4),12<=x&&k>x-12){m=3;break t}if(A&&k>b[0]-8){m=7;break t}E[0]=k,m[0]+=8,b[0]-=8,B[0]=S}else B[0]=5<=b[0]&&47==k[C+0]&&!(k[C+4]>>5),E[0]=b[0];m=0}if(i=i[0],d.Ja=d.Ja[0],d.xa=d.xa[0],n=n[0],0!=m)break;if(4294967286<d.Ja)return 3;if(null==u||v||(u[0]=d.xa?2:1),l=[l],g=[g],d.xa){if(5>i){m=7;break}u=l,A=g,v=s,null==t||5>i?t=0:5<=i&&47==t[n+0]&&!(t[n+4]>>5)?(b=[0],k=[0],x=[0],y(E=new _,t,n,i),dt(E,b,k,x)?(null!=u&&(u[0]=b[0]),null!=A&&(A[0]=k[0]),null!=v&&(v[0]=x[0]),t=1):t=0):t=0}else{if(10>i){m=7;break}u=g,null==t||10>i||!Wt(t,n+3,i-3)?t=0:(A=t[n+0]|t[n+1]<<8|t[n+2]<<16,v=16383&(t[n+7]<<8|t[n+6]),t=16383&(t[n+9]<<8|t[n+8]),1&A||3<(A>>1&7)||!(A>>4&1)||A>>5>=d.Ja||!v||!t?t=0:(l&&(l[0]=v),u&&(u[0]=t),t=1))}if(!t)return 3;if(l=l[0],g=g[0],p&&(h[0]!=l||f[0]!=g))return 3;null!=c&&(c[0]=d,c.offset=n-c.w,e(4294967286>n-c.w),e(c.offset==c.ha-i));break}return 0==m||7==m&&p&&null==c?(null!=s&&(s[0]|=null!=d.na&&0<d.na.length),null!=o&&(o[0]=l),null!=a&&(a[0]=g),0):m}function Pr(t,e,r){var n=e.width,i=e.height,o=0,a=0,s=n,l=i;if(e.Da=null!=t&&0<t.Da,e.Da&&(s=t.cd,l=t.bd,o=t.v,a=t.j,11>r||(o&=-2,a&=-2),0>o||0>a||0>=s||0>=l||o+s>n||a+l>i))return 0;if(e.v=o,e.j=a,e.va=o+s,e.o=a+l,e.U=s,e.T=l,e.da=null!=t&&0<t.da,e.da){if(!F(s,l,r=[t.ib],o=[t.hb]))return 0;e.ib=r[0],e.hb=o[0]}return e.ob=null!=t&&t.ob,e.Kb=null==t||!t.Sd,e.da&&(e.ob=e.ib<3*n/4&&e.hb<3*i/4,e.Kb=0),1}function Fr(t){if(null==t)return 2;if(11>t.S){var e=t.f.RGBA;e.fb+=(t.height-1)*e.A,e.A=-e.A}else e=t.f.kb,t=t.height,e.O+=(t-1)*e.fa,e.fa=-e.fa,e.N+=(t-1>>1)*e.Ab,e.Ab=-e.Ab,e.W+=(t-1>>1)*e.Db,e.Db=-e.Db,null!=e.F&&(e.J+=(t-1)*e.lb,e.lb=-e.lb);return 0}function Ur(t,e,r,n){if(null==n||0>=t||0>=e)return 2;if(null!=r){if(r.Da){var i=r.cd,a=r.bd,s=-2&r.v,l=-2&r.j;if(0>s||0>l||0>=i||0>=a||s+i>t||l+a>e)return 2;t=i,e=a}if(r.da){if(!F(t,e,i=[r.ib],a=[r.hb]))return 2;t=i[0],e=a[0]}}n.width=t,n.height=e;t:{var u=n.width,c=n.height;if(t=n.S,0>=u||0>=c||!(t>=Fn&&13>t))t=2;else{if(0>=n.Rd&&null==n.sd){s=a=i=e=0;var h=(l=u*Qi[t])*c;if(11>t||(a=(c+1)/2*(e=(u+1)/2),12==t&&(s=(i=u)*c)),null==(c=o(h+2*a+s))){t=1;break t}n.sd=c,11>t?((u=n.f.RGBA).eb=c,u.fb=0,u.A=l,u.size=h):((u=n.f.kb).y=c,u.O=0,u.fa=l,u.Fd=h,u.f=c,u.N=0+h,u.Ab=e,u.Cd=a,u.ea=c,u.W=0+h+a,u.Db=e,u.Ed=a,12==t&&(u.F=c,u.J=0+h+2*a),u.Tc=s,u.lb=i)}if(e=1,i=n.S,a=n.width,s=n.height,i>=Fn&&13>i)if(11>i)t=n.f.RGBA,e&=(l=Math.abs(t.A))*(s-1)+a<=t.size,e&=l>=a*Qi[i],e&=null!=t.eb;else{t=n.f.kb,l=(a+1)/2,h=(s+1)/2,u=Math.abs(t.fa),c=Math.abs(t.Ab);var f=Math.abs(t.Db),p=Math.abs(t.lb),A=p*(s-1)+a;e&=u*(s-1)+a<=t.Fd,e&=c*(h-1)+l<=t.Cd,e=(e&=f*(h-1)+l<=t.Ed)&u>=a&c>=l&f>=l,e&=null!=t.y,e&=null!=t.f,e&=null!=t.ea,12==i&&(e&=p>=a,e&=A<=t.Tc,e&=null!=t.F)}else e=0;t=e?0:2}}return 0!=t||null!=r&&r.fd&&(t=Fr(n)),t}var Rr=64,Dr=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],jr=24,Hr=32,Qr=8,zr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];D("Predictor0","PredictorAdd0"),t.Predictor0=function(){return 4278190080},t.Predictor1=function(t){return t},t.Predictor2=function(t,e,r){return e[r+0]},t.Predictor3=function(t,e,r){return e[r+1]},t.Predictor4=function(t,e,r){return e[r-1]},t.Predictor5=function(t,e,r){return H(H(t,e[r+1]),e[r+0])},t.Predictor6=function(t,e,r){return H(t,e[r-1])},t.Predictor7=function(t,e,r){return H(t,e[r+0])},t.Predictor8=function(t,e,r){return H(e[r-1],e[r+0])},t.Predictor9=function(t,e,r){return H(e[r+0],e[r+1])},t.Predictor10=function(t,e,r){return H(H(t,e[r-1]),H(e[r+0],e[r+1]))},t.Predictor11=function(t,e,r){var n=e[r+0];return 0>=V(n>>24&255,t>>24&255,(e=e[r-1])>>24&255)+V(n>>16&255,t>>16&255,e>>16&255)+V(n>>8&255,t>>8&255,e>>8&255)+V(255&n,255&t,255&e)?n:t},t.Predictor12=function(t,e,r){var n=e[r+0];return(Q((t>>24&255)+(n>>24&255)-((e=e[r-1])>>24&255))<<24|Q((t>>16&255)+(n>>16&255)-(e>>16&255))<<16|Q((t>>8&255)+(n>>8&255)-(e>>8&255))<<8|Q((255&t)+(255&n)-(255&e)))>>>0},t.Predictor13=function(t,e,r){var n=e[r-1];return(z((t=H(t,e[r+0]))>>24&255,n>>24&255)<<24|z(t>>16&255,n>>16&255)<<16|z(t>>8&255,n>>8&255)<<8|z(t>>0&255,n>>0&255))>>>0};var Vr=t.PredictorAdd0;t.PredictorAdd1=G,D("Predictor2","PredictorAdd2"),D("Predictor3","PredictorAdd3"),D("Predictor4","PredictorAdd4"),D("Predictor5","PredictorAdd5"),D("Predictor6","PredictorAdd6"),D("Predictor7","PredictorAdd7"),D("Predictor8","PredictorAdd8"),D("Predictor9","PredictorAdd9"),D("Predictor10","PredictorAdd10"),D("Predictor11","PredictorAdd11"),D("Predictor12","PredictorAdd12"),D("Predictor13","PredictorAdd13");var Gr=t.PredictorAdd2;W("ColorIndexInverseTransform","MapARGB","32b",(function(t){return t>>8&255}),(function(t){return t})),W("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(t){return t}),(function(t){return t>>8&255}));var qr,Kr=t.ColorIndexInverseTransform,Yr=t.MapARGB,Wr=t.VP8LColorIndexInverseTransformAlpha,Xr=t.MapAlpha,Jr=t.VP8LPredictorsAdd=[];Jr.length=16,(t.VP8LPredictors=[]).length=16,(t.VP8LPredictorsAdd_C=[]).length=16,(t.VP8LPredictors_C=[]).length=16;var Zr,$r,tn,en,rn,nn,on,an,sn,ln,un,cn,hn,fn,pn,An,dn,gn,yn,vn,mn,bn,_n,wn,xn,En,Bn,Cn,Sn=o(511),kn=o(2041),Tn=o(225),Nn=o(767),Ln=0,In=kn,Mn=Tn,On=Nn,Pn=Sn,Fn=0,Un=1,Rn=2,Dn=3,jn=4,Hn=5,Qn=6,zn=7,Vn=8,Gn=9,qn=10,Kn=[2,3,7],Yn=[3,3,11],Wn=[280,256,256,256,40],Xn=[0,1,1,1,0],Jn=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Zn=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],$n=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ti=8,ei=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ri=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ni=null,ii=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],oi=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ai=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],si=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],li=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ui=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ci=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],hi=[],fi=[],pi=[],Ai=1,di=2,gi=[],yi=[];yr("UpsampleRgbLinePair",xr,3),yr("UpsampleBgrLinePair",Er,3),yr("UpsampleRgbaLinePair",Tr,4),yr("UpsampleBgraLinePair",kr,4),yr("UpsampleArgbLinePair",Sr,4),yr("UpsampleRgba4444LinePair",Cr,2),yr("UpsampleRgb565LinePair",Br,2);var vi=t.UpsampleRgbLinePair,mi=t.UpsampleBgrLinePair,bi=t.UpsampleRgbaLinePair,_i=t.UpsampleBgraLinePair,wi=t.UpsampleArgbLinePair,xi=t.UpsampleRgba4444LinePair,Ei=t.UpsampleRgb565LinePair,Bi=16,Ci=1<<Bi-1,Si=-227,ki=482,Ti=6,Ni=(256<<Ti)-1,Li=0,Ii=o(256),Mi=o(256),Oi=o(256),Pi=o(256),Fi=o(ki-Si),Ui=o(ki-Si);Nr("YuvToRgbRow",xr,3),Nr("YuvToBgrRow",Er,3),Nr("YuvToRgbaRow",Tr,4),Nr("YuvToBgraRow",kr,4),Nr("YuvToArgbRow",Sr,4),Nr("YuvToRgba4444Row",Cr,2),Nr("YuvToRgb565Row",Br,2);var Ri=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Di=[0,2,8],ji=[8,7,6,4,4,2,2,2,1,1,1,1],Hi=1;this.WebPDecodeRGBA=function(t,r,n,i,o){var a=Un,s=new rr,l=new at;s.ba=l,l.S=a,l.width=[l.width],l.height=[l.height];var u=l.width,c=l.height,h=new st;if(null==h||null==t)var f=2;else e(null!=h),f=Or(t,r,n,h.width,h.height,h.Pd,h.Qd,h.format,null);if(0!=f?u=0:(null!=u&&(u[0]=h.width[0]),null!=c&&(c[0]=h.height[0]),u=1),u){l.width=l.width[0],l.height=l.height[0],null!=i&&(i[0]=l.width),null!=o&&(o[0]=l.height);t:{if(i=new qt,(o=new nr).data=t,o.w=r,o.ha=n,o.kd=1,r=[0],e(null!=o),(0==(t=Or(o.data,o.w,o.ha,null,null,null,r,null,o))||7==t)&&r[0]&&(t=4),0==(r=t)){if(e(null!=s),i.data=o.data,i.w=o.w+o.offset,i.ha=o.ha-o.offset,i.put=pt,i.ac=ft,i.bc=At,i.ma=s,o.xa){if(null==(t=kt())){s=1;break t}if(function(t,r){var n=[0],i=[0],o=[0];e:for(;;){if(null==t)return 0;if(null==r)return t.a=2,0;if(t.l=r,t.a=0,y(t.m,r.data,r.w,r.ha),!dt(t.m,n,i,o)){t.a=3;break e}if(t.xb=di,r.width=n[0],r.height=i[0],!Tt(n[0],i[0],1,t,null))break e;return 1}return e(0!=t.a),0}(t,i)){if(i=0==(r=Ur(i.width,i.height,s.Oa,s.ba))){e:{i=t;r:for(;;){if(null==i){i=0;break e}if(e(null!=i.s.yc),e(null!=i.s.Ya),e(0<i.s.Wb),e(null!=(n=i.l)),e(null!=(o=n.ma)),0!=i.xb){if(i.ca=o.ba,i.tb=o.tb,e(null!=i.ca),!Pr(o.Oa,n,Dn)){i.a=2;break r}if(!Nt(i,n.width))break r;if(n.da)break r;if((n.da||nt(i.ca.S))&&gr(),11>i.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=i.ca.f.kb.F&&gr()),i.Pb&&0<i.s.ua&&null==i.s.vb.X&&!M(i.s.vb,i.s.Wa.Xa)){i.a=1;break r}i.xb=0}if(!Ct(i,i.V,i.Ba,i.c,i.i,n.o,wt))break r;o.Dc=i.Ma,i=1;break e}e(0!=i.a),i=0}i=!i}i&&(r=t.a)}else r=t.a}else{if(null==(t=new Kt)){s=1;break t}if(t.Fa=o.na,t.P=o.P,t.qc=o.Sa,Xt(t,i)){if(0==(r=Ur(i.width,i.height,s.Oa,s.ba))){if(t.Aa=0,n=s.Oa,e(null!=(o=t)),null!=n){if(0<(u=0>(u=n.Md)?0:100<u?255:255*u/100)){for(c=h=0;4>c;++c)12>(f=o.pb[c]).lc&&(f.ia=u*ji[0>f.lc?0:f.lc]>>3),h|=f.ia;h&&(alert("todo:VP8InitRandom"),o.ia=1)}o.Ga=n.Id,100<o.Ga?o.Ga=100:0>o.Ga&&(o.Ga=0)}$t(t,i)||(r=t.a)}}else r=t.a}0==r&&null!=s.Oa&&s.Oa.fd&&(r=Fr(s.ba))}s=r}a=0!=s?null:11>a?l.f.RGBA.eb:l.f.kb.y}else a=null;return a};var Qi=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(t,e){for(var r="",n=0;n<4;n++)r+=String.fromCharCode(t[e++]);return r}function c(t,e){return(t[e+0]<<0|t[e+1]<<8|t[e+2]<<16)>>>0}function h(t,e){return(t[e+0]<<0|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}new l;var f=[0],p=[0],A=[],d=new l,g=t,y=function(t,e){var r={},n=0,i=!1,o=0,a=0;if(r.frames=[],!function(t,e,r,n){for(var i=0;i<4;i++)if(t[e+i]!="RIFF".charCodeAt(i))return!0;return!1}(t,e)){var s,l;for(h(t,e+=4),e+=8;e<t.length;){var f=u(t,e),p=h(t,e+=4);e+=4;var A=p+(1&p);switch(f){case"VP8 ":case"VP8L":void 0===r.frames[n]&&(r.frames[n]={}),(y=r.frames[n]).src_off=i?a:e-8,y.src_size=o+p+8,n++,i&&(i=!1,o=0,a=0);break;case"VP8X":(y=r.header={}).feature_flags=t[e];var d=e+4;y.canvas_width=1+c(t,d),d+=3,y.canvas_height=1+c(t,d),d+=3;break;case"ALPH":i=!0,o=A+8,a=e-8;break;case"ANIM":(y=r.header).bgcolor=h(t,e),d=e+4,y.loop_count=(s=t)[(l=d)+0]<<0|s[l+1]<<8,d+=2;break;case"ANMF":var g,y;(y=r.frames[n]={}).offset_x=2*c(t,e),e+=3,y.offset_y=2*c(t,e),e+=3,y.width=1+c(t,e),e+=3,y.height=1+c(t,e),e+=3,y.duration=c(t,e),e+=3,g=t[e++],y.dispose=1&g,y.blend=g>>1&1}"ANMF"!=f&&(e+=A)}return r}}(g,0);y.response=g,y.rgbaoutput=!0,y.dataurl=!1;var v=y.header?y.header:null,m=y.frames?y.frames:null;if(v){v.loop_counter=v.loop_count,f=[v.canvas_height],p=[v.canvas_width];for(var b=0;b<m.length&&0!=m[b].blend;b++);}var _=m[0],w=d.WebPDecodeRGBA(g,_.src_off,_.src_size,p,f);_.rgba=w,_.imgwidth=p[0],_.imgheight=f[0];for(var x=0;x<p[0]*f[0]*4;x++)A[x]=w[x];return this.width=p,this.height=f,this.data=A,this}!function(t){var e=function(e,n,l,u){var c=4,h=o;switch(u){case t.image_compression.FAST:c=1,h=i;break;case t.image_compression.MEDIUM:c=6,h=a;break;case t.image_compression.SLOW:c=9,h=s}var f=W(e=r(e,n,l,h),{level:c});return t.__addimage__.arrayBufferToBinaryString(f)},r=function(t,e,r,n){for(var i,o,a,s=t.length/e,l=new Uint8Array(t.length+s),h=u(),f=0;f<s;f+=1){if(a=f*e,i=t.subarray(a,a+e),n)l.set(n(i,r,o),a+f);else{for(var p,A=h.length,d=[];p<A;p+=1)d[p]=h[p](i,r,o);var g=c(d.concat());l.set(d[g],a+f)}o=i}return l},n=function(t){var e=Array.apply([],t);return e.unshift(0),e},i=function(t,e){var r,n=[],i=t.length;n[0]=1;for(var o=0;o<i;o+=1)r=t[o-e]||0,n[o+1]=t[o]-r+256&255;return n},o=function(t,e,r){var n,i=[],o=t.length;i[0]=2;for(var a=0;a<o;a+=1)n=r&&r[a]||0,i[a+1]=t[a]-n+256&255;return i},a=function(t,e,r){var n,i,o=[],a=t.length;o[0]=3;for(var s=0;s<a;s+=1)n=t[s-e]||0,i=r&&r[s]||0,o[s+1]=t[s]+256-(n+i>>>1)&255;return o},s=function(t,e,r){var n,i,o,a,s=[],u=t.length;s[0]=4;for(var c=0;c<u;c+=1)n=t[c-e]||0,i=r&&r[c]||0,o=r&&r[c-e]||0,a=l(n,i,o),s[c+1]=t[c]-a+256&255;return s},l=function(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),i=Math.abs(t-r),o=Math.abs(t+e-r-r);return n<=i&&n<=o?t:i<=o?e:r},u=function(){return[n,i,o,a,s]},c=function(t){var e=t.map((function(t){return t.reduce((function(t,e){return t+Math.abs(e)}),0)}));return e.indexOf(Math.min.apply(null,e))};t.processPNG=function(r,n,i,o){var a,s,l,u,c,h,f,p,A,d,g,y,v,m,b,_=this.decode.FLATE_DECODE,w="";if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){if(r=(l=new ze(r)).imgData,s=l.bits,a=l.colorSpace,c=l.colors,-1!==[4,6].indexOf(l.colorType)){if(8===l.bits){A=(p=32==l.pixelBitlength?new Uint32Array(l.decodePixels().buffer):16==l.pixelBitlength?new Uint16Array(l.decodePixels().buffer):new Uint8Array(l.decodePixels().buffer)).length,g=new Uint8Array(A*l.colors),d=new Uint8Array(A);var x,E=l.pixelBitlength-l.bits;for(m=0,b=0;m<A;m++){for(v=p[m],x=0;x<E;)g[b++]=v>>>x&255,x+=l.bits;d[m]=v>>>x&255}}if(16===l.bits){A=(p=new Uint32Array(l.decodePixels().buffer)).length,g=new Uint8Array(A*(32/l.pixelBitlength)*l.colors),d=new Uint8Array(A*(32/l.pixelBitlength)),y=l.colors>1,m=0,b=0;for(var B=0;m<A;)v=p[m++],g[b++]=v>>>0&255,y&&(g[b++]=v>>>16&255,v=p[m++],g[b++]=v>>>0&255),d[B++]=v>>>16&255;s=8}o!==t.image_compression.NONE?(r=e(g,l.width*l.colors,l.colors,o),f=e(d,l.width,1,o)):(r=g,f=d,_=void 0)}if(3===l.colorType&&(a=this.color_spaces.INDEXED,h=l.palette,l.transparency.indexed)){var C=l.transparency.indexed,S=0;for(m=0,A=C.length;m<A;++m)S+=C[m];if((S/=255)===A-1&&-1!==C.indexOf(0))u=[C.indexOf(0)];else if(S!==A){for(p=l.decodePixels(),d=new Uint8Array(p.length),m=0,A=p.length;m<A;m++)d[m]=C[p[m]];f=e(d,l.width,1)}}var k=function(e){var r;switch(e){case t.image_compression.FAST:r=11;break;case t.image_compression.MEDIUM:r=13;break;case t.image_compression.SLOW:r=14;break;default:r=12}return r}(o);return _===this.decode.FLATE_DECODE&&(w="/Predictor "+k+" "),w+="/Colors "+c+" /BitsPerComponent "+s+" /Columns "+l.width,(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:i,data:r,index:n,filter:_,decodeParameters:w,transparency:u,palette:h,sMask:f,predictor:k,width:l.width,height:l.height,bitsPerComponent:s,colorSpace:a}}}}(Nt.API),function(t){t.processGIF89A=function(e,r,n,i){var o=new Ve(e),a=o.width,s=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:a,height:s},c=new qe(100).encode(u,100);return t.processJPEG.call(this,c,r,n,i)},t.processGIF87A=t.processGIF89A}(Nt.API),Ke.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:r,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ke.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(t){$.log("bit decode error:"+t)}},Ke.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var l=this.palette[o>>7-s&1];this.data[a+4*s]=l.blue,this.data[a+4*s+1]=l.green,this.data[a+4*s+2]=l.red,this.data[a+4*s+3]=255}0!==r&&(this.pos+=4-r)}},Ke.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<t;i++){var o=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*i*4,s=o>>4,l=15&o,u=this.palette[s];if(this.data[a]=u.blue,this.data[a+1]=u.green,this.data[a+2]=u.red,this.data[a+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[a+4]=u.blue,this.data[a+4+1]=u.green,this.data[a+4+2]=u.red,this.data[a+4+3]=255}0!==e&&(this.pos+=4-e)}},Ke.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+4*n;if(i<this.palette.length){var a=this.palette[i];this.data[o]=a.red,this.data[o+1]=a.green,this.data[o+2]=a.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}0!==t&&(this.pos+=4-t)}},Ke.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,s=(o>>5&e)/e*255|0,l=(o>>10&e)/e*255|0,u=o>>15?255:0,c=n*this.width*4+4*i;this.data[c]=l,this.data[c+1]=s,this.data[c+2]=a,this.data[c+3]=u}this.pos+=t}},Ke.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&e)/e*255|0,l=(a>>5&r)/r*255|0,u=(a>>11)/e*255|0,c=i*this.width*4+4*o;this.data[c]=u,this.data[c+1]=l,this.data[c+2]=s,this.data[c+3]=255}this.pos+=t}},Ke.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*r;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},Ke.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*r;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=n,this.data[s+3]=a}},Ke.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,i){var o=new Ke(e,!1),a=o.width,s=o.height,l={data:o.getData(),width:a,height:s},u=new qe(100).encode(l,100);return t.processJPEG.call(this,u,r,n,i)}}(Nt.API),Ye.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,i){var o=new Ye(e,!1),a=o.width,s=o.height,l={data:o.getData(),width:a,height:s},u=new qe(100).encode(l,100);return t.processJPEG.call(this,u,r,n,i)}}(Nt.API),Nt.API.processRGBA=function(t,e,r){for(var n=t.data,i=n.length,o=new Uint8Array(i/4*3),a=new Uint8Array(i/4),s=0,l=0,u=0;u<i;u+=4){var c=n[u],h=n[u+1],f=n[u+2],p=n[u+3];o[s++]=c,o[s++]=h,o[s++]=f,a[l++]=p}var A=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:A,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Nt.API.setLanguage=function(t){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]&&(this.internal.languageSettings.languageCode=t,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},Re=Nt.API,De=Re.getCharWidthsArray=function(t,e){var r,i,o=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:o.metadata.Unicode.widths,u=l.fof?l.fof:1,c=e.kerning?e.kerning:o.metadata.Unicode.kerning,h=c.fof?c.fof:1,f=!1!==e.doKerning,p=0,A=t.length,d=0,g=l[0]||u,y=[];for(r=0;r<A;r++)i=t.charCodeAt(r),"function"==typeof o.metadata.widthOfString?y.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(i))+s*(1e3/a)||0)/1e3):(p=f&&"object"===(0,n.Z)(c[i])&&!isNaN(parseInt(c[i][d],10))?c[i][d]/h:0,y.push((l[i]||g)/u+p)),d=i;return y},je=Re.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Re.processArabic&&(t=Re.processArabic(t)),"function"==typeof n.metadata.widthOfString?n.metadata.widthOfString(t,r,i)/r:De.apply(this,arguments).reduce((function(t,e){return t+e}),0)},He=function(t,e,r,n){for(var i=[],o=0,a=t.length,s=0;o!==a&&s+e[o]<r;)s+=e[o],o++;i.push(t.slice(0,o));var l=o;for(s=0;o!==a;)s+e[o]>n&&(i.push(t.slice(l,o)),s=0,l=o),s+=e[o],o++;return l!==o&&i.push(t.slice(l,o)),i},Qe=function(t,e,r){r||(r={});var n,i,o,a,s,l,u,c=[],h=[c],f=r.textIndent||0,p=0,A=0,d=t.split(" "),g=De.apply(this,[" ",r])[0];if(l=-1===r.lineIndent?d[0].length+2:r.lineIndent||0){var y=Array(l).join(" "),v=[];d.map((function(t){(t=t.split(/\s*\n/)).length>1?v=v.concat(t.map((function(t,e){return(e&&t.length?"\n":"")+t}))):v.push(t[0])})),d=v,l=je.apply(this,[y,r])}for(o=0,a=d.length;o<a;o++){var m=0;if(n=d[o],l&&"\n"==n[0]&&(n=n.substr(1),m=1),f+p+(A=(i=De.apply(this,[n,r])).reduce((function(t,e){return t+e}),0))>e||m){if(A>e){for(s=He.apply(this,[n,i,e-(f+p),e]),c.push(s.shift()),c=[s.pop()];s.length;)h.push([s.shift()]);A=i.slice(n.length-(c[0]?c[0].length:0)).reduce((function(t,e){return t+e}),0)}else c=[n];h.push(c),f=A+l,p=g}else c.push(n),f+=p+A,p=g}return u=l?function(t,e){return(e?y:"")+t.join(" ")}:function(t){return t.join(" ")},h.map(u)},Re.splitTextToSize=function(t,e,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),o=function(t){if(t.widths&&t.kerning)return{widths:t.widths,kerning:t.kerning};var e=this.internal.getFont(t.fontName,t.fontStyle);return e.metadata.Unicode?{widths:e.metadata.Unicode.widths||{0:1},kerning:e.metadata.Unicode.kerning||{}}:{font:e.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;o.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=r.lineIndent;var s,l,u=[];for(s=0,l=n.length;s<l;s++)u=u.concat(Qe.apply(this,[n[s],a,o]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},i={},o=0;o<e.length;o++)r[e[o]]="0123456789abcdef"[o],i["0123456789abcdef"[o]]=e[o];var a=function(t){return"0x"+parseInt(t,10).toString(16)},s=t.__fontmetrics__.compress=function(t){var e,r,o,l,u=["{"];for(var c in t){if(e=t[c],isNaN(parseInt(c,10))?r="'"+c+"'":(c=parseInt(c,10),r=(r=a(c).slice(2)).slice(0,-1)+i[r.slice(-1)]),"number"==typeof e)e<0?(o=a(e).slice(3),l="-"):(o=a(e).slice(2),l=""),o=l+o.slice(0,-1)+i[o.slice(-1)];else{if("object"!==(0,n.Z)(e))throw new Error("Don't know what to do with value type "+(0,n.Z)(e)+".");o=s(e)}u.push(r+o)}return u.push("}"),u.join("")},l=t.__fontmetrics__.uncompress=function(t){if("string"!=typeof t)throw new Error("Invalid argument passed to uncompress.");for(var e,n,i,o,a={},s=1,l=a,u=[],c="",h="",f=t.length-1,p=1;p<f;p+=1)"'"==(o=t[p])?e?(i=e.join(""),e=void 0):e=[]:e?e.push(o):"{"==o?(u.push([l,i]),l={},i=void 0):"}"==o?((n=u.pop())[0][n[1]]=l,i=void 0,l=n[0]):"-"==o?s=-1:void 0===i?r.hasOwnProperty(o)?(c+=r[o],i=parseInt(c,16)*s,s=1,c=""):c+=o:r.hasOwnProperty(o)?(h+=r[o],l[i]=parseInt(h,16)*s,s=1,i=void 0,h=""):h+=o;return a},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},h={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(t){var e=t.font,r=h.Unicode[e.postScriptName];r&&(e.metadata.Unicode={},e.metadata.Unicode.widths=r.widths,e.metadata.Unicode.kerning=r.kerning);var n=c.Unicode[e.postScriptName];n&&(e.metadata.Unicode.encoding=n,e.encoding=n.codePages[0])}])}(Nt.API),function(t){var e=function(t){for(var e=t.length,r=new Uint8Array(e),n=0;n<e;n++)r[n]=t.charCodeAt(n);return r};t.API.events.push(["addFont",function(r){var n=void 0,i=r.font,o=r.instance;if(!i.isStandardFont){if(void 0===o)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if("string"!=typeof(n=!1===o.existsFileInVFS(i.postScriptName)?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");!function(r,n){n=/^\x00\x01\x00\x00/.test(n)?e(n):e(nt(n)),r.metadata=t.API.TTFFont.open(n),r.metadata.Unicode=r.metadata.Unicode||{encoding:{},kerning:{},widths:[]},r.metadata.glyIdsUsed=[0]}(i,n)}}])}(Nt),function(t){function e(){return(J.canvg?Promise.resolve(J.canvg):r.e(825).then(r.bind(r,7825))).catch((function(t){return Promise.reject(new Error("Could not load canvg: "+t))})).then((function(t){return t.default?t.default:t}))}Nt.API.addSvgAsImage=function(t,r,n,i,o,a,s,l){if(isNaN(r)||isNaN(n))throw $.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw $.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=o;var c=u.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,u.width,u.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return e().then((function(e){return e.fromString(c,t,h)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(t){return t.render(h)})).then((function(){f.addImage(u.toDataURL("image/jpeg",1),r,n,i,o,s,l)}))}}(),Nt.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,r);return this},Nt.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var i,o,a,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(s),u=[],c=0,h=0,f=0;function p(t,e){var r,n=!1;for(r=0;r<t.length;r+=1)t[r]===e&&(n=!0);return n}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,"reset"===t||!0===e){var A=l.length;for(f=0;f<A;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if("object"===(0,n.Z)(t))for(o in t)if(a=t[o],p(l,o)&&void 0!==a){if("boolean"===r[o].type&&"boolean"==typeof a)r[o].value=a;else if("name"===r[o].type&&p(r[o].valueSet,a))r[o].value=a;else if("integer"===r[o].type&&Number.isInteger(a))r[o].value=a;else if("array"===r[o].type){for(c=0;c<a.length;c+=1)if(i=!0,1===a[c].length&&"number"==typeof a[c][0])u.push(String(a[c]-1));else if(a[c].length>1){for(h=0;h<a[c].length;h+=1)"number"!=typeof a[c][h]&&(i=!1);!0===i&&u.push([a[c][0]-1,a[c][1]-1].join(" "))}r[o].value="["+u.join(" ")+"]"}else r[o].value=r[o].defaultValue;r[o].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var t,e=[];for(t in r)!0===r[t].explicitSet&&("name"===r[t].type?e.push("/"+t+" /"+r[t].value):e.push("/"+t+" "+r[t].value));0!==e.length&&this.internal.write("/ViewerPreferences\n<<\n"+e.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var t='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',e=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),r=unescape(encodeURIComponent(t)),n=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),i=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),o=unescape(encodeURIComponent("</x:xmpmeta>")),a=r.length+n.length+i.length+e.length+o.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+a+" >>"),this.internal.write("stream"),this.internal.write(e+r+n+i+o),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(t,n){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:t,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(Nt.API),function(t){var e=t.API,r=e.pdfEscape16=function(t,e){for(var r,n=e.metadata.Unicode.widths,i=["","0","00","000","0000"],o=[""],a=0,s=t.length;a<s;++a){if(r=e.metadata.characterToGlyph(t.charCodeAt(a)),e.metadata.glyIdsUsed.push(r),e.metadata.toUnicode[r]=t.charCodeAt(a),-1==n.indexOf(r)&&(n.push(r),n.push([parseInt(e.metadata.widthOfGlyph(r),10)])),"0"==r)return o.join("");r=r.toString(16),o.push(i[4-r.length],r)}return o.join("")},n=function(t){var e,r,n,i,o,a,s;for(o="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",n=[],a=0,s=(r=Object.keys(t).sort((function(t,e){return t-e}))).length;a<s;a++)e=r[a],n.length>=100&&(o+="\n"+n.length+" beginbfchar\n"+n.join("\n")+"\nendbfchar",n=[]),void 0!==t[e]&&null!==t[e]&&"function"==typeof t[e].toString&&(i=("0000"+t[e].toString(16)).slice(-4),e=("0000"+(+e).toString(16)).slice(-4),n.push("<"+e+"><"+i+">"));return n.length&&(o+="\n"+n.length+" beginbfchar\n"+n.join("\n")+"\nendbfchar\n"),o+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};e.events.push(["putFont",function(e){!function(e){var r=e.font,i=e.out,o=e.newObject,a=e.putStream;if(r.metadata instanceof t.API.TTFFont&&"Identity-H"===r.encoding){for(var s=r.metadata.Unicode.widths,l=r.metadata.subset.encode(r.metadata.glyIdsUsed,1),u="",c=0;c<l.length;c++)u+=String.fromCharCode(l[c]);var h=o();a({data:u,addLength1:!0,objectId:h}),i("endobj");var f=o();a({data:n(r.metadata.toUnicode),addLength1:!0,objectId:f}),i("endobj");var p=o();i("<<"),i("/Type /FontDescriptor"),i("/FontName /"+Et(r.fontName)),i("/FontFile2 "+h+" 0 R"),i("/FontBBox "+t.API.PDFObject.convert(r.metadata.bbox)),i("/Flags "+r.metadata.flags),i("/StemV "+r.metadata.stemV),i("/ItalicAngle "+r.metadata.italicAngle),i("/Ascent "+r.metadata.ascender),i("/Descent "+r.metadata.decender),i("/CapHeight "+r.metadata.capHeight),i(">>"),i("endobj");var A=o();i("<<"),i("/Type /Font"),i("/BaseFont /"+Et(r.fontName)),i("/FontDescriptor "+p+" 0 R"),i("/W "+t.API.PDFObject.convert(s)),i("/CIDToGIDMap /Identity"),i("/DW 1000"),i("/Subtype /CIDFontType2"),i("/CIDSystemInfo"),i("<<"),i("/Supplement 0"),i("/Registry (Adobe)"),i("/Ordering ("+r.encoding+")"),i(">>"),i(">>"),i("endobj"),r.objectNumber=o(),i("<<"),i("/Type /Font"),i("/Subtype /Type0"),i("/ToUnicode "+f+" 0 R"),i("/BaseFont /"+Et(r.fontName)),i("/Encoding /"+r.encoding),i("/DescendantFonts ["+A+" 0 R]"),i(">>"),i("endobj"),r.isAlreadyPutted=!0}}(e)}]),e.events.push(["putFont",function(e){!function(e){var r=e.font,i=e.out,o=e.newObject,a=e.putStream;if(r.metadata instanceof t.API.TTFFont&&"WinAnsiEncoding"===r.encoding){for(var s=r.metadata.rawData,l="",u=0;u<s.length;u++)l+=String.fromCharCode(s[u]);var c=o();a({data:l,addLength1:!0,objectId:c}),i("endobj");var h=o();a({data:n(r.metadata.toUnicode),addLength1:!0,objectId:h}),i("endobj");var f=o();i("<<"),i("/Descent "+r.metadata.decender),i("/CapHeight "+r.metadata.capHeight),i("/StemV "+r.metadata.stemV),i("/Type /FontDescriptor"),i("/FontFile2 "+c+" 0 R"),i("/Flags 96"),i("/FontBBox "+t.API.PDFObject.convert(r.metadata.bbox)),i("/FontName /"+Et(r.fontName)),i("/ItalicAngle "+r.metadata.italicAngle),i("/Ascent "+r.metadata.ascender),i(">>"),i("endobj"),r.objectNumber=o();for(var p=0;p<r.metadata.hmtx.widths.length;p++)r.metadata.hmtx.widths[p]=parseInt(r.metadata.hmtx.widths[p]*(1e3/r.metadata.head.unitsPerEm));i("<</Subtype/TrueType/Type/Font/ToUnicode "+h+" 0 R/BaseFont/"+Et(r.fontName)+"/FontDescriptor "+f+" 0 R/Encoding/"+r.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(r.metadata.hmtx.widths)+">>"),i("endobj"),r.isAlreadyPutted=!0}}(e)}]);var i=function(t){var e,n=t.text||"",i=t.x,o=t.y,a=t.options||{},s=t.mutex||{},l=s.pdfEscape,u=s.activeFontKey,c=s.fonts,h=u,f="",p=0,A="",d=c[h].encoding;if("Identity-H"!==c[h].encoding)return{text:n,x:i,y:o,options:a,mutex:s};for(A=n,h=u,Array.isArray(n)&&(A=n[0]),p=0;p<A.length;p+=1)c[h].metadata.hasOwnProperty("cmap")&&(e=c[h].metadata.cmap.unicode.codeMap[A[p].charCodeAt(0)]),e||A[p].charCodeAt(0)<256&&c[h].metadata.hasOwnProperty("Unicode")?f+=A[p]:f+="";var g="";return parseInt(h.slice(1))<14||"WinAnsiEncoding"===d?g=l(f,h).split("").map((function(t){return t.charCodeAt(0).toString(16)})).join(""):"Identity-H"===d&&(g=r(f,c[h])),s.isHex=!0,{text:g,x:i,y:o,options:a,mutex:s}};e.events.push(["postProcessText",function(t){var e=t.text||"",r=[],n={text:e,x:t.x,y:t.y,options:t.options,mutex:t.mutex};if(Array.isArray(e)){var o=0;for(o=0;o<e.length;o+=1)Array.isArray(e[o])&&3===e[o].length?r.push([i(Object.assign({},n,{text:e[o][0]})).text,e[o][1],e[o][2]]):r.push(i(Object.assign({},n,{text:e[o]})).text);t.text=r}else t.text=i(Object.assign({},n,{text:e})).text}])}(Nt),function(t){var e=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]},t.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},t.getFileFromVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]?this.internal.vFS[t]:null}}(Nt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(t){var r,n,i,o,a,s,l,u=e,c=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],f={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},A=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],d=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,y=0;this.__bidiEngine__={};var v=function(t){var e=t.charCodeAt(),r=e>>8,n=p[r];return void 0!==n?u[256*n+(255&e)]:252===r||253===r?"AL":d.test(r)?"L":8===r?"R":"N"},m=function(t){for(var e,r=0;r<t.length;r++){if("L"===(e=v(t.charAt(r))))return!1;if("R"===e)return!0}return!1},b=function(t,e,a,s){var l,u,c,h,f=e[s];switch(f){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"N":case"AN":break;case"EN":g&&(f="AN");break;case"AL":g=!0,f="R";break;case"WS":case"BN":f="N";break;case"CS":s<1||s+1>=e.length||"EN"!==(l=a[s-1])&&"AN"!==l||"EN"!==(u=e[s+1])&&"AN"!==u?f="N":g&&(u="AN"),f=u===l?u:"N";break;case"ES":f="EN"===(l=s>0?a[s-1]:"B")&&s+1<e.length&&"EN"===e[s+1]?"EN":"N";break;case"ET":if(s>0&&"EN"===a[s-1]){f="EN";break}if(g){f="N";break}for(c=s+1,h=e.length;c<h&&"ET"===e[c];)c++;f=c<h&&"EN"===e[c]?"EN":"N";break;case"NSM":if(i&&!o){for(h=e.length,c=s+1;c<h&&"NSM"===e[c];)c++;if(c<h){var p=t[s],A=p>=1425&&p<=2303||64286===p;if(l=e[c],A&&("R"===l||"AL"===l)){f="R";break}}}f=s<1||"B"===(l=e[s-1])?"N":a[s-1];break;case"B":g=!1,r=!0,f=y;break;case"S":n=!0,f="N"}return f},_=function(t,e,r){var n=t.split("");return r&&w(n,r,{hiLevel:y}),n.reverse(),e&&e.reverse(),n.join("")},w=function(t,e,i){var o,a,s,l,u,p=-1,A=t.length,d=0,m=[],_=y?h:c,w=[];for(g=!1,r=!1,n=!1,a=0;a<A;a++)w[a]=v(t[a]);for(s=0;s<A;s++){if(u=d,m[s]=b(t,w,m,s),o=240&(d=_[u][f[m[s]]]),d&=15,e[s]=l=_[d][5],o>0)if(16===o){for(a=p;a<s;a++)e[a]=1;p=-1}else p=-1;if(_[d][6])-1===p&&(p=s);else if(p>-1){for(a=p;a<s;a++)e[a]=l;p=-1}"B"===w[s]&&(e[s]=0),i.hiLevel|=l}n&&function(t,e,r){for(var n=0;n<r;n++)if("S"===t[n]){e[n]=y;for(var i=n-1;i>=0&&"WS"===t[i];i--)e[i]=y}}(w,e,A)},x=function(t,e,n,i,o){if(!(o.hiLevel<t)){if(1===t&&1===y&&!r)return e.reverse(),void(n&&n.reverse());for(var a,s,l,u,c=e.length,h=0;h<c;){if(i[h]>=t){for(l=h+1;l<c&&i[l]>=t;)l++;for(u=h,s=l-1;u<s;u++,s--)a=e[u],e[u]=e[s],e[s]=a,n&&(a=n[u],n[u]=n[s],n[s]=a);h=l}h++}}},E=function(t,e,r){var n=t.split(""),i={hiLevel:y};return r||(r=[]),w(n,r,i),function(t,e,r){if(0!==r.hiLevel&&l)for(var n,i=0;i<t.length;i++)1===e[i]&&(n=A.indexOf(t[i]))>=0&&(t[i]=A[n+1])}(n,r,i),x(2,n,e,r,i),x(1,n,e,r,i),n.join("")};return this.__bidiEngine__.doBidiReorder=function(t,e,r){if(function(t,e){if(e)for(var r=0;r<t.length;r++)e[r]=r;void 0===o&&(o=m(t)),void 0===s&&(s=m(t))}(t,e),i||!a||s)if(i&&a&&o^s)y=o?1:0,t=_(t,e,r);else if(!i&&a&&s)y=o?1:0,t=E(t,e,r),t=_(t,e);else if(!i||o||a||s){if(i&&!a&&o^s)t=_(t,e),o?(y=0,t=E(t,e,r)):(y=1,t=E(t,e,r),t=_(t,e));else if(i&&o&&!a&&s)y=1,t=E(t,e,r),t=_(t,e);else if(!i&&!a&&o^s){var n=l;o?(y=1,t=E(t,e,r),y=0,l=!1,t=E(t,e,r),l=n):(y=0,t=E(t,e,r),t=_(t,e),y=1,l=!1,t=E(t,e,r),l=n,t=_(t,e))}}else y=0,t=E(t,e,r);else y=o?1:0,t=E(t,e,r);return t},this.__bidiEngine__.setOptions=function(t){t&&(i=t.isInputVisual,a=t.isOutputVisual,o=t.isInputRtl,s=t.isOutputRtl,l=t.isSymmetricSwapping)},this.__bidiEngine__.setOptions(t),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(t){var e=t.text,n=(t.x,t.y,t.options||{}),i=(t.mutex,n.lang,[]);if(n.isInputVisual="boolean"!=typeof n.isInputVisual||n.isInputVisual,r.setOptions(n),"[object Array]"===Object.prototype.toString.call(e)){var o=0;for(i=[],o=0;o<e.length;o+=1)"[object Array]"===Object.prototype.toString.call(e[o])?i.push([r.doBidiReorder(e[o][0]),e[o][1],e[o][2]]):i.push([r.doBidiReorder(e[o])]);t.text=i}else t.text=r.doBidiReorder(e);r.setOptions({isInputVisual:!0})}])}(Nt),Nt.API.TTFFont=function(){function t(t){var e;if(this.rawData=t,e=this.contents=new Xe(t),this.contents.pos=4,"ttcf"===e.readString(4))throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new dr(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Je(this.contents),this.head=new tr(this),this.name=new sr(this),this.cmap=new rr(this),this.toUnicode={},this.hhea=new nr(this),this.maxp=new lr(this),this.hmtx=new ur(this),this.post=new or(this),this.os2=new ir(this),this.loca=new Ar(this),this.glyf=new hr(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var t,e,r,n,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var e,r,n,i;for(i=[],e=0,r=(n=this.bbox).length;e<r;e++)t=n[e],i.push(Math.round(t*this.scaleFactor));return i}.call(this),this.stemV=0,this.post.exists?(r=255&(n=this.post.italic_angle),0!=(32768&(e=n>>16))&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(i=this.familyClass)||2===i||3===i||4===i||5===i||7===i,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(t){var e;return(null!=(e=this.cmap.unicode)?e.codeMap[t]:void 0)||0},t.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},t.prototype.widthOfString=function(t,e,r){var n,i,o,a;for(o=0,i=0,a=(t=""+t).length;0<=a?i<a:i>a;i=0<=a?++i:--i)n=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(n))+r*(1e3/e)||0;return o*(e/1e3)},t.prototype.lineHeight=function(t,e){var r;return null==e&&(e=!1),r=e?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},t}();var We,Xe=function(){function t(t){this.data=null!=t?t:[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(t){return this.data[this.pos++]=t},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},t.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},t.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},t.prototype.readString=function(t){var e,r;for(r=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)r[e]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(t){var e,r,n;for(n=[],e=0,r=t.length;0<=r?e<r:e>r;e=0<=r?++e:--e)n.push(this.writeByte(t.charCodeAt(e)));return n},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(t){return this.writeInt16(t)},t.prototype.readLongLong=function(){var t,e,r,n,i,o,a,s;return t=this.readByte(),e=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),a=this.readByte(),s=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^r)+4294967296*(255^n)+16777216*(255^i)+65536*(255^o)+256*(255^a)+(255^s)+1):72057594037927940*t+281474976710656*e+1099511627776*r+4294967296*n+16777216*i+65536*o+256*a+s},t.prototype.writeLongLong=function(t){var e,r;return e=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(t){return this.writeInt32(t)},t.prototype.read=function(t){var e,r;for(e=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)e.push(this.readByte());return e},t.prototype.write=function(t){var e,r,n,i;for(i=[],r=0,n=t.length;r<n;r++)e=t[r],i.push(this.writeByte(e));return i},t}(),Je=function(){var t;function e(t){var e,r,n;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},r=0,n=this.tableCount;0<=n?r<n:r>n;r=0<=n?++r:--r)e={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[e.tag]=e}return e.prototype.encode=function(e){var r,n,i,o,a,s,l,u,c,h,f,p,A;for(A in f=Object.keys(e).length,s=Math.log(2),c=16*Math.floor(Math.log(f)/s),o=Math.floor(c/s),u=16*f-c,(n=new Xe).writeInt(this.scalarType),n.writeShort(f),n.writeShort(c),n.writeShort(o),n.writeShort(u),i=16*f,l=n.pos+i,a=null,p=[],e)for(h=e[A],n.writeString(A),n.writeInt(t(h)),n.writeInt(l),n.writeInt(h.length),p=p.concat(h),"head"===A&&(a=l),l+=h.length;l%4;)p.push(0),l++;return n.write(p),r=2981146554-t(n.data),n.pos=a+8,n.writeUInt32(r),n.data},t=function(t){var e,r,n,i;for(t=cr.call(t);t.length%4;)t.push(0);for(n=new Xe(t),r=0,e=0,i=t.length;e<i;e=e+=4)r+=n.readUInt32();return 4294967295&r},e}(),Ze={}.hasOwnProperty,$e=function(t,e){for(var r in e)Ze.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};We=function(){function t(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var tr=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $e(e,We),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var e;return(e=new Xe).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},e}(),er=function(){function t(t,e){var r,n,i,o,a,s,l,u,c,h,f,p,A,d,g,y,v;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),c=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(s=0;s<256;++s)this.codeMap[s]=t.readByte();break;case 4:for(f=t.readUInt16(),h=f/2,t.pos+=6,i=function(){var e,r;for(r=[],s=e=0;0<=h?e<h:e>h;s=0<=h?++e:--e)r.push(t.readUInt16());return r}(),t.pos+=2,A=function(){var e,r;for(r=[],s=e=0;0<=h?e<h:e>h;s=0<=h?++e:--e)r.push(t.readUInt16());return r}(),l=function(){var e,r;for(r=[],s=e=0;0<=h?e<h:e>h;s=0<=h?++e:--e)r.push(t.readUInt16());return r}(),u=function(){var e,r;for(r=[],s=e=0;0<=h?e<h:e>h;s=0<=h?++e:--e)r.push(t.readUInt16());return r}(),n=(this.length-t.pos+this.offset)/2,a=function(){var e,r;for(r=[],s=e=0;0<=n?e<n:e>n;s=0<=n?++e:--e)r.push(t.readUInt16());return r}(),s=g=0,v=i.length;g<v;s=++g)for(d=i[s],r=y=p=A[s];p<=d?y<=d:y>=d;r=p<=d?++y:--y)0===u[s]?o=r+l[s]:0!==(o=a[u[s]/2+(r-p)-(h-s)]||0)&&(o+=l[s]),this.codeMap[r]=65535&o}t.pos=c}return t.encode=function(t,e){var r,n,i,o,a,s,l,u,c,h,f,p,A,d,g,y,v,m,b,_,w,x,E,B,C,S,k,T,N,L,I,M,O,P,F,U,R,D,j,H,Q,z,V,G,q,K;switch(T=new Xe,o=Object.keys(t).sort((function(t,e){return t-e})),e){case"macroman":for(A=0,d=function(){var t=[];for(p=0;p<256;++p)t.push(0);return t}(),y={0:0},i={},N=0,O=o.length;N<O;N++)null==y[V=t[n=o[N]]]&&(y[V]=++A),i[n]={old:t[n],new:y[t[n]]},d[n]=y[t[n]];return T.writeUInt16(1),T.writeUInt16(0),T.writeUInt32(12),T.writeUInt16(0),T.writeUInt16(262),T.writeUInt16(0),T.write(d),{charMap:i,subtable:T.data,maxGlyphID:A+1};case"unicode":for(S=[],c=[],v=0,y={},r={},g=l=null,L=0,P=o.length;L<P;L++)null==y[b=t[n=o[L]]]&&(y[b]=++v),r[n]={old:b,new:y[b]},a=y[b]-n,null!=g&&a===l||(g&&c.push(g),S.push(n),l=a),g=n;for(g&&c.push(g),c.push(65535),S.push(65535),B=2*(E=S.length),x=2*Math.pow(Math.log(E)/Math.LN2,2),h=Math.log(x/2)/Math.LN2,w=2*E-x,s=[],_=[],f=[],p=I=0,F=S.length;I<F;p=++I){if(C=S[p],u=c[p],65535===C){s.push(0),_.push(0);break}if(C-(k=r[C].new)>=32768)for(s.push(0),_.push(2*(f.length+E-p)),n=M=C;C<=u?M<=u:M>=u;n=C<=u?++M:--M)f.push(r[n].new);else s.push(k-C),_.push(0)}for(T.writeUInt16(3),T.writeUInt16(1),T.writeUInt32(12),T.writeUInt16(4),T.writeUInt16(16+8*E+2*f.length),T.writeUInt16(0),T.writeUInt16(B),T.writeUInt16(x),T.writeUInt16(h),T.writeUInt16(w),Q=0,U=c.length;Q<U;Q++)n=c[Q],T.writeUInt16(n);for(T.writeUInt16(0),z=0,R=S.length;z<R;z++)n=S[z],T.writeUInt16(n);for(G=0,D=s.length;G<D;G++)a=s[G],T.writeUInt16(a);for(q=0,j=_.length;q<j;q++)m=_[q],T.writeUInt16(m);for(K=0,H=f.length;K<H;K++)A=f[K],T.writeUInt16(A);return{charMap:r,subtable:T.data,maxGlyphID:v+1}}},t}(),rr=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $e(e,We),e.prototype.tag="cmap",e.prototype.parse=function(t){var e,r,n;for(t.pos=this.offset,this.version=t.readUInt16(),n=t.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)e=new er(t,this.offset),this.tables.push(e),e.isUnicode&&null==this.unicode&&(this.unicode=e);return!0},e.encode=function(t,e){var r,n;return null==e&&(e="macroman"),r=er.encode(t,e),(n=new Xe).writeUInt16(0),n.writeUInt16(1),r.table=n.data.concat(r.subtable),r},e}(),nr=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $e(e,We),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),ir=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $e(e,We),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var e,r;for(r=[],e=0;e<10;++e)r.push(t.readByte());return r}(),this.charRange=function(){var e,r;for(r=[],e=0;e<4;++e)r.push(t.readInt());return r}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var e,r;for(r=[],e=0;e<2;e=++e)r.push(t.readInt());return r}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),or=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $e(e,We),e.prototype.tag="post",e.prototype.parse=function(t){var e,r,n;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(r=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],n=[];t.pos<this.offset+this.length;)e=t.readByte(),n.push(this.names.push(t.readString(e)));return n;case 151552:return r=t.readUInt16(),this.offsets=t.read(r);case 262144:return this.map=function(){var e,r,n;for(n=[],i=e=0,r=this.file.maxp.numGlyphs;0<=r?e<r:e>r;i=0<=r?++e:--e)n.push(t.readUInt32());return n}.call(this)}},e}(),ar=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},sr=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $e(e,We),e.prototype.tag="name",e.prototype.parse=function(t){var e,r,n,i,o,a,s,l,u,c,h;for(t.pos=this.offset,t.readShort(),e=t.readShort(),a=t.readShort(),r=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)r.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+a+t.readShort()});for(s={},i=u=0,c=r.length;u<c;i=++u)n=r[i],t.pos=n.offset,l=t.readString(n.length),o=new ar(l,n),null==s[h=n.nameID]&&(s[h]=[]),s[n.nameID].push(o);this.strings=s,this.copyright=s[0],this.fontFamily=s[1],this.fontSubfamily=s[2],this.uniqueSubfamily=s[3],this.fontName=s[4],this.version=s[5];try{this.postscriptName=s[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(t){this.postscriptName=s[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=s[7],this.manufacturer=s[8],this.designer=s[9],this.description=s[10],this.vendorUrl=s[11],this.designerUrl=s[12],this.license=s[13],this.licenseUrl=s[14],this.preferredFamily=s[15],this.preferredSubfamily=s[17],this.compatibleFull=s[18],this.sampleText=s[19]},e}(),lr=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $e(e,We),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),ur=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $e(e,We),e.prototype.tag="hmtx",e.prototype.parse=function(t){var e,r,n,i,o,a,s;for(t.pos=this.offset,this.metrics=[],e=0,a=this.file.hhea.numberOfMetrics;0<=a?e<a:e>a;e=0<=a?++e:--e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(n=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var r,i;for(i=[],e=r=0;0<=n?r<n:r>n;e=0<=n?++r:--r)i.push(t.readInt16());return i}(),this.widths=function(){var t,e,r,n;for(n=[],t=0,e=(r=this.metrics).length;t<e;t++)i=r[t],n.push(i.advance);return n}.call(this),r=this.widths[this.widths.length-1],s=[],e=o=0;0<=n?o<n:o>n;e=0<=n?++o:--o)s.push(this.widths.push(r));return s},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),cr=[].slice,hr=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $e(e,We),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var e,r,n,i,o,a,s,l,u,c;return t in this.cache?this.cache[t]:(i=this.file.loca,e=this.file.contents,r=i.indexOf(t),0===(n=i.lengthOf(t))?this.cache[t]=null:(e.pos=this.offset+r,o=(a=new Xe(e.read(n))).readShort(),l=a.readShort(),c=a.readShort(),s=a.readShort(),u=a.readShort(),this.cache[t]=-1===o?new pr(a,l,c,s,u):new fr(a,o,l,c,s,u),this.cache[t]))},e.prototype.encode=function(t,e,r){var n,i,o,a,s;for(o=[],i=[],a=0,s=e.length;a<s;a++)n=t[e[a]],i.push(o.length),n&&(o=o.concat(n.encode(r)));return i.push(o.length),{table:o,offsets:i}},e}(),fr=function(){function t(t,e,r,n,i,o){this.raw=t,this.numberOfContours=e,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),pr=function(){function t(t,e,r,n,i){var o,a;for(this.raw=t,this.xMin=e,this.yMin=r,this.xMax=n,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var t,e,r;for(e=new Xe(cr.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)e.pos=this.glyphOffsets[t];return e.data},t}(),Ar=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $e(e,We),e.prototype.tag="loca",e.prototype.parse=function(t){var e,r;return t.pos=this.offset,e=this.file.head.indexToLocFormat,this.offsets=0===e?function(){var e,n;for(n=[],r=0,e=this.length;r<e;r+=2)n.push(2*t.readUInt16());return n}.call(this):function(){var e,n;for(n=[],r=0,e=this.length;r<e;r+=4)n.push(t.readUInt32());return n}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,e){for(var r=new Uint32Array(this.offsets.length),n=0,i=0,o=0;o<r.length;++o)if(r[o]=n,i<e.length&&e[i]==o){++i,r[o]=n;var a=this.offsets[o],s=this.offsets[o+1]-a;s>0&&(n+=s)}for(var l=new Array(4*r.length),u=0;u<r.length;++u)l[4*u+3]=255&r[u],l[4*u+2]=(65280&r[u])>>8,l[4*u+1]=(16711680&r[u])>>16,l[4*u]=(4278190080&r[u])>>24;return l},e}(),dr=function(){function t(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var t,e,r,n,i;for(e in n=this.font.cmap.tables[0].codeMap,t={},i=this.subset)r=i[e],t[e]=n[r];return t},t.prototype.glyphsFor=function(t){var e,r,n,i,o,a,s;for(n={},o=0,a=t.length;o<a;o++)n[i=t[o]]=this.font.glyf.glyphFor(i);for(i in e=[],n)(null!=(r=n[i])?r.compound:void 0)&&e.push.apply(e,r.glyphIDs);if(e.length>0)for(i in s=this.glyphsFor(e))r=s[i],n[i]=r;return n},t.prototype.encode=function(t,e){var r,n,i,o,a,s,l,u,c,h,f,p,A,d,g;for(n in r=rr.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),f={0:0},g=r.charMap)f[(s=g[n]).old]=s.new;for(p in h=r.maxGlyphID,o)p in f||(f[p]=h++);return u=function(t){var e,r;for(e in r={},t)r[t[e]]=e;return r}(f),c=Object.keys(u).sort((function(t,e){return t-e})),A=function(){var t,e,r;for(r=[],t=0,e=c.length;t<e;t++)a=c[t],r.push(u[a]);return r}(),i=this.font.glyf.encode(o,A,f),l=this.font.loca.encode(i.offsets,A),d={cmap:this.font.cmap.raw(),glyf:i.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(d["OS/2"]=this.font.os2.raw()),this.font.directory.encode(d)},t}();Nt.API.PDFObject=function(){var t;function e(){}return t=function(t,e){return(Array(e+1).join("0")+t).slice(-e)},e.convert=function(r){var n,i,o,a;if(Array.isArray(r))return"["+function(){var t,i,o;for(o=[],t=0,i=r.length;t<i;t++)n=r[t],o.push(e.convert(n));return o}().join(" ")+"]";if("string"==typeof r)return"/"+r;if(null!=r?r.isString:void 0)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(r)){for(i in o=["<<"],r)a=r[i],o.push("/"+i+" "+e.convert(a));return o.push(">>"),o.join("\n")}return""+r},e}();var gr=Nt},4463:function(t,e,r){"use strict";var n=r(2791),i=r(5296);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(t,e){u(t,e),u(t+"Capture",e)}function u(t,e){for(s[t]=e,t=0;t<e.length;t++)a.add(e[t])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},A={};function d(t,e,r,n,i,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){g[t]=new d(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];g[e]=new d(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){g[t]=new d(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){g[t]=new d(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){g[t]=new d(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){g[t]=new d(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){g[t]=new d(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){g[t]=new d(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){g[t]=new d(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function m(t,e,r,n){var i=g.hasOwnProperty(e)?g[e]:null;(null!==i?0!==i.type:n||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,r,n){if(null===e||"undefined"===typeof e||function(t,e,r,n){if(null!==r&&0===r.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,r,i,n)&&(r=null),n||null===i?function(t){return!!h.call(A,t)||!h.call(p,t)&&(f.test(t)?A[t]=!0:(p[t]=!0,!1))}(e)&&(null===r?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=null===r?3!==i.type&&"":r:(e=i.attributeName,n=i.attributeNamespace,null===r?t.removeAttribute(e):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,v);g[e]=new d(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,v);g[e]=new d(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,v);g[e]=new d(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){g[t]=new d(t,1,!1,t.toLowerCase(),null,!1,!1)})),g.xlinkHref=new d("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){g[t]=new d(t,1,!1,t.toLowerCase(),null,!0,!0)}));var b=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),S=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function P(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=O&&t[O]||t["@@iterator"])?t:null}var F,U=Object.assign;function R(t){if(void 0===F)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);F=e&&e[1]||""}return"\n"+F+t}var D=!1;function j(t,e){if(!t||D)return"";D=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=n.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=a&&0<=s);break}}}finally{D=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?R(t):""}function H(t){switch(t.tag){case 5:return R(t.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 2:case 15:return t=j(t.type,!1);case 11:return t=j(t.type.render,!1);case 1:return t=j(t.type,!0);default:return""}}function Q(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case x:return"Fragment";case w:return"Portal";case B:return"Profiler";case E:return"StrictMode";case T:return"Suspense";case N:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case S:return(t.displayName||"Context")+".Consumer";case C:return(t._context.displayName||"Context")+".Provider";case k:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case L:return null!==(e=t.displayName||null)?e:Q(t.type)||"Memo";case I:e=t._payload,t=t._init;try{return Q(t(e))}catch(r){}}return null}function z(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Q(e);case 8:return e===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function V(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function G(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function q(t){t._valueTracker||(t._valueTracker=function(t){var e=G(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){n=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(t){n=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function K(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=G(t)?t.checked?"true":"false":t.value),(t=n)!==r&&(e.setValue(t),!0)}function Y(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function W(t,e){var r=e.checked;return U({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:t._wrapperState.initialChecked})}function X(t,e){var r=null==e.defaultValue?"":e.defaultValue,n=null!=e.checked?e.checked:e.defaultChecked;r=V(null!=e.value?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function J(t,e){null!=(e=e.checked)&&m(t,"checked",e,!1)}function Z(t,e){J(t,e);var r=V(e.value),n=e.type;if(null!=r)"number"===n?(0===r&&""===t.value||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if("submit"===n||"reset"===n)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,r):e.hasOwnProperty("defaultValue")&&tt(t,e.type,V(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function $(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!("submit"!==n&&"reset"!==n||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}""!==(r=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==r&&(t.name=r)}function tt(t,e,r){"number"===e&&Y(t.ownerDocument)===t||(null==r?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var et=Array.isArray;function rt(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+V(r),e=null,i=0;i<t.length;i++){if(t[i].value===r)return t[i].selected=!0,void(n&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function nt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return U({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var r=e.value;if(null==r){if(r=e.children,e=e.defaultValue,null!=r){if(null!=e)throw Error(o(92));if(et(r)){if(1<r.length)throw Error(o(93));r=r[0]}e=r}null==e&&(e=""),r=e}t._wrapperState={initialValue:V(r)}}function ot(t,e){var r=V(e.value),n=V(e.defaultValue);null!=r&&((r=""+r)!==t.value&&(t.value=r),null==e.defaultValue&&t.defaultValue!==r&&(t.defaultValue=r)),null!=n&&(t.defaultValue=""+n)}function at(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function st(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?st(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ut,ct,ht=(ct=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ut=ut||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ut.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,r,n){MSApp.execUnsafeLocalFunction((function(){return ct(t,e)}))}:ct);function ft(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&3===r.nodeType)return void(r.nodeValue=e)}t.textContent=e}var pt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},At=["Webkit","ms","Moz","O"];function dt(t,e,r){return null==e||"boolean"===typeof e||""===e?"":r||"number"!==typeof e||0===e||pt.hasOwnProperty(t)&&pt[t]?(""+e).trim():e+"px"}function gt(t,e){for(var r in t=t.style,e)if(e.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=dt(r,e[r],n);"float"===r&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}Object.keys(pt).forEach((function(t){At.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pt[e]=pt[t]}))}));var yt=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(t,e){if(e){if(yt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(o(62))}}function mt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bt=null;function _t(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var wt=null,xt=null,Et=null;function Bt(t){if(t=mi(t)){if("function"!==typeof wt)throw Error(o(280));var e=t.stateNode;e&&(e=_i(e),wt(t.stateNode,t.type,e))}}function Ct(t){xt?Et?Et.push(t):Et=[t]:xt=t}function St(){if(xt){var t=xt,e=Et;if(Et=xt=null,Bt(t),e)for(t=0;t<e.length;t++)Bt(e[t])}}function kt(t,e){return t(e)}function Tt(){}var Nt=!1;function Lt(t,e,r){if(Nt)return t(e,r);Nt=!0;try{return kt(t,e,r)}finally{Nt=!1,(null!==xt||null!==Et)&&(Tt(),St())}}function It(t,e){var r=t.stateNode;if(null===r)return null;var n=_i(r);if(null===n)return null;r=n[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!n;break t;default:t=!1}if(t)return null;if(r&&"function"!==typeof r)throw Error(o(231,e,typeof r));return r}var Mt=!1;if(c)try{var Ot={};Object.defineProperty(Ot,"passive",{get:function(){Mt=!0}}),window.addEventListener("test",Ot,Ot),window.removeEventListener("test",Ot,Ot)}catch(ct){Mt=!1}function Pt(t,e,r,n,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(c){this.onError(c)}}var Ft=!1,Ut=null,Rt=!1,Dt=null,jt={onError:function(t){Ft=!0,Ut=t}};function Ht(t,e,r,n,i,o,a,s,l){Ft=!1,Ut=null,Pt.apply(jt,arguments)}function Qt(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(r=e.return),t=e.return}while(t)}return 3===e.tag?r:null}function zt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Vt(t){if(Qt(t)!==t)throw Error(o(188))}function Gt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Qt(t)))throw Error(o(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(n=i.return)){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return Vt(i),t;if(a===n)return Vt(i),e;a=a.sibling}throw Error(o(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,l=i.child;l;){if(l===r){s=!0,r=i,n=a;break}if(l===n){s=!0,n=i,r=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===r){s=!0,r=a,n=i;break}if(l===n){s=!0,n=a,r=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(r.alternate!==n)throw Error(o(190))}if(3!==r.tag)throw Error(o(188));return r.stateNode.current===r?t:e}(t))?qt(t):null}function qt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=qt(t);if(null!==e)return e;t=t.sibling}return null}var Kt=i.unstable_scheduleCallback,Yt=i.unstable_cancelCallback,Wt=i.unstable_shouldYield,Xt=i.unstable_requestPaint,Jt=i.unstable_now,Zt=i.unstable_getCurrentPriorityLevel,$t=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,re=i.unstable_LowPriority,ne=i.unstable_IdlePriority,ie=null,oe=null;var ae=Math.clz32?Math.clz32:function(t){return 0===(t>>>=0)?32:31-(se(t)/le|0)|0},se=Math.log,le=Math.LN2;var ue=64,ce=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fe(t,e){var r=t.pendingLanes;if(0===r)return 0;var n=0,i=t.suspendedLanes,o=t.pingedLanes,a=268435455&r;if(0!==a){var s=a&~i;0!==s?n=he(s):0!==(o&=a)&&(n=he(o))}else 0!==(a=r&~i)?n=he(a):0!==o&&(n=he(o));if(0===n)return 0;if(0!==e&&e!==n&&0===(e&i)&&((i=n&-n)>=(o=e&-e)||16===i&&0!==(4194240&o)))return e;if(0!==(4&n)&&(n|=16&r),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=n;0<e;)i=1<<(r=31-ae(e)),n|=t[r],e&=~i;return n}function pe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function Ae(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function de(){var t=ue;return 0===(4194240&(ue<<=1))&&(ue=64),t}function ge(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function ye(t,e,r){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-ae(e)]=r}function ve(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-ae(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var me=0;function be(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var _e,we,xe,Ee,Be,Ce=!1,Se=[],ke=null,Te=null,Ne=null,Le=new Map,Ie=new Map,Me=[],Oe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pe(t,e){switch(t){case"focusin":case"focusout":ke=null;break;case"dragenter":case"dragleave":Te=null;break;case"mouseover":case"mouseout":Ne=null;break;case"pointerover":case"pointerout":Le.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ie.delete(e.pointerId)}}function Fe(t,e,r,n,i,o){return null===t||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},null!==e&&(null!==(e=mi(e))&&we(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function Ue(t){var e=vi(t.target);if(null!==e){var r=Qt(e);if(null!==r)if(13===(e=r.tag)){if(null!==(e=zt(r)))return t.blockedOn=e,void Be(t.priority,(function(){xe(r)}))}else if(3===e&&r.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}t.blockedOn=null}function Re(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var r=We(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==r)return null!==(e=mi(r))&&we(e),t.blockedOn=r,!1;var n=new(r=t.nativeEvent).constructor(r.type,r);bt=n,r.target.dispatchEvent(n),bt=null,e.shift()}return!0}function De(t,e,r){Re(t)&&r.delete(e)}function je(){Ce=!1,null!==ke&&Re(ke)&&(ke=null),null!==Te&&Re(Te)&&(Te=null),null!==Ne&&Re(Ne)&&(Ne=null),Le.forEach(De),Ie.forEach(De)}function He(t,e){t.blockedOn===e&&(t.blockedOn=null,Ce||(Ce=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,je)))}function Qe(t){function e(e){return He(e,t)}if(0<Se.length){He(Se[0],t);for(var r=1;r<Se.length;r++){var n=Se[r];n.blockedOn===t&&(n.blockedOn=null)}}for(null!==ke&&He(ke,t),null!==Te&&He(Te,t),null!==Ne&&He(Ne,t),Le.forEach(e),Ie.forEach(e),r=0;r<Me.length;r++)(n=Me[r]).blockedOn===t&&(n.blockedOn=null);for(;0<Me.length&&null===(r=Me[0]).blockedOn;)Ue(r),null===r.blockedOn&&Me.shift()}var ze=b.ReactCurrentBatchConfig,Ve=!0;function Ge(t,e,r,n){var i=me,o=ze.transition;ze.transition=null;try{me=1,Ke(t,e,r,n)}finally{me=i,ze.transition=o}}function qe(t,e,r,n){var i=me,o=ze.transition;ze.transition=null;try{me=4,Ke(t,e,r,n)}finally{me=i,ze.transition=o}}function Ke(t,e,r,n){if(Ve){var i=We(t,e,r,n);if(null===i)Vn(t,e,n,Ye,r),Pe(t,n);else if(function(t,e,r,n,i){switch(e){case"focusin":return ke=Fe(ke,t,e,r,n,i),!0;case"dragenter":return Te=Fe(Te,t,e,r,n,i),!0;case"mouseover":return Ne=Fe(Ne,t,e,r,n,i),!0;case"pointerover":var o=i.pointerId;return Le.set(o,Fe(Le.get(o)||null,t,e,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Ie.set(o,Fe(Ie.get(o)||null,t,e,r,n,i)),!0}return!1}(i,t,e,r,n))n.stopPropagation();else if(Pe(t,n),4&e&&-1<Oe.indexOf(t)){for(;null!==i;){var o=mi(i);if(null!==o&&_e(o),null===(o=We(t,e,r,n))&&Vn(t,e,n,Ye,r),o===i)break;i=o}null!==i&&n.stopPropagation()}else Vn(t,e,n,null,r)}}var Ye=null;function We(t,e,r,n){if(Ye=null,null!==(t=vi(t=_t(n))))if(null===(e=Qt(t)))t=null;else if(13===(r=e.tag)){if(null!==(t=zt(e)))return t;t=null}else if(3===r){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ye=t,null}function Xe(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zt()){case $t:return 1;case te:return 4;case ee:case re:return 16;case ne:return 536870912;default:return 16}default:return 16}}var Je=null,Ze=null,$e=null;function tr(){if($e)return $e;var t,e,r=Ze,n=r.length,i="value"in Je?Je.value:Je.textContent,o=i.length;for(t=0;t<n&&r[t]===i[t];t++);var a=n-t;for(e=1;e<=a&&r[n-e]===i[o-e];e++);return $e=i.slice(t,1<e?1-e:void 0)}function er(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function rr(){return!0}function nr(){return!1}function ir(t){function e(e,r,n,i,o){for(var a in this._reactName=e,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return U(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),e}var or,ar,sr,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ur=ir(lr),cr=U({},lr,{view:0,detail:0}),hr=ir(cr),fr=U({},cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Er,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==sr&&(sr&&"mousemove"===t.type?(or=t.screenX-sr.screenX,ar=t.screenY-sr.screenY):ar=or=0,sr=t),or)},movementY:function(t){return"movementY"in t?t.movementY:ar}}),pr=ir(fr),Ar=ir(U({},fr,{dataTransfer:0})),dr=ir(U({},cr,{relatedTarget:0})),gr=ir(U({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),yr=U({},lr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vr=ir(yr),mr=ir(U({},lr,{data:0})),br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_r={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xr(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=wr[t])&&!!e[t]}function Er(){return xr}var Br=U({},cr,{key:function(t){if(t.key){var e=br[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=er(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?_r[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Er,charCode:function(t){return"keypress"===t.type?er(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?er(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Cr=ir(Br),Sr=ir(U({},fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kr=ir(U({},cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Er})),Tr=ir(U({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nr=U({},fr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Lr=ir(Nr),Ir=[9,13,27,32],Mr=c&&"CompositionEvent"in window,Or=null;c&&"documentMode"in document&&(Or=document.documentMode);var Pr=c&&"TextEvent"in window&&!Or,Fr=c&&(!Mr||Or&&8<Or&&11>=Or),Ur=String.fromCharCode(32),Rr=!1;function Dr(t,e){switch(t){case"keyup":return-1!==Ir.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jr(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Hr=!1;var Qr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Qr[t.type]:"textarea"===e}function Vr(t,e,r,n){Ct(n),0<(e=qn(e,"onChange")).length&&(r=new ur("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Gr=null,qr=null;function Kr(t){Rn(t,0)}function Yr(t){if(K(bi(t)))return t}function Wr(t,e){if("change"===t)return e}var Xr=!1;if(c){var Jr;if(c){var Zr="oninput"in document;if(!Zr){var $r=document.createElement("div");$r.setAttribute("oninput","return;"),Zr="function"===typeof $r.oninput}Jr=Zr}else Jr=!1;Xr=Jr&&(!document.documentMode||9<document.documentMode)}function tn(){Gr&&(Gr.detachEvent("onpropertychange",en),qr=Gr=null)}function en(t){if("value"===t.propertyName&&Yr(qr)){var e=[];Vr(e,qr,t,_t(t)),Lt(Kr,e)}}function rn(t,e,r){"focusin"===t?(tn(),qr=r,(Gr=e).attachEvent("onpropertychange",en)):"focusout"===t&&tn()}function nn(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Yr(qr)}function on(t,e){if("click"===t)return Yr(e)}function an(t,e){if("input"===t||"change"===t)return Yr(e)}var sn="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function ln(t,e){if(sn(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!h.call(e,i)||!sn(t[i],e[i]))return!1}return!0}function un(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cn(t,e){var r,n=un(t);for(t=0;n;){if(3===n.nodeType){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=un(n)}}function hn(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hn(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function fn(){for(var t=window,e=Y();e instanceof t.HTMLIFrameElement;){try{var r="string"===typeof e.contentWindow.location.href}catch(n){r=!1}if(!r)break;e=Y((t=e.contentWindow).document)}return e}function pn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function An(t){var e=fn(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&hn(r.ownerDocument.documentElement,r)){if(null!==n&&pn(r))if(e=n.start,void 0===(t=n.end)&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if((t=(e=r.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=void 0===n.end?o:Math.min(n.end,i),!t.extend&&o>n&&(i=n,n=o,o=i),i=cn(r,o);var a=cn(r,n);i&&a&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=r;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<e.length;r++)(t=e[r]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dn=c&&"documentMode"in document&&11>=document.documentMode,gn=null,yn=null,vn=null,mn=!1;function bn(t,e,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;mn||null==gn||gn!==Y(n)||("selectionStart"in(n=gn)&&pn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},vn&&ln(vn,n)||(vn=n,0<(n=qn(yn,"onSelect")).length&&(e=new ur("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=gn)))}function _n(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var wn={animationend:_n("Animation","AnimationEnd"),animationiteration:_n("Animation","AnimationIteration"),animationstart:_n("Animation","AnimationStart"),transitionend:_n("Transition","TransitionEnd")},xn={},En={};function Bn(t){if(xn[t])return xn[t];if(!wn[t])return t;var e,r=wn[t];for(e in r)if(r.hasOwnProperty(e)&&e in En)return xn[t]=r[e];return t}c&&(En=document.createElement("div").style,"AnimationEvent"in window||(delete wn.animationend.animation,delete wn.animationiteration.animation,delete wn.animationstart.animation),"TransitionEvent"in window||delete wn.transitionend.transition);var Cn=Bn("animationend"),Sn=Bn("animationiteration"),kn=Bn("animationstart"),Tn=Bn("transitionend"),Nn=new Map,Ln="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function In(t,e){Nn.set(t,e),l(e,[t])}for(var Mn=0;Mn<Ln.length;Mn++){var On=Ln[Mn];In(On.toLowerCase(),"on"+(On[0].toUpperCase()+On.slice(1)))}In(Cn,"onAnimationEnd"),In(Sn,"onAnimationIteration"),In(kn,"onAnimationStart"),In("dblclick","onDoubleClick"),In("focusin","onFocus"),In("focusout","onBlur"),In(Tn,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pn));function Un(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,function(t,e,r,n,i,a,s,l,u){if(Ht.apply(this,arguments),Ft){if(!Ft)throw Error(o(198));var c=Ut;Ft=!1,Ut=null,Rt||(Rt=!0,Dt=c)}}(n,e,void 0,t),t.currentTarget=null}function Rn(t,e){e=0!==(4&e);for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;t:{var o=void 0;if(e)for(var a=n.length-1;0<=a;a--){var s=n[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break t;Un(i,s,u),o=l}else for(a=0;a<n.length;a++){if(l=(s=n[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break t;Un(i,s,u),o=l}}}if(Rt)throw t=Dt,Rt=!1,Dt=null,t}function Dn(t,e){var r=e[di];void 0===r&&(r=e[di]=new Set);var n=t+"__bubble";r.has(n)||(zn(e,t,2,!1),r.add(n))}function jn(t,e,r){var n=0;e&&(n|=4),zn(r,t,n,e)}var Hn="_reactListening"+Math.random().toString(36).slice(2);function Qn(t){if(!t[Hn]){t[Hn]=!0,a.forEach((function(e){"selectionchange"!==e&&(Fn.has(e)||jn(e,!1,t),jn(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Hn]||(e[Hn]=!0,jn("selectionchange",!1,e))}}function zn(t,e,r,n){switch(Xe(e)){case 1:var i=Ge;break;case 4:i=qe;break;default:i=Ke}r=i.bind(null,e,r,t),i=void 0,!Mt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),n?void 0!==i?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):void 0!==i?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Vn(t,e,r,n,i){var o=n;if(0===(1&e)&&0===(2&e)&&null!==n)t:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var s=n.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=n.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=vi(s)))return;if(5===(l=a.tag)||6===l){n=o=a;continue t}s=s.parentNode}}n=n.return}Lt((function(){var n=o,i=_t(r),a=[];t:{var s=Nn.get(t);if(void 0!==s){var l=ur,u=t;switch(t){case"keypress":if(0===er(r))break t;case"keydown":case"keyup":l=Cr;break;case"focusin":u="focus",l=dr;break;case"focusout":u="blur",l=dr;break;case"beforeblur":case"afterblur":l=dr;break;case"click":if(2===r.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=Ar;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=kr;break;case Cn:case Sn:case kn:l=gr;break;case Tn:l=Tr;break;case"scroll":l=hr;break;case"wheel":l=Lr;break;case"copy":case"cut":case"paste":l=vr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Sr}var c=0!==(4&e),h=!c&&"scroll"===t,f=c?null!==s?s+"Capture":null:s;c=[];for(var p,A=n;null!==A;){var d=(p=A).stateNode;if(5===p.tag&&null!==d&&(p=d,null!==f&&(null!=(d=It(A,f))&&c.push(Gn(A,d,p)))),h)break;A=A.return}0<c.length&&(s=new l(s,u,null,r,i),a.push({event:s,listeners:c}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||r===bt||!(u=r.relatedTarget||r.fromElement)||!vi(u)&&!u[Ai])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=n,null!==(u=(u=r.relatedTarget||r.toElement)?vi(u):null)&&(u!==(h=Qt(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=n),l!==u)){if(c=pr,d="onMouseLeave",f="onMouseEnter",A="mouse","pointerout"!==t&&"pointerover"!==t||(c=Sr,d="onPointerLeave",f="onPointerEnter",A="pointer"),h=null==l?s:bi(l),p=null==u?s:bi(u),(s=new c(d,A+"leave",l,r,i)).target=h,s.relatedTarget=p,d=null,vi(i)===n&&((c=new c(f,A+"enter",u,r,i)).target=p,c.relatedTarget=h,d=c),h=d,l&&u)t:{for(f=u,A=0,p=c=l;p;p=Kn(p))A++;for(p=0,d=f;d;d=Kn(d))p++;for(;0<A-p;)c=Kn(c),A--;for(;0<p-A;)f=Kn(f),p--;for(;A--;){if(c===f||null!==f&&c===f.alternate)break t;c=Kn(c),f=Kn(f)}c=null}else c=null;null!==l&&Yn(a,s,l,c,!1),null!==u&&null!==h&&Yn(a,h,u,c,!0)}if("select"===(l=(s=n?bi(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Wr;else if(zr(s))if(Xr)g=an;else{g=nn;var y=rn}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=on);switch(g&&(g=g(t,n))?Vr(a,g,r,i):(y&&y(t,s,n),"focusout"===t&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&tt(s,"number",s.value)),y=n?bi(n):window,t){case"focusin":(zr(y)||"true"===y.contentEditable)&&(gn=y,yn=n,vn=null);break;case"focusout":vn=yn=gn=null;break;case"mousedown":mn=!0;break;case"contextmenu":case"mouseup":case"dragend":mn=!1,bn(a,r,i);break;case"selectionchange":if(dn)break;case"keydown":case"keyup":bn(a,r,i)}var v;if(Mr)t:{switch(t){case"compositionstart":var m="onCompositionStart";break t;case"compositionend":m="onCompositionEnd";break t;case"compositionupdate":m="onCompositionUpdate";break t}m=void 0}else Hr?Dr(t,r)&&(m="onCompositionEnd"):"keydown"===t&&229===r.keyCode&&(m="onCompositionStart");m&&(Fr&&"ko"!==r.locale&&(Hr||"onCompositionStart"!==m?"onCompositionEnd"===m&&Hr&&(v=tr()):(Ze="value"in(Je=i)?Je.value:Je.textContent,Hr=!0)),0<(y=qn(n,m)).length&&(m=new mr(m,t,null,r,i),a.push({event:m,listeners:y}),v?m.data=v:null!==(v=jr(r))&&(m.data=v))),(v=Pr?function(t,e){switch(t){case"compositionend":return jr(e);case"keypress":return 32!==e.which?null:(Rr=!0,Ur);case"textInput":return(t=e.data)===Ur&&Rr?null:t;default:return null}}(t,r):function(t,e){if(Hr)return"compositionend"===t||!Mr&&Dr(t,e)?(t=tr(),$e=Ze=Je=null,Hr=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fr&&"ko"!==e.locale?null:e.data}}(t,r))&&(0<(n=qn(n,"onBeforeInput")).length&&(i=new mr("onBeforeInput","beforeinput",null,r,i),a.push({event:i,listeners:n}),i.data=v))}Rn(a,e)}))}function Gn(t,e,r){return{instance:t,listener:e,currentTarget:r}}function qn(t,e){for(var r=e+"Capture",n=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=It(t,r))&&n.unshift(Gn(t,o,i)),null!=(o=It(t,e))&&n.push(Gn(t,o,i))),t=t.return}return n}function Kn(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Yn(t,e,r,n,i){for(var o=e._reactName,a=[];null!==r&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(null!==l&&l===n)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=It(r,o))&&a.unshift(Gn(r,l,s)):i||null!=(l=It(r,o))&&a.push(Gn(r,l,s))),r=r.return}0!==a.length&&t.push({event:e,listeners:a})}var Wn=/\r\n?/g,Xn=/\u0000|\uFFFD/g;function Jn(t){return("string"===typeof t?t:""+t).replace(Wn,"\n").replace(Xn,"")}function Zn(t,e,r){if(e=Jn(e),Jn(t)!==e&&r)throw Error(o(425))}function $n(){}var ti=null,ei=null;function ri(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ni="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(t){return oi.resolve(null).then(t).catch(si)}:ni;function si(t){setTimeout((function(){throw t}))}function li(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0===n)return t.removeChild(i),void Qe(e);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);Qe(e)}function ui(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ci(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var r=t.data;if("$"===r||"$!"===r||"$?"===r){if(0===e)return t;e--}else"/$"===r&&e++}t=t.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,pi="__reactProps$"+hi,Ai="__reactContainer$"+hi,di="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(t){var e=t[fi];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Ai]||r[fi]){if(r=e.alternate,null!==e.child||null!==r&&null!==r.child)for(t=ci(t);null!==t;){if(r=t[fi])return r;t=ci(t)}return e}r=(t=r).parentNode}return null}function mi(t){return!(t=t[fi]||t[Ai])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function bi(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function _i(t){return t[pi]||null}var wi=[],xi=-1;function Ei(t){return{current:t}}function Bi(t){0>xi||(t.current=wi[xi],wi[xi]=null,xi--)}function Ci(t,e){xi++,wi[xi]=t.current,t.current=e}var Si={},ki=Ei(Si),Ti=Ei(!1),Ni=Si;function Li(t,e){var r=t.type.contextTypes;if(!r)return Si;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in r)o[i]=e[i];return n&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Ii(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Mi(){Bi(Ti),Bi(ki)}function Oi(t,e,r){if(ki.current!==Si)throw Error(o(168));Ci(ki,e),Ci(Ti,r)}function Pi(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in e))throw Error(o(108,z(t)||"Unknown",i));return U({},r,n)}function Fi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Si,Ni=ki.current,Ci(ki,t),Ci(Ti,Ti.current),!0}function Ui(t,e,r){var n=t.stateNode;if(!n)throw Error(o(169));r?(t=Pi(t,e,Ni),n.__reactInternalMemoizedMergedChildContext=t,Bi(Ti),Bi(ki),Ci(ki,t)):Bi(Ti),Ci(Ti,r)}var Ri=null,Di=!1,ji=!1;function Hi(t){null===Ri?Ri=[t]:Ri.push(t)}function Qi(){if(!ji&&null!==Ri){ji=!0;var t=0,e=me;try{var r=Ri;for(me=1;t<r.length;t++){var n=r[t];do{n=n(!0)}while(null!==n)}Ri=null,Di=!1}catch(i){throw null!==Ri&&(Ri=Ri.slice(t+1)),Kt($t,Qi),i}finally{me=e,ji=!1}}return null}var zi=b.ReactCurrentBatchConfig;function Vi(t,e){if(t&&t.defaultProps){for(var r in e=U({},e),t=t.defaultProps)void 0===e[r]&&(e[r]=t[r]);return e}return e}var Gi=Ei(null),qi=null,Ki=null,Yi=null;function Wi(){Yi=Ki=qi=null}function Xi(t){var e=Gi.current;Bi(Gi),t._currentValue=e}function Ji(t,e,r){for(;null!==t;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==n&&(n.childLanes|=e)):null!==n&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Zi(t,e){qi=t,Yi=Ki=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(_s=!0),t.firstContext=null)}function $i(t){var e=t._currentValue;if(Yi!==t)if(t={context:t,memoizedValue:e,next:null},null===Ki){if(null===qi)throw Error(o(308));Ki=t,qi.dependencies={lanes:0,firstContext:t}}else Ki=Ki.next=t;return e}var to=null,eo=!1;function ro(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function no(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function io(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function oo(t,e){var r=t.updateQueue;null!==r&&(r=r.shared,eu(t)?(null===(t=r.interleaved)?(e.next=e,null===to?to=[r]:to.push(r)):(e.next=t.next,t.next=e),r.interleaved=e):(null===(t=r.pending)?e.next=e:(e.next=t.next,t.next=e),r.pending=e))}function ao(t,e,r){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&r))){var n=e.lanes;r|=n&=t.pendingLanes,e.lanes=r,ve(t,r)}}function so(t,e){var r=t.updateQueue,n=t.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,o=null;if(null!==(r=r.firstBaseUpdate)){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===o?i=o=a:o=o.next=a,r=r.next}while(null!==r);null===o?i=o=e:o=o.next=e}else i=o=e;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},void(t.updateQueue=r)}null===(t=r.lastBaseUpdate)?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function lo(t,e,r,n){var i=t.updateQueue;eo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?o=u:a.next=u,a=l;var c=t.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(a=0,c=u=l=null,s=o;;){var f=s.lane,p=s.eventTime;if((n&f)===f){null!==c&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});t:{var A=t,d=s;switch(f=e,p=r,d.tag){case 1:if("function"===typeof(A=d.payload)){h=A.call(p,h,f);break t}h=A;break t;case 3:A.flags=-65537&A.flags|128;case 0:if(null===(f="function"===typeof(A=d.payload)?A.call(p,h,f):A)||void 0===f)break t;h=U({},h,f);break t;case 2:eo=!0}}null!==s.callback&&0!==s.lane&&(t.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else p={eventTime:p,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=p,l=h):c=c.next=p,a|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(e=i.shared.interleaved)){i=e;do{a|=i.lane,i=i.next}while(i!==e)}else null===o&&(i.shared.lanes=0);Ml|=a,t.lanes=a,t.memoizedState=h}}function uo(t,e,r){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!==typeof i)throw Error(o(191,i));i.call(n)}}}var co=(new n.Component).refs;function ho(t,e,r,n){r=null===(r=r(n,e=t.memoizedState))||void 0===r?e:U({},e,r),t.memoizedState=r,0===t.lanes&&(t.updateQueue.baseState=r)}var fo={isMounted:function(t){return!!(t=t._reactInternals)&&Qt(t)===t},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Jl(),i=Zl(t),o=io(n,i);o.payload=e,void 0!==r&&null!==r&&(o.callback=r),oo(t,o),null!==(e=$l(t,i,n))&&ao(e,t,i)},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Jl(),i=Zl(t),o=io(n,i);o.tag=1,o.payload=e,void 0!==r&&null!==r&&(o.callback=r),oo(t,o),null!==(e=$l(t,i,n))&&ao(e,t,i)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Jl(),n=Zl(t),i=io(r,n);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),oo(t,i),null!==(e=$l(t,n,r))&&ao(e,t,n)}};function po(t,e,r,n,i,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(n,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!ln(r,n)||!ln(i,o))}function Ao(t,e,r){var n=!1,i=Si,o=e.contextType;return"object"===typeof o&&null!==o?o=$i(o):(i=Ii(e)?Ni:ki.current,o=(n=null!==(n=e.contextTypes)&&void 0!==n)?Li(t,i):Si),e=new e(r,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=fo,t.stateNode=e,e._reactInternals=t,n&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function go(t,e,r,n){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(r,n),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&fo.enqueueReplaceState(e,e.state,null)}function yo(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=co,ro(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=$i(o):(o=Ii(e)?Ni:ki.current,i.context=Li(t,o)),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(ho(t,e,o,r),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&fo.enqueueReplaceState(i,i.state,null),lo(t,r,i,n),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308)}var vo=[],mo=0,bo=null,_o=0,wo=[],xo=0,Eo=null,Bo=1,Co="";function So(t,e){vo[mo++]=_o,vo[mo++]=bo,bo=t,_o=e}function ko(t,e,r){wo[xo++]=Bo,wo[xo++]=Co,wo[xo++]=Eo,Eo=t;var n=Bo;t=Co;var i=32-ae(n)-1;n&=~(1<<i),r+=1;var o=32-ae(e)+i;if(30<o){var a=i-i%5;o=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Bo=1<<32-ae(e)+i|r<<i|n,Co=o+t}else Bo=1<<o|r<<i|n,Co=t}function To(t){null!==t.return&&(So(t,1),ko(t,1,0))}function No(t){for(;t===bo;)bo=vo[--mo],vo[mo]=null,_o=vo[--mo],vo[mo]=null;for(;t===Eo;)Eo=wo[--xo],wo[xo]=null,Co=wo[--xo],wo[xo]=null,Bo=wo[--xo],wo[xo]=null}var Lo=null,Io=null,Mo=!1,Oo=null;function Po(t,e){var r=Nu(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,null===(e=t.deletions)?(t.deletions=[r],t.flags|=16):e.push(r)}function Fo(t,e){switch(t.tag){case 5:var r=t.type;return null!==(e=1!==e.nodeType||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,Lo=t,Io=ui(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,Lo=t,Io=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(r=null!==Eo?{id:Bo,overflow:Co}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},(r=Nu(18,null,null,0)).stateNode=e,r.return=t,t.child=r,Lo=t,Io=null,!0);default:return!1}}function Uo(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function Ro(t){if(Mo){var e=Io;if(e){var r=e;if(!Fo(t,e)){if(Uo(t))throw Error(o(418));e=ui(r.nextSibling);var n=Lo;e&&Fo(t,e)?Po(n,r):(t.flags=-4097&t.flags|2,Mo=!1,Lo=t)}}else{if(Uo(t))throw Error(o(418));t.flags=-4097&t.flags|2,Mo=!1,Lo=t}}}function Do(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Lo=t}function jo(t){if(t!==Lo)return!1;if(!Mo)return Do(t),Mo=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ri(t.type,t.memoizedProps)),e&&(e=Io)){if(Uo(t)){for(t=Io;t;)t=ui(t.nextSibling);throw Error(o(418))}for(;e;)Po(t,e),e=ui(e.nextSibling)}if(Do(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var r=t.data;if("/$"===r){if(0===e){Io=ui(t.nextSibling);break t}e--}else"$"!==r&&"$!"!==r&&"$?"!==r||e++}t=t.nextSibling}Io=null}}else Io=Lo?ui(t.stateNode.nextSibling):null;return!0}function Ho(){Io=Lo=null,Mo=!1}function Qo(t){null===Oo?Oo=[t]:Oo.push(t)}function zo(t,e,r){if(null!==(t=r.ref)&&"function"!==typeof t&&"object"!==typeof t){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(o(309));var n=r.stateNode}if(!n)throw Error(o(147,t));var i=n,a=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===a?e.ref:(e=function(t){var e=i.refs;e===co&&(e=i.refs={}),null===t?delete e[a]:e[a]=t},e._stringRef=a,e)}if("string"!==typeof t)throw Error(o(284));if(!r._owner)throw Error(o(290,t))}return t}function Vo(t,e){throw t=Object.prototype.toString.call(e),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Go(t){return(0,t._init)(t._payload)}function qo(t){function e(e,r){if(t){var n=e.deletions;null===n?(e.deletions=[r],e.flags|=16):n.push(r)}}function r(r,n){if(!t)return null;for(;null!==n;)e(r,n),n=n.sibling;return null}function n(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Iu(t,e)).index=0,t.sibling=null,t}function a(e,r,n){return e.index=n,t?null!==(n=e.alternate)?(n=n.index)<r?(e.flags|=2,r):n:(e.flags|=2,r):(e.flags|=1048576,r)}function s(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,r,n){return null===e||6!==e.tag?((e=Fu(r,t.mode,n)).return=t,e):((e=i(e,r)).return=t,e)}function u(t,e,r,n){var o=r.type;return o===x?h(t,e,r.props.children,n,r.key):null!==e&&(e.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===I&&Go(o)===e.type)?((n=i(e,r.props)).ref=zo(t,e,r),n.return=t,n):((n=Mu(r.type,r.key,r.props,null,t.mode,n)).ref=zo(t,e,r),n.return=t,n)}function c(t,e,r,n){return null===e||4!==e.tag||e.stateNode.containerInfo!==r.containerInfo||e.stateNode.implementation!==r.implementation?((e=Uu(r,t.mode,n)).return=t,e):((e=i(e,r.children||[])).return=t,e)}function h(t,e,r,n,o){return null===e||7!==e.tag?((e=Ou(r,t.mode,n,o)).return=t,e):((e=i(e,r)).return=t,e)}function f(t,e,r){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Fu(""+e,t.mode,r)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case _:return(r=Mu(e.type,e.key,e.props,null,t.mode,r)).ref=zo(t,null,e),r.return=t,r;case w:return(e=Uu(e,t.mode,r)).return=t,e;case I:return f(t,(0,e._init)(e._payload),r)}if(et(e)||P(e))return(e=Ou(e,t.mode,r,null)).return=t,e;Vo(t,e)}return null}function p(t,e,r,n){var i=null!==e?e.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==i?null:l(t,e,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return r.key===i?u(t,e,r,n):null;case w:return r.key===i?c(t,e,r,n):null;case I:return p(t,e,(i=r._init)(r._payload),n)}if(et(r)||P(r))return null!==i?null:h(t,e,r,n,null);Vo(t,r)}return null}function A(t,e,r,n,i){if("string"===typeof n&&""!==n||"number"===typeof n)return l(e,t=t.get(r)||null,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return u(e,t=t.get(null===n.key?r:n.key)||null,n,i);case w:return c(e,t=t.get(null===n.key?r:n.key)||null,n,i);case I:return A(t,e,r,(0,n._init)(n._payload),i)}if(et(n)||P(n))return h(e,t=t.get(r)||null,n,i,null);Vo(e,n)}return null}function d(i,o,s,l){for(var u=null,c=null,h=o,d=o=0,g=null;null!==h&&d<s.length;d++){h.index>d?(g=h,h=null):g=h.sibling;var y=p(i,h,s[d],l);if(null===y){null===h&&(h=g);break}t&&h&&null===y.alternate&&e(i,h),o=a(y,o,d),null===c?u=y:c.sibling=y,c=y,h=g}if(d===s.length)return r(i,h),Mo&&So(i,d),u;if(null===h){for(;d<s.length;d++)null!==(h=f(i,s[d],l))&&(o=a(h,o,d),null===c?u=h:c.sibling=h,c=h);return Mo&&So(i,d),u}for(h=n(i,h);d<s.length;d++)null!==(g=A(h,i,d,s[d],l))&&(t&&null!==g.alternate&&h.delete(null===g.key?d:g.key),o=a(g,o,d),null===c?u=g:c.sibling=g,c=g);return t&&h.forEach((function(t){return e(i,t)})),Mo&&So(i,d),u}function g(i,s,l,u){var c=P(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,d=s,g=s=0,y=null,v=l.next();null!==d&&!v.done;g++,v=l.next()){d.index>g?(y=d,d=null):y=d.sibling;var m=p(i,d,v.value,u);if(null===m){null===d&&(d=y);break}t&&d&&null===m.alternate&&e(i,d),s=a(m,s,g),null===h?c=m:h.sibling=m,h=m,d=y}if(v.done)return r(i,d),Mo&&So(i,g),c;if(null===d){for(;!v.done;g++,v=l.next())null!==(v=f(i,v.value,u))&&(s=a(v,s,g),null===h?c=v:h.sibling=v,h=v);return Mo&&So(i,g),c}for(d=n(i,d);!v.done;g++,v=l.next())null!==(v=A(d,i,g,v.value,u))&&(t&&null!==v.alternate&&d.delete(null===v.key?g:v.key),s=a(v,s,g),null===h?c=v:h.sibling=v,h=v);return t&&d.forEach((function(t){return e(i,t)})),Mo&&So(i,g),c}return function t(n,o,a,l){if("object"===typeof a&&null!==a&&a.type===x&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case _:t:{for(var u=a.key,c=o;null!==c;){if(c.key===u){if((u=a.type)===x){if(7===c.tag){r(n,c.sibling),(o=i(c,a.props.children)).return=n,n=o;break t}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===I&&Go(u)===c.type){r(n,c.sibling),(o=i(c,a.props)).ref=zo(n,c,a),o.return=n,n=o;break t}r(n,c);break}e(n,c),c=c.sibling}a.type===x?((o=Ou(a.props.children,n.mode,l,a.key)).return=n,n=o):((l=Mu(a.type,a.key,a.props,null,n.mode,l)).ref=zo(n,o,a),l.return=n,n=l)}return s(n);case w:t:{for(c=a.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){r(n,o.sibling),(o=i(o,a.children||[])).return=n,n=o;break t}r(n,o);break}e(n,o),o=o.sibling}(o=Uu(a,n.mode,l)).return=n,n=o}return s(n);case I:return t(n,o,(c=a._init)(a._payload),l)}if(et(a))return d(n,o,a,l);if(P(a))return g(n,o,a,l);Vo(n,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(r(n,o.sibling),(o=i(o,a)).return=n,n=o):(r(n,o),(o=Fu(a,n.mode,l)).return=n,n=o),s(n)):r(n,o)}}var Ko=qo(!0),Yo=qo(!1),Wo={},Xo=Ei(Wo),Jo=Ei(Wo),Zo=Ei(Wo);function $o(t){if(t===Wo)throw Error(o(174));return t}function ta(t,e){switch(Ci(Zo,e),Ci(Jo,t),Ci(Xo,Wo),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Bi(Xo),Ci(Xo,e)}function ea(){Bi(Xo),Bi(Jo),Bi(Zo)}function ra(t){$o(Zo.current);var e=$o(Xo.current),r=lt(e,t.type);e!==r&&(Ci(Jo,t),Ci(Xo,r))}function na(t){Jo.current===t&&(Bi(Xo),Bi(Jo))}var ia=Ei(0);function oa(t){for(var e=t;null!==e;){if(13===e.tag){var r=e.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var aa=[];function sa(){for(var t=0;t<aa.length;t++)aa[t]._workInProgressVersionPrimary=null;aa.length=0}var la=b.ReactCurrentDispatcher,ua=b.ReactCurrentBatchConfig,ca=0,ha=null,fa=null,pa=null,Aa=!1,da=!1,ga=0,ya=0;function va(){throw Error(o(321))}function ma(t,e){if(null===e)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!sn(t[r],e[r]))return!1;return!0}function ba(t,e,r,n,i,a){if(ca=a,ha=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,la.current=null===t||null===t.memoizedState?ns:is,t=r(n,i),da){a=0;do{if(da=!1,ga=0,25<=a)throw Error(o(301));a+=1,pa=fa=null,e.updateQueue=null,la.current=os,t=r(n,i)}while(da)}if(la.current=rs,e=null!==fa&&null!==fa.next,ca=0,pa=fa=ha=null,Aa=!1,e)throw Error(o(300));return t}function _a(){var t=0!==ga;return ga=0,t}function wa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===pa?ha.memoizedState=pa=t:pa=pa.next=t,pa}function xa(){if(null===fa){var t=ha.alternate;t=null!==t?t.memoizedState:null}else t=fa.next;var e=null===pa?ha.memoizedState:pa.next;if(null!==e)pa=e,fa=t;else{if(null===t)throw Error(o(310));t={memoizedState:(fa=t).memoizedState,baseState:fa.baseState,baseQueue:fa.baseQueue,queue:fa.queue,next:null},null===pa?ha.memoizedState=pa=t:pa=pa.next=t}return pa}function Ea(t,e){return"function"===typeof e?e(t):e}function Ba(t){var e=xa(),r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=t;var n=fa,i=n.baseQueue,a=r.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(null!==i){a=i.next,n=n.baseState;var l=s=null,u=null,c=a;do{var h=c.lane;if((ca&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=f,s=n):u=u.next=f,ha.lanes|=h,Ml|=h}c=c.next}while(null!==c&&c!==a);null===u?s=n:u.next=l,sn(n,e.memoizedState)||(_s=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=u,r.lastRenderedState=n}if(null!==(t=r.interleaved)){i=t;do{a=i.lane,ha.lanes|=a,Ml|=a,i=i.next}while(i!==t)}else null===i&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Ca(t){var e=xa(),r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(null!==i){r.pending=null;var s=i=i.next;do{a=t(a,s.action),s=s.next}while(s!==i);sn(a,e.memoizedState)||(_s=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function Sa(){}function ka(t,e){var r=ha,n=xa(),i=e(),a=!sn(n.memoizedState,i);if(a&&(n.memoizedState=i,_s=!0),n=n.queue,Da(La.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||null!==pa&&1&pa.memoizedState.tag){if(r.flags|=2048,Oa(9,Na.bind(null,r,n,i,e),void 0,null),null===Cl)throw Error(o(349));0!==(30&ca)||Ta(r,e,i)}return i}function Ta(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},null===(e=ha.updateQueue)?(e={lastEffect:null,stores:null},ha.updateQueue=e,e.stores=[t]):null===(r=e.stores)?e.stores=[t]:r.push(t)}function Na(t,e,r,n){e.value=r,e.getSnapshot=n,Ia(e)&&$l(t,1,-1)}function La(t,e,r){return r((function(){Ia(e)&&$l(t,1,-1)}))}function Ia(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!sn(t,r)}catch(n){return!0}}function Ma(t){var e=wa();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:t},e.queue=t,t=t.dispatch=Ja.bind(null,ha,t),[e.memoizedState,t]}function Oa(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},null===(e=ha.updateQueue)?(e={lastEffect:null,stores:null},ha.updateQueue=e,e.lastEffect=t.next=t):null===(r=e.lastEffect)?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t),t}function Pa(){return xa().memoizedState}function Fa(t,e,r,n){var i=wa();ha.flags|=t,i.memoizedState=Oa(1|e,r,void 0,void 0===n?null:n)}function Ua(t,e,r,n){var i=xa();n=void 0===n?null:n;var o=void 0;if(null!==fa){var a=fa.memoizedState;if(o=a.destroy,null!==n&&ma(n,a.deps))return void(i.memoizedState=Oa(e,r,o,n))}ha.flags|=t,i.memoizedState=Oa(1|e,r,o,n)}function Ra(t,e){return Fa(8390656,8,t,e)}function Da(t,e){return Ua(2048,8,t,e)}function ja(t,e){return Ua(4,2,t,e)}function Ha(t,e){return Ua(4,4,t,e)}function Qa(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function za(t,e,r){return r=null!==r&&void 0!==r?r.concat([t]):null,Ua(4,4,Qa.bind(null,e,t),r)}function Va(){}function Ga(t,e){var r=xa();e=void 0===e?null:e;var n=r.memoizedState;return null!==n&&null!==e&&ma(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function qa(t,e){var r=xa();e=void 0===e?null:e;var n=r.memoizedState;return null!==n&&null!==e&&ma(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Ka(t,e,r){return 0===(21&ca)?(t.baseState&&(t.baseState=!1,_s=!0),t.memoizedState=r):(sn(r,e)||(r=de(),ha.lanes|=r,Ml|=r,t.baseState=!0),e)}function Ya(t,e){var r=me;me=0!==r&&4>r?r:4,t(!0);var n=ua.transition;ua.transition={};try{t(!1),e()}finally{me=r,ua.transition=n}}function Wa(){return xa().memoizedState}function Xa(t,e,r){var n=Zl(t);r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Za(t)?$a(e,r):(ts(t,e,r),null!==(t=$l(t,n,r=Jl()))&&es(t,e,n))}function Ja(t,e,r){var n=Zl(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Za(t))$a(e,i);else{ts(t,e,i);var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,r);if(i.hasEagerState=!0,i.eagerState=s,sn(s,a))return}catch(l){}null!==(t=$l(t,n,r=Jl()))&&es(t,e,n)}}function Za(t){var e=t.alternate;return t===ha||null!==e&&e===ha}function $a(t,e){da=Aa=!0;var r=t.pending;null===r?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function ts(t,e,r){eu(t)?(null===(t=e.interleaved)?(r.next=r,null===to?to=[e]:to.push(e)):(r.next=t.next,t.next=r),e.interleaved=r):(null===(t=e.pending)?r.next=r:(r.next=t.next,t.next=r),e.pending=r)}function es(t,e,r){if(0!==(4194240&r)){var n=e.lanes;r|=n&=t.pendingLanes,e.lanes=r,ve(t,r)}}var rs={readContext:$i,useCallback:va,useContext:va,useEffect:va,useImperativeHandle:va,useInsertionEffect:va,useLayoutEffect:va,useMemo:va,useReducer:va,useRef:va,useState:va,useDebugValue:va,useDeferredValue:va,useTransition:va,useMutableSource:va,useSyncExternalStore:va,useId:va,unstable_isNewReconciler:!1},ns={readContext:$i,useCallback:function(t,e){return wa().memoizedState=[t,void 0===e?null:e],t},useContext:$i,useEffect:Ra,useImperativeHandle:function(t,e,r){return r=null!==r&&void 0!==r?r.concat([t]):null,Fa(4194308,4,Qa.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Fa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fa(4,2,t,e)},useMemo:function(t,e){var r=wa();return e=void 0===e?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=wa();return e=void 0!==r?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Xa.bind(null,ha,t),[n.memoizedState,t]},useRef:function(t){return t={current:t},wa().memoizedState=t},useState:Ma,useDebugValue:Va,useDeferredValue:function(t){return wa().memoizedState=t},useTransition:function(){var t=Ma(!1),e=t[0];return t=Ya.bind(null,t[1]),wa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ha,i=wa();if(Mo){if(void 0===r)throw Error(o(407));r=r()}else{if(r=e(),null===Cl)throw Error(o(349));0!==(30&ca)||Ta(n,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,Ra(La.bind(null,n,a,t),[t]),n.flags|=2048,Oa(9,Na.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=wa(),e=Cl.identifierPrefix;if(Mo){var r=Co;e=":"+e+"R"+(r=(Bo&~(1<<32-ae(Bo)-1)).toString(32)+r),0<(r=ga++)&&(e+="H"+r.toString(32)),e+=":"}else e=":"+e+"r"+(r=ya++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},is={readContext:$i,useCallback:Ga,useContext:$i,useEffect:Da,useImperativeHandle:za,useInsertionEffect:ja,useLayoutEffect:Ha,useMemo:qa,useReducer:Ba,useRef:Pa,useState:function(){return Ba(Ea)},useDebugValue:Va,useDeferredValue:function(t){return Ka(xa(),fa.memoizedState,t)},useTransition:function(){return[Ba(Ea)[0],xa().memoizedState]},useMutableSource:Sa,useSyncExternalStore:ka,useId:Wa,unstable_isNewReconciler:!1},os={readContext:$i,useCallback:Ga,useContext:$i,useEffect:Da,useImperativeHandle:za,useInsertionEffect:ja,useLayoutEffect:Ha,useMemo:qa,useReducer:Ca,useRef:Pa,useState:function(){return Ca(Ea)},useDebugValue:Va,useDeferredValue:function(t){var e=xa();return null===fa?e.memoizedState=t:Ka(e,fa.memoizedState,t)},useTransition:function(){return[Ca(Ea)[0],xa().memoizedState]},useMutableSource:Sa,useSyncExternalStore:ka,useId:Wa,unstable_isNewReconciler:!1};function as(t,e){try{var r="",n=e;do{r+=H(n),n=n.return}while(n);var i=r}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i}}function ss(t,e){try{console.error(e.value)}catch(r){setTimeout((function(){throw r}))}}var ls,us,cs,hs="function"===typeof WeakMap?WeakMap:Map;function fs(t,e,r){(r=io(-1,r)).tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Hl||(Hl=!0,Ql=n),ss(0,e)},r}function ps(t,e,r){(r=io(-1,r)).tag=3;var n=t.type.getDerivedStateFromError;if("function"===typeof n){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){ss(0,e)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(r.callback=function(){ss(0,e),"function"!==typeof n&&(null===zl?zl=new Set([this]):zl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),r}function As(t,e,r){var n=t.pingCache;if(null===n){n=t.pingCache=new hs;var i=new Set;n.set(e,i)}else void 0===(i=n.get(e))&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=Eu.bind(null,t,e,r),e.then(t,t))}function ds(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function gs(t,e,r,n,i){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((e=io(-1,1)).tag=2,oo(r,e))),r.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}function ys(t,e){if(!Mo)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;null!==e;)null!==e.alternate&&(r=e),e=e.sibling;null===r?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?e||null===t.tail?t.tail=null:t.tail.sibling=null:n.sibling=null}}function vs(t){var e=null!==t.alternate&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;null!==i;)r|=i.lanes|i.childLanes,n|=14680064&i.subtreeFlags,n|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function ms(t,e,r){var n=e.pendingProps;switch(No(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vs(e),null;case 1:case 17:return Ii(e.type)&&Mi(),vs(e),null;case 3:return n=e.stateNode,ea(),Bi(Ti),Bi(ki),sa(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||(jo(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==Oo&&(ou(Oo),Oo=null))),vs(e),null;case 5:na(e);var i=$o(Zo.current);if(r=e.type,null!==t&&null!=e.stateNode)us(t,e,r,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(null===e.stateNode)throw Error(o(166));return vs(e),null}if(t=$o(Xo.current),jo(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[fi]=e,n[pi]=a,t=0!==(1&e.mode),r){case"dialog":Dn("cancel",n),Dn("close",n);break;case"iframe":case"object":case"embed":Dn("load",n);break;case"video":case"audio":for(i=0;i<Pn.length;i++)Dn(Pn[i],n);break;case"source":Dn("error",n);break;case"img":case"image":case"link":Dn("error",n),Dn("load",n);break;case"details":Dn("toggle",n);break;case"input":X(n,a),Dn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Dn("invalid",n);break;case"textarea":it(n,a),Dn("invalid",n)}for(var l in vt(r,a),i=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?n.textContent!==u&&(!0!==a.suppressHydrationWarning&&Zn(n.textContent,u,t),i=["children",u]):"number"===typeof u&&n.textContent!==""+u&&(!0!==a.suppressHydrationWarning&&Zn(n.textContent,u,t),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Dn("scroll",n)}switch(r){case"input":q(n),$(n,a,!0);break;case"textarea":q(n),at(n);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(n.onclick=$n)}n=i,e.updateQueue=n,null!==n&&(e.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=st(r)),"http://www.w3.org/1999/xhtml"===t?"script"===r?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof n.is?t=l.createElement(r,{is:n.is}):(t=l.createElement(r),"select"===r&&(l=t,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):t=l.createElementNS(t,r),t[fi]=e,t[pi]=n,ls(t,e),e.stateNode=t;t:{switch(l=mt(r,n),r){case"dialog":Dn("cancel",t),Dn("close",t),i=n;break;case"iframe":case"object":case"embed":Dn("load",t),i=n;break;case"video":case"audio":for(i=0;i<Pn.length;i++)Dn(Pn[i],t);i=n;break;case"source":Dn("error",t),i=n;break;case"img":case"image":case"link":Dn("error",t),Dn("load",t),i=n;break;case"details":Dn("toggle",t),i=n;break;case"input":X(t,n),i=W(t,n),Dn("invalid",t);break;case"option":default:i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=U({},n,{value:void 0}),Dn("invalid",t);break;case"textarea":it(t,n),i=nt(t,n),Dn("invalid",t)}for(a in vt(r,i),u=i)if(u.hasOwnProperty(a)){var c=u[a];"style"===a?gt(t,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&ht(t,c):"children"===a?"string"===typeof c?("textarea"!==r||""!==c)&&ft(t,c):"number"===typeof c&&ft(t,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Dn("scroll",t):null!=c&&m(t,a,c,l))}switch(r){case"input":q(t),$(t,n,!1);break;case"textarea":q(t),at(t);break;case"option":null!=n.value&&t.setAttribute("value",""+V(n.value));break;case"select":t.multiple=!!n.multiple,null!=(a=n.value)?rt(t,!!n.multiple,a,!1):null!=n.defaultValue&&rt(t,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof i.onClick&&(t.onclick=$n)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break t;case"img":n=!0;break t;default:n=!1}}n&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return vs(e),null;case 6:if(t&&null!=e.stateNode)cs(0,e,t.memoizedProps,n);else{if("string"!==typeof n&&null===e.stateNode)throw Error(o(166));if(r=$o(Zo.current),$o(Xo.current),jo(e)){if(n=e.stateNode,r=e.memoizedProps,n[fi]=e,(a=n.nodeValue!==r)&&null!==(t=Lo))switch(t.tag){case 3:Zn(n.nodeValue,r,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Zn(n.nodeValue,r,0!==(1&t.mode))}a&&(e.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[fi]=e,e.stateNode=n}return vs(e),null;case 13:if(Bi(ia),n=e.memoizedState,Mo&&null!==Io&&0!==(1&e.mode)&&0===(128&e.flags)){for(n=Io;n;)n=ui(n.nextSibling);return Ho(),e.flags|=98560,e}if(null!==n&&null!==n.dehydrated){if(n=jo(e),null===t){if(!n)throw Error(o(318));if(!(n=null!==(n=e.memoizedState)?n.dehydrated:null))throw Error(o(317));n[fi]=e}else Ho(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;return vs(e),null}return null!==Oo&&(ou(Oo),Oo=null),0!==(128&e.flags)?(e.lanes=r,e):(n=null!==n,r=!1,null===t?jo(e):r=null!==t.memoizedState,n!==r&&n&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&ia.current)?0===Ll&&(Ll=3):Au())),null!==e.updateQueue&&(e.flags|=4),vs(e),null);case 4:return ea(),null===t&&Qn(e.stateNode.containerInfo),vs(e),null;case 10:return Xi(e.type._context),vs(e),null;case 19:if(Bi(ia),null===(a=e.memoizedState))return vs(e),null;if(n=0!==(128&e.flags),null===(l=a.rendering))if(n)ys(a,!1);else{if(0!==Ll||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=oa(t))){for(e.flags|=128,ys(a,!1),null!==(n=l.updateQueue)&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;null!==r;)t=n,(a=r).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ci(ia,1&ia.current|2),e.child}t=t.sibling}null!==a.tail&&Jt()>Dl&&(e.flags|=128,n=!0,ys(a,!1),e.lanes=4194304)}else{if(!n)if(null!==(t=oa(l))){if(e.flags|=128,n=!0,null!==(r=t.updateQueue)&&(e.updateQueue=r,e.flags|=4),ys(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!Mo)return vs(e),null}else 2*Jt()-a.renderingStartTime>Dl&&1073741824!==r&&(e.flags|=128,n=!0,ys(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(null!==(r=a.last)?r.sibling=l:e.child=l,a.last=l)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Jt(),e.sibling=null,r=ia.current,Ci(ia,n?1&r|2:1&r),e):(vs(e),null);case 22:case 23:return cu(),n=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==n&&(e.flags|=8192),n&&0!==(1&e.mode)?0!==(1073741824&Tl)&&(vs(e),6&e.subtreeFlags&&(e.flags|=8192)):vs(e),null;case 24:case 25:return null}throw Error(o(156,e.tag))}ls=function(t,e){for(var r=e.child;null!==r;){if(5===r.tag||6===r.tag)t.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},us=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,$o(Xo.current);var o,a=null;switch(r){case"input":i=W(t,i),n=W(t,n),a=[];break;case"select":i=U({},i,{value:void 0}),n=U({},n,{value:void 0}),a=[];break;case"textarea":i=nt(t,i),n=nt(t,n),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof n.onClick&&(t.onclick=$n)}for(c in vt(r,n),r=null,i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in n){var u=n[c];if(l=null!=i?i[c]:void 0,n.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(a||(a=[]),a.push(c,r)),r=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Dn("scroll",t),a||l===u||(a=[])):(a=a||[]).push(c,u))}r&&(a=a||[]).push("style",r);var c=a;(e.updateQueue=c)&&(e.flags|=4)}},cs=function(t,e,r,n){r!==n&&(e.flags|=4)};var bs=b.ReactCurrentOwner,_s=!1;function ws(t,e,r,n){e.child=null===t?Yo(e,null,r,n):Ko(e,t.child,r,n)}function xs(t,e,r,n,i){r=r.render;var o=e.ref;return Zi(e,i),n=ba(t,e,r,n,o,i),r=_a(),null===t||_s?(Mo&&r&&To(e),e.flags|=1,ws(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vs(t,e,i))}function Es(t,e,r,n,i){if(null===t){var o=r.type;return"function"!==typeof o||Lu(o)||void 0!==o.defaultProps||null!==r.compare||void 0!==r.defaultProps?((t=Mu(r.type,null,n,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Bs(t,e,o,n,i))}if(o=t.child,0===(t.lanes&i)){var a=o.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(a,n)&&t.ref===e.ref)return Vs(t,e,i)}return e.flags|=1,(t=Iu(o,n)).ref=e.ref,t.return=e,e.child=t}function Bs(t,e,r,n,i){if(null!==t){var o=t.memoizedProps;if(ln(o,n)&&t.ref===e.ref){if(_s=!1,e.pendingProps=n=o,0===(t.lanes&i))return e.lanes=t.lanes,Vs(t,e,i);0!==(131072&t.flags)&&(_s=!0)}}return ks(t,e,r,n,i)}function Cs(t,e,r){var n=e.pendingProps,i=n.children,o=null!==t?t.memoizedState:null;if("hidden"===n.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Nl,Tl),Tl|=r;else{if(0===(1073741824&r))return t=null!==o?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ci(Nl,Tl),Tl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==o?o.baseLanes:r,Ci(Nl,Tl),Tl|=n}else null!==o?(n=o.baseLanes|r,e.memoizedState=null):n=r,Ci(Nl,Tl),Tl|=n;return ws(t,e,i,r),e.child}function Ss(t,e){var r=e.ref;(null===t&&null!==r||null!==t&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function ks(t,e,r,n,i){var o=Ii(r)?Ni:ki.current;return o=Li(e,o),Zi(e,i),r=ba(t,e,r,n,o,i),n=_a(),null===t||_s?(Mo&&n&&To(e),e.flags|=1,ws(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vs(t,e,i))}function Ts(t,e,r,n,i){if(Ii(r)){var o=!0;Fi(e)}else o=!1;if(Zi(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),Ao(e,r,n),yo(e,r,n,i),n=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,u=r.contextType;"object"===typeof u&&null!==u?u=$i(u):u=Li(e,u=Ii(r)?Ni:ki.current);var c=r.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==n||l!==u)&&go(e,a,n,u),eo=!1;var f=e.memoizedState;a.state=f,lo(e,n,a,i),l=e.memoizedState,s!==n||f!==l||Ti.current||eo?("function"===typeof c&&(ho(e,r,c,n),l=e.memoizedState),(s=eo||po(e,r,s,n,f,l,u))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4194308)):("function"===typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=u,n=s):("function"===typeof a.componentDidMount&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,no(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:Vi(e.type,s),a.props=u,h=e.pendingProps,f=a.context,"object"===typeof(l=r.contextType)&&null!==l?l=$i(l):l=Li(e,l=Ii(r)?Ni:ki.current);var p=r.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||f!==l)&&go(e,a,n,l),eo=!1,f=e.memoizedState,a.state=f,lo(e,n,a,i);var A=e.memoizedState;s!==h||f!==A||Ti.current||eo?("function"===typeof p&&(ho(e,r,p,n),A=e.memoizedState),(u=eo||po(e,r,u,n,f,A,l)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(n,A,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,A,l)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=A),a.props=n,a.state=A,a.context=l,n=u):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Ns(t,e,r,n,o,i)}function Ns(t,e,r,n,i,o){Ss(t,e);var a=0!==(128&e.flags);if(!n&&!a)return i&&Ui(e,r,!1),Vs(t,e,o);n=e.stateNode,bs.current=e;var s=a&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return e.flags|=1,null!==t&&a?(e.child=Ko(e,t.child,null,o),e.child=Ko(e,null,s,o)):ws(t,e,s,o),e.memoizedState=n.state,i&&Ui(e,r,!0),e.child}function Ls(t){var e=t.stateNode;e.pendingContext?Oi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Oi(0,e.context,!1),ta(t,e.containerInfo)}function Is(t,e,r,n,i){return Ho(),Qo(i),e.flags|=256,ws(t,e,r,n),e.child}var Ms={dehydrated:null,treeContext:null,retryLane:0};function Os(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ps(t,e){return{baseLanes:t.baseLanes|e,cachePool:null,transitions:t.transitions}}function Fs(t,e,r){var n,i=e.pendingProps,a=ia.current,s=!1,l=0!==(128&e.flags);if((n=l)||(n=(null===t||null!==t.memoizedState)&&0!==(2&a)),n?(s=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(a|=1),Ci(ia,1&a),null===t)return Ro(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(a=i.children,t=i.fallback,s?(i=e.mode,s=e.child,a={mode:"hidden",children:a},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=a):s=Pu(a,i,0,null),t=Ou(t,i,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Os(r),e.memoizedState=Ms,t):Us(e,a));if(null!==(a=t.memoizedState)){if(null!==(n=a.dehydrated)){if(l)return 256&e.flags?(e.flags&=-257,js(t,e,r,Error(o(422)))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(s=i.fallback,a=e.mode,i=Pu({mode:"visible",children:i.children},a,0,null),(s=Ou(s,a,r,null)).flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,0!==(1&e.mode)&&Ko(e,t.child,null,r),e.child.memoizedState=Os(r),e.memoizedState=Ms,s);if(0===(1&e.mode))e=js(t,e,r,null);else if("$!"===n.data)e=js(t,e,r,Error(o(419)));else if(i=0!==(r&t.childLanes),_s||i){if(null!==(i=Cl)){switch(r&-r){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(i=0!==(s&(i.suspendedLanes|r))?0:s)&&i!==a.retryLane&&(a.retryLane=i,$l(t,i,-1))}Au(),e=js(t,e,r,Error(o(421)))}else"$?"===n.data?(e.flags|=128,e.child=t.child,e=Cu.bind(null,t),n._reactRetry=e,e=null):(r=a.treeContext,Io=ui(n.nextSibling),Lo=e,Mo=!0,Oo=null,null!==r&&(wo[xo++]=Bo,wo[xo++]=Co,wo[xo++]=Eo,Bo=r.id,Co=r.overflow,Eo=e),(e=Us(e,e.pendingProps.children)).flags|=4096);return e}return s?(i=Ds(t,e,i.children,i.fallback,r),s=e.child,a=t.child.memoizedState,s.memoizedState=null===a?Os(r):Ps(a,r),s.childLanes=t.childLanes&~r,e.memoizedState=Ms,i):(r=Rs(t,e,i.children,r),e.memoizedState=null,r)}return s?(i=Ds(t,e,i.children,i.fallback,r),s=e.child,a=t.child.memoizedState,s.memoizedState=null===a?Os(r):Ps(a,r),s.childLanes=t.childLanes&~r,e.memoizedState=Ms,i):(r=Rs(t,e,i.children,r),e.memoizedState=null,r)}function Us(t,e){return(e=Pu({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Rs(t,e,r,n){var i=t.child;return t=i.sibling,r=Iu(i,{mode:"visible",children:r}),0===(1&e.mode)&&(r.lanes=n),r.return=e,r.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r}function Ds(t,e,r,n,i){var o=e.mode,a=(t=t.child).sibling,s={mode:"hidden",children:r};return 0===(1&o)&&e.child!==t?((r=e.child).childLanes=0,r.pendingProps=s,e.deletions=null):(r=Iu(t,s)).subtreeFlags=14680064&t.subtreeFlags,null!==a?n=Iu(a,n):(n=Ou(n,o,i,null)).flags|=2,n.return=e,r.return=e,r.sibling=n,e.child=r,n}function js(t,e,r,n){return null!==n&&Qo(n),Ko(e,t.child,null,r),(t=Us(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Hs(t,e,r){t.lanes|=e;var n=t.alternate;null!==n&&(n.lanes|=e),Ji(t.return,e,r)}function Qs(t,e,r,n,i){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function zs(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(ws(t,e,n.children,r),0!==(2&(n=ia.current)))n=1&n|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Hs(t,r,e);else if(19===t.tag)Hs(t,r,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ci(ia,n),0===(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;null!==r;)null!==(t=r.alternate)&&null===oa(t)&&(i=r),r=r.sibling;null===(r=i)?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Qs(e,!1,i,r,o);break;case"backwards":for(r=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===oa(t)){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Qs(e,!0,r,null,o);break;case"together":Qs(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vs(t,e,r){if(null!==t&&(e.dependencies=t.dependencies),Ml|=e.lanes,0===(r&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(r=Iu(t=e.child,t.pendingProps),e.child=r,r.return=e;null!==t.sibling;)t=t.sibling,(r=r.sibling=Iu(t,t.pendingProps)).return=e;r.sibling=null}return e.child}function Gs(t,e){switch(No(e),e.tag){case 1:return Ii(e.type)&&Mi(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return ea(),Bi(Ti),Bi(ki),sa(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return na(e),null;case 13:if(Bi(ia),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(o(340));Ho()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Bi(ia),null;case 4:return ea(),null;case 10:return Xi(e.type._context),null;case 22:case 23:return cu(),null;default:return null}}var qs=!1,Ks=!1,Ys="function"===typeof WeakSet?WeakSet:Set,Ws=null;function Xs(t,e){var r=t.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){xu(t,e,n)}else r.current=null}function Js(t,e,r){try{r()}catch(n){xu(t,e,n)}}var Zs=!1;function $s(t,e,r){var n=e.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,void 0!==o&&Js(e,r,o)}i=i.next}while(i!==n)}}function tl(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function el(t){var e=t.ref;if(null!==e){var r=t.stateNode;t.tag,t=r,"function"===typeof e?e(t):e.current=t}}function rl(t){var e=t.alternate;null!==e&&(t.alternate=null,rl(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[fi],delete e[pi],delete e[di],delete e[gi],delete e[yi])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nl(t){return 5===t.tag||3===t.tag||4===t.tag}function il(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||nl(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ol(t,e,r){var n=t.tag;if(5===n||6===n)t=t.stateNode,e?8===r.nodeType?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(8===r.nodeType?(e=r.parentNode).insertBefore(t,r):(e=r).appendChild(t),null!==(r=r._reactRootContainer)&&void 0!==r||null!==e.onclick||(e.onclick=$n));else if(4!==n&&null!==(t=t.child))for(ol(t,e,r),t=t.sibling;null!==t;)ol(t,e,r),t=t.sibling}function al(t,e,r){var n=t.tag;if(5===n||6===n)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(4!==n&&null!==(t=t.child))for(al(t,e,r),t=t.sibling;null!==t;)al(t,e,r),t=t.sibling}var sl=null,ll=!1;function ul(t,e,r){for(r=r.child;null!==r;)cl(t,e,r),r=r.sibling}function cl(t,e,r){if(oe&&"function"===typeof oe.onCommitFiberUnmount)try{oe.onCommitFiberUnmount(ie,r)}catch(s){}switch(r.tag){case 5:Ks||Xs(r,e);case 6:var n=sl,i=ll;sl=null,ul(t,e,r),ll=i,null!==(sl=n)&&(ll?(t=sl,r=r.stateNode,8===t.nodeType?t.parentNode.removeChild(r):t.removeChild(r)):sl.removeChild(r.stateNode));break;case 18:null!==sl&&(ll?(t=sl,r=r.stateNode,8===t.nodeType?li(t.parentNode,r):1===t.nodeType&&li(t,r),Qe(t)):li(sl,r.stateNode));break;case 4:n=sl,i=ll,sl=r.stateNode.containerInfo,ll=!0,ul(t,e,r),sl=n,ll=i;break;case 0:case 11:case 14:case 15:if(!Ks&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){i=n=n.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&Js(r,e,a),i=i.next}while(i!==n)}ul(t,e,r);break;case 1:if(!Ks&&(Xs(r,e),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){xu(r,e,s)}ul(t,e,r);break;case 21:ul(t,e,r);break;case 22:1&r.mode?(Ks=(n=Ks)||null!==r.memoizedState,ul(t,e,r),Ks=n):ul(t,e,r);break;default:ul(t,e,r)}}function hl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var r=t.stateNode;null===r&&(r=t.stateNode=new Ys),e.forEach((function(e){var n=Su.bind(null,t,e);r.has(e)||(r.add(e),e.then(n,n))}))}}function fl(t,e){var r=e.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n];try{var a=t,s=e,l=s;t:for(;null!==l;){switch(l.tag){case 5:sl=l.stateNode,ll=!1;break t;case 3:case 4:sl=l.stateNode.containerInfo,ll=!0;break t}l=l.return}if(null===sl)throw Error(o(160));cl(a,s,i),sl=null,ll=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){xu(i,e,c)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)pl(e,t),e=e.sibling}function pl(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fl(e,t),Al(t),4&n){try{$s(3,t,t.return),tl(3,t)}catch(d){xu(t,t.return,d)}try{$s(5,t,t.return)}catch(d){xu(t,t.return,d)}}break;case 1:fl(e,t),Al(t),512&n&&null!==r&&Xs(r,r.return);break;case 5:if(fl(e,t),Al(t),512&n&&null!==r&&Xs(r,r.return),32&t.flags){var i=t.stateNode;try{ft(i,"")}catch(d){xu(t,t.return,d)}}if(4&n&&null!=(i=t.stateNode)){var a=t.memoizedProps,s=null!==r?r.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,null!==u)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(i,a),mt(l,s);var c=mt(l,a);for(s=0;s<u.length;s+=2){var h=u[s],f=u[s+1];"style"===h?gt(i,f):"dangerouslySetInnerHTML"===h?ht(i,f):"children"===h?ft(i,f):m(i,h,f,c)}switch(l){case"input":Z(i,a);break;case"textarea":ot(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var A=a.value;null!=A?rt(i,!!a.multiple,A,!1):p!==!!a.multiple&&(null!=a.defaultValue?rt(i,!!a.multiple,a.defaultValue,!0):rt(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(d){xu(t,t.return,d)}}break;case 6:if(fl(e,t),Al(t),4&n){if(null===t.stateNode)throw Error(o(162));c=t.stateNode,h=t.memoizedProps;try{c.nodeValue=h}catch(d){xu(t,t.return,d)}}break;case 3:if(fl(e,t),Al(t),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Qe(e.containerInfo)}catch(d){xu(t,t.return,d)}break;case 4:default:fl(e,t),Al(t);break;case 13:fl(e,t),Al(t),8192&(c=t.child).flags&&null!==c.memoizedState&&(null===c.alternate||null===c.alternate.memoizedState)&&(Rl=Jt()),4&n&&hl(t);break;case 22:if(c=null!==r&&null!==r.memoizedState,1&t.mode?(Ks=(h=Ks)||c,fl(e,t),Ks=h):fl(e,t),Al(t),8192&n){h=null!==t.memoizedState;t:for(f=null,p=t;;){if(5===p.tag){if(null===f){f=p;try{i=p.stateNode,h?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=p.stateNode,s=void 0!==(u=p.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=dt("display",s))}catch(d){xu(t,t.return,d)}}}else if(6===p.tag){if(null===f)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(d){xu(t,t.return,d)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===t)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===t)break t;for(;null===p.sibling;){if(null===p.return||p.return===t)break t;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}if(h&&!c&&0!==(1&t.mode))for(Ws=t,t=t.child;null!==t;){for(c=Ws=t;null!==Ws;){switch(f=(h=Ws).child,h.tag){case 0:case 11:case 14:case 15:$s(4,h,h.return);break;case 1:if(Xs(h,h.return),"function"===typeof(a=h.stateNode).componentWillUnmount){p=h,A=h.return;try{i=p,a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(d){xu(p,A,d)}}break;case 5:Xs(h,h.return);break;case 22:if(null!==h.memoizedState){vl(c);continue}}null!==f?(f.return=h,Ws=f):vl(c)}t=t.sibling}}break;case 19:fl(e,t),Al(t),4&n&&hl(t);case 21:}}function Al(t){var e=t.flags;if(2&e){try{t:{for(var r=t.return;null!==r;){if(nl(r)){var n=r;break t}r=r.return}throw Error(o(160))}switch(n.tag){case 5:var i=n.stateNode;32&n.flags&&(ft(i,""),n.flags&=-33),al(t,il(t),i);break;case 3:case 4:var a=n.stateNode.containerInfo;ol(t,il(t),a);break;default:throw Error(o(161))}}catch(s){xu(t,t.return,s)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function dl(t,e,r){Ws=t,gl(t,e,r)}function gl(t,e,r){for(var n=0!==(1&t.mode);null!==Ws;){var i=Ws,o=i.child;if(22===i.tag&&n){var a=null!==i.memoizedState||qs;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ks;s=qs;var u=Ks;if(qs=a,(Ks=l)&&!u)for(Ws=i;null!==Ws;)l=(a=Ws).child,22===a.tag&&null!==a.memoizedState?ml(i):null!==l?(l.return=a,Ws=l):ml(i);for(;null!==o;)Ws=o,gl(o,e,r),o=o.sibling;Ws=i,qs=s,Ks=u}yl(t)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Ws=o):yl(t)}}function yl(t){for(;null!==Ws;){var e=Ws;if(0!==(8772&e.flags)){var r=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Ks||tl(5,e);break;case 1:var n=e.stateNode;if(4&e.flags&&!Ks)if(null===r)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Vi(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;null!==a&&uo(e,a,n);break;case 3:var s=e.updateQueue;if(null!==s){if(r=null,null!==e.child)switch(e.child.tag){case 5:case 1:r=e.child.stateNode}uo(e,s,r)}break;case 5:var l=e.stateNode;if(null===r&&4&e.flags){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===e.memoizedState){var c=e.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&Qe(f)}}}break;default:throw Error(o(163))}Ks||512&e.flags&&el(e)}catch(p){xu(e,e.return,p)}}if(e===t){Ws=null;break}if(null!==(r=e.sibling)){r.return=e.return,Ws=r;break}Ws=e.return}}function vl(t){for(;null!==Ws;){var e=Ws;if(e===t){Ws=null;break}var r=e.sibling;if(null!==r){r.return=e.return,Ws=r;break}Ws=e.return}}function ml(t){for(;null!==Ws;){var e=Ws;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{tl(4,e)}catch(l){xu(e,r,l)}break;case 1:var n=e.stateNode;if("function"===typeof n.componentDidMount){var i=e.return;try{n.componentDidMount()}catch(l){xu(e,i,l)}}var o=e.return;try{el(e)}catch(l){xu(e,o,l)}break;case 5:var a=e.return;try{el(e)}catch(l){xu(e,a,l)}}}catch(l){xu(e,e.return,l)}if(e===t){Ws=null;break}var s=e.sibling;if(null!==s){s.return=e.return,Ws=s;break}Ws=e.return}}var bl,_l=Math.ceil,wl=b.ReactCurrentDispatcher,xl=b.ReactCurrentOwner,El=b.ReactCurrentBatchConfig,Bl=0,Cl=null,Sl=null,kl=0,Tl=0,Nl=Ei(0),Ll=0,Il=null,Ml=0,Ol=0,Pl=0,Fl=null,Ul=null,Rl=0,Dl=1/0,jl=null,Hl=!1,Ql=null,zl=null,Vl=!1,Gl=null,ql=0,Kl=0,Yl=null,Wl=-1,Xl=0;function Jl(){return 0!==(6&Bl)?Jt():-1!==Wl?Wl:Wl=Jt()}function Zl(t){return 0===(1&t.mode)?1:0!==(2&Bl)&&0!==kl?kl&-kl:null!==zi.transition?(0===Xl&&(Xl=de()),Xl):0!==(t=me)?t:t=void 0===(t=window.event)?16:Xe(t.type)}function $l(t,e,r){if(50<Kl)throw Kl=0,Yl=null,Error(o(185));var n=tu(t,e);return null===n?null:(ye(n,e,r),0!==(2&Bl)&&n===Cl||(n===Cl&&(0===(2&Bl)&&(Ol|=e),4===Ll&&au(n,kl)),ru(n,r),1===e&&0===Bl&&0===(1&t.mode)&&(Dl=Jt()+500,Di&&Qi())),n)}function tu(t,e){t.lanes|=e;var r=t.alternate;for(null!==r&&(r.lanes|=e),r=t,t=t.return;null!==t;)t.childLanes|=e,null!==(r=t.alternate)&&(r.childLanes|=e),r=t,t=t.return;return 3===r.tag?r.stateNode:null}function eu(t){return(null!==Cl||null!==to)&&0!==(1&t.mode)&&0===(2&Bl)}function ru(t,e){var r=t.callbackNode;!function(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ae(o),s=1<<a,l=i[a];-1===l?0!==(s&r)&&0===(s&n)||(i[a]=pe(s,e)):l<=e&&(t.expiredLanes|=s),o&=~s}}(t,e);var n=fe(t,t===Cl?kl:0);if(0===n)null!==r&&Yt(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(null!=r&&Yt(r),1===e)0===t.tag?function(t){Di=!0,Hi(t)}(su.bind(null,t)):Hi(su.bind(null,t)),ai((function(){0===Bl&&Qi()})),r=null;else{switch(be(n)){case 1:r=$t;break;case 4:r=te;break;case 16:default:r=ee;break;case 536870912:r=ne}r=ku(r,nu.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function nu(t,e){if(Wl=-1,Xl=0,0!==(6&Bl))throw Error(o(327));var r=t.callbackNode;if(_u()&&t.callbackNode!==r)return null;var n=fe(t,t===Cl?kl:0);if(0===n)return null;if(0!==(30&n)||0!==(n&t.expiredLanes)||e)e=du(t,n);else{e=n;var i=Bl;Bl|=2;var a=pu();for(Cl===t&&kl===e||(jl=null,Dl=Jt()+500,hu(t,e));;)try{yu();break}catch(l){fu(t,l)}Wi(),wl.current=a,Bl=i,null!==Sl?e=0:(Cl=null,kl=0,e=Ll)}if(0!==e){if(2===e&&(0!==(i=Ae(t))&&(n=i,e=iu(t,i))),1===e)throw r=Il,hu(t,0),au(t,n),ru(t,Jt()),r;if(6===e)au(t,n);else{if(i=t.current.alternate,0===(30&n)&&!function(t){for(var e=t;;){if(16384&e.flags){var r=e.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!sn(o(),i))return!1}catch(s){return!1}}}if(r=e.child,16384&e.subtreeFlags&&null!==r)r.return=e,e=r;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=du(t,n))&&(0!==(a=Ae(t))&&(n=a,e=iu(t,a))),1===e))throw r=Il,hu(t,0),au(t,n),ru(t,Jt()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(o(345));case 2:case 5:bu(t,Ul,jl);break;case 3:if(au(t,n),(130023424&n)===n&&10<(e=Rl+500-Jt())){if(0!==fe(t,0))break;if(((i=t.suspendedLanes)&n)!==n){Jl(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ni(bu.bind(null,t,Ul,jl),e);break}bu(t,Ul,jl);break;case 4:if(au(t,n),(4194240&n)===n)break;for(e=t.eventTimes,i=-1;0<n;){var s=31-ae(n);a=1<<s,(s=e[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=Jt()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*_l(n/1960))-n)){t.timeoutHandle=ni(bu.bind(null,t,Ul,jl),n);break}bu(t,Ul,jl);break;default:throw Error(o(329))}}}return ru(t,Jt()),t.callbackNode===r?nu.bind(null,t):null}function iu(t,e){var r=Fl;return t.current.memoizedState.isDehydrated&&(hu(t,e).flags|=256),2!==(t=du(t,e))&&(e=Ul,Ul=r,null!==e&&ou(e)),t}function ou(t){null===Ul?Ul=t:Ul.push.apply(Ul,t)}function au(t,e){for(e&=~Pl,e&=~Ol,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-ae(e),n=1<<r;t[r]=-1,e&=~n}}function su(t){if(0!==(6&Bl))throw Error(o(327));_u();var e=fe(t,0);if(0===(1&e))return ru(t,Jt()),null;var r=du(t,e);if(0!==t.tag&&2===r){var n=Ae(t);0!==n&&(e=n,r=iu(t,n))}if(1===r)throw r=Il,hu(t,0),au(t,e),ru(t,Jt()),r;if(6===r)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bu(t,Ul,jl),ru(t,Jt()),null}function lu(t,e){var r=Bl;Bl|=1;try{return t(e)}finally{0===(Bl=r)&&(Dl=Jt()+500,Di&&Qi())}}function uu(t){null!==Gl&&0===Gl.tag&&0===(6&Bl)&&_u();var e=Bl;Bl|=1;var r=El.transition,n=me;try{if(El.transition=null,me=1,t)return t()}finally{me=n,El.transition=r,0===(6&(Bl=e))&&Qi()}}function cu(){Tl=Nl.current,Bi(Nl)}function hu(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(-1!==r&&(t.timeoutHandle=-1,ii(r)),null!==Sl)for(r=Sl.return;null!==r;){var n=r;switch(No(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Mi();break;case 3:ea(),Bi(Ti),Bi(ki),sa();break;case 5:na(n);break;case 4:ea();break;case 13:case 19:Bi(ia);break;case 10:Xi(n.type._context);break;case 22:case 23:cu()}r=r.return}if(Cl=t,Sl=t=Iu(t.current,null),kl=Tl=e,Ll=0,Il=null,Pl=Ol=Ml=0,Ul=Fl=null,null!==to){for(e=0;e<to.length;e++)if(null!==(n=(r=to[e]).interleaved)){r.interleaved=null;var i=n.next,o=r.pending;if(null!==o){var a=o.next;o.next=i,n.next=a}r.pending=n}to=null}return t}function fu(t,e){for(;;){var r=Sl;try{if(Wi(),la.current=rs,Aa){for(var n=ha.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}Aa=!1}if(ca=0,pa=fa=ha=null,da=!1,ga=0,xl.current=null,null===r||null===r.return){Ll=1,Il=e,Sl=null;break}t:{var a=t,s=r.return,l=r,u=e;if(e=kl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var A=ds(s);if(null!==A){A.flags&=-257,gs(A,s,l,0,e),1&A.mode&&As(a,c,e),u=c;var d=(e=A).updateQueue;if(null===d){var g=new Set;g.add(u),e.updateQueue=g}else d.add(u);break t}if(0===(1&e)){As(a,c,e),Au();break t}u=Error(o(426))}else if(Mo&&1&l.mode){var y=ds(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gs(y,s,l,0,e),Qo(u);break t}}a=u,4!==Ll&&(Ll=2),null===Fl?Fl=[a]:Fl.push(a),u=as(u,l),l=s;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e,so(l,fs(0,u,e));break t;case 1:a=u;var v=l.type,m=l.stateNode;if(0===(128&l.flags)&&("function"===typeof v.getDerivedStateFromError||null!==m&&"function"===typeof m.componentDidCatch&&(null===zl||!zl.has(m)))){l.flags|=65536,e&=-e,l.lanes|=e,so(l,ps(l,a,e));break t}}l=l.return}while(null!==l)}mu(r)}catch(b){e=b,Sl===r&&null!==r&&(Sl=r=r.return);continue}break}}function pu(){var t=wl.current;return wl.current=rs,null===t?rs:t}function Au(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Cl||0===(268435455&Ml)&&0===(268435455&Ol)||au(Cl,kl)}function du(t,e){var r=Bl;Bl|=2;var n=pu();for(Cl===t&&kl===e||(jl=null,hu(t,e));;)try{gu();break}catch(i){fu(t,i)}if(Wi(),Bl=r,wl.current=n,null!==Sl)throw Error(o(261));return Cl=null,kl=0,Ll}function gu(){for(;null!==Sl;)vu(Sl)}function yu(){for(;null!==Sl&&!Wt();)vu(Sl)}function vu(t){var e=bl(t.alternate,t,Tl);t.memoizedProps=t.pendingProps,null===e?mu(t):Sl=e,xl.current=null}function mu(t){var e=t;do{var r=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(r=ms(r,e,Tl)))return void(Sl=r)}else{if(null!==(r=Gs(r,e)))return r.flags&=32767,void(Sl=r);if(null===t)return Ll=6,void(Sl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Sl=e);Sl=e=t}while(null!==e);0===Ll&&(Ll=5)}function bu(t,e,r){var n=me,i=El.transition;try{El.transition=null,me=1,function(t,e,r,n){do{_u()}while(null!==Gl);if(0!==(6&Bl))throw Error(o(327));r=t.finishedWork;var i=t.finishedLanes;if(null===r)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-ae(r),o=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~o}}(t,a),t===Cl&&(Sl=Cl=null,kl=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Vl||(Vl=!0,ku(ee,(function(){return _u(),null}))),a=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||a){a=El.transition,El.transition=null;var s=me;me=1;var l=Bl;Bl|=4,xl.current=null,function(t,e){if(ti=Ve,pn(t=fn())){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else t:{var n=(r=(r=t.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch(w){r=null;break t}var s=0,l=-1,u=-1,c=0,h=0,f=t,p=null;e:for(;;){for(var A;f!==r||0!==i&&3!==f.nodeType||(l=s+i),f!==a||0!==n&&3!==f.nodeType||(u=s+n),3===f.nodeType&&(s+=f.nodeValue.length),null!==(A=f.firstChild);)p=f,f=A;for(;;){if(f===t)break e;if(p===r&&++c===i&&(l=s),p===a&&++h===n&&(u=s),null!==(A=f.nextSibling))break;p=(f=p).parentNode}f=A}r=-1===l||-1===u?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(ei={focusedElem:t,selectionRange:r},Ve=!1,Ws=e;null!==Ws;)if(t=(e=Ws).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Ws=t;else for(;null!==Ws;){e=Ws;try{var d=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==d){var g=d.memoizedProps,y=d.memoizedState,v=e.stateNode,m=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:Vi(e.type,g),y);v.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var b=e.stateNode.containerInfo;if(1===b.nodeType)b.textContent="";else if(9===b.nodeType){var _=b.body;null!=_&&(_.textContent="")}break;default:throw Error(o(163))}}catch(w){xu(e,e.return,w)}if(null!==(t=e.sibling)){t.return=e.return,Ws=t;break}Ws=e.return}d=Zs,Zs=!1}(t,r),pl(r,t),An(ei),Ve=!!ti,ei=ti=null,t.current=r,dl(r,t,i),Xt(),Bl=l,me=s,El.transition=a}else t.current=r;if(Vl&&(Vl=!1,Gl=t,ql=i),0===(a=t.pendingLanes)&&(zl=null),function(t){if(oe&&"function"===typeof oe.onCommitFiberRoot)try{oe.onCommitFiberRoot(ie,t,void 0,128===(128&t.current.flags))}catch(e){}}(r.stateNode),ru(t,Jt()),null!==e)for(n=t.onRecoverableError,r=0;r<e.length;r++)n(e[r]);if(Hl)throw Hl=!1,t=Ql,Ql=null,t;0!==(1&ql)&&0!==t.tag&&_u(),0!==(1&(a=t.pendingLanes))?t===Yl?Kl++:(Kl=0,Yl=t):Kl=0,Qi()}(t,e,r,n)}finally{El.transition=i,me=n}return null}function _u(){if(null!==Gl){var t=be(ql),e=El.transition,r=me;try{if(El.transition=null,me=16>t?16:t,null===Gl)var n=!1;else{if(t=Gl,Gl=null,ql=0,0!==(6&Bl))throw Error(o(331));var i=Bl;for(Bl|=4,Ws=t.current;null!==Ws;){var a=Ws,s=a.child;if(0!==(16&Ws.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Ws=c;null!==Ws;){var h=Ws;switch(h.tag){case 0:case 11:case 15:$s(8,h,a)}var f=h.child;if(null!==f)f.return=h,Ws=f;else for(;null!==Ws;){var p=(h=Ws).sibling,A=h.return;if(rl(h),h===c){Ws=null;break}if(null!==p){p.return=A,Ws=p;break}Ws=A}}}var d=a.alternate;if(null!==d){var g=d.child;if(null!==g){d.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Ws=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Ws=s;else t:for(;null!==Ws;){if(0!==(2048&(a=Ws).flags))switch(a.tag){case 0:case 11:case 15:$s(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Ws=v;break t}Ws=a.return}}var m=t.current;for(Ws=m;null!==Ws;){var b=(s=Ws).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Ws=b;else t:for(s=m;null!==Ws;){if(0!==(2048&(l=Ws).flags))try{switch(l.tag){case 0:case 11:case 15:tl(9,l)}}catch(w){xu(l,l.return,w)}if(l===s){Ws=null;break t}var _=l.sibling;if(null!==_){_.return=l.return,Ws=_;break t}Ws=l.return}}if(Bl=i,Qi(),oe&&"function"===typeof oe.onPostCommitFiberRoot)try{oe.onPostCommitFiberRoot(ie,t)}catch(w){}n=!0}return n}finally{me=r,El.transition=e}}return!1}function wu(t,e,r){oo(t,e=fs(0,e=as(r,e),1)),e=Jl(),null!==(t=tu(t,1))&&(ye(t,1,e),ru(t,e))}function xu(t,e,r){if(3===t.tag)wu(t,t,r);else for(;null!==e;){if(3===e.tag){wu(e,t,r);break}if(1===e.tag){var n=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===zl||!zl.has(n))){oo(e,t=ps(e,t=as(r,t),1)),t=Jl(),null!==(e=tu(e,1))&&(ye(e,1,t),ru(e,t));break}}e=e.return}}function Eu(t,e,r){var n=t.pingCache;null!==n&&n.delete(e),e=Jl(),t.pingedLanes|=t.suspendedLanes&r,Cl===t&&(kl&r)===r&&(4===Ll||3===Ll&&(130023424&kl)===kl&&500>Jt()-Rl?hu(t,0):Pl|=r),ru(t,e)}function Bu(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ce,0===(130023424&(ce<<=1))&&(ce=4194304)));var r=Jl();null!==(t=tu(t,e))&&(ye(t,e,r),ru(t,r))}function Cu(t){var e=t.memoizedState,r=0;null!==e&&(r=e.retryLane),Bu(t,r)}function Su(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(o(314))}null!==n&&n.delete(e),Bu(t,r)}function ku(t,e){return Kt(t,e)}function Tu(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nu(t,e,r,n){return new Tu(t,e,r,n)}function Lu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Iu(t,e){var r=t.alternate;return null===r?((r=Nu(t.tag,e,t.key,t.mode)).elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&t.flags,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Mu(t,e,r,n,i,a){var s=2;if(n=t,"function"===typeof t)Lu(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case x:return Ou(r.children,i,a,e);case E:s=8,i|=8;break;case B:return(t=Nu(12,r,e,2|i)).elementType=B,t.lanes=a,t;case T:return(t=Nu(13,r,e,i)).elementType=T,t.lanes=a,t;case N:return(t=Nu(19,r,e,i)).elementType=N,t.lanes=a,t;case M:return Pu(r,i,a,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case C:s=10;break t;case S:s=9;break t;case k:s=11;break t;case L:s=14;break t;case I:s=16,n=null;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Nu(s,r,e,i)).elementType=t,e.type=n,e.lanes=a,e}function Ou(t,e,r,n){return(t=Nu(7,t,n,e)).lanes=r,t}function Pu(t,e,r,n){return(t=Nu(22,t,n,e)).elementType=M,t.lanes=r,t.stateNode={},t}function Fu(t,e,r){return(t=Nu(6,t,null,e)).lanes=r,t}function Uu(t,e,r){return(e=Nu(4,null!==t.children?t.children:[],t.key,e)).lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ru(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ge(0),this.expirationTimes=ge(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ge(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Du(t,e,r,n,i,o,a,s,l){return t=new Ru(t,e,r,s,l),1===e?(e=1,!0===o&&(e|=8)):e=0,o=Nu(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ro(o),t}function ju(t,e,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==n?null:""+n,children:t,containerInfo:e,implementation:r}}function Hu(t){if(!t)return Si;t:{if(Qt(t=t._reactInternals)!==t||1!==t.tag)throw Error(o(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Ii(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(o(171))}if(1===t.tag){var r=t.type;if(Ii(r))return Pi(t,r,e)}return e}function Qu(t,e,r,n,i,o,a,s,l){return(t=Du(r,n,!0,t,0,o,0,s,l)).context=Hu(null),r=t.current,(o=io(n=Jl(),i=Zl(r))).callback=void 0!==e&&null!==e?e:null,oo(r,o),t.current.lanes=i,ye(t,i,n),ru(t,n),t}function zu(t,e,r,n){var i=e.current,o=Jl(),a=Zl(i);return r=Hu(r),null===e.context?e.context=r:e.pendingContext=r,(e=io(o,a)).payload={element:t},null!==(n=void 0===n?null:n)&&(e.callback=n),oo(i,e),null!==(t=$l(i,a,o))&&ao(t,i,a),a}function Vu(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Gu(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var r=t.retryLane;t.retryLane=0!==r&&r<e?r:e}}function qu(t,e){Gu(t,e),(t=t.alternate)&&Gu(t,e)}bl=function(t,e,r){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ti.current)_s=!0;else{if(0===(t.lanes&r)&&0===(128&e.flags))return _s=!1,function(t,e,r){switch(e.tag){case 3:Ls(e),Ho();break;case 5:ra(e);break;case 1:Ii(e.type)&&Fi(e);break;case 4:ta(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Ci(Gi,n._currentValue),n._currentValue=i;break;case 13:if(null!==(n=e.memoizedState))return null!==n.dehydrated?(Ci(ia,1&ia.current),e.flags|=128,null):0!==(r&e.child.childLanes)?Fs(t,e,r):(Ci(ia,1&ia.current),null!==(t=Vs(t,e,r))?t.sibling:null);Ci(ia,1&ia.current);break;case 19:if(n=0!==(r&e.childLanes),0!==(128&t.flags)){if(n)return zs(t,e,r);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(ia,ia.current),n)break;return null;case 22:case 23:return e.lanes=0,Cs(t,e,r)}return Vs(t,e,r)}(t,e,r);_s=0!==(131072&t.flags)}else _s=!1,Mo&&0!==(1048576&e.flags)&&ko(e,_o,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps;var i=Li(e,ki.current);Zi(e,r),i=ba(null,e,n,t,i,r);var a=_a();return e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ii(n)?(a=!0,Fi(e)):a=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ro(e),i.updater=fo,e.stateNode=i,i._reactInternals=e,yo(e,n,t,r),e=Ns(null,e,n,!0,a,r)):(e.tag=0,Mo&&a&&To(e),ws(null,e,i,r),e=e.child),e;case 16:n=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,n=(i=n._init)(n._payload),e.type=n,i=e.tag=function(t){if("function"===typeof t)return Lu(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===k)return 11;if(t===L)return 14}return 2}(n),t=Vi(n,t),i){case 0:e=ks(null,e,n,t,r);break t;case 1:e=Ts(null,e,n,t,r);break t;case 11:e=xs(null,e,n,t,r);break t;case 14:e=Es(null,e,n,Vi(n.type,t),r);break t}throw Error(o(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,ks(t,e,n,i=e.elementType===n?i:Vi(n,i),r);case 1:return n=e.type,i=e.pendingProps,Ts(t,e,n,i=e.elementType===n?i:Vi(n,i),r);case 3:t:{if(Ls(e),null===t)throw Error(o(387));n=e.pendingProps,i=(a=e.memoizedState).element,no(t,e),lo(e,n,null,r);var s=e.memoizedState;if(n=s.element,a.isDehydrated){if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,256&e.flags){e=Is(t,e,n,r,i=Error(o(423)));break t}if(n!==i){e=Is(t,e,n,r,i=Error(o(424)));break t}for(Io=ui(e.stateNode.containerInfo.firstChild),Lo=e,Mo=!0,Oo=null,r=Yo(e,null,n,r),e.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(Ho(),n===i){e=Vs(t,e,r);break t}ws(t,e,n,r)}e=e.child}return e;case 5:return ra(e),null===t&&Ro(e),n=e.type,i=e.pendingProps,a=null!==t?t.memoizedProps:null,s=i.children,ri(n,i)?s=null:null!==a&&ri(n,a)&&(e.flags|=32),Ss(t,e),ws(t,e,s,r),e.child;case 6:return null===t&&Ro(e),null;case 13:return Fs(t,e,r);case 4:return ta(e,e.stateNode.containerInfo),n=e.pendingProps,null===t?e.child=Ko(e,null,n,r):ws(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,xs(t,e,n,i=e.elementType===n?i:Vi(n,i),r);case 7:return ws(t,e,e.pendingProps,r),e.child;case 8:case 12:return ws(t,e,e.pendingProps.children,r),e.child;case 10:t:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,Ci(Gi,n._currentValue),n._currentValue=s,null!==a)if(sn(a.value,s)){if(a.children===i.children&&!Ti.current){e=Vs(t,e,r);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var u=l.firstContext;null!==u;){if(u.context===n){if(1===a.tag){(u=io(-1,r&-r)).tag=2;var c=a.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}a.lanes|=r,null!==(u=a.alternate)&&(u.lanes|=r),Ji(a.return,r,e),l.lanes|=r;break}u=u.next}}else if(10===a.tag)s=a.type===e.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=r,null!==(l=s.alternate)&&(l.lanes|=r),Ji(s,r,e),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}ws(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Zi(e,r),n=n(i=$i(i)),e.flags|=1,ws(t,e,n,r),e.child;case 14:return i=Vi(n=e.type,e.pendingProps),Es(t,e,n,i=Vi(n.type,i),r);case 15:return Bs(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Vi(n,i),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Ii(n)?(t=!0,Fi(e)):t=!1,Zi(e,r),Ao(e,n,i),yo(e,n,i,r),Ns(null,e,n,!0,t,r);case 19:return zs(t,e,r);case 22:return Cs(t,e,r)}throw Error(o(156,e.tag))};var Ku="function"===typeof reportError?reportError:function(t){console.error(t)};function Yu(t){this._internalRoot=t}function Wu(t){this._internalRoot=t}function Xu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Ju(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Zu(){}function $u(t,e,r,n,i){var o=r._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var t=Vu(a);s.call(t)}}zu(e,a,t,i)}else a=function(t,e,r,n,i){if(i){if("function"===typeof n){var o=n;n=function(){var t=Vu(a);o.call(t)}}var a=Qu(e,n,t,0,null,!1,0,"",Zu);return t._reactRootContainer=a,t[Ai]=a.current,Qn(8===t.nodeType?t.parentNode:t),uu(),a}for(;i=t.lastChild;)t.removeChild(i);if("function"===typeof n){var s=n;n=function(){var t=Vu(l);s.call(t)}}var l=Du(t,0,!1,null,0,!1,0,"",Zu);return t._reactRootContainer=l,t[Ai]=l.current,Qn(8===t.nodeType?t.parentNode:t),uu((function(){zu(e,l,r,n)})),l}(r,e,t,i,n);return Vu(a)}Wu.prototype.render=Yu.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(o(409));zu(t,e,null,null)},Wu.prototype.unmount=Yu.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;uu((function(){zu(null,t,null,null)})),e[Ai]=null}},Wu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ee();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Me.length&&0!==e&&e<Me[r].priority;r++);Me.splice(r,0,t),0===r&&Ue(t)}},_e=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=he(e.pendingLanes);0!==r&&(ve(e,1|r),ru(e,Jt()),0===(6&Bl)&&(Dl=Jt()+500,Qi()))}break;case 13:var n=Jl();uu((function(){return $l(t,1,n)})),qu(t,1)}},we=function(t){13===t.tag&&($l(t,134217728,Jl()),qu(t,134217728))},xe=function(t){if(13===t.tag){var e=Jl(),r=Zl(t);$l(t,r,e),qu(t,r)}},Ee=function(){return me},Be=function(t,e){var r=me;try{return me=t,e()}finally{me=r}},wt=function(t,e,r){switch(e){case"input":if(Z(t,r),e=r.name,"radio"===r.type&&null!=e){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=_i(n);if(!i)throw Error(o(90));K(n),Z(n,i)}}}break;case"textarea":ot(t,r);break;case"select":null!=(e=r.value)&&rt(t,!!r.multiple,e,!1)}},kt=lu,Tt=uu;var tc={usingClientEntryPoint:!1,Events:[mi,bi,_i,Ct,St,lu]},ec={findFiberByHostInstance:vi,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},rc={bundleType:ec.bundleType,version:ec.version,rendererPackageName:ec.rendererPackageName,rendererConfig:ec.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Gt(t))?null:t.stateNode},findFiberByHostInstance:ec.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nc.isDisabled&&nc.supportsFiber)try{ie=nc.inject(rc),oe=nc}catch(ct){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,e.createPortal=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xu(e))throw Error(o(200));return ju(t,e,null,r)},e.createRoot=function(t,e){if(!Xu(t))throw Error(o(299));var r=!1,n="",i=Ku;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(r=!0),void 0!==e.identifierPrefix&&(n=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=Du(t,1,!1,null,0,r,0,n,i),t[Ai]=e.current,Qn(8===t.nodeType?t.parentNode:t),new Yu(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(o(188));throw t=Object.keys(t).join(","),Error(o(268,t))}return t=null===(t=Gt(e))?null:t.stateNode},e.flushSync=function(t){return uu(t)},e.hydrate=function(t,e,r){if(!Ju(e))throw Error(o(200));return $u(null,t,e,!0,r)},e.hydrateRoot=function(t,e,r){if(!Xu(t))throw Error(o(405));var n=null!=r&&r.hydratedSources||null,i=!1,a="",s=Ku;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onRecoverableError&&(s=r.onRecoverableError)),e=Qu(e,null,t,1,null!=r?r:null,i,0,a,s),t[Ai]=e.current,Qn(t),n)for(t=0;t<n.length;t++)i=(i=(r=n[t])._getVersion)(r._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Wu(e)},e.render=function(t,e,r){if(!Ju(e))throw Error(o(200));return $u(null,t,e,!1,r)},e.unmountComponentAtNode=function(t){if(!Ju(t))throw Error(o(40));return!!t._reactRootContainer&&(uu((function(){$u(null,null,t,!1,(function(){t._reactRootContainer=null,t[Ai]=null}))})),!0)},e.unstable_batchedUpdates=lu,e.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Ju(r))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return $u(t,e,r,!1,n)},e.version="18.1.0-next-22edb9f77-20220426"},1250:function(t,e,r){"use strict";var n=r(4164);e.s=n.createRoot,n.hydrateRoot},4164:function(t,e,r){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=r(4463)},8459:function(t,e){"use strict";var r,n=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case n:switch(t=t.type){case o:case s:case a:case f:case p:return t;default:switch(t=t&&t.$$typeof){case c:case u:case h:case d:case A:case l:return t;default:return e}}case i:return e}}}r=Symbol.for("react.module.reference")},6900:function(t,e,r){"use strict";r(8459)},7907:function(t,e,r){var n,i,o;i=[e,r(2791),r(5125),r(9818)],n=function(t,e,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(e),o=s(r),a=s(n);function s(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function h(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var f=function(t){function e(t){l(this,e);var r=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.toPdf=r.toPdf.bind(r),r.targetRef=i.default.createRef(),r}return h(e,t),u(e,[{key:"toPdf",value:function(){var t=this.props,e=t.targetRef,r=t.filename,n=t.x,i=t.y,s=t.options,l=t.onComplete,u=e||this.targetRef,c=u.current||u;if(!c)throw new Error("Target ref must be used or informed. See https://github.com/ivmarcos/react-to-pdf#usage.");(0,a.default)(c,{logging:!1,useCORS:!0,scale:this.props.scale}).then((function(t){var e=t.toDataURL(),a=new o.default(s);a.addImage(e,"JPEG",n,i),a.save(r),l&&l()}))}},{key:"render",value:function(){return(0,this.props.children)({toPdf:this.toPdf,targetRef:this.targetRef})}}]),e}(e.PureComponent);f.defaultProps={filename:"download.pdf",options:void 0,x:0,y:0,scale:1,onComplete:void 0,targetRef:void 0},t.default=f},void 0===(o="function"===typeof n?n.apply(e,i):n)||(t.exports=o)},6374:function(t,e,r){"use strict";var n=r(2791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(t,e,r){var n,o={},u=null,c=null;for(n in void 0!==r&&(u=""+r),void 0!==e.key&&(u=""+e.key),void 0!==e.ref&&(c=e.ref),e)a.call(e,n)&&!l.hasOwnProperty(n)&&(o[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps)void 0===o[n]&&(o[n]=e[n]);return{$$typeof:i,type:t,key:u,ref:c,props:o,_owner:s.current}}e.jsx=u,e.jsxs=u},9117:function(t,e){"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d=Object.assign,g={};function y(t,e,r){this.props=t,this.context=e,this.refs=g,this.updater=r||A}function v(){}function m(t,e,r){this.props=t,this.context=e,this.refs=g,this.updater=r||A}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=y.prototype;var b=m.prototype=new v;b.constructor=m,d(b,y.prototype),b.isPureReactComponent=!0;var _=Array.isArray,w=Object.prototype.hasOwnProperty,x={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function B(t,e,n){var i,o={},a=null,s=null;if(null!=e)for(i in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)w.call(e,i)&&!E.hasOwnProperty(i)&&(o[i]=e[i]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:r,type:t,key:a,ref:s,props:o,_owner:x.current}}function C(t){return"object"===typeof t&&null!==t&&t.$$typeof===r}var S=/\/+/g;function k(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function T(t,e,i,o,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case r:case n:l=!0}}if(l)return a=a(l=t),t=""===o?"."+k(l,0):o,_(a)?(i="",null!=t&&(i=t.replace(S,"$&/")+"/"),T(a,e,i,"",(function(t){return t}))):null!=a&&(C(a)&&(a=function(t,e){return{$$typeof:r,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(S,"$&/")+"/")+t)),e.push(a)),1;if(l=0,o=""===o?".":o+":",_(t))for(var u=0;u<t.length;u++){var c=o+k(s=t[u],u);l+=T(s,e,i,c,a)}else if(c=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=p&&t[p]||t["@@iterator"])?t:null}(t),"function"===typeof c)for(t=c.call(t),u=0;!(s=t.next()).done;)l+=T(s=s.value,e,i,c=o+k(s,u++),a);else if("object"===s)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function N(t,e,r){if(null==t)return t;var n=[],i=0;return T(t,n,"","",(function(t){return e.call(r,t,i++)})),n}function L(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var I={current:null},M={transition:null},O={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:M,ReactCurrentOwner:x};e.Children={map:N,forEach:function(t,e,r){N(t,(function(){e.apply(this,arguments)}),r)},count:function(t){var e=0;return N(t,(function(){e++})),e},toArray:function(t){return N(t,(function(t){return t}))||[]},only:function(t){if(!C(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=y,e.Fragment=i,e.Profiler=a,e.PureComponent=m,e.StrictMode=o,e.Suspense=c,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=d({},t.props),o=t.key,a=t.ref,s=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,s=x.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)w.call(e,u)&&!E.hasOwnProperty(u)&&(i[u]=void 0===e[u]&&void 0!==l?l[u]:e[u])}var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:r,type:t.type,key:o,ref:a,props:i,_owner:s}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=B,e.createFactory=function(t){var e=B.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=C,e.lazy=function(t){return{$$typeof:f,_payload:{_status:-1,_result:t},_init:L}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=M.transition;M.transition={};try{t()}finally{M.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return I.current.useCallback(t,e)},e.useContext=function(t){return I.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return I.current.useDeferredValue(t)},e.useEffect=function(t,e){return I.current.useEffect(t,e)},e.useId=function(){return I.current.useId()},e.useImperativeHandle=function(t,e,r){return I.current.useImperativeHandle(t,e,r)},e.useInsertionEffect=function(t,e){return I.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return I.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return I.current.useMemo(t,e)},e.useReducer=function(t,e,r){return I.current.useReducer(t,e,r)},e.useRef=function(t){return I.current.useRef(t)},e.useState=function(t){return I.current.useState(t)},e.useSyncExternalStore=function(t,e,r){return I.current.useSyncExternalStore(t,e,r)},e.useTransition=function(){return I.current.useTransition()},e.version="18.1.0"},2791:function(t,e,r){"use strict";t.exports=r(9117)},184:function(t,e,r){"use strict";t.exports=r(6374)},9727:function(t){var e=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(L){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),a=new k(n||[]);return o._invoke=function(t,e,r){var n=h;return function(i,o){if(n===p)throw new Error("Generator is already running");if(n===A){if("throw"===i)throw o;return N()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=B(a,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=A,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var l=c(t,e,r);if("normal"===l.type){if(n=r.done?A:f,l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=A,r.method="throw",r.arg=l.arg)}}}(t,r,a),o}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(L){return{type:"throw",arg:L}}}t.wrap=u;var h="suspendedStart",f="suspendedYield",p="executing",A="completed",d={};function g(){}function y(){}function v(){}var m={};l(m,o,(function(){return this}));var b=Object.getPrototypeOf,_=b&&b(b(T([])));_&&_!==r&&n.call(_,o)&&(m=_);var w=v.prototype=g.prototype=Object.create(m);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(i,o,a,s){var l=c(t[i],t,o);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"===typeof h&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(l.arg)}var i;this._invoke=function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}}function B(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,B(t,r),"throw"===r.method))return d;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=c(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var r=t[o];if(r)return r.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}return{next:N}}function N(){return{value:e,done:!0}}return y.prototype=v,l(w,"constructor",v),l(v,"constructor",y),y.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(E.prototype),l(E.prototype,a,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new E(u(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(w),l(w,s,"Generator"),l(w,o,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(S),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}(t.exports);try{regeneratorRuntime=e}catch(r){"object"===typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},6813:function(t,e){"use strict";function r(t,e){var r=t.length;t.push(e);t:for(;0<r;){var n=r-1>>>1,i=t[n];if(!(0<o(i,e)))break t;t[n]=e,t[r]=i,r=n}}function n(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],r=t.pop();if(r!==e){t[0]=r;t:for(var n=0,i=t.length,a=i>>>1;n<a;){var s=2*(n+1)-1,l=t[s],u=s+1,c=t[u];if(0>o(l,r))u<i&&0>o(c,l)?(t[n]=c,t[u]=r,n=u):(t[n]=l,t[s]=r,n=s);else{if(!(u<i&&0>o(c,r)))break t;t[n]=c,t[u]=r,n=u}}}return e}function o(t,e){var r=t.sortIndex-e.sortIndex;return 0!==r?r:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var u=[],c=[],h=1,f=null,p=3,A=!1,d=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,m="undefined"!==typeof setImmediate?setImmediate:null;function b(t){for(var e=n(c);null!==e;){if(null===e.callback)i(c);else{if(!(e.startTime<=t))break;i(c),e.sortIndex=e.expirationTime,r(u,e)}e=n(c)}}function _(t){if(g=!1,b(t),!d)if(null!==n(u))d=!0,M(w);else{var e=n(c);null!==e&&O(_,e.startTime-t)}}function w(t,r){d=!1,g&&(g=!1,v(C),C=-1),A=!0;var o=p;try{for(b(r),f=n(u);null!==f&&(!(f.expirationTime>r)||t&&!T());){var a=f.callback;if("function"===typeof a){f.callback=null,p=f.priorityLevel;var s=a(f.expirationTime<=r);r=e.unstable_now(),"function"===typeof s?f.callback=s:f===n(u)&&i(u),b(r)}else i(u);f=n(u)}if(null!==f)var l=!0;else{var h=n(c);null!==h&&O(_,h.startTime-r),l=!1}return l}finally{f=null,p=o,A=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,E=!1,B=null,C=-1,S=5,k=-1;function T(){return!(e.unstable_now()-k<S)}function N(){if(null!==B){var t=e.unstable_now();k=t;var r=!0;try{r=B(!0,t)}finally{r?x():(E=!1,B=null)}}else E=!1}if("function"===typeof m)x=function(){m(N)};else if("undefined"!==typeof MessageChannel){var L=new MessageChannel,I=L.port2;L.port1.onmessage=N,x=function(){I.postMessage(null)}}else x=function(){y(N,0)};function M(t){B=t,E||(E=!0,x())}function O(t,r){C=y((function(){t(e.unstable_now())}),r)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){d||A||(d=!0,M(w))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(t){switch(p){case 1:case 2:case 3:var e=3;break;default:e=p}var r=p;p=e;try{return t()}finally{p=r}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var r=p;p=t;try{return e()}finally{p=r}},e.unstable_scheduleCallback=function(t,i,o){var a=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,t){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return t={id:h++,callback:i,priorityLevel:t,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(t.sortIndex=o,r(c,t),null===n(u)&&t===n(c)&&(g?(v(C),C=-1):g=!0,O(_,o-a))):(t.sortIndex=s,r(u,t),d||A||(d=!0,M(w))),t},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(t){var e=p;return function(){var r=p;p=e;try{return t.apply(this,arguments)}finally{p=r}}}},5296:function(t,e,r){"use strict";t.exports=r(6813)},1561:function(t,e,r){"use strict";var n=r(2791);var i="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},o=n.useState,a=n.useEffect,s=n.useLayoutEffect,l=n.useDebugValue;function u(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!i(t,r)}catch(n){return!0}}var c="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(t,e){return e()}:function(t,e){var r=e(),n=o({inst:{value:r,getSnapshot:e}}),i=n[0].inst,c=n[1];return s((function(){i.value=r,i.getSnapshot=e,u(i)&&c({inst:i})}),[t,r,e]),a((function(){return u(i)&&c({inst:i}),t((function(){u(i)&&c({inst:i})}))}),[t]),l(r),r};e.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:c},7595:function(t,e,r){"use strict";var n=r(2791),i=r(7248);var o="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},a=i.useSyncExternalStore,s=n.useRef,l=n.useEffect,u=n.useMemo,c=n.useDebugValue;e.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var h=s(null);if(null===h.current){var f={hasValue:!1,value:null};h.current=f}else f=h.current;h=u((function(){function t(t){if(!l){if(l=!0,a=t,t=n(t),void 0!==i&&f.hasValue){var e=f.value;if(i(e,t))return s=e}return s=t}if(e=s,o(a,t))return e;var r=n(t);return void 0!==i&&i(e,r)?e:(a=t,s=r)}var a,s,l=!1,u=void 0===r?null:r;return[function(){return t(e())},null===u?void 0:function(){return t(u())}]}),[e,r,n,i]);var p=a(t,h[0],h[1]);return l((function(){f.hasValue=!0,f.value=p}),[p]),c(p),p}},7248:function(t,e,r){"use strict";t.exports=r(1561)},327:function(t,e,r){"use strict";t.exports=r(7595)},907:function(t,e,r){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r.d(e,{Z:function(){return n}})},5861:function(t,e,r){"use strict";function n(t,e,r,n,i,o,a){try{var s=t[o](a),l=s.value}catch(u){return void r(u)}s.done?e(l):Promise.resolve(l).then(n,i)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var a=t.apply(e,r);function s(t){n(a,i,o,s,l,"next",t)}function l(t){n(a,i,o,s,l,"throw",t)}s(void 0)}))}}r.d(e,{Z:function(){return i}})},4942:function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,{Z:function(){return n}})},885:function(t,e,r){"use strict";r.d(e,{Z:function(){return i}});var n=r(181);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(t,e)||(0,n.Z)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1002:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}r.d(e,{Z:function(){return n}})},181:function(t,e,r){"use strict";r.d(e,{Z:function(){return i}});var n=r(907);function i(t,e){if(t){if("string"===typeof t)return(0,n.Z)(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,n.Z)(t,e):void 0}}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var r=__webpack_module_cache__[t]={id:t,loaded:!1,exports:{}};return __webpack_modules__[t].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return __webpack_require__.d(e,{a:e}),e},function(){var t,e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};__webpack_require__.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"===typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"===typeof r.then)return r}var i=Object.create(null);__webpack_require__.r(i);var o={};t=t||[null,e({}),e([]),e(e)];for(var a=2&n&&r;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((function(t){o[t]=function(){return r[t]}}));return o.default=function(){return r},__webpack_require__.d(i,o),i}}(),__webpack_require__.d=function(t,e){for(var r in e)__webpack_require__.o(e,r)&&!__webpack_require__.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},__webpack_require__.f={},__webpack_require__.e=function(t){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(e,r){return __webpack_require__.f[r](t,e),e}),[]))},__webpack_require__.u=function(t){return"static/js/"+t+"."+{236:"e5aee28c",703:"5833f49d",825:"f7198564"}[t]+".chunk.js"},__webpack_require__.miniCssF=function(t){},__webpack_require__.hmd=function(t){return(t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t={},e="maps2:";__webpack_require__.l=function(r,n,i,o){if(t[r])t[r].push(n);else{var a,s;if(void 0!==i)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var c=l[u];if(c.getAttribute("src")==r||c.getAttribute("data-webpack")==e+i){a=c;break}}a||(s=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,__webpack_require__.nc&&a.setAttribute("nonce",__webpack_require__.nc),a.setAttribute("data-webpack",e+i),a.src=r),t[r]=[n];var h=function(e,n){a.onerror=a.onload=null,clearTimeout(f);var i=t[r];if(delete t[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((function(t){return t(n)})),e)return e(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),s&&document.head.appendChild(a)}}}(),__webpack_require__.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.p="/mapApp/",function(){var t={179:0};__webpack_require__.f.j=function(e,r){var n=__webpack_require__.o(t,e)?t[e]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise((function(r,i){n=t[e]=[r,i]}));r.push(n[2]=i);var o=__webpack_require__.p+__webpack_require__.u(e),a=new Error;__webpack_require__.l(o,(function(r){if(__webpack_require__.o(t,e)&&(0!==(n=t[e])&&(t[e]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,n[1](a)}}),"chunk-"+e,e)}};var e=function(e,r){var n,i,o=r[0],a=r[1],s=r[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(n in a)__webpack_require__.o(a,n)&&(__webpack_require__.m[n]=a[n]);if(s)s(__webpack_require__)}for(e&&e(r);l<o.length;l++)i=o[l],__webpack_require__.o(t,i)&&t[i]&&t[i][0](),t[i]=0},r=self.webpackChunkmaps2=self.webpackChunkmaps2||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var __webpack_exports__={};!function(){"use strict";var t,e=__webpack_require__(2791),r=__webpack_require__(1250),n=__webpack_require__(885);function i(){return i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i.apply(this,arguments)}!function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(t||(t={}));var o=function(t){return t};var a="beforeunload",s="popstate";function l(e){void 0===e&&(e={});var r=e.window,n=void 0===r?document.defaultView:r,l=n.history;function A(){var t=p(n.location.hash.substr(1)),e=t.pathname,r=void 0===e?"/":e,i=t.search,a=void 0===i?"":i,s=t.hash,u=void 0===s?"":s,c=l.state||{};return[c.idx,o({pathname:r,search:a,hash:u,state:c.usr||null,key:c.key||"default"})]}var d=null;function g(){if(d)w.call(d),d=null;else{var e=t.Pop,r=A(),n=r[0],i=r[1];if(w.length){if(null!=n){var o=m-n;o&&(d={action:e,location:i,retry:function(){k(-1*o)}},k(o))}}else S(e)}}n.addEventListener(s,g),n.addEventListener("hashchange",(function(){f(A()[1])!==f(b)&&g()}));var y=t.Pop,v=A(),m=v[0],b=v[1],_=c(),w=c();function x(t){return function(){var t=document.querySelector("base"),e="";if(t&&t.getAttribute("href")){var r=n.location.href,i=r.indexOf("#");e=-1===i?r:r.slice(0,i)}return e}()+"#"+("string"===typeof t?t:f(t))}function E(t,e){return void 0===e&&(e=null),o(i({pathname:b.pathname,hash:"",search:""},"string"===typeof t?p(t):t,{state:e,key:h()}))}function B(t,e){return[{usr:t.state,key:t.key,idx:e},x(t)]}function C(t,e,r){return!w.length||(w.call({action:t,location:e,retry:r}),!1)}function S(t){y=t;var e=A();m=e[0],b=e[1],_.call({action:y,location:b})}function k(t){l.go(t)}null==m&&(m=0,l.replaceState(i({},l.state,{idx:m}),""));var T={get action(){return y},get location(){return b},createHref:x,push:function e(r,i){var o=t.Push,a=E(r,i);if(C(o,a,(function(){e(r,i)}))){var s=B(a,m+1),u=s[0],c=s[1];try{l.pushState(u,"",c)}catch(h){n.location.assign(c)}S(o)}},replace:function e(r,n){var i=t.Replace,o=E(r,n);if(C(i,o,(function(){e(r,n)}))){var a=B(o,m),s=a[0],u=a[1];l.replaceState(s,"",u),S(i)}},go:k,back:function(){k(-1)},forward:function(){k(1)},listen:function(t){return _.push(t)},block:function(t){var e=w.push(t);return 1===w.length&&n.addEventListener(a,u),function(){e(),w.length||n.removeEventListener(a,u)}}};return T}function u(t){t.preventDefault(),t.returnValue=""}function c(){var t=[];return{get length(){return t.length},push:function(e){return t.push(e),function(){t=t.filter((function(t){return t!==e}))}},call:function(e){t.forEach((function(t){return t&&t(e)}))}}}function h(){return Math.random().toString(36).substr(2,8)}function f(t){var e=t.pathname,r=void 0===e?"/":e,n=t.search,i=void 0===n?"":n,o=t.hash,a=void 0===o?"":o;return i&&"?"!==i&&(r+="?"===i.charAt(0)?i:"?"+i),a&&"#"!==a&&(r+="#"===a.charAt(0)?a:"#"+a),r}function p(t){var e={};if(t){var r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));var n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}var A=(0,e.createContext)(null);var d=(0,e.createContext)(null);var g=(0,e.createContext)({outlet:null,matches:[]});function y(t,e){if(!t)throw new Error(e)}function v(t,e,r){void 0===r&&(r="/");var n=C(("string"===typeof e?p(e):e).pathname||"/",r);if(null==n)return null;var i=m(t);!function(t){t.sort((function(t,e){return t.score!==e.score?e.score-t.score:function(t,e){var r=t.length===e.length&&t.slice(0,-1).every((function(t,r){return t===e[r]}));return r?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map((function(t){return t.childrenIndex})),e.routesMeta.map((function(t){return t.childrenIndex})))}))}(i);for(var o=null,a=0;null==o&&a<i.length;++a)o=x(i[a],n);return o}function m(t,e,r,n){return void 0===e&&(e=[]),void 0===r&&(r=[]),void 0===n&&(n=""),t.forEach((function(t,i){var o={relativePath:t.path||"",caseSensitive:!0===t.caseSensitive,childrenIndex:i,route:t};o.relativePath.startsWith("/")&&(o.relativePath.startsWith(n)||y(!1),o.relativePath=o.relativePath.slice(n.length));var a=S([n,o.relativePath]),s=r.concat(o);t.children&&t.children.length>0&&(!0===t.index&&y(!1),m(t.children,e,s,a)),(null!=t.path||t.index)&&e.push({path:a,score:w(a,t.index),routesMeta:s})})),e}var b=/^:\w+$/,_=function(t){return"*"===t};function w(t,e){var r=t.split("/"),n=r.length;return r.some(_)&&(n+=-2),e&&(n+=2),r.filter((function(t){return!_(t)})).reduce((function(t,e){return t+(b.test(e)?3:""===e?1:10)}),n)}function x(t,e){for(var r=t.routesMeta,n={},i="/",o=[],a=0;a<r.length;++a){var s=r[a],l=a===r.length-1,u="/"===i?e:e.slice(i.length)||"/",c=E({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},u);if(!c)return null;Object.assign(n,c.params);var h=s.route;o.push({params:n,pathname:S([i,c.pathname]),pathnameBase:k(S([i,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(i=S([i,c.pathnameBase]))}return o}function E(t,e){"string"===typeof t&&(t={path:t,caseSensitive:!1,end:!0});var r=function(t,e,r){void 0===e&&(e=!1);void 0===r&&(r=!0);var n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(t,e){return n.push(e),"([^\\/]+)"}));t.endsWith("*")?(n.push("*"),i+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=r?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,e?void 0:"i"),n]}(t.path,t.caseSensitive,t.end),i=(0,n.Z)(r,2),o=i[0],a=i[1],s=e.match(o);if(!s)return null;var l=s[0],u=l.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:a.reduce((function(t,e,r){if("*"===e){var n=c[r]||"";u=l.slice(0,l.length-n.length).replace(/(.)\/+$/,"$1")}return t[e]=function(t,e){try{return decodeURIComponent(t)}catch(r){return t}}(c[r]||""),t}),{}),pathname:l,pathnameBase:u,pattern:t}}function B(t,e,r){var n,i="string"===typeof t?p(t):t,o=""===t||""===i.pathname?"/":i.pathname;if(null==o)n=r;else{var a=e.length-1;if(o.startsWith("..")){for(var s=o.split("/");".."===s[0];)s.shift(),a-=1;i.pathname=s.join("/")}n=a>=0?e[a]:"/"}var l=function(t,e){void 0===e&&(e="/");var r="string"===typeof t?p(t):t,n=r.pathname,i=r.search,o=void 0===i?"":i,a=r.hash,s=void 0===a?"":a,l=n?n.startsWith("/")?n:function(t,e){var r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach((function(t){".."===t?r.length>1&&r.pop():"."!==t&&r.push(t)})),r.length>1?r.join("/"):"/"}(n,e):e;return{pathname:l,search:T(o),hash:N(s)}}(i,n);return o&&"/"!==o&&o.endsWith("/")&&!l.pathname.endsWith("/")&&(l.pathname+="/"),l}function C(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;var r=t.charAt(e.length);return r&&"/"!==r?null:t.slice(e.length)||"/"}var S=function(t){return t.join("/").replace(/\/\/+/g,"/")},k=function(t){return t.replace(/\/+$/,"").replace(/^\/*/,"/")},T=function(t){return t&&"?"!==t?t.startsWith("?")?t:"?"+t:""},N=function(t){return t&&"#"!==t?t.startsWith("#")?t:"#"+t:""};function L(){return null!=(0,e.useContext)(d)}function I(){return L()||y(!1),(0,e.useContext)(d).location}function M(){L()||y(!1);var t=(0,e.useContext)(A),r=t.basename,n=t.navigator,i=(0,e.useContext)(g).matches,o=I().pathname,a=JSON.stringify(i.map((function(t){return t.pathnameBase}))),s=(0,e.useRef)(!1);return(0,e.useEffect)((function(){s.current=!0})),(0,e.useCallback)((function(t,e){if(void 0===e&&(e={}),s.current)if("number"!==typeof t){var i=B(t,JSON.parse(a),o);"/"!==r&&(i.pathname=S([r,i.pathname])),(e.replace?n.replace:n.push)(i,e.state)}else n.go(t)}),[r,n,a,o])}function O(t,r){return void 0===r&&(r=[]),null==t?null:t.reduceRight((function(n,i,o){return(0,e.createElement)(g.Provider,{children:void 0!==i.route.element?i.route.element:n,value:{outlet:n,matches:r.concat(t.slice(0,o+1))}})}),null)}function P(t){y(!1)}function F(r){var n=r.basename,i=void 0===n?"/":n,o=r.children,a=void 0===o?null:o,s=r.location,l=r.navigationType,u=void 0===l?t.Pop:l,c=r.navigator,h=r.static,f=void 0!==h&&h;L()&&y(!1);var g=k(i),v=(0,e.useMemo)((function(){return{basename:g,navigator:c,static:f}}),[g,c,f]);"string"===typeof s&&(s=p(s));var m=s,b=m.pathname,_=void 0===b?"/":b,w=m.search,x=void 0===w?"":w,E=m.hash,B=void 0===E?"":E,S=m.state,T=void 0===S?null:S,N=m.key,I=void 0===N?"default":N,M=(0,e.useMemo)((function(){var t=C(_,g);return null==t?null:{pathname:t,search:x,hash:B,state:T,key:I}}),[g,_,x,B,T,I]);return null==M?null:(0,e.createElement)(A.Provider,{value:v},(0,e.createElement)(d.Provider,{children:a,value:{location:M,navigationType:u}}))}function U(t){var r=t.children,n=t.location;return function(t,r){L()||y(!1);var n,i=(0,e.useContext)(g).matches,o=i[i.length-1],a=o?o.params:{},s=(o&&o.pathname,o?o.pathnameBase:"/"),l=(o&&o.route,I());if(r){var u,c="string"===typeof r?p(r):r;"/"===s||(null==(u=c.pathname)?void 0:u.startsWith(s))||y(!1),n=c}else n=l;var h=n.pathname||"/",f=v(t,{pathname:"/"===s?h:h.slice(s.length)||"/"});return O(f&&f.map((function(t){return Object.assign({},t,{params:Object.assign({},a,t.params),pathname:S([s,t.pathname]),pathnameBase:"/"===t.pathnameBase?s:S([s,t.pathnameBase])})})),i)}(R(r),n)}function R(t){var r=[];return e.Children.forEach(t,(function(t){if((0,e.isValidElement)(t))if(t.type!==e.Fragment){t.type!==P&&y(!1);var n={caseSensitive:t.props.caseSensitive,element:t.props.element,index:t.props.index,path:t.props.path};t.props.children&&(n.children=R(t.props.children)),r.push(n)}else r.push.apply(r,R(t.props.children))})),r}function D(t){var r=t.basename,i=t.children,o=t.window,a=(0,e.useRef)();null==a.current&&(a.current=l({window:o}));var s=a.current,u=(0,e.useState)({action:s.action,location:s.location}),c=(0,n.Z)(u,2),h=c[0],f=c[1];return(0,e.useLayoutEffect)((function(){return s.listen(f)}),[s]),(0,e.createElement)(F,{basename:r,children:i,location:h.location,navigationType:h.action,navigator:s})}var j=__webpack_require__(7248),H=__webpack_require__(327),Q=__webpack_require__(4164);var z=function(t){t()},V=function(){return z},G=e.createContext(null);function q(){return(0,e.useContext)(G)}var K=function(){throw new Error("uSES not initialized!")},Y=K,W=function(t,e){return t===e};function X(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,r=t===G?q:function(){return(0,e.useContext)(t)};return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;var i=r(),o=i.store,a=i.subscription,s=i.getServerState,l=Y(a.addNestedSub,o.getState,s||o.getState,t,n);return(0,e.useDebugValue)(l),l}}var J=X();__webpack_require__(2110),__webpack_require__(6900);var Z={notify:function(){},get:function(){return[]}};function $(t,e){var r,n=Z;function i(){a.onStateChange&&a.onStateChange()}function o(){r||(r=e?e.addNestedSub(i):t.subscribe(i),n=function(){var t=V(),e=null,r=null;return{clear:function(){e=null,r=null},notify:function(){t((function(){for(var t=e;t;)t.callback(),t=t.next}))},get:function(){for(var t=[],r=e;r;)t.push(r),r=r.next;return t},subscribe:function(t){var n=!0,i=r={callback:t,next:null,prev:r};return i.prev?i.prev.next=i:e=i,function(){n&&null!==e&&(n=!1,i.next?i.next.prev=i.prev:r=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}var a={addNestedSub:function(t){return o(),n.subscribe(t)},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(r)},trySubscribe:o,tryUnsubscribe:function(){r&&(r(),r=void 0,n.clear(),n=Z)},getListeners:function(){return n}};return a}var tt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?e.useLayoutEffect:e.useEffect;var et=function(t){var r=t.store,n=t.context,i=t.children,o=t.serverState,a=(0,e.useMemo)((function(){var t=$(r);return{store:r,subscription:t,getServerState:o?function(){return o}:void 0}}),[r,o]),s=(0,e.useMemo)((function(){return r.getState()}),[r]);tt((function(){var t=a.subscription;return t.onStateChange=t.notifyNestedSubs,t.trySubscribe(),s!==r.getState()&&t.notifyNestedSubs(),function(){t.tryUnsubscribe(),t.onStateChange=void 0}}),[a,s]);var l=n||G;return e.createElement(l.Provider,{value:a},i)};function rt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,r=t===G?q:function(){return(0,e.useContext)(t)};return function(){return r().store}}var nt=rt();function it(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,e=t===G?nt:rt(t);return function(){return e().dispatch}}var ot,at=it();function st(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function lt(t){return!!t&&!!t[Jt]}function ut(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;var r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===Zt}(t)||Array.isArray(t)||!!t[Xt]||!!t.constructor[Xt]||gt(t)||yt(t))}function ct(t,e,r){void 0===r&&(r=!1),0===ht(t)?(r?Object.keys:$t)(t).forEach((function(n){r&&"symbol"==typeof n||e(n,t[n],t)})):t.forEach((function(r,n){return e(n,r,t)}))}function ht(t){var e=t[Jt];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:gt(t)?2:yt(t)?3:0}function ft(t,e){return 2===ht(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function pt(t,e){return 2===ht(t)?t.get(e):t[e]}function At(t,e,r){var n=ht(t);2===n?t.set(e,r):3===n?(t.delete(e),t.add(r)):t[e]=r}function dt(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function gt(t){return qt&&t instanceof Map}function yt(t){return Kt&&t instanceof Set}function vt(t){return t.o||t.t}function mt(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=te(t);delete e[Jt];for(var r=$t(e),n=0;n<r.length;n++){var i=r[n],o=e[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function bt(t,e){return void 0===e&&(e=!1),wt(t)||lt(t)||!ut(t)||(ht(t)>1&&(t.set=t.add=t.clear=t.delete=_t),Object.freeze(t),e&&ct(t,(function(t,e){return bt(e,!0)}),!0)),t}function _t(){st(2)}function wt(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function xt(t){var e=ee[t];return e||st(18,t),e}function Et(t,e){ee[t]||(ee[t]=e)}function Bt(){return Vt}function Ct(t,e){e&&(xt("Patches"),t.u=[],t.s=[],t.v=e)}function St(t){kt(t),t.p.forEach(Nt),t.p=null}function kt(t){t===Vt&&(Vt=t.l)}function Tt(t){return Vt={p:[],l:Vt,h:t,m:!0,_:0}}function Nt(t){var e=t[Jt];0===e.i||1===e.i?e.j():e.O=!0}function Lt(t,e){e._=e.p.length;var r=e.p[0],n=void 0!==t&&t!==r;return e.h.g||xt("ES5").S(e,t,n),n?(r[Jt].P&&(St(e),st(4)),ut(t)&&(t=It(e,t),e.l||Ot(e,t)),e.u&&xt("Patches").M(r[Jt].t,t,e.u,e.s)):t=It(e,r,[]),St(e),e.u&&e.v(e.u,e.s),t!==Wt?t:void 0}function It(t,e,r){if(wt(e))return e;var n=e[Jt];if(!n)return ct(e,(function(i,o){return Mt(t,n,e,i,o,r)}),!0),e;if(n.A!==t)return e;if(!n.P)return Ot(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=4===n.i||5===n.i?n.o=mt(n.k):n.o;ct(3===n.i?new Set(i):i,(function(e,o){return Mt(t,n,i,e,o,r)})),Ot(t,i,!1),r&&t.u&&xt("Patches").R(n,r,t.u,t.s)}return n.o}function Mt(t,e,r,n,i,o){if(lt(i)){var a=It(t,i,o&&e&&3!==e.i&&!ft(e.D,n)?o.concat(n):void 0);if(At(r,n,a),!lt(a))return;t.m=!1}if(ut(i)&&!wt(i)){if(!t.h.F&&t._<1)return;It(t,i),e&&e.A.l||Ot(t,i)}}function Ot(t,e,r){void 0===r&&(r=!1),t.h.F&&t.m&&bt(e,r)}function Pt(t,e){var r=t[Jt];return(r?vt(r):t)[e]}function Ft(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function Ut(t){t.P||(t.P=!0,t.l&&Ut(t.l))}function Rt(t){t.o||(t.o=mt(t.t))}function Dt(t,e,r){var n=gt(e)?xt("MapSet").N(e,r):yt(e)?xt("MapSet").T(e,r):t.g?function(t,e){var r=Array.isArray(t),n={i:r?1:0,A:e?e.A:Bt(),P:!1,I:!1,D:{},l:e,t:t,k:null,o:null,j:null,C:!1},i=n,o=re;r&&(i=[n],o=ne);var a=Proxy.revocable(i,o),s=a.revoke,l=a.proxy;return n.k=l,n.j=s,l}(e,r):xt("ES5").J(e,r);return(r?r.A:Bt()).p.push(n),n}function jt(t){return lt(t)||st(22,t),function t(e){if(!ut(e))return e;var r,n=e[Jt],i=ht(e);if(n){if(!n.P&&(n.i<4||!xt("ES5").K(n)))return n.t;n.I=!0,r=Ht(e,i),n.I=!1}else r=Ht(e,i);return ct(r,(function(e,i){n&&pt(n.t,e)===i||At(r,e,t(i))})),3===i?new Set(r):r}(t)}function Ht(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return mt(t)}function Qt(){function t(t,e){var r=i[t];return r?r.enumerable=e:i[t]=r={configurable:!0,enumerable:e,get:function(){var e=this[Jt];return re.get(e,t)},set:function(e){var r=this[Jt];re.set(r,t,e)}},r}function e(t){for(var e=t.length-1;e>=0;e--){var i=t[e][Jt];if(!i.P)switch(i.i){case 5:n(i)&&Ut(i);break;case 4:r(i)&&Ut(i)}}}function r(t){for(var e=t.t,r=t.k,n=$t(r),i=n.length-1;i>=0;i--){var o=n[i];if(o!==Jt){var a=e[o];if(void 0===a&&!ft(e,o))return!0;var s=r[o],l=s&&s[Jt];if(l?l.t!==a:!dt(s,a))return!0}}var u=!!e[Jt];return n.length!==$t(e).length+(u?0:1)}function n(t){var e=t.k;if(e.length!==t.t.length)return!0;var r=Object.getOwnPropertyDescriptor(e,e.length-1);if(r&&!r.get)return!0;for(var n=0;n<e.length;n++)if(!e.hasOwnProperty(n))return!0;return!1}var i={};Et("ES5",{J:function(e,r){var n=Array.isArray(e),i=function(e,r){if(e){for(var n=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(n,""+i,t(i,!0));return n}var o=te(r);delete o[Jt];for(var a=$t(o),s=0;s<a.length;s++){var l=a[s];o[l]=t(l,e||!!o[l].enumerable)}return Object.create(Object.getPrototypeOf(r),o)}(n,e),o={i:n?5:4,A:r?r.A:Bt(),P:!1,I:!1,D:{},l:r,t:e,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,Jt,{value:o,writable:!0}),i},S:function(t,r,i){i?lt(r)&&r[Jt].A===t&&e(t.p):(t.u&&function t(e){if(e&&"object"==typeof e){var r=e[Jt];if(r){var i=r.t,o=r.k,a=r.D,s=r.i;if(4===s)ct(o,(function(e){e!==Jt&&(void 0!==i[e]||ft(i,e)?a[e]||t(o[e]):(a[e]=!0,Ut(r)))})),ct(i,(function(t){void 0!==o[t]||ft(o,t)||(a[t]=!1,Ut(r))}));else if(5===s){if(n(r)&&(Ut(r),a.length=!0),o.length<i.length)for(var l=o.length;l<i.length;l++)a[l]=!1;else for(var u=i.length;u<o.length;u++)a[u]=!0;for(var c=Math.min(o.length,i.length),h=0;h<c;h++)o.hasOwnProperty(h)||(a[h]=!0),void 0===a[h]&&t(o[h])}}}}(t.p[0]),e(t.p))},K:function(t){return 4===t.i?r(t):n(t)}})}!function(t){Y=t}(H.useSyncExternalStoreWithSelector),function(t){t}(j.useSyncExternalStore),ot=Q.unstable_batchedUpdates,z=ot;var zt,Vt,Gt="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),qt="undefined"!=typeof Map,Kt="undefined"!=typeof Set,Yt="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Wt=Gt?Symbol.for("immer-nothing"):((zt={})["immer-nothing"]=!0,zt),Xt=Gt?Symbol.for("immer-draftable"):"__$immer_draftable",Jt=Gt?Symbol.for("immer-state"):"__$immer_state",Zt=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),$t="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,te=Object.getOwnPropertyDescriptors||function(t){var e={};return $t(t).forEach((function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)})),e},ee={},re={get:function(t,e){if(e===Jt)return t;var r=vt(t);if(!ft(r,e))return function(t,e,r){var n,i=Ft(e,r);return i?"value"in i?i.value:null===(n=i.get)||void 0===n?void 0:n.call(t.k):void 0}(t,r,e);var n=r[e];return t.I||!ut(n)?n:n===Pt(t.t,e)?(Rt(t),t.o[e]=Dt(t.A.h,n,t)):n},has:function(t,e){return e in vt(t)},ownKeys:function(t){return Reflect.ownKeys(vt(t))},set:function(t,e,r){var n=Ft(vt(t),e);if(null==n?void 0:n.set)return n.set.call(t.k,r),!0;if(!t.P){var i=Pt(vt(t),e),o=null==i?void 0:i[Jt];if(o&&o.t===r)return t.o[e]=r,t.D[e]=!1,!0;if(dt(r,i)&&(void 0!==r||ft(t.t,e)))return!0;Rt(t),Ut(t)}return t.o[e]===r&&"number"!=typeof r&&(void 0!==r||e in t.o)||(t.o[e]=r,t.D[e]=!0,!0)},deleteProperty:function(t,e){return void 0!==Pt(t.t,e)||e in t.t?(t.D[e]=!1,Rt(t),Ut(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=vt(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:n.enumerable,value:r[e]}:n},defineProperty:function(){st(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){st(12)}},ne={};ct(re,(function(t,e){ne[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),ne.deleteProperty=function(t,e){return ne.set.call(this,t,e,void 0)},ne.set=function(t,e,r){return re.set.call(this,t[0],e,r,t[0])};var ie=function(){function t(t){var e=this;this.g=Yt,this.F=!0,this.produce=function(t,r,n){if("function"==typeof t&&"function"!=typeof r){var i=r;r=t;var o=e;return function(t){var e=this;void 0===t&&(t=i);for(var n=arguments.length,a=Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];return o.produce(t,(function(t){var n;return(n=r).call.apply(n,[e,t].concat(a))}))}}var a;if("function"!=typeof r&&st(6),void 0!==n&&"function"!=typeof n&&st(7),ut(t)){var s=Tt(e),l=Dt(e,t,void 0),u=!0;try{a=r(l),u=!1}finally{u?St(s):kt(s)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(t){return Ct(s,n),Lt(t,s)}),(function(t){throw St(s),t})):(Ct(s,n),Lt(a,s))}if(!t||"object"!=typeof t){if(void 0===(a=r(t))&&(a=t),a===Wt&&(a=void 0),e.F&&bt(a,!0),n){var c=[],h=[];xt("Patches").M(t,a,c,h),n(c,h)}return a}st(21,t)},this.produceWithPatches=function(t,r){if("function"==typeof t)return function(r){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return e.produceWithPatches(r,(function(e){return t.apply(void 0,[e].concat(i))}))};var n,i,o=e.produce(t,r,(function(t,e){n=t,i=e}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(t){return[t,n,i]})):[o,n,i]},"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze)}var e=t.prototype;return e.createDraft=function(t){ut(t)||st(8),lt(t)&&(t=jt(t));var e=Tt(this),r=Dt(this,t,void 0);return r[Jt].C=!0,kt(e),r},e.finishDraft=function(t,e){var r=(t&&t[Jt]).A;return Ct(r,e),Lt(void 0,r)},e.setAutoFreeze=function(t){this.F=t},e.setUseProxies=function(t){t&&!Yt&&st(20),this.g=t},e.applyPatches=function(t,e){var r;for(r=e.length-1;r>=0;r--){var n=e[r];if(0===n.path.length&&"replace"===n.op){t=n.value;break}}r>-1&&(e=e.slice(r+1));var i=xt("Patches").$;return lt(t)?i(t,e):this.produce(t,(function(t){return i(t,e)}))},t}(),oe=new ie,ae=oe.produce,se=(oe.produceWithPatches.bind(oe),oe.setAutoFreeze.bind(oe),oe.setUseProxies.bind(oe),oe.applyPatches.bind(oe),oe.createDraft.bind(oe),oe.finishDraft.bind(oe),ae),le=__webpack_require__(4942);function ue(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ce(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ue(Object(r),!0).forEach((function(e){(0,le.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function he(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var fe="function"===typeof Symbol&&Symbol.observable||"@@observable",pe=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ae={INIT:"@@redux/INIT"+pe(),REPLACE:"@@redux/REPLACE"+pe(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+pe()}};function de(t){if("object"!==typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function ge(t,e,r){var n;if("function"===typeof e&&"function"===typeof r||"function"===typeof r&&"function"===typeof arguments[3])throw new Error(he(0));if("function"===typeof e&&"undefined"===typeof r&&(r=e,e=void 0),"undefined"!==typeof r){if("function"!==typeof r)throw new Error(he(1));return r(ge)(t,e)}if("function"!==typeof t)throw new Error(he(2));var i=t,o=e,a=[],s=a,l=!1;function u(){s===a&&(s=a.slice())}function c(){if(l)throw new Error(he(3));return o}function h(t){if("function"!==typeof t)throw new Error(he(4));if(l)throw new Error(he(5));var e=!0;return u(),s.push(t),function(){if(e){if(l)throw new Error(he(6));e=!1,u();var r=s.indexOf(t);s.splice(r,1),a=null}}}function f(t){if(!de(t))throw new Error(he(7));if("undefined"===typeof t.type)throw new Error(he(8));if(l)throw new Error(he(9));try{l=!0,o=i(o,t)}finally{l=!1}for(var e=a=s,r=0;r<e.length;r++){(0,e[r])()}return t}function p(t){if("function"!==typeof t)throw new Error(he(10));i=t,f({type:Ae.REPLACE})}function A(){var t,e=h;return(t={subscribe:function(t){if("object"!==typeof t||null===t)throw new Error(he(11));function r(){t.next&&t.next(c())}return r(),{unsubscribe:e(r)}}})[fe]=function(){return this},t}return f({type:Ae.INIT}),(n={dispatch:f,subscribe:h,getState:c,replaceReducer:p})[fe]=A,n}function ye(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++){var i=e[n];0,"function"===typeof t[i]&&(r[i]=t[i])}var o,a=Object.keys(r);try{!function(t){Object.keys(t).forEach((function(e){var r=t[e];if("undefined"===typeof r(void 0,{type:Ae.INIT}))throw new Error(he(12));if("undefined"===typeof r(void 0,{type:Ae.PROBE_UNKNOWN_ACTION()}))throw new Error(he(13))}))}(r)}catch(s){o=s}return function(t,e){if(void 0===t&&(t={}),o)throw o;for(var n=!1,i={},s=0;s<a.length;s++){var l=a[s],u=r[l],c=t[l],h=u(c,e);if("undefined"===typeof h){e&&e.type;throw new Error(he(14))}i[l]=h,n=n||h!==c}return(n=n||a.length!==Object.keys(t).length)?i:t}}function ve(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function me(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(t){return function(){var r=t.apply(void 0,arguments),n=function(){throw new Error(he(15))},i={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},o=e.map((function(t){return t(i)}));return n=ve.apply(void 0,o)(r.dispatch),ce(ce({},r),{},{dispatch:n})}}}function be(t){return function(e){var r=e.dispatch,n=e.getState;return function(e){return function(i){return"function"===typeof i?i(r,n,t):e(i)}}}}var _e=be();_e.withExtraArgument=be;var we=_e,xe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ee=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Be=function(t,e){for(var r=0,n=e.length,i=t.length;r<n;r++,i++)t[i]=e[r];return t},Ce=Object.defineProperty,Se=Object.defineProperties,ke=Object.getOwnPropertyDescriptors,Te=Object.getOwnPropertySymbols,Ne=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable,Ie=function(t,e,r){return e in t?Ce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},Me=function(t,e){for(var r in e||(e={}))Ne.call(e,r)&&Ie(t,r,e[r]);if(Te)for(var n=0,i=Te(e);n<i.length;n++){r=i[n];Le.call(e,r)&&Ie(t,r,e[r])}return t},Oe=function(t,e){return Se(t,ke(e))},Pe=function(t,e,r){return new Promise((function(n,i){var o=function(t){try{s(r.next(t))}catch(e){i(e)}},a=function(t){try{s(r.throw(t))}catch(e){i(e)}},s=function(t){return t.done?n(t.value):Promise.resolve(t.value).then(o,a)};s((r=r.apply(t,e)).next())}))},Fe="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?ve:ve.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function Ue(t){if("object"!==typeof t||null===t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;for(var r=e;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return e===r}var Re=function(t){function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=t.apply(this,r)||this;return Object.setPrototypeOf(i,e.prototype),i}return xe(e,t),Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.prototype.concat.apply(this,e)},e.prototype.prepend=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 1===t.length&&Array.isArray(t[0])?new(e.bind.apply(e,Be([void 0],t[0].concat(this)))):new(e.bind.apply(e,Be([void 0],t.concat(this))))},e}(Array);function De(){return function(t){return function(t){void 0===t&&(t={});var e=t.thunk,r=void 0===e||e,n=(t.immutableCheck,t.serializableCheck,new Re);r&&(!function(t){return"boolean"===typeof t}(r)?n.push(we.withExtraArgument(r.extraArgument)):n.push(we));0;return n}(t)}}function je(t,e){function r(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(e){var i=e.apply(void 0,r);if(!i)throw new Error("prepareAction did not return an object");return Me(Me({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:r[0]}}return r.toString=function(){return""+t},r.type=t,r.match=function(e){return e.type===t},r}function He(t){var e,r={},n=[],i={addCase:function(t,e){var n="string"===typeof t?t:t.type;if(n in r)throw new Error("addCase cannot be called with two reducers for the same action type");return r[n]=e,i},addMatcher:function(t,e){return n.push({matcher:t,reducer:e}),i},addDefaultCase:function(t){return e=t,i}};return t(i),[r,n,e]}var Qe=function(t){void 0===t&&(t=21);for(var e="",r=t;r--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e},ze=["name","message","stack","code"],Ve=function(t,e){this.payload=t,this.meta=e},Ge=function(t,e){this.payload=t,this.meta=e},qe=function(t){if("object"===typeof t&&null!==t){for(var e={},r=0,n=ze;r<n.length;r++){var i=n[r];"string"===typeof t[i]&&(e[i]=t[i])}return e}return{message:String(t)}};function Ke(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}Object.assign;var Ye="listenerMiddleware";je(Ye+"/add"),je(Ye+"/removeAll"),je(Ye+"/remove");Qt();var We=__webpack_require__(5861),Xe=__webpack_require__(7757),Je=__webpack_require__.n(Xe),Ze=function(t,e,r){var n=je(t+"/fulfilled",(function(t,e,r,n){return{payload:t,meta:Oe(Me({},n||{}),{arg:r,requestId:e,requestStatus:"fulfilled"})}})),i=je(t+"/pending",(function(t,e,r){return{payload:void 0,meta:Oe(Me({},r||{}),{arg:e,requestId:t,requestStatus:"pending"})}})),o=je(t+"/rejected",(function(t,e,n,i,o){return{payload:i,error:(r&&r.serializeError||qe)(t||"Rejected"),meta:Oe(Me({},o||{}),{arg:n,requestId:e,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==t?void 0:t.name),condition:"ConditionError"===(null==t?void 0:t.name)})}})),a="undefined"!==typeof AbortController?AbortController:function(){function t(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){}}}return t.prototype.abort=function(){0},t}();return Object.assign((function(t){return function(s,l,u){var c,h=(null==r?void 0:r.idGenerator)?r.idGenerator(t):Qe(),f=new a,p=new Promise((function(t,e){return f.signal.addEventListener("abort",(function(){return e({name:"AbortError",message:c||"Aborted"})}))})),A=!1;var d=function(){return Pe(this,null,(function(){var a,c,d,g,y;return Ee(this,(function(v){switch(v.label){case 0:return v.trys.push([0,4,,5]),g=null==(a=null==r?void 0:r.condition)?void 0:a.call(r,t,{getState:l,extra:u}),null===(m=g)||"object"!==typeof m||"function"!==typeof m.then?[3,2]:[4,g];case 1:g=v.sent(),v.label=2;case 2:if(!1===g)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return A=!0,s(i(h,t,null==(c=null==r?void 0:r.getPendingMeta)?void 0:c.call(r,{requestId:h,arg:t},{getState:l,extra:u}))),[4,Promise.race([p,Promise.resolve(e(t,{dispatch:s,getState:l,extra:u,requestId:h,signal:f.signal,rejectWithValue:function(t,e){return new Ve(t,e)},fulfillWithValue:function(t,e){return new Ge(t,e)}})).then((function(e){if(e instanceof Ve)throw e;return e instanceof Ge?n(e.payload,h,t,e.meta):n(e,h,t)}))])];case 3:return d=v.sent(),[3,5];case 4:return y=v.sent(),d=y instanceof Ve?o(null,h,t,y.payload,y.meta):o(y,h,t),[3,5];case 5:return r&&!r.dispatchConditionRejection&&o.match(d)&&d.meta.condition||s(d),[2,d]}var m}))}))}();return Object.assign(d,{abort:function(t){A&&(c=t,f.abort())},requestId:h,arg:t,unwrap:function(){return d.then(Ke)}})}}),{pending:i,rejected:o,fulfilled:n,typePrefix:t})}("form/getPositions",function(){var t=(0,We.Z)(Je().mark((function t(e,r){var n,i,o,a,s,l,u,c,h,f;return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.queryOrigin,i=e.queryDestination,o=r.rejectWithValue,t.prev=2,t.next=5,fetch("https://geocode.search.hereapi.com/v1/geocode?q=".concat(n,"&apiKey=").concat("VA1gIcfPsJdPHyzx-p6lHd9sBSETlmo_fEbU46zJaIw"));case 5:return a=t.sent,t.next=8,fetch("https://geocode.search.hereapi.com/v1/geocode?q=".concat(i,"&apiKey=").concat("VA1gIcfPsJdPHyzx-p6lHd9sBSETlmo_fEbU46zJaIw"));case 8:return s=t.sent,t.next=11,a.json();case 11:return l=t.sent,t.next=14,s.json();case 14:return u=t.sent,t.next=17,fetch("https://router.hereapi.com/v8/routes?transportMode=car&origin=".concat(l.items[0].position.lat,",").concat(l.items[0].position.lng,"&destination=").concat(u.items[0].position.lat,",").concat(u.items[0].position.lng,"&return=summary&apiKey=").concat("VA1gIcfPsJdPHyzx-p6lHd9sBSETlmo_fEbU46zJaIw"));case 17:return c=t.sent,t.next=20,c.json();case 20:return h=t.sent,f={origin:{lat:l.items[0].position.lat,lng:l.items[0].position.lng,queryOrigin:n},destination:{lat:u.items[0].position.lat,lng:u.items[0].position.lng,queryDestination:i},routeLength:+(h.routes[0].sections[0].summary.length/1e3).toFixed(2)},t.abrupt("return",f);case 25:return t.prev=25,t.t0=t.catch(2),t.abrupt("return",o(t.t0.message));case 28:case"end":return t.stop()}}),t,null,[[2,25]])})));return function(e,r){return t.apply(this,arguments)}}()),$e=function(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");var r,n="function"==typeof t.initialState?t.initialState:se(t.initialState,(function(){})),i=t.reducers||{},o=Object.keys(i),a={},s={},l={};function u(){var e="function"===typeof t.extraReducers?He(t.extraReducers):[t.extraReducers],r=e[0],i=void 0===r?{}:r,o=e[1],a=void 0===o?[]:o,l=e[2],u=void 0===l?void 0:l,c=Me(Me({},i),s);return function(t,e,r,n){void 0===r&&(r=[]);var i,o="function"===typeof e?He(e):[e,r,n],a=o[0],s=o[1],l=o[2];if(function(t){return"function"===typeof t}(t))i=function(){return se(t(),(function(){}))};else{var u=se(t,(function(){}));i=function(){return u}}function c(t,e){void 0===t&&(t=i());var r=Be([a[e.type]],s.filter((function(t){return(0,t.matcher)(e)})).map((function(t){return t.reducer})));return 0===r.filter((function(t){return!!t})).length&&(r=[l]),r.reduce((function(t,r){if(r){var n;if(lt(t))return"undefined"===typeof(n=r(t,e))?t:n;if(ut(t))return se(t,(function(t){return r(t,e)}));if("undefined"===typeof(n=r(t,e))){if(null===t)return t;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}return t}),t)}return c.getInitialState=i,c}(n,c,a,u)}return o.forEach((function(t){var r,n,o=i[t],u=e+"/"+t;"reducer"in o?(r=o.reducer,n=o.prepare):r=o,a[t]=r,s[u]=r,l[t]=n?je(u,n):je(u)})),{name:e,reducer:function(t,e){return r||(r=u()),r(t,e)},actions:l,caseReducers:a,getInitialState:function(){return r||(r=u()),r.getInitialState()}}}({name:"form",initialState:{origin:{lat:0,lng:0},destination:{lat:0,lng:0},history:[],routeLength:0,error:null,status:"idle"},reducers:{clearStatus:function(t){t.status="idle"},clearError:function(t){t.error=null}},extraReducers:function(t){t.addCase(Ze.pending,(function(t){t.status="loading"})).addCase(Ze.fulfilled,(function(t,e){t.status="finished",t.origin.lat=e.payload.origin.lat,t.origin.lng=e.payload.origin.lng,t.destination.lat=e.payload.destination.lat,t.destination.lng=e.payload.destination.lng,t.history.unshift({origin:e.payload.origin.queryOrigin,destination:e.payload.destination.queryDestination,date:(new Date).toLocaleString()}),t.routeLength=e.payload.routeLength})).addCase(Ze.rejected,(function(t,e){var r;switch(t.status="failed",e.payload){case"Cannot read properties of undefined (reading 'position')":r="Origin or Destination Not Found!";break;case"Cannot read properties of undefined (reading 'sections')":r="Could Not Get There by Car!"}t.error=r}))}}),tr=$e.actions,er=tr.clearStatus,rr=tr.clearError,nr=function(t){return t.form},ir=function(t){var e,r=De(),n=t||{},i=n.reducer,o=void 0===i?void 0:i,a=n.middleware,s=void 0===a?r():a,l=n.devTools,u=void 0===l||l,c=n.preloadedState,h=void 0===c?void 0:c,f=n.enhancers,p=void 0===f?void 0:f;if("function"===typeof o)e=o;else{if(!Ue(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');e=ye(o)}var A=s;"function"===typeof A&&(A=A(r));var d=me.apply(void 0,A),g=ve;u&&(g=Fe(Me({trace:!1},"object"===typeof u&&u)));var y=[d];return Array.isArray(p)?y=Be([d],p):"function"===typeof p&&(y=p(y)),ge(e,h,g.apply(void 0,y))}({reducer:{form:$e.reducer}}),or="Form_Form__f3ojr",ar="Form_Error__BM52p",sr="Form_History__CAi4u",lr="Form_HistoryEl__YuVty",ur="Form_Loader__pLGhG",cr=function(){return at()},hr=J,fr=__webpack_require__(184);function pr(){var t=M(),r=hr(nr),i=cr(),o=(0,e.useState)(""),a=(0,n.Z)(o,2),s=a[0],l=a[1],u=(0,e.useState)(""),c=(0,n.Z)(u,2),h=c[0],f=c[1],p=function(){i(rr())};return(0,e.useEffect)((function(){"finished"===r.status?t("/map"):"failed"===r.status&&t("/")}),[r.status,t]),(0,fr.jsxs)("div",{className:or,children:[(0,fr.jsx)("h1",{children:"Maps App"}),(0,fr.jsx)("input",{type:"text",placeholder:"ORIGIN",onChange:function(t){l(t.target.value)},onClick:p}),(0,fr.jsx)("input",{type:"text",placeholder:"DESTINATION",onChange:function(t){f(t.target.value)},onClick:p}),(0,fr.jsx)("button",{onClick:function(){i(er()),i(Ze({queryOrigin:s,queryDestination:h}))},disabled:0===s.length||0===h.length,children:"Find your way"}),"loading"===r.status&&(0,fr.jsx)("div",{className:ur,children:"Loading..."}),r.error&&(0,fr.jsxs)("div",{className:ar,children:[(0,fr.jsx)("h3",{children:"Error:"}),(0,fr.jsx)("p",{children:r.error})]}),(0,fr.jsxs)("div",{className:sr,children:[r.history.length>0&&(0,fr.jsx)("h2",{style:{textAlign:"center"},children:"History:"}),r.history.length>0&&(0,fr.jsx)("ul",{children:r.history.map((function(t,e){return(0,fr.jsxs)("li",{className:lr,children:[t.date,":"," ",(0,fr.jsxs)("p",{style:{fontWeight:"bold"},children:[t.origin.toUpperCase()," ","->"," ",t.destination.toUpperCase()]})]},e)}))})]})]})}var Ar="Map_Map__1vXYT",dr="Map_TripData__eBZgq",gr="Map_Costs__YeEFB",yr="Map_Change__Y938W",vr=__webpack_require__(5892);var mr=__webpack_require__(7907),br=__webpack_require__.n(mr)();function _r(){var t=M(),r=hr(nr),i=cr(),o=(0,e.useState)(1),a=(0,n.Z)(o,2),s=a[0],l=a[1],u=(0,e.useState)(0),c=(0,n.Z)(u,2),h=c[0],f=c[1],p=(0,e.useState)(!1),A=(0,n.Z)(p,2),d=A[0],g=A[1],y=(0,e.useRef)(null),v=(0,e.useRef)(null);(0,e.useEffect)((function(){if("finished"===r.status){var t=new vr.Z.service.Platform({apikey:"VA1gIcfPsJdPHyzx-p6lHd9sBSETlmo_fEbU46zJaIw"}),e=t.createDefaultLayers(),n=new vr.Z.Map(y.current,e.vector.normal.map,{pixelRatio:window.devicePixelRatio,padding:{top:50,left:50,bottom:50,right:50}}),o={routingMode:"fast",transportMode:"car",origin:"".concat(r.origin.lat,",").concat(r.origin.lng),destination:"".concat(r.destination.lat,",").concat(r.destination.lng),return:"polyline"};t.getRoutingService(void 0,8).calculateRoute(o,(function(t){t.routes.length&&t.routes[0].sections.forEach((function(t){var e=vr.Z.geo.LineString.fromFlexiblePolyline(t.polyline),r=new vr.Z.map.Polyline(e,{style:{strokeColor:"blue",lineWidth:3},data:{}}),i=new vr.Z.map.Marker(t.departure.place.location),o=new vr.Z.map.Marker(t.arrival.place.location);n.addObjects([r,i,o]),n.getViewModel().setLookAtData({bounds:r.getBoundingBox()})}))}),(function(t){alert(t.message)})),i(er())}}),[r,i]),(0,e.useEffect)((function(){f(function(t,e){return+(1.1*(t*e+1e3*Math.ceil(e/800))).toFixed(2)}(s,r.routeLength))}),[s,r]);return(0,fr.jsxs)("div",{className:Ar,children:[(0,fr.jsx)("div",{ref:y,style:{width:"500px",height:"500px"}}),(0,fr.jsx)("div",{ref:v,children:(0,fr.jsx)("div",{className:dr,children:(0,fr.jsxs)("div",{className:gr,children:[(0,fr.jsx)("h1",{children:r.history[0].origin.toUpperCase()}),(0,fr.jsx)("h1",{children:"->"}),(0,fr.jsx)("h1",{children:r.history[0].destination.toUpperCase()}),(0,fr.jsxs)("h2",{children:["Total Cost: $",h]}),(0,fr.jsxs)("h4",{children:["Trip length: ",Math.ceil(r.routeLength/800)," day(s)"]}),(0,fr.jsxs)("h4",{children:["Distance: ",r.routeLength,"km"]}),(0,fr.jsxs)("h4",{children:["Cost per km: $",s]})]})})}),d?(0,fr.jsx)("div",{className:yr,children:(0,fr.jsx)("input",{name:"kmCost",type:"number",min:"0",step:"0.01",onChange:function(t){l(+t.target.value)},value:s})}):(0,fr.jsx)("button",{onClick:function(){g((function(t){return!t}))},children:"Change Cost per km"}),(0,fr.jsx)("button",{onClick:function(){t("/")},children:"Go Back"}),(0,fr.jsx)(br,{targetRef:v,filename:"trip.pdf",options:{},x:44,y:25,scale:1,children:function(t){var e=t.toPdf;return(0,fr.jsx)("button",{onClick:e,children:"Generate pdf"})}})]})}var wr="App_App__2+VHF";var xr=function(){return(0,fr.jsx)("div",{className:wr,children:(0,fr.jsxs)(U,{children:[(0,fr.jsx)(P,{path:"/",element:(0,fr.jsx)(pr,{})}),(0,fr.jsx)(P,{path:"/map",element:(0,fr.jsx)(_r,{})})]})})},Er=document.getElementById("root");(0,r.s)(Er).render((0,fr.jsx)(et,{store:ir,children:(0,fr.jsx)(D,{children:(0,fr.jsx)(xr,{})})}))}()})();
//# sourceMappingURL=main.e52251af.js.map